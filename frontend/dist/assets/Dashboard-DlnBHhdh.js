import{j as e}from"./ui-CEgDFHEN.js";import{r as s,L as a}from"./router-Cgxi-4fo.js";import{b as r}from"./useDashboardQueries-UcEXdvWr.js";import{R as t,m as i,q as l,r as d,s as n,aI as c,w as m,ak as o,x,B as h,C as g,ar as j,j as p,aC as b,aD as u,aE as N,A as v,aG as y,v as w,aw as f,ax as k,aj as D,o as z,F as M,G as A,U as C,a4 as q}from"./index-BnANEtVp.js";import"./progress-_P7boFqI.js";import{S}from"./scroll-area-xNq0XGhC.js";import{D as T}from"./DashboardLayout-Beti_5fJ.js";import{T as E,a as G,b as L,c as P,d as V,e as $}from"./table-DS2AyS3B.js";import{C as I}from"./circle-alert-MkLjJhtw.js";import{C as U}from"./clipboard-check-BF9lqbed.js";import{T as B}from"./trending-up-BzG37nmY.js";import{C as F}from"./chart-column-CJxZpwfF.js";import"./react-0RZ2pslC.js";import"./query-CdiCT4_A.js";import"./charts-D4j3G6dB.js";import"./index-jVOyRz7F.js";const H={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},Q={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:300,damping:24}}},R={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.5}}},J=()=>{const{user:J,dashboardData:K,isLoading:O,isError:W,error:X}=r(),Y=s.useMemo((()=>K?.attendance?.length?Math.round(K.attendance.reduce(((e,s)=>{const a=s.present+s.absent;return e+s.present/a*100}),0)/K.attendance.length):0),[K]);return s.useMemo((()=>J?.firstName&&J?.lastName?`${J.firstName[0]}${J.lastName[0]}`:"T"),[J]),e.jsx(T,{loading:O,error:W?X?.message||"Une erreur est survenue lors du chargement des données":null,className:"p-0",user:J,headerIcon:t,headerTitle:"Tableau de bord formateur",children:e.jsxs("div",{className:"container p-4 mx-auto sm:p-6 lg:p-8 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[K?.formation&&e.jsx(i.div,{variants:R,initial:"hidden",animate:"visible",className:"mb-8",children:e.jsxs(l,{className:"overflow-hidden border-none shadow-lg bg-gradient-to-r from-primary/5 to-primary/10 dark:from-primary/10 dark:to-primary/20",children:[e.jsx(d,{className:"pb-2",children:e.jsxs(n,{className:"text-xl text-primary/90 flex items-center gap-2",children:[e.jsx(c,{className:"h-5 w-5"}),"Informations de la formation"]})}),e.jsx(m,{children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Niveau"}),e.jsx("p",{className:"font-medium text-lg",children:K.formation.level})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Année"}),e.jsx("p",{className:"font-medium text-lg",children:K.formation.year})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Durée"}),e.jsx("p",{className:"font-medium text-lg",children:K.formation.duration})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Nombre d'étudiants"}),e.jsxs("p",{className:"font-medium text-lg",children:[K.formation.students," étudiants"]})]})]})})]})}),K&&e.jsxs(i.div,{variants:H,initial:"hidden",animate:"visible",className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[e.jsx(i.div,{variants:Q,children:e.jsxs(l,{className:"border-none shadow-md hover:shadow-lg transition-shadow duration-300 h-full overflow-hidden bg-white dark:bg-gray-800",children:[e.jsxs(d,{className:"flex flex-row items-center justify-between pb-2 pt-6 px-6",children:[e.jsx(n,{className:"text-lg font-medium text-gray-800 dark:text-gray-200",children:"Modules enseignés"}),e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx(o,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})})]}),e.jsxs(m,{className:"px-6 pb-4",children:[e.jsx("div",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:K.courses.length}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"modules ce semestre"})]}),e.jsx(x,{className:"pt-0 px-6 pb-6",children:e.jsxs(h,{variant:"ghost",size:"sm",className:"text-blue-600 dark:text-blue-400 p-0 h-auto hover:bg-transparent hover:underline",children:[e.jsx("span",{className:"text-sm",children:"Voir les détails"}),e.jsx(g,{className:"h-4 w-4 ml-1"})]})})]})}),e.jsx(i.div,{variants:Q,children:e.jsxs(l,{className:"border-none shadow-md hover:shadow-lg transition-shadow duration-300 h-full overflow-hidden bg-white dark:bg-gray-800",children:[e.jsxs(d,{className:"flex flex-row items-center justify-between pb-2 pt-6 px-6",children:[e.jsx(n,{className:"text-lg font-medium text-gray-800 dark:text-gray-200",children:"Taux de présence"}),e.jsx("div",{className:"h-10 w-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx(j,{className:"h-5 w-5 text-green-600 dark:text-green-400"})})]}),e.jsxs(m,{className:"px-6 pb-4",children:[e.jsxs("div",{className:"text-4xl font-bold text-green-600 dark:text-green-400",children:[Y,"%"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"moyenne sur tous les modules"}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"w-full bg-gray-100 dark:bg-gray-700 rounded-full h-2.5 mb-1",children:e.jsx("div",{className:"h-2.5 rounded-full bg-gradient-to-r from-green-400 to-green-600 dark:from-green-500 dark:to-green-700",style:{width:`${Y}%`}})})})]}),e.jsx(x,{className:"pt-0 px-6 pb-6",children:e.jsxs(h,{variant:"ghost",size:"sm",className:"text-green-600 dark:text-green-400 p-0 h-auto hover:bg-transparent hover:underline",children:[e.jsx("span",{className:"text-sm",children:"Voir les détails"}),e.jsx(g,{className:"h-4 w-4 ml-1"})]})})]})}),e.jsx(i.div,{variants:Q,children:e.jsxs(l,{className:"border-none shadow-md hover:shadow-lg transition-shadow duration-300 h-full overflow-hidden bg-white dark:bg-gray-800",children:[e.jsxs(d,{className:"flex flex-row items-center justify-between pb-2 pt-6 px-6",children:[e.jsx(n,{className:"text-lg font-medium text-gray-800 dark:text-gray-200",children:"Alertes"}),e.jsx("div",{className:"h-10 w-10 rounded-full bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center",children:e.jsx(I,{className:"h-5 w-5 text-amber-600 dark:text-amber-400"})})]}),e.jsxs(m,{className:"px-6 pb-4",children:[e.jsx("div",{className:"text-4xl font-bold text-amber-600 dark:text-amber-400",children:K.alerts.length}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"à traiter"})]}),e.jsx(x,{className:"pt-0 px-6 pb-6",children:e.jsxs(h,{variant:"ghost",size:"sm",className:"text-amber-600 dark:text-amber-400 p-0 h-auto hover:bg-transparent hover:underline",children:[e.jsx("span",{className:"text-sm",children:"Voir les détails"}),e.jsx(g,{className:"h-4 w-4 ml-1"})]})})]})})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 mb-8",children:[e.jsxs(a,{to:"/teacher/signature-monitoring",className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:[e.jsx(U,{className:"h-5 w-5"}),e.jsx("span",{children:"Suivi des signatures"})]}),e.jsxs(a,{to:"/teacher/signature-history",className:"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition-colors",children:[e.jsx(p,{className:"h-5 w-5"}),e.jsx("span",{children:"Mon historique de signatures"})]}),e.jsxs(a,{to:"/teacher/attendance",className:"flex items-center gap-2 px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition-colors",children:[e.jsx(j,{className:"h-5 w-5"}),e.jsx("span",{children:"Gestion des présences"})]})]}),K&&e.jsx(i.div,{variants:R,initial:"hidden",animate:"visible",children:e.jsxs(b,{defaultValue:"schedule",className:"space-y-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-1 rounded-lg shadow-md",children:e.jsxs(u,{className:"w-full grid grid-cols-4 gap-2 p-1 bg-gray-100 dark:bg-gray-700/50 rounded-md",children:[e.jsxs(N,{value:"schedule",className:"data-[state=active]:bg-white dark:data-[state=active]:bg-gray-800 data-[state=active]:shadow-sm rounded-md transition-all",children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),"Emploi du temps"]}),e.jsxs(N,{value:"attendance",className:"data-[state=active]:bg-white dark:data-[state=active]:bg-gray-800 data-[state=active]:shadow-sm rounded-md transition-all",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Présences"]}),e.jsxs(N,{value:"grades",className:"data-[state=active]:bg-white dark:data-[state=active]:bg-gray-800 data-[state=active]:shadow-sm rounded-md transition-all",children:[e.jsx(t,{className:"h-4 w-4 mr-2"}),"Notes"]}),e.jsxs(N,{value:"alerts",className:"data-[state=active]:bg-white dark:data-[state=active]:bg-gray-800 data-[state=active]:shadow-sm rounded-md transition-all",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Alertes"]})]})}),e.jsx(v,{mode:"wait",children:e.jsx(y,{value:"schedule",className:"mt-6",children:e.jsx(i.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:e.jsxs(l,{className:"border-none shadow-lg overflow-hidden",children:[e.jsx(d,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(n,{className:"flex items-center gap-2 text-blue-800 dark:text-blue-300",children:[e.jsx(p,{className:"h-5 w-5"}),"Emploi du temps"]}),e.jsx(w,{children:"Planning des modules de la formation"})]}),e.jsxs(h,{size:"sm",variant:"outline",className:"gap-1",children:[e.jsx(f,{className:"h-4 w-4"}),e.jsx("span",{children:"Aujourd'hui"})]})]})}),e.jsx(m,{className:"p-0",children:e.jsx(S,{className:"h-[400px]",children:e.jsxs(E,{children:[e.jsx(G,{className:"bg-gray-50 dark:bg-gray-800/50 sticky top-0",children:e.jsxs(L,{children:[e.jsx(P,{className:"w-[40%]",children:"Module"}),e.jsx(P,{className:"w-[30%]",children:"Partie"}),e.jsx(P,{className:"w-[30%]",children:"Horaire"})]})}),e.jsx(V,{children:K.courses.map((s=>e.jsxs(L,{className:"hover:bg-blue-50/50 dark:hover:bg-blue-900/10 transition-colors",children:[e.jsx($,{className:"font-medium",children:s.name}),e.jsx($,{children:s.module}),e.jsx($,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-3 w-3 text-gray-400"}),s.schedule]})})]},s.id)))})]})})})]})})})}),e.jsx(v,{mode:"wait",children:e.jsx(y,{value:"attendance",className:"mt-6",children:e.jsx(i.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:e.jsxs(l,{className:"border-none shadow-lg overflow-hidden",children:[e.jsx(d,{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(n,{className:"flex items-center gap-2 text-green-800 dark:text-green-300",children:[e.jsx(U,{className:"h-5 w-5"}),"Suivi des présences"]}),e.jsx(w,{children:"État des présences par module"})]}),e.jsxs(h,{size:"sm",variant:"outline",className:"gap-1",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx("span",{children:"Statistiques"})]})]})}),e.jsx(m,{className:"p-0",children:e.jsx(S,{className:"h-[400px]",children:e.jsxs(E,{children:[e.jsx(G,{className:"bg-gray-50 dark:bg-gray-800/50 sticky top-0",children:e.jsxs(L,{children:[e.jsx(P,{className:"w-[40%]",children:"Module"}),e.jsx(P,{className:"w-[20%]",children:"Date"}),e.jsx(P,{className:"w-[20%]",children:"Présents"}),e.jsx(P,{className:"w-[20%]",children:"Absents"})]})}),e.jsx(V,{children:K.attendance.map((s=>e.jsxs(L,{className:"hover:bg-green-50/50 dark:hover:bg-green-900/10 transition-colors",children:[e.jsx($,{className:"font-medium",children:s.module}),e.jsx($,{children:s.date}),e.jsx($,{children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(k,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200 dark:bg-green-900/20 dark:text-green-400 dark:border-green-800",children:[e.jsx(D,{className:"h-3 w-3 mr-1"}),s.present]})})}),e.jsx($,{children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(k,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200 dark:bg-red-900/20 dark:text-red-400 dark:border-red-800",children:[e.jsx(z,{className:"h-3 w-3 mr-1"}),s.absent]})})})]},s.id)))})]})})})]})})})}),e.jsx(v,{mode:"wait",children:e.jsx(y,{value:"grades",className:"mt-6",children:e.jsx(i.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:e.jsxs(l,{className:"border-none shadow-lg overflow-hidden",children:[e.jsx(d,{className:"bg-gradient-to-r from-purple-50 to-violet-50 dark:from-purple-900/20 dark:to-violet-900/20 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(n,{className:"flex items-center gap-2 text-purple-800 dark:text-purple-300",children:[e.jsx(t,{className:"h-5 w-5"}),"Notes des étudiants"]}),e.jsx(w,{children:"Dernières notes enregistrées par module"})]}),e.jsxs(h,{size:"sm",variant:"outline",className:"gap-1",children:[e.jsx(F,{className:"h-4 w-4"}),e.jsx("span",{children:"Statistiques"})]})]})}),e.jsx(m,{className:"p-0",children:e.jsx(S,{className:"h-[400px]",children:e.jsxs(E,{children:[e.jsx(G,{className:"bg-gray-50 dark:bg-gray-800/50 sticky top-0",children:e.jsxs(L,{children:[e.jsx(P,{className:"w-[40%]",children:"Étudiant"}),e.jsx(P,{className:"w-[40%]",children:"Module"}),e.jsx(P,{className:"w-[20%]",children:"Note"})]})}),e.jsx(V,{children:K.grades.map((s=>e.jsxs(L,{className:"hover:bg-purple-50/50 dark:hover:bg-purple-900/10 transition-colors",children:[e.jsx($,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-6 w-6",children:e.jsx(A,{className:"text-xs bg-gray-200 dark:bg-gray-700",children:e.jsx(C,{className:"h-3 w-3"})})}),e.jsx("span",{className:"font-medium",children:s.student})]})}),e.jsx($,{children:s.module}),e.jsx($,{children:e.jsxs(k,{className:`\n                                        ${s.grade>=80?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":s.grade>=60?"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}\n                                      `,children:[s.grade,"/100"]})})]},s.id)))})]})})})]})})})}),e.jsx(v,{mode:"wait",children:e.jsx(y,{value:"alerts",className:"mt-6",children:e.jsx(i.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:e.jsxs(l,{className:"border-none shadow-lg overflow-hidden",children:[e.jsx(d,{className:"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(n,{className:"flex items-center gap-2 text-amber-800 dark:text-amber-300",children:[e.jsx(I,{className:"h-5 w-5"}),"Alertes importantes"]}),e.jsx(w,{children:"Examens, réunions et échéances"})]}),e.jsxs(h,{size:"sm",variant:"outline",className:"gap-1",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx("span",{children:"Gérer les alertes"})]})]})}),e.jsx(m,{className:"p-6",children:e.jsx(S,{className:"h-[400px] pr-4",children:e.jsx("div",{className:"space-y-4",children:K.alerts.map(((s,a)=>e.jsx(i.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*a},children:e.jsx(l,{className:"overflow-hidden border-none shadow-sm hover:shadow-md transition-shadow",children:e.jsx(m,{className:"p-0",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"w-1.5 self-stretch "+("high"===s.priority?"bg-red-500":"bg-amber-500")}),e.jsxs("div",{className:"p-4 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(k,{variant:"high"===s.priority?"destructive":"warning",className:"capitalize",children:s.type}),e.jsx("span",{className:"text-xs text-gray-500",children:(new Date).toLocaleDateString()})]}),e.jsx("p",{className:"text-sm font-medium",children:s.message})]})]})})})},s.id)))})})})]})})})})]})})]})})};export{J as default};
