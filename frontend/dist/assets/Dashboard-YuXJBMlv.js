import{j as e}from"./ui-B9MhWaVJ.js";import{r as s}from"./router-D7BdrHDj.js";import{b as a}from"./useDashboardQueries-K_ZI7Szf.js";import{N as r,m as t,o as i,p as d,q as l,aw as n,s as c,a7 as m,v as o,B as x,C as h,ag as g,ap as j,aq as p,ar as b,i as N,A as u,au as v,r as y,a0 as f,al as w,a6 as k,n as z,y as D,z as A,U as M,$ as C}from"./index-DebaQ5DR.js";import"./progress-CFMoxU24.js";import{S as T}from"./scroll-area-DWwxjbDY.js";import{D as q}from"./DashboardLayout-Deh3sbWM.js";import{T as S,a as $,b as E,c as P,d as V,e as L}from"./table-DA0WkTUP.js";import{C as I}from"./circle-alert-CDRlly66.js";import{C as U}from"./clipboard-check-DTtjFWQ1.js";import{T as B}from"./trending-up-Com-meta.js";import{C as G}from"./chart-column-lozwy-77.js";import"./react-0RZ2pslC.js";import"./query-DKQ6_O-p.js";import"./charts-DkICKEBk.js";import"./index-jVOyRz7F.js";const H={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},Q={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:300,damping:24}}},F={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.5}}},J=()=>{const{user:J,dashboardData:K,isLoading:O,isError:R,error:W}=a(),X=s.useMemo((()=>K?.attendance?.length?Math.round(K.attendance.reduce(((e,s)=>{const a=s.present+s.absent;return e+s.present/a*100}),0)/K.attendance.length):0),[K]);return s.useMemo((()=>J?.firstName&&J?.lastName?`${J.firstName[0]}${J.lastName[0]}`:"T"),[J]),e.jsx(q,{loading:O,error:R?W?.message||"Une erreur est survenue lors du chargement des données":null,className:"p-0",user:J,headerIcon:r,headerTitle:"Tableau de bord formateur",children:e.jsxs("div",{className:"container p-4 mx-auto sm:p-6 lg:p-8 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[K?.formation&&e.jsx(t.div,{variants:F,initial:"hidden",animate:"visible",className:"mb-8",children:e.jsxs(i,{className:"overflow-hidden border-none shadow-lg bg-gradient-to-r from-primary/5 to-primary/10 dark:from-primary/10 dark:to-primary/20",children:[e.jsx(d,{className:"pb-2",children:e.jsxs(l,{className:"text-xl text-primary/90 flex items-center gap-2",children:[e.jsx(n,{className:"h-5 w-5"}),"Informations de la formation"]})}),e.jsx(c,{children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Niveau"}),e.jsx("p",{className:"font-medium text-lg",children:K.formation.level})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Année"}),e.jsx("p",{className:"font-medium text-lg",children:K.formation.year})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Durée"}),e.jsx("p",{className:"font-medium text-lg",children:K.formation.duration})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Nombre d'étudiants"}),e.jsxs("p",{className:"font-medium text-lg",children:[K.formation.students," étudiants"]})]})]})})]})}),K&&e.jsxs(t.div,{variants:H,initial:"hidden",animate:"visible",className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[e.jsx(t.div,{variants:Q,children:e.jsxs(i,{className:"border-none shadow-md hover:shadow-lg transition-shadow duration-300 h-full overflow-hidden bg-white dark:bg-gray-800",children:[e.jsxs(d,{className:"flex flex-row items-center justify-between pb-2 pt-6 px-6",children:[e.jsx(l,{className:"text-lg font-medium text-gray-800 dark:text-gray-200",children:"Modules enseignés"}),e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx(m,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})})]}),e.jsxs(c,{className:"px-6 pb-4",children:[e.jsx("div",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400",children:K.courses.length}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"modules ce semestre"})]}),e.jsx(o,{className:"pt-0 px-6 pb-6",children:e.jsxs(x,{variant:"ghost",size:"sm",className:"text-blue-600 dark:text-blue-400 p-0 h-auto hover:bg-transparent hover:underline",children:[e.jsx("span",{className:"text-sm",children:"Voir les détails"}),e.jsx(h,{className:"h-4 w-4 ml-1"})]})})]})}),e.jsx(t.div,{variants:Q,children:e.jsxs(i,{className:"border-none shadow-md hover:shadow-lg transition-shadow duration-300 h-full overflow-hidden bg-white dark:bg-gray-800",children:[e.jsxs(d,{className:"flex flex-row items-center justify-between pb-2 pt-6 px-6",children:[e.jsx(l,{className:"text-lg font-medium text-gray-800 dark:text-gray-200",children:"Taux de présence"}),e.jsx("div",{className:"h-10 w-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx(g,{className:"h-5 w-5 text-green-600 dark:text-green-400"})})]}),e.jsxs(c,{className:"px-6 pb-4",children:[e.jsxs("div",{className:"text-4xl font-bold text-green-600 dark:text-green-400",children:[X,"%"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"moyenne sur tous les modules"}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"w-full bg-gray-100 dark:bg-gray-700 rounded-full h-2.5 mb-1",children:e.jsx("div",{className:"h-2.5 rounded-full bg-gradient-to-r from-green-400 to-green-600 dark:from-green-500 dark:to-green-700",style:{width:`${X}%`}})})})]}),e.jsx(o,{className:"pt-0 px-6 pb-6",children:e.jsxs(x,{variant:"ghost",size:"sm",className:"text-green-600 dark:text-green-400 p-0 h-auto hover:bg-transparent hover:underline",children:[e.jsx("span",{className:"text-sm",children:"Voir les détails"}),e.jsx(h,{className:"h-4 w-4 ml-1"})]})})]})}),e.jsx(t.div,{variants:Q,children:e.jsxs(i,{className:"border-none shadow-md hover:shadow-lg transition-shadow duration-300 h-full overflow-hidden bg-white dark:bg-gray-800",children:[e.jsxs(d,{className:"flex flex-row items-center justify-between pb-2 pt-6 px-6",children:[e.jsx(l,{className:"text-lg font-medium text-gray-800 dark:text-gray-200",children:"Alertes"}),e.jsx("div",{className:"h-10 w-10 rounded-full bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center",children:e.jsx(I,{className:"h-5 w-5 text-amber-600 dark:text-amber-400"})})]}),e.jsxs(c,{className:"px-6 pb-4",children:[e.jsx("div",{className:"text-4xl font-bold text-amber-600 dark:text-amber-400",children:K.alerts.length}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"à traiter"})]}),e.jsx(o,{className:"pt-0 px-6 pb-6",children:e.jsxs(x,{variant:"ghost",size:"sm",className:"text-amber-600 dark:text-amber-400 p-0 h-auto hover:bg-transparent hover:underline",children:[e.jsx("span",{className:"text-sm",children:"Voir les détails"}),e.jsx(h,{className:"h-4 w-4 ml-1"})]})})]})})]}),K&&e.jsx(t.div,{variants:F,initial:"hidden",animate:"visible",children:e.jsxs(j,{defaultValue:"schedule",className:"space-y-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-1 rounded-lg shadow-md",children:e.jsxs(p,{className:"w-full grid grid-cols-4 gap-2 p-1 bg-gray-100 dark:bg-gray-700/50 rounded-md",children:[e.jsxs(b,{value:"schedule",className:"data-[state=active]:bg-white dark:data-[state=active]:bg-gray-800 data-[state=active]:shadow-sm rounded-md transition-all",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Emploi du temps"]}),e.jsxs(b,{value:"attendance",className:"data-[state=active]:bg-white dark:data-[state=active]:bg-gray-800 data-[state=active]:shadow-sm rounded-md transition-all",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Présences"]}),e.jsxs(b,{value:"grades",className:"data-[state=active]:bg-white dark:data-[state=active]:bg-gray-800 data-[state=active]:shadow-sm rounded-md transition-all",children:[e.jsx(r,{className:"h-4 w-4 mr-2"}),"Notes"]}),e.jsxs(b,{value:"alerts",className:"data-[state=active]:bg-white dark:data-[state=active]:bg-gray-800 data-[state=active]:shadow-sm rounded-md transition-all",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Alertes"]})]})}),e.jsx(u,{mode:"wait",children:e.jsx(v,{value:"schedule",className:"mt-6",children:e.jsx(t.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:e.jsxs(i,{className:"border-none shadow-lg overflow-hidden",children:[e.jsx(d,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(l,{className:"flex items-center gap-2 text-blue-800 dark:text-blue-300",children:[e.jsx(N,{className:"h-5 w-5"}),"Emploi du temps"]}),e.jsx(y,{children:"Planning des modules de la formation"})]}),e.jsxs(x,{size:"sm",variant:"outline",className:"gap-1",children:[e.jsx(f,{className:"h-4 w-4"}),e.jsx("span",{children:"Aujourd'hui"})]})]})}),e.jsx(c,{className:"p-0",children:e.jsx(T,{className:"h-[400px]",children:e.jsxs(S,{children:[e.jsx($,{className:"bg-gray-50 dark:bg-gray-800/50 sticky top-0",children:e.jsxs(E,{children:[e.jsx(P,{className:"w-[40%]",children:"Module"}),e.jsx(P,{className:"w-[30%]",children:"Partie"}),e.jsx(P,{className:"w-[30%]",children:"Horaire"})]})}),e.jsx(V,{children:K.courses.map((s=>e.jsxs(E,{className:"hover:bg-blue-50/50 dark:hover:bg-blue-900/10 transition-colors",children:[e.jsx(L,{className:"font-medium",children:s.name}),e.jsx(L,{children:s.module}),e.jsx(L,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-3 w-3 text-gray-400"}),s.schedule]})})]},s.id)))})]})})})]})})})}),e.jsx(u,{mode:"wait",children:e.jsx(v,{value:"attendance",className:"mt-6",children:e.jsx(t.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:e.jsxs(i,{className:"border-none shadow-lg overflow-hidden",children:[e.jsx(d,{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(l,{className:"flex items-center gap-2 text-green-800 dark:text-green-300",children:[e.jsx(U,{className:"h-5 w-5"}),"Suivi des présences"]}),e.jsx(y,{children:"État des présences par module"})]}),e.jsxs(x,{size:"sm",variant:"outline",className:"gap-1",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx("span",{children:"Statistiques"})]})]})}),e.jsx(c,{className:"p-0",children:e.jsx(T,{className:"h-[400px]",children:e.jsxs(S,{children:[e.jsx($,{className:"bg-gray-50 dark:bg-gray-800/50 sticky top-0",children:e.jsxs(E,{children:[e.jsx(P,{className:"w-[40%]",children:"Module"}),e.jsx(P,{className:"w-[20%]",children:"Date"}),e.jsx(P,{className:"w-[20%]",children:"Présents"}),e.jsx(P,{className:"w-[20%]",children:"Absents"})]})}),e.jsx(V,{children:K.attendance.map((s=>e.jsxs(E,{className:"hover:bg-green-50/50 dark:hover:bg-green-900/10 transition-colors",children:[e.jsx(L,{className:"font-medium",children:s.module}),e.jsx(L,{children:s.date}),e.jsx(L,{children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(w,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200 dark:bg-green-900/20 dark:text-green-400 dark:border-green-800",children:[e.jsx(k,{className:"h-3 w-3 mr-1"}),s.present]})})}),e.jsx(L,{children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(w,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200 dark:bg-red-900/20 dark:text-red-400 dark:border-red-800",children:[e.jsx(z,{className:"h-3 w-3 mr-1"}),s.absent]})})})]},s.id)))})]})})})]})})})}),e.jsx(u,{mode:"wait",children:e.jsx(v,{value:"grades",className:"mt-6",children:e.jsx(t.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:e.jsxs(i,{className:"border-none shadow-lg overflow-hidden",children:[e.jsx(d,{className:"bg-gradient-to-r from-purple-50 to-violet-50 dark:from-purple-900/20 dark:to-violet-900/20 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(l,{className:"flex items-center gap-2 text-purple-800 dark:text-purple-300",children:[e.jsx(r,{className:"h-5 w-5"}),"Notes des étudiants"]}),e.jsx(y,{children:"Dernières notes enregistrées par module"})]}),e.jsxs(x,{size:"sm",variant:"outline",className:"gap-1",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{children:"Statistiques"})]})]})}),e.jsx(c,{className:"p-0",children:e.jsx(T,{className:"h-[400px]",children:e.jsxs(S,{children:[e.jsx($,{className:"bg-gray-50 dark:bg-gray-800/50 sticky top-0",children:e.jsxs(E,{children:[e.jsx(P,{className:"w-[40%]",children:"Étudiant"}),e.jsx(P,{className:"w-[40%]",children:"Module"}),e.jsx(P,{className:"w-[20%]",children:"Note"})]})}),e.jsx(V,{children:K.grades.map((s=>e.jsxs(E,{className:"hover:bg-purple-50/50 dark:hover:bg-purple-900/10 transition-colors",children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-6 w-6",children:e.jsx(A,{className:"text-xs bg-gray-200 dark:bg-gray-700",children:e.jsx(M,{className:"h-3 w-3"})})}),e.jsx("span",{className:"font-medium",children:s.student})]})}),e.jsx(L,{children:s.module}),e.jsx(L,{children:e.jsxs(w,{className:`\n                                        ${s.grade>=80?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":s.grade>=60?"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}\n                                      `,children:[s.grade,"/100"]})})]},s.id)))})]})})})]})})})}),e.jsx(u,{mode:"wait",children:e.jsx(v,{value:"alerts",className:"mt-6",children:e.jsx(t.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:e.jsxs(i,{className:"border-none shadow-lg overflow-hidden",children:[e.jsx(d,{className:"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(l,{className:"flex items-center gap-2 text-amber-800 dark:text-amber-300",children:[e.jsx(I,{className:"h-5 w-5"}),"Alertes importantes"]}),e.jsx(y,{children:"Examens, réunions et échéances"})]}),e.jsxs(x,{size:"sm",variant:"outline",className:"gap-1",children:[e.jsx(C,{className:"h-4 w-4"}),e.jsx("span",{children:"Gérer les alertes"})]})]})}),e.jsx(c,{className:"p-6",children:e.jsx(T,{className:"h-[400px] pr-4",children:e.jsx("div",{className:"space-y-4",children:K.alerts.map(((s,a)=>e.jsx(t.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*a},children:e.jsx(i,{className:"overflow-hidden border-none shadow-sm hover:shadow-md transition-shadow",children:e.jsx(c,{className:"p-0",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"w-1.5 self-stretch "+("high"===s.priority?"bg-red-500":"bg-amber-500")}),e.jsxs("div",{className:"p-4 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(w,{variant:"high"===s.priority?"destructive":"warning",className:"capitalize",children:s.type}),e.jsx("span",{className:"text-xs text-gray-500",children:(new Date).toLocaleDateString()})]}),e.jsx("p",{className:"text-sm font-medium",children:s.message})]})]})})})},s.id)))})})})]})})})})]})})]})})};export{J as default};
