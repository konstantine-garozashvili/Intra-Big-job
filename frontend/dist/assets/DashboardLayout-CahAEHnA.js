import{j as e}from"./ui-B5ZVMT00.js";import{r as s,L as a,h as r}from"./router-Cgxi-4fo.js";import{h as t}from"./charts-D4j3G6dB.js";import{z as l,S as i,aw as c,u as m,m as n,aY as d,ax as o,B as u,U as x,b as h}from"./index-CNVrpak5.js";import{C as f}from"./circle-alert-DcWNza9R.js";
/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=l("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),p=({variant:s="default"})=>"compact"===s?e.jsxs("div",{className:"flex items-center space-x-3 p-2",children:[e.jsx(i,{className:"h-8 w-8 rounded-full"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"h-4 w-24"}),e.jsx(i,{className:"h-3 w-16"})]})]}):"avatar"===s?e.jsx(i,{className:"h-10 w-10 rounded-full"}):e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 w-full max-w-md",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx(i,{className:"h-12 w-12 rounded-full dark:bg-gray-700"}),e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx(i,{className:"h-5 w-40 dark:bg-gray-700"}),e.jsx(i,{className:"h-4 w-32 dark:bg-gray-700"}),e.jsxs("div",{className:"flex space-x-2 pt-2",children:[e.jsx(i,{className:"h-8 w-20 rounded-md dark:bg-gray-700"}),e.jsx(i,{className:"h-8 w-20 rounded-md dark:bg-gray-700"})]})]})]})}),j=e=>Boolean(e&&"object"==typeof e&&e.firstName&&e.lastName),g=s.memo((({user:r,icon:t,roleTitle:l})=>{const{translate:h,currentLanguage:f}=c(),[g,w]=s.useState(""),[v,y]=s.useState(""),[b,k]=s.useState(""),T=s.useRef(null),[P,M]=s.useState({}),[S,$]=s.useState(new Date),z=m();s.useEffect((()=>{const e=setInterval((()=>{$(new Date)}),1e3);return()=>clearInterval(e)}),[]),s.useEffect((()=>{(async()=>{try{const[e,s,a]=await Promise.all(["string"==typeof l?h(l):l,h("Bonjour"),h("Mon profil")]);w(e),y(s),k(a)}catch(e){console.error("Translation error:",e)}})()}),[l,f,h]),s.useEffect((()=>{if(r)if(j(r)){const e={firstName:r.firstName,lastName:r.lastName,profilePicture:r.profilePicture,fullName:`${r.firstName} ${r.lastName}`};T.current=e,M(e)}else if(r.firstName&&r.lastName){const e={firstName:r.firstName,lastName:r.lastName};M((s=>({...s,...e})))}}),[r]);const[D,L]=s.useState(!1),R=s.useRef(null),I=s.useRef(!1),A=s.useRef(Date.now());((e,s)=>{e&&s&&`${e.charAt(0)}${s.charAt(0)}`.toUpperCase()})(P.firstName,P.lastName),s.useEffect((()=>{if(r&&(r.firstName||r.lastName)){const e={firstName:r.firstName||T.current?.firstName,lastName:r.lastName||T.current?.lastName,profilePicture:r.profilePicture||r.avatar||T.current?.profilePicture,fullName:`${r.firstName||""} ${r.lastName||""}`.trim()};T.current=e,M(e),I.current=!0,A.current=Date.now(),L(!1),R.current&&(clearTimeout(R.current),R.current=null)}else if(j(r)){if(I.current=!0,A.current=Date.now(),!T.current||T.current.firstName!==r.firstName||T.current.lastName!==r.lastName){const e={firstName:r.firstName,lastName:r.lastName,profilePicture:r.profilePicture||r.avatar,fullName:`${r.firstName} ${r.lastName}`};T.current=e,M(e)}L(!1),R.current&&(clearTimeout(R.current),R.current=null)}else if(j(r)||T.current){if(T.current&&I.current){Date.now()-A.current>1e4&&L(!0)}}else R.current||(R.current=setTimeout((()=>{L(!0)}),300));return()=>{R.current&&clearTimeout(R.current)}}),[r]);const{firstName:E,lastName:q,profilePicture:B}=P;return D?e.jsxs(n.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-sm p-5 overflow-hidden mb-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between relative z-10",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(p,{variant:"compact"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Bonjour,"}),e.jsx(i,{className:"h-8 w-32"}),e.jsx(i,{className:"h-5 w-5 rounded-full"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(i,{className:"h-3.5 w-3.5"}),e.jsx(i,{className:"h-4 w-24"})]})]})]}),e.jsxs("div",{className:"flex items-center mt-4 md:mt-0 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(i,{className:"w-5 h-5 mr-2"}),e.jsx(i,{className:"h-6 w-16"})]}),e.jsx(i,{className:"h-9 w-[105px] rounded-md"})]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 to-indigo-600"})]}):e.jsxs(n.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-sm p-5 overflow-hidden mb-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between relative z-10",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"relative h-16 w-16 sm:h-12 sm:w-12 md:h-16 md:w-16 lg:h-18 lg:w-18",children:e.jsx(d,{className:"w-full h-full"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center",children:P.firstName?e.jsxs(e.Fragment,{children:[v,", ",P.firstName," ",e.jsx("span",{className:"inline-block ml-2",children:e.jsx(n.div,{className:"w-5 h-5 text-yellow-500",animate:{rotate:[0,20,0,-20,0],scale:[1,1.2,1,1.2,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{children:[v,","]}),e.jsx(i,{className:"h-8 w-32"})]})}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 flex items-center gap-1.5 mt-1",children:[t?e.jsx(t,{className:"h-3.5 w-3.5 text-primary"}):e.jsx(N,{className:"h-3.5 w-3.5 text-primary"}),e.jsx("span",{children:g})]})]})]}),e.jsxs("div",{className:"flex items-center mt-4 md:mt-0 gap-3",children:[e.jsxs("div",{className:"flex items-center mr-4",children:[e.jsx(o,{className:"w-5 h-5 mr-2 text-blue-500 dark:text-blue-400"}),e.jsx("span",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:S.toLocaleTimeString("fr"===f?"fr-FR":"en-US",{hour:"2-digit",minute:"2-digit",hour12:"fr"!==f})})]}),e.jsx(a,{to:"/profile",children:e.jsxs(u,{size:"sm",className:"gap-2 bg-primary hover:bg-primary/90",children:[e.jsx(x,{className:"h-5 w-5"}),e.jsx("span",{className:"hidden sm:inline",children:b})]})}),z.isGuest()&&e.jsx(a,{to:"/guest/enrollment-requests",children:e.jsx(u,{size:"sm",variant:"outline",className:"gap-2 ml-2",children:e.jsx("span",{className:"hidden sm:inline",children:"Mes demandes"})})})]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 to-indigo-600"})]})}),((e,s)=>!e.user&&!s.user||!(!e.user||!s.user)&&(e.user?.firstName===s.user?.firstName&&(e.user?.lastName===s.user?.lastName&&(e.user?.profilePicture===s.user?.profilePicture&&(e.user?.avatar===s.user?.avatar&&e.roleTitle===s.roleTitle)))))),w=s.memo((({errorMessage:s})=>e.jsx(n.div,{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/30 rounded-full",children:e.jsx(f,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-red-800 dark:text-red-300 mb-2",children:"Une erreur est survenue"}),e.jsx("p",{className:"text-red-600 dark:text-red-400",children:s}),e.jsx("p",{className:"mt-4 text-sm text-gray-600 dark:text-gray-400",children:"Veuillez réessayer ultérieurement ou contacter le support si le problème persiste."})]})]})})));w.displayName="ErrorDisplay",w.propTypes={errorMessage:t.string.isRequired};const v=({error:s,children:a,className:t="",showHeader:l=!0,user:i,headerIcon:c,headerTitle:m})=>{r();const n=h.isLoggedIn();return s&&n?e.jsx("div",{className:`container mx-auto p-8 ${t}`,children:e.jsx(w,{errorMessage:s})}):e.jsxs("div",{className:`container mx-auto p-8 ${t}`,children:[l&&i&&e.jsx(g,{user:i,icon:c,roleTitle:m}),a]})};v.propTypes={error:t.string,children:t.node.isRequired,className:t.string,showHeader:t.bool,user:t.object,headerIcon:t.elementType,headerTitle:t.string};const y=s.memo(v);export{y as D,g as a};
