import{j as e}from"./ui-B5ZVMT00.js";import{r as a,L as s,u as t,e as r}from"./router-Cgxi-4fo.js";import{o as i,q as n,r as l,v as o,B as c,L as d,x as m,t as u,ao as x,D as h,k as f,H as g,l as p,n as j,I as b,b as y,aO as v,aE as N,aF as w,aG as S,aI as C,m as F,aP as A}from"./index-B55PlCdI.js";import{I as k}from"./input-1ijeD5KU.js";import{L as E}from"./label-BEdedqxi.js";import{T as I}from"./textarea-BZopnsra.js";import{S as $,a as z,b as _,c as P,d as U}from"./select-K74nKcoE.js";import{S as M}from"./switch-fbMmz6Cg.js";import{T as L}from"./trash-2-DMRirc8R.js";import"./separator-Dtplpzg-.js";import{u as q}from"./query-DUefEkVx.js";import{A as D}from"./arrow-left-C2y9mtny.js";import{U as R}from"./upload-Bd-aEUjd.js";import"./react-0RZ2pslC.js";import"./charts-D4j3G6dB.js";import"./index-jVOyRz7F.js";const T=({formationId:s})=>{const[t,r]=a.useState(""),[x,h]=a.useState(!1),[f,g]=a.useState([]),[p,j]=a.useState([]),[b,y]=a.useState(!0),[v,N]=a.useState(null),[w,S]=a.useState(!1),[C,F]=a.useState(!1),[A,k]=a.useState(!1),I=a.useMemo((()=>{const e=parseInt(s);return isNaN(e)?null:e}),[s]);a.useEffect((()=>{(async()=>{if(I){y(!0),N(null);try{const[e,a]=await Promise.all([m.get("/api/formation-teachers/available-teachers"),m.get(`/api/formation-teachers/formation/${I}`)]);g(e.data||[]),j(a.data||[])}catch(e){N(e.message||"Une erreur est survenue lors du chargement des données"),u.error("Erreur de chargement des données")}finally{y(!1)}}})()}),[I]),a.useEffect((()=>{r(""),h(!1)}),[s]);const q=a.useMemo((()=>Array.isArray(f)&&Array.isArray(p)?f.filter((e=>!p.some((a=>a?.user?.id===e.id)))):[]),[f,p]);return v?e.jsx("div",{className:"p-4 text-red-500",children:"Une erreur est survenue lors du chargement des données"}):e.jsxs(i,{className:"w-full",children:[e.jsx(n,{children:e.jsx(l,{children:"Gestion des enseignants"})}),e.jsxs(o,{children:[e.jsx("div",{className:"space-y-4 mb-6",children:e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(E,{htmlFor:"teacher-select",children:"Sélectionner un enseignant"}),e.jsxs($,{value:t,onValueChange:r,disabled:b||w,children:[e.jsx(z,{id:"teacher-select",children:e.jsx(_,{placeholder:"Choisir un enseignant"})}),e.jsx(P,{children:0===q.length?e.jsx(U,{disabled:!0,value:"no-teacher",children:"Aucun enseignant disponible"}):q.map((a=>e.jsxs(U,{value:String(a.id),children:[a.firstName," ",a.lastName]},`teacher-${a.id}`)))})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{id:"main-teacher",checked:x,onCheckedChange:h,disabled:b||w}),e.jsx(E,{htmlFor:"main-teacher",children:"Formateur principal"})]}),e.jsx(c,{onClick:async()=>{if(!t||!I)return void u.error("Veuillez sélectionner un enseignant");S(!0);const e=f.find((e=>e.id===parseInt(t)));if(!e)return void u.error("Enseignant non trouvé");const a={id:`temp_${Date.now()}`,isMainTeacher:x,user:e,formation:{id:I}};j((e=>[...e,a])),g((a=>a.filter((a=>a.id!==e.id)))),r(""),h(!1);try{const e=await m.post("/api/formation-teachers",{formation_id:I,user_id:parseInt(t),is_main_teacher:x});e.data?.id&&j((s=>s.map((s=>s.id===a.id?{...s,id:e.data.id}:s)))),u.success("Enseignant ajouté avec succès")}catch(s){console.error("Error adding teacher:",s),u.error(s.message||"Erreur lors de l'ajout de l'enseignant")}finally{S(!1)}},disabled:!t||b||w||0===q.length,children:w?e.jsxs(e.Fragment,{children:[e.jsx(d,{className:"mr-2 h-4 w-4 animate-spin"}),"Ajout en cours..."]}):"Ajouter"})]})}),e.jsx("div",{className:"space-y-4",children:b?e.jsx("div",{className:"flex justify-center items-center py-4",children:e.jsx(d,{className:"h-6 w-6 animate-spin"})}):0===p.length?e.jsx("div",{className:"text-center py-4 text-gray-500",children:"Aucun enseignant assigné à cette formation"}):p.map((a=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[a.user.firstName," ",a.user.lastName]}),e.jsx("div",{className:"text-sm text-gray-500",children:a.user.email})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{id:`main-teacher-${a.id}`,checked:a.isMainTeacher,onCheckedChange:e=>(async(e,a)=>{F(!0),j((s=>s.map((s=>s.id===e?{...s,isMainTeacher:a}:s))));try{await m.put(`/api/formation-teachers/${e}`,{is_main_teacher:a}),u.success("Statut mis à jour avec succès")}catch(s){console.error("Error updating teacher status:",s),u.error(s.message||"Erreur lors de la mise à jour du statut")}finally{F(!1)}})(a.id,e),disabled:C}),e.jsx(E,{htmlFor:`main-teacher-${a.id}`,children:"Principal"})]}),e.jsx(c,{variant:"ghost",size:"icon",onClick:()=>(async e=>{k(!0);const a=p.find((a=>a.id===e));j((a=>a.filter((a=>a.id!==e)))),a?.user&&g((e=>e.some((e=>e.id===a.user.id))?e:[...e,a.user]));try{await m.delete(`/api/formation-teachers/${e}`),u.success("Enseignant supprimé avec succès")}catch(s){console.error("Error deleting teacher:",s),u.error(s.message||"Erreur lors de la suppression")}finally{k(!1)}})(a.id),disabled:A,children:A?e.jsx(d,{className:"h-4 w-4 animate-spin"}):e.jsx(L,{className:"h-4 w-4"})})]})]},a.id)))})]})]})};function B({formationId:t}){const[r,i]=a.useState(null),[n,l]=a.useState(!0),[o,v]=a.useState(0),[N,w]=a.useState(0),[S,C]=a.useState([]),[F,A]=a.useState(!1),[k,E]=a.useState([]),[I,$]=a.useState(!1),[z,_]=a.useState(null),[P,U]=a.useState([]),[M,L]=a.useState(""),[q,D]=a.useState(""),[R,T]=a.useState(!1),[B,G]=a.useState(null);a.useRef(null);a.useEffect((()=>{t&&((async()=>{l(!0);try{const e=await m.get(`/api/formations/${t}`);let a=null;e&&e.success&&e.data&&e.data.formation?a=e.data.formation:e&&e.success&&e.data&&e.data.data&&e.data.data.formation?a=e.data.data.formation:e&&e.formation?a=e.formation:e&&e.data&&(a=e.data),i(a),v(Array.isArray(a?.students)?a.students.length:0),U(Array.isArray(a?.students)?a.students:[])}catch(e){i(null),U([])}finally{l(!1)}})(),(async()=>{try{const e=await m.get(`/api/formations/${t}/enrollment-requests?status=accepted`);let a=[];e&&e.success&&Array.isArray(e.data)?a=e.data.map((e=>e.user)):Array.isArray(e)&&(a=e.map((e=>e.user))),C(a),w(a.length)}catch(e){C([]),w(0)}})())}),[t]);const V=()=>{T(!1),G(null)};a.useEffect((()=>{const e=setTimeout((()=>{D(M)}),200);return()=>clearTimeout(e)}),[M]);const O=a.useMemo((()=>{if(!q)return k.slice(0,5);const e=q.toLowerCase();return k.filter((a=>a.firstName?.toLowerCase().includes(e)||a.lastName?.toLowerCase().includes(e)||a.email?.toLowerCase().includes(e)))}),[k,q]);return e.jsxs("div",{className:"w-full",children:[n?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx(d,{className:"animate-spin w-8 h-8 text-gray-400"})}):r?e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"flex gap-6 mt-4 animate-fade-in-slow",children:e.jsxs("div",{className:"flex items-center gap-2 text-[#60a5fa] font-semibold",children:[e.jsx(x,{className:"w-5 h-5"}),e.jsxs("span",{children:[o," étudiants inscrits"]})]})}),e.jsxs("div",{className:"w-full mt-10 animate-fade-in-slow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-lg font-bold text-[#60a5fa]",children:"Étudiants inscrits"}),e.jsx(c,{onClick:async()=>{A(!0),$(!0);try{const e=await m.get(`/api/formations/${t}/available-students`);let a=[];e&&e.success&&Array.isArray(e.data)?a=e.data:e&&e.success&&Array.isArray(e.data?.users)?a=e.data.users:Array.isArray(e)&&(a=e);const s=new Set(P.map((e=>e.id)));a=a.filter((e=>!s.has(e.id))),E(a)}catch(e){E([]),u.error("Erreur lors du chargement des utilisateurs disponibles.")}finally{$(!1)}},className:"bg-[#2563eb] text-white font-semibold px-6 py-2 rounded-full shadow-sm hover:bg-blue-800 transition-all border-0",children:"Ajouter"})]}),0===P.length?e.jsx("div",{className:"text-gray-500 text-sm",children:"Aucun étudiant inscrit pour cette formation."}):e.jsx("ul",{className:"divide-y divide-gray-200",children:P.map((a=>{const t=`${a.firstName?.[0]||""}${a.lastName?.[0]||""}`.toUpperCase();return e.jsxs("li",{className:"py-3 flex items-center gap-4 group hover:bg-gray-100 rounded-xl transition",children:[e.jsx(s,{to:`/profile/${a.id}`,className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center font-bold text-[#2563eb] text-xl border-2 border-gray-300 overflow-hidden",tabIndex:-1,onClick:e=>e.stopPropagation(),children:a.profilePictureUrl?e.jsx("img",{src:a.profilePictureUrl,alt:`${a.firstName} ${a.lastName}`,className:"w-full h-full object-cover rounded-full"}):t}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs(s,{to:`/profile/${a.id}`,className:"font-medium text-[#60a5fa] truncate block hover:underline",onClick:e=>e.stopPropagation(),tabIndex:-1,children:[a.firstName," ",a.lastName]}),e.jsx("div",{className:"text-[#60a5fa] text-xs truncate",children:a.email})]}),e.jsx("button",{className:"mr-4 px-6 py-2 bg-red-600 text-white rounded-full hover:bg-red-700 transition text-sm font-semibold opacity-0 group-hover:opacity-100 focus:opacity-100 shadow-sm",onClick:()=>{return e=a.id,G(e),void T(!0);var e},children:"Retirer"})]},`${a.id}-${a.email}`)}))})]})]}):e.jsx("div",{className:"text-center text-gray-500",children:"Formation non trouvée."}),e.jsx(h,{open:F,onOpenChange:A,children:e.jsxs(f,{className:"rounded-2xl shadow-2xl border border-gray-200 bg-white",children:[e.jsxs(g,{children:[e.jsx(p,{className:"text-gray-800 font-bold",children:"Ajouter un utilisateur à la formation"}),e.jsx(j,{className:"text-gray-600",children:"Choisissez un invité ou étudiant à ajouter à cette formation."})]}),I?e.jsx("div",{className:"py-6 text-center",children:e.jsx(d,{className:"animate-spin w-6 h-6 mx-auto text-[#2563eb]"})}):0===k.length?e.jsx("div",{className:"py-6 text-center text-gray-500",children:"Aucun utilisateur disponible à ajouter."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative mb-3",children:[e.jsx("input",{type:"text",className:"w-full px-4 py-2 rounded-full border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#2563eb] focus:border-[#2563eb] text-gray-900 bg-white pr-10",placeholder:"Rechercher par nom, prénom ou email...",value:M,onChange:e=>L(e.target.value),autoFocus:!0}),e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400",children:e.jsxs("svg",{width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"M21 21l-2-2"})]})})]}),e.jsx("ul",{className:"divide-y divide-gray-200 max-h-64 overflow-y-auto",children:0===O.length?e.jsx("li",{className:"py-2 text-center text-gray-400",children:"Aucun résultat."}):O.map((a=>{const r=`${a.firstName?.[0]||""}${a.lastName?.[0]||""}`.toUpperCase();return e.jsxs("li",{className:"py-2 flex items-center gap-4 group hover:bg-gray-100 rounded-xl transition",children:[e.jsx(s,{to:`/profile/${a.id}`,className:"w-11 h-11 rounded-full bg-gray-200 flex items-center justify-center font-bold text-[#2563eb] text-lg border-2 border-gray-300 overflow-hidden",tabIndex:-1,onClick:e=>e.stopPropagation(),children:a.profilePictureUrl?e.jsx("img",{src:a.profilePictureUrl,alt:`${a.firstName} ${a.lastName}`,className:"w-full h-full object-cover rounded-full"}):r}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs(s,{to:`/profile/${a.id}`,className:"font-medium text-[#60a5fa] truncate block hover:underline",onClick:e=>e.stopPropagation(),tabIndex:-1,children:[a.firstName," ",a.lastName]}),e.jsx("div",{className:"text-[#60a5fa] text-xs truncate",children:a.email})]}),e.jsx(c,{size:"sm",className:"border border-green-200 text-green-700 bg-white hover:bg-green-50 hover:text-green-800 font-semibold rounded-full px-4 py-1 shadow-sm",disabled:z===a.id,onClick:()=>(async e=>{_(e);try{const a=await m.post(`/api/formations/${t}/students/${e}`);if(!a.success)throw new Error(a.message||"Erreur lors de l'ajout de l'utilisateur.");u.success("Utilisateur ajouté à la formation."),A(!1);const s=k.find((a=>a.id===e));s&&(U((e=>[...e,s])),v((e=>e+1)),C((e=>[...e,s])),w((e=>e+1)),E((a=>a.filter((a=>a.id!==e)))));const r=y.getUser();r&&String(r.id)===String(e)&&await y.getCurrentUser(!0)}catch(a){u.error(a.message||"Erreur lors de l'ajout de l'utilisateur.")}finally{_(null)}})(a.id),children:z===a.id?e.jsx(d,{className:"animate-spin w-4 h-4"}):"Ajouter"})]},a.id)}))})]}),e.jsx(b,{children:e.jsx(c,{variant:"outline",onClick:()=>A(!1),className:"border border-gray-300 text-gray-700 bg-white hover:bg-gray-100 rounded-full",children:"Fermer"})})]})}),e.jsx(h,{open:R,onOpenChange:V,children:e.jsxs(f,{className:"rounded-2xl shadow-2xl border border-gray-200 bg-white max-w-md",children:[e.jsxs(g,{children:[e.jsx(p,{className:"text-red-600 font-bold",children:"Retirer l'étudiant ?"}),e.jsx(j,{className:"text-gray-700",children:"Êtes-vous sûr de vouloir retirer cet étudiant de la formation ? Cette action est irréversible."})]}),e.jsxs(b,{className:"flex flex-row gap-4 justify-end mt-4",children:[e.jsx(c,{variant:"outline",type:"button",onClick:V,className:"border border-gray-300 text-gray-700 bg-white hover:bg-gray-100 rounded-full",children:"Annuler"}),e.jsx(c,{type:"button",onClick:async()=>{if(B)try{await m.delete(`/api/formations/${t}/students/${B}`),u.success("Étudiant retiré de la formation."),U((e=>e.filter((e=>e.id!==B)))),v((e=>Math.max(0,e-1))),C((e=>e.filter((e=>e.id!==B)))),w((e=>Math.max(0,e-1)))}catch(e){u.error("Erreur lors du retrait de l'étudiant.")}finally{T(!1),G(null)}},className:"bg-red-600 hover:bg-red-700 text-white font-semibold rounded-full px-6 py-2 shadow",children:"Retirer"})]})]})})]})}const G=()=>{const s=t(),{id:o}=r(),d=q(),[m,x]=a.useState(!0),[h,f]=a.useState(null),[g,p]=a.useState([]),[j,b]=a.useState(null),[y,M]=a.useState({name:"",promotion:"",description:"",image_url:"",specializationId:"",capacity:"",duration:"",dateStart:"",location:""});a.useEffect((()=>{const e=parseInt(o);isNaN(e)||f(e)}),[o]),a.useEffect((()=>{(async()=>{if(h)try{x(!0);const e=await A.getSpecializations();Array.isArray(e)?p(e):console.error("[EditFormationForm] Invalid specializations data format");const a=await A.getFormation(h);if(!a)return console.error("[EditFormationForm] No formation data received"),void u.error("Erreur lors du chargement de la formation");const s=a.dateStart?new Date(a.dateStart).toISOString().split("T")[0]:"";M({name:a.name||"",promotion:a.promotion||"",description:a.description||"",image_url:a.image_url||"",specializationId:a.specialization?.id?.toString()||"",capacity:a.capacity?.toString()||"",duration:a.duration?.toString()||"",dateStart:s,location:a.location||""}),a.image_url&&b(a.image_url)}catch(e){u.error("Erreur lors du chargement de la formation")}finally{x(!1)}})()}),[h]);const L=e=>{const{name:a,value:s}=e.target;M((e=>({...e,[a]:s})))};return e.jsxs("div",{className:"w-full max-w-5xl mx-auto px-2 sm:px-6 lg:px-8 py-10 min-h-[90vh]",children:[e.jsx("div",{className:"mb-4 flex items-center",children:e.jsxs(c,{type:"button",variant:"ghost",className:"flex items-center gap-2 text-blue-700 hover:bg-blue-50 font-semibold shadow-none px-3 py-2 rounded-lg",onClick:()=>s("/formation-management"),children:[e.jsx(D,{className:"w-5 h-5"}),e.jsx("span",{children:"Retour"})]})}),e.jsxs(i,{className:"overflow-hidden w-full shadow-2xl",children:[e.jsx(n,{className:"px-6 py-6 bg-gradient-to-r from-blue-700 to-cyan-500 text-white border-b-0",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(v,{className:"h-7 w-7 text-white/90"}),e.jsx(l,{className:"text-2xl font-bold drop-shadow",children:"Modifier la Formation"}),e.jsx("span",{className:"ml-auto text-base font-medium text-white/80",children:"Edition avancée"})]})}),e.jsx("div",{className:"px-6 py-8",children:e.jsxs(N,{defaultValue:"informations",className:"w-full bg-transparent",children:[e.jsxs(w,{className:"flex gap-4 mb-8 bg-transparent",children:[e.jsx(S,{value:"informations",className:"text-lg font-semibold px-6 py-2 rounded-md bg-white/80 dark:bg-gray-800/80 shadow hover:bg-blue-100 dark:hover:bg-gray-700 transition-colors data-[state=active]:bg-blue-600 data-[state=active]:text-white",children:"Informations"}),e.jsx(S,{value:"teachers",className:"text-lg font-semibold px-6 py-2 rounded-md bg-white/80 dark:bg-gray-800/80 shadow hover:bg-blue-100 dark:hover:bg-gray-700 transition-colors data-[state=active]:bg-blue-600 data-[state=active]:text-white",children:"Enseignants"}),e.jsx(S,{value:"students",className:"text-lg font-semibold px-6 py-2 rounded-md bg-white/80 dark:bg-gray-800/80 shadow hover:bg-blue-100 dark:hover:bg-gray-700 transition-colors data-[state=active]:bg-blue-600 data-[state=active]:text-white",children:"Étudiants"})]}),e.jsx(C,{value:"informations",className:"p-0 mt-0",children:e.jsx("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e=["name","promotion","capacity","duration","dateStart","specializationId"].filter((e=>!y[e]));return!(e.length>0&&(u.error(`Veuillez remplir tous les champs obligatoires : ${e.join(", ")}`),1))})())try{x(!0);const e={name:y.name,promotion:y.promotion,description:y.description,image_url:y.image_url,specializationId:y.specializationId,capacity:parseInt(y.capacity),duration:parseInt(y.duration),dateStart:y.dateStart,location:y.location};if(await A.updateFormation(h,e),d.invalidateQueries(["formations"]),d.invalidateQueries(["formation-details",h]),y.imageFile instanceof File){const e=new FormData;e.append("image",y.imageFile,y.imageFile.name);try{const a=await A.uploadFormationImage(h,e);if(!a.success||!a.image_url)throw new Error("Résultat invalide du téléchargement de l'image");M((e=>({...e,image_url:a.image_url,imageFile:null}))),b(a.image_url)}catch(a){return void u.error(a.message||"Erreur lors du téléchargement de l'image")}}u.success("Formation mise à jour avec succès"),s("/formations")}catch(t){u.error(t.message||"Erreur lors de la mise à jour de la formation")}finally{x(!1)}},children:e.jsx(F.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-10",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[200px_1fr] gap-10 items-start",children:[e.jsxs("div",{className:"flex flex-col items-center w-full h-full justify-start",children:[e.jsxs("div",{className:"relative group w-40 h-40",children:[e.jsx("label",{htmlFor:"formation-image-upload",className:"block w-full h-full rounded-xl bg-gray-100 dark:bg-gray-800 border-2 border-blue-200 dark:border-gray-700 shadow-lg cursor-pointer transition-all duration-200 group-hover:ring-4 group-hover:ring-blue-400 group-hover:shadow-xl outline-none select-none",children:e.jsxs("div",{className:"w-full h-full rounded-xl overflow-hidden flex items-center justify-center",children:[j?e.jsx("img",{src:j,alt:"Prévisualisation",className:"w-full h-full object-cover transition-transform duration-200 group-hover:scale-105 pointer-events-none",draggable:"false"}):e.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full pointer-events-none select-none",children:[e.jsx(R,{className:"h-12 w-12 text-gray-400 mb-2"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Image"})]}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-xl pointer-events-none",children:e.jsx("span",{className:"text-white text-sm font-semibold px-2 text-center select-none",children:"Changer l'image"})})]})}),e.jsx("input",{id:"formation-image-upload",type:"file",className:"hidden",accept:"image/*",onChange:e=>{const a=e.target.files[0];if(a){if(a.size>2097152)return u.error("L'image ne doit pas dépasser 2MB"),void(e.target.value="");if(!["image/jpeg","image/png","image/gif","image/webp"].includes(a.type))return u.error("Format de fichier non supporté. Utilisez JPG, PNG, GIF ou WEBP"),void(e.target.value="");const s=new FileReader;s.onload=()=>{b(s.result),M((e=>({...e,imageFile:a})))},s.readAsDataURL(a)}},disabled:m})]}),j&&e.jsx(c,{type:"button",variant:"ghost",size:"sm",className:"text-red-500 hover:bg-red-50 transition-colors mt-2",onClick:()=>{b(null),M((e=>({...e,imageFile:null})))},disabled:m,children:"Supprimer l'image"})]}),e.jsxs("div",{className:"flex flex-col gap-4 w-full",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 flex flex-col gap-2",children:[e.jsx(E,{htmlFor:"name",className:"font-semibold",children:"Nom *"}),e.jsx(k,{id:"name",name:"name",value:y.name,onChange:L,required:!0,className:"focus:ring-2 focus:ring-blue-400 focus:border-blue-400"})]}),e.jsxs("div",{className:"flex-1 flex flex-col gap-2",children:[e.jsx(E,{htmlFor:"capacity",className:"font-semibold",children:"Capacité *"}),e.jsx(k,{id:"capacity",name:"capacity",type:"number",min:"1",value:y.capacity,onChange:L,required:!0,className:"focus:ring-2 focus:ring-blue-400 focus:border-blue-400"})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(E,{htmlFor:"description",className:"font-semibold",children:"Description"}),e.jsx(I,{id:"description",name:"description",value:y.description,onChange:L,rows:4,className:"mt-2 resize-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 outline-none min-h-[120px]"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(E,{htmlFor:"promotion",className:"font-semibold",children:"Promotion *"}),e.jsx(k,{id:"promotion",name:"promotion",value:y.promotion,onChange:L,required:!0,className:"focus:ring-2 focus:ring-blue-400 focus:border-blue-400"})]}),e.jsxs("div",{className:"flex flex-col gap-2 lg:col-span-1",children:[e.jsx(E,{htmlFor:"specializationId",className:"font-semibold",children:"Spécialisation *"}),e.jsxs($,{value:y.specializationId,onValueChange:e=>{M((a=>({...a,specializationId:e})))},required:!0,children:[e.jsx(z,{className:"focus:ring-2 focus:ring-blue-400 focus:border-blue-400",children:e.jsx(_,{placeholder:"Sélectionnez une spécialisation"})}),e.jsx(P,{children:g.map((a=>e.jsx(U,{value:a.id.toString(),children:a.name},a.id)))})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(E,{htmlFor:"duration",className:"font-semibold",children:"Durée (en mois) *"}),e.jsx(k,{type:"number",id:"duration",name:"duration",value:y.duration,onChange:L,required:!0,className:"focus:ring-2 focus:ring-blue-400 focus:border-blue-400"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(E,{htmlFor:"dateStart",className:"font-semibold",children:"Date de début *"}),e.jsx(k,{type:"date",id:"dateStart",name:"dateStart",value:y.dateStart,onChange:L,required:!0,className:"focus:ring-2 focus:ring-blue-400 focus:border-blue-400"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(E,{htmlFor:"location",className:"font-semibold",children:"Lieu"}),e.jsx(k,{id:"location",name:"location",value:y.location,onChange:L,className:"focus:ring-2 focus:ring-blue-400 focus:border-blue-400"})]})]}),e.jsxs("div",{className:"flex gap-4 justify-end mt-8",children:[e.jsx(c,{type:"submit",disabled:m,className:"bg-gradient-to-r from-blue-600 to-cyan-400 text-white shadow hover:from-blue-700 hover:to-cyan-500 transition",children:m?"Enregistrement...":"Mettre à jour"}),e.jsx(c,{type:"button",variant:"outline",onClick:()=>s("/formations"),disabled:m,children:"Annuler"})]})]})]})})})}),e.jsx(C,{value:"teachers",className:"p-0 mt-0",children:e.jsx(F.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"relative rounded-b-xl p-6",children:h&&e.jsx(T,{formationId:h})})}),e.jsx(C,{value:"students",className:"p-0 mt-0",children:e.jsx(F.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"relative rounded-b-xl p-6",children:h&&e.jsx(B,{formationId:h})})})]})})]})]})};export{G as default};
