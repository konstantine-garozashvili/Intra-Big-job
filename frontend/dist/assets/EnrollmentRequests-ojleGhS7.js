import{j as e}from"./ui-B5ZVMT00.js";import{r as s,u as a}from"./router-Cgxi-4fo.js";import{z as t,L as r,ak as i,B as n,m as l,A as o,q as c,r as m,s as d,w as x,t as h}from"./index-DYKOgMgV.js";import{S as j}from"./scroll-area-BRb1-L6R.js";import{A as u}from"./arrow-left-TLkn28NC.js";import{T as y}from"./trash-2-Dn268vZP.js";import"./react-0RZ2pslC.js";import"./query-DUefEkVx.js";import"./charts-D4j3G6dB.js";import"./index-jVOyRz7F.js";
/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g=t("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]),p=()=>{const[t,p]=s.useState([]),[f,N]=s.useState(!0),[v,w]=s.useState(null),[b,k]=s.useState(null),S=a(),A=()=>{N(!0),fetch("/api/formation-requests/my",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>e.json())).then((e=>{e.requests?p(e.requests.filter((e=>null===e.status))):p([]),N(!1)})).catch((()=>{w("Erreur lors du chargement des demandes."),N(!1)}))};s.useEffect((()=>{A()}),[]);return f?e.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:e.jsx(r,{className:"w-8 h-8 text-gray-400 animate-spin"})}):v?e.jsx("div",{className:"max-w-2xl mx-auto p-6",children:e.jsx("div",{className:"p-4 text-center text-red-600 bg-red-50 rounded-lg",children:v})}):e.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(i,{className:"w-7 h-7 text-gray-600"}),e.jsx("h1",{className:"text-2xl font-semibold text-gray-800",children:"Mes demandes d'inscription"})]}),e.jsxs(n,{variant:"ghost",className:"text-gray-600 hover:text-gray-900 hover:bg-gray-100",onClick:()=>S(-1),children:[e.jsx(u,{className:"w-5 h-5 mr-2"}),"Retour"]})]}),0===t.length?e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center py-16 text-center bg-white rounded-xl shadow-sm",children:[e.jsx(g,{className:"w-16 h-16 text-gray-300 mb-4"}),e.jsx("h2",{className:"text-xl font-medium text-gray-700 mb-2",children:"Aucune demande en attente"}),e.jsx("p",{className:"text-gray-500 mb-6 max-w-md",children:"Vous n'avez pas encore fait de demande d'inscription à une formation."}),e.jsx(n,{onClick:()=>S("/formations"),className:"bg-gray-900 hover:bg-gray-800 text-white px-6 py-2 rounded-lg transition-colors",children:"Voir les formations"})]}):e.jsx(j,{className:"h-[calc(100vh-12rem)]",children:e.jsx("div",{className:"space-y-4 pr-4",children:e.jsx(o,{children:t.map(((s,a)=>e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2,delay:.05*a},children:e.jsxs(c,{className:"overflow-hidden border border-gray-100 hover:border-gray-200 transition-colors",children:[e.jsx(m,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gray-50 rounded-lg",children:e.jsx(i,{className:"w-5 h-5 text-gray-600"})}),e.jsx(d,{className:"text-lg font-medium text-gray-800",children:s.formation.name})]}),e.jsx(n,{variant:"ghost",size:"icon",className:"text-gray-400 hover:text-red-500 hover:bg-red-50",onClick:()=>(async e=>{k(e);try{const s=await fetch(`/api/formation-requests/${e}/cancel`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),a=await s.json();if(!s.ok)throw new Error(a.message||"Erreur lors de l'annulation de la demande");h.success("Demande annulée avec succès"),A()}catch(s){h.error(s.message)}finally{k(null)}})(s.id),disabled:b===s.id,children:b===s.id?e.jsx(r,{className:"w-4 h-4 animate-spin"}):e.jsx(y,{className:"w-4 h-4"})})]})}),e.jsx(x,{className:"p-4 pt-0",children:e.jsxs("div",{className:"text-sm text-gray-500",children:["Demandé le ",new Date(s.createdAt).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})]})})]})},s.id)))})})})]})};export{p as default};
