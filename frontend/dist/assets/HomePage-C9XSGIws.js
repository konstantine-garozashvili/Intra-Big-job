import{j as r}from"./ui-B9MhWaVJ.js";import{r as e,u as t,N as u}from"./router-D7BdrHDj.js";import{u as c,b as n}from"./index-Bd05LC-l.js";import"./react-0RZ2pslC.js";import"./query-DKQ6_O-p.js";import"./charts-DkICKEBk.js";const o=()=>{const[o,s]=e.useState(!0),[a,i]=e.useState(!1),[l,f]=e.useState("/login"),m=c(),p=t(),j=e.useRef(!1),g=e.useRef(null),h=e.useRef(!0),d=e.useCallback((async()=>{if(!j.current&&h.current){j.current=!0;try{const r=n.isLoggedIn();if(!h.current)return;if(r){const r=m.getRoleDashboardPath();f(r),i(!0)}else i(!1)}catch(r){console.error("Error checking authentication:",r),h.current&&i(!1)}finally{h.current&&s(!1),j.current=!1}}}),[m]);return e.useEffect((()=>(d(),()=>{h.current=!1,g.current&&clearTimeout(g.current)})),[d]),e.useEffect((()=>{if(!o&&!a&&h.current)return g.current&&clearTimeout(g.current),g.current=setTimeout((()=>{h.current&&"/"===window.location.pathname&&p("/login",{replace:!0})}),100),()=>{g.current&&clearTimeout(g.current)}}),[o,a,p]),j.current||o?null:a?r.jsx(u,{to:l,replace:!0}):r.jsx(u,{to:"/login",replace:!0})};export{o as default};
