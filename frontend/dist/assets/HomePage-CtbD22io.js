import{j as e}from"./ui-B9MhWaVJ.js";import{r,u as t,N as s,R as o}from"./router-D7BdrHDj.js";import{u as n,b as a}from"./index-BrCX-3nd.js";import"./react-0RZ2pslC.js";import"./query-DKQ6_O-p.js";import"./charts-DkICKEBk.js";o.memo((({id:t,label:s,type:o="text",value:n,onChange:a,error:c,onBlur:u,...l})=>{const[i,d]=r.useState(!1),m="password"===o?i?"text":"password":o;return e.jsxs("div",{children:[e.jsx("label",{htmlFor:t,className:"block text-sm font-medium text-gray-200 mb-1",children:s}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("input",{id:t,name:t,type:m,value:n,onChange:a,onBlur:u,className:"appearance-none block w-full px-3 py-2 border border-gray-500 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-[#528eb2] focus:border-[#528eb2] sm:text-sm bg-gray-800 text-white",...l}),"password"===o&&e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-300",onClick:()=>d(!i),children:i?e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),c&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:c})]})]})})).displayName="FormInput";const c=()=>{const[o,c]=r.useState(!0),[u,l]=r.useState(!1),[i,d]=r.useState("/login"),m=n(),p=t(),h=r.useRef(!1),x=r.useRef(null),f=r.useRef(!0),j=r.useCallback((async()=>{if(!h.current&&f.current){h.current=!0;try{const e=a.isLoggedIn();if(!f.current)return;if(e){const e=m.getRoleDashboardPath();d(e),l(!0)}else l(!1)}catch(e){console.error("Error checking authentication:",e),f.current&&l(!1)}finally{f.current&&c(!1),h.current=!1}}}),[m]);return r.useEffect((()=>(j(),()=>{f.current=!1,x.current&&clearTimeout(x.current)})),[j]),r.useEffect((()=>{if(!o&&!u&&f.current)return x.current&&clearTimeout(x.current),x.current=setTimeout((()=>{f.current&&"/"===window.location.pathname&&p("/login",{replace:!0})}),100),()=>{x.current&&clearTimeout(x.current)}}),[o,u,p]),h.current||o?null:u?e.jsx(s,{to:i,replace:!0}):e.jsx(s,{to:"/login",replace:!0})};export{c as default};
