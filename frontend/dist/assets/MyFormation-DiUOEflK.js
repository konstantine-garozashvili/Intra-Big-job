import{j as e}from"./ui-B5ZVMT00.js";import{r as s,u as l,L as a}from"./router-Cgxi-4fo.js";import{y as t,S as r,B as i,aR as o,m as d,q as c,r as n,ak as m,s as x,ay as h,w as j,j as u,M as f,ar as w}from"./index-DYKOgMgV.js";import{A as y}from"./arrow-left-TLkn28NC.js";import"./react-0RZ2pslC.js";import"./query-DUefEkVx.js";import"./charts-D4j3G6dB.js";const N=()=>{const[N,p]=s.useState(null),[g,b]=s.useState([]),[k,v]=s.useState(!0),[A,C]=s.useState(null),S=l();return s.useEffect((()=>{t.get("/api/profile/formations").then((e=>{if(e.success&&Array.isArray(e.data)&&e.data.length>0){const s=e.data[0];p(s),t.get(`/api/formations/${s.id}`).then((e=>{e.success&&e.data&&e.data.formation&&Array.isArray(e.data.formation.students)?b(e.data.formation.students):b([]),v(!1)})).catch((()=>{b([]),v(!1)}))}else p(null),v(!1)})).catch((()=>{C("Erreur lors du chargement de la formation."),v(!1)}))}),[]),k?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px]",children:[e.jsx(r,{className:"h-10 w-2/3 mb-4"}),e.jsx(r,{className:"h-6 w-1/2 mb-2"}),e.jsx(r,{className:"h-4 w-1/3"})]}):A?e.jsxs("div",{className:"p-6 text-center text-destructive bg-destructive/10 rounded-xl",children:[e.jsx("p",{children:A}),e.jsxs(i,{className:"mt-4",onClick:()=>S(-1),children:[e.jsx(y,{className:"mr-2 h-4 w-4"})," Retour"]})]}):N?e.jsxs(d.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-5xl mx-auto py-8 px-4",children:[e.jsxs(i,{variant:"ghost",className:"mb-6",onClick:()=>S(-1),children:[e.jsx(y,{className:"mr-2 h-4 w-4"})," Retour au tableau de bord"]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs(c,{className:"shadow-lg border-0 bg-gradient-to-br from-yellow-100/80 to-yellow-200/60 dark:from-yellow-900/40 dark:to-yellow-800/30",children:[e.jsxs(n,{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(m,{className:"h-7 w-7 text-yellow-600 dark:text-yellow-300"}),e.jsx(x,{className:"text-2xl font-bold text-yellow-900 dark:text-yellow-100",children:N.name}),e.jsx(h,{variant:"outline",className:"ml-2 text-yellow-800 dark:text-yellow-200 border-yellow-400 dark:border-yellow-600",children:N.promotion})]}),e.jsx("p",{className:"text-yellow-800 dark:text-yellow-200 text-sm font-medium mb-1",children:N.description||"Aucune description."})]}),e.jsx(j,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-5 w-5 text-yellow-700 dark:text-yellow-300"}),e.jsx("span",{className:"font-medium",children:"Début :"}),e.jsx("span",{children:N.dateStart||"Non définie"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-5 w-5 text-yellow-700 dark:text-yellow-300"}),e.jsx("span",{className:"font-medium",children:"Lieu :"}),e.jsx("span",{children:N.location||"Non définie"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"h-5 w-5 text-yellow-700 dark:text-yellow-300"}),e.jsx("span",{className:"font-medium",children:"Durée :"}),e.jsx("span",{children:N.duration?`${N.duration}h`:"Non définie"})]})]})})]})}),e.jsx("div",{className:"w-full md:w-80",children:e.jsxs(c,{className:"shadow-lg border-0 bg-gradient-to-br from-yellow-50/80 to-yellow-100/60 dark:from-yellow-900/30 dark:to-yellow-800/20 h-full",children:[e.jsx(n,{children:e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(w,{className:"h-5 w-5 text-yellow-700 dark:text-yellow-300"}),e.jsx(x,{className:"text-lg font-bold text-yellow-900 dark:text-yellow-100",children:"Étudiants inscrits"})]})}),e.jsx(j,{children:e.jsx("div",{className:"max-h-96 overflow-y-auto space-y-3",children:g.length>0?g.map((s=>e.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-yellow-100/60 dark:hover:bg-yellow-900/20 transition",children:[s.profilePictureUrl?e.jsx(a,{to:`/profile/${s.id}`,tabIndex:-1,onClick:e=>e.stopPropagation(),className:"block",children:e.jsx("img",{src:s.profilePictureUrl,alt:s.firstName,className:"w-9 h-9 rounded-full object-cover"})}):e.jsx(a,{to:`/profile/${s.id}`,tabIndex:-1,onClick:e=>e.stopPropagation(),className:"block",children:e.jsxs("div",{className:"w-9 h-9 rounded-full bg-yellow-300 dark:bg-yellow-800 flex items-center justify-center text-yellow-900 dark:text-yellow-100 font-bold text-lg",children:[s.firstName?.[0],s.lastName?.[0]]})}),e.jsxs("div",{children:[e.jsxs(a,{to:`/profile/${s.id}`,className:"font-medium text-yellow-900 dark:text-yellow-100 block hover:underline",onClick:e=>e.stopPropagation(),tabIndex:-1,children:[s.firstName," ",s.lastName]}),e.jsx("div",{className:"text-xs text-yellow-700 dark:text-yellow-300",children:s.email})]})]},s.id))):e.jsx("div",{className:"text-yellow-700 dark:text-yellow-200 text-sm text-center py-4",children:"Aucun étudiant inscrit"})})})]})})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px]",children:[e.jsx(o,{className:"h-10 w-10 text-muted-foreground mb-2"}),e.jsx("p",{className:"text-lg font-semibold mb-2",children:"Aucune formation trouvée"}),e.jsxs(i,{variant:"outline",onClick:()=>S(-1),children:[e.jsx(y,{className:"mr-2 h-4 w-4"})," Retour"]})]})};export{N as default};
