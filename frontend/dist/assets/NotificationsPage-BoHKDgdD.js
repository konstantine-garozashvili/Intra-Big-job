import{j as e}from"./ui-DiOaG2iA.js";import{u as a,r as s,L as t}from"./router-D7BdrHDj.js";import{x as r,a0 as l,c as i,aq as c,B as n,b5 as o,av as m,aw as d,ax as x,h,t as u,a2 as j,o as g,s as b,b6 as p,S as N,I as f}from"./index-BpIDiI3H.js";import{T as y,a as k,b as w,c as v}from"./tooltip-D-e7_dj_.js";import{F as D}from"./file-DOZplnh7.js";import{f as C}from"./index-BzsTtQfi.js";import"./react-0RZ2pslC.js";import"./query-D8UIi9X6.js";import"./charts-DkICKEBk.js";
/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=r("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]),P=r("FileX",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m14.5 12.5-5 5",key:"b62r18"}],["path",{d:"m9.5 12.5 5 5",key:"1rk7el"}]]),A=e=>{try{return e&&"function"==typeof e.toDate?C(e.toDate(),"PPp",{locale:f}):e instanceof Date?C(e,"PPp",{locale:f}):"number"==typeof e||"string"==typeof e?C(new Date(e),"PPp",{locale:f}):"Date inconnue"}catch(a){return console.error("Erreur lors du formatage de la date:",a),"Date incorrecte"}},T={ROLE_UPDATE:{label:"Mise à jour de rôle",color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",icon:e.jsx(p,{className:"h-4 w-4"})},SYSTEM:{label:"Système",color:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300",icon:e.jsx(j,{className:"h-4 w-4"})},INFO:{label:"Information",color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",icon:e.jsx(p,{className:"h-4 w-4"})},WARNING:{label:"Avertissement",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",icon:e.jsx(p,{className:"h-4 w-4"})},ALERT:{label:"Alerte",color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",icon:e.jsx(p,{className:"h-4 w-4"})},DOCUMENT_APPROVED:{label:"Document approuvé",color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",icon:e.jsx(E,{className:"h-4 w-4"})},DOCUMENT_REJECTED:{label:"Document rejeté",color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",icon:e.jsx(P,{className:"h-4 w-4"})},DOCUMENT_UPLOADED:{label:"Document téléchargé",color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",icon:e.jsx(D,{className:"h-4 w-4"})}},M=()=>{const r=a(),{notifications:p,loading:f,unreadCount:D,markAsRead:C,markAllAsRead:E}=l(),[P,M]=s.useState("all"),[q,z]=s.useState(null),O=(()=>{if(!p)return[];let e=[...p];return"unread"===P&&(e=e.filter((e=>!e.read))),q&&(e=e.filter((e=>e.type===q))),e})();return e.jsxs("div",{className:"container mx-auto max-w-4xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(t,{to:"/dashboard",className:"mr-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 hover:dark:text-blue-300",children:e.jsx(i,{className:"h-6 w-6"})}),e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center",children:["Notifications",D>0&&"unread"!==P&&e.jsxs(c,{className:"ml-2 bg-red-500 text-white",children:[D," non ",D>1?"lues":"lue"]})]})]}),e.jsx(y,{children:e.jsxs(k,{children:[e.jsx(w,{asChild:!0,children:e.jsx(t,{to:"/settings/notifications",children:e.jsxs(n,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(o,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Paramètres"})]})})}),e.jsx(v,{children:e.jsx("p",{children:"Gérer vos préférences de notifications"})})]})})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-6",children:[e.jsx(m,{value:P,onValueChange:M,className:"w-full sm:w-auto",children:e.jsxs(d,{children:[e.jsx(x,{value:"all",children:"Toutes"}),e.jsxs(x,{value:"unread",children:["Non lues ",D>0&&`(${D})`]})]})}),e.jsxs("div",{className:"flex flex-wrap gap-2 w-full sm:w-auto",children:[Object.entries(T).map((([a,s])=>e.jsx(c,{className:"cursor-pointer "+(q===a?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-100 text-gray-800 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"),onClick:()=>z(q===a?null:a),children:s.label},a))),q&&e.jsx(n,{variant:"ghost",size:"sm",className:"text-xs h-7",onClick:()=>z(null),children:"Réinitialiser"})]}),D>0&&e.jsxs(n,{variant:"outline",size:"sm",className:"ml-auto",onClick:()=>{E(),u.success("Toutes les notifications ont été marquées comme lues")},children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),"Tout marquer comme lu"]})]}),f?e.jsx("div",{className:"space-y-4",children:Array(5).fill(0).map(((a,s)=>e.jsx(g,{className:"mb-3",children:e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(N,{className:"h-5 w-5 rounded-full mr-3 mt-1"}),e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(N,{className:"h-5 w-40"}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx(N,{className:"h-3 w-24 mb-1"}),e.jsx(N,{className:"h-2 w-16"})]})]}),e.jsx(N,{className:"h-4 w-full mt-2"}),e.jsx(N,{className:"h-4 w-3/4 mt-1"})]})]})})},s)))}):0===O.length?e.jsxs("div",{className:"text-center p-8",children:[e.jsx(j,{className:"h-10 w-10 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-700 dark:text-gray-300",children:"Pas de notification"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2 max-w-md mx-auto",children:"all"===P?"Vous n'avez aucune notification pour le moment.":"Vous n'avez aucune notification non lue pour le moment."})]}):e.jsx("div",{className:"space-y-4",children:O.map((a=>e.jsx(g,{className:"cursor-pointer transition-shadow hover:shadow-md "+(a.read?"":"border-l-4 border-l-blue-500 dark:border-l-blue-400"),onClick:()=>(e=>{C(e.id),e.targetUrl&&r(e.targetUrl)})(a),children:e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"mr-3 mt-1",children:T[a.type]?.icon||e.jsx(j,{className:"h-5 w-5 text-gray-500"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"text-base font-medium "+(a.read?"text-gray-700 dark:text-gray-300":"text-gray-900 dark:text-white"),children:a.title}),e.jsx("div",{className:"flex flex-col items-end",children:e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:A(a.timestamp)})})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:a.message}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx(c,{className:T[a.type]?.color||"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:T[a.type]?.label||a.type||"Notification"}),!a.read&&e.jsxs(n,{variant:"ghost",size:"sm",className:"ml-auto text-xs py-1 h-auto",onClick:e=>{e.stopPropagation(),C(a.id)},children:[e.jsx(h,{className:"h-3 w-3 mr-1"}),"Marquer comme lu"]})]})]})]})})},a.id)))})]})};export{M as default};
