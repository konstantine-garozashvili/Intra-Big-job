import{j as e}from"./ui-B9MhWaVJ.js";import{r as s,u as r}from"./router-D7BdrHDj.js";import{o as a,p as i,q as l,r as t,s as n,B as o,v as m,t as c,w as d}from"./index-BrCX-3nd.js";import{I as u}from"./input-CEJTrfGw.js";import"./react-0RZ2pslC.js";import"./query-DKQ6_O-p.js";import"./charts-DkICKEBk.js";const p=()=>{const[p,j]=s.useState(""),[x,f]=s.useState(!1),h=r();return e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-50",children:e.jsxs(a,{className:"w-full max-w-md",children:[e.jsxs(i,{children:[e.jsx(l,{children:"Réinitialisation de mot de passe"}),e.jsx(t,{children:"Entrez votre adresse email pour recevoir un lien de réinitialisation."})]}),e.jsx(n,{children:e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),p&&p.includes("@")){f(!0);try{console.log("Envoi de la demande de réinitialisation pour:",p);const e=await d.post("/api/reset-password/request",{email:p});console.log("Réponse reçue:",e),e.success?(c.success(e.message||"Si votre email est enregistré dans notre système, vous recevrez un lien de réinitialisation"),h("/reset-password/confirmation",{state:{email:p}})):c.error(e.message||"Une erreur est survenue")}catch(s){console.error("Erreur complète:",s);const e=s.response?.data?.message||"Impossible de traiter votre demande. Veuillez réessayer plus tard.";c.error(e)}finally{f(!1)}}else c.error("Veuillez entrer une adresse email valide")},children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Adresse email"}),e.jsx(u,{id:"email",type:"email",value:p,onChange:e=>j(e.target.value),placeholder:"exemple@email.com",autoComplete:"email",required:!0,className:"w-full"})]}),e.jsx(o,{type:"submit",className:"w-full",disabled:x,children:x?"Envoi en cours...":"Envoyer le lien"})]})}),e.jsx(m,{className:"flex justify-center",children:e.jsx(o,{variant:"link",onClick:()=>h("/login"),children:"Retour à la connexion"})})]})})};export{p as default};
