import{j as s}from"./ui-CEgDFHEN.js";import{e,L as a}from"./router-Cgxi-4fo.js";import{b as r}from"./query-CdiCT4_A.js";import{f as i}from"./formationTeacher.service-C-TRxwUh.js";import{L as t,ay as n,q as c,r as d,s as l,j as m,w as o,ad as x,M as j,ar as h}from"./index-B9aMCT3a.js";import{T as p,a as u,b as f,c as N,d as g,e as y}from"./table-OfTjiDhF.js";import{f as b}from"./index-PG7bJLmh.js";import"./react-0RZ2pslC.js";import"./charts-D4j3G6dB.js";const v=()=>{const{id:v}=e(),w=parseInt(v,10),{data:M,isLoading:L,error:T}=r({queryKey:["formation-details",w],queryFn:()=>i.getFormationDetails(w),enabled:!isNaN(w),staleTime:3e5});return L?s.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:s.jsx(t,{className:"h-8 w-8 animate-spin text-primary"})}):T||!M?s.jsxs("div",{className:"p-4 bg-destructive/10 text-destructive rounded-md",children:[s.jsx("p",{children:"Une erreur est survenue lors du chargement des détails de la formation."}),s.jsx("p",{className:"text-sm",children:T?.message||"Formation non trouvée"})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:M.name}),s.jsx("p",{className:"text-muted-foreground",children:M.promotion})]}),s.jsxs("div",{className:"flex flex-col items-end gap-2",children:[s.jsx(n,{variant:M.isMainTeacher?"default":"secondary",children:M.isMainTeacher?"Professeur Principal":"Professeur"}),s.jsx(a,{to:`/absences/formation/${w}`,className:"mt-2 px-4 py-1 rounded bg-primary text-white hover:bg-primary/90 text-sm font-medium transition-colors",children:"Voir les absences"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs(c,{children:[s.jsx(d,{className:"pb-2",children:s.jsxs(l,{className:"flex items-center gap-2",children:[s.jsx(m,{className:"h-5 w-5"}),"Date de début"]})}),s.jsx(o,{children:M.dateStart?b(new Date(M.dateStart),"dd MMMM yyyy",{locale:x}):"Non définie"})]}),s.jsxs(c,{children:[s.jsx(d,{className:"pb-2",children:s.jsxs(l,{className:"flex items-center gap-2",children:[s.jsx(j,{className:"h-5 w-5"}),"Localisation"]})}),s.jsx(o,{children:M.location||"Non définie"})]}),s.jsxs(c,{children:[s.jsx(d,{className:"pb-2",children:s.jsxs(l,{className:"flex items-center gap-2",children:[s.jsx(h,{className:"h-5 w-5"}),"Étudiants"]})}),s.jsxs(o,{children:[M.students?.length||0," / ",M.capacity||"N/A"]})]})]}),M.description&&s.jsxs(c,{children:[s.jsx(d,{children:s.jsx(l,{children:"Description"})}),s.jsx(o,{children:s.jsx("p",{children:M.description})})]}),s.jsxs(c,{children:[s.jsx(d,{children:s.jsx(l,{children:"Liste des étudiants"})}),s.jsx(o,{children:s.jsxs(p,{children:[s.jsx(u,{children:s.jsxs(f,{children:[s.jsx(N,{children:"Nom"}),s.jsx(N,{children:"Prénom"}),s.jsx(N,{children:"Email"})]})}),s.jsxs(g,{children:[M.students?.map((e=>s.jsxs(f,{children:[s.jsx(y,{children:e.lastName}),s.jsx(y,{children:e.firstName}),s.jsx(y,{children:e.email})]},e.id))),(!M.students||0===M.students.length)&&s.jsx(f,{children:s.jsx(y,{colSpan:3,className:"text-center",children:"Aucun étudiant inscrit"})})]})]})})]})]})};export{v as default};
