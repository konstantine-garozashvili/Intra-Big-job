import{j as e}from"./ui-B5ZVMT00.js";import{u as s,r}from"./router-Cgxi-4fo.js";import{b as a}from"./query-DUefEkVx.js";import{f as i}from"./formationTeacher.service-COQeS9EV.js";import{L as t,ay as n,B as o}from"./index-CiiaFAI5.js";import{I as c}from"./input-DZO6zCI4.js";import{T as l,a as m,b as d,c as h,d as j,e as x}from"./table-CEnVvtQs.js";import"./react-0RZ2pslC.js";import"./charts-D4j3G6dB.js";const u=()=>{const u=s(),[f,p]=r.useState(""),{data:v,isLoading:y,error:N}=a({queryKey:["teacher-formations"],queryFn:()=>i.getMyFormations(),staleTime:3e5});if(y)return e.jsx("div",{className:"flex justify-center items-center min-h-[200px]",children:e.jsx(t,{className:"h-8 w-8 animate-spin text-primary"})});if(N)return e.jsxs("div",{className:"p-4 bg-destructive/10 text-destructive rounded-md",children:[e.jsx("p",{children:"Une erreur est survenue lors du chargement des formations."}),e.jsx("p",{className:"text-sm",children:N.message})]});const g=v?.filter((e=>e.name.toLowerCase().includes(f.toLowerCase())||e.promotion.toLowerCase().includes(f.toLowerCase())))||[];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Mes Formations"}),e.jsx(c,{type:"search",placeholder:"Rechercher une formation...",className:"max-w-sm",value:f,onChange:e=>p(e.target.value)})]}),e.jsxs(l,{children:[e.jsx(m,{children:e.jsxs(d,{children:[e.jsx(h,{children:"Formation"}),e.jsx(h,{children:"Promotion"}),e.jsx(h,{children:"Rôle"}),e.jsx(h,{children:"Actions"})]})}),e.jsxs(j,{children:[g.map((s=>e.jsxs(d,{children:[e.jsx(x,{children:s.name}),e.jsx(x,{children:s.promotion}),e.jsx(x,{children:e.jsx(n,{variant:s.isMainTeacher?"default":"secondary",children:s.isMainTeacher?"Professeur Principal":"Professeur"})}),e.jsx(x,{children:e.jsx(o,{variant:"outline",onClick:()=>{return e=s.id,void u(`/teacher/formations/${e}`);var e},children:"Voir les détails"})})]},s.id))),0===g.length&&e.jsx(d,{children:e.jsx(x,{colSpan:4,className:"text-center",children:"Vous n'avez pas de formations"})})]})]})]})};export{u as default};
