import{j as e}from"./ui-CEgDFHEN.js";import{r,L as t}from"./router-Cgxi-4fo.js";import{b as a}from"./query-CdiCT4_A.js";import{z as s,a as l,ap as n,aq as i,L as d,ar as o,N as c,ac as m,as as u,a1 as x,O as g,M as b,T as p,U as h,at as N,au as f,av as k}from"./index-CYcNFnPe.js";import{C as y}from"./circle-alert-kkp7iJjY.js";import{L as v,a as j}from"./list-DwZhWpAL.js";import"./react-0RZ2pslC.js";import"./charts-D4j3G6dB.js";
/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=s("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]),E=s("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]),R=s("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),T=e=>({STUDENT:"text-blue-500",TEACHER:"text-emerald-500",HR:"text-purple-500",ADMIN:"text-amber-500",SUPER_ADMIN:"text-red-500",RECRUITER:"text-pink-500",GUEST:"text-blue-300"}[e]||"text-gray-500"),U=e=>({STUDENT:"Étudiant",TEACHER:"Professeur",HR:"RH",ADMIN:"Administrateur",SUPER_ADMIN:"Super Admin",RECRUITER:"Recruteur",GUEST:"Invité"}[e]||e),A=({selectedRole:t,setSelectedRole:a,uniqueRoles:s})=>{const[l,n]=r.useState(!1),i=r.useRef(null);r.useEffect((()=>{const e=e=>{i.current&&!i.current.contains(e.target)&&n(!1)};return l&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[l]);const d={STUDENT:"bg-blue-100 text-blue-700 hover:bg-blue-200 dark:bg-blue-900 dark:text-blue-200 dark:hover:bg-blue-800",TEACHER:"bg-emerald-100 text-emerald-700 hover:bg-emerald-200 dark:bg-emerald-900 dark:text-emerald-200 dark:hover:bg-emerald-800",HR:"bg-purple-100 text-purple-700 hover:bg-purple-200 dark:bg-purple-900 dark:text-purple-200 dark:hover:bg-purple-800",ADMIN:"bg-amber-100 text-amber-700 hover:bg-amber-200 dark:bg-amber-900 dark:text-amber-200 dark:hover:bg-amber-800",SUPER_ADMIN:"bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900 dark:text-red-200 dark:hover:bg-red-800",RECRUITER:"bg-pink-100 text-pink-700 hover:bg-pink-200 dark:bg-pink-900 dark:text-pink-200 dark:hover:bg-pink-800",GUEST:"bg-blue-50 text-blue-300 hover:bg-blue-100 dark:bg-blue-800 dark:text-blue-200 dark:hover:bg-blue-700"},o={STUDENT:"text-blue-600",TEACHER:"text-emerald-600",HR:"text-purple-600",ADMIN:"text-amber-600",SUPER_ADMIN:"text-red-600",RECRUITER:"text-pink-600",GUEST:"text-blue-300"},c=e=>d[e]||"bg-blue-100 text-blue-700 hover:bg-blue-200 dark:bg-blue-900 dark:text-blue-200 dark:hover:bg-blue-800",m=e=>o[e]||"text-blue-600";return e.jsxs("div",{className:"relative",ref:i,children:[e.jsxs("button",{onClick:()=>n(!l),className:`px-4 py-2.5 rounded-lg flex items-center justify-between w-full transition-all ${t?c(t):"bg-blue-100 text-blue-700 hover:bg-blue-200 dark:bg-blue-900 dark:text-blue-200 dark:hover:bg-blue-800"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(x,{className:`w-5 h-5 ${t?m(t):"text-blue-600"}`}),e.jsx("span",{children:t?U(t):"Filtrer par rôle"})]}),e.jsx(u,{className:"w-5 h-5 transition-transform "+(l?"rotate-180":"")})]}),l&&e.jsx("div",{className:"absolute top-full rounded-lg left-0 w-48 md:w-64 md:right-0 md:left-auto mt-1 bg-white dark:bg-gray-800 shadow-xl border border-gray-200 dark:border-gray-700 z-50",children:e.jsx("div",{className:"p-2",children:s.map(((r,l)=>{const i=0===l,d=l===s.length-1;return e.jsxs("button",{onClick:()=>{a(r),n(!1)},className:`w-full flex items-center space-x-3 px-3 py-2.5 transition-colors\n                    ${i?"rounded-t-lg":""}\n                    ${d?"rounded-b-lg":""}\n                    ${t===r?"bg-blue-500 text-white":c(r)}`,children:[e.jsx(x,{className:`w-5 h-5 ${t===r?"text-white":m(r)}`}),e.jsx("span",{children:U(r)})]},r)}))})})]})},C=({sortOption:t,setSortOption:a})=>{const[s,l]=r.useState(!1),n=r.useRef(null);r.useEffect((()=>{const e=e=>{n.current&&!n.current.contains(e.target)&&l(!1)};return s&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[s]);const i={nameAsc:"bg-blue-100 text-blue-800 hover:bg-blue-200 dark:bg-blue-900 dark:text-blue-200 dark:hover:bg-blue-800",nameDesc:"bg-blue-100 text-blue-800 hover:bg-blue-200 dark:bg-blue-900 dark:text-blue-200 dark:hover:bg-blue-800"};return e.jsxs("div",{className:"relative",ref:n,children:[e.jsxs("button",{onClick:()=>l(!s),className:`px-4 py-2.5 rounded-lg flex items-center justify-between w-full transition-all ${t?i[t]:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:["nameAsc"===t?e.jsx(E,{className:"w-5 h-5 text-blue-500"}):"nameDesc"===t?e.jsx(w,{className:"w-5 h-5 text-blue-500"}):e.jsx(E,{className:"w-5 h-5 text-gray-500"}),e.jsx("span",{children:t?{nameAsc:"Nom A-Z",nameDesc:"Nom Z-A"}[t]:"Trier par"})]}),e.jsx(u,{className:"w-5 h-5 transition-transform "+(s?"rotate-180":"")})]}),s&&e.jsx("div",{className:"absolute top-full left-0 w-full md:w-64 md:right-0 md:left-auto mt-1 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 z-50",children:e.jsxs("div",{className:"p-2",children:[e.jsxs("button",{onClick:()=>{a("nameAsc"),l(!1)},className:`w-full flex items-center space-x-3 px-3 py-2.5 rounded-t-lg transition-colors ${"nameAsc"===t?"bg-blue-500 text-white":i.nameAsc}`,children:[e.jsx(E,{className:"w-5 h-5 "+("nameAsc"===t?"text-white":"text-blue-500")}),e.jsx("span",{className:""+("nameAsc"===t?"text-white":"text-blue-500"),children:"Nom A-Z"})]}),e.jsxs("button",{onClick:()=>{a("nameDesc"),l(!1)},className:`w-full flex items-center space-x-3 px-3 py-2.5 rounded-b-lg transition-colors ${"nameDesc"===t?"bg-blue-500 text-white":i.nameDesc}`,children:[e.jsx(w,{className:"w-5 h-5 "+("nameDesc"===t?"text-white":"text-blue-500")}),e.jsx("span",{className:""+("nameDesc"===t?"text-white":"text-blue-500"),children:"Nom Z-A"})]})]})})]})},S=({layout:t,setLayout:a})=>{const[s,l]=r.useState(!1),n=r.useRef(null);r.useEffect((()=>{const e=e=>{n.current&&!n.current.contains(e.target)&&l(!1)};return s&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[s]);const i={card:"bg-blue-100 text-blue-800 hover:bg-blue-200 dark:bg-blue-900 dark:text-blue-200 dark:hover:bg-blue-800",list:"bg-blue-100 text-blue-800 hover:bg-blue-200 dark:bg-blue-900 dark:text-blue-200 dark:hover:bg-blue-800",compact:"bg-blue-100 text-blue-800 hover:bg-blue-200 dark:bg-blue-900 dark:text-blue-200 dark:hover:bg-blue-800"},d={card:e.jsx(v,{className:"w-5 h-5"}),list:e.jsx(j,{className:"w-5 h-5"}),compact:e.jsx(R,{className:"w-5 h-5"})};return e.jsxs("div",{className:"relative",ref:n,children:[e.jsxs("button",{onClick:()=>l(!s),className:`px-4 py-2.5 rounded-lg flex items-center justify-between w-full transition-all ${t?i[t]:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[t?d[t]:e.jsx(v,{className:"w-5 h-5 text-gray-500"}),e.jsx("span",{children:t?{card:"Grille",list:"Liste",compact:"Compact"}[t]:"Vue"})]}),e.jsx(u,{className:"w-5 h-5 transition-transform "+(s?"rotate-180":"")})]}),s&&e.jsx("div",{className:"absolute top-full left-0 w-48 md:w-64 md:right-0 md:left-auto mt-1 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 z-50",children:e.jsxs("div",{className:"p-2",children:[e.jsxs("button",{onClick:()=>{a("card"),l(!1)},className:`w-full flex items-center space-x-3 px-3 py-2.5 rounded-t-lg transition-colors ${"card"===t?"bg-blue-500 text-white":i.card}`,children:[e.jsx(v,{className:"w-5 h-5 "+("card"===t?"text-white":"text-blue-500")}),e.jsx("span",{className:""+("card"===t?"text-white":"text-blue-500"),children:"Grille"})]}),e.jsxs("button",{onClick:()=>{a("list"),l(!1)},className:`w-full flex items-center space-x-3 px-3 py-2.5 transition-colors ${"list"===t?"bg-blue-500 text-white":i.list}`,children:[e.jsx(j,{className:"w-5 h-5 "+("list"===t?"text-white":"text-blue-500")}),e.jsx("span",{className:""+("list"===t?"text-white":"text-blue-500"),children:"Liste"})]}),e.jsxs("button",{onClick:()=>{a("compact"),l(!1)},className:`w-full flex items-center space-x-3 px-3 py-2.5 rounded-b-lg transition-colors ${"compact"===t?"bg-blue-500 text-white":i.compact}`,children:[e.jsx(R,{className:"w-5 h-5 "+("compact"===t?"text-white":"text-blue-500")}),e.jsx("span",{className:""+("compact"===t?"text-white":"text-blue-500"),children:"Compact"})]})]})})]})},D=({user:a,onClose:s})=>{const l=a.city||"Non renseignée",n=a.userRoles?.map((e=>e.role.name))||[];n.some((e=>"object"==typeof e?"STUDENT"===e.name:"STUDENT"===e));const i=r.useRef(null);return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:e=>{i.current&&!i.current.contains(e.target)&&s()},children:e.jsx("div",{ref:i,className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-[500px] h-[400px] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Détails de l'utilisateur"}),e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:e.jsx(m,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start space-y-4 sm:space-y-0 sm:space-x-6",children:[e.jsx("div",{className:"flex-shrink-0",children:a.profilePictureUrl?e.jsx("img",{src:a.profilePictureUrl,alt:`${a.firstName} ${a.lastName}`,className:"w-36 h-36 rounded-full object-cover shadow-lg shadow-blue-100 dark:shadow-blue-900 transition-transform duration-300 hover:scale-110",onError:e=>{e.target.onerror=null,e.target.style.display="none";const r=document.createElement("img");r.src="/default-avatar.png",r.className="w-36 h-36 rounded-full object-cover shadow-lg shadow-blue-100 dark:shadow-blue-900",e.target.parentNode.insertBefore(r,e.target),e.target.remove()}}):e.jsx(M,{firstName:a.firstName,lastName:a.lastName,size:"lg",className:"w-36 h-36 ring-2 ring-blue-100 dark:ring-blue-900 shadow-lg transition-transform duration-300 hover:scale-110"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-xl font-semibold text-white relative inline-block mb-4",children:[e.jsxs("span",{className:"relative z-10 px-4",children:[a.firstName," ",a.lastName]}),e.jsx("span",{className:"absolute inset-0 bg-gradient-to-r from-blue-400 to-blue-600 rounded-lg px-4"})]}),e.jsxs("p",{className:"text-base text-gray-500 dark:text-gray-400 mb-2 flex items-center",children:[e.jsx(g,{className:"w-4 h-4 mr-2 text-blue-500"}),a.email]}),e.jsxs("p",{className:"text-base text-gray-500 dark:text-gray-400 mb-4 flex items-center",children:[e.jsx(b,{className:"w-4 h-4 mr-2 text-blue-500"}),l]}),a.specialization&&e.jsxs("p",{className:"text-base text-gray-500 dark:text-gray-400 mb-4 flex items-center",children:[e.jsx(p,{className:"w-4 h-4 mr-2 text-blue-500"}),a.specialization.domain?.name&&`${a.specialization.domain.name} • `,a.specialization.name]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-8",children:n.map(((r,t)=>e.jsxs("span",{className:"px-2 py-1 text-xs font-medium rounded-full flex items-center "+("STUDENT"===r?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"TEACHER"===r?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900 dark:text-emerald-200":"HR"===r?"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200":"ADMIN"===r?"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-200":"SUPER_ADMIN"===r||"SUPERADMIN"===r?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"RECRUITER"===r?"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200":"GUEST"===r?"bg-blue-50 text-blue-300 dark:bg-blue-800 dark:text-blue-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"),children:[e.jsx(x,{className:"w-3 h-3 mr-1 "+("STUDENT"===r?"text-blue-500":"TEACHER"===r?"text-emerald-500":"HR"===r?"text-purple-500":"ADMIN"===r?"text-amber-500":"SUPER_ADMIN"===r||"SUPERADMIN"===r?"text-red-500":"RECRUITER"===r?"text-pink-500":"GUEST"===r?"text-blue-300":"text-gray-500")}),U(r)]},t)))}),e.jsxs(t,{to:`/public-profile/${a.id}`,className:"inline-flex items-center px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[e.jsx(h,{className:"w-4 h-4 mr-2"}),"Voir le profil complet"]})]})]})]})})})},M=({firstName:r,lastName:t,size:a="md"})=>{const s=f({firstName:r,lastName:t});return e.jsx("div",{className:`flex items-center justify-center rounded-full ${{sm:"w-8 h-8 text-sm",md:"w-10 h-10 text-base",lg:"w-16 h-16 text-xl"}[a]} ${(e=>{const r=["bg-blue-500","bg-red-500","bg-green-500","bg-purple-500","bg-yellow-500","bg-pink-500","bg-teal-500","bg-orange-500"];return r[e.split("").reduce(((e,r)=>e+r.charCodeAt(0)),0)%r.length]})(s)} text-white font-semibold`,children:s})},$=({user:t,onClick:a})=>{const[s,l]=r.useState(!1),n=t.profilePictureUrl?t.profilePictureUrl:t.profilePicturePath?N(t.profilePicturePath):null;return e.jsxs("div",{className:"group relative bg-white dark:bg-gray-800 rounded-2xl  shadow-sm hover:shadow-lg transition-all duration-300 cursor-pointer",onClick:()=>a(t),children:[e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[n?e.jsx("img",{src:n,alt:`${t.firstName} ${t.lastName}`,className:"w-24 h-24 rounded-full ring-2 ring-gray-200 dark:ring-gray-700 transition-transform duration-300 group-hover:scale-105",onError:e=>{e.target.onerror=null,l(!0)}}):e.jsx(M,{firstName:t.firstName,lastName:t.lastName,size:"lg",className:"ring-2 ring-gray-200 dark:ring-gray-700"}),s&&e.jsx(M,{firstName:t.firstName,lastName:t.lastName,size:"lg",className:"ring-2 ring-gray-200 dark:ring-gray-700"}),e.jsxs("div",{className:"text-center w-full overflow-hidden",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white group-hover:text-blue-600 transition-colors duration-300 truncate",children:[t.firstName," ",t.lastName]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:t.email})]}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2 mt-2",children:t.userRoles?.map(((r,t)=>{return e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full flex items-center ${a=r.role.name,{STUDENT:"bg-blue-50 text-blue-600 hover:bg-blue-100 dark:bg-blue-800 dark:text-blue-200 dark:hover:bg-blue-700",TEACHER:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900 dark:text-emerald-300",HR:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300",ADMIN:"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-300",SUPER_ADMIN:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",RECRUITER:"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-300",GUEST:"bg-blue-50 text-blue-300 hover:bg-blue-100 dark:bg-blue-800 dark:text-blue-200 dark:hover:bg-blue-700"}[a]||"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"} group-hover:opacity-80 transition-opacity duration-300`,children:[e.jsx(x,{className:`w-3 h-3 mr-1 ${T(r.role.name)}`}),U(r.role.name)]},t);var a}))})]})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-transparent to-gray-900/10 dark:to-gray-100/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]},t.id)},I=()=>{const[t,s]=r.useState(""),[u,g]=r.useState(null),[b,p]=r.useState(null),[h,N]=r.useState("card"),[f,v]=r.useState("nameAsc"),{hasRole:j,hasAnyRole:w}=l(),{allowedSearchRoles:E}=n(),{data:R,isLoading:I,error:P}=a({queryKey:["users","all"],queryFn:k}),H=r.useMemo((()=>{if(!R)return[];const e=R.flatMap((e=>e.userRoles?.map((e=>e.role.name)).filter((e=>"GUEST"===e||E.includes(e)))));return[...new Set(e)||[]]}),[R,E]),L=r.useMemo((()=>{if(!R)return[];const e=R.filter((e=>(e=>{const r=t.toLowerCase();return e.firstName.toLowerCase().includes(r)||e.lastName.toLowerCase().includes(r)||e.email.toLowerCase().includes(r)})(e)&&(e=>!b||e.userRoles?.some((e=>e.role.name===b)))(e)));return j(i.ADMIN)||j(i.SUPERADMIN)?e:e.filter((e=>{const r=e.userRoles?.map((e=>e.role.name))||[];return j(i.STUDENT)?r.some((e=>["TEACHER","STUDENT","RECRUITER","HR"].includes(e))):j(i.HR)?r.some((e=>["TEACHER","STUDENT","RECRUITER"].includes(e))):j(i.RECRUITER)?r.some((e=>["TEACHER","STUDENT"].includes(e))):j(i.TEACHER)?r.some((e=>["STUDENT","HR"].includes(e))):j(i.GUEST)?r.some((e=>["RECRUITER"].includes(e))):!r.some((e=>["ADMIN","SUPERADMIN","SUPER_ADMIN"].includes(e)))}))}),[R,t,b,j,w]),z=r.useMemo((()=>{if(!L)return[];switch(f){case"nameAsc":return[...L].sort(((e,r)=>`${e.firstName} ${e.lastName}`.localeCompare(`${r.firstName} ${r.lastName}`)));case"nameDesc":return[...L].sort(((e,r)=>`${r.firstName} ${r.lastName}`.localeCompare(`${e.firstName} ${e.lastName}`)));default:return L}}),[L,f]),G=e=>({STUDENT:"bg-blue-100 text-blue-800 hover:bg-blue-200 dark:bg-blue-900 dark:text-blue-200 dark:hover:bg-blue-800",TEACHER:"bg-emerald-100 text-emerald-800 hover:bg-emerald-200 dark:bg-emerald-900 dark:text-emerald-200 dark:hover:bg-emerald-800",HR:"bg-purple-100 text-purple-800 hover:bg-purple-200 dark:bg-purple-900 dark:text-purple-200 dark:hover:bg-purple-800",ADMIN:"bg-amber-100 text-amber-800 hover:bg-amber-200 dark:bg-amber-900 dark:text-amber-200 dark:hover:bg-amber-800",SUPER_ADMIN:"bg-red-100 text-red-800 hover:bg-red-200 dark:bg-red-900 dark:text-red-200 dark:hover:bg-red-800",RECRUITER:"bg-pink-100 text-pink-800 hover:bg-pink-200 dark:bg-pink-900 dark:text-pink-200 dark:hover:bg-pink-800",GUEST:"bg-blue-50 text-blue-300 hover:bg-blue-100 dark:bg-blue-800 dark:text-blue-200 dark:hover:bg-blue-700"}[e]||"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200");return I?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(d,{className:"w-8 h-8 animate-spin text-blue-500"})}):P?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen text-red-500",children:[e.jsx(y,{className:"w-8 h-8 mb-2"}),e.jsx("p",{children:"Une erreur est survenue lors du chargement des utilisateurs"})]}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"flex flex-col space-y-4 mb-8",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{className:"w-6 h-6 text-blue-500"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Trombinoscope"})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"relative flex-1 ",children:[e.jsx(c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Rechercher un utilisateur...",value:t,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-0 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 md:gap-2",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsx(S,{layout:h,setLayout:N})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsx(C,{sortOption:f,setSortOption:v})}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(A,{selectedRole:b,setSelectedRole:p,uniqueRoles:H}),b&&e.jsxs("button",{onClick:()=>{p(null)},className:"px-3 py-1.5 rounded-lg flex items-center space-x-2 transition-colors bg-gray-100 text-gray-800 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-700",children:[e.jsx(m,{className:"w-4 h-4"}),e.jsx("span",{children:"Effacer le filtre"})]})]})]})]}),0===z?.length?e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"Aucun utilisateur trouvé"}):e.jsx("div",{className:"bg-gradient-to-br from-blue-100 to-blue-200 dark:from-blue-900 dark:to-blue-800 p-4 md:p-8 rounded-xl",children:(()=>{switch(h){case"list":return e.jsx("div",{className:"space-y-6",children:z?.map((r=>e.jsxs("div",{className:"group relative bg-white dark:bg-gray-800 rounded-2xl  shadow-sm hover:shadow-lg transition-all duration-300 cursor-pointer",onClick:()=>g(r),children:[e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[r.profilePictureUrl?e.jsx("img",{src:r.profilePictureUrl,alt:`${r.firstName} ${r.lastName}`,className:"w-12 h-12 rounded-full ring-2 ring-gray-200 dark:ring-gray-700 transition-transform duration-300 group-hover:scale-105",onError:e=>{e.target.onerror=null,e.target.style.display="none";const r=document.createElement("img");r.src="/default-avatar.png",r.className="w-12 h-12 rounded-full ring-2 ring-gray-200 dark:ring-gray-700",e.target.parentNode.insertBefore(r,e.target),e.target.remove()}}):e.jsx(M,{firstName:r.firstName,lastName:r.lastName,className:"ring-2 ring-gray-200 dark:ring-gray-700"}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white group-hover:text-blue-600 transition-colors duration-300 truncate",children:[r.firstName," ",r.lastName]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:r.email})]}),e.jsx("div",{className:"flex flex-wrap gap-2 overflow-hidden",children:r.userRoles?.map(((r,t)=>e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full inline-flex items-center ${G(r.role.name)} group-hover:opacity-80 transition-opacity duration-300 max-w-full`,children:[e.jsx(x,{className:`w-3 h-3 mr-1 flex-shrink-0 ${T(r.role.name)}`}),e.jsx("span",{className:"truncate",children:U(r.role.name)})]},t)))})]})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-transparent to-gray-900/10 dark:to-gray-100/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]},r.id)))});case"compact":return e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:z?.map((r=>e.jsxs("div",{className:"group relative bg-white dark:bg-gray-800 rounded-2xl shadow-sm hover:shadow-lg transition-all duration-300 cursor-pointer w-full",onClick:()=>g(r),children:[e.jsx("div",{className:"p-2",children:e.jsxs("div",{className:"flex flex-col items-center gap-2 w-full",children:[r.profilePictureUrl?e.jsx("img",{src:r.profilePictureUrl,alt:`${r.firstName} ${r.lastName}`,className:"w-16 h-16 rounded-full ring-2 ring-gray-200 dark:ring-gray-700 transition-transform duration-300 group-hover:scale-105",onError:e=>{e.target.onerror=null,e.target.style.display="none";const r=document.createElement("img");r.src="/default-avatar.png",r.className="w-16 h-16 rounded-full ring-2 ring-gray-200 dark:ring-gray-700",e.target.parentNode.insertBefore(r,e.target),e.target.remove()}}):null,e.jsxs("div",{className:"text-center w-full overflow-hidden",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white group-hover:text-blue-600 transition-colors duration-300 truncate mb-1",children:[r.firstName," ",r.lastName]}),e.jsx("div",{className:"flex flex-wrap justify-center gap-1 overflow-hidden",children:r.userRoles?.map(((r,t)=>e.jsxs("span",{className:`inline-flex items-center px-1.5 py-0.5 text-xs font-medium rounded ${G(r.role.name)} group-hover:opacity-80 transition-opacity duration-300 max-w-full`,children:[e.jsx(x,{className:`w-2.5 h-2.5 mr-1 flex-shrink-0 ${T(r.role.name)}`}),e.jsx("span",{className:"truncate",children:U(r.role.name)})]},t)))})]})]})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-transparent to-gray-900/10 dark:to-gray-100/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]},r.id)))});default:return e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8",children:z?.map((r=>e.jsx($,{user:r,onClick:g},r.id)))})}})()}),u&&e.jsx(D,{user:u,onClose:()=>g(null)})]})})};export{I as default};
