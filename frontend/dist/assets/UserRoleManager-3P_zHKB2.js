import{j as e}from"./ui-CEgDFHEN.js";import{r as t,u as r,i as a,L as n}from"./router-Cgxi-4fo.js";import{z as s,aQ as i,aA as o,aB as l,aC as c,aR as u,aS as d,aY as m,y as h,t as y,aZ as g,a6 as f,a8 as x,af as p,ag as v,a_ as b,m as w,ay as j,a$ as N,ac as k,B as T,L as D,a4 as C,N as U,U as E,O as R,F as A,b0 as S,G as L,aX as P,b1 as M,b2 as O,b3 as I,b4 as $,b5 as H,b6 as q,f as _,c as z,C as F,D as Y,k as G,I as Q,l as V,n as B,J as X,b7 as W,j as Z,i as K,Q as J,a1 as ee,R as te,al as re,T as ae,ar as ne,b8 as se,q as ie,r as oe,s as le,w as ce}from"./index-B9aMCT3a.js";import{D as ue}from"./DashboardLayout-CpMXtuGs.js";import{I as de}from"./input-DZf6mzfp.js";import{S as me,a as he,b as ye,c as ge,d as fe,e as xe,f as pe}from"./select-DajB_xJx.js";import{T as ve,a as be,b as we,c as je}from"./tooltip-Cxol7iG6.js";import{F as Ne}from"./filter-B3Tj0WyR.js";import{T as ke,a as Te,b as De,c as Ce,d as Ue,e as Ee}from"./table-OfTjiDhF.js";import{T as Re}from"./trash-2-DzBH7TmK.js";import{L as Ae}from"./label-Bq-NQQwm.js";import{A as Se,a as Le,b as Pe}from"./alert-CvaHwnZo.js";import{T as Me}from"./triangle-alert-DnL9riM3.js";import{P as Oe,b as Ie}from"./phone-input-B9HoVAV0.js";import{g as $e,s as He,a as qe,b as _e,t as ze,c as Fe,l as Ye,i as Ge,d as Qe,e as Ve,h as Be,f as Xe,j as We}from"./index-PG7bJLmh.js";import{P as Ze}from"./phone-BvuMjEAJ.js";import{_ as Ke,i as Je}from"./charts-D4j3G6dB.js";import"./react-0RZ2pslC.js";import"./query-CdiCT4_A.js";import"./circle-alert-OAA1UIou.js";import"./index-jVOyRz7F.js";
/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=s("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),tt=s("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),rt=s("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]),at=s("ChevronsLeft",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]),nt=s("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]),st=s("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),it=s("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),ot=s("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]),lt=s("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);function ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function ut(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return ct(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ct(e,t):void 0}}(e))||t){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){o=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(o)throw s}}}}function dt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ke(e,t)}function mt(e){return mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},mt(e)}function ht(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ht=function(){return!!e})()}function yt(e){var t=ht();return function(){var r,a=mt(e);if(t){var n=mt(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return function(e,t){if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Je(e)}(this,r)}}function gt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ft(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t);if("object"!=i(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}function xt(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ft(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function pt(e,t,r){return(t=ft(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var vt=function(){function e(){gt(this,e),pt(this,"priority",void 0),pt(this,"subPriority",0)}return xt(e,[{key:"validate",value:function(e,t){return!0}}]),e}(),bt=function(){dt(t,vt);var e=yt(t);function t(r,a,n,s,i){var o;return gt(this,t),(o=e.call(this)).value=r,o.validateValue=a,o.setValue=n,o.priority=s,i&&(o.subPriority=i),o}return xt(t,[{key:"validate",value:function(e,t){return this.validateValue(e,this.value,t)}},{key:"set",value:function(e,t,r){return this.setValue(e,t,this.value,r)}}]),t}(),wt=function(){dt(t,vt);var e=yt(t);function t(){var r;gt(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),pt(Je(r),"priority",10),pt(Je(r),"subPriority",-1),r}return xt(t,[{key:"set",value:function(e,t){if(t.timestampIsSet)return e;var r=new Date(0);return r.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),r.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),r}}]),t}(),jt=function(){function e(){gt(this,e),pt(this,"incompatibleTokens",void 0),pt(this,"priority",void 0),pt(this,"subPriority",void 0)}return xt(e,[{key:"run",value:function(e,t,r,a){var n=this.parse(e,t,r,a);return n?{setter:new bt(n.value,this.validate,this.set,this.priority,this.subPriority),rest:n.rest}:null}},{key:"validate",value:function(e,t,r){return!0}}]),e}(),Nt=function(){dt(t,jt);var e=yt(t);function t(){var r;gt(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),pt(Je(r),"priority",140),pt(Je(r),"incompatibleTokens",["R","u","t","T"]),r}return xt(t,[{key:"parse",value:function(e,t,r){switch(t){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}},{key:"set",value:function(e,t,r){return t.era=r,e.setUTCFullYear(r,0,1),e.setUTCHours(0,0,0,0),e}}]),t}(),kt=/^(1[0-2]|0?\d)/,Tt=/^(3[0-1]|[0-2]?\d)/,Dt=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,Ct=/^(5[0-3]|[0-4]?\d)/,Ut=/^(2[0-3]|[0-1]?\d)/,Et=/^(2[0-4]|[0-1]?\d)/,Rt=/^(1[0-1]|0?\d)/,At=/^(1[0-2]|0?\d)/,St=/^[0-5]?\d/,Lt=/^[0-5]?\d/,Pt=/^\d/,Mt=/^\d{1,2}/,Ot=/^\d{1,3}/,It=/^\d{1,4}/,$t=/^-?\d+/,Ht=/^-?\d/,qt=/^-?\d{1,2}/,_t=/^-?\d{1,3}/,zt=/^-?\d{1,4}/,Ft=/^([+-])(\d{2})(\d{2})?|Z/,Yt=/^([+-])(\d{2})(\d{2})|Z/,Gt=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,Qt=/^([+-])(\d{2}):(\d{2})|Z/,Vt=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function Bt(e,t){return e?{value:t(e.value),rest:e.rest}:e}function Xt(e,t){var r=t.match(e);return r?{value:parseInt(r[0],10),rest:t.slice(r[0].length)}:null}function Wt(e,t){var r=t.match(e);return r?"Z"===r[0]?{value:0,rest:t.slice(1)}:{value:("+"===r[1]?1:-1)*(36e5*(r[2]?parseInt(r[2],10):0)+6e4*(r[3]?parseInt(r[3],10):0)+1e3*(r[5]?parseInt(r[5],10):0)),rest:t.slice(r[0].length)}:null}function Zt(e){return Xt($t,e)}function Kt(e,t){switch(e){case 1:return Xt(Pt,t);case 2:return Xt(Mt,t);case 3:return Xt(Ot,t);case 4:return Xt(It,t);default:return Xt(new RegExp("^\\d{1,"+e+"}"),t)}}function Jt(e,t){switch(e){case 1:return Xt(Ht,t);case 2:return Xt(qt,t);case 3:return Xt(_t,t);case 4:return Xt(zt,t);default:return Xt(new RegExp("^-?\\d{1,"+e+"}"),t)}}function er(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function tr(e,t){var r,a=t>0,n=a?t:1-t;if(n<=50)r=e||100;else{var s=n+50;r=e+100*Math.floor(s/100)-(e>=s%100?100:0)}return a?r:1-r}function rr(e){return e%400==0||e%4==0&&e%100!=0}var ar=function(){dt(t,jt);var e=yt(t);function t(){var r;gt(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),pt(Je(r),"priority",130),pt(Je(r),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),r}return xt(t,[{key:"parse",value:function(e,t,r){var a=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return Bt(Kt(4,e),a);case"yo":return Bt(r.ordinalNumber(e,{unit:"year"}),a);default:return Bt(Kt(t.length,e),a)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,r){var a=e.getUTCFullYear();if(r.isTwoDigitYear){var n=tr(r.year,a);return e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}var s="era"in t&&1!==t.era?1-r.year:r.year;return e.setUTCFullYear(s,0,1),e.setUTCHours(0,0,0,0),e}}]),t}(),nr=function(){dt(t,jt);var e=yt(t);function t(){var r;gt(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),pt(Je(r),"priority",130),pt(Je(r),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),r}return xt(t,[{key:"parse",value:function(e,t,r){var a=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return Bt(Kt(4,e),a);case"Yo":return Bt(r.ordinalNumber(e,{unit:"year"}),a);default:return Bt(Kt(t.length,e),a)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,r,a){var n=$e(e,a);if(r.isTwoDigitYear){var s=tr(r.year,n);return e.setUTCFullYear(s,0,a.firstWeekContainsDate),e.setUTCHours(0,0,0,0),He(e,a)}var i="era"in t&&1!==t.era?1-r.year:r.year;return e.setUTCFullYear(i,0,a.firstWeekContainsDate),e.setUTCHours(0,0,0,0),He(e,a)}}]),t}(),sr=function(){dt(t,jt);var e=yt(t);function t(){var r;gt(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),pt(Je(r),"priority",130),pt(Je(r),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),r}return xt(t,[{key:"parse",value:function(e,t){return Jt("R"===t?4:t.length,e)}},{key:"set",value:function(e,t,r){var a=new Date(0);return a.setUTCFullYear(r,0,4),a.setUTCHours(0,0,0,0),qe(a)}}]),t}(),ir=function(){dt(t,jt);var e=yt(t);function t(){var r;gt(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),pt(Je(r),"priority",130),pt(Je(r),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),r}return xt(t,[{key:"parse",value:function(e,t){return Jt("u"===t?4:t.length,e)}},{key:"set",value:function(e,t,r){return e.setUTCFullYear(r,0,1),e.setUTCHours(0,0,0,0),e}}]),t}(),or=function(){dt(t,jt);var e=yt(t);function t(){var r;gt(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),pt(Je(r),"priority",120),pt(Je(r),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),r}return xt(t,[{key:"parse",value:function(e,t,r){switch(t){case"Q":case"QQ":return Kt(t.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,r){return e.setUTCMonth(3*(r-1),1),e.setUTCHours(0,0,0,0),e}}]),t}(),lr=function(){dt(t,jt);var e=yt(t);function t(){var r;gt(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),pt(Je(r),"priority",120),pt(Je(r),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),r}return xt(t,[{key:"parse",value:function(e,t,r){switch(t){case"q":case"qq":return Kt(t.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,r){return e.setUTCMonth(3*(r-1),1),e.setUTCHours(0,0,0,0),e}}]),t}(),cr=function(){dt(t,jt);var e=yt(t);function t(){var r;gt(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),pt(Je(r),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),pt(Je(r),"priority",110),r}return xt(t,[{key:"parse",value:function(e,t,r){var a=function(e){return e-1};switch(t){case"M":return Bt(Xt(kt,e),a);case"MM":return Bt(Kt(2,e),a);case"Mo":return Bt(r.ordinalNumber(e,{unit:"month"}),a);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,r){return e.setUTCMonth(r,1),e.setUTCHours(0,0,0,0),e}}]),t}(),ur=function(){dt(t,jt);var e=yt(t);function t(){var r;gt(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),pt(Je(r),"priority",110),pt(Je(r),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),r}return xt(t,[{key:"parse",value:function(e,t,r){var a=function(e){return e-1};switch(t){case"L":return Bt(Xt(kt,e),a);case"LL":return Bt(Kt(2,e),a);case"Lo":return Bt(r.ordinalNumber(e,{unit:"month"}),a);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,r){return e.setUTCMonth(r,1),e.setUTCHours(0,0,0,0),e}}]),t}();var dr=function(){dt(t,jt);var e=yt(t);function t(){var r;gt(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),pt(Je(r),"priority",100),pt(Je(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),r}return xt(t,[{key:"parse",value:function(e,t,r){switch(t){case"w":return Xt(Ct,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return Kt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,r,a){return He(function(e,t,r){o(2,arguments);var a=l(e),n=ze(t),s=_e(a,r)-n;return a.setUTCDate(a.getUTCDate()-7*s),a}(e,r,a),a)}}]),t}();var mr=function(){dt(t,jt);var e=yt(t);function t(){var r;gt(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),pt(Je(r),"priority",100),pt(Je(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),r}return xt(t,[{key:"parse",value:function(e,t,r){switch(t){case"I":return Xt(Ct,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return Kt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,r){return qe(function(e,t){o(2,arguments);var r=l(e),a=ze(t),n=Fe(r)-a;return r.setUTCDate(r.getUTCDate()-7*n),r}(e,r))}}]),t}(),hr=[31,28,31,30,31,30,31,31,30,31,30,31],yr=[31,29,31,30,31,30,31,31,30,31,30,31],gr=function(){dt(t,jt);var e=yt(t);function t(){var r;gt(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),pt(Je(r),"priority",90),pt(Je(r),"subPriority",1),pt(Je(r),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),r}return xt(t,[{key:"parse",value:function(e,t,r){switch(t){case"d":return Xt(Tt,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return Kt(t.length,e)}}},{key:"validate",value:function(e,t){var r=rr(e.getUTCFullYear()),a=e.getUTCMonth();return r?t>=1&&t<=yr[a]:t>=1&&t<=hr[a]}},{key:"set",value:function(e,t,r){return e.setUTCDate(r),e.setUTCHours(0,0,0,0),e}}]),t}(),fr=function(){dt(t,jt);var e=yt(t);function t(){var r;gt(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),pt(Je(r),"priority",90),pt(Je(r),"subpriority",1),pt(Je(r),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),r}return xt(t,[{key:"parse",value:function(e,t,r){switch(t){case"D":case"DD":return Xt(Dt,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return Kt(t.length,e)}}},{key:"validate",value:function(e,t){return rr(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365}},{key:"set",value:function(e,t,r){return e.setUTCMonth(0,r),e.setUTCHours(0,0,0,0),e}}]),t}();function xr(e,t,r){var a,n,s,i,u,d,m,h;o(2,arguments);var y=c(),g=ze(null!==(a=null!==(n=null!==(s=null!==(i=null==r?void 0:r.weekStartsOn)&&void 0!==i?i:null==r||null===(u=r.locale)||void 0===u||null===(d=u.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==s?s:y.weekStartsOn)&&void 0!==n?n:null===(m=y.locale)||void 0===m||null===(h=m.options)||void 0===h?void 0:h.weekStartsOn)&&void 0!==a?a:0);if(!(g>=0&&g<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=l(e),x=ze(t),p=((x%7+7)%7<g?7:0)+x-f.getUTCDay();return f.setUTCDate(f.getUTCDate()+p),f}var pr=function(){dt(t,jt);var e=yt(t);function t(){var r;gt(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),pt(Je(r),"priority",90),pt(Je(r),"incompatibleTokens",["D","i","e","c","t","T"]),r}return xt(t,[{key:"parse",value:function(e,t,r){switch(t){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,r,a){return(e=xr(e,r,a)).setUTCHours(0,0,0,0),e}}]),t}(),vr=function(){dt(t,jt);var e=yt(t);function t(){var r;gt(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),pt(Je(r),"priority",90),pt(Je(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),r}return xt(t,[{key:"parse",value:function(e,t,r,a){var n=function(e){var t=7*Math.floor((e-1)/7);return(e+a.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return Bt(Kt(t.length,e),n);case"eo":return Bt(r.ordinalNumber(e,{unit:"day"}),n);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,r,a){return(e=xr(e,r,a)).setUTCHours(0,0,0,0),e}}]),t}(),br=function(){dt(t,jt);var e=yt(t);function t(){var r;gt(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),pt(Je(r),"priority",90),pt(Je(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),r}return xt(t,[{key:"parse",value:function(e,t,r,a){var n=function(e){var t=7*Math.floor((e-1)/7);return(e+a.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return Bt(Kt(t.length,e),n);case"co":return Bt(r.ordinalNumber(e,{unit:"day"}),n);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,r,a){return(e=xr(e,r,a)).setUTCHours(0,0,0,0),e}}]),t}();var wr=function(){dt(t,jt);var e=yt(t);function t(){var r;gt(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),pt(Je(r),"priority",90),pt(Je(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),r}return xt(t,[{key:"parse",value:function(e,t,r){var a=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return Kt(t.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return Bt(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),a);case"iiiii":return Bt(r.day(e,{width:"narrow",context:"formatting"}),a);case"iiiiii":return Bt(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),a);default:return Bt(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),a)}}},{key:"validate",value:function(e,t){return t>=1&&t<=7}},{key:"set",value:function(e,t,r){return e=function(e,t){o(2,arguments);var r=ze(t);r%7==0&&(r-=7);var a=l(e),n=((r%7+7)%7<1?7:0)+r-a.getUTCDay();return a.setUTCDate(a.getUTCDate()+n),a}(e,r),e.setUTCHours(0,0,0,0),e}}]),t}(),jr=function(){dt(t,jt);var e=yt(t);function t(){var r;gt(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),pt(Je(r),"priority",80),pt(Je(r),"incompatibleTokens",["b","B","H","k","t","T"]),r}return xt(t,[{key:"parse",value:function(e,t,r){switch(t){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,r){return e.setUTCHours(er(r),0,0,0),e}}]),t}(),Nr=function(){dt(t,jt);var e=yt(t);function t(){var r;gt(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),pt(Je(r),"priority",80),pt(Je(r),"incompatibleTokens",["a","B","H","k","t","T"]),r}return xt(t,[{key:"parse",value:function(e,t,r){switch(t){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,r){return e.setUTCHours(er(r),0,0,0),e}}]),t}(),kr=function(){dt(t,jt);var e=yt(t);function t(){var r;gt(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),pt(Je(r),"priority",80),pt(Je(r),"incompatibleTokens",["a","b","t","T"]),r}return xt(t,[{key:"parse",value:function(e,t,r){switch(t){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,r){return e.setUTCHours(er(r),0,0,0),e}}]),t}(),Tr=function(){dt(t,jt);var e=yt(t);function t(){var r;gt(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),pt(Je(r),"priority",70),pt(Je(r),"incompatibleTokens",["H","K","k","t","T"]),r}return xt(t,[{key:"parse",value:function(e,t,r){switch(t){case"h":return Xt(At,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return Kt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=12}},{key:"set",value:function(e,t,r){var a=e.getUTCHours()>=12;return a&&r<12?e.setUTCHours(r+12,0,0,0):a||12!==r?e.setUTCHours(r,0,0,0):e.setUTCHours(0,0,0,0),e}}]),t}(),Dr=function(){dt(t,jt);var e=yt(t);function t(){var r;gt(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),pt(Je(r),"priority",70),pt(Je(r),"incompatibleTokens",["a","b","h","K","k","t","T"]),r}return xt(t,[{key:"parse",value:function(e,t,r){switch(t){case"H":return Xt(Ut,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return Kt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=23}},{key:"set",value:function(e,t,r){return e.setUTCHours(r,0,0,0),e}}]),t}(),Cr=function(){dt(t,jt);var e=yt(t);function t(){var r;gt(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),pt(Je(r),"priority",70),pt(Je(r),"incompatibleTokens",["h","H","k","t","T"]),r}return xt(t,[{key:"parse",value:function(e,t,r){switch(t){case"K":return Xt(Rt,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return Kt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,r){return e.getUTCHours()>=12&&r<12?e.setUTCHours(r+12,0,0,0):e.setUTCHours(r,0,0,0),e}}]),t}(),Ur=function(){dt(t,jt);var e=yt(t);function t(){var r;gt(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),pt(Je(r),"priority",70),pt(Je(r),"incompatibleTokens",["a","b","h","H","K","t","T"]),r}return xt(t,[{key:"parse",value:function(e,t,r){switch(t){case"k":return Xt(Et,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return Kt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=24}},{key:"set",value:function(e,t,r){var a=r<=24?r%24:r;return e.setUTCHours(a,0,0,0),e}}]),t}(),Er=function(){dt(t,jt);var e=yt(t);function t(){var r;gt(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),pt(Je(r),"priority",60),pt(Je(r),"incompatibleTokens",["t","T"]),r}return xt(t,[{key:"parse",value:function(e,t,r){switch(t){case"m":return Xt(St,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return Kt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,r){return e.setUTCMinutes(r,0,0),e}}]),t}(),Rr=function(){dt(t,jt);var e=yt(t);function t(){var r;gt(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),pt(Je(r),"priority",50),pt(Je(r),"incompatibleTokens",["t","T"]),r}return xt(t,[{key:"parse",value:function(e,t,r){switch(t){case"s":return Xt(Lt,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return Kt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,r){return e.setUTCSeconds(r,0),e}}]),t}(),Ar=function(){dt(t,jt);var e=yt(t);function t(){var r;gt(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),pt(Je(r),"priority",30),pt(Je(r),"incompatibleTokens",["t","T"]),r}return xt(t,[{key:"parse",value:function(e,t){return Bt(Kt(t.length,e),(function(e){return Math.floor(e*Math.pow(10,3-t.length))}))}},{key:"set",value:function(e,t,r){return e.setUTCMilliseconds(r),e}}]),t}(),Sr=function(){dt(t,jt);var e=yt(t);function t(){var r;gt(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),pt(Je(r),"priority",10),pt(Je(r),"incompatibleTokens",["t","T","x"]),r}return xt(t,[{key:"parse",value:function(e,t){switch(t){case"X":return Wt(Ft,e);case"XX":return Wt(Yt,e);case"XXXX":return Wt(Gt,e);case"XXXXX":return Wt(Vt,e);default:return Wt(Qt,e)}}},{key:"set",value:function(e,t,r){return t.timestampIsSet?e:new Date(e.getTime()-r)}}]),t}(),Lr=function(){dt(t,jt);var e=yt(t);function t(){var r;gt(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),pt(Je(r),"priority",10),pt(Je(r),"incompatibleTokens",["t","T","X"]),r}return xt(t,[{key:"parse",value:function(e,t){switch(t){case"x":return Wt(Ft,e);case"xx":return Wt(Yt,e);case"xxxx":return Wt(Gt,e);case"xxxxx":return Wt(Vt,e);default:return Wt(Qt,e)}}},{key:"set",value:function(e,t,r){return t.timestampIsSet?e:new Date(e.getTime()-r)}}]),t}(),Pr=function(){dt(t,jt);var e=yt(t);function t(){var r;gt(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),pt(Je(r),"priority",40),pt(Je(r),"incompatibleTokens","*"),r}return xt(t,[{key:"parse",value:function(e){return Zt(e)}},{key:"set",value:function(e,t,r){return[new Date(1e3*r),{timestampIsSet:!0}]}}]),t}(),Mr=function(){dt(t,jt);var e=yt(t);function t(){var r;gt(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),pt(Je(r),"priority",20),pt(Je(r),"incompatibleTokens","*"),r}return xt(t,[{key:"parse",value:function(e){return Zt(e)}},{key:"set",value:function(e,t,r){return[new Date(r),{timestampIsSet:!0}]}}]),t}(),Or={G:new Nt,y:new ar,Y:new nr,R:new sr,u:new ir,Q:new or,q:new lr,M:new cr,L:new ur,w:new dr,I:new mr,d:new gr,D:new fr,E:new pr,e:new vr,c:new br,i:new wr,a:new jr,b:new Nr,B:new kr,h:new Tr,H:new Dr,K:new Cr,k:new Ur,m:new Er,s:new Rr,S:new Ar,X:new Sr,x:new Lr,t:new Pr,T:new Mr},Ir=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,$r=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Hr=/^'([^]*?)'?$/,qr=/''/g,_r=/\S/,zr=/[a-zA-Z]/;function Fr(e,t,r,a){var n,s,h,y,g,f,x,p,v,b,w;o(3,arguments);var j=String(e),N=String(t),k=c(),T=null!==(n=k.locale)&&void 0!==n?n:u;if(!T.match)throw new RangeError("locale must contain match property");var D=ze(null!==(s=null!==(h=null!==(y=void 0)&&void 0!==y?y:k.firstWeekContainsDate)&&void 0!==h?h:null===(g=k.locale)||void 0===g||null===(f=g.options)||void 0===f?void 0:f.firstWeekContainsDate)&&void 0!==s?s:1);if(!(D>=1&&D<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var C=ze(null!==(x=null!==(p=null!==(v=void 0)&&void 0!==v?v:k.weekStartsOn)&&void 0!==p?p:null===(b=k.locale)||void 0===b||null===(w=b.options)||void 0===w?void 0:w.weekStartsOn)&&void 0!==x?x:0);if(!(C>=0&&C<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===N)return""===j?l(r):new Date(NaN);var U,E={firstWeekContainsDate:D,weekStartsOn:C,locale:T},R=[new wt],A=N.match($r).map((function(e){var t=e[0];return t in Ye?(0,Ye[t])(e,T.formatLong):e})).join("").match(Ir),S=[],L=ut(A);try{var P=function(){var t=U.value;null!=a&&a.useAdditionalWeekYearTokens||!Ge(t)||Qe(t,N,e),null!=a&&a.useAdditionalDayOfYearTokens||!Ve(t)||Qe(t,N,e);var r=t[0],n=Or[r];if(n){var s=n.incompatibleTokens;if(Array.isArray(s)){var i=S.find((function(e){return s.includes(e.token)||e.token===r}));if(i)throw new RangeError("The format string mustn't contain `".concat(i.fullToken,"` and `").concat(t,"` at the same time"))}else if("*"===n.incompatibleTokens&&S.length>0)throw new RangeError("The format string mustn't contain `".concat(t,"` and any other token at the same time"));S.push({token:r,fullToken:t});var o=n.run(j,t,T.match,E);if(!o)return{v:new Date(NaN)};R.push(o.setter),j=o.rest}else{if(r.match(zr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");if("''"===t?t="'":"'"===r&&(t=t.match(Hr)[1].replace(qr,"'")),0!==j.indexOf(t))return{v:new Date(NaN)};j=j.slice(t.length)}};for(L.s();!(U=L.n()).done;){var M=P();if("object"===i(M))return M.v}}catch(Y){L.e(Y)}finally{L.f()}if(j.length>0&&_r.test(j))return new Date(NaN);var O=R.map((function(e){return e.priority})).sort((function(e,t){return t-e})).filter((function(e,t,r){return r.indexOf(e)===t})).map((function(e){return R.filter((function(t){return t.priority===e})).sort((function(e,t){return t.subPriority-e.subPriority}))})).map((function(e){return e[0]})),I=l(r);if(isNaN(I.getTime()))return new Date(NaN);var $,H=Be(I,d(I)),q={},_=ut(O);try{for(_.s();!($=_.n()).done;){var z=$.value;if(!z.validate(H,E))return new Date(NaN);var F=z.set(H,q,E);Array.isArray(F)?(H=F[0],m(q,F[1])):H=F}}catch(Y){_.e(Y)}finally{_.f()}return H}function Yr({roles:n,filterRole:s,setFilterRole:i,searchTerm:o,setSearchTerm:l,fetchUsers:c,isLoading:u,isDark:d}){const m=r(),[h]=a(),y=h.get("filter"),[g,f]=t.useState(s),x=e=>e?e.replace(/^ROLE_/,"").toUpperCase():"",p=t.useMemo((()=>{if(!y)return"ALL";const e=x(y),t=n.find((t=>t.name===y||x(t.name)===e));if(t)return t.name;const r=n.find((t=>x(t.name)===e));return r?r.name:y}),[y,n]);t.useEffect((()=>{p&&g!==p&&f(p)}),[p,g]);return e.jsxs(w.div,{className:`mb-6 ${d?"bg-gray-800/50":"bg-gray-50"} p-4 rounded-lg border ${d?"border-gray-700":"border-gray-200"} relative`,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Ne,{className:"h-4 w-4 "+(d?"text-blue-400":"text-blue-600")}),e.jsx("h3",{className:"text-sm font-medium "+(d?"text-gray-200":"text-gray-700"),children:"Filtres et recherche"}),"ALL"!==s&&e.jsxs(j,{variant:"outline",className:`ml-auto ${d?"bg-blue-900/20 text-blue-400 border-blue-800":"bg-blue-50 text-blue-700 border-blue-200"} flex items-center gap-1`,children:["Filtre actif: ",N(s),e.jsx("button",{className:`ml-1 ${d?"hover:bg-blue-800/50":"hover:bg-blue-100"} p-1 rounded-full`,onClick:()=>i("ALL"),children:e.jsx(k,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx(ve,{children:e.jsxs(be,{children:[e.jsx(we,{asChild:!0,children:e.jsx("div",{className:"min-w-[200px]",children:e.jsxs(me,{value:g,onValueChange:e=>{if(e)if(f(e),i(e),"ALL"===e)m("/admin/users",{replace:!0});else{const t=e.startsWith("ROLE_")?e:`ROLE_${e}`;m(`/admin/users?filter=${t}`,{replace:!0})}},children:[e.jsx(he,{className:`w-full ${d?"bg-gray-800 border-gray-700 hover:border-gray-600":"bg-white border-gray-200 hover:border-gray-300"} shadow-sm transition-colors`,children:e.jsx(ye,{placeholder:"Filtrer par rôle"})}),e.jsxs(ge,{className:"max-h-[400px] "+(d?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:[e.jsxs(fe,{value:"ALL",className:"flex items-center gap-2 "+(d?"text-gray-200":"text-gray-900"),children:[e.jsx("span",{className:(d?"bg-gray-600":"bg-gray-100")+" w-2 h-2 rounded-full"}),"Tous les rôles"]}),n.map((t=>e.jsxs(fe,{value:t.name,className:"flex items-center gap-2 "+(d?"text-gray-200":"text-gray-900"),children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${Gr(t.name)}`}),N(t.name)]},t.id)))]})]})})}),e.jsx(je,{children:e.jsx("p",{children:"Filtrer les utilisateurs par leur rôle"})})]})}),e.jsx(ve,{children:e.jsxs(be,{children:[e.jsx(we,{asChild:!0,children:e.jsx(T,{variant:"outline",onClick:()=>c(s),disabled:u,className:(d?"bg-gray-800 hover:bg-gray-700 border-gray-700":"bg-white hover:bg-gray-50 border-gray-200")+" transition-colors shadow-sm",children:u?e.jsx(D,{className:"h-4 w-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"h-4 w-4 mr-1"}),"Actualiser"]})})}),e.jsx(je,{children:e.jsx("p",{children:"Rafraîchir la liste des utilisateurs"})})]})})]}),e.jsx("div",{className:"w-full lg:w-auto lg:min-w-[300px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(de,{placeholder:"Rechercher un utilisateur...",value:o,onChange:e=>l(e.target.value),className:`w-full ${d?"bg-gray-800 border-gray-700 hover:border-gray-600":"bg-white border-gray-200 hover:border-gray-300"} transition-colors shadow-sm pl-10`}),e.jsx(U,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 "+(d?"text-gray-500":"text-gray-400")}),o&&e.jsx("button",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 "+(d?"text-gray-500 hover:text-gray-400":"text-gray-400 hover:text-gray-500"),onClick:()=>l(""),children:e.jsx(k,{className:"h-4 w-4"})})]})})]})]})}function Gr(e){switch(e){case"SUPERADMIN":case"ROLE_SUPERADMIN":return"bg-red-500";case"ADMIN":case"ROLE_ADMIN":return"bg-orange-500";case"TEACHER":case"ROLE_TEACHER":return"bg-green-500";case"STUDENT":case"ROLE_STUDENT":return"bg-blue-500";case"HR":case"ROLE_HR":return"bg-purple-500";case"GUEST":case"ROLE_GUEST":return"bg-yellow-500";case"RECRUITER":case"ROLE_RECRUITER":return"bg-indigo-500";default:return"bg-gray-500"}}function Qr({paginatedUsers:t,handleSort:r,sortConfig:a,openChangeRoleDialog:s,openDeleteDialog:i,userHasSuperAdminRole:o,isSuperAdmin:l,openEditDialog:c,isDark:u}){const d=t=>a.key===t?"ascending"===a.direction?e.jsx(tt,{className:"w-4 h-4 ml-1"}):e.jsx(et,{className:"w-4 h-4 ml-1"}):null,m=e=>{if(!e||!e.roles||0===e.roles.length)return"bg-gray-200";const t=e.roles[0].name;return(q[t]||q.ROLE_USER).split(" ")[0]||"bg-gray-100"};return e.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"rounded-lg border shadow-sm overflow-hidden",children:e.jsxs(ke,{children:[e.jsx(Te,{className:u?"bg-gray-800/50":"bg-gray-50",children:e.jsxs(De,{className:u?"hover:bg-gray-800/80":"hover:bg-gray-50/80",children:[e.jsx(Ce,{className:"w-12"}),e.jsx(Ce,{className:"cursor-pointer font-medium "+(u?"text-gray-200":"text-gray-700"),onClick:()=>r("lastName"),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{className:"h-4 w-4 mr-2 "+(u?"text-gray-400":"text-gray-500")}),"Nom",d("lastName")]})}),e.jsx(Ce,{className:"cursor-pointer font-medium "+(u?"text-gray-200":"text-gray-700"),onClick:()=>r("email"),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{className:"h-4 w-4 mr-2 "+(u?"text-gray-400":"text-gray-500")}),"Email",d("email")]})}),e.jsx(Ce,{className:"font-medium "+(u?"text-gray-200":"text-gray-700"),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ot,{className:"h-4 w-4 mr-2 "+(u?"text-gray-400":"text-gray-500")}),"Rôles"]})}),e.jsx(Ce,{className:"text-right font-medium "+(u?"text-gray-200":"text-gray-700"),children:"Actions"})]})}),e.jsx(Ue,{children:t.length>0?t.map(((t,r)=>{return e.jsxs(w.tr,{className:`border-b ${u?"border-gray-700":"border-gray-100"} group transition-colors ${u?o(t)?"bg-red-900/20 hover:bg-red-900/30":"hover:bg-gray-800/50":o(t)?"bg-red-50/30 hover:bg-red-50/50":"hover:bg-blue-50/30"}`,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.05*r},children:[e.jsx(Ee,{className:"py-3",children:e.jsx(n,{to:`/profile/${t.id}`,tabIndex:-1,onClick:e=>e.stopPropagation(),children:e.jsxs(A,{className:`h-9 w-9 ${m(t)}`,children:[t.profilePictureUrl?e.jsx(S,{src:t.profilePictureUrl,alt:`${t.firstName} ${t.lastName}`}):null,e.jsx(L,{className:u?"text-gray-200 bg-gray-700":"",children:(a=t.firstName,d=t.lastName,`${a?.charAt(0)||""}${d?.charAt(0)||""}`.toUpperCase())})]})})}),e.jsx(Ee,{className:"font-medium py-3 "+(u?"text-gray-200":""),children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx(n,{to:`/profile/${t.id}`,className:"hover:underline",onClick:e=>e.stopPropagation(),tabIndex:-1,children:e.jsxs("span",{children:[t.firstName," ",t.lastName]})}),o(t)&&e.jsx("span",{className:`text-xs ${u?"text-red-400":"text-red-600"} mt-1`,children:"SuperAdmin"})]})}),e.jsx(Ee,{className:u?"text-gray-300":"",children:t.email}),e.jsx(Ee,{children:e.jsx("div",{className:"flex flex-wrap gap-1",children:t.roles?.map((t=>e.jsx(P,{role:t.name},t.id)))})}),e.jsx(Ee,{className:"text-right py-3",children:e.jsx(ve,{children:e.jsxs(be,{children:[e.jsx(we,{asChild:!0,children:e.jsxs(M,{children:[e.jsx(O,{asChild:!0,children:e.jsx(T,{variant:"ghost",size:"icon",className:""+(u?"hover:bg-gray-700":"hover:bg-gray-100"),children:e.jsx(st,{className:"h-4 w-4"})})}),e.jsxs(I,{align:"end",className:"w-48 "+(u?"bg-gray-800 border-gray-700":""),children:[e.jsxs($,{onClick:()=>s(t),disabled:o(t)&&!l,className:"cursor-pointer "+(u?"hover:bg-gray-700":""),children:[e.jsx(ot,{className:"h-4 w-4 mr-2 "+(u?"text-blue-400":"text-blue-600")}),e.jsx("span",{children:"Gérer les rôles"})]}),e.jsxs($,{onClick:()=>c(t),className:"cursor-pointer "+(u?"hover:bg-gray-700":""),children:[e.jsx(it,{className:"h-4 w-4 mr-2 "+(u?"text-green-400":"text-green-600")}),e.jsx("span",{children:"Modifier"})]}),e.jsx(H,{className:u?"bg-gray-700":""}),e.jsxs($,{onClick:()=>i(t),disabled:o(t)&&!l,className:"cursor-pointer "+(u?"hover:bg-gray-700 text-red-400":"text-red-600"),children:[e.jsx(Re,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:"Supprimer"})]})]})]})}),e.jsx(je,{children:e.jsx("p",{children:"Actions disponibles"})})]})})})]},t.id);var a,d})):e.jsx(De,{children:e.jsx(Ee,{colSpan:5,className:"text-center py-10 "+(u?"text-gray-400":"text-gray-500"),children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(E,{className:`h-10 w-10 ${u?"text-gray-600":"text-gray-300"} mb-2`}),e.jsx("p",{className:`text-base font-medium ${u?"text-gray-300":"text-gray-600"} mb-1`,children:"Aucun utilisateur trouvé"}),e.jsx("p",{className:"text-sm "+(u?"text-gray-400":"text-gray-500"),children:"Modifiez vos filtres ou ajoutez de nouveaux utilisateurs"})]})})})})]})})}const Vr=({className:t,...r})=>e.jsx("nav",{role:"navigation","aria-label":"pagination",className:_("mx-auto flex w-full justify-center",t),...r});function Br({filteredUsers:t,pagination:r,handlePageChange:a,isDark:n}){const s=Math.ceil(t.length/r.itemsPerPage);if(s<=1)return null;const i=r.currentPage,o=t.length,l=(i-1)*r.itemsPerPage+1,c=Math.min(i*r.itemsPerPage,o);let u=Math.max(1,i-2),d=Math.min(s,u+4);d-u<4&&(u=Math.max(1,d-4));const m=[];for(let h=u;h<=d;h++)m.push(e.jsx(T,{variant:h===i?"default":"outline",size:"icon",onClick:()=>a(h),className:"w-9 h-9 transition-all duration-200 "+(h===i?"bg-blue-600 hover:bg-blue-700 text-white shadow-sm":n?"hover:bg-gray-800 bg-gray-900 border-gray-700":"hover:bg-gray-100"),children:h},h));return e.jsxs(w.div,{className:"mt-6 flex flex-col items-center space-y-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:[e.jsxs("p",{className:"text-sm "+(n?"text-gray-400":"text-gray-600"),children:["Affichage de ",e.jsx("span",{className:"font-medium",children:l})," à"," ",e.jsx("span",{className:"font-medium",children:c})," sur"," ",e.jsx("span",{className:"font-medium",children:o})," utilisateurs"]}),e.jsxs(Vr,{className:"flex justify-center items-center gap-1 p-1 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx(T,{variant:"outline",size:"icon",onClick:()=>a(1),disabled:1===i,className:""+(n?"bg-gray-900 border-gray-700 hover:bg-gray-800":"hover:bg-gray-100"),children:e.jsx(at,{className:"h-4 w-4"})}),e.jsx(T,{variant:"outline",size:"icon",onClick:()=>a(i-1),disabled:1===i,className:""+(n?"bg-gray-900 border-gray-700 hover:bg-gray-800":"hover:bg-gray-100"),children:e.jsx(z,{className:"h-4 w-4"})}),u>1&&e.jsxs(e.Fragment,{children:[e.jsx(T,{variant:"outline",size:"icon",onClick:()=>a(1),className:""+(n?"bg-gray-900 border-gray-700 hover:bg-gray-800":"hover:bg-gray-100"),children:"1"}),u>2&&e.jsx("span",{className:"mx-1 self-center text-gray-400 hidden sm:block",children:"…"})]}),e.jsx("div",{className:"flex items-center gap-2",children:m}),d<s&&e.jsxs(e.Fragment,{children:[d<s-1&&e.jsx("span",{className:"mx-1 self-center text-gray-400 hidden sm:block",children:"…"}),e.jsx(T,{variant:"outline",size:"icon",onClick:()=>a(s),className:""+(n?"bg-gray-900 border-gray-700 hover:bg-gray-800":"hover:bg-gray-100"),children:s})]}),e.jsx(T,{variant:"outline",size:"icon",onClick:()=>a(i+1),disabled:i===s,className:""+(n?"bg-gray-900 border-gray-700 hover:bg-gray-800":"hover:bg-gray-100"),children:e.jsx(F,{className:"h-4 w-4"})}),e.jsx(T,{variant:"outline",size:"icon",onClick:()=>a(s),disabled:i===s,className:""+(n?"bg-gray-900 border-gray-700 hover:bg-gray-800":"hover:bg-gray-100"),children:e.jsx(nt,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center justify-center text-sm text-gray-500 sm:hidden mt-2",children:["Page ",e.jsx("span",{className:"font-semibold mx-1",children:i})," sur ",e.jsx("span",{className:"font-semibold mx-1",children:s})]})]})}function Xr({isDialogOpen:t,setIsDialogOpen:r,selectedUser:a,selectedRoleId:n,setSelectedRoleId:s,roles:i,userHasSuperAdminRole:o,isSuperAdmin:l,isProcessing:c,changeUserRole:u,onSuccess:d,isDark:m}){return e.jsx(Y,{open:t,onOpenChange:r,children:e.jsxs(G,{className:"sm:max-w-[550px] "+(m?"bg-gray-800 border-gray-700":""),children:[e.jsxs(Q,{children:[e.jsxs(V,{className:"text-xl flex items-center gap-2 "+(m?"text-gray-100":""),children:[e.jsx(ot,{className:"h-5 w-5 "+(m?"text-blue-400":"text-blue-600")}),"Modifier les rôles"]}),e.jsx(B,{className:m?"text-gray-400":"",children:"Choisissez un nouveau rôle pour l'utilisateur."})]}),a&&e.jsx("div",{className:`p-4 ${m?"bg-gray-900/50":"bg-gray-50"} rounded-lg mb-4 border ${m?"border-gray-700":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(A,{className:`h-10 w-10 border-2 ${m?"border-gray-700":"border-white"} shadow-sm`,children:e.jsx(L,{className:(m?"bg-gray-700 text-gray-200":"bg-blue-100 text-blue-700")+" font-medium",children:(h=a.firstName,g=a.lastName,`${h?.charAt(0)||""}${g?.charAt(0)||""}`.toUpperCase())})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-medium "+(m?"text-gray-100":"text-gray-900"),children:[a.firstName," ",a.lastName]}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:a.roles?.map((t=>e.jsx(P,{role:t.name,isDark:m},t.id)))})]})]})}),o(a)&&!l&&e.jsxs(Se,{variant:"destructive",className:"mb-4 "+(m?"bg-red-900/20 border-red-900 text-red-400":""),children:[e.jsx(Me,{className:"h-4 w-4"}),e.jsx(Le,{children:"Action non autorisée"}),e.jsx(Pe,{children:"Vous n'avez pas les permissions nécessaires pour modifier les rôles d'un SuperAdmin."})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(Ae,{htmlFor:"role-select",className:"block mb-2 "+(m?"text-gray-200":"text-gray-700"),children:"Sélectionner un nouveau rôle"}),e.jsxs(me,{onValueChange:e=>s(Number(e)),value:n?.toString()||"",disabled:a&&o(a)&&!l,children:[e.jsx(he,{className:`w-full ${m?"bg-gray-900 border-gray-700 hover:border-gray-600":"bg-white border-gray-200 hover:border-gray-300"} transition-colors`,id:"role-select",children:e.jsx(ye,{placeholder:"Sélectionner un rôle"})}),e.jsx(ge,{className:"max-h-[400px] "+(m?"bg-gray-800 border-gray-700":""),children:e.jsxs(xe,{children:[e.jsx(pe,{className:m?"text-gray-400":"text-gray-500",children:"Rôles disponibles"}),i.map((t=>("SUPERADMIN"===t.name||"ROLE_SUPERADMIN"===t.name)&&!l?null:e.jsx(fe,{value:t.id.toString(),className:"flex items-center gap-2 "+(m?"text-gray-200 hover:bg-gray-700":""),children:e.jsx(P,{role:t.name,isDark:m})},t.id)))]})})]})]})}),e.jsxs(X,{className:"mt-6",children:[e.jsx(T,{variant:"outline",onClick:()=>r(!1),className:""+(m?"bg-gray-900 border-gray-700 hover:bg-gray-800 text-gray-200":""),children:"Annuler"}),e.jsx(T,{onClick:()=>{if(a&&n){const e=i.find((e=>e.id===n));if(e){if(a.roles&&a.roles.some((t=>{const r=t.name.toLowerCase(),a=e.name.toLowerCase();return r===a||r===`role_${a.replace("role_","")}`||`role_${r.replace("role_","")}`===a})))return void y.warning("L'utilisateur possède déjà ce rôle");const t=a.roles&&a.roles.length>0?a.roles[0].name:"ROLE_GUEST";u(a.id,t,e.name);const n={...a,roles:[{id:e.id,name:e.name}]};d&&d(n,W(e.name)),r(!1)}}},disabled:c||!n||o(a)&&!l,className:m?"bg-blue-600 hover:bg-blue-700":"",children:c?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),"Modification en cours..."]}):"Confirmer le changement"})]})]})});var h,g}function Wr({isDeleteDialogOpen:t,setIsDeleteDialogOpen:r,selectedUser:a,userHasSuperAdminRole:n,isSuperAdmin:s,isProcessing:i,deleteUser:o,isDark:l}){return e.jsx(Y,{open:t,onOpenChange:r,children:e.jsxs(G,{className:"sm:max-w-[500px] "+(l?"bg-gray-800 border-gray-700":""),children:[e.jsxs(Q,{children:[e.jsxs(V,{className:"text-xl flex items-center gap-2 "+(l?"text-gray-100":""),children:[e.jsx(lt,{className:"h-5 w-5 "+(l?"text-red-400":"text-red-600")}),"Supprimer l'utilisateur"]}),e.jsx(B,{className:l?"text-gray-400":"",children:"Cette action est irréversible. Toutes les données de l'utilisateur seront supprimées."})]}),a&&e.jsx("div",{className:`p-4 ${l?"bg-gray-900/50":"bg-gray-50"} rounded-lg mb-4 border ${l?"border-gray-700":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(A,{className:`h-10 w-10 border-2 ${l?"border-gray-700":"border-white"} shadow-sm`,children:e.jsx(L,{className:(l?"bg-gray-700 text-gray-200":"bg-red-100 text-red-700")+" font-medium",children:(c=a.firstName,u=a.lastName,`${c?.charAt(0)||""}${u?.charAt(0)||""}`.toUpperCase())})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-medium "+(l?"text-gray-100":"text-gray-900"),children:[a.firstName," ",a.lastName]}),e.jsx("p",{className:"text-sm "+(l?"text-gray-400":"text-gray-500"),children:a.email})]})]})}),n(a)&&!s&&e.jsxs(Se,{variant:"destructive",className:"mb-4 "+(l?"bg-red-900/20 border-red-900 text-red-400":""),children:[e.jsx(Me,{className:"h-4 w-4"}),e.jsx(Le,{children:"Action non autorisée"}),e.jsx(Pe,{children:"Vous n'avez pas les permissions nécessaires pour supprimer un SuperAdmin."})]}),e.jsxs(Se,{variant:"destructive",className:""+(l?"bg-red-900/20 border-red-900 text-red-400":""),children:[e.jsx(Me,{className:"h-4 w-4"}),e.jsx(Le,{children:"Attention"}),e.jsx(Pe,{children:"Cette action supprimera définitivement le compte de l'utilisateur et toutes ses données associées. Cette action ne peut pas être annulée."})]}),e.jsxs(X,{className:"mt-6",children:[e.jsx(T,{variant:"outline",onClick:()=>r(!1),className:""+(l?"bg-gray-900 border-gray-700 hover:bg-gray-800 text-gray-200":""),children:"Annuler"}),e.jsx(T,{variant:"destructive",onClick:()=>o(a.id),disabled:i||n(a)&&!s,className:l?"bg-red-900 hover:bg-red-800 border-red-900":"",children:i?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),"Suppression..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"mr-2 h-4 w-4"}),"Supprimer définitivement"]})})]})]})});var c,u}Vr.displayName="Pagination";const Zr=({isOpen:r,onClose:a,user:n,onUpdateUser:s,isProcessing:i,currentUserIsSuperAdmin:o,isDark:l})=>{const[c,u]=t.useState({firstName:"",lastName:"",email:"",phoneNumber:"",birthDate:""}),[d,m]=t.useState({}),[h,y]=t.useState(!1);t.useEffect((()=>{if(n){const e={firstName:n.firstName||"",lastName:n.lastName||"",email:n.email||"",phoneNumber:n.phoneNumber||"",birthDate:n.birthDate?Xe(new Date(n.birthDate),"yyyy-MM-dd"):""};u(e),y(!1)}}),[n]);const g=e=>{const{name:t,value:r}=e.target;c[t]!==r&&y(!0),u((e=>({...e,[t]:r}))),d[t]&&m((e=>({...e,[t]:null})))},f=n?.roles?.some((e=>"SUPERADMIN"===e.name||"ROLE_SUPERADMIN"===e.name))&&!o;return e.jsx(Y,{open:r,onOpenChange:a,children:e.jsxs(G,{className:"sm:max-w-[550px] "+(l?"bg-gray-800 border-gray-700":""),children:[e.jsxs(Q,{className:"px-6 pt-6 pb-2 "+(l?"text-gray-100":""),children:[e.jsxs(V,{className:"text-xl font-semibold flex items-center gap-2 "+(l?"text-gray-100":""),children:[e.jsx(ot,{className:"h-5 w-5 "+(l?"text-blue-400":"text-blue-600")}),"Modifier l'utilisateur"]}),e.jsx(B,{className:"text-gray-500 mt-1.5 "+(l?"text-gray-400":""),children:"Mettez à jour les informations de l'utilisateur ici."})]}),n&&e.jsxs("div",{className:`px-6 pb-4 ${l?"bg-gray-900/50":"bg-gray-50"} rounded-lg mb-4 border ${l?"border-gray-700":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-4 p-4",children:[e.jsx(A,{className:`h-12 w-12 border-2 ${l?"border-gray-700":"border-white"} shadow-sm`,children:e.jsx(L,{className:(l?"bg-gray-700 text-gray-200":"bg-blue-100 text-blue-700")+" font-medium",children:(x=n.firstName,p=n.lastName,`${x?.charAt(0)||""}${p?.charAt(0)||""}`.toUpperCase())})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("h3",{className:"font-medium "+(l?"text-gray-100":"text-gray-900"),children:[n.firstName," ",n.lastName]}),n.roles&&n.roles.some((e=>"SUPERADMIN"===e.name||"ROLE_SUPERADMIN"===e.name))&&e.jsx(j,{className:"bg-red-100 text-red-700 border-red-200",children:"SuperAdmin"})]}),e.jsx("p",{className:"text-sm "+(l?"text-gray-400":"text-gray-500"),children:n.email})]})]}),f&&e.jsxs(Se,{variant:"destructive",className:"bg-red-50 text-red-800 border-red-200 mb-4",children:[e.jsx(rt,{className:"h-4 w-4"}),e.jsx(Le,{className:"font-medium",children:"Accès limité"}),e.jsx(Pe,{className:"text-sm",children:"Vous ne pouvez pas modifier un SuperAdmin."})]})]}),e.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),!(()=>{const e={};if(c.firstName.trim()||(e.firstName="Le prénom est requis"),c.lastName.trim()||(e.lastName="Le nom est requis"),c.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c.email)||(e.email="Email invalide"):e.email="L'email est requis",c.phoneNumber&&!Ie(c.phoneNumber)&&(e.phoneNumber="Numéro de téléphone invalide"),c.birthDate){const t=Fr(c.birthDate,"yyyy-MM-dd",new Date);We(t)||(e.birthDate="Date de naissance invalide")}return m(e),0===Object.keys(e).length})())return;const t={...c,birthDate:c.birthDate?Xe(Fr(c.birthDate,"yyyy-MM-dd",new Date),"yyyy-MM-dd"):null};s(n.id,t)},className:"px-6 pb-0",children:[e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ae,{htmlFor:"firstName",className:"text-sm font-medium "+(l?"text-gray-200":"text-gray-700"),children:[e.jsx(E,{className:"h-3.5 w-3.5 inline mr-1.5 text-gray-500"}),"Prénom"]}),e.jsxs("div",{className:"relative",children:[e.jsx(de,{id:"firstName",name:"firstName",value:c.firstName,onChange:g,className:`w-full ${l?"bg-gray-900 border-gray-700 text-gray-200":""} ${d.firstName?"border-red-500":""}`,disabled:i||f,placeholder:"Jean"}),d.firstName&&e.jsxs("div",{className:"text-red-500 text-xs mt-1 flex items-center",children:[e.jsx(k,{className:"h-3 w-3 mr-1"}),d.firstName]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ae,{htmlFor:"lastName",className:"text-sm font-medium "+(l?"text-gray-200":"text-gray-700"),children:[e.jsx(E,{className:"h-3.5 w-3.5 inline mr-1.5 text-gray-500"}),"Nom"]}),e.jsxs("div",{className:"relative",children:[e.jsx(de,{id:"lastName",name:"lastName",value:c.lastName,onChange:g,className:`w-full ${l?"bg-gray-900 border-gray-700 text-gray-200":""} ${d.lastName?"border-red-500":""}`,disabled:i||f,placeholder:"Dupont"}),d.lastName&&e.jsxs("div",{className:"text-red-500 text-xs mt-1 flex items-center",children:[e.jsx(k,{className:"h-3 w-3 mr-1"}),d.lastName]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ae,{htmlFor:"email",className:"text-sm font-medium "+(l?"text-gray-200":"text-gray-700"),children:[e.jsx(R,{className:"h-3.5 w-3.5 inline mr-1.5 text-gray-500"}),"Email"]}),e.jsxs("div",{className:"relative",children:[e.jsx(de,{id:"email",name:"email",type:"email",value:c.email,onChange:g,className:`w-full ${l?"bg-gray-900 border-gray-700 text-gray-200":""} ${d.email?"border-red-500":""}`,disabled:i||f,placeholder:"jean.dupont@example.com"}),d.email&&e.jsxs("div",{className:"text-red-500 text-xs mt-1 flex items-center",children:[e.jsx(k,{className:"h-3 w-3 mr-1"}),d.email]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ae,{htmlFor:"phoneNumber",className:"text-sm font-medium "+(l?"text-gray-200":"text-gray-700"),children:[e.jsx(Ze,{className:"h-3.5 w-3.5 inline mr-1.5 text-gray-500"}),"Téléphone"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Oe,{id:"phoneNumber",name:"phoneNumber",value:c.phoneNumber,onChange:e=>{c.phoneNumber!==e&&y(!0),u((t=>({...t,phoneNumber:e}))),d.phoneNumber&&m((e=>({...e,phoneNumber:null})))},error:d.phoneNumber,disabled:i||f,placeholder:"06 12 34 56 78"}),d.phoneNumber&&e.jsxs("div",{className:"mt-1 text-sm text-red-500",children:[e.jsx(k,{className:"h-3 w-3 mr-1"}),d.phoneNumber]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ae,{htmlFor:"birthDate",className:"text-sm font-medium "+(l?"text-gray-200":"text-gray-700"),children:[e.jsx(Z,{className:"h-3.5 w-3.5 inline mr-1.5 text-gray-500"}),"Date de naissance"]}),e.jsxs("div",{className:"relative",children:[e.jsx(de,{id:"birthDate",name:"birthDate",type:"date",value:c.birthDate,onChange:g,className:`w-full ${l?"bg-gray-900 border-gray-700 text-gray-200":""} ${d.birthDate?"border-red-500":""}`,disabled:i||f}),d.birthDate&&e.jsxs("div",{className:"text-red-500 text-xs mt-1 flex items-center",children:[e.jsx(k,{className:"h-3 w-3 mr-1"}),d.birthDate]})]})]})]})]}),e.jsxs(X,{className:"py-4 mt-4 border-t flex justify-between flex-row",children:[e.jsx(T,{type:"button",variant:"outline",onClick:a,disabled:i,className:""+(l?"bg-gray-900 border-gray-700 hover:bg-gray-800 text-gray-200":"bg-white hover:bg-gray-50"),children:"Annuler"}),e.jsx(w.div,{whileHover:{scale:i||f||!h?1:1.02},whileTap:{scale:.98},children:e.jsx(T,{type:"submit",disabled:i||f||!h,className:"bg-blue-600 hover:bg-blue-700 text-white",children:i?e.jsxs("div",{className:"flex items-center",children:[e.jsx(D,{className:"mr-2 h-4 w-4 animate-spin"}),"Enregistrement..."]}):e.jsxs("div",{className:"flex items-center",children:[e.jsx(K,{className:"mr-2 h-4 w-4"}),"Enregistrer"]})})})]})]})]})});var x,p},Kr={ALL:{icon:ne,title:"Gestion des utilisateurs",description:"Visualisez et modifiez les rôles des utilisateurs dans la plateforme."},ROLE_STUDENT:{icon:ae,title:"Gestion des étudiants",description:"Visualisez et modifiez les informations des étudiants."},STUDENT:{icon:ae,title:"Gestion des étudiants",description:"Visualisez et modifiez les informations des étudiants."},ROLE_TEACHER:{icon:re,title:"Gestion des formateurs",description:"Visualisez et modifiez les informations des formateurs."},TEACHER:{icon:re,title:"Gestion des formateurs",description:"Visualisez et modifiez les informations des formateurs."},ROLE_HR:{icon:te,title:"Gestion des ressources humaines",description:"Visualisez et modifiez les informations du personnel RH."},HR:{icon:te,title:"Gestion des ressources humaines",description:"Visualisez et modifiez les informations du personnel RH."},ROLE_ADMIN:{icon:ee,title:"Gestion des administrateurs",description:"Visualisez et modifiez les informations des administrateurs."},ADMIN:{icon:ee,title:"Gestion des administrateurs",description:"Visualisez et modifiez les informations des administrateurs."}};function Jr(){const[r]=a(),n=r.get("filter"),s=t.useMemo((()=>n||"ALL"),[n]),i=t.useRef(s),[o,l]=t.useState(!1),[c,u]=t.useState(!1),[d,m]=t.useState("ALL"===s),{user:N}=J(),k=t.useMemo((()=>N?.roles?.some((e=>"SUPERADMIN"===e.name||"ROLE_SUPERADMIN"===e.name))),[N]),{roles:T,isLoading:C,selectedUser:E,selectedRoleId:R,isDialogOpen:A,isDeleteDialogOpen:S,isProcessing:L,filterRole:P,searchTerm:M,sortConfig:O,pagination:I,paginatedUsers:$,filteredUsers:H,fetchUsers:q,changeUserRole:_,deleteUser:z,updateUser:F,userHasSuperAdminRole:Y,handleSort:G,setSearchTerm:Q,setFilterRole:V,handlePageChange:B,openChangeRoleDialog:X,openDeleteDialog:W,setSelectedUser:Z,setSelectedRoleId:K,setIsDialogOpen:ee,setIsDeleteDialogOpen:te,updateLocalUsers:re}=function(e="ALL"){const[r,a]=t.useState([]),[n,s]=t.useState([]),[i,o]=t.useState(!0),[l,c]=t.useState(null),[u,d]=t.useState(null),[m,w]=t.useState(!1),[j,N]=t.useState(!1),[k,T]=t.useState(!1),[D,C]=t.useState(e),[U,E]=t.useState(""),[R,A]=t.useState({key:"lastName",direction:"ascending"}),[S,L]=t.useState({currentPage:1,itemsPerPage:10}),P=t.useCallback((e=>{C(e)}),[]);t.useEffect((()=>{(async()=>{await M(),await O(D)})()}),[]),t.useEffect((()=>{O(D)}),[D]);const M=async()=>{try{const e=await h.getAllRoles();e.success&&e.data?s(e.data):y.error("Impossible de récupérer les rôles")}catch(e){console.error("Erreur lors de la récupération des rôles:",e),y.error("Erreur lors du chargement des rôles")}},O=async(e="ALL")=>{o(!0);try{let t;if("ALL"===e)t=await h.get("/users");else{const r=e.startsWith("ROLE_")?e:`ROLE_${e.replace("ROLE_","")}`;t=await h.getUsersByRole(r)}if(t.success&&t.data)a(t.data);else{console.warn("Réponse de l'API sans succès, utilisation des données fictives");const t=e.startsWith("ROLE_")?e:`ROLE_${e.replace("ROLE_","")}`,r=mockUsers.filter((e=>e.roles&&e.roles.some((e=>e.name===t||e.name===t.replace("ROLE_","")||"ROLE_"+e.name===t))));a(r),y.error("Impossible de récupérer les utilisateurs depuis l'API. Affichage des données de démonstration.")}}catch(t){if(console.error("Erreur lors de la récupération des utilisateurs:",t),"ALL"===e)a(mockUsers);else{const t=e.startsWith("ROLE_")?e:`ROLE_${e.replace("ROLE_","")}`,r=mockUsers.filter((e=>e.roles&&e.roles.some((e=>e.name===t||e.name===t.replace("ROLE_","")||"ROLE_"+e.name===t))));a(r)}y.error("Erreur lors du chargement des utilisateurs. Affichage des données de démonstration.")}finally{o(!1)}},I=t.useMemo((()=>{const e=[...r];return R.key&&e.sort(((e,t)=>null===e[R.key]?1:null===t[R.key]?-1:void 0===e[R.key]?1:void 0===t[R.key]?-1:"string"==typeof e[R.key]?"ascending"===R.direction?e[R.key].localeCompare(t[R.key],"fr",{sensitivity:"base"}):t[R.key].localeCompare(e[R.key],"fr",{sensitivity:"base"}):e[R.key]instanceof Date&&t[R.key]instanceof Date?"ascending"===R.direction?e[R.key]-t[R.key]:t[R.key]-e[R.key]:"ascending"===R.direction?e[R.key]>t[R.key]?1:-1:e[R.key]<t[R.key]?1:-1)),e}),[r,R]),$=t.useMemo((()=>U.trim()?I.filter((e=>{const t=`${e.firstName} ${e.lastName}`.toLowerCase(),r=e.email.toLowerCase(),a=U.toLowerCase();return t.includes(a)||r.includes(a)})):I),[I,U]),H=t.useMemo((()=>{const e=(S.currentPage-1)*S.itemsPerPage;return $.slice(e,e+S.itemsPerPage)}),[$,S]);return{users:r,roles:n,isLoading:i,selectedUser:l,selectedRoleId:u,isDialogOpen:m,isDeleteDialogOpen:j,isProcessing:k,filterRole:D,searchTerm:U,sortConfig:R,pagination:S,paginatedUsers:H,filteredUsers:$,fetchUsers:O,changeUserRole:async(e,t,r)=>{T(!0);try{const n=await h.changeUserRole(e,t,r);if(n.success){const t=String(e);try{const e=g(),a=f(e,"notificationPreferences",t);if(!1!==((await x(a)).data()||{}).ROLE_UPDATE){const a={recipientId:t,title:"Changement de rôle",message:`Vous êtes maintenant ${b(r)}`,timestamp:new Date,read:!1,type:"ROLE_UPDATE"};await p(v(e,"notifications"),a)}}catch(a){console.error("Firebase error:",a),y.error("Le rôle a été modifié mais la notification n'a pas pu être envoyée")}y.success("Rôle modifié avec succès")}else y.error("Impossible de modifier le rôle: "+(n.message||"Erreur inconnue")),O(D)}catch(n){console.error("Erreur lors de la modification du rôle:",n),y.error("Erreur lors de la modification du rôle"),O(D)}finally{T(!1),w(!1)}},deleteUser:async e=>{T(!0);const t=[...r];a((t=>t.filter((t=>t.id!==e))));try{const r=await h.delete(`/users/${e}`);r.success?y.success("Utilisateur supprimé avec succès"):(a(t),y.error("Impossible de supprimer l'utilisateur: "+(r.message||"Erreur inconnue")))}catch(n){a(t),console.error("Erreur lors de la suppression de l'utilisateur:",n),y.error("Erreur lors de la suppression de l'utilisateur")}finally{T(!1),N(!1)}},updateUser:async(e,t,r)=>{T(!0),a((r=>r.map((r=>r.id===e?{...r,...t}:r))));try{const a=await h.updateUser(e,t);if(a.success){y.success("Utilisateur mis à jour avec succès");const t=String(e);try{const e=g(),r=f(e,"notificationPreferences",t);if(!1!==((await x(r)).data()||{}).INFO_UPDATE){const r={recipientId:t,title:"Mise à jour de votre profil",message:"Vos informations personnelles ont été mises à jour par un administrateur",timestamp:new Date,read:!1,type:"INFO_UPDATE"};await p(v(e,"notifications"),r)}}catch(n){console.error("Firebase error:",n)}r&&r()}else y.error("Impossible de mettre à jour l'utilisateur: "+(a.message||"Erreur inconnue")),O(D)}catch(s){console.error("Erreur lors de la mise à jour de l'utilisateur:",s),y.error("Erreur lors de la mise à jour de l'utilisateur"),O(D)}finally{T(!1)}},userHasSuperAdminRole:e=>!(!e||!e.roles)&&e.roles.some((e=>"SUPERADMIN"===e.name||"ROLE_SUPERADMIN"===e.name)),handleSort:e=>{let t="ascending";R.key===e&&"ascending"===R.direction&&(t="descending"),A({key:e,direction:t})},setSearchTerm:E,setFilterRole:P,handlePageChange:e=>{L((t=>({...t,currentPage:e})))},openChangeRoleDialog:e=>{c(e),d(null),w(!0)},openDeleteDialog:e=>{c(e),N(!0)},setSelectedUser:c,setSelectedRoleId:d,setIsDialogOpen:w,setIsDeleteDialogOpen:N,updateLocalUsers:(e,t)=>{a((t=>{const r=[...t];return e.forEach((e=>{const t=r.findIndex((t=>t.id===e.id));-1!==t&&(r[t]=e)})),r}))}}}(s);t.useEffect((()=>{s!==i.current&&(i.current=s,V(s))}),[s,V]);const ae=Kr[P]||Kr.ALL,ne=ae.icon,de=()=>{l(!1)};t.useEffect((()=>{u(!0);const e=setTimeout((()=>{m(!1)}),3e3);return()=>clearTimeout(e)}),[]);const{theme:me}=se(),he="dark"===me;return e.jsx(ue,{headerTitle:ae.title,headerIcon:ne,children:e.jsxs("div",{className:"container mx-auto py-6 px-4 sm:px-6",children:[e.jsx(w.div,{initial:{opacity:0,y:20},animate:{opacity:c?1:0,y:c?0:20},transition:{duration:.5,delay:.1},children:e.jsxs(ie,{className:`border-0 ${he?"bg-gray-800/50":"bg-white"} shadow-md hover:shadow-lg transition-shadow duration-300`,children:[e.jsx(oe,{className:(he?"bg-gradient-to-r from-gray-800/50 to-gray-700/50 border-gray-700":"bg-gradient-to-r from-slate-50 to-gray-50 border-gray-200")+" border-b rounded-t-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(le,{className:"text-gradient bg-clip-text text-transparent "+(he?"bg-gradient-to-r from-blue-400 to-indigo-400":"bg-gradient-to-r from-blue-600 to-indigo-600"),children:ae.title}),e.jsx("div",{className:`text-sm ${he?"text-gray-400":"text-muted-foreground"} max-w-2xl mt-2`,children:ae.description})]}),e.jsxs(j,{variant:"outline",className:(he?"bg-blue-900/20 text-blue-400 border-blue-800":"bg-blue-50 text-blue-700 border-blue-200")+" px-3 py-1",children:[H.length," utilisateur",1!==H.length?"s":""]})]})}),e.jsxs(ce,{className:"p-6",children:[e.jsx(Yr,{roles:T,filterRole:P,setFilterRole:V,searchTerm:M,setSearchTerm:Q,fetchUsers:q,isLoading:C}),C?e.jsxs(w.div,{className:"flex flex-col justify-center items-center h-64 my-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[e.jsx(D,{className:`h-10 w-10 animate-spin ${he?"text-blue-400":"text-primary"} mb-4`}),e.jsx("span",{className:"text-sm "+(he?"text-gray-400":"text-muted-foreground"),children:"Chargement des utilisateurs..."})]}):e.jsxs(w.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[e.jsx("div",{className:"mt-6 mb-6",children:e.jsx(Qr,{paginatedUsers:$,handleSort:G,sortConfig:O,openChangeRoleDialog:X,openDeleteDialog:W,openEditDialog:e=>{Z(e),l(!0)},userHasSuperAdminRole:Y,isSuperAdmin:k,isDark:he})}),e.jsx("div",{className:"mt-6",children:e.jsx(Br,{filteredUsers:H,pagination:I,handlePageChange:B,isDark:he})})]}),!C&&0===H.length&&M&&e.jsxs(w.div,{className:"flex flex-col items-center justify-center py-12 text-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsx(U,{className:`h-12 w-12 ${he?"text-gray-600":"text-gray-300"} mb-4`}),e.jsx("h3",{className:"text-lg font-medium "+(he?"text-gray-200":"text-gray-700"),children:"Aucun résultat trouvé"}),e.jsxs("p",{className:`text-sm ${he?"text-gray-400":"text-gray-500"} mt-1 max-w-sm`,children:['Aucun utilisateur ne correspond à votre recherche "',M,'".']}),e.jsx("button",{onClick:()=>Q(""),className:`mt-4 text-sm ${he?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-800"} font-medium`,children:"Effacer la recherche"})]})]})]})}),e.jsx(Xr,{isDialogOpen:A,setIsDialogOpen:ee,selectedUser:E,selectedRoleId:R,setSelectedRoleId:K,roles:T,userHasSuperAdminRole:Y,isSuperAdmin:k,isProcessing:L,changeUserRole:_,onSuccess:(t,r)=>{y.success(e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:"Rôle modifié avec succès"}),e.jsxs("span",{className:"text-sm opacity-90",children:[t.firstName," ",t.lastName," est maintenant ",r]})]}));const a=$.map((e=>e.id===t.id?t:e)),n=H.map((e=>e.id===t.id?t:e));"function"==typeof re?re(n,a):q(P)},isDark:he}),e.jsx(Wr,{isDeleteDialogOpen:S,setIsDeleteDialogOpen:te,selectedUser:E,userHasSuperAdminRole:Y,isSuperAdmin:k,isProcessing:L,deleteUser:z,isDark:he}),e.jsx(Zr,{isOpen:o,onClose:de,user:E,onUpdateUser:(e,t)=>F(e,t,de),isProcessing:L,currentUserIsSuperAdmin:k,isDark:he})]})})}export{Jr as default};
