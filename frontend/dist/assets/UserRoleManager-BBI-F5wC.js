import{j as e}from"./ui-B9MhWaVJ.js";import{r as t,u as r,i as a}from"./router-D7BdrHDj.js";import{X as n,az as s,al as i,am as l,an as o,aA as c,aB as u,aE as d,v as m,t as h,m as f,ak as p,aF as x,a1 as y,B as v,ar as g,I as w,U as b,J as N,x as j,y as k,ay as T,aG as C,aH as D,aI as U,aJ as A,aK as E,aL as R,d as S,b as L,C as M,D as P,i as O,E as I,j as H,k as q,aM as _,F as z,aN as Y,h as F,g as $,aO as G,Y as Q,K as V,a6 as B,L as X,af as W,n as K,o as Z,p as J,r as ee}from"./index-Dh3VsLo2.js";import{D as te}from"./DashboardLayout-KgKZtk43.js";import{I as re}from"./input-D_0VsEmu.js";import{S as ae,a as ne,b as se,c as ie,d as le,e as oe,f as ce}from"./select-k7obOIGb.js";import{T as ue,a as de,b as me,c as he}from"./tooltip-BlSP5LEe.js";import{L as fe}from"./loader-circle-MNtbErZU.js";import{T as pe,a as xe,b as ye,c as ve,d as ge,e as we}from"./table-n3dh8fC-.js";import{T as be}from"./trash-2-BudVEcdU.js";import{L as Ne}from"./label-CKTbyxqy.js";import{A as je,a as ke,b as Te}from"./alert-A6WFojaW.js";import{S as Ce}from"./shield-alert-MO8i9oM3.js";import{P as De,b as Ue}from"./phone-input-CHJs27xJ.js";import{g as Ae,s as Ee,a as Re,b as Se,t as Le,c as Me,l as Pe,i as Oe,d as Ie,e as He,h as qe,f as _e,j as ze}from"./index-DAGXJO0d.js";import{P as Ye}from"./phone-0al2wFOG.js";import{_ as Fe,i as $e}from"./charts-DkICKEBk.js";import"./react-0RZ2pslC.js";import"./query-DKQ6_O-p.js";import"./circle-alert-CDKGMAAk.js";import"./index-jVOyRz7F.js";import"./chevron-up-DtrFqUE5.js";
/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=n("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),Qe=n("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),Ve=n("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]),Be=n("ChevronsLeft",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]),Xe=n("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]),We=n("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),Ke=n("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Ze=n("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),Je=n("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),et=n("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]),tt=n("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);function rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function at(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return rt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rt(e,t):void 0}}(e))||t){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw s}}}}function nt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fe(e,t)}function st(e){return st=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},st(e)}function it(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(it=function(){return!!e})()}function lt(e){var t=it();return function(){var r,a=st(e);if(t){var n=st(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return function(e,t){if(t&&("object"==s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $e(e)}(this,r)}}function ot(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ct(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t);if("object"!=s(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function ut(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ct(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function dt(e,t,r){return(t=ct(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var mt=function(){function e(){ot(this,e),dt(this,"priority",void 0),dt(this,"subPriority",0)}return ut(e,[{key:"validate",value:function(e,t){return!0}}]),e}(),ht=function(){nt(t,mt);var e=lt(t);function t(r,a,n,s,i){var l;return ot(this,t),(l=e.call(this)).value=r,l.validateValue=a,l.setValue=n,l.priority=s,i&&(l.subPriority=i),l}return ut(t,[{key:"validate",value:function(e,t){return this.validateValue(e,this.value,t)}},{key:"set",value:function(e,t,r){return this.setValue(e,t,this.value,r)}}]),t}(),ft=function(){nt(t,mt);var e=lt(t);function t(){var r;ot(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),dt($e(r),"priority",10),dt($e(r),"subPriority",-1),r}return ut(t,[{key:"set",value:function(e,t){if(t.timestampIsSet)return e;var r=new Date(0);return r.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),r.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),r}}]),t}(),pt=function(){function e(){ot(this,e),dt(this,"incompatibleTokens",void 0),dt(this,"priority",void 0),dt(this,"subPriority",void 0)}return ut(e,[{key:"run",value:function(e,t,r,a){var n=this.parse(e,t,r,a);return n?{setter:new ht(n.value,this.validate,this.set,this.priority,this.subPriority),rest:n.rest}:null}},{key:"validate",value:function(e,t,r){return!0}}]),e}(),xt=function(){nt(t,pt);var e=lt(t);function t(){var r;ot(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),dt($e(r),"priority",140),dt($e(r),"incompatibleTokens",["R","u","t","T"]),r}return ut(t,[{key:"parse",value:function(e,t,r){switch(t){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}},{key:"set",value:function(e,t,r){return t.era=r,e.setUTCFullYear(r,0,1),e.setUTCHours(0,0,0,0),e}}]),t}(),yt=/^(1[0-2]|0?\d)/,vt=/^(3[0-1]|[0-2]?\d)/,gt=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,wt=/^(5[0-3]|[0-4]?\d)/,bt=/^(2[0-3]|[0-1]?\d)/,Nt=/^(2[0-4]|[0-1]?\d)/,jt=/^(1[0-1]|0?\d)/,kt=/^(1[0-2]|0?\d)/,Tt=/^[0-5]?\d/,Ct=/^[0-5]?\d/,Dt=/^\d/,Ut=/^\d{1,2}/,At=/^\d{1,3}/,Et=/^\d{1,4}/,Rt=/^-?\d+/,St=/^-?\d/,Lt=/^-?\d{1,2}/,Mt=/^-?\d{1,3}/,Pt=/^-?\d{1,4}/,Ot=/^([+-])(\d{2})(\d{2})?|Z/,It=/^([+-])(\d{2})(\d{2})|Z/,Ht=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,qt=/^([+-])(\d{2}):(\d{2})|Z/,_t=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function zt(e,t){return e?{value:t(e.value),rest:e.rest}:e}function Yt(e,t){var r=t.match(e);return r?{value:parseInt(r[0],10),rest:t.slice(r[0].length)}:null}function Ft(e,t){var r=t.match(e);return r?"Z"===r[0]?{value:0,rest:t.slice(1)}:{value:("+"===r[1]?1:-1)*(36e5*(r[2]?parseInt(r[2],10):0)+6e4*(r[3]?parseInt(r[3],10):0)+1e3*(r[5]?parseInt(r[5],10):0)),rest:t.slice(r[0].length)}:null}function $t(e){return Yt(Rt,e)}function Gt(e,t){switch(e){case 1:return Yt(Dt,t);case 2:return Yt(Ut,t);case 3:return Yt(At,t);case 4:return Yt(Et,t);default:return Yt(new RegExp("^\\d{1,"+e+"}"),t)}}function Qt(e,t){switch(e){case 1:return Yt(St,t);case 2:return Yt(Lt,t);case 3:return Yt(Mt,t);case 4:return Yt(Pt,t);default:return Yt(new RegExp("^-?\\d{1,"+e+"}"),t)}}function Vt(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function Bt(e,t){var r,a=t>0,n=a?t:1-t;if(n<=50)r=e||100;else{var s=n+50;r=e+100*Math.floor(s/100)-(e>=s%100?100:0)}return a?r:1-r}function Xt(e){return e%400==0||e%4==0&&e%100!=0}var Wt=function(){nt(t,pt);var e=lt(t);function t(){var r;ot(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),dt($e(r),"priority",130),dt($e(r),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),r}return ut(t,[{key:"parse",value:function(e,t,r){var a=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return zt(Gt(4,e),a);case"yo":return zt(r.ordinalNumber(e,{unit:"year"}),a);default:return zt(Gt(t.length,e),a)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,r){var a=e.getUTCFullYear();if(r.isTwoDigitYear){var n=Bt(r.year,a);return e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}var s="era"in t&&1!==t.era?1-r.year:r.year;return e.setUTCFullYear(s,0,1),e.setUTCHours(0,0,0,0),e}}]),t}(),Kt=function(){nt(t,pt);var e=lt(t);function t(){var r;ot(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),dt($e(r),"priority",130),dt($e(r),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),r}return ut(t,[{key:"parse",value:function(e,t,r){var a=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return zt(Gt(4,e),a);case"Yo":return zt(r.ordinalNumber(e,{unit:"year"}),a);default:return zt(Gt(t.length,e),a)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,r,a){var n=Ae(e,a);if(r.isTwoDigitYear){var s=Bt(r.year,n);return e.setUTCFullYear(s,0,a.firstWeekContainsDate),e.setUTCHours(0,0,0,0),Ee(e,a)}var i="era"in t&&1!==t.era?1-r.year:r.year;return e.setUTCFullYear(i,0,a.firstWeekContainsDate),e.setUTCHours(0,0,0,0),Ee(e,a)}}]),t}(),Zt=function(){nt(t,pt);var e=lt(t);function t(){var r;ot(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),dt($e(r),"priority",130),dt($e(r),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),r}return ut(t,[{key:"parse",value:function(e,t){return Qt("R"===t?4:t.length,e)}},{key:"set",value:function(e,t,r){var a=new Date(0);return a.setUTCFullYear(r,0,4),a.setUTCHours(0,0,0,0),Re(a)}}]),t}(),Jt=function(){nt(t,pt);var e=lt(t);function t(){var r;ot(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),dt($e(r),"priority",130),dt($e(r),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),r}return ut(t,[{key:"parse",value:function(e,t){return Qt("u"===t?4:t.length,e)}},{key:"set",value:function(e,t,r){return e.setUTCFullYear(r,0,1),e.setUTCHours(0,0,0,0),e}}]),t}(),er=function(){nt(t,pt);var e=lt(t);function t(){var r;ot(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),dt($e(r),"priority",120),dt($e(r),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),r}return ut(t,[{key:"parse",value:function(e,t,r){switch(t){case"Q":case"QQ":return Gt(t.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,r){return e.setUTCMonth(3*(r-1),1),e.setUTCHours(0,0,0,0),e}}]),t}(),tr=function(){nt(t,pt);var e=lt(t);function t(){var r;ot(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),dt($e(r),"priority",120),dt($e(r),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),r}return ut(t,[{key:"parse",value:function(e,t,r){switch(t){case"q":case"qq":return Gt(t.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,r){return e.setUTCMonth(3*(r-1),1),e.setUTCHours(0,0,0,0),e}}]),t}(),rr=function(){nt(t,pt);var e=lt(t);function t(){var r;ot(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),dt($e(r),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),dt($e(r),"priority",110),r}return ut(t,[{key:"parse",value:function(e,t,r){var a=function(e){return e-1};switch(t){case"M":return zt(Yt(yt,e),a);case"MM":return zt(Gt(2,e),a);case"Mo":return zt(r.ordinalNumber(e,{unit:"month"}),a);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,r){return e.setUTCMonth(r,1),e.setUTCHours(0,0,0,0),e}}]),t}(),ar=function(){nt(t,pt);var e=lt(t);function t(){var r;ot(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),dt($e(r),"priority",110),dt($e(r),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),r}return ut(t,[{key:"parse",value:function(e,t,r){var a=function(e){return e-1};switch(t){case"L":return zt(Yt(yt,e),a);case"LL":return zt(Gt(2,e),a);case"Lo":return zt(r.ordinalNumber(e,{unit:"month"}),a);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,r){return e.setUTCMonth(r,1),e.setUTCHours(0,0,0,0),e}}]),t}();var nr=function(){nt(t,pt);var e=lt(t);function t(){var r;ot(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),dt($e(r),"priority",100),dt($e(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),r}return ut(t,[{key:"parse",value:function(e,t,r){switch(t){case"w":return Yt(wt,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return Gt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,r,a){return Ee(function(e,t,r){i(2,arguments);var a=l(e),n=Le(t),s=Se(a,r)-n;return a.setUTCDate(a.getUTCDate()-7*s),a}(e,r,a),a)}}]),t}();var sr=function(){nt(t,pt);var e=lt(t);function t(){var r;ot(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),dt($e(r),"priority",100),dt($e(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),r}return ut(t,[{key:"parse",value:function(e,t,r){switch(t){case"I":return Yt(wt,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return Gt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,r){return Re(function(e,t){i(2,arguments);var r=l(e),a=Le(t),n=Me(r)-a;return r.setUTCDate(r.getUTCDate()-7*n),r}(e,r))}}]),t}(),ir=[31,28,31,30,31,30,31,31,30,31,30,31],lr=[31,29,31,30,31,30,31,31,30,31,30,31],or=function(){nt(t,pt);var e=lt(t);function t(){var r;ot(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),dt($e(r),"priority",90),dt($e(r),"subPriority",1),dt($e(r),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),r}return ut(t,[{key:"parse",value:function(e,t,r){switch(t){case"d":return Yt(vt,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return Gt(t.length,e)}}},{key:"validate",value:function(e,t){var r=Xt(e.getUTCFullYear()),a=e.getUTCMonth();return r?t>=1&&t<=lr[a]:t>=1&&t<=ir[a]}},{key:"set",value:function(e,t,r){return e.setUTCDate(r),e.setUTCHours(0,0,0,0),e}}]),t}(),cr=function(){nt(t,pt);var e=lt(t);function t(){var r;ot(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),dt($e(r),"priority",90),dt($e(r),"subpriority",1),dt($e(r),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),r}return ut(t,[{key:"parse",value:function(e,t,r){switch(t){case"D":case"DD":return Yt(gt,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return Gt(t.length,e)}}},{key:"validate",value:function(e,t){return Xt(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365}},{key:"set",value:function(e,t,r){return e.setUTCMonth(0,r),e.setUTCHours(0,0,0,0),e}}]),t}();function ur(e,t,r){var a,n,s,c,u,d,m,h;i(2,arguments);var f=o(),p=Le(null!==(a=null!==(n=null!==(s=null!==(c=null==r?void 0:r.weekStartsOn)&&void 0!==c?c:null==r||null===(u=r.locale)||void 0===u||null===(d=u.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==s?s:f.weekStartsOn)&&void 0!==n?n:null===(m=f.locale)||void 0===m||null===(h=m.options)||void 0===h?void 0:h.weekStartsOn)&&void 0!==a?a:0);if(!(p>=0&&p<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var x=l(e),y=Le(t),v=((y%7+7)%7<p?7:0)+y-x.getUTCDay();return x.setUTCDate(x.getUTCDate()+v),x}var dr=function(){nt(t,pt);var e=lt(t);function t(){var r;ot(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),dt($e(r),"priority",90),dt($e(r),"incompatibleTokens",["D","i","e","c","t","T"]),r}return ut(t,[{key:"parse",value:function(e,t,r){switch(t){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,r,a){return(e=ur(e,r,a)).setUTCHours(0,0,0,0),e}}]),t}(),mr=function(){nt(t,pt);var e=lt(t);function t(){var r;ot(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),dt($e(r),"priority",90),dt($e(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),r}return ut(t,[{key:"parse",value:function(e,t,r,a){var n=function(e){var t=7*Math.floor((e-1)/7);return(e+a.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return zt(Gt(t.length,e),n);case"eo":return zt(r.ordinalNumber(e,{unit:"day"}),n);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,r,a){return(e=ur(e,r,a)).setUTCHours(0,0,0,0),e}}]),t}(),hr=function(){nt(t,pt);var e=lt(t);function t(){var r;ot(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),dt($e(r),"priority",90),dt($e(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),r}return ut(t,[{key:"parse",value:function(e,t,r,a){var n=function(e){var t=7*Math.floor((e-1)/7);return(e+a.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return zt(Gt(t.length,e),n);case"co":return zt(r.ordinalNumber(e,{unit:"day"}),n);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,r,a){return(e=ur(e,r,a)).setUTCHours(0,0,0,0),e}}]),t}();var fr=function(){nt(t,pt);var e=lt(t);function t(){var r;ot(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),dt($e(r),"priority",90),dt($e(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),r}return ut(t,[{key:"parse",value:function(e,t,r){var a=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return Gt(t.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return zt(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),a);case"iiiii":return zt(r.day(e,{width:"narrow",context:"formatting"}),a);case"iiiiii":return zt(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),a);default:return zt(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),a)}}},{key:"validate",value:function(e,t){return t>=1&&t<=7}},{key:"set",value:function(e,t,r){return e=function(e,t){i(2,arguments);var r=Le(t);r%7==0&&(r-=7);var a=l(e),n=((r%7+7)%7<1?7:0)+r-a.getUTCDay();return a.setUTCDate(a.getUTCDate()+n),a}(e,r),e.setUTCHours(0,0,0,0),e}}]),t}(),pr=function(){nt(t,pt);var e=lt(t);function t(){var r;ot(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),dt($e(r),"priority",80),dt($e(r),"incompatibleTokens",["b","B","H","k","t","T"]),r}return ut(t,[{key:"parse",value:function(e,t,r){switch(t){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,r){return e.setUTCHours(Vt(r),0,0,0),e}}]),t}(),xr=function(){nt(t,pt);var e=lt(t);function t(){var r;ot(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),dt($e(r),"priority",80),dt($e(r),"incompatibleTokens",["a","B","H","k","t","T"]),r}return ut(t,[{key:"parse",value:function(e,t,r){switch(t){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,r){return e.setUTCHours(Vt(r),0,0,0),e}}]),t}(),yr=function(){nt(t,pt);var e=lt(t);function t(){var r;ot(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),dt($e(r),"priority",80),dt($e(r),"incompatibleTokens",["a","b","t","T"]),r}return ut(t,[{key:"parse",value:function(e,t,r){switch(t){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,r){return e.setUTCHours(Vt(r),0,0,0),e}}]),t}(),vr=function(){nt(t,pt);var e=lt(t);function t(){var r;ot(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),dt($e(r),"priority",70),dt($e(r),"incompatibleTokens",["H","K","k","t","T"]),r}return ut(t,[{key:"parse",value:function(e,t,r){switch(t){case"h":return Yt(kt,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return Gt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=12}},{key:"set",value:function(e,t,r){var a=e.getUTCHours()>=12;return a&&r<12?e.setUTCHours(r+12,0,0,0):a||12!==r?e.setUTCHours(r,0,0,0):e.setUTCHours(0,0,0,0),e}}]),t}(),gr=function(){nt(t,pt);var e=lt(t);function t(){var r;ot(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),dt($e(r),"priority",70),dt($e(r),"incompatibleTokens",["a","b","h","K","k","t","T"]),r}return ut(t,[{key:"parse",value:function(e,t,r){switch(t){case"H":return Yt(bt,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return Gt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=23}},{key:"set",value:function(e,t,r){return e.setUTCHours(r,0,0,0),e}}]),t}(),wr=function(){nt(t,pt);var e=lt(t);function t(){var r;ot(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),dt($e(r),"priority",70),dt($e(r),"incompatibleTokens",["h","H","k","t","T"]),r}return ut(t,[{key:"parse",value:function(e,t,r){switch(t){case"K":return Yt(jt,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return Gt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,r){return e.getUTCHours()>=12&&r<12?e.setUTCHours(r+12,0,0,0):e.setUTCHours(r,0,0,0),e}}]),t}(),br=function(){nt(t,pt);var e=lt(t);function t(){var r;ot(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),dt($e(r),"priority",70),dt($e(r),"incompatibleTokens",["a","b","h","H","K","t","T"]),r}return ut(t,[{key:"parse",value:function(e,t,r){switch(t){case"k":return Yt(Nt,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return Gt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=24}},{key:"set",value:function(e,t,r){var a=r<=24?r%24:r;return e.setUTCHours(a,0,0,0),e}}]),t}(),Nr=function(){nt(t,pt);var e=lt(t);function t(){var r;ot(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),dt($e(r),"priority",60),dt($e(r),"incompatibleTokens",["t","T"]),r}return ut(t,[{key:"parse",value:function(e,t,r){switch(t){case"m":return Yt(Tt,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return Gt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,r){return e.setUTCMinutes(r,0,0),e}}]),t}(),jr=function(){nt(t,pt);var e=lt(t);function t(){var r;ot(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),dt($e(r),"priority",50),dt($e(r),"incompatibleTokens",["t","T"]),r}return ut(t,[{key:"parse",value:function(e,t,r){switch(t){case"s":return Yt(Ct,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return Gt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,r){return e.setUTCSeconds(r,0),e}}]),t}(),kr=function(){nt(t,pt);var e=lt(t);function t(){var r;ot(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),dt($e(r),"priority",30),dt($e(r),"incompatibleTokens",["t","T"]),r}return ut(t,[{key:"parse",value:function(e,t){return zt(Gt(t.length,e),(function(e){return Math.floor(e*Math.pow(10,3-t.length))}))}},{key:"set",value:function(e,t,r){return e.setUTCMilliseconds(r),e}}]),t}(),Tr=function(){nt(t,pt);var e=lt(t);function t(){var r;ot(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),dt($e(r),"priority",10),dt($e(r),"incompatibleTokens",["t","T","x"]),r}return ut(t,[{key:"parse",value:function(e,t){switch(t){case"X":return Ft(Ot,e);case"XX":return Ft(It,e);case"XXXX":return Ft(Ht,e);case"XXXXX":return Ft(_t,e);default:return Ft(qt,e)}}},{key:"set",value:function(e,t,r){return t.timestampIsSet?e:new Date(e.getTime()-r)}}]),t}(),Cr=function(){nt(t,pt);var e=lt(t);function t(){var r;ot(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),dt($e(r),"priority",10),dt($e(r),"incompatibleTokens",["t","T","X"]),r}return ut(t,[{key:"parse",value:function(e,t){switch(t){case"x":return Ft(Ot,e);case"xx":return Ft(It,e);case"xxxx":return Ft(Ht,e);case"xxxxx":return Ft(_t,e);default:return Ft(qt,e)}}},{key:"set",value:function(e,t,r){return t.timestampIsSet?e:new Date(e.getTime()-r)}}]),t}(),Dr=function(){nt(t,pt);var e=lt(t);function t(){var r;ot(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),dt($e(r),"priority",40),dt($e(r),"incompatibleTokens","*"),r}return ut(t,[{key:"parse",value:function(e){return $t(e)}},{key:"set",value:function(e,t,r){return[new Date(1e3*r),{timestampIsSet:!0}]}}]),t}(),Ur=function(){nt(t,pt);var e=lt(t);function t(){var r;ot(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),dt($e(r),"priority",20),dt($e(r),"incompatibleTokens","*"),r}return ut(t,[{key:"parse",value:function(e){return $t(e)}},{key:"set",value:function(e,t,r){return[new Date(r),{timestampIsSet:!0}]}}]),t}(),Ar={G:new xt,y:new Wt,Y:new Kt,R:new Zt,u:new Jt,Q:new er,q:new tr,M:new rr,L:new ar,w:new nr,I:new sr,d:new or,D:new cr,E:new dr,e:new mr,c:new hr,i:new fr,a:new pr,b:new xr,B:new yr,h:new vr,H:new gr,K:new wr,k:new br,m:new Nr,s:new jr,S:new kr,X:new Tr,x:new Cr,t:new Dr,T:new Ur},Er=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Rr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Sr=/^'([^]*?)'?$/,Lr=/''/g,Mr=/\S/,Pr=/[a-zA-Z]/;function Or(e,t,r,a){var n,m,h,f,p,x,y,v,g,w,b;i(3,arguments);var N=String(e),j=String(t),k=o(),T=null!==(n=k.locale)&&void 0!==n?n:c;if(!T.match)throw new RangeError("locale must contain match property");var C=Le(null!==(m=null!==(h=null!==(f=void 0)&&void 0!==f?f:k.firstWeekContainsDate)&&void 0!==h?h:null===(p=k.locale)||void 0===p||null===(x=p.options)||void 0===x?void 0:x.firstWeekContainsDate)&&void 0!==m?m:1);if(!(C>=1&&C<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var D=Le(null!==(y=null!==(v=null!==(g=void 0)&&void 0!==g?g:k.weekStartsOn)&&void 0!==v?v:null===(w=k.locale)||void 0===w||null===(b=w.options)||void 0===b?void 0:b.weekStartsOn)&&void 0!==y?y:0);if(!(D>=0&&D<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===j)return""===N?l(r):new Date(NaN);var U,A={firstWeekContainsDate:C,weekStartsOn:D,locale:T},E=[new ft],R=j.match(Rr).map((function(e){var t=e[0];return t in Pe?(0,Pe[t])(e,T.formatLong):e})).join("").match(Er),S=[],L=at(R);try{var M=function(){var t=U.value;null!=a&&a.useAdditionalWeekYearTokens||!Oe(t)||Ie(t,j,e),null!=a&&a.useAdditionalDayOfYearTokens||!He(t)||Ie(t,j,e);var r=t[0],n=Ar[r];if(n){var s=n.incompatibleTokens;if(Array.isArray(s)){var i=S.find((function(e){return s.includes(e.token)||e.token===r}));if(i)throw new RangeError("The format string mustn't contain `".concat(i.fullToken,"` and `").concat(t,"` at the same time"))}else if("*"===n.incompatibleTokens&&S.length>0)throw new RangeError("The format string mustn't contain `".concat(t,"` and any other token at the same time"));S.push({token:r,fullToken:t});var l=n.run(N,t,T.match,A);if(!l)return{v:new Date(NaN)};E.push(l.setter),N=l.rest}else{if(r.match(Pr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");if("''"===t?t="'":"'"===r&&(t=t.match(Sr)[1].replace(Lr,"'")),0!==N.indexOf(t))return{v:new Date(NaN)};N=N.slice(t.length)}};for(L.s();!(U=L.n()).done;){var P=M();if("object"===s(P))return P.v}}catch($){L.e($)}finally{L.f()}if(N.length>0&&Mr.test(N))return new Date(NaN);var O=E.map((function(e){return e.priority})).sort((function(e,t){return t-e})).filter((function(e,t,r){return r.indexOf(e)===t})).map((function(e){return E.filter((function(t){return t.priority===e})).sort((function(e,t){return t.subPriority-e.subPriority}))})).map((function(e){return e[0]})),I=l(r);if(isNaN(I.getTime()))return new Date(NaN);var H,q=qe(I,u(I)),_={},z=at(O);try{for(z.s();!(H=z.n()).done;){var Y=H.value;if(!Y.validate(q,A))return new Date(NaN);var F=Y.set(q,_,A);Array.isArray(F)?(q=F[0],d(_,F[1])):q=F}}catch($){z.e($)}finally{z.f()}return q}function Ir({roles:n,filterRole:s,setFilterRole:i,searchTerm:l,setSearchTerm:o,fetchUsers:c,isLoading:u}){const d=r(),[m]=a(),h=m.get("filter"),[b,N]=t.useState(s),j=e=>e?e.replace(/^ROLE_/,"").toUpperCase():"",k=t.useMemo((()=>{if(!h)return"ALL";const e=j(h),t=n.find((t=>t.name===h||j(t.name)===e));if(t)return t.name;const r=n.find((t=>j(t.name)===e));return r?r.name:h}),[h,n]);t.useEffect((()=>{k&&b!==k&&N(k)}),[k,b]);return e.jsxs(f.div,{className:"mb-6 bg-gray-50 p-4 rounded-lg border border-gray-200 relative",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Ke,{className:"h-4 w-4 text-blue-600"}),e.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Filtres et recherche"}),"ALL"!==s&&e.jsxs(p,{variant:"outline",className:"ml-auto bg-blue-50 text-blue-700 border-blue-200 flex items-center gap-1",children:["Filtre actif: ",x(s),e.jsx("button",{className:"ml-1 hover:bg-blue-100 p-1 rounded-full",onClick:()=>i("ALL"),children:e.jsx(y,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx(ue,{children:e.jsxs(de,{children:[e.jsx(me,{asChild:!0,children:e.jsx("div",{className:"min-w-[200px]",children:e.jsxs(ae,{value:b,onValueChange:e=>{if(e)if(N(e),i(e),"ALL"===e)d("/admin/users",{replace:!0});else{const t=e.startsWith("ROLE_")?e:`ROLE_${e}`;d(`/admin/users?filter=${t}`,{replace:!0})}},children:[e.jsx(ne,{className:"w-full bg-white shadow-sm border-gray-200 hover:border-gray-300 transition-colors",children:e.jsx(se,{placeholder:"Filtrer par rôle"})}),e.jsxs(ie,{className:"max-h-[400px]",children:[e.jsxs(le,{value:"ALL",className:"flex items-center gap-2",children:[e.jsx("span",{className:"bg-gray-100 w-2 h-2 rounded-full"}),"Tous les rôles"]}),n.map((t=>e.jsxs(le,{value:t.name,className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${Hr(t.name)}`}),x(t.name)]},t.id)))]})]})})}),e.jsx(he,{children:e.jsx("p",{children:"Filtrer les utilisateurs par leur rôle"})})]})}),e.jsx(ue,{children:e.jsxs(de,{children:[e.jsx(me,{asChild:!0,children:e.jsx(v,{variant:"outline",onClick:()=>c(s),disabled:u,className:"bg-white hover:bg-gray-50 transition-colors shadow-sm",children:u?e.jsx(fe,{className:"h-4 w-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"h-4 w-4 mr-1"}),"Actualiser"]})})}),e.jsx(he,{children:e.jsx("p",{children:"Rafraîchir la liste des utilisateurs"})})]})})]}),e.jsx("div",{className:"w-full lg:w-auto lg:min-w-[300px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(re,{placeholder:"Rechercher un utilisateur...",value:l,onChange:e=>o(e.target.value),className:"w-full bg-white shadow-sm border-gray-200 hover:border-gray-300 transition-colors pl-10"}),e.jsx(w,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),l&&e.jsx("button",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-500",onClick:()=>o(""),children:e.jsx(y,{className:"h-4 w-4"})})]})})]})]})}function Hr(e){switch(e){case"SUPERADMIN":case"ROLE_SUPERADMIN":return"bg-red-500";case"ADMIN":case"ROLE_ADMIN":return"bg-orange-500";case"TEACHER":case"ROLE_TEACHER":return"bg-green-500";case"STUDENT":case"ROLE_STUDENT":return"bg-blue-500";case"HR":case"ROLE_HR":return"bg-purple-500";case"GUEST":case"ROLE_GUEST":return"bg-yellow-500";case"RECRUITER":case"ROLE_RECRUITER":return"bg-indigo-500";default:return"bg-gray-500"}}function qr({paginatedUsers:t,handleSort:r,sortConfig:a,openChangeRoleDialog:n,openDeleteDialog:s,userHasSuperAdminRole:i,isSuperAdmin:l,openEditDialog:o}){const c=t=>a.key===t?"ascending"===a.direction?e.jsx(Qe,{className:"w-4 h-4 ml-1"}):e.jsx(Ge,{className:"w-4 h-4 ml-1"}):null,u=e=>{if(!e||!e.roles||0===e.roles.length)return"bg-gray-200";const t=e.roles[0].name;return(R[t]||R.ROLE_USER).split(" ")[0]||"bg-gray-100"};return e.jsx(f.div,{className:"rounded-md border border-gray-200 overflow-hidden shadow-sm",initial:{opacity:0},animate:{opacity:1},transition:{duration:.4},children:e.jsxs(pe,{children:[e.jsx(xe,{className:"bg-gray-50",children:e.jsxs(ye,{className:"hover:bg-gray-50/80",children:[e.jsx(ve,{className:"w-12"}),e.jsx(ve,{className:"cursor-pointer font-medium text-gray-700",onClick:()=>r("lastName"),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(b,{className:"h-4 w-4 mr-2 text-gray-500"}),"Nom",c("lastName")]})}),e.jsx(ve,{className:"cursor-pointer font-medium text-gray-700",onClick:()=>r("email"),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(N,{className:"h-4 w-4 mr-2 text-gray-500"}),"Email",c("email")]})}),e.jsx(ve,{className:"font-medium text-gray-700",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(et,{className:"h-4 w-4 mr-2 text-gray-500"}),"Rôles"]})}),e.jsx(ve,{className:"text-right font-medium text-gray-700",children:"Actions"})]})}),e.jsx(ge,{children:t.length>0?t.map(((t,r)=>{return e.jsxs(f.tr,{className:"border-b border-gray-100 group transition-colors hover:bg-blue-50/30 "+(i(t)?"bg-red-50/30":""),initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.05*r},whileHover:{backgroundColor:"rgba(243, 244, 246, 0.8)"},children:[e.jsx(we,{className:"py-3",children:e.jsx(j,{className:`h-9 w-9 ${u(t)}`,children:e.jsx(k,{children:(a=t.firstName,c=t.lastName,`${a?.charAt(0)||""}${c?.charAt(0)||""}`.toUpperCase())})})}),e.jsx(we,{className:"font-medium py-3",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{children:[t.firstName," ",t.lastName]}),i(t)&&e.jsx("span",{className:"text-xs text-red-600 mt-1",children:"SuperAdmin"})]})}),e.jsx(we,{className:"py-3",children:e.jsx("a",{href:`mailto:${t.email}`,className:"text-blue-600 hover:text-blue-800 hover:underline transition-colors",children:t.email})}),e.jsx(we,{className:"py-3",children:t.roles&&t.roles.length>0?e.jsx("div",{className:"flex flex-wrap gap-1.5",children:t.roles.map(((r,a)=>e.jsx(T,{role:r.name,solid:!0,useVariant:!0,className:"transition-all duration-200 hover:scale-105"},`${t.id}-role-${a}`)))}):e.jsx("span",{className:"text-sm text-gray-500",children:"Aucun rôle"})}),e.jsx(we,{className:"text-right py-3",children:e.jsx(ue,{children:e.jsxs(de,{children:[e.jsx(me,{asChild:!0,children:e.jsxs(C,{children:[e.jsx(D,{asChild:!0,children:e.jsx(v,{variant:"ghost",size:"icon",className:"hover:bg-gray-100",children:e.jsx(We,{className:"h-4 w-4"})})}),e.jsxs(U,{align:"end",className:"w-48",children:[e.jsxs(A,{onClick:()=>n(t),disabled:i(t)&&!l,className:"cursor-pointer",children:[e.jsx(et,{className:"h-4 w-4 mr-2 text-blue-600"}),e.jsx("span",{children:"Gérer les rôles"})]}),e.jsxs(A,{onClick:()=>o&&o(t),disabled:i(t)&&!l,className:"cursor-pointer",children:[e.jsx(Ze,{className:"h-4 w-4 mr-2 text-green-600"}),e.jsx("span",{children:"Modifier l'utilisateur"})]}),e.jsx(E,{}),e.jsxs(A,{onClick:()=>s(t),disabled:i(t)&&!l,className:"text-red-600 cursor-pointer",children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:"Supprimer l'utilisateur"})]})]})]})}),e.jsx(he,{side:"left",children:e.jsxs("p",{children:["Actions pour ",t.firstName," ",t.lastName]})})]})})})]},t.id);var a,c})):e.jsx(ye,{children:e.jsx(we,{colSpan:5,className:"text-center py-10 text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(b,{className:"h-10 w-10 text-gray-300 mb-2"}),e.jsx("p",{className:"text-base font-medium text-gray-600 mb-1",children:"Aucun utilisateur trouvé"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Modifiez vos filtres ou ajoutez de nouveaux utilisateurs"})]})})})})]})})}const _r=({className:t,...r})=>e.jsx("nav",{role:"navigation","aria-label":"pagination",className:S("mx-auto flex w-full justify-center",t),...r});function zr({filteredUsers:t,pagination:r,handlePageChange:a}){const n=Math.ceil(t.length/r.itemsPerPage);if(n<=1)return null;const s=r.currentPage,i=t.length,l=(s-1)*r.itemsPerPage+1,o=Math.min(s*r.itemsPerPage,i);let c=Math.max(1,s-2),u=Math.min(n,c+4);u-c<4&&(c=Math.max(1,u-4));const d=[];for(let m=c;m<=u;m++)d.push(e.jsx(v,{variant:m===s?"default":"outline",size:"icon",onClick:()=>a(m),className:"w-9 h-9 transition-all duration-200 "+(m===s?"bg-blue-600 hover:bg-blue-700 text-white shadow-sm":"hover:bg-gray-100"),children:m},m));return e.jsxs(f.div,{className:"mt-6 flex flex-col items-center space-y-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Affichage de ",e.jsxs("span",{className:"font-semibold text-gray-700",children:[l,"-",o]})," sur ",e.jsx("span",{className:"font-semibold text-gray-700",children:i})," utilisateurs"]}),e.jsxs(_r,{className:"flex justify-center items-center gap-1 p-1 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx(v,{variant:"ghost",size:"icon",onClick:()=>a(1),disabled:1===s,className:"hidden sm:flex hover:bg-gray-200 text-gray-600",title:"Première page",children:e.jsx(Be,{className:"h-4 w-4"})}),e.jsx(v,{variant:"ghost",size:"icon",onClick:()=>a(Math.max(1,s-1)),disabled:1===s,className:"hover:bg-gray-200 text-gray-600",title:"Page précédente",children:e.jsx(L,{className:"h-4 w-4"})}),c>1&&e.jsxs(e.Fragment,{children:[e.jsx(v,{variant:"outline",size:"icon",onClick:()=>a(1),className:"w-9 h-9 hover:bg-gray-100 hidden sm:flex",children:"1"}),c>2&&e.jsx("span",{className:"mx-1 self-center text-gray-400 hidden sm:block",children:"…"})]}),e.jsx("div",{className:"flex items-center gap-1",children:d}),u<n&&e.jsxs(e.Fragment,{children:[u<n-1&&e.jsx("span",{className:"mx-1 self-center text-gray-400 hidden sm:block",children:"…"}),e.jsx(v,{variant:"outline",size:"icon",onClick:()=>a(n),className:"w-9 h-9 hover:bg-gray-100 hidden sm:flex",children:n})]}),e.jsx(v,{variant:"ghost",size:"icon",onClick:()=>a(Math.min(n,s+1)),disabled:s===n,className:"hover:bg-gray-200 text-gray-600",title:"Page suivante",children:e.jsx(M,{className:"h-4 w-4"})}),e.jsx(v,{variant:"ghost",size:"icon",onClick:()=>a(n),disabled:s===n,className:"hidden sm:flex hover:bg-gray-200 text-gray-600",title:"Dernière page",children:e.jsx(Xe,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center justify-center text-sm text-gray-500 sm:hidden mt-2",children:["Page ",e.jsx("span",{className:"font-semibold mx-1",children:s})," sur ",e.jsx("span",{className:"font-semibold mx-1",children:n})]})]})}function Yr({isDialogOpen:t,setIsDialogOpen:r,selectedUser:a,selectedRoleId:n,setSelectedRoleId:s,roles:i,userHasSuperAdminRole:l,isSuperAdmin:o,isProcessing:c,changeUserRole:u,onSuccess:d}){return e.jsx(P,{open:t,onOpenChange:r,children:e.jsxs(O,{className:"sm:max-w-[500px] p-0 overflow-hidden",children:[e.jsxs(I,{className:"px-6 pt-6 pb-2",children:[e.jsxs(H,{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx(et,{className:"h-5 w-5 text-blue-600"}),"Modifier le rôle utilisateur"]}),e.jsx(q,{className:"text-gray-500 mt-1.5",children:"Choisissez un nouveau rôle pour l'utilisateur sélectionné"})]}),a&&e.jsxs("div",{className:"px-6 pb-4",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg border border-gray-100 mt-4",children:[e.jsx(j,{className:"h-12 w-12 border-2 border-white shadow-sm",children:e.jsx(k,{className:"bg-blue-100 text-blue-800 font-medium",children:(m=a.firstName,h=a.lastName,`${m?.charAt(0)||""}${h?.charAt(0)||""}`.toUpperCase())})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-semibold",children:[a.firstName," ",a.lastName]}),e.jsx("p",{className:"text-sm text-gray-500",children:a.email}),e.jsx("div",{className:"flex flex-wrap mt-2 gap-1",children:a.roles&&a.roles.map(((t,r)=>e.jsx(T,{role:t.name,solid:!0,useVariant:!0,interactive:!1},`${t.id||r}-${t.name}`)))})]})]}),l(a)&&!o&&e.jsxs(je,{variant:"destructive",className:"mt-4",children:[e.jsxs(ke,{className:"flex items-center",children:[e.jsx(Je,{className:"h-4 w-4 mr-2"}),"Action restreinte"]}),e.jsx(Te,{children:"Vous n'avez pas l'autorisation de modifier le rôle d'un SuperAdmin. Seul un SuperAdmin peut modifier le rôle d'un autre SuperAdmin."})]})]}),e.jsxs("div",{className:"px-6 pb-6",children:[e.jsx(Ne,{htmlFor:"role-select",className:"mb-2 block text-gray-700",children:"Choisir un nouveau rôle"}),e.jsxs(ae,{onValueChange:e=>s(Number(e)),value:n?.toString()||"",disabled:a&&l(a)&&!o,children:[e.jsx(ne,{className:"w-full bg-white border-gray-200 hover:border-gray-300 transition-colors",id:"role-select",children:e.jsx(se,{placeholder:"Sélectionner un rôle"})}),e.jsx(ie,{className:"max-h-[400px]",children:e.jsxs(oe,{children:[e.jsx(ce,{className:"text-gray-500",children:"Rôles disponibles"}),i.map((t=>{if(("SUPERADMIN"===t.name||"ROLE_SUPERADMIN"===t.name)&&!o)return null;const r=(t=>{switch(t){case"SUPERADMIN":case"ROLE_SUPERADMIN":return{icon:e.jsx(Ce,{className:"h-4 w-4 text-red-600 mr-2"}),bgColor:"bg-red-50",textColor:"text-red-700"};case"ADMIN":case"ROLE_ADMIN":return{icon:e.jsx(et,{className:"h-4 w-4 text-orange-600 mr-2"}),bgColor:"bg-orange-50",textColor:"text-orange-700"};default:return{icon:e.jsx(et,{className:"h-4 w-4 text-blue-600 mr-2"}),bgColor:"bg-blue-50",textColor:"text-blue-700"}}})(t.name);return e.jsx(le,{value:t.id.toString(),className:`flex items-center gap-2 my-1 rounded ${r.bgColor} ${r.textColor}`,children:e.jsxs("div",{className:"flex items-center",children:[r.icon,_(t.name)]})},t.id)}))]})})]}),!o&&e.jsxs("p",{className:"text-amber-600 mt-2 text-xs flex items-center",children:[e.jsx(Je,{className:"h-3 w-3 mr-1"}),"Seuls les SuperAdmin peuvent attribuer le rôle SuperAdmin."]})]}),e.jsxs(z,{className:"px-6 py-4 bg-gray-50 border-t flex justify-between",children:[e.jsx(v,{variant:"outline",onClick:()=>r(!1),disabled:c,className:"bg-white hover:bg-gray-50",children:"Annuler"}),e.jsx(f.div,{whileHover:{scale:c||!n||a&&l(a)&&!o?1:1.02},whileTap:{scale:.98},children:e.jsx(v,{variant:"default",onClick:()=>{if(a&&n){const e=i.find((e=>e.id===n));if(e){if(a.roles&&a.roles.some((t=>{const r=t.name.toLowerCase(),a=e.name.toLowerCase();return r===a||r===`role_${a.replace("role_","")}`||`role_${r.replace("role_","")}`===a})))return void Y.warning("L'utilisateur possède déjà ce rôle");const t=a.roles&&a.roles.length>0?a.roles[0].name:"ROLE_GUEST";u(a.id,t,e.name);const n={...a,roles:[{id:e.id,name:e.name}]};d&&d(n,_(e.name)),r(!1)}}},disabled:c||!n||a&&l(a)&&!o,className:"bg-blue-600 hover:bg-blue-700 text-white",children:c?e.jsxs("div",{className:"flex items-center",children:[e.jsx(fe,{className:"mr-2 h-4 w-4 animate-spin"}),"Modification en cours..."]}):"Appliquer le changement"})})]})]})});var m,h}function Fr({isDeleteDialogOpen:t,setIsDeleteDialogOpen:r,selectedUser:a,userHasSuperAdminRole:n,isSuperAdmin:s,isProcessing:i,deleteUser:l}){return e.jsx(P,{open:t,onOpenChange:r,children:e.jsxs(O,{className:"sm:max-w-[500px] p-0 overflow-hidden",children:[e.jsxs(I,{className:"px-6 pt-6 pb-2",children:[e.jsxs(H,{className:"text-xl font-semibold flex items-center gap-2 text-red-600",children:[e.jsx(tt,{className:"h-5 w-5"}),"Confirmation de suppression"]}),e.jsx(q,{className:"text-gray-500 mt-1.5",children:"Cette action est définitive et ne peut pas être annulée."})]}),a&&e.jsxs("div",{className:"px-6 pb-4",children:[e.jsxs(je,{variant:"destructive",className:"mb-4 bg-red-50 border-red-200",children:[e.jsx(Je,{className:"h-4 w-4 text-red-600"}),e.jsx(ke,{className:"font-medium text-red-800",children:"Attention"}),e.jsx(Te,{className:"text-sm text-red-700",children:"Vous êtes sur le point de supprimer définitivement cet utilisateur. Toutes ses données seront perdues."})]}),e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg mb-4 border border-gray-200",children:[e.jsx(j,{className:"h-12 w-12 border-2 border-white shadow-sm",children:e.jsx(k,{className:"bg-red-100 text-red-700 font-medium",children:(o=a.firstName,c=a.lastName,`${o?.charAt(0)||""}${c?.charAt(0)||""}`.toUpperCase())})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("h3",{className:"font-medium text-gray-900",children:[a.firstName," ",a.lastName]}),n(a)&&e.jsx(p,{variant:"destructive",className:"text-xs bg-red-100 text-red-700 border-red-200",children:"SuperAdmin"})]}),e.jsx("p",{className:"text-sm text-gray-500",children:a.email})]})]}),a&&n(a)&&!s&&e.jsxs(je,{variant:"destructive",className:"mb-4 bg-red-50 text-red-800 border-red-200",children:[e.jsx(Ve,{className:"h-4 w-4"}),e.jsx(ke,{className:"font-medium",children:"Action non autorisée"}),e.jsx(Te,{className:"text-sm",children:"Seul un SuperAdmin peut supprimer un utilisateur SuperAdmin."})]})]}),e.jsxs(z,{className:"px-6 py-4 bg-gray-50 border-t flex space-x-2 justify-end",children:[e.jsx(v,{variant:"outline",onClick:()=>r(!1),disabled:i,className:"bg-white hover:bg-gray-50",children:"Annuler"}),e.jsx(f.div,{whileHover:{scale:i||a&&n(a)&&!s?1:1.02},whileTap:{scale:.98},children:e.jsx(v,{onClick:()=>a&&l(a.id),disabled:i||a&&n(a)&&!s,className:"bg-red-600 hover:bg-red-700 text-white",children:i?e.jsxs("div",{className:"flex items-center",children:[e.jsx(fe,{className:"mr-2 h-4 w-4 animate-spin"}),"Suppression en cours..."]}):e.jsxs("div",{className:"flex items-center",children:[e.jsx(be,{className:"mr-2 h-4 w-4"}),"Supprimer définitivement"]})})})]})]})});var o,c}_r.displayName="Pagination";const $r=({isOpen:r,onClose:a,user:n,onUpdateUser:s,isProcessing:i,currentUserIsSuperAdmin:l})=>{const[o,c]=t.useState({firstName:"",lastName:"",email:"",phoneNumber:"",birthDate:""}),[u,d]=t.useState({}),[m,h]=t.useState(!1);t.useEffect((()=>{if(n){const e={firstName:n.firstName||"",lastName:n.lastName||"",email:n.email||"",phoneNumber:n.phoneNumber||"",birthDate:n.birthDate?_e(new Date(n.birthDate),"yyyy-MM-dd"):""};c(e),h(!1)}}),[n]);const x=e=>{const{name:t,value:r}=e.target;o[t]!==r&&h(!0),c((e=>({...e,[t]:r}))),u[t]&&d((e=>({...e,[t]:null})))},g=n?.roles?.some((e=>"SUPERADMIN"===e.name||"ROLE_SUPERADMIN"===e.name))&&!l;return e.jsx(P,{open:r,onOpenChange:a,children:e.jsxs(O,{className:"sm:max-w-[550px] p-0 overflow-hidden",children:[e.jsxs(I,{className:"px-6 pt-6 pb-2",children:[e.jsxs(H,{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx(et,{className:"h-5 w-5 text-blue-600"}),"Modifier l'utilisateur"]}),e.jsx(q,{className:"text-gray-500 mt-1.5",children:"Mettez à jour les informations de l'utilisateur ici."})]}),n&&e.jsxs("div",{className:"px-6 pb-4",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg mb-4 border border-gray-200",children:[e.jsx(j,{className:"h-12 w-12 border-2 border-white shadow-sm",children:e.jsx(k,{className:"bg-blue-100 text-blue-700 font-medium",children:(w=n.firstName,T=n.lastName,`${w?.charAt(0)||""}${T?.charAt(0)||""}`.toUpperCase())})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("h3",{className:"font-medium text-gray-900",children:[n.firstName," ",n.lastName]}),n.roles&&n.roles.some((e=>"SUPERADMIN"===e.name||"ROLE_SUPERADMIN"===e.name))&&e.jsx(p,{className:"bg-red-100 text-red-700 border-red-200",children:"SuperAdmin"})]}),e.jsx("p",{className:"text-sm text-gray-500",children:n.email})]})]}),g&&e.jsxs(je,{variant:"destructive",className:"mb-4 bg-red-50 text-red-800 border-red-200",children:[e.jsx(Ve,{className:"h-4 w-4"}),e.jsx(ke,{className:"font-medium",children:"Accès limité"}),e.jsx(Te,{className:"text-sm",children:"Vous ne pouvez pas modifier un SuperAdmin."})]})]}),e.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),!(()=>{const e={};if(o.firstName.trim()||(e.firstName="Le prénom est requis"),o.lastName.trim()||(e.lastName="Le nom est requis"),o.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)||(e.email="Email invalide"):e.email="L'email est requis",o.phoneNumber&&!Ue(o.phoneNumber)&&(e.phoneNumber="Numéro de téléphone invalide"),o.birthDate){const t=Or(o.birthDate,"yyyy-MM-dd",new Date);ze(t)||(e.birthDate="Date de naissance invalide")}return d(e),0===Object.keys(e).length})())return;const t={...o,birthDate:o.birthDate?_e(Or(o.birthDate,"yyyy-MM-dd",new Date),"yyyy-MM-dd"):null};s(n.id,t)},className:"px-6 pb-0",children:[e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ne,{htmlFor:"firstName",className:"text-sm font-medium text-gray-700",children:[e.jsx(b,{className:"h-3.5 w-3.5 inline mr-1.5 text-gray-500"}),"Prénom"]}),e.jsxs("div",{className:"relative",children:[e.jsx(re,{id:"firstName",name:"firstName",value:o.firstName,onChange:x,className:"w-full "+(u.firstName?"border-red-300 focus:ring-red-500":""),disabled:i||g,placeholder:"Jean"}),u.firstName&&e.jsxs("div",{className:"text-red-500 text-xs mt-1 flex items-center",children:[e.jsx(y,{className:"h-3 w-3 mr-1"}),u.firstName]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ne,{htmlFor:"lastName",className:"text-sm font-medium text-gray-700",children:[e.jsx(b,{className:"h-3.5 w-3.5 inline mr-1.5 text-gray-500"}),"Nom"]}),e.jsxs("div",{className:"relative",children:[e.jsx(re,{id:"lastName",name:"lastName",value:o.lastName,onChange:x,className:"w-full "+(u.lastName?"border-red-300 focus:ring-red-500":""),disabled:i||g,placeholder:"Dupont"}),u.lastName&&e.jsxs("div",{className:"text-red-500 text-xs mt-1 flex items-center",children:[e.jsx(y,{className:"h-3 w-3 mr-1"}),u.lastName]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ne,{htmlFor:"email",className:"text-sm font-medium text-gray-700",children:[e.jsx(N,{className:"h-3.5 w-3.5 inline mr-1.5 text-gray-500"}),"Email"]}),e.jsxs("div",{className:"relative",children:[e.jsx(re,{id:"email",name:"email",type:"email",value:o.email,onChange:x,className:"w-full "+(u.email?"border-red-300 focus:ring-red-500":""),disabled:i||g,placeholder:"jean.dupont@example.com"}),u.email&&e.jsxs("div",{className:"text-red-500 text-xs mt-1 flex items-center",children:[e.jsx(y,{className:"h-3 w-3 mr-1"}),u.email]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ne,{htmlFor:"phoneNumber",className:"text-sm font-medium text-gray-700",children:[e.jsx(Ye,{className:"h-3.5 w-3.5 inline mr-1.5 text-gray-500"}),"Téléphone"]}),e.jsxs("div",{className:"relative",children:[e.jsx(De,{id:"phoneNumber",name:"phoneNumber",value:o.phoneNumber,onChange:e=>{o.phoneNumber!==e&&h(!0),c((t=>({...t,phoneNumber:e}))),u.phoneNumber&&d((e=>({...e,phoneNumber:null})))},error:u.phoneNumber,disabled:i||g,placeholder:"06 12 34 56 78"}),u.phoneNumber&&e.jsxs("div",{className:"mt-1 text-sm text-red-500",children:[e.jsx(y,{className:"h-3 w-3 mr-1"}),u.phoneNumber]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Ne,{htmlFor:"birthDate",className:"text-sm font-medium text-gray-700",children:[e.jsx(F,{className:"h-3.5 w-3.5 inline mr-1.5 text-gray-500"}),"Date de naissance"]}),e.jsxs("div",{className:"relative",children:[e.jsx(re,{id:"birthDate",name:"birthDate",type:"date",value:o.birthDate,onChange:x,className:"w-full "+(u.birthDate?"border-red-300 focus:ring-red-500":""),disabled:i||g}),u.birthDate&&e.jsxs("div",{className:"text-red-500 text-xs mt-1 flex items-center",children:[e.jsx(y,{className:"h-3 w-3 mr-1"}),u.birthDate]})]})]})]})]}),e.jsxs(z,{className:"py-4 mt-4 border-t flex justify-between flex-row",children:[e.jsx(v,{type:"button",variant:"outline",onClick:a,disabled:i,className:"bg-white hover:bg-gray-50",children:"Annuler"}),e.jsx(f.div,{whileHover:{scale:i||g||!m?1:1.02},whileTap:{scale:.98},children:e.jsx(v,{type:"submit",disabled:i||g||!m,className:"bg-blue-600 hover:bg-blue-700 text-white",children:i?e.jsxs("div",{className:"flex items-center",children:[e.jsx(fe,{className:"mr-2 h-4 w-4 animate-spin"}),"Enregistrement..."]}):e.jsxs("div",{className:"flex items-center",children:[e.jsx($,{className:"mr-2 h-4 w-4"}),"Enregistrer"]})})})]})]})]})});var w,T},Gr={ALL:{icon:W,title:"Gestion des utilisateurs",description:"Visualisez et modifiez les rôles des utilisateurs dans la plateforme."},ROLE_STUDENT:{icon:X,title:"Gestion des étudiants",description:"Visualisez et modifiez les informations des étudiants."},STUDENT:{icon:X,title:"Gestion des étudiants",description:"Visualisez et modifiez les informations des étudiants."},ROLE_TEACHER:{icon:B,title:"Gestion des formateurs",description:"Visualisez et modifiez les informations des formateurs."},TEACHER:{icon:B,title:"Gestion des formateurs",description:"Visualisez et modifiez les informations des formateurs."},ROLE_HR:{icon:V,title:"Gestion des ressources humaines",description:"Visualisez et modifiez les informations du personnel RH."},HR:{icon:V,title:"Gestion des ressources humaines",description:"Visualisez et modifiez les informations du personnel RH."},ROLE_ADMIN:{icon:Q,title:"Gestion des administrateurs",description:"Visualisez et modifiez les informations des administrateurs."},ADMIN:{icon:Q,title:"Gestion des administrateurs",description:"Visualisez et modifiez les informations des administrateurs."}};function Qr(){const[r]=a(),n=r.get("filter"),s=t.useMemo((()=>n||"ALL"),[n]),i=t.useRef(s),[l,o]=t.useState(!1),[c,u]=t.useState(!1),[d,x]=t.useState("ALL"===s),{user:y}=G(),v=t.useMemo((()=>y?.roles?.some((e=>"SUPERADMIN"===e.name||"ROLE_SUPERADMIN"===e.name))),[y]),{roles:g,isLoading:b,selectedUser:N,selectedRoleId:j,isDialogOpen:k,isDeleteDialogOpen:T,isProcessing:C,filterRole:D,searchTerm:U,sortConfig:A,pagination:E,paginatedUsers:R,filteredUsers:S,fetchUsers:L,changeUserRole:M,deleteUser:P,updateUser:O,userHasSuperAdminRole:I,handleSort:H,setSearchTerm:q,setFilterRole:_,handlePageChange:z,openChangeRoleDialog:Y,openDeleteDialog:F,setSelectedUser:$,setSelectedRoleId:Q,setIsDialogOpen:V,setIsDeleteDialogOpen:B,updateLocalUsers:X}=function(e="ALL"){const[r,a]=t.useState([]),[n,s]=t.useState([]),[i,l]=t.useState(!0),[o,c]=t.useState(null),[u,d]=t.useState(null),[f,p]=t.useState(!1),[x,y]=t.useState(!1),[v,g]=t.useState(!1),[w,b]=t.useState(e),[N,j]=t.useState(""),[k,T]=t.useState({key:"lastName",direction:"ascending"}),[C,D]=t.useState({currentPage:1,itemsPerPage:10}),U=t.useCallback((e=>{b(e)}),[]);t.useEffect((()=>{(async()=>{await A(),await E(w)})()}),[]),t.useEffect((()=>{E(w)}),[w]);const A=async()=>{try{const e=await m.getAllRoles();e.success&&e.data?s(e.data):h.error("Impossible de récupérer les rôles")}catch(e){console.error("Erreur lors de la récupération des rôles:",e),h.error("Erreur lors du chargement des rôles")}},E=async(e="ALL")=>{l(!0);try{let t;if("ALL"===e)t=await m.get("/users");else{const r=e.startsWith("ROLE_")?e:`ROLE_${e.replace("ROLE_","")}`;t=await m.getUsersByRole(r)}if(t.success&&t.data)a(t.data);else{console.warn("Réponse de l'API sans succès, utilisation des données fictives");const t=e.startsWith("ROLE_")?e:`ROLE_${e.replace("ROLE_","")}`,r=mockUsers.filter((e=>e.roles&&e.roles.some((e=>e.name===t||e.name===t.replace("ROLE_","")||"ROLE_"+e.name===t))));a(r),h.error("Impossible de récupérer les utilisateurs depuis l'API. Affichage des données de démonstration.")}}catch(t){if(console.error("Erreur lors de la récupération des utilisateurs:",t),"ALL"===e)a(mockUsers);else{const t=e.startsWith("ROLE_")?e:`ROLE_${e.replace("ROLE_","")}`,r=mockUsers.filter((e=>e.roles&&e.roles.some((e=>e.name===t||e.name===t.replace("ROLE_","")||"ROLE_"+e.name===t))));a(r)}h.error("Erreur lors du chargement des utilisateurs. Affichage des données de démonstration.")}finally{l(!1)}},R=t.useMemo((()=>{const e=[...r];return k.key&&e.sort(((e,t)=>null===e[k.key]?1:null===t[k.key]?-1:void 0===e[k.key]?1:void 0===t[k.key]?-1:"string"==typeof e[k.key]?"ascending"===k.direction?e[k.key].localeCompare(t[k.key],"fr",{sensitivity:"base"}):t[k.key].localeCompare(e[k.key],"fr",{sensitivity:"base"}):e[k.key]instanceof Date&&t[k.key]instanceof Date?"ascending"===k.direction?e[k.key]-t[k.key]:t[k.key]-e[k.key]:"ascending"===k.direction?e[k.key]>t[k.key]?1:-1:e[k.key]<t[k.key]?1:-1)),e}),[r,k]),S=t.useMemo((()=>N.trim()?R.filter((e=>{const t=`${e.firstName} ${e.lastName}`.toLowerCase(),r=e.email.toLowerCase(),a=N.toLowerCase();return t.includes(a)||r.includes(a)})):R),[R,N]),L=t.useMemo((()=>{const e=(C.currentPage-1)*C.itemsPerPage;return S.slice(e,e+C.itemsPerPage)}),[S,C]);return{users:r,roles:n,isLoading:i,selectedUser:o,selectedRoleId:u,isDialogOpen:f,isDeleteDialogOpen:x,isProcessing:v,filterRole:w,searchTerm:N,sortConfig:k,pagination:C,paginatedUsers:L,filteredUsers:S,fetchUsers:E,changeUserRole:async(e,t,r)=>{g(!0),a((t=>t.map((t=>t.id===e?{...t,roles:[{name:r}]}:t))));try{const a=await m.changeUserRole(e,t,r);a.success?h.success("Rôle modifié avec succès"):(h.error("Impossible de modifier le rôle: "+(a.message||"Erreur inconnue")),E(w))}catch(n){console.error("Erreur lors de la modification du rôle:",n),h.error("Erreur lors de la modification du rôle"),E(w)}finally{g(!1),p(!1)}},deleteUser:async e=>{g(!0);const t=[...r];a((t=>t.filter((t=>t.id!==e))));try{const r=await m.delete(`/users/${e}`);r.success?h.success("Utilisateur supprimé avec succès"):(a(t),h.error("Impossible de supprimer l'utilisateur: "+(r.message||"Erreur inconnue")))}catch(n){a(t),console.error("Erreur lors de la suppression de l'utilisateur:",n),h.error("Erreur lors de la suppression de l'utilisateur")}finally{g(!1),y(!1)}},updateUser:async(e,t,r)=>{g(!0),a((r=>r.map((r=>r.id===e?{...r,...t}:r))));try{const a=await m.updateUser(e,t);a.success?(h.success("Utilisateur mis à jour avec succès"),r&&r()):(h.error("Impossible de mettre à jour l'utilisateur: "+(a.message||"Erreur inconnue")),E(w))}catch(n){console.error("Erreur lors de la mise à jour de l'utilisateur:",n),h.error("Erreur lors de la mise à jour de l'utilisateur"),E(w)}finally{g(!1)}},userHasSuperAdminRole:e=>!(!e||!e.roles)&&e.roles.some((e=>"SUPERADMIN"===e.name||"ROLE_SUPERADMIN"===e.name)),handleSort:e=>{let t="ascending";k.key===e&&"ascending"===k.direction&&(t="descending"),T({key:e,direction:t})},setSearchTerm:j,setFilterRole:U,handlePageChange:e=>{D((t=>({...t,currentPage:e})))},openChangeRoleDialog:e=>{c(e),d(null),p(!0)},openDeleteDialog:e=>{c(e),y(!0)},setSelectedUser:c,setSelectedRoleId:d,setIsDialogOpen:p,setIsDeleteDialogOpen:y,updateLocalUsers:(e,t)=>{a((t=>{const r=[...t];return e.forEach((e=>{const t=r.findIndex((t=>t.id===e.id));-1!==t&&(r[t]=e)})),r}))}}}(s);t.useEffect((()=>{s!==i.current&&(i.current=s,_(s))}),[s,_]);const W=Gr[D]||Gr.ALL,re=W.icon,ae=()=>{o(!1)};t.useEffect((()=>{u(!0);const e=setTimeout((()=>{x(!1)}),3e3);return()=>clearTimeout(e)}),[]);return e.jsx(te,{headerTitle:W.title,headerIcon:re,children:e.jsxs("div",{className:"container mx-auto py-6 px-4 sm:px-6",children:[e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:c?1:0,y:c?0:20},transition:{duration:.5,delay:.1},children:e.jsxs(K,{className:"border-0 bg-white shadow-md hover:shadow-lg transition-shadow duration-300",children:[e.jsx(Z,{className:"bg-gradient-to-r from-slate-50 to-gray-50 border-b rounded-t-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(J,{className:"text-gradient bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-indigo-600",children:W.title}),e.jsx("div",{className:"text-sm text-muted-foreground max-w-2xl mt-2",children:W.description})]}),e.jsxs(p,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200 px-3 py-1",children:[S.length," utilisateur",1!==S.length?"s":""]})]})}),e.jsxs(ee,{className:"p-6",children:[e.jsx(Ir,{roles:g,filterRole:D,setFilterRole:_,searchTerm:U,setSearchTerm:q,fetchUsers:L,isLoading:b}),b?e.jsxs(f.div,{className:"flex flex-col justify-center items-center h-64 my-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[e.jsx(fe,{className:"h-10 w-10 animate-spin text-primary mb-4"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Chargement des utilisateurs..."})]}):e.jsxs(f.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[e.jsx("div",{className:"mt-6 mb-6",children:e.jsx(qr,{paginatedUsers:R,handleSort:H,sortConfig:A,openChangeRoleDialog:Y,openDeleteDialog:F,openEditDialog:e=>{$(e),o(!0)},userHasSuperAdminRole:I,isSuperAdmin:v})}),e.jsx("div",{className:"mt-6",children:e.jsx(zr,{filteredUsers:S,pagination:E,handlePageChange:z})})]}),!b&&0===S.length&&U&&e.jsxs(f.div,{className:"flex flex-col items-center justify-center py-12 text-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsx(w,{className:"h-12 w-12 text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-700",children:"Aucun résultat trouvé"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1 max-w-sm",children:['Aucun utilisateur ne correspond à votre recherche "',U,'".']}),e.jsx("button",{onClick:()=>q(""),className:"mt-4 text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Effacer la recherche"})]})]})]})}),e.jsx(Yr,{isDialogOpen:k,setIsDialogOpen:V,selectedUser:N,selectedRoleId:j,setSelectedRoleId:Q,roles:g,userHasSuperAdminRole:I,isSuperAdmin:v,isProcessing:C,changeUserRole:M,onSuccess:(t,r)=>{h.success(e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:"Rôle modifié avec succès"}),e.jsxs("span",{className:"text-sm opacity-90",children:[t.firstName," ",t.lastName," est maintenant ",r]})]}));const a=R.map((e=>e.id===t.id?t:e)),n=S.map((e=>e.id===t.id?t:e));"function"==typeof X?X(n,a):L(D)}}),e.jsx(Fr,{isDeleteDialogOpen:T,setIsDeleteDialogOpen:B,selectedUser:N,userHasSuperAdminRole:I,isSuperAdmin:v,isProcessing:C,deleteUser:P}),e.jsx($r,{isOpen:l,onClose:ae,user:N,onUpdateUser:(e,t)=>O(e,t,ae),isProcessing:C,currentUserIsSuperAdmin:v})]})})}export{Qr as default};
