import{j as e}from"./ui-DiOaG2iA.js";import{r as t,u as r,i as a}from"./router-D7BdrHDj.js";import{x as n,aG as s,as as i,at as l,au as o,aH as c,aI as u,aL as d,w as m,t as h,aM as f,a3 as p,a5 as x,aN as y,aO as v,m as g,aq as w,aP as b,a7 as N,B as j,ay as k,K as T,U as C,L as D,z as U,E as A,aF as E,aQ as R,aR as S,aS as L,aT as M,aU as P,aV as O,e as I,c as H,C as q,D as _,j as z,G as Y,k as F,l as $,aW as G,H as Q,aX as V,i as B,h as X,a1 as W,Z as K,N as Z,ac as J,O as ee,ak as te,o as re,p as ae,q as ne,s as se}from"./index-S9UQtd13.js";import{D as ie}from"./DashboardLayout-5cV5p_xM.js";import{I as le}from"./input-Dj7wNL5y.js";import{S as oe,a as ce,b as ue,c as de,d as me,e as he,f as fe}from"./select-Pff1ZL37.js";import{T as pe,a as xe,b as ye,c as ve}from"./tooltip-DOsRbVG5.js";import{L as ge}from"./loader-circle-BAPZnHGb.js";import{T as we,a as be,b as Ne,c as je,d as ke,e as Te}from"./table-PLJ_Wg43.js";import{T as Ce}from"./trash-2-CFNpAuL5.js";import{L as De}from"./label-DTBNkDK-.js";import{A as Ue,a as Ae,b as Ee}from"./alert-BxMQh0PC.js";import{S as Re}from"./shield-alert-BFO8vG9k.js";import{P as Se,b as Le}from"./phone-input-DdHU_k-v.js";import{g as Me,s as Pe,a as Oe,b as Ie,t as He,c as qe,l as _e,i as ze,d as Ye,e as Fe,h as $e,f as Ge,j as Qe}from"./index-Dt7fPPOv.js";import{P as Ve}from"./phone-DYDWiQ8O.js";import{_ as Be,i as Xe}from"./charts-DkICKEBk.js";import"./react-0RZ2pslC.js";import"./query-D8UIi9X6.js";import"./circle-alert-BXF_imfS.js";import"./index-jVOyRz7F.js";import"./chevron-up-BMa_tM1p.js";
/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=n("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),Ke=n("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),Ze=n("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]),Je=n("ChevronsLeft",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]),et=n("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]),tt=n("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),rt=n("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),at=n("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),nt=n("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),st=n("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]),it=n("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function ot(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return lt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lt(e,t):void 0}}(e))||t){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw s}}}}function ct(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Be(e,t)}function ut(e){return ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ut(e)}function dt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(dt=function(){return!!e})()}function mt(e){var t=dt();return function(){var r,a=ut(e);if(t){var n=ut(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return function(e,t){if(t&&("object"==s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Xe(e)}(this,r)}}function ht(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ft(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t);if("object"!=s(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function pt(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ft(a.key),a)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function xt(e,t,r){return(t=ft(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yt=function(){function e(){ht(this,e),xt(this,"priority",void 0),xt(this,"subPriority",0)}return pt(e,[{key:"validate",value:function(e,t){return!0}}]),e}(),vt=function(){ct(t,yt);var e=mt(t);function t(r,a,n,s,i){var l;return ht(this,t),(l=e.call(this)).value=r,l.validateValue=a,l.setValue=n,l.priority=s,i&&(l.subPriority=i),l}return pt(t,[{key:"validate",value:function(e,t){return this.validateValue(e,this.value,t)}},{key:"set",value:function(e,t,r){return this.setValue(e,t,this.value,r)}}]),t}(),gt=function(){ct(t,yt);var e=mt(t);function t(){var r;ht(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),xt(Xe(r),"priority",10),xt(Xe(r),"subPriority",-1),r}return pt(t,[{key:"set",value:function(e,t){if(t.timestampIsSet)return e;var r=new Date(0);return r.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),r.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),r}}]),t}(),wt=function(){function e(){ht(this,e),xt(this,"incompatibleTokens",void 0),xt(this,"priority",void 0),xt(this,"subPriority",void 0)}return pt(e,[{key:"run",value:function(e,t,r,a){var n=this.parse(e,t,r,a);return n?{setter:new vt(n.value,this.validate,this.set,this.priority,this.subPriority),rest:n.rest}:null}},{key:"validate",value:function(e,t,r){return!0}}]),e}(),bt=function(){ct(t,wt);var e=mt(t);function t(){var r;ht(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),xt(Xe(r),"priority",140),xt(Xe(r),"incompatibleTokens",["R","u","t","T"]),r}return pt(t,[{key:"parse",value:function(e,t,r){switch(t){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}},{key:"set",value:function(e,t,r){return t.era=r,e.setUTCFullYear(r,0,1),e.setUTCHours(0,0,0,0),e}}]),t}(),Nt=/^(1[0-2]|0?\d)/,jt=/^(3[0-1]|[0-2]?\d)/,kt=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,Tt=/^(5[0-3]|[0-4]?\d)/,Ct=/^(2[0-3]|[0-1]?\d)/,Dt=/^(2[0-4]|[0-1]?\d)/,Ut=/^(1[0-1]|0?\d)/,At=/^(1[0-2]|0?\d)/,Et=/^[0-5]?\d/,Rt=/^[0-5]?\d/,St=/^\d/,Lt=/^\d{1,2}/,Mt=/^\d{1,3}/,Pt=/^\d{1,4}/,Ot=/^-?\d+/,It=/^-?\d/,Ht=/^-?\d{1,2}/,qt=/^-?\d{1,3}/,_t=/^-?\d{1,4}/,zt=/^([+-])(\d{2})(\d{2})?|Z/,Yt=/^([+-])(\d{2})(\d{2})|Z/,Ft=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,$t=/^([+-])(\d{2}):(\d{2})|Z/,Gt=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function Qt(e,t){return e?{value:t(e.value),rest:e.rest}:e}function Vt(e,t){var r=t.match(e);return r?{value:parseInt(r[0],10),rest:t.slice(r[0].length)}:null}function Bt(e,t){var r=t.match(e);return r?"Z"===r[0]?{value:0,rest:t.slice(1)}:{value:("+"===r[1]?1:-1)*(36e5*(r[2]?parseInt(r[2],10):0)+6e4*(r[3]?parseInt(r[3],10):0)+1e3*(r[5]?parseInt(r[5],10):0)),rest:t.slice(r[0].length)}:null}function Xt(e){return Vt(Ot,e)}function Wt(e,t){switch(e){case 1:return Vt(St,t);case 2:return Vt(Lt,t);case 3:return Vt(Mt,t);case 4:return Vt(Pt,t);default:return Vt(new RegExp("^\\d{1,"+e+"}"),t)}}function Kt(e,t){switch(e){case 1:return Vt(It,t);case 2:return Vt(Ht,t);case 3:return Vt(qt,t);case 4:return Vt(_t,t);default:return Vt(new RegExp("^-?\\d{1,"+e+"}"),t)}}function Zt(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function Jt(e,t){var r,a=t>0,n=a?t:1-t;if(n<=50)r=e||100;else{var s=n+50;r=e+100*Math.floor(s/100)-(e>=s%100?100:0)}return a?r:1-r}function er(e){return e%400==0||e%4==0&&e%100!=0}var tr=function(){ct(t,wt);var e=mt(t);function t(){var r;ht(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),xt(Xe(r),"priority",130),xt(Xe(r),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),r}return pt(t,[{key:"parse",value:function(e,t,r){var a=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return Qt(Wt(4,e),a);case"yo":return Qt(r.ordinalNumber(e,{unit:"year"}),a);default:return Qt(Wt(t.length,e),a)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,r){var a=e.getUTCFullYear();if(r.isTwoDigitYear){var n=Jt(r.year,a);return e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}var s="era"in t&&1!==t.era?1-r.year:r.year;return e.setUTCFullYear(s,0,1),e.setUTCHours(0,0,0,0),e}}]),t}(),rr=function(){ct(t,wt);var e=mt(t);function t(){var r;ht(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),xt(Xe(r),"priority",130),xt(Xe(r),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),r}return pt(t,[{key:"parse",value:function(e,t,r){var a=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return Qt(Wt(4,e),a);case"Yo":return Qt(r.ordinalNumber(e,{unit:"year"}),a);default:return Qt(Wt(t.length,e),a)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,r,a){var n=Me(e,a);if(r.isTwoDigitYear){var s=Jt(r.year,n);return e.setUTCFullYear(s,0,a.firstWeekContainsDate),e.setUTCHours(0,0,0,0),Pe(e,a)}var i="era"in t&&1!==t.era?1-r.year:r.year;return e.setUTCFullYear(i,0,a.firstWeekContainsDate),e.setUTCHours(0,0,0,0),Pe(e,a)}}]),t}(),ar=function(){ct(t,wt);var e=mt(t);function t(){var r;ht(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),xt(Xe(r),"priority",130),xt(Xe(r),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),r}return pt(t,[{key:"parse",value:function(e,t){return Kt("R"===t?4:t.length,e)}},{key:"set",value:function(e,t,r){var a=new Date(0);return a.setUTCFullYear(r,0,4),a.setUTCHours(0,0,0,0),Oe(a)}}]),t}(),nr=function(){ct(t,wt);var e=mt(t);function t(){var r;ht(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),xt(Xe(r),"priority",130),xt(Xe(r),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),r}return pt(t,[{key:"parse",value:function(e,t){return Kt("u"===t?4:t.length,e)}},{key:"set",value:function(e,t,r){return e.setUTCFullYear(r,0,1),e.setUTCHours(0,0,0,0),e}}]),t}(),sr=function(){ct(t,wt);var e=mt(t);function t(){var r;ht(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),xt(Xe(r),"priority",120),xt(Xe(r),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),r}return pt(t,[{key:"parse",value:function(e,t,r){switch(t){case"Q":case"QQ":return Wt(t.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,r){return e.setUTCMonth(3*(r-1),1),e.setUTCHours(0,0,0,0),e}}]),t}(),ir=function(){ct(t,wt);var e=mt(t);function t(){var r;ht(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),xt(Xe(r),"priority",120),xt(Xe(r),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),r}return pt(t,[{key:"parse",value:function(e,t,r){switch(t){case"q":case"qq":return Wt(t.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,r){return e.setUTCMonth(3*(r-1),1),e.setUTCHours(0,0,0,0),e}}]),t}(),lr=function(){ct(t,wt);var e=mt(t);function t(){var r;ht(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),xt(Xe(r),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),xt(Xe(r),"priority",110),r}return pt(t,[{key:"parse",value:function(e,t,r){var a=function(e){return e-1};switch(t){case"M":return Qt(Vt(Nt,e),a);case"MM":return Qt(Wt(2,e),a);case"Mo":return Qt(r.ordinalNumber(e,{unit:"month"}),a);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,r){return e.setUTCMonth(r,1),e.setUTCHours(0,0,0,0),e}}]),t}(),or=function(){ct(t,wt);var e=mt(t);function t(){var r;ht(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),xt(Xe(r),"priority",110),xt(Xe(r),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),r}return pt(t,[{key:"parse",value:function(e,t,r){var a=function(e){return e-1};switch(t){case"L":return Qt(Vt(Nt,e),a);case"LL":return Qt(Wt(2,e),a);case"Lo":return Qt(r.ordinalNumber(e,{unit:"month"}),a);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,r){return e.setUTCMonth(r,1),e.setUTCHours(0,0,0,0),e}}]),t}();var cr=function(){ct(t,wt);var e=mt(t);function t(){var r;ht(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),xt(Xe(r),"priority",100),xt(Xe(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),r}return pt(t,[{key:"parse",value:function(e,t,r){switch(t){case"w":return Vt(Tt,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return Wt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,r,a){return Pe(function(e,t,r){i(2,arguments);var a=l(e),n=He(t),s=Ie(a,r)-n;return a.setUTCDate(a.getUTCDate()-7*s),a}(e,r,a),a)}}]),t}();var ur=function(){ct(t,wt);var e=mt(t);function t(){var r;ht(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),xt(Xe(r),"priority",100),xt(Xe(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),r}return pt(t,[{key:"parse",value:function(e,t,r){switch(t){case"I":return Vt(Tt,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return Wt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,r){return Oe(function(e,t){i(2,arguments);var r=l(e),a=He(t),n=qe(r)-a;return r.setUTCDate(r.getUTCDate()-7*n),r}(e,r))}}]),t}(),dr=[31,28,31,30,31,30,31,31,30,31,30,31],mr=[31,29,31,30,31,30,31,31,30,31,30,31],hr=function(){ct(t,wt);var e=mt(t);function t(){var r;ht(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),xt(Xe(r),"priority",90),xt(Xe(r),"subPriority",1),xt(Xe(r),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),r}return pt(t,[{key:"parse",value:function(e,t,r){switch(t){case"d":return Vt(jt,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return Wt(t.length,e)}}},{key:"validate",value:function(e,t){var r=er(e.getUTCFullYear()),a=e.getUTCMonth();return r?t>=1&&t<=mr[a]:t>=1&&t<=dr[a]}},{key:"set",value:function(e,t,r){return e.setUTCDate(r),e.setUTCHours(0,0,0,0),e}}]),t}(),fr=function(){ct(t,wt);var e=mt(t);function t(){var r;ht(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),xt(Xe(r),"priority",90),xt(Xe(r),"subpriority",1),xt(Xe(r),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),r}return pt(t,[{key:"parse",value:function(e,t,r){switch(t){case"D":case"DD":return Vt(kt,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return Wt(t.length,e)}}},{key:"validate",value:function(e,t){return er(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365}},{key:"set",value:function(e,t,r){return e.setUTCMonth(0,r),e.setUTCHours(0,0,0,0),e}}]),t}();function pr(e,t,r){var a,n,s,c,u,d,m,h;i(2,arguments);var f=o(),p=He(null!==(a=null!==(n=null!==(s=null!==(c=null==r?void 0:r.weekStartsOn)&&void 0!==c?c:null==r||null===(u=r.locale)||void 0===u||null===(d=u.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==s?s:f.weekStartsOn)&&void 0!==n?n:null===(m=f.locale)||void 0===m||null===(h=m.options)||void 0===h?void 0:h.weekStartsOn)&&void 0!==a?a:0);if(!(p>=0&&p<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var x=l(e),y=He(t),v=((y%7+7)%7<p?7:0)+y-x.getUTCDay();return x.setUTCDate(x.getUTCDate()+v),x}var xr=function(){ct(t,wt);var e=mt(t);function t(){var r;ht(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),xt(Xe(r),"priority",90),xt(Xe(r),"incompatibleTokens",["D","i","e","c","t","T"]),r}return pt(t,[{key:"parse",value:function(e,t,r){switch(t){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,r,a){return(e=pr(e,r,a)).setUTCHours(0,0,0,0),e}}]),t}(),yr=function(){ct(t,wt);var e=mt(t);function t(){var r;ht(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),xt(Xe(r),"priority",90),xt(Xe(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),r}return pt(t,[{key:"parse",value:function(e,t,r,a){var n=function(e){var t=7*Math.floor((e-1)/7);return(e+a.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return Qt(Wt(t.length,e),n);case"eo":return Qt(r.ordinalNumber(e,{unit:"day"}),n);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,r,a){return(e=pr(e,r,a)).setUTCHours(0,0,0,0),e}}]),t}(),vr=function(){ct(t,wt);var e=mt(t);function t(){var r;ht(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),xt(Xe(r),"priority",90),xt(Xe(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),r}return pt(t,[{key:"parse",value:function(e,t,r,a){var n=function(e){var t=7*Math.floor((e-1)/7);return(e+a.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return Qt(Wt(t.length,e),n);case"co":return Qt(r.ordinalNumber(e,{unit:"day"}),n);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,r,a){return(e=pr(e,r,a)).setUTCHours(0,0,0,0),e}}]),t}();var gr=function(){ct(t,wt);var e=mt(t);function t(){var r;ht(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),xt(Xe(r),"priority",90),xt(Xe(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),r}return pt(t,[{key:"parse",value:function(e,t,r){var a=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return Wt(t.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return Qt(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),a);case"iiiii":return Qt(r.day(e,{width:"narrow",context:"formatting"}),a);case"iiiiii":return Qt(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),a);default:return Qt(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),a)}}},{key:"validate",value:function(e,t){return t>=1&&t<=7}},{key:"set",value:function(e,t,r){return e=function(e,t){i(2,arguments);var r=He(t);r%7==0&&(r-=7);var a=l(e),n=((r%7+7)%7<1?7:0)+r-a.getUTCDay();return a.setUTCDate(a.getUTCDate()+n),a}(e,r),e.setUTCHours(0,0,0,0),e}}]),t}(),wr=function(){ct(t,wt);var e=mt(t);function t(){var r;ht(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),xt(Xe(r),"priority",80),xt(Xe(r),"incompatibleTokens",["b","B","H","k","t","T"]),r}return pt(t,[{key:"parse",value:function(e,t,r){switch(t){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,r){return e.setUTCHours(Zt(r),0,0,0),e}}]),t}(),br=function(){ct(t,wt);var e=mt(t);function t(){var r;ht(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),xt(Xe(r),"priority",80),xt(Xe(r),"incompatibleTokens",["a","B","H","k","t","T"]),r}return pt(t,[{key:"parse",value:function(e,t,r){switch(t){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,r){return e.setUTCHours(Zt(r),0,0,0),e}}]),t}(),Nr=function(){ct(t,wt);var e=mt(t);function t(){var r;ht(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),xt(Xe(r),"priority",80),xt(Xe(r),"incompatibleTokens",["a","b","t","T"]),r}return pt(t,[{key:"parse",value:function(e,t,r){switch(t){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,r){return e.setUTCHours(Zt(r),0,0,0),e}}]),t}(),jr=function(){ct(t,wt);var e=mt(t);function t(){var r;ht(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),xt(Xe(r),"priority",70),xt(Xe(r),"incompatibleTokens",["H","K","k","t","T"]),r}return pt(t,[{key:"parse",value:function(e,t,r){switch(t){case"h":return Vt(At,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return Wt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=12}},{key:"set",value:function(e,t,r){var a=e.getUTCHours()>=12;return a&&r<12?e.setUTCHours(r+12,0,0,0):a||12!==r?e.setUTCHours(r,0,0,0):e.setUTCHours(0,0,0,0),e}}]),t}(),kr=function(){ct(t,wt);var e=mt(t);function t(){var r;ht(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),xt(Xe(r),"priority",70),xt(Xe(r),"incompatibleTokens",["a","b","h","K","k","t","T"]),r}return pt(t,[{key:"parse",value:function(e,t,r){switch(t){case"H":return Vt(Ct,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return Wt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=23}},{key:"set",value:function(e,t,r){return e.setUTCHours(r,0,0,0),e}}]),t}(),Tr=function(){ct(t,wt);var e=mt(t);function t(){var r;ht(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),xt(Xe(r),"priority",70),xt(Xe(r),"incompatibleTokens",["h","H","k","t","T"]),r}return pt(t,[{key:"parse",value:function(e,t,r){switch(t){case"K":return Vt(Ut,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return Wt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,r){return e.getUTCHours()>=12&&r<12?e.setUTCHours(r+12,0,0,0):e.setUTCHours(r,0,0,0),e}}]),t}(),Cr=function(){ct(t,wt);var e=mt(t);function t(){var r;ht(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),xt(Xe(r),"priority",70),xt(Xe(r),"incompatibleTokens",["a","b","h","H","K","t","T"]),r}return pt(t,[{key:"parse",value:function(e,t,r){switch(t){case"k":return Vt(Dt,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return Wt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=24}},{key:"set",value:function(e,t,r){var a=r<=24?r%24:r;return e.setUTCHours(a,0,0,0),e}}]),t}(),Dr=function(){ct(t,wt);var e=mt(t);function t(){var r;ht(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),xt(Xe(r),"priority",60),xt(Xe(r),"incompatibleTokens",["t","T"]),r}return pt(t,[{key:"parse",value:function(e,t,r){switch(t){case"m":return Vt(Et,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return Wt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,r){return e.setUTCMinutes(r,0,0),e}}]),t}(),Ur=function(){ct(t,wt);var e=mt(t);function t(){var r;ht(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),xt(Xe(r),"priority",50),xt(Xe(r),"incompatibleTokens",["t","T"]),r}return pt(t,[{key:"parse",value:function(e,t,r){switch(t){case"s":return Vt(Rt,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return Wt(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,r){return e.setUTCSeconds(r,0),e}}]),t}(),Ar=function(){ct(t,wt);var e=mt(t);function t(){var r;ht(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),xt(Xe(r),"priority",30),xt(Xe(r),"incompatibleTokens",["t","T"]),r}return pt(t,[{key:"parse",value:function(e,t){return Qt(Wt(t.length,e),(function(e){return Math.floor(e*Math.pow(10,3-t.length))}))}},{key:"set",value:function(e,t,r){return e.setUTCMilliseconds(r),e}}]),t}(),Er=function(){ct(t,wt);var e=mt(t);function t(){var r;ht(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),xt(Xe(r),"priority",10),xt(Xe(r),"incompatibleTokens",["t","T","x"]),r}return pt(t,[{key:"parse",value:function(e,t){switch(t){case"X":return Bt(zt,e);case"XX":return Bt(Yt,e);case"XXXX":return Bt(Ft,e);case"XXXXX":return Bt(Gt,e);default:return Bt($t,e)}}},{key:"set",value:function(e,t,r){return t.timestampIsSet?e:new Date(e.getTime()-r)}}]),t}(),Rr=function(){ct(t,wt);var e=mt(t);function t(){var r;ht(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),xt(Xe(r),"priority",10),xt(Xe(r),"incompatibleTokens",["t","T","X"]),r}return pt(t,[{key:"parse",value:function(e,t){switch(t){case"x":return Bt(zt,e);case"xx":return Bt(Yt,e);case"xxxx":return Bt(Ft,e);case"xxxxx":return Bt(Gt,e);default:return Bt($t,e)}}},{key:"set",value:function(e,t,r){return t.timestampIsSet?e:new Date(e.getTime()-r)}}]),t}(),Sr=function(){ct(t,wt);var e=mt(t);function t(){var r;ht(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),xt(Xe(r),"priority",40),xt(Xe(r),"incompatibleTokens","*"),r}return pt(t,[{key:"parse",value:function(e){return Xt(e)}},{key:"set",value:function(e,t,r){return[new Date(1e3*r),{timestampIsSet:!0}]}}]),t}(),Lr=function(){ct(t,wt);var e=mt(t);function t(){var r;ht(this,t);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return r=e.call.apply(e,[this].concat(n)),xt(Xe(r),"priority",20),xt(Xe(r),"incompatibleTokens","*"),r}return pt(t,[{key:"parse",value:function(e){return Xt(e)}},{key:"set",value:function(e,t,r){return[new Date(r),{timestampIsSet:!0}]}}]),t}(),Mr={G:new bt,y:new tr,Y:new rr,R:new ar,u:new nr,Q:new sr,q:new ir,M:new lr,L:new or,w:new cr,I:new ur,d:new hr,D:new fr,E:new xr,e:new yr,c:new vr,i:new gr,a:new wr,b:new br,B:new Nr,h:new jr,H:new kr,K:new Tr,k:new Cr,m:new Dr,s:new Ur,S:new Ar,X:new Er,x:new Rr,t:new Sr,T:new Lr},Pr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Or=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ir=/^'([^]*?)'?$/,Hr=/''/g,qr=/\S/,_r=/[a-zA-Z]/;function zr(e,t,r,a){var n,m,h,f,p,x,y,v,g,w,b;i(3,arguments);var N=String(e),j=String(t),k=o(),T=null!==(n=k.locale)&&void 0!==n?n:c;if(!T.match)throw new RangeError("locale must contain match property");var C=He(null!==(m=null!==(h=null!==(f=void 0)&&void 0!==f?f:k.firstWeekContainsDate)&&void 0!==h?h:null===(p=k.locale)||void 0===p||null===(x=p.options)||void 0===x?void 0:x.firstWeekContainsDate)&&void 0!==m?m:1);if(!(C>=1&&C<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var D=He(null!==(y=null!==(v=null!==(g=void 0)&&void 0!==g?g:k.weekStartsOn)&&void 0!==v?v:null===(w=k.locale)||void 0===w||null===(b=w.options)||void 0===b?void 0:b.weekStartsOn)&&void 0!==y?y:0);if(!(D>=0&&D<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===j)return""===N?l(r):new Date(NaN);var U,A={firstWeekContainsDate:C,weekStartsOn:D,locale:T},E=[new gt],R=j.match(Or).map((function(e){var t=e[0];return t in _e?(0,_e[t])(e,T.formatLong):e})).join("").match(Pr),S=[],L=ot(R);try{var M=function(){var t=U.value;null!=a&&a.useAdditionalWeekYearTokens||!ze(t)||Ye(t,j,e),null!=a&&a.useAdditionalDayOfYearTokens||!Fe(t)||Ye(t,j,e);var r=t[0],n=Mr[r];if(n){var s=n.incompatibleTokens;if(Array.isArray(s)){var i=S.find((function(e){return s.includes(e.token)||e.token===r}));if(i)throw new RangeError("The format string mustn't contain `".concat(i.fullToken,"` and `").concat(t,"` at the same time"))}else if("*"===n.incompatibleTokens&&S.length>0)throw new RangeError("The format string mustn't contain `".concat(t,"` and any other token at the same time"));S.push({token:r,fullToken:t});var l=n.run(N,t,T.match,A);if(!l)return{v:new Date(NaN)};E.push(l.setter),N=l.rest}else{if(r.match(_r))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");if("''"===t?t="'":"'"===r&&(t=t.match(Ir)[1].replace(Hr,"'")),0!==N.indexOf(t))return{v:new Date(NaN)};N=N.slice(t.length)}};for(L.s();!(U=L.n()).done;){var P=M();if("object"===s(P))return P.v}}catch($){L.e($)}finally{L.f()}if(N.length>0&&qr.test(N))return new Date(NaN);var O=E.map((function(e){return e.priority})).sort((function(e,t){return t-e})).filter((function(e,t,r){return r.indexOf(e)===t})).map((function(e){return E.filter((function(t){return t.priority===e})).sort((function(e,t){return t.subPriority-e.subPriority}))})).map((function(e){return e[0]})),I=l(r);if(isNaN(I.getTime()))return new Date(NaN);var H,q=$e(I,u(I)),_={},z=ot(O);try{for(z.s();!(H=z.n()).done;){var Y=H.value;if(!Y.validate(q,A))return new Date(NaN);var F=Y.set(q,_,A);Array.isArray(F)?(q=F[0],d(_,F[1])):q=F}}catch($){z.e($)}finally{z.f()}return q}function Yr({roles:n,filterRole:s,setFilterRole:i,searchTerm:l,setSearchTerm:o,fetchUsers:c,isLoading:u}){const d=r(),[m]=a(),h=m.get("filter"),[f,p]=t.useState(s),x=e=>e?e.replace(/^ROLE_/,"").toUpperCase():"",y=t.useMemo((()=>{if(!h)return"ALL";const e=x(h),t=n.find((t=>t.name===h||x(t.name)===e));if(t)return t.name;const r=n.find((t=>x(t.name)===e));return r?r.name:h}),[h,n]);t.useEffect((()=>{y&&f!==y&&p(y)}),[y,f]);return e.jsxs(g.div,{className:"mb-6 bg-gray-50 p-4 rounded-lg border border-gray-200 relative",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(rt,{className:"h-4 w-4 text-blue-600"}),e.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Filtres et recherche"}),"ALL"!==s&&e.jsxs(w,{variant:"outline",className:"ml-auto bg-blue-50 text-blue-700 border-blue-200 flex items-center gap-1",children:["Filtre actif: ",b(s),e.jsx("button",{className:"ml-1 hover:bg-blue-100 p-1 rounded-full",onClick:()=>i("ALL"),children:e.jsx(N,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx(pe,{children:e.jsxs(xe,{children:[e.jsx(ye,{asChild:!0,children:e.jsx("div",{className:"min-w-[200px]",children:e.jsxs(oe,{value:f,onValueChange:e=>{if(e)if(p(e),i(e),"ALL"===e)d("/admin/users",{replace:!0});else{const t=e.startsWith("ROLE_")?e:`ROLE_${e}`;d(`/admin/users?filter=${t}`,{replace:!0})}},children:[e.jsx(ce,{className:"w-full bg-white shadow-sm border-gray-200 hover:border-gray-300 transition-colors",children:e.jsx(ue,{placeholder:"Filtrer par rôle"})}),e.jsxs(de,{className:"max-h-[400px]",children:[e.jsxs(me,{value:"ALL",className:"flex items-center gap-2",children:[e.jsx("span",{className:"bg-gray-100 w-2 h-2 rounded-full"}),"Tous les rôles"]}),n.map((t=>e.jsxs(me,{value:t.name,className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${Fr(t.name)}`}),b(t.name)]},t.id)))]})]})})}),e.jsx(ve,{children:e.jsx("p",{children:"Filtrer les utilisateurs par leur rôle"})})]})}),e.jsx(pe,{children:e.jsxs(xe,{children:[e.jsx(ye,{asChild:!0,children:e.jsx(j,{variant:"outline",onClick:()=>c(s),disabled:u,className:"bg-white hover:bg-gray-50 transition-colors shadow-sm",children:u?e.jsx(ge,{className:"h-4 w-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"h-4 w-4 mr-1"}),"Actualiser"]})})}),e.jsx(ve,{children:e.jsx("p",{children:"Rafraîchir la liste des utilisateurs"})})]})})]}),e.jsx("div",{className:"w-full lg:w-auto lg:min-w-[300px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(le,{placeholder:"Rechercher un utilisateur...",value:l,onChange:e=>o(e.target.value),className:"w-full bg-white shadow-sm border-gray-200 hover:border-gray-300 transition-colors pl-10"}),e.jsx(T,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),l&&e.jsx("button",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-500",onClick:()=>o(""),children:e.jsx(N,{className:"h-4 w-4"})})]})})]})]})}function Fr(e){switch(e){case"SUPERADMIN":case"ROLE_SUPERADMIN":return"bg-red-500";case"ADMIN":case"ROLE_ADMIN":return"bg-orange-500";case"TEACHER":case"ROLE_TEACHER":return"bg-green-500";case"STUDENT":case"ROLE_STUDENT":return"bg-blue-500";case"HR":case"ROLE_HR":return"bg-purple-500";case"GUEST":case"ROLE_GUEST":return"bg-yellow-500";case"RECRUITER":case"ROLE_RECRUITER":return"bg-indigo-500";default:return"bg-gray-500"}}function $r({paginatedUsers:t,handleSort:r,sortConfig:a,openChangeRoleDialog:n,openDeleteDialog:s,userHasSuperAdminRole:i,isSuperAdmin:l,openEditDialog:o}){const c=t=>a.key===t?"ascending"===a.direction?e.jsx(Ke,{className:"w-4 h-4 ml-1"}):e.jsx(We,{className:"w-4 h-4 ml-1"}):null,u=e=>{if(!e||!e.roles||0===e.roles.length)return"bg-gray-200";const t=e.roles[0].name;return(O[t]||O.ROLE_USER).split(" ")[0]||"bg-gray-100"};return e.jsx(g.div,{className:"rounded-md border border-gray-200 overflow-hidden shadow-sm",initial:{opacity:0},animate:{opacity:1},transition:{duration:.4},children:e.jsxs(we,{children:[e.jsx(be,{className:"bg-gray-50",children:e.jsxs(Ne,{className:"hover:bg-gray-50/80",children:[e.jsx(je,{className:"w-12"}),e.jsx(je,{className:"cursor-pointer font-medium text-gray-700",onClick:()=>r("lastName"),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(C,{className:"h-4 w-4 mr-2 text-gray-500"}),"Nom",c("lastName")]})}),e.jsx(je,{className:"cursor-pointer font-medium text-gray-700",onClick:()=>r("email"),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(D,{className:"h-4 w-4 mr-2 text-gray-500"}),"Email",c("email")]})}),e.jsx(je,{className:"font-medium text-gray-700",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(st,{className:"h-4 w-4 mr-2 text-gray-500"}),"Rôles"]})}),e.jsx(je,{className:"text-right font-medium text-gray-700",children:"Actions"})]})}),e.jsx(ke,{children:t.length>0?t.map(((t,r)=>{return e.jsxs(g.tr,{className:"border-b border-gray-100 group transition-colors hover:bg-blue-50/30 "+(i(t)?"bg-red-50/30":""),initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.05*r},whileHover:{backgroundColor:"rgba(243, 244, 246, 0.8)"},children:[e.jsx(Te,{className:"py-3",children:e.jsx(U,{className:`h-9 w-9 ${u(t)}`,children:e.jsx(A,{children:(a=t.firstName,c=t.lastName,`${a?.charAt(0)||""}${c?.charAt(0)||""}`.toUpperCase())})})}),e.jsx(Te,{className:"font-medium py-3",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{children:[t.firstName," ",t.lastName]}),i(t)&&e.jsx("span",{className:"text-xs text-red-600 mt-1",children:"SuperAdmin"})]})}),e.jsx(Te,{className:"py-3",children:e.jsx("a",{href:`mailto:${t.email}`,className:"text-blue-600 hover:text-blue-800 hover:underline transition-colors",children:t.email})}),e.jsx(Te,{className:"py-3",children:t.roles&&t.roles.length>0?e.jsx("div",{className:"flex flex-wrap gap-1.5",children:t.roles.map(((r,a)=>e.jsx(E,{role:r.name,solid:!0,useVariant:!0,className:"transition-all duration-200 hover:scale-105"},`${t.id}-role-${a}`)))}):e.jsx("span",{className:"text-sm text-gray-500",children:"Aucun rôle"})}),e.jsx(Te,{className:"text-right py-3",children:e.jsx(pe,{children:e.jsxs(xe,{children:[e.jsx(ye,{asChild:!0,children:e.jsxs(R,{children:[e.jsx(S,{asChild:!0,children:e.jsx(j,{variant:"ghost",size:"icon",className:"hover:bg-gray-100",children:e.jsx(tt,{className:"h-4 w-4"})})}),e.jsxs(L,{align:"end",className:"w-48",children:[e.jsxs(M,{onClick:()=>n(t),disabled:i(t)&&!l,className:"cursor-pointer",children:[e.jsx(st,{className:"h-4 w-4 mr-2 text-blue-600"}),e.jsx("span",{children:"Gérer les rôles"})]}),e.jsxs(M,{onClick:()=>o&&o(t),disabled:i(t)&&!l,className:"cursor-pointer",children:[e.jsx(at,{className:"h-4 w-4 mr-2 text-green-600"}),e.jsx("span",{children:"Modifier l'utilisateur"})]}),e.jsx(P,{}),e.jsxs(M,{onClick:()=>s(t),disabled:i(t)&&!l,className:"text-red-600 cursor-pointer",children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),e.jsx("span",{children:"Supprimer l'utilisateur"})]})]})]})}),e.jsx(ve,{side:"left",children:e.jsxs("p",{children:["Actions pour ",t.firstName," ",t.lastName]})})]})})})]},t.id);var a,c})):e.jsx(Ne,{children:e.jsx(Te,{colSpan:5,className:"text-center py-10 text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(C,{className:"h-10 w-10 text-gray-300 mb-2"}),e.jsx("p",{className:"text-base font-medium text-gray-600 mb-1",children:"Aucun utilisateur trouvé"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Modifiez vos filtres ou ajoutez de nouveaux utilisateurs"})]})})})})]})})}const Gr=({className:t,...r})=>e.jsx("nav",{role:"navigation","aria-label":"pagination",className:I("mx-auto flex w-full justify-center",t),...r});function Qr({filteredUsers:t,pagination:r,handlePageChange:a}){const n=Math.ceil(t.length/r.itemsPerPage);if(n<=1)return null;const s=r.currentPage,i=t.length,l=(s-1)*r.itemsPerPage+1,o=Math.min(s*r.itemsPerPage,i);let c=Math.max(1,s-2),u=Math.min(n,c+4);u-c<4&&(c=Math.max(1,u-4));const d=[];for(let m=c;m<=u;m++)d.push(e.jsx(j,{variant:m===s?"default":"outline",size:"icon",onClick:()=>a(m),className:"w-9 h-9 transition-all duration-200 "+(m===s?"bg-blue-600 hover:bg-blue-700 text-white shadow-sm":"hover:bg-gray-100"),children:m},m));return e.jsxs(g.div,{className:"mt-6 flex flex-col items-center space-y-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Affichage de ",e.jsxs("span",{className:"font-semibold text-gray-700",children:[l,"-",o]})," sur ",e.jsx("span",{className:"font-semibold text-gray-700",children:i})," utilisateurs"]}),e.jsxs(Gr,{className:"flex justify-center items-center gap-1 p-1 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx(j,{variant:"ghost",size:"icon",onClick:()=>a(1),disabled:1===s,className:"hidden sm:flex hover:bg-gray-200 text-gray-600",title:"Première page",children:e.jsx(Je,{className:"h-4 w-4"})}),e.jsx(j,{variant:"ghost",size:"icon",onClick:()=>a(Math.max(1,s-1)),disabled:1===s,className:"hover:bg-gray-200 text-gray-600",title:"Page précédente",children:e.jsx(H,{className:"h-4 w-4"})}),c>1&&e.jsxs(e.Fragment,{children:[e.jsx(j,{variant:"outline",size:"icon",onClick:()=>a(1),className:"w-9 h-9 hover:bg-gray-100 hidden sm:flex",children:"1"}),c>2&&e.jsx("span",{className:"mx-1 self-center text-gray-400 hidden sm:block",children:"…"})]}),e.jsx("div",{className:"flex items-center gap-1",children:d}),u<n&&e.jsxs(e.Fragment,{children:[u<n-1&&e.jsx("span",{className:"mx-1 self-center text-gray-400 hidden sm:block",children:"…"}),e.jsx(j,{variant:"outline",size:"icon",onClick:()=>a(n),className:"w-9 h-9 hover:bg-gray-100 hidden sm:flex",children:n})]}),e.jsx(j,{variant:"ghost",size:"icon",onClick:()=>a(Math.min(n,s+1)),disabled:s===n,className:"hover:bg-gray-200 text-gray-600",title:"Page suivante",children:e.jsx(q,{className:"h-4 w-4"})}),e.jsx(j,{variant:"ghost",size:"icon",onClick:()=>a(n),disabled:s===n,className:"hidden sm:flex hover:bg-gray-200 text-gray-600",title:"Dernière page",children:e.jsx(et,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center justify-center text-sm text-gray-500 sm:hidden mt-2",children:["Page ",e.jsx("span",{className:"font-semibold mx-1",children:s})," sur ",e.jsx("span",{className:"font-semibold mx-1",children:n})]})]})}function Vr({isDialogOpen:t,setIsDialogOpen:r,selectedUser:a,selectedRoleId:n,setSelectedRoleId:s,roles:i,userHasSuperAdminRole:l,isSuperAdmin:o,isProcessing:c,changeUserRole:u,onSuccess:d}){return e.jsx(_,{open:t,onOpenChange:r,children:e.jsxs(z,{className:"sm:max-w-[500px] p-0 overflow-hidden",children:[e.jsxs(Y,{className:"px-6 pt-6 pb-2",children:[e.jsxs(F,{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx(st,{className:"h-5 w-5 text-blue-600"}),"Modifier le rôle utilisateur"]}),e.jsx($,{className:"text-gray-500 mt-1.5",children:"Choisissez un nouveau rôle pour l'utilisateur sélectionné"})]}),a&&e.jsxs("div",{className:"px-6 pb-4",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg border border-gray-100 mt-4",children:[e.jsx(U,{className:"h-12 w-12 border-2 border-white shadow-sm",children:e.jsx(A,{className:"bg-blue-100 text-blue-800 font-medium",children:(m=a.firstName,h=a.lastName,`${m?.charAt(0)||""}${h?.charAt(0)||""}`.toUpperCase())})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-semibold",children:[a.firstName," ",a.lastName]}),e.jsx("p",{className:"text-sm text-gray-500",children:a.email}),e.jsx("div",{className:"flex flex-wrap mt-2 gap-1",children:a.roles&&a.roles.map(((t,r)=>e.jsx(E,{role:t.name,solid:!0,useVariant:!0,interactive:!1},`${t.id||r}-${t.name}`)))})]})]}),l(a)&&!o&&e.jsxs(Ue,{variant:"destructive",className:"mt-4",children:[e.jsxs(Ae,{className:"flex items-center",children:[e.jsx(nt,{className:"h-4 w-4 mr-2"}),"Action restreinte"]}),e.jsx(Ee,{children:"Vous n'avez pas l'autorisation de modifier le rôle d'un SuperAdmin. Seul un SuperAdmin peut modifier le rôle d'un autre SuperAdmin."})]})]}),e.jsxs("div",{className:"px-6 pb-6",children:[e.jsx(De,{htmlFor:"role-select",className:"mb-2 block text-gray-700",children:"Choisir un nouveau rôle"}),e.jsxs(oe,{onValueChange:e=>s(Number(e)),value:n?.toString()||"",disabled:a&&l(a)&&!o,children:[e.jsx(ce,{className:"w-full bg-white border-gray-200 hover:border-gray-300 transition-colors",id:"role-select",children:e.jsx(ue,{placeholder:"Sélectionner un rôle"})}),e.jsx(de,{className:"max-h-[400px]",children:e.jsxs(he,{children:[e.jsx(fe,{className:"text-gray-500",children:"Rôles disponibles"}),i.map((t=>{if(("SUPERADMIN"===t.name||"ROLE_SUPERADMIN"===t.name)&&!o)return null;const r=(t=>{switch(t){case"SUPERADMIN":case"ROLE_SUPERADMIN":return{icon:e.jsx(Re,{className:"h-4 w-4 text-red-600 mr-2"}),bgColor:"bg-red-50",textColor:"text-red-700"};case"ADMIN":case"ROLE_ADMIN":return{icon:e.jsx(st,{className:"h-4 w-4 text-orange-600 mr-2"}),bgColor:"bg-orange-50",textColor:"text-orange-700"};default:return{icon:e.jsx(st,{className:"h-4 w-4 text-blue-600 mr-2"}),bgColor:"bg-blue-50",textColor:"text-blue-700"}}})(t.name);return e.jsx(me,{value:t.id.toString(),className:`flex items-center gap-2 my-1 rounded ${r.bgColor} ${r.textColor}`,children:e.jsxs("div",{className:"flex items-center",children:[r.icon,G(t.name)]})},t.id)}))]})})]}),!o&&e.jsxs("p",{className:"text-amber-600 mt-2 text-xs flex items-center",children:[e.jsx(nt,{className:"h-3 w-3 mr-1"}),"Seuls les SuperAdmin peuvent attribuer le rôle SuperAdmin."]})]}),e.jsxs(Q,{className:"px-6 py-4 bg-gray-50 border-t flex justify-between",children:[e.jsx(j,{variant:"outline",onClick:()=>r(!1),disabled:c,className:"bg-white hover:bg-gray-50",children:"Annuler"}),e.jsx(g.div,{whileHover:{scale:c||!n||a&&l(a)&&!o?1:1.02},whileTap:{scale:.98},children:e.jsx(j,{variant:"default",onClick:()=>{if(a&&n){const e=i.find((e=>e.id===n));if(e){if(a.roles&&a.roles.some((t=>{const r=t.name.toLowerCase(),a=e.name.toLowerCase();return r===a||r===`role_${a.replace("role_","")}`||`role_${r.replace("role_","")}`===a})))return void V.warning("L'utilisateur possède déjà ce rôle");const t=a.roles&&a.roles.length>0?a.roles[0].name:"ROLE_GUEST";u(a.id,t,e.name);const n={...a,roles:[{id:e.id,name:e.name}]};d&&d(n,G(e.name)),r(!1)}}},disabled:c||!n||a&&l(a)&&!o,className:"bg-blue-600 hover:bg-blue-700 text-white",children:c?e.jsxs("div",{className:"flex items-center",children:[e.jsx(ge,{className:"mr-2 h-4 w-4 animate-spin"}),"Modification en cours..."]}):"Appliquer le changement"})})]})]})});var m,h}function Br({isDeleteDialogOpen:t,setIsDeleteDialogOpen:r,selectedUser:a,userHasSuperAdminRole:n,isSuperAdmin:s,isProcessing:i,deleteUser:l}){return e.jsx(_,{open:t,onOpenChange:r,children:e.jsxs(z,{className:"sm:max-w-[500px] p-0 overflow-hidden",children:[e.jsxs(Y,{className:"px-6 pt-6 pb-2",children:[e.jsxs(F,{className:"text-xl font-semibold flex items-center gap-2 text-red-600",children:[e.jsx(it,{className:"h-5 w-5"}),"Confirmation de suppression"]}),e.jsx($,{className:"text-gray-500 mt-1.5",children:"Cette action est définitive et ne peut pas être annulée."})]}),a&&e.jsxs("div",{className:"px-6 pb-4",children:[e.jsxs(Ue,{variant:"destructive",className:"mb-4 bg-red-50 border-red-200",children:[e.jsx(nt,{className:"h-4 w-4 text-red-600"}),e.jsx(Ae,{className:"font-medium text-red-800",children:"Attention"}),e.jsx(Ee,{className:"text-sm text-red-700",children:"Vous êtes sur le point de supprimer définitivement cet utilisateur. Toutes ses données seront perdues."})]}),e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg mb-4 border border-gray-200",children:[e.jsx(U,{className:"h-12 w-12 border-2 border-white shadow-sm",children:e.jsx(A,{className:"bg-red-100 text-red-700 font-medium",children:(o=a.firstName,c=a.lastName,`${o?.charAt(0)||""}${c?.charAt(0)||""}`.toUpperCase())})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("h3",{className:"font-medium text-gray-900",children:[a.firstName," ",a.lastName]}),n(a)&&e.jsx(w,{variant:"destructive",className:"text-xs bg-red-100 text-red-700 border-red-200",children:"SuperAdmin"})]}),e.jsx("p",{className:"text-sm text-gray-500",children:a.email})]})]}),a&&n(a)&&!s&&e.jsxs(Ue,{variant:"destructive",className:"mb-4 bg-red-50 text-red-800 border-red-200",children:[e.jsx(Ze,{className:"h-4 w-4"}),e.jsx(Ae,{className:"font-medium",children:"Action non autorisée"}),e.jsx(Ee,{className:"text-sm",children:"Seul un SuperAdmin peut supprimer un utilisateur SuperAdmin."})]})]}),e.jsxs(Q,{className:"px-6 py-4 bg-gray-50 border-t flex space-x-2 justify-end",children:[e.jsx(j,{variant:"outline",onClick:()=>r(!1),disabled:i,className:"bg-white hover:bg-gray-50",children:"Annuler"}),e.jsx(g.div,{whileHover:{scale:i||a&&n(a)&&!s?1:1.02},whileTap:{scale:.98},children:e.jsx(j,{onClick:()=>a&&l(a.id),disabled:i||a&&n(a)&&!s,className:"bg-red-600 hover:bg-red-700 text-white",children:i?e.jsxs("div",{className:"flex items-center",children:[e.jsx(ge,{className:"mr-2 h-4 w-4 animate-spin"}),"Suppression en cours..."]}):e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ce,{className:"mr-2 h-4 w-4"}),"Supprimer définitivement"]})})})]})]})});var o,c}Gr.displayName="Pagination";const Xr=({isOpen:r,onClose:a,user:n,onUpdateUser:s,isProcessing:i,currentUserIsSuperAdmin:l})=>{const[o,c]=t.useState({firstName:"",lastName:"",email:"",phoneNumber:"",birthDate:""}),[u,d]=t.useState({}),[m,h]=t.useState(!1);t.useEffect((()=>{if(n){const e={firstName:n.firstName||"",lastName:n.lastName||"",email:n.email||"",phoneNumber:n.phoneNumber||"",birthDate:n.birthDate?Ge(new Date(n.birthDate),"yyyy-MM-dd"):""};c(e),h(!1)}}),[n]);const f=e=>{const{name:t,value:r}=e.target;o[t]!==r&&h(!0),c((e=>({...e,[t]:r}))),u[t]&&d((e=>({...e,[t]:null})))},p=n?.roles?.some((e=>"SUPERADMIN"===e.name||"ROLE_SUPERADMIN"===e.name))&&!l;return e.jsx(_,{open:r,onOpenChange:a,children:e.jsxs(z,{className:"sm:max-w-[550px] p-0 overflow-hidden",children:[e.jsxs(Y,{className:"px-6 pt-6 pb-2",children:[e.jsxs(F,{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx(st,{className:"h-5 w-5 text-blue-600"}),"Modifier l'utilisateur"]}),e.jsx($,{className:"text-gray-500 mt-1.5",children:"Mettez à jour les informations de l'utilisateur ici."})]}),n&&e.jsxs("div",{className:"px-6 pb-4",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg mb-4 border border-gray-200",children:[e.jsx(U,{className:"h-12 w-12 border-2 border-white shadow-sm",children:e.jsx(A,{className:"bg-blue-100 text-blue-700 font-medium",children:(x=n.firstName,y=n.lastName,`${x?.charAt(0)||""}${y?.charAt(0)||""}`.toUpperCase())})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("h3",{className:"font-medium text-gray-900",children:[n.firstName," ",n.lastName]}),n.roles&&n.roles.some((e=>"SUPERADMIN"===e.name||"ROLE_SUPERADMIN"===e.name))&&e.jsx(w,{className:"bg-red-100 text-red-700 border-red-200",children:"SuperAdmin"})]}),e.jsx("p",{className:"text-sm text-gray-500",children:n.email})]})]}),p&&e.jsxs(Ue,{variant:"destructive",className:"mb-4 bg-red-50 text-red-800 border-red-200",children:[e.jsx(Ze,{className:"h-4 w-4"}),e.jsx(Ae,{className:"font-medium",children:"Accès limité"}),e.jsx(Ee,{className:"text-sm",children:"Vous ne pouvez pas modifier un SuperAdmin."})]})]}),e.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),!(()=>{const e={};if(o.firstName.trim()||(e.firstName="Le prénom est requis"),o.lastName.trim()||(e.lastName="Le nom est requis"),o.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)||(e.email="Email invalide"):e.email="L'email est requis",o.phoneNumber&&!Le(o.phoneNumber)&&(e.phoneNumber="Numéro de téléphone invalide"),o.birthDate){const t=zr(o.birthDate,"yyyy-MM-dd",new Date);Qe(t)||(e.birthDate="Date de naissance invalide")}return d(e),0===Object.keys(e).length})())return;const t={...o,birthDate:o.birthDate?Ge(zr(o.birthDate,"yyyy-MM-dd",new Date),"yyyy-MM-dd"):null};s(n.id,t)},className:"px-6 pb-0",children:[e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(De,{htmlFor:"firstName",className:"text-sm font-medium text-gray-700",children:[e.jsx(C,{className:"h-3.5 w-3.5 inline mr-1.5 text-gray-500"}),"Prénom"]}),e.jsxs("div",{className:"relative",children:[e.jsx(le,{id:"firstName",name:"firstName",value:o.firstName,onChange:f,className:"w-full "+(u.firstName?"border-red-300 focus:ring-red-500":""),disabled:i||p,placeholder:"Jean"}),u.firstName&&e.jsxs("div",{className:"text-red-500 text-xs mt-1 flex items-center",children:[e.jsx(N,{className:"h-3 w-3 mr-1"}),u.firstName]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(De,{htmlFor:"lastName",className:"text-sm font-medium text-gray-700",children:[e.jsx(C,{className:"h-3.5 w-3.5 inline mr-1.5 text-gray-500"}),"Nom"]}),e.jsxs("div",{className:"relative",children:[e.jsx(le,{id:"lastName",name:"lastName",value:o.lastName,onChange:f,className:"w-full "+(u.lastName?"border-red-300 focus:ring-red-500":""),disabled:i||p,placeholder:"Dupont"}),u.lastName&&e.jsxs("div",{className:"text-red-500 text-xs mt-1 flex items-center",children:[e.jsx(N,{className:"h-3 w-3 mr-1"}),u.lastName]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(De,{htmlFor:"email",className:"text-sm font-medium text-gray-700",children:[e.jsx(D,{className:"h-3.5 w-3.5 inline mr-1.5 text-gray-500"}),"Email"]}),e.jsxs("div",{className:"relative",children:[e.jsx(le,{id:"email",name:"email",type:"email",value:o.email,onChange:f,className:"w-full "+(u.email?"border-red-300 focus:ring-red-500":""),disabled:i||p,placeholder:"jean.dupont@example.com"}),u.email&&e.jsxs("div",{className:"text-red-500 text-xs mt-1 flex items-center",children:[e.jsx(N,{className:"h-3 w-3 mr-1"}),u.email]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(De,{htmlFor:"phoneNumber",className:"text-sm font-medium text-gray-700",children:[e.jsx(Ve,{className:"h-3.5 w-3.5 inline mr-1.5 text-gray-500"}),"Téléphone"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Se,{id:"phoneNumber",name:"phoneNumber",value:o.phoneNumber,onChange:e=>{o.phoneNumber!==e&&h(!0),c((t=>({...t,phoneNumber:e}))),u.phoneNumber&&d((e=>({...e,phoneNumber:null})))},error:u.phoneNumber,disabled:i||p,placeholder:"06 12 34 56 78"}),u.phoneNumber&&e.jsxs("div",{className:"mt-1 text-sm text-red-500",children:[e.jsx(N,{className:"h-3 w-3 mr-1"}),u.phoneNumber]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(De,{htmlFor:"birthDate",className:"text-sm font-medium text-gray-700",children:[e.jsx(B,{className:"h-3.5 w-3.5 inline mr-1.5 text-gray-500"}),"Date de naissance"]}),e.jsxs("div",{className:"relative",children:[e.jsx(le,{id:"birthDate",name:"birthDate",type:"date",value:o.birthDate,onChange:f,className:"w-full "+(u.birthDate?"border-red-300 focus:ring-red-500":""),disabled:i||p}),u.birthDate&&e.jsxs("div",{className:"text-red-500 text-xs mt-1 flex items-center",children:[e.jsx(N,{className:"h-3 w-3 mr-1"}),u.birthDate]})]})]})]})]}),e.jsxs(Q,{className:"py-4 mt-4 border-t flex justify-between flex-row",children:[e.jsx(j,{type:"button",variant:"outline",onClick:a,disabled:i,className:"bg-white hover:bg-gray-50",children:"Annuler"}),e.jsx(g.div,{whileHover:{scale:i||p||!m?1:1.02},whileTap:{scale:.98},children:e.jsx(j,{type:"submit",disabled:i||p||!m,className:"bg-blue-600 hover:bg-blue-700 text-white",children:i?e.jsxs("div",{className:"flex items-center",children:[e.jsx(ge,{className:"mr-2 h-4 w-4 animate-spin"}),"Enregistrement..."]}):e.jsxs("div",{className:"flex items-center",children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),"Enregistrer"]})})})]})]})]})});var x,y},Wr={ALL:{icon:te,title:"Gestion des utilisateurs",description:"Visualisez et modifiez les rôles des utilisateurs dans la plateforme."},ROLE_STUDENT:{icon:ee,title:"Gestion des étudiants",description:"Visualisez et modifiez les informations des étudiants."},STUDENT:{icon:ee,title:"Gestion des étudiants",description:"Visualisez et modifiez les informations des étudiants."},ROLE_TEACHER:{icon:J,title:"Gestion des formateurs",description:"Visualisez et modifiez les informations des formateurs."},TEACHER:{icon:J,title:"Gestion des formateurs",description:"Visualisez et modifiez les informations des formateurs."},ROLE_HR:{icon:Z,title:"Gestion des ressources humaines",description:"Visualisez et modifiez les informations du personnel RH."},HR:{icon:Z,title:"Gestion des ressources humaines",description:"Visualisez et modifiez les informations du personnel RH."},ROLE_ADMIN:{icon:K,title:"Gestion des administrateurs",description:"Visualisez et modifiez les informations des administrateurs."},ADMIN:{icon:K,title:"Gestion des administrateurs",description:"Visualisez et modifiez les informations des administrateurs."}};function Kr(){const[r]=a(),n=r.get("filter"),s=t.useMemo((()=>n||"ALL"),[n]),i=t.useRef(s),[l,o]=t.useState(!1),[c,u]=t.useState(!1),[d,b]=t.useState("ALL"===s),{user:N}=W(),j=t.useMemo((()=>N?.roles?.some((e=>"SUPERADMIN"===e.name||"ROLE_SUPERADMIN"===e.name))),[N]),{roles:k,isLoading:C,selectedUser:D,selectedRoleId:U,isDialogOpen:A,isDeleteDialogOpen:E,isProcessing:R,filterRole:S,searchTerm:L,sortConfig:M,pagination:P,paginatedUsers:O,filteredUsers:I,fetchUsers:H,changeUserRole:q,deleteUser:_,updateUser:z,userHasSuperAdminRole:Y,handleSort:F,setSearchTerm:$,setFilterRole:G,handlePageChange:Q,openChangeRoleDialog:V,openDeleteDialog:B,setSelectedUser:X,setSelectedRoleId:K,setIsDialogOpen:Z,setIsDeleteDialogOpen:J,updateLocalUsers:ee}=function(e="ALL"){const[r,a]=t.useState([]),[n,s]=t.useState([]),[i,l]=t.useState(!0),[o,c]=t.useState(null),[u,d]=t.useState(null),[g,w]=t.useState(!1),[b,N]=t.useState(!1),[j,k]=t.useState(!1),[T,C]=t.useState(e),[D,U]=t.useState(""),[A,E]=t.useState({key:"lastName",direction:"ascending"}),[R,S]=t.useState({currentPage:1,itemsPerPage:10}),L=t.useCallback((e=>{C(e)}),[]);t.useEffect((()=>{(async()=>{await M(),await P(T)})()}),[]),t.useEffect((()=>{P(T)}),[T]);const M=async()=>{try{const e=await m.getAllRoles();e.success&&e.data?s(e.data):h.error("Impossible de récupérer les rôles")}catch(e){console.error("Erreur lors de la récupération des rôles:",e),h.error("Erreur lors du chargement des rôles")}},P=async(e="ALL")=>{l(!0);try{let t;if("ALL"===e)t=await m.get("/users");else{const r=e.startsWith("ROLE_")?e:`ROLE_${e.replace("ROLE_","")}`;t=await m.getUsersByRole(r)}if(t.success&&t.data)a(t.data);else{console.warn("Réponse de l'API sans succès, utilisation des données fictives");const t=e.startsWith("ROLE_")?e:`ROLE_${e.replace("ROLE_","")}`,r=mockUsers.filter((e=>e.roles&&e.roles.some((e=>e.name===t||e.name===t.replace("ROLE_","")||"ROLE_"+e.name===t))));a(r),h.error("Impossible de récupérer les utilisateurs depuis l'API. Affichage des données de démonstration.")}}catch(t){if(console.error("Erreur lors de la récupération des utilisateurs:",t),"ALL"===e)a(mockUsers);else{const t=e.startsWith("ROLE_")?e:`ROLE_${e.replace("ROLE_","")}`,r=mockUsers.filter((e=>e.roles&&e.roles.some((e=>e.name===t||e.name===t.replace("ROLE_","")||"ROLE_"+e.name===t))));a(r)}h.error("Erreur lors du chargement des utilisateurs. Affichage des données de démonstration.")}finally{l(!1)}},O=t.useMemo((()=>{const e=[...r];return A.key&&e.sort(((e,t)=>null===e[A.key]?1:null===t[A.key]?-1:void 0===e[A.key]?1:void 0===t[A.key]?-1:"string"==typeof e[A.key]?"ascending"===A.direction?e[A.key].localeCompare(t[A.key],"fr",{sensitivity:"base"}):t[A.key].localeCompare(e[A.key],"fr",{sensitivity:"base"}):e[A.key]instanceof Date&&t[A.key]instanceof Date?"ascending"===A.direction?e[A.key]-t[A.key]:t[A.key]-e[A.key]:"ascending"===A.direction?e[A.key]>t[A.key]?1:-1:e[A.key]<t[A.key]?1:-1)),e}),[r,A]),I=t.useMemo((()=>D.trim()?O.filter((e=>{const t=`${e.firstName} ${e.lastName}`.toLowerCase(),r=e.email.toLowerCase(),a=D.toLowerCase();return t.includes(a)||r.includes(a)})):O),[O,D]),H=t.useMemo((()=>{const e=(R.currentPage-1)*R.itemsPerPage;return I.slice(e,e+R.itemsPerPage)}),[I,R]);return{users:r,roles:n,isLoading:i,selectedUser:o,selectedRoleId:u,isDialogOpen:g,isDeleteDialogOpen:b,isProcessing:j,filterRole:T,searchTerm:D,sortConfig:A,pagination:R,paginatedUsers:H,filteredUsers:I,fetchUsers:P,changeUserRole:async(e,t,r)=>{k(!0);try{const n=await m.changeUserRole(e,t,r);if(n.success){const t=String(e);console.log("Changing role for user:",t);try{const e=f(),a=p(e,"notificationPreferences",t),n=(await x(a)).data()||{};if(console.log("Notification preferences:",n),!1!==n.ROLE_UPDATE){console.log("Creating notification for user:",t);const a={recipientId:t,title:"Mise à jour de votre rôle",message:`Votre rôle a été modifié en ${r.replace("ROLE_","")}`,timestamp:new Date,read:!1,type:"ROLE_UPDATE"};console.log("Notification data:",a),await y(v(e,"notifications"),a),console.log("Notification created successfully")}else console.log("Notifications are disabled for this user")}catch(a){console.error("Firebase error:",a),h.error("Le rôle a été modifié mais la notification n'a pas pu être envoyée")}h.success("Rôle modifié avec succès")}else h.error("Impossible de modifier le rôle: "+(n.message||"Erreur inconnue")),P(T)}catch(n){console.error("Erreur lors de la modification du rôle:",n),h.error("Erreur lors de la modification du rôle"),P(T)}finally{k(!1),w(!1)}},deleteUser:async e=>{k(!0);const t=[...r];a((t=>t.filter((t=>t.id!==e))));try{const r=await m.delete(`/users/${e}`);r.success?h.success("Utilisateur supprimé avec succès"):(a(t),h.error("Impossible de supprimer l'utilisateur: "+(r.message||"Erreur inconnue")))}catch(n){a(t),console.error("Erreur lors de la suppression de l'utilisateur:",n),h.error("Erreur lors de la suppression de l'utilisateur")}finally{k(!1),N(!1)}},updateUser:async(e,t,r)=>{k(!0),a((r=>r.map((r=>r.id===e?{...r,...t}:r))));try{const a=await m.updateUser(e,t);a.success?(h.success("Utilisateur mis à jour avec succès"),r&&r()):(h.error("Impossible de mettre à jour l'utilisateur: "+(a.message||"Erreur inconnue")),P(T))}catch(n){console.error("Erreur lors de la mise à jour de l'utilisateur:",n),h.error("Erreur lors de la mise à jour de l'utilisateur"),P(T)}finally{k(!1)}},userHasSuperAdminRole:e=>!(!e||!e.roles)&&e.roles.some((e=>"SUPERADMIN"===e.name||"ROLE_SUPERADMIN"===e.name)),handleSort:e=>{let t="ascending";A.key===e&&"ascending"===A.direction&&(t="descending"),E({key:e,direction:t})},setSearchTerm:U,setFilterRole:L,handlePageChange:e=>{S((t=>({...t,currentPage:e})))},openChangeRoleDialog:e=>{c(e),d(null),w(!0)},openDeleteDialog:e=>{c(e),N(!0)},setSelectedUser:c,setSelectedRoleId:d,setIsDialogOpen:w,setIsDeleteDialogOpen:N,updateLocalUsers:(e,t)=>{a((t=>{const r=[...t];return e.forEach((e=>{const t=r.findIndex((t=>t.id===e.id));-1!==t&&(r[t]=e)})),r}))}}}(s);t.useEffect((()=>{s!==i.current&&(i.current=s,G(s))}),[s,G]);const te=Wr[S]||Wr.ALL,le=te.icon,oe=()=>{o(!1)};t.useEffect((()=>{u(!0);const e=setTimeout((()=>{b(!1)}),3e3);return()=>clearTimeout(e)}),[]);return e.jsx(ie,{headerTitle:te.title,headerIcon:le,children:e.jsxs("div",{className:"container mx-auto py-6 px-4 sm:px-6",children:[e.jsx(g.div,{initial:{opacity:0,y:20},animate:{opacity:c?1:0,y:c?0:20},transition:{duration:.5,delay:.1},children:e.jsxs(re,{className:"border-0 bg-white shadow-md hover:shadow-lg transition-shadow duration-300",children:[e.jsx(ae,{className:"bg-gradient-to-r from-slate-50 to-gray-50 border-b rounded-t-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(ne,{className:"text-gradient bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-indigo-600",children:te.title}),e.jsx("div",{className:"text-sm text-muted-foreground max-w-2xl mt-2",children:te.description})]}),e.jsxs(w,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200 px-3 py-1",children:[I.length," utilisateur",1!==I.length?"s":""]})]})}),e.jsxs(se,{className:"p-6",children:[e.jsx(Yr,{roles:k,filterRole:S,setFilterRole:G,searchTerm:L,setSearchTerm:$,fetchUsers:H,isLoading:C}),C?e.jsxs(g.div,{className:"flex flex-col justify-center items-center h-64 my-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[e.jsx(ge,{className:"h-10 w-10 animate-spin text-primary mb-4"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Chargement des utilisateurs..."})]}):e.jsxs(g.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:[e.jsx("div",{className:"mt-6 mb-6",children:e.jsx($r,{paginatedUsers:O,handleSort:F,sortConfig:M,openChangeRoleDialog:V,openDeleteDialog:B,openEditDialog:e=>{X(e),o(!0)},userHasSuperAdminRole:Y,isSuperAdmin:j})}),e.jsx("div",{className:"mt-6",children:e.jsx(Qr,{filteredUsers:I,pagination:P,handlePageChange:Q})})]}),!C&&0===I.length&&L&&e.jsxs(g.div,{className:"flex flex-col items-center justify-center py-12 text-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsx(T,{className:"h-12 w-12 text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-700",children:"Aucun résultat trouvé"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1 max-w-sm",children:['Aucun utilisateur ne correspond à votre recherche "',L,'".']}),e.jsx("button",{onClick:()=>$(""),className:"mt-4 text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Effacer la recherche"})]})]})]})}),e.jsx(Vr,{isDialogOpen:A,setIsDialogOpen:Z,selectedUser:D,selectedRoleId:U,setSelectedRoleId:K,roles:k,userHasSuperAdminRole:Y,isSuperAdmin:j,isProcessing:R,changeUserRole:q,onSuccess:(t,r)=>{h.success(e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:"Rôle modifié avec succès"}),e.jsxs("span",{className:"text-sm opacity-90",children:[t.firstName," ",t.lastName," est maintenant ",r]})]}));const a=O.map((e=>e.id===t.id?t:e)),n=I.map((e=>e.id===t.id?t:e));"function"==typeof ee?ee(n,a):H(S)}}),e.jsx(Br,{isDeleteDialogOpen:E,setIsDeleteDialogOpen:J,selectedUser:D,userHasSuperAdminRole:Y,isSuperAdmin:j,isProcessing:R,deleteUser:_}),e.jsx(Xr,{isOpen:l,onClose:oe,user:D,onUpdateUser:(e,t)=>z(e,t,oe),isProcessing:R,currentUserIsSuperAdmin:j})]})})}export{Kr as default};
