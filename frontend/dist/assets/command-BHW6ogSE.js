import{B as e,m as t,k as r,g as n,O as l,h as a,U as i,j as o}from"./ui-B9MhWaVJ.js";import{r as u}from"./router-D7BdrHDj.js";import{c,F as d}from"./index-Bd05LC-l.js";var s=.999,f=/[\\\/_+.#"@\[\(\{&]/,m=/[\\\/_+.#"@\[\(\{&]/g,p=/[\s-]/,v=/[\s-]/g;function h(e,t,r,n,l,a,i){if(a===t.length)return l===e.length?1:.99;var o=`${l},${a}`;if(void 0!==i[o])return i[o];for(var u,c,d,g,b=n.charAt(a),y=r.indexOf(b,l),w=0;y>=0;)(u=h(e,t,r,n,y+1,a+1,i))>w&&(y===l?u*=1:f.test(e.charAt(y-1))?(u*=.8,(d=e.slice(l,y-1).match(m))&&l>0&&(u*=Math.pow(s,d.length))):p.test(e.charAt(y-1))?(u*=.9,(g=e.slice(l,y-1).match(v))&&l>0&&(u*=Math.pow(s,g.length))):(u*=.17,l>0&&(u*=Math.pow(s,y-l))),e.charAt(y)!==t.charAt(a)&&(u*=.9999)),(u<.1&&r.charAt(y-1)===n.charAt(a+1)||n.charAt(a+1)===n.charAt(a)&&r.charAt(y-1)!==n.charAt(a))&&(.1*(c=h(e,t,r,n,y+1,a+2,i))>u&&(u=.1*c)),u>w&&(w=u),y=r.indexOf(b,y+1);return i[o]=w,w}function g(e){return e.toLowerCase().replace(v," ")}function b(e,t,r){return h(e=r&&r.length>0?""+(e+" "+r.join(" ")):e,t,g(e),g(t),0,0,{})}var y='[cmdk-group=""]',w='[cmdk-group-items=""]',x='[cmdk-item=""]',E=`${x}:not([aria-disabled="true"])`,k="cmdk-item-select",S="data-value",I=(e,t,r)=>b(e,t,r),N=u.createContext(void 0),R=()=>u.useContext(N),C=u.createContext(void 0),A=()=>u.useContext(C),j=u.createContext(void 0),M=u.forwardRef(((r,n)=>{let l=U((()=>{var e,t;return{search:"",value:null!=(t=null!=(e=r.value)?e:r.defaultValue)?t:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}})),a=U((()=>new Set)),i=U((()=>new Map)),o=U((()=>new Map)),c=U((()=>new Set)),d=z(r),{label:s,children:f,value:m,onValueChange:p,filter:v,shouldFilter:h,loop:g,disablePointerSelection:b=!1,vimBindings:R=!0,...A}=r,j=e(),M=e(),D=e(),P=u.useRef(null),F=J();G((()=>{if(void 0!==m){let e=m.trim();l.current.value=e,L.emit()}}),[m]),G((()=>{F(6,H)}),[]);let L=u.useMemo((()=>({subscribe:e=>(c.current.add(e),()=>c.current.delete(e)),snapshot:()=>l.current,setState:(e,t,r)=>{var n,a,i,o;if(!Object.is(l.current[e],t)){if(l.current[e]=t,"search"===e)_(),O(),F(1,V);else if("value"===e){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let e=document.getElementById(D);e?e.focus():null==(n=document.getElementById(j))||n.focus()}if(F(7,(()=>{var e;l.current.selectedItemId=null==(e=W())?void 0:e.id,L.emit()})),r||F(5,H),void 0!==(null==(a=d.current)?void 0:a.value)){let e=null!=t?t:"";return void(null==(o=(i=d.current).onValueChange)||o.call(i,e))}}L.emit()}},emit:()=>{c.current.forEach((e=>e()))}})),[]),$=u.useMemo((()=>({value:(e,t,r)=>{var n;t!==(null==(n=o.current.get(e))?void 0:n.value)&&(o.current.set(e,{value:t,keywords:r}),l.current.filtered.items.set(e,K(t,r)),F(2,(()=>{O(),L.emit()})))},item:(e,t)=>(a.current.add(e),t&&(i.current.has(t)?i.current.get(t).add(e):i.current.set(t,new Set([e]))),F(3,(()=>{_(),O(),l.current.value||V(),L.emit()})),()=>{o.current.delete(e),a.current.delete(e),l.current.filtered.items.delete(e);let t=W();F(4,(()=>{_(),(null==t?void 0:t.getAttribute("id"))===e&&V(),L.emit()}))}),group:e=>(i.current.has(e)||i.current.set(e,new Set),()=>{o.current.delete(e),i.current.delete(e)}),filter:()=>d.current.shouldFilter,label:s||r["aria-label"],getDisablePointerSelection:()=>d.current.disablePointerSelection,listId:j,inputId:D,labelId:M,listInnerRef:P})),[]);function K(e,t){var r,n;let a=null!=(n=null==(r=d.current)?void 0:r.filter)?n:I;return e?a(e,l.current.search,t):0}function O(){if(!l.current.search||!1===d.current.shouldFilter)return;let e=l.current.filtered.items,t=[];l.current.filtered.groups.forEach((r=>{let n=i.current.get(r),l=0;n.forEach((t=>{let r=e.get(t);l=Math.max(r,l)})),t.push([r,l])}));let r=P.current;X().sort(((t,r)=>{var n,l;let a=t.getAttribute("id"),i=r.getAttribute("id");return(null!=(n=e.get(i))?n:0)-(null!=(l=e.get(a))?l:0)})).forEach((e=>{let t=e.closest(w);t?t.appendChild(e.parentElement===t?e:e.closest(`${w} > *`)):r.appendChild(e.parentElement===r?e:e.closest(`${w} > *`))})),t.sort(((e,t)=>t[1]-e[1])).forEach((e=>{var t;let r=null==(t=P.current)?void 0:t.querySelector(`${y}[${S}="${encodeURIComponent(e[0])}"]`);null==r||r.parentElement.appendChild(r)}))}function V(){let e=X().find((e=>"true"!==e.getAttribute("aria-disabled"))),t=null==e?void 0:e.getAttribute(S);L.setState("value",t||void 0)}function _(){var e,t,r,n;if(!l.current.search||!1===d.current.shouldFilter)return void(l.current.filtered.count=a.current.size);l.current.filtered.groups=new Set;let u=0;for(let i of a.current){let a=K(null!=(t=null==(e=o.current.get(i))?void 0:e.value)?t:"",null!=(n=null==(r=o.current.get(i))?void 0:r.keywords)?n:[]);l.current.filtered.items.set(i,a),a>0&&u++}for(let[a,o]of i.current)for(let e of o)if(l.current.filtered.items.get(e)>0){l.current.filtered.groups.add(a);break}l.current.filtered.count=u}function H(){var e,t,r;let n=W();n&&((null==(e=n.parentElement)?void 0:e.firstChild)===n&&(null==(r=null==(t=n.closest(y))?void 0:t.querySelector('[cmdk-group-heading=""]'))||r.scrollIntoView({block:"nearest"})),n.scrollIntoView({block:"nearest"}))}function W(){var e;return null==(e=P.current)?void 0:e.querySelector(`${x}[aria-selected="true"]`)}function X(){var e;return Array.from((null==(e=P.current)?void 0:e.querySelectorAll(E))||[])}function Y(e){let t=X()[e];t&&L.setState("value",t.getAttribute(S))}function Z(e){var t;let r=W(),n=X(),l=n.findIndex((e=>e===r)),a=n[l+e];null!=(t=d.current)&&t.loop&&(a=l+e<0?n[n.length-1]:l+e===n.length?n[0]:n[l+e]),a&&L.setState("value",a.getAttribute(S))}function ee(e){let t,r=W(),n=null==r?void 0:r.closest(y);for(;n&&!t;)n=e>0?q(n,y):B(n,y),t=null==n?void 0:n.querySelector(E);t?L.setState("value",t.getAttribute(S)):Z(e)}let te=()=>Y(X().length-1),re=e=>{e.preventDefault(),e.metaKey?te():e.altKey?ee(1):Z(1)},ne=e=>{e.preventDefault(),e.metaKey?Y(0):e.altKey?ee(-1):Z(-1)};return u.createElement(t.div,{ref:n,tabIndex:-1,...A,"cmdk-root":"",onKeyDown:e=>{var t;null==(t=A.onKeyDown)||t.call(A,e);let r=e.nativeEvent.isComposing||229===e.keyCode;if(!e.defaultPrevented&&!r)switch(e.key){case"n":case"j":R&&e.ctrlKey&&re(e);break;case"ArrowDown":re(e);break;case"p":case"k":R&&e.ctrlKey&&ne(e);break;case"ArrowUp":ne(e);break;case"Home":e.preventDefault(),Y(0);break;case"End":e.preventDefault(),te();break;case"Enter":{e.preventDefault();let t=W();if(t){let e=new Event(k);t.dispatchEvent(e)}}}}},u.createElement("label",{"cmdk-label":"",htmlFor:$.inputId,id:$.labelId,style:T},s),Q(r,(e=>u.createElement(C.Provider,{value:L},u.createElement(N.Provider,{value:$},e)))))})),D=u.forwardRef(((r,n)=>{var l,a;let o=e(),c=u.useRef(null),d=u.useContext(j),s=R(),f=z(r),m=null!=(a=null==(l=f.current)?void 0:l.forceMount)?a:null==d?void 0:d.forceMount;G((()=>{if(!m)return s.item(o,null==d?void 0:d.id)}),[m]);let p=W(o,c,[r.value,r.children,c],r.keywords),v=A(),h=H((e=>e.value&&e.value===p.current)),g=H((e=>!(!m&&!1!==s.filter())||(!e.search||e.filtered.items.get(o)>0)));function b(){var e,t;y(),null==(t=(e=f.current).onSelect)||t.call(e,p.current)}function y(){v.setState("value",p.current,!0)}if(u.useEffect((()=>{let e=c.current;if(e&&!r.disabled)return e.addEventListener(k,b),()=>e.removeEventListener(k,b)}),[g,r.onSelect,r.disabled]),!g)return null;let{disabled:w,value:x,onSelect:E,forceMount:S,keywords:I,...N}=r;return u.createElement(t.div,{ref:i(c,n),...N,id:o,"cmdk-item":"",role:"option","aria-disabled":!!w,"aria-selected":!!h,"data-disabled":!!w,"data-selected":!!h,onPointerMove:w||s.getDisablePointerSelection()?void 0:y,onClick:w?void 0:b},r.children)})),P=u.forwardRef(((r,n)=>{let{heading:l,children:a,forceMount:o,...c}=r,d=e(),s=u.useRef(null),f=u.useRef(null),m=e(),p=R(),v=H((e=>!(!o&&!1!==p.filter())||(!e.search||e.filtered.groups.has(d))));G((()=>p.group(d)),[]),W(d,s,[r.value,r.heading,f]);let h=u.useMemo((()=>({id:d,forceMount:o})),[o]);return u.createElement(t.div,{ref:i(s,n),...c,"cmdk-group":"",role:"presentation",hidden:!v||void 0},l&&u.createElement("div",{ref:f,"cmdk-group-heading":"","aria-hidden":!0,id:m},l),Q(r,(e=>u.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":l?m:void 0},u.createElement(j.Provider,{value:h},e)))))})),F=u.forwardRef(((e,r)=>{let{alwaysRender:n,...l}=e,a=u.useRef(null),o=H((e=>!e.search));return n||o?u.createElement(t.div,{ref:i(a,r),...l,"cmdk-separator":"",role:"separator"}):null})),L=u.forwardRef(((e,r)=>{let{onValueChange:n,...l}=e,a=null!=e.value,i=A(),o=H((e=>e.search)),c=H((e=>e.selectedItemId)),d=R();return u.useEffect((()=>{null!=e.value&&i.setState("search",e.value)}),[e.value]),u.createElement(t.input,{ref:r,...l,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":d.listId,"aria-labelledby":d.labelId,"aria-activedescendant":c,id:d.inputId,type:"text",value:a?e.value:o,onChange:e=>{a||i.setState("search",e.target.value),null==n||n(e.target.value)}})})),$=u.forwardRef(((e,r)=>{let{children:n,label:l="Suggestions",...a}=e,o=u.useRef(null),c=u.useRef(null),d=H((e=>e.selectedItemId)),s=R();return u.useEffect((()=>{if(c.current&&o.current){let e,t=c.current,r=o.current,n=new ResizeObserver((()=>{e=requestAnimationFrame((()=>{let e=t.offsetHeight;r.style.setProperty("--cmdk-list-height",e.toFixed(1)+"px")}))}));return n.observe(t),()=>{cancelAnimationFrame(e),n.unobserve(t)}}}),[]),u.createElement(t.div,{ref:i(o,r),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":d,"aria-label":l,id:s.listId},Q(e,(e=>u.createElement("div",{ref:i(c,s.listInnerRef),"cmdk-list-sizer":""},e))))})),K=u.forwardRef(((e,t)=>{let{open:i,onOpenChange:o,overlayClassName:c,contentClassName:d,container:s,...f}=e;return u.createElement(r,{open:i,onOpenChange:o},u.createElement(n,{container:s},u.createElement(l,{"cmdk-overlay":"",className:c}),u.createElement(a,{"aria-label":e.label,"cmdk-dialog":"",className:d},u.createElement(M,{ref:t,...f}))))})),O=u.forwardRef(((e,r)=>H((e=>0===e.filtered.count))?u.createElement(t.div,{ref:r,...e,"cmdk-empty":"",role:"presentation"}):null)),V=u.forwardRef(((e,r)=>{let{progress:n,children:l,label:a="Loading...",...i}=e;return u.createElement(t.div,{ref:r,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},Q(e,(e=>u.createElement("div",{"aria-hidden":!0},e))))})),_=Object.assign(M,{List:$,Item:D,Input:L,Group:P,Separator:F,Dialog:K,Empty:O,Loading:V});function q(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function B(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function z(e){let t=u.useRef(e);return G((()=>{t.current=e})),t}var G="undefined"==typeof window?u.useEffect:u.useLayoutEffect;function U(e){let t=u.useRef();return void 0===t.current&&(t.current=e()),t}function H(e){let t=A(),r=()=>e(t.snapshot());return u.useSyncExternalStore(t.subscribe,r,r)}function W(e,t,r,n=[]){let l=u.useRef(),a=R();return G((()=>{var i;let o=(()=>{var e;for(let t of r){if("string"==typeof t)return t.trim();if("object"==typeof t&&"current"in t)return t.current?null==(e=t.current.textContent)?void 0:e.trim():l.current}})(),u=n.map((e=>e.trim()));a.value(e,o,u),null==(i=t.current)||i.setAttribute(S,o),l.current=o})),l}var J=()=>{let[e,t]=u.useState(),r=U((()=>new Map));return G((()=>{r.current.forEach((e=>e())),r.current=new Map}),[e]),(e,n)=>{r.current.set(e,n),t({})}};function Q({asChild:e,children:t},r){return e&&u.isValidElement(t)?u.cloneElement(function(e){let t=e.type;return"function"==typeof t?t(e.props):"render"in t?t.render(e.props):e}(t),{ref:t.ref},r(t.props.children)):r(t)}var T={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const X=u.forwardRef((({className:e,...t},r)=>o.jsx(_,{ref:r,className:c("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t})));X.displayName=_.displayName;const Y=u.forwardRef((({className:e,...t},r)=>o.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[o.jsx(d,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),o.jsx(_.Input,{ref:r,className:c("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]})));Y.displayName=_.Input.displayName;const Z=u.forwardRef((({className:e,...t},r)=>o.jsx(_.List,{ref:r,className:c("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t})));Z.displayName=_.List.displayName;const ee=u.forwardRef(((e,t)=>o.jsx(_.Empty,{ref:t,className:"py-6 text-center text-sm",...e})));ee.displayName=_.Empty.displayName;const te=u.forwardRef((({className:e,...t},r)=>o.jsx(_.Group,{ref:r,className:c("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t})));te.displayName=_.Group.displayName;u.forwardRef((({className:e,...t},r)=>o.jsx(_.Separator,{ref:r,className:c("-mx-1 h-px bg-border",e),...t}))).displayName=_.Separator.displayName;const re=u.forwardRef((({className:e,...t},r)=>o.jsx(_.Item,{ref:r,className:c("relative flex cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none",e),...t})));re.displayName=_.Item.displayName;export{X as C,Y as a,Z as b,ee as c,te as d,re as e};
