const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Login-BstxQBGJ.js","assets/ui-B5ZVMT00.js","assets/router-Cgxi-4fo.js","assets/react-0RZ2pslC.js","assets/PageTransition-VfXE8qa3.js","assets/query-DUefEkVx.js","assets/charts-D4j3G6dB.js","assets/Register-BMjVpW_c.js","assets/phone-input-DCGTECnH.js","assets/label-BeIoYhEn.js","assets/index-CuqQreUV.js","assets/command-2vnsAFG8.js","assets/chevrons-up-down-k09gkze_.js","assets/api-DR4_m097.js","assets/checkbox-CP9KwOcj.js","assets/RegisterUtils-BcwBG7D4.js","assets/eye-Bd-a3bra.js","assets/Register-CfQFlFvz.css","assets/RegistrationSuccess-C_rhmQlA.js","assets/circle-check-big-DBkrVvVw.js","assets/VerificationSuccess-BYUa2Xi3.js","assets/VerificationError-Cold5Jo6.js","assets/ResetPasswordRequest-BKSjLXap.js","assets/input-CYXRhd_2.js","assets/ResetPasswordConfirmation-CEvnfA7T.js","assets/ResetPassword-DtpGBR2d.js","assets/SettingsProfile-CgDI2EeC.js","assets/upload-DzTZlfA_.js","assets/trash-2-B76nYt4Z.js","assets/separator-BemeGIRI.js","assets/JobSeekingSettings-CBEB7Xs8.js","assets/pencil-q-FdVFCj.js","assets/download-BWmU2Q2-.js","assets/circle-alert-DuxHPlDS.js","assets/switch-DjGhzjZ0.js","assets/phone-BwYMP0UB.js","assets/SecuritySettings-CpNDGnJ8.js","assets/alert-Cf7jkOrV.js","assets/ProfileSettingsSkeleton-BQrBevcQ.js","assets/NotificationSettings-Cp0RURWp.js","assets/CareerSettings-vGbgz5jp.js","assets/ProfileView-3gyU2kJk.js","assets/Dashboard-Cb_NI0J0.js","assets/DashboardLayout-Hc0XqfYt.js","assets/Trombinoscope-B_Nh6ZtF.js","assets/list-CBEE_czH.js","assets/Dashboard-BuJMTo4L.js","assets/useDashboardQueries-DPql9498.js","assets/Dashboard-BZiphXug.js","assets/user-check-B3HJsMKx.js","assets/chart-column-VzDnuile.js","assets/zap-BJp-7B_z.js","assets/Schedule-DvS1cizn.js","assets/scroll-area-ioyzVQGS.js","assets/index-jVOyRz7F.js","assets/arrow-left-BUhVWH14.js","assets/Grades-D-9axuBS.js","assets/table-C9FqSl6Q.js","assets/trending-up-AkUkgc3p.js","assets/Absences-CnZ8IFps.js","assets/select-TM9Oua8T.js","assets/Projects-g3hOOClZ.js","assets/Attendance-BES7rWjK.js","assets/DocumentSignature-ChKrG7Hd.js","assets/SignatureHistory-leiJ7aVM.js","assets/clipboard-check-B8qxK3x3.js","assets/Dashboard-_SwM5cTN.js","assets/SignatureMonitoring-BoJx1yLx.js","assets/Attendance-BYD268jX.js","assets/SignatureHistory-DA2royHw.js","assets/TeacherFormationList-C7Tc7RrR.js","assets/formationTeacher.service-_PG3wvHK.js","assets/TeacherFormationDetails-DB-4Qirq.js","assets/Dashboard-X7Ft8Cn5.js","assets/Dashboard-DiFJTaAb.js","assets/Dashboard-BbnEARVb.js","assets/Dashboard-CMx5jeLI.js","assets/FormationTable-wbZgajoY.js","assets/triangle-alert-Dyq46CFs.js","assets/GuestStudentRoleManager-BB2Eyn4R.js","assets/UserRoleManager-C-eYOn3Y.js","assets/filter-PILtDRIy.js","assets/FormationFinder-Ceh5h5Cw.js","assets/AdminFormationsView-BLhiJyra.js","assets/WebDevelopment-Cu0wHrLA.js","assets/FormationLayout-CvoEg09F.js","assets/Cybersecurity-FCiBM2Ln.js","assets/ArtificialIntelligence-CmVtT9We.js","assets/DataScience-LbYL0qk_.js","assets/MobileDevelopment-B5qm2z-9.js","assets/GameDevelopment-Jsqk5ViU.js","assets/Games-CYb5ax9F.js","assets/NotificationsPage-DmXcqnAX.js","assets/HomePage-DUnnPEFQ.js","assets/Home-B7mPYKbJ.js","assets/TicketList-Cq3uCqvW.js","assets/TicketForm-r3VGZHXg.js","assets/TicketDetail-Dx9MPONb.js","assets/TicketServiceList-BdlEr71n.js","assets/FormationForm-BWtQFpLM.js","assets/textarea-pNSuEHpF.js","assets/EditFormationForm-C-sguUYp.js","assets/index-B1TacQy-.js","assets/EnrollmentRequests-M1H6IIoU.js","assets/FormationDetails-Dj9mw7gP.js","assets/MyFormation-B77Azp-E.js","assets/EnrollmentRequests-CflnxQDe.js"])))=>i.map(i=>d[i]);
import{j as e,S as t,R as n,a as r,b as s,P as a,C as i,I as o,c as l,d as c,e as u,L as d,f as h,T as f,O as m,g as p,h as g,i as y,D as v,k as b,l as x,m as w,n as E,o as k,u as S,p as N,q as T,r as C,s as j,t as R,v as A,w as _,x as D,y as I,z as P,F as M,A as L,B as O,E as U,G as F,H as z,J as V,K as B,M as q,N as $,Q as H,U as W,V as G,W as K}from"./ui-B5ZVMT00.js";import{r as Q,a as X}from"./react-0RZ2pslC.js";import{r as Y,b as J,c as Z,u as ee,L as te,a as ne,d as re,N as se,O as ae,e as ie,f as oe,g as le,B as ce}from"./router-Cgxi-4fo.js";import{Q as ue,u as de,a as he,b as fe,c as me}from"./query-DUefEkVx.js";import{c as pe}from"./charts-D4j3G6dB.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var ge,ye,ve,be,xe={exports:{}},we={},Ee={exports:{}},ke={};function Se(){return ye||(ye=1,Ee.exports=(ge||(ge=1,function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<s(a,t)))break e;e[r]=t,e[n]=a,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,i=a>>>1;r<i;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<a&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<a&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var l=[],c=[],u=1,d=null,h=3,f=!1,m=!1,p=!1,g=!1,y="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function x(e){for(var s=n(c);null!==s;){if(null===s.callback)r(c);else{if(!(s.startTime<=e))break;r(c),s.sortIndex=s.expirationTime,t(l,s)}s=n(c)}}function w(e){if(p=!1,x(e),!m)if(null!==n(l))m=!0,k||(k=!0,E());else{var t=n(c);null!==t&&_(w,t.startTime-e)}}var E,k=!1,S=-1,N=5,T=-1;function C(){return!(!g&&e.unstable_now()-T<N)}function j(){if(g=!1,k){var t=e.unstable_now();T=t;var s=!0;try{e:{m=!1,p&&(p=!1,v(S),S=-1),f=!0;var a=h;try{t:{for(x(t),d=n(l);null!==d&&!(d.expirationTime>t&&C());){var i=d.callback;if("function"==typeof i){d.callback=null,h=d.priorityLevel;var o=i(d.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof o){d.callback=o,x(t),s=!0;break t}d===n(l)&&r(l),x(t)}else r(l);d=n(l)}if(null!==d)s=!0;else{var u=n(c);null!==u&&_(w,u.startTime-t),s=!1}}break e}finally{d=null,h=a,f=!1}s=void 0}}finally{s?E():k=!1}}}if("function"==typeof b)E=function(){b(j)};else if("undefined"!=typeof MessageChannel){var R=new MessageChannel,A=R.port2;R.port1.onmessage=j,E=function(){A.postMessage(null)}}else E=function(){y(j,0)};function _(t,n){S=y((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(r,s,a){var i=e.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?i+a:i,r){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return r={id:u++,callback:s,priorityLevel:r,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>i?(r.sortIndex=a,t(c,r),null===n(l)&&r===n(c)&&(p?(v(S),S=-1):p=!0,_(w,a-i))):(r.sortIndex=o,t(l,r),m||f||(m=!0,k||(k=!0,E()))),r},e.unstable_shouldYield=C,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(ke)),ke)),Ee.exports}
/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function Ne(){if(ve)return we;ve=1;var e=Se(),t=Q(),n=X();function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function a(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function i(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function o(e){if(a(e)!==e)throw Error(r(188))}function l(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=l(e)))return t;e=e.sibling}return null}var c=Object.assign,u=Symbol.for("react.element"),d=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),y=Symbol.for("react.consumer"),v=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),T=Symbol.iterator;function C(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=T&&e[T]||e["@@iterator"])?e:null}var j=Symbol.for("react.client.reference");function R(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===j?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case f:return"Fragment";case p:return"Profiler";case m:return"StrictMode";case x:return"Suspense";case w:return"SuspenseList";case S:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case h:return"Portal";case v:return(e.displayName||"Context")+".Provider";case y:return(e._context.displayName||"Context")+".Consumer";case b:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case E:return null!==(t=e.displayName||null)?t:R(e.type)||"Memo";case k:t=e._payload,e=e._init;try{return R(e(t))}catch(LR){}}return null}var A=Array.isArray,_=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I={pending:!1,data:null,method:null,action:null},P=[],M=-1;function L(e){return{current:e}}function O(e){0>M||(e.current=P[M],P[M]=null,M--)}function U(e,t){M++,P[M]=e.current,e.current=t}var F=L(null),z=L(null),V=L(null),B=L(null);function q(e,t){switch(U(V,t),U(z,e),U(F,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?id(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=od(t=id(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}O(F),U(F,e)}function $(){O(F),O(z),O(V)}function H(e){null!==e.memoizedState&&U(B,e);var t=F.current,n=od(t,e.type);t!==n&&(U(z,e),U(F,n))}function W(e){z.current===e&&(O(F),O(z)),B.current===e&&(O(B),Xd._currentValue=I)}var G=Object.prototype.hasOwnProperty,K=e.unstable_scheduleCallback,Y=e.unstable_cancelCallback,J=e.unstable_shouldYield,Z=e.unstable_requestPaint,ee=e.unstable_now,te=e.unstable_getCurrentPriorityLevel,ne=e.unstable_ImmediatePriority,re=e.unstable_UserBlockingPriority,se=e.unstable_NormalPriority,ae=e.unstable_LowPriority,ie=e.unstable_IdlePriority,oe=e.log,le=e.unstable_setDisableYieldValue,ce=null,ue=null;function de(e){if("function"==typeof oe&&le(e),ue&&"function"==typeof ue.setStrictMode)try{ue.setStrictMode(ce,e)}catch(t){}}var he=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(fe(e)/me|0)|0},fe=Math.log,me=Math.LN2;var pe=256,ge=4194304;function ye(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var s=0,a=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~a)?s=ye(r):0!==(i&=o)?s=ye(i):n||0!==(n=o&~e)&&(s=ye(n)):0!==(o=r&~a)?s=ye(o):0!==i?s=ye(i):n||0!==(n=r&~e)&&(s=ye(n)),0===s?0:0!==t&&t!==s&&!(t&a)&&((a=s&-s)>=(n=t&-t)||32===a&&4194048&n)?t:s}function xe(e,t){return!(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ee(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ke(){var e=pe;return!(4194048&(pe<<=1))&&(pe=256),e}function Ne(){var e=ge;return!(62914560&(ge<<=1))&&(ge=4194304),e}function Te(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ce(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function je(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-he(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Re(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-he(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}function Ae(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function _e(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function De(){var e=D.p;return 0!==e?e:void 0===(e=window.event)?32:dh(e.type)}var Ie=Math.random().toString(36).slice(2),Pe="__reactFiber$"+Ie,Me="__reactProps$"+Ie,Le="__reactContainer$"+Ie,Oe="__reactEvents$"+Ie,Ue="__reactListeners$"+Ie,Fe="__reactHandles$"+Ie,ze="__reactResources$"+Ie,Ve="__reactMarker$"+Ie;function Be(e){delete e[Pe],delete e[Me],delete e[Oe],delete e[Ue],delete e[Fe]}function qe(e){var t=e[Pe];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Le]||n[Pe]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=wd(e);null!==e;){if(n=e[Pe])return n;e=wd(e)}return t}n=(e=n).parentNode}return null}function $e(e){if(e=e[Pe]||e[Le]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function He(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(r(33))}function We(e){var t=e[ze];return t||(t=e[ze]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ge(e){e[Ve]=!0}var Ke=new Set,Qe={};function Xe(e,t){Ye(e,t),Ye(e+"Capture",t)}function Ye(e,t){for(Qe[e]=t,e=0;e<t.length;e++)Ke.add(t[e])}var Je,Ze,et=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tt={},nt={};function rt(e,t,n){if(s=t,G.call(nt,s)||!G.call(tt,s)&&(et.test(s)?nt[s]=!0:(tt[s]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var s}function st(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function at(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function it(e){if(void 0===Je)try{throw Error()}catch(LR){var t=LR.stack.trim().match(/\n( *(at )?)/);Je=t&&t[1]||"",Ze=-1<LR.stack.indexOf("\n    at")?" (<anonymous>)":-1<LR.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Je+e+Ze}var ot=!1;function lt(e,t){if(!e||ot)return"";ot=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(LR){var r=LR}Reflect.construct(e,[],n)}else{try{n.call()}catch(s){r=s}e.call(n.prototype)}}else{try{throw Error()}catch(a){r=a}(n=e())&&"function"==typeof n.catch&&n.catch((function(){}))}}catch(i){if(i&&r&&"string"==typeof i.stack)return[i.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=r.DetermineComponentFrameRoot(),i=a[0],o=a[1];if(i&&o){var l=i.split("\n"),c=o.split("\n");for(s=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(r===l.length||s===c.length)for(r=l.length-1,s=c.length-1;1<=r&&0<=s&&l[r]!==c[s];)s--;for(;1<=r&&0<=s;r--,s--)if(l[r]!==c[s]){if(1!==r||1!==s)do{if(r--,0>--s||l[r]!==c[s]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=s);break}}}finally{ot=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?it(n):""}function ct(e){switch(e.tag){case 26:case 27:case 5:return it(e.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return lt(e.type,!1);case 11:return lt(e.type.render,!1);case 1:return lt(e.type,!0);case 31:return it("Activity");default:return""}}function ut(e){try{var t="";do{t+=ct(e),e=e.return}while(e);return t}catch(LR){return"\nError generating stack: "+LR.message+"\n"+LR.stack}}function dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ht(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ft(e){e._valueTracker||(e._valueTracker=function(e){var t=ht(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var s=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function mt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ht(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function pt(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function yt(e){return e.replace(gt,(function(e){return"\\"+e.charCodeAt(0).toString(16)+" "}))}function vt(e,t,n,r,s,a,i,o){e.name="",null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&"boolean"!=typeof i?e.type=i:e.removeAttribute("type"),null!=t?"number"===i?(0===t&&""===e.value||e.value!=t)&&(e.value=""+dt(t)):e.value!==""+dt(t)&&(e.value=""+dt(t)):"submit"!==i&&"reset"!==i||e.removeAttribute("value"),null!=t?xt(e,i,dt(t)):null!=n?xt(e,i,dt(n)):null!=r&&e.removeAttribute("value"),null==s&&null!=a&&(e.defaultChecked=!!a),null!=s&&(e.checked=s&&"function"!=typeof s&&"symbol"!=typeof s),null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o?e.name=""+dt(o):e.removeAttribute("name")}function bt(e,t,n,r,s,a,i,o){if(null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a&&(e.type=a),null!=t||null!=n){if(("submit"===a||"reset"===a)&&null==t)return;n=null!=n?""+dt(n):"",t=null!=t?""+dt(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!=typeof(r=null!=r?r:s)&&"symbol"!=typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&"boolean"!=typeof i&&(e.name=i)}function xt(e,t,n){"number"===t&&pt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function wt(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+dt(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function Et(e,t,n){null==t||((t=""+dt(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+dt(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function kt(e,t,n,s){if(null==t){if(null!=s){if(null!=n)throw Error(r(92));if(A(s)){if(1<s.length)throw Error(r(93));s=s[0]}n=s}null==n&&(n=""),t=n}n=dt(t),e.defaultValue=n,(s=e.textContent)===n&&""!==s&&null!==s&&(e.value=s)}function St(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Nt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"==typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!=typeof n||0===n||Nt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Ct(e,t,n){if(null!=t&&"object"!=typeof t)throw Error(r(62));if(e=e.style,null!=n){for(var s in n)!n.hasOwnProperty(s)||null!=t&&t.hasOwnProperty(s)||(0===s.indexOf("--")?e.setProperty(s,""):"float"===s?e.cssFloat="":e[s]="");for(var a in t)s=t[a],t.hasOwnProperty(a)&&n[a]!==s&&Tt(e,a,s)}else for(var i in t)t.hasOwnProperty(i)&&Tt(e,i,t[i])}function jt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),At=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _t(e){return At.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Dt=null;function It(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Pt=null,Mt=null;function Lt(e){var t=$e(e);if(t&&(e=t.stateNode)){var n=e[Me]||null;e:switch(e=t.stateNode,t.type){case"input":if(vt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+yt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var a=s[Me]||null;if(!a)throw Error(r(90));vt(s,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)(s=n[t]).form===e.form&&mt(s)}break e;case"textarea":Et(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&wt(e,!!n.multiple,t,!1)}}}var Ot=!1;function Ut(e,t,n){if(Ot)return e(t,n);Ot=!0;try{return e(t)}finally{if(Ot=!1,(null!==Pt||null!==Mt)&&(qc(),Pt&&(t=Pt,e=Mt,Mt=Pt=null,Lt(t),e)))for(t=0;t<e.length;t++)Lt(e[t])}}function Ft(e,t){var n=e.stateNode;if(null===n)return null;var s=n[Me]||null;if(null===s)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(s=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!s;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(r(231,t,typeof n));return n}var zt=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Vt=!1;if(zt)try{var Bt={};Object.defineProperty(Bt,"passive",{get:function(){Vt=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch(Mh){Vt=!1}var qt=null,$t=null,Ht=null;function Wt(){if(Ht)return Ht;var e,t,n=$t,r=n.length,s="value"in qt?qt.value:qt.textContent,a=s.length;for(e=0;e<r&&n[e]===s[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===s[a-t];t++);return Ht=s.slice(e,1<t?1-t:void 0)}function Gt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Kt(){return!0}function Qt(){return!1}function Xt(e){function t(t,n,r,s,a){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(s):s[i]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?Kt:Qt,this.isPropagationStopped=Qt,this}return c(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Kt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Kt)},persist:function(){},isPersistent:Kt}),t}var Yt,Jt,Zt,en={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tn=Xt(en),nn=c({},en,{view:0,detail:0}),rn=Xt(nn),sn=c({},nn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zt&&(Zt&&"mousemove"===e.type?(Yt=e.screenX-Zt.screenX,Jt=e.screenY-Zt.screenY):Jt=Yt=0,Zt=e),Yt)},movementY:function(e){return"movementY"in e?e.movementY:Jt}}),an=Xt(sn),on=Xt(c({},sn,{dataTransfer:0})),ln=Xt(c({},nn,{relatedTarget:0})),cn=Xt(c({},en,{animationName:0,elapsedTime:0,pseudoElement:0})),un=Xt(c({},en,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),dn=Xt(c({},en,{data:0})),hn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=mn[e])&&!!t[e]}function gn(){return pn}var yn=Xt(c({},nn,{key:function(e){if(e.key){var t=hn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Gt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?fn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gn,charCode:function(e){return"keypress"===e.type?Gt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Gt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),vn=Xt(c({},sn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),bn=Xt(c({},nn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gn})),xn=Xt(c({},en,{propertyName:0,elapsedTime:0,pseudoElement:0})),wn=Xt(c({},sn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),En=Xt(c({},en,{newState:0,oldState:0})),kn=[9,13,27,32],Sn=zt&&"CompositionEvent"in window,Nn=null;zt&&"documentMode"in document&&(Nn=document.documentMode);var Tn=zt&&"TextEvent"in window&&!Nn,Cn=zt&&(!Sn||Nn&&8<Nn&&11>=Nn),jn=String.fromCharCode(32),Rn=!1;function An(e,t){switch(e){case"keyup":return-1!==kn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _n(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Dn=!1;var In={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!In[e.type]:"textarea"===t}function Mn(e,t,n,r){Pt?Mt?Mt.push(r):Mt=[r]:Pt=r,0<(t=Wu(t,"onChange")).length&&(n=new tn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ln=null,On=null;function Un(e){Uu(e,0)}function Fn(e){if(mt(He(e)))return e}function zn(e,t){if("change"===e)return t}var Vn=!1;if(zt){var Bn;if(zt){var qn="oninput"in document;if(!qn){var $n=document.createElement("div");$n.setAttribute("oninput","return;"),qn="function"==typeof $n.oninput}Bn=qn}else Bn=!1;Vn=Bn&&(!document.documentMode||9<document.documentMode)}function Hn(){Ln&&(Ln.detachEvent("onpropertychange",Wn),On=Ln=null)}function Wn(e){if("value"===e.propertyName&&Fn(On)){var t=[];Mn(t,On,e,It(e)),Ut(Un,t)}}function Gn(e,t,n){"focusin"===e?(Hn(),On=n,(Ln=t).attachEvent("onpropertychange",Wn)):"focusout"===e&&Hn()}function Kn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Fn(On)}function Qn(e,t){if("click"===e)return Fn(t)}function Xn(e,t){if("input"===e||"change"===e)return Fn(t)}var Yn="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function Jn(e,t){if(Yn(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!G.call(t,s)||!Yn(e[s],t[s]))return!1}return!0}function Zn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function er(e,t){var n,r=Zn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Zn(r)}}function tr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?tr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function nr(e){for(var t=pt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=pt((e=t.contentWindow).document)}return t}function rr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var sr=zt&&"documentMode"in document&&11>=document.documentMode,ar=null,ir=null,or=null,lr=!1;function cr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;lr||null==ar||ar!==pt(r)||("selectionStart"in(r=ar)&&rr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},or&&Jn(or,r)||(or=r,0<(r=Wu(ir,"onSelect")).length&&(t=new tn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ar)))}function ur(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var dr={animationend:ur("Animation","AnimationEnd"),animationiteration:ur("Animation","AnimationIteration"),animationstart:ur("Animation","AnimationStart"),transitionrun:ur("Transition","TransitionRun"),transitionstart:ur("Transition","TransitionStart"),transitioncancel:ur("Transition","TransitionCancel"),transitionend:ur("Transition","TransitionEnd")},hr={},fr={};function mr(e){if(hr[e])return hr[e];if(!dr[e])return e;var t,n=dr[e];for(t in n)if(n.hasOwnProperty(t)&&t in fr)return hr[e]=n[t];return e}zt&&(fr=document.createElement("div").style,"AnimationEvent"in window||(delete dr.animationend.animation,delete dr.animationiteration.animation,delete dr.animationstart.animation),"TransitionEvent"in window||delete dr.transitionend.transition);var pr=mr("animationend"),gr=mr("animationiteration"),yr=mr("animationstart"),vr=mr("transitionrun"),br=mr("transitionstart"),xr=mr("transitioncancel"),wr=mr("transitionend"),Er=new Map,kr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(e,t){Er.set(e,t),Xe(t,[e])}kr.push("scrollEnd");var Nr=new WeakMap;function Tr(e,t){if("object"==typeof e&&null!==e){var n=Nr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ut(t)},Nr.set(e,t),t)}return{value:e,source:t,stack:ut(t)}}var Cr=[],jr=0,Rr=0;function Ar(){for(var e=jr,t=Rr=jr=0;t<e;){var n=Cr[t];Cr[t++]=null;var r=Cr[t];Cr[t++]=null;var s=Cr[t];Cr[t++]=null;var a=Cr[t];if(Cr[t++]=null,null!==r&&null!==s){var i=r.pending;null===i?s.next=s:(s.next=i.next,i.next=s),r.pending=s}0!==a&&Pr(n,s,a)}}function _r(e,t,n,r){Cr[jr++]=e,Cr[jr++]=t,Cr[jr++]=n,Cr[jr++]=r,Rr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Dr(e,t,n,r){return _r(e,t,n,r),Mr(e)}function Ir(e,t){return _r(e,null,null,t),Mr(e)}function Pr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var s=!1,a=e.return;null!==a;)a.childLanes|=n,null!==(r=a.alternate)&&(r.childLanes|=n),22===a.tag&&(null===(e=a.stateNode)||1&e._visibility||(s=!0)),e=a,a=a.return;return 3===e.tag?(a=e.stateNode,s&&null!==t&&(s=31-he(n),null===(r=(e=a.hiddenUpdates)[s])?e[s]=[t]:r.push(t),t.lane=536870912|n),a):null}function Mr(e){if(50<Pc)throw Pc=0,Mc=null,Error(r(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Lr={};function Or(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ur(e,t,n,r){return new Or(e,t,n,r)}function Fr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zr(e,t){var n=e.alternate;return null===n?((n=Ur(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Vr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Br(e,t,n,s,a,i){var o=0;if(s=e,"function"==typeof e)Fr(e)&&(o=1);else if("string"==typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,n,F.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case S:return(e=Ur(31,n,t,a)).elementType=S,e.lanes=i,e;case f:return qr(n.children,a,i,t);case m:o=8,a|=24;break;case p:return(e=Ur(12,n,t,2|a)).elementType=p,e.lanes=i,e;case x:return(e=Ur(13,n,t,a)).elementType=x,e.lanes=i,e;case w:return(e=Ur(19,n,t,a)).elementType=w,e.lanes=i,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case g:case v:o=10;break e;case y:o=9;break e;case b:o=11;break e;case E:o=14;break e;case k:o=16,s=null;break e}o=29,n=Error(r(130,null===e?"null":typeof e,"")),s=null}return(t=Ur(o,n,t,a)).elementType=e,t.type=s,t.lanes=i,t}function qr(e,t,n,r){return(e=Ur(7,e,r,t)).lanes=n,e}function $r(e,t,n){return(e=Ur(6,e,null,t)).lanes=n,e}function Hr(e,t,n){return(t=Ur(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Wr=[],Gr=0,Kr=null,Qr=0,Xr=[],Yr=0,Jr=null,Zr=1,es="";function ts(e,t){Wr[Gr++]=Qr,Wr[Gr++]=Kr,Kr=e,Qr=t}function ns(e,t,n){Xr[Yr++]=Zr,Xr[Yr++]=es,Xr[Yr++]=Jr,Jr=e;var r=Zr;e=es;var s=32-he(r)-1;r&=~(1<<s),n+=1;var a=32-he(t)+s;if(30<a){var i=s-s%5;a=(r&(1<<i)-1).toString(32),r>>=i,s-=i,Zr=1<<32-he(t)+s|n<<s|r,es=a+e}else Zr=1<<a|n<<s|r,es=e}function rs(e){null!==e.return&&(ts(e,1),ns(e,1,0))}function ss(e){for(;e===Kr;)Kr=Wr[--Gr],Wr[Gr]=null,Qr=Wr[--Gr],Wr[Gr]=null;for(;e===Jr;)Jr=Xr[--Yr],Xr[Yr]=null,es=Xr[--Yr],Xr[Yr]=null,Zr=Xr[--Yr],Xr[Yr]=null}var as=null,is=null,os=!1,ls=null,cs=!1,us=Error(r(519));function ds(e){throw ys(Tr(Error(r(418,"")),e)),us}function hs(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Pe]=e,t[Me]=r,n){case"dialog":Fu("cancel",t),Fu("close",t);break;case"iframe":case"object":case"embed":Fu("load",t);break;case"video":case"audio":for(n=0;n<Lu.length;n++)Fu(Lu[n],t);break;case"source":Fu("error",t);break;case"img":case"image":case"link":Fu("error",t),Fu("load",t);break;case"details":Fu("toggle",t);break;case"input":Fu("invalid",t),bt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),ft(t);break;case"select":Fu("invalid",t);break;case"textarea":Fu("invalid",t),kt(t,r.value,r.defaultValue,r.children),ft(t)}"string"!=typeof(n=r.children)&&"number"!=typeof n&&"bigint"!=typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Ju(t.textContent,n)?(null!=r.popover&&(Fu("beforetoggle",t),Fu("toggle",t)),null!=r.onScroll&&Fu("scroll",t),null!=r.onScrollEnd&&Fu("scrollend",t),null!=r.onClick&&(t.onclick=Zu),t=!0):t=!1,t||ds(e)}function fs(e){for(as=e.return;as;)switch(as.tag){case 5:case 13:return void(cs=!1);case 27:case 3:return void(cs=!0);default:as=as.return}}function ms(e){if(e!==as)return!1;if(!os)return fs(e),os=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ld(e.type,e.memoizedProps)),t=!t),t&&is&&ds(e),fs(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){is=bd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}is=null}}else 27===n?(n=is,pd(e.type)?(e=xd,xd=null,is=e):is=n):is=as?bd(e.stateNode.nextSibling):null;return!0}function ps(){is=as=null,os=!1}function gs(){var e=ls;return null!==e&&(null===wc?wc=e:wc.push.apply(wc,e),ls=null),e}function ys(e){null===ls?ls=[e]:ls.push(e)}var vs=L(null),bs=null,xs=null;function ws(e,t,n){U(vs,t._currentValue),t._currentValue=n}function Es(e){e._currentValue=vs.current,O(vs)}function ks(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ss(e,t,n,s){var a=e.child;for(null!==a&&(a.return=e);null!==a;){var i=a.dependencies;if(null!==i){var o=a.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=a;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),ks(i.return,n,e),s||(o=null);break e}i=l.next}}else if(18===a.tag){if(null===(o=a.return))throw Error(r(341));o.lanes|=n,null!==(i=o.alternate)&&(i.lanes|=n),ks(o,n,e),o=null}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===e){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}}function Ns(e,t,n,s){e=null;for(var a=t,i=!1;null!==a;){if(!i)if(524288&a.flags)i=!0;else if(262144&a.flags)break;if(10===a.tag){var o=a.alternate;if(null===o)throw Error(r(387));if(null!==(o=o.memoizedProps)){var l=a.type;Yn(a.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(a===B.current){if(null===(o=a.alternate))throw Error(r(387));o.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(null!==e?e.push(Xd):e=[Xd])}a=a.return}null!==e&&Ss(t,e,n,s),t.flags|=262144}function Ts(e){for(e=e.firstContext;null!==e;){if(!Yn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Cs(e){bs=e,xs=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function js(e){return As(bs,e)}function Rs(e,t){return null===bs&&Cs(e),As(e,t)}function As(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===xs){if(null===e)throw Error(r(308));xs=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else xs=xs.next=t;return n}var _s="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},Ds=e.unstable_scheduleCallback,Is=e.unstable_NormalPriority,Ps={$$typeof:v,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ms(){return{controller:new _s,data:new Map,refCount:0}}function Ls(e){e.refCount--,0===e.refCount&&Ds(Is,(function(){e.controller.abort()}))}var Os=null,Us=0,Fs=0,zs=null;function Vs(){if(0==--Us&&null!==Os){null!==zs&&(zs.status="fulfilled");var e=Os;Os=null,Fs=0,zs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Bs=_.S;_.S=function(e,t){"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===Os){var n=Os=[];Us=0,Fs=_u(),zs={status:"pending",value:void 0,then:function(e){n.push(e)}}}Us++,t.then(Vs,Vs)}(0,t),null!==Bs&&Bs(e,t)};var qs=L(null);function $s(){var e=qs.current;return null!==e?e:ac.pooledCache}function Hs(e,t){U(qs,null===t?qs.current:t.pool)}function Ws(){var e=$s();return null===e?null:{parent:Ps._currentValue,pool:e}}var Gs=Error(r(460)),Ks=Error(r(474)),Qs=Error(r(542)),Xs={then:function(){}};function Ys(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Js(){}function Zs(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Js,Js),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw na(e=t.reason),e;default:if("string"==typeof t.status)t.then(Js,Js);else{if(null!==(e=ac)&&100<e.shellSuspendCounter)throw Error(r(482));(e=t).status="pending",e.then((function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}}),(function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}}))}switch(t.status){case"fulfilled":return t.value;case"rejected":throw na(e=t.reason),e}throw ea=t,Gs}}var ea=null;function ta(){if(null===ea)throw Error(r(459));var e=ea;return ea=null,e}function na(e){if(e===Gs||e===Qs)throw Error(r(483))}var ra=!1;function sa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function aa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ia(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&sc){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,t=Mr(e),Pr(e,null,n),t}return _r(e,r,t,n),Mr(e)}function la(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Re(e,n)}}function ca(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var i={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===a?s=a=i:a=a.next=i,n=n.next}while(null!==n);null===a?s=a=t:a=a.next=t}else s=a=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ua=!1;function da(){if(ua){if(null!==zs)throw zs}}function ha(e,t,n,r){ua=!1;var s=e.updateQueue;ra=!1;var a=s.firstBaseUpdate,i=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,u=l.next;l.next=null,null===i?a=u:i.next=u,i=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===o?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=l))}if(null!==a){var h=s.baseState;for(i=0,d=u=l=null,o=a;;){var f=-536870913&o.lane,m=f!==o.lane;if(m?(oc&f)===f:(r&f)===f){0!==f&&f===Fs&&(ua=!0),null!==d&&(d=d.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var p=e,g=o;f=t;var y=n;switch(g.tag){case 1:if("function"==typeof(p=g.payload)){h=p.call(y,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(f="function"==typeof(p=g.payload)?p.call(y,h,f):p))break e;h=c({},h,f);break e;case 2:ra=!0}}null!==(f=o.callback)&&(e.flags|=64,m&&(e.flags|=8192),null===(m=s.callbacks)?s.callbacks=[f]:m.push(f))}else m={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(u=d=m,l=h):d=d.next=m,i|=f;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(m=o).next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}null===d&&(l=h),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=d,null===a&&(s.shared.lanes=0),pc|=i,e.lanes=i,e.memoizedState=h}}function fa(e,t){if("function"!=typeof e)throw Error(r(191,e));e.call(t)}function ma(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)fa(n[e],t)}var pa=L(null),ga=L(0);function ya(e,t){U(ga,e=fc),U(pa,t),fc=e|t.baseLanes}function va(){U(ga,fc),U(pa,pa.current)}function ba(){fc=ga.current,O(pa),O(ga)}var xa=0,wa=null,Ea=null,ka=null,Sa=!1,Na=!1,Ta=!1,Ca=0,ja=0,Ra=null,Aa=0;function _a(){throw Error(r(321))}function Da(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Yn(e[n],t[n]))return!1;return!0}function Ia(e,t,n,r,s,a){return xa=a,wa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_.H=null===e||null===e.memoizedState?Gi:Ki,Ta=!1,a=n(r,s),Ta=!1,Na&&(a=Ma(t,n,r,s)),Pa(e),a}function Pa(e){_.H=Wi;var t=null!==Ea&&null!==Ea.next;if(xa=0,ka=Ea=wa=null,Sa=!1,ja=0,Ra=null,t)throw Error(r(300));null===e||Ro||null!==(e=e.dependencies)&&Ts(e)&&(Ro=!0)}function Ma(e,t,n,s){wa=e;var a=0;do{if(Na&&(Ra=null),ja=0,Na=!1,25<=a)throw Error(r(301));if(a+=1,ka=Ea=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}_.H=Qi,i=t(n,s)}while(Na);return i}function La(){var e=_.H,t=e.useState()[0];return t="function"==typeof t.then?Ba(t):t,e=e.useState()[0],(null!==Ea?Ea.memoizedState:null)!==e&&(wa.flags|=1024),t}function Oa(){var e=0!==Ca;return Ca=0,e}function Ua(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Fa(e){if(Sa){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Sa=!1}xa=0,ka=Ea=wa=null,Na=!1,ja=Ca=0,Ra=null}function za(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ka?wa.memoizedState=ka=e:ka=ka.next=e,ka}function Va(){if(null===Ea){var e=wa.alternate;e=null!==e?e.memoizedState:null}else e=Ea.next;var t=null===ka?wa.memoizedState:ka.next;if(null!==t)ka=t,Ea=e;else{if(null===e){if(null===wa.alternate)throw Error(r(467));throw Error(r(310))}e={memoizedState:(Ea=e).memoizedState,baseState:Ea.baseState,baseQueue:Ea.baseQueue,queue:Ea.queue,next:null},null===ka?wa.memoizedState=ka=e:ka=ka.next=e}return ka}function Ba(e){var t=ja;return ja+=1,null===Ra&&(Ra=[]),e=Zs(Ra,e,t),t=wa,null===(null===ka?t.memoizedState:ka.next)&&(t=t.alternate,_.H=null===t||null===t.memoizedState?Gi:Ki),e}function qa(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return Ba(e);if(e.$$typeof===v)return js(e)}throw Error(r(438,String(e)))}function $a(e){var t=null,n=wa.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=wa.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map((function(e){return e.slice()})),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},wa.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=N;return t.index++,n}function Ha(e,t){return"function"==typeof t?t(e):t}function Wa(e){return Ga(Va(),Ea,e)}function Ga(e,t,n){var s=e.queue;if(null===s)throw Error(r(311));s.lastRenderedReducer=n;var a=e.baseQueue,i=s.pending;if(null!==i){if(null!==a){var o=a.next;a.next=i.next,i.next=o}t.baseQueue=a=i,s.pending=null}if(i=e.baseState,null===a)e.memoizedState=i;else{var l=o=null,c=null,u=t=a.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(oc&h)===h:(xa&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Fs&&(d=!0);else{if((xa&f)===f){u=u.next,f===Fs&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=i):c=c.next=h,wa.lanes|=f,pc|=f}h=u.action,Ta&&n(i,h),i=u.hasEagerState?u.eagerState:n(i,h)}else f={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,o=i):c=c.next=f,wa.lanes|=h,pc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=i:c.next=l,!Yn(i,e.memoizedState)&&(Ro=!0,d&&null!==(n=zs)))throw n;e.memoizedState=i,e.baseState=o,e.baseQueue=c,s.lastRenderedState=i}return null===a&&(s.lanes=0),[e.memoizedState,s.dispatch]}function Ka(e){var t=Va(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var s=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var o=a=a.next;do{i=e(i,o.action),o=o.next}while(o!==a);Yn(i,t.memoizedState)||(Ro=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,s]}function Qa(e,t,n){var s=wa,a=Va(),i=os;if(i){if(void 0===n)throw Error(r(407));n=n()}else n=t();var o=!Yn((Ea||a).memoizedState,n);if(o&&(a.memoizedState=n,Ro=!0),a=a.queue,vi(2048,8,Ja.bind(null,s,a,e),[e]),a.getSnapshot!==t||o||null!==ka&&1&ka.memoizedState.tag){if(s.flags|=2048,pi(9,{destroy:void 0,resource:void 0},Ya.bind(null,s,a,n,t),null),null===ac)throw Error(r(349));i||124&xa||Xa(s,t,n)}return n}function Xa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=wa.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},wa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ya(e,t,n,r){t.value=n,t.getSnapshot=r,Za(t)&&ei(e)}function Ja(e,t,n){return n((function(){Za(t)&&ei(e)}))}function Za(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Yn(e,n)}catch(r){return!0}}function ei(e){var t=Ir(e,2);null!==t&&Uc(t,e,2)}function ti(e){var t=za();if("function"==typeof e){var n=e;if(e=n(),Ta){de(!0);try{n()}finally{de(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:e},t}function ni(e,t,n,r){return e.baseState=n,Ga(e,Ea,"function"==typeof r?r:Ha)}function ri(e,t,n,s,a){if(qi(e))throw Error(r(485));if(null!==(e=t.action)){var i={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==_.T?n(!0):i.isTransition=!1,s(i),null===(n=t.pending)?(i.next=t.pending=i,si(t,i)):(i.next=n.next,t.pending=n.next=i)}}function si(e,t){var n=t.action,r=t.payload,s=e.state;if(t.isTransition){var a=_.T,i={};_.T=i;try{var o=n(s,r),l=_.S;null!==l&&l(i,o),ai(e,t,o)}catch(c){oi(e,t,c)}finally{_.T=a}}else try{ai(e,t,a=n(s,r))}catch(u){oi(e,t,u)}}function ai(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then((function(n){ii(e,t,n)}),(function(n){return oi(e,t,n)})):ii(e,t,n)}function ii(e,t,n){t.status="fulfilled",t.value=n,li(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,si(e,n)))}function oi(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,li(t),t=t.next}while(t!==r)}e.action=null}function li(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ci(e,t){return t}function ui(e,t){if(os){var n=ac.formState;if(null!==n){e:{var r=wa;if(os){if(is){t:{for(var s=is,a=cs;8!==s.nodeType;){if(!a){s=null;break t}if(null===(s=bd(s.nextSibling))){s=null;break t}}s="F!"===(a=s.data)||"F"===a?s:null}if(s){is=bd(s.nextSibling),r="F!"===s.data;break e}}ds(r)}r=!1}r&&(t=n[0])}}return(n=za()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:t},n.queue=r,n=zi.bind(null,wa,r),r.dispatch=n,r=ti(!1),a=Bi.bind(null,wa,!1,r.queue),s={state:t,dispatch:null,action:e,pending:null},(r=za()).queue=s,n=ri.bind(null,wa,s,a,n),s.dispatch=n,r.memoizedState=e,[t,n,!1]}function di(e){return hi(Va(),Ea,e)}function hi(e,t,n){if(t=Ga(e,t,ci)[0],e=Wa(Ha)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var r=Ba(t)}catch(LR){if(LR===Gs)throw Qs;throw LR}else r=t;var s=(t=Va()).queue,a=s.dispatch;return n!==t.memoizedState&&(wa.flags|=2048,pi(9,{destroy:void 0,resource:void 0},fi.bind(null,s,n),null)),[r,a,e]}function fi(e,t){e.action=t}function mi(e){var t=Va(),n=Ea;if(null!==n)return hi(t,n,e);Va(),t=t.memoizedState;var r=(n=Va()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function pi(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=wa.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},wa.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function gi(){return Va().memoizedState}function yi(e,t,n,r){var s=za();r=void 0===r?null:r,wa.flags|=e,s.memoizedState=pi(1|t,{destroy:void 0,resource:void 0},n,r)}function vi(e,t,n,r){var s=Va();r=void 0===r?null:r;var a=s.memoizedState.inst;null!==Ea&&null!==r&&Da(r,Ea.memoizedState.deps)?s.memoizedState=pi(t,a,n,r):(wa.flags|=e,s.memoizedState=pi(1|t,a,n,r))}function bi(e,t){yi(8390656,8,e,t)}function xi(e,t){vi(2048,8,e,t)}function wi(e,t){return vi(4,2,e,t)}function Ei(e,t){return vi(4,4,e,t)}function ki(e,t){if("function"==typeof t){e=e();var n=t(e);return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function Si(e,t,n){n=null!=n?n.concat([e]):null,vi(4,4,ki.bind(null,t,e),n)}function Ni(){}function Ti(e,t){var n=Va();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Da(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ci(e,t){var n=Va();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Da(t,r[1]))return r[0];if(r=e(),Ta){de(!0);try{e()}finally{de(!1)}}return n.memoizedState=[r,t],r}function ji(e,t,n){return void 0===n||1073741824&xa?e.memoizedState=t:(e.memoizedState=n,e=Oc(),wa.lanes|=e,pc|=e,n)}function Ri(e,t,n,r){return Yn(n,t)?n:null!==pa.current?(e=ji(e,n,r),Yn(e,t)||(Ro=!0),e):42&xa?(e=Oc(),wa.lanes|=e,pc|=e,t):(Ro=!0,e.memoizedState=n)}function Ai(e,t,n,r,s){var a=D.p;D.p=0!==a&&8>a?a:8;var i,o,l,c=_.T,u={};_.T=u,Bi(e,!1,t,n);try{var d=s(),h=_.S;if(null!==h&&h(u,d),null!==d&&"object"==typeof d&&"function"==typeof d.then)Vi(e,t,(i=r,o=[],l={status:"pending",value:null,reason:null,then:function(e){o.push(e)}},d.then((function(){l.status="fulfilled",l.value=i;for(var e=0;e<o.length;e++)(0,o[e])(i)}),(function(e){for(l.status="rejected",l.reason=e,e=0;e<o.length;e++)(0,o[e])(void 0)})),l),Lc());else Vi(e,t,r,Lc())}catch(f){Vi(e,t,{then:function(){},status:"rejected",reason:f},Lc())}finally{D.p=a,_.T=c}}function _i(){}function Di(e,t,n,s){if(5!==e.tag)throw Error(r(476));var a=Ii(e).queue;Ai(e,a,t,I,null===n?_i:function(){return Pi(e),n(s)})}function Ii(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:I,baseState:I,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:I},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Pi(e){Vi(e,Ii(e).next.queue,{},Lc())}function Mi(){return js(Xd)}function Li(){return Va().memoizedState}function Oi(){return Va().memoizedState}function Ui(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Lc(),r=oa(t,e=ia(n),n);return null!==r&&(Uc(r,t,n),la(r,t,n)),t={cache:Ms()},void(e.payload=t)}t=t.return}}function Fi(e,t,n){var r=Lc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},qi(e)?$i(t,n):null!==(n=Dr(e,t,n,r))&&(Uc(n,e,r),Hi(n,t,r))}function zi(e,t,n){Vi(e,t,n,Lc())}function Vi(e,t,n,r){var s={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(qi(e))$i(t,s);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=a(i,n);if(s.hasEagerState=!0,s.eagerState=o,Yn(o,i))return _r(e,t,s,0),null===ac&&Ar(),!1}catch(l){}if(null!==(n=Dr(e,t,s,r)))return Uc(n,e,r),Hi(n,t,r),!0}return!1}function Bi(e,t,n,s){if(s={lane:2,revertLane:_u(),action:s,hasEagerState:!1,eagerState:null,next:null},qi(e)){if(t)throw Error(r(479))}else null!==(t=Dr(e,n,s,2))&&Uc(t,e,2)}function qi(e){var t=e.alternate;return e===wa||null!==t&&t===wa}function $i(e,t){Na=Sa=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Hi(e,t,n){if(4194048&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Re(e,n)}}var Wi={readContext:js,use:qa,useCallback:_a,useContext:_a,useEffect:_a,useImperativeHandle:_a,useLayoutEffect:_a,useInsertionEffect:_a,useMemo:_a,useReducer:_a,useRef:_a,useState:_a,useDebugValue:_a,useDeferredValue:_a,useTransition:_a,useSyncExternalStore:_a,useId:_a,useHostTransitionStatus:_a,useFormState:_a,useActionState:_a,useOptimistic:_a,useMemoCache:_a,useCacheRefresh:_a},Gi={readContext:js,use:qa,useCallback:function(e,t){return za().memoizedState=[e,void 0===t?null:t],e},useContext:js,useEffect:bi,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,yi(4194308,4,ki.bind(null,t,e),n)},useLayoutEffect:function(e,t){return yi(4194308,4,e,t)},useInsertionEffect:function(e,t){yi(4,2,e,t)},useMemo:function(e,t){var n=za();t=void 0===t?null:t;var r=e();if(Ta){de(!0);try{e()}finally{de(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=za();if(void 0!==n){var s=n(t);if(Ta){de(!0);try{n(t)}finally{de(!1)}}}else s=t;return r.memoizedState=r.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},r.queue=e,e=e.dispatch=Fi.bind(null,wa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},za().memoizedState=e},useState:function(e){var t=(e=ti(e)).queue,n=zi.bind(null,wa,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ni,useDeferredValue:function(e,t){return ji(za(),e,t)},useTransition:function(){var e=ti(!1);return e=Ai.bind(null,wa,e.queue,!0,!1),za().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var s=wa,a=za();if(os){if(void 0===n)throw Error(r(407));n=n()}else{if(n=t(),null===ac)throw Error(r(349));124&oc||Xa(s,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,bi(Ja.bind(null,s,i,e),[e]),s.flags|=2048,pi(9,{destroy:void 0,resource:void 0},Ya.bind(null,s,i,n,t),null),n},useId:function(){var e=za(),t=ac.identifierPrefix;if(os){var n=es;t=""+t+"R"+(n=(Zr&~(1<<32-he(Zr)-1)).toString(32)+n),0<(n=Ca++)&&(t+="H"+n.toString(32)),t+=""}else t=""+t+"r"+(n=Aa++).toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:Mi,useFormState:ui,useActionState:ui,useOptimistic:function(e){var t=za();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Bi.bind(null,wa,!0,n),n.dispatch=t,[e,t]},useMemoCache:$a,useCacheRefresh:function(){return za().memoizedState=Ui.bind(null,wa)}},Ki={readContext:js,use:qa,useCallback:Ti,useContext:js,useEffect:xi,useImperativeHandle:Si,useInsertionEffect:wi,useLayoutEffect:Ei,useMemo:Ci,useReducer:Wa,useRef:gi,useState:function(){return Wa(Ha)},useDebugValue:Ni,useDeferredValue:function(e,t){return Ri(Va(),Ea.memoizedState,e,t)},useTransition:function(){var e=Wa(Ha)[0],t=Va().memoizedState;return["boolean"==typeof e?e:Ba(e),t]},useSyncExternalStore:Qa,useId:Li,useHostTransitionStatus:Mi,useFormState:di,useActionState:di,useOptimistic:function(e,t){return ni(Va(),0,e,t)},useMemoCache:$a,useCacheRefresh:Oi},Qi={readContext:js,use:qa,useCallback:Ti,useContext:js,useEffect:xi,useImperativeHandle:Si,useInsertionEffect:wi,useLayoutEffect:Ei,useMemo:Ci,useReducer:Ka,useRef:gi,useState:function(){return Ka(Ha)},useDebugValue:Ni,useDeferredValue:function(e,t){var n=Va();return null===Ea?ji(n,e,t):Ri(n,Ea.memoizedState,e,t)},useTransition:function(){var e=Ka(Ha)[0],t=Va().memoizedState;return["boolean"==typeof e?e:Ba(e),t]},useSyncExternalStore:Qa,useId:Li,useHostTransitionStatus:Mi,useFormState:mi,useActionState:mi,useOptimistic:function(e,t){var n=Va();return null!==Ea?ni(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:$a,useCacheRefresh:Oi},Xi=null,Yi=0;function Ji(e){var t=Yi;return Yi+=1,null===Xi&&(Xi=[]),Zs(Xi,e,t)}function Zi(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function eo(e,t){if(t.$$typeof===u)throw Error(r(525));throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function to(e){return(0,e._init)(e._payload)}function no(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function s(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(e,t){return(e=zr(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=$r(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===f?m(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===k&&to(s)===t.type)?(Zi(t=a(t,n.props),n),t.return=e,t):(Zi(t=Br(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Hr(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function m(e,t,n,r,s){return null===t||7!==t.tag?((t=qr(n,e.mode,r,s)).return=e,t):((t=a(t,n)).return=e,t)}function p(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=$r(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case d:return Zi(n=Br(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case h:return(t=Hr(t,e.mode,n)).return=e,t;case k:return p(e,t=(0,t._init)(t._payload),n)}if(A(t)||C(t))return(t=qr(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return p(e,Ji(t),n);if(t.$$typeof===v)return p(e,Rs(e,t),n);eo(e,t)}return null}function g(e,t,n,r){var s=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==s?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case d:return n.key===s?c(e,t,n,r):null;case h:return n.key===s?u(e,t,n,r):null;case k:return g(e,t,n=(s=n._init)(n._payload),r)}if(A(n)||C(n))return null!==s?null:m(e,t,n,r,null);if("function"==typeof n.then)return g(e,t,Ji(n),r);if(n.$$typeof===v)return g(e,t,Rs(e,n),r);eo(e,n)}return null}function y(e,t,n,r,s){if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"==typeof r&&null!==r){switch(r.$$typeof){case d:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case h:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case k:return y(e,t,n,r=(0,r._init)(r._payload),s)}if(A(r)||C(r))return m(t,e=e.get(n)||null,r,s,null);if("function"==typeof r.then)return y(e,t,n,Ji(r),s);if(r.$$typeof===v)return y(e,t,n,Rs(t,r),s);eo(t,r)}return null}function b(l,c,u,m){if("object"==typeof u&&null!==u&&u.type===f&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case d:e:{for(var x=u.key;null!==c;){if(c.key===x){if((x=u.type)===f){if(7===c.tag){n(l,c.sibling),(m=a(c,u.props.children)).return=l,l=m;break e}}else if(c.elementType===x||"object"==typeof x&&null!==x&&x.$$typeof===k&&to(x)===c.type){n(l,c.sibling),Zi(m=a(c,u.props),u),m.return=l,l=m;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===f?((m=qr(u.props.children,l.mode,m,u.key)).return=l,l=m):(Zi(m=Br(u.type,u.key,u.props,null,l.mode,m),u),m.return=l,l=m)}return o(l);case h:e:{for(x=u.key;null!==c;){if(c.key===x){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(m=a(c,u.children||[])).return=l,l=m;break e}n(l,c);break}t(l,c),c=c.sibling}(m=Hr(u,l.mode,m)).return=l,l=m}return o(l);case k:return b(l,c,u=(x=u._init)(u._payload),m)}if(A(u))return function(r,a,o,l){for(var c=null,u=null,d=a,h=a=0,f=null;null!==d&&h<o.length;h++){d.index>h?(f=d,d=null):f=d.sibling;var m=g(r,d,o[h],l);if(null===m){null===d&&(d=f);break}e&&d&&null===m.alternate&&t(r,d),a=i(m,a,h),null===u?c=m:u.sibling=m,u=m,d=f}if(h===o.length)return n(r,d),os&&ts(r,h),c;if(null===d){for(;h<o.length;h++)null!==(d=p(r,o[h],l))&&(a=i(d,a,h),null===u?c=d:u.sibling=d,u=d);return os&&ts(r,h),c}for(d=s(d);h<o.length;h++)null!==(f=y(d,r,h,o[h],l))&&(e&&null!==f.alternate&&d.delete(null===f.key?h:f.key),a=i(f,a,h),null===u?c=f:u.sibling=f,u=f);return e&&d.forEach((function(e){return t(r,e)})),os&&ts(r,h),c}(l,c,u,m);if(C(u)){if("function"!=typeof(x=C(u)))throw Error(r(150));return function(a,o,l,c){if(null==l)throw Error(r(151));for(var u=null,d=null,h=o,f=o=0,m=null,v=l.next();null!==h&&!v.done;f++,v=l.next()){h.index>f?(m=h,h=null):m=h.sibling;var b=g(a,h,v.value,c);if(null===b){null===h&&(h=m);break}e&&h&&null===b.alternate&&t(a,h),o=i(b,o,f),null===d?u=b:d.sibling=b,d=b,h=m}if(v.done)return n(a,h),os&&ts(a,f),u;if(null===h){for(;!v.done;f++,v=l.next())null!==(v=p(a,v.value,c))&&(o=i(v,o,f),null===d?u=v:d.sibling=v,d=v);return os&&ts(a,f),u}for(h=s(h);!v.done;f++,v=l.next())null!==(v=y(h,a,f,v.value,c))&&(e&&null!==v.alternate&&h.delete(null===v.key?f:v.key),o=i(v,o,f),null===d?u=v:d.sibling=v,d=v);return e&&h.forEach((function(e){return t(a,e)})),os&&ts(a,f),u}(l,c,u=x.call(u),m)}if("function"==typeof u.then)return b(l,c,Ji(u),m);if(u.$$typeof===v)return b(l,c,Rs(l,u),m);eo(l,u)}return"string"==typeof u&&""!==u||"number"==typeof u||"bigint"==typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(m=a(c,u)).return=l,l=m):(n(l,c),(m=$r(u,l.mode,m)).return=l,l=m),o(l)):n(l,c)}return function(e,t,n,r){try{Yi=0;var s=b(e,t,n,r);return Xi=null,s}catch(LR){if(LR===Gs||LR===Qs)throw LR;var a=Ur(29,LR,null,e.mode);return a.lanes=r,a.return=e,a}}}var ro=no(!0),so=no(!1),ao=L(null),io=null;function oo(e){var t=e.alternate;U(ho,1&ho.current),U(ao,e),null===io&&(null===t||null!==pa.current||null!==t.memoizedState)&&(io=e)}function lo(e){if(22===e.tag){if(U(ho,ho.current),U(ao,e),null===io){var t=e.alternate;null!==t&&null!==t.memoizedState&&(io=e)}}else co()}function co(){U(ho,ho.current),U(ao,ao.current)}function uo(e){O(ao),io===e&&(io=null),O(ho)}var ho=L(0);function fo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||vd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function mo(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:c({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var po={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Lc(),s=ia(r);s.payload=t,null!=n&&(s.callback=n),null!==(t=oa(e,s,r))&&(Uc(t,e,r),la(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Lc(),s=ia(r);s.tag=1,s.payload=t,null!=n&&(s.callback=n),null!==(t=oa(e,s,r))&&(Uc(t,e,r),la(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Lc(),r=ia(n);r.tag=2,null!=t&&(r.callback=t),null!==(t=oa(e,r,n))&&(Uc(t,e,n),la(t,e,n))}};function go(e,t,n,r,s,a,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!Jn(n,r)||!Jn(s,a))}function yo(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&po.enqueueReplaceState(t,t.state,null)}function vo(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var s in n===t&&(n=c({},n)),e)void 0===n[s]&&(n[s]=e[s]);return n}var bo="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function xo(e){bo(e)}function wo(e){console.error(e)}function Eo(e){bo(e)}function ko(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout((function(){throw n}))}}function So(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout((function(){throw r}))}}function No(e,t,n){return(n=ia(n)).tag=3,n.payload={element:null},n.callback=function(){ko(e,t)},n}function To(e){return(e=ia(e)).tag=3,e}function Co(e,t,n,r){var s=n.type.getDerivedStateFromError;if("function"==typeof s){var a=r.value;e.payload=function(){return s(a)},e.callback=function(){So(t,n,r)}}var i=n.stateNode;null!==i&&"function"==typeof i.componentDidCatch&&(e.callback=function(){So(t,n,r),"function"!=typeof s&&(null===Tc?Tc=new Set([this]):Tc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var jo=Error(r(461)),Ro=!1;function Ao(e,t,n,r){t.child=null===e?so(t,null,n,r):ro(t,e.child,n,r)}function _o(e,t,n,r,s){n=n.render;var a=t.ref;if("ref"in r){var i={};for(var o in r)"ref"!==o&&(i[o]=r[o])}else i=r;return Cs(t),r=Ia(e,t,n,i,a,s),o=Oa(),null===e||Ro?(os&&o&&rs(t),t.flags|=1,Ao(e,t,r,s),t.child):(Ua(e,t,s),Yo(e,t,s))}function Do(e,t,n,r,s){if(null===e){var a=n.type;return"function"!=typeof a||Fr(a)||void 0!==a.defaultProps||null!==n.compare?((e=Br(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Io(e,t,a,r,s))}if(a=e.child,!Jo(e,s)){var i=a.memoizedProps;if((n=null!==(n=n.compare)?n:Jn)(i,r)&&e.ref===t.ref)return Yo(e,t,s)}return t.flags|=1,(e=zr(a,r)).ref=t.ref,e.return=t,t.child=e}function Io(e,t,n,r,s){if(null!==e){var a=e.memoizedProps;if(Jn(a,r)&&e.ref===t.ref){if(Ro=!1,t.pendingProps=r=a,!Jo(e,s))return t.lanes=e.lanes,Yo(e,t,s);131072&e.flags&&(Ro=!0)}}return Oo(e,t,n,r,s)}function Po(e,t,n){var r=t.pendingProps,s=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(128&t.flags){if(r=null!==a?a.baseLanes|n:n,null!==e){for(s=t.child=e.child,a=0;null!==s;)a=a|s.lanes|s.childLanes,s=s.sibling;t.childLanes=a&~r}else t.childLanes=0,t.child=null;return Mo(e,t,r,n)}if(!(536870912&n))return t.lanes=t.childLanes=536870912,Mo(e,t,null!==a?a.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Hs(0,null!==a?a.cachePool:null),null!==a?ya(t,a):va(),lo(t)}else null!==a?(Hs(0,a.cachePool),ya(t,a),co(),t.memoizedState=null):(null!==e&&Hs(0,null),va(),co());return Ao(e,t,s,n),t.child}function Mo(e,t,n,r){var s=$s();return s=null===s?null:{parent:Ps._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},null!==e&&Hs(0,null),va(),lo(t),null!==e&&Ns(e,t,r,!0),null}function Lo(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(r(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Oo(e,t,n,r,s){return Cs(t),n=Ia(e,t,n,r,void 0,s),r=Oa(),null===e||Ro?(os&&r&&rs(t),t.flags|=1,Ao(e,t,n,s),t.child):(Ua(e,t,s),Yo(e,t,s))}function Uo(e,t,n,r,s,a){return Cs(t),t.updateQueue=null,n=Ma(t,r,n,s),Pa(e),r=Oa(),null===e||Ro?(os&&r&&rs(t),t.flags|=1,Ao(e,t,n,a),t.child):(Ua(e,t,a),Yo(e,t,a))}function Fo(e,t,n,r,s){if(Cs(t),null===t.stateNode){var a=Lr,i=n.contextType;"object"==typeof i&&null!==i&&(a=js(i)),a=new n(r,a),t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,a.updater=po,t.stateNode=a,a._reactInternals=t,(a=t.stateNode).props=r,a.state=t.memoizedState,a.refs={},sa(t),i=n.contextType,a.context="object"==typeof i&&null!==i?js(i):Lr,a.state=t.memoizedState,"function"==typeof(i=n.getDerivedStateFromProps)&&(mo(t,n,i,r),a.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(i=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),i!==a.state&&po.enqueueReplaceState(a,a.state,null),ha(t,r,a,s),da(),a.state=t.memoizedState),"function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){a=t.stateNode;var o=t.memoizedProps,l=vo(n,o);a.props=l;var c=a.context,u=n.contextType;i=Lr,"object"==typeof u&&null!==u&&(i=js(u));var d=n.getDerivedStateFromProps;u="function"==typeof d||"function"==typeof a.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o||c!==i)&&yo(t,a,r,i),ra=!1;var h=t.memoizedState;a.state=h,ha(t,r,a,s),da(),c=t.memoizedState,o||h!==c||ra?("function"==typeof d&&(mo(t,n,d,r),c=t.memoizedState),(l=ra||go(t,n,l,r,h,c,i))?(u||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=i,r=l):("function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,aa(e,t),u=vo(n,i=t.memoizedProps),a.props=u,d=t.pendingProps,h=a.context,c=n.contextType,l=Lr,"object"==typeof c&&null!==c&&(l=js(c)),(c="function"==typeof(o=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(i!==d||h!==l)&&yo(t,a,r,l),ra=!1,h=t.memoizedState,a.state=h,ha(t,r,a,s),da();var f=t.memoizedState;i!==d||h!==f||ra||null!==e&&null!==e.dependencies&&Ts(e.dependencies)?("function"==typeof o&&(mo(t,n,o,r),f=t.memoizedState),(u=ra||go(t,n,u,r,h,f,l)||null!==e&&null!==e.dependencies&&Ts(e.dependencies))?(c||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=l,r=u):("function"!=typeof a.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,Lo(e,t),r=!!(128&t.flags),a||r?(a=t.stateNode,n=r&&"function"!=typeof n.getDerivedStateFromError?null:a.render(),t.flags|=1,null!==e&&r?(t.child=ro(t,e.child,null,s),t.child=ro(t,null,n,s)):Ao(e,t,n,s),t.memoizedState=a.state,e=t.child):e=Yo(e,t,s),e}function zo(e,t,n,r){return ps(),t.flags|=256,Ao(e,t,n,r),t.child}var Vo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bo(e){return{baseLanes:e,cachePool:Ws()}}function qo(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=vc),e}function $o(e,t,n){var s,a=t.pendingProps,i=!1,o=!!(128&t.flags);if((s=o)||(s=(null===e||null!==e.memoizedState)&&!!(2&ho.current)),s&&(i=!0,t.flags&=-129),s=!!(32&t.flags),t.flags&=-33,null===e){if(os){if(i?oo(t):co(),os){var l,c=is;if(l=c){e:{for(l=c,c=cs;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=bd(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Jr?{id:Zr,overflow:es}:null,retryLane:536870912,hydrationErrors:null},(l=Ur(18,null,null,0)).stateNode=c,l.return=t,t.child=l,as=t,is=null,l=!0):l=!1}l||ds(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return vd(c)?t.lanes=32:t.lanes=536870912,null;uo(t)}return c=a.children,a=a.fallback,i?(co(),c=Wo({mode:"hidden",children:c},i=t.mode),a=qr(a,i,n,null),c.return=t,a.return=t,c.sibling=a,t.child=c,(i=t.child).memoizedState=Bo(n),i.childLanes=qo(e,s,n),t.memoizedState=Vo,a):(oo(t),Ho(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(o)256&t.flags?(oo(t),t.flags&=-257,t=Go(e,t,n)):null!==t.memoizedState?(co(),t.child=e.child,t.flags|=128,t=null):(co(),i=a.fallback,c=t.mode,a=Wo({mode:"visible",children:a.children},c),(i=qr(i,c,n,null)).flags|=2,a.return=t,i.return=t,a.sibling=i,t.child=a,ro(t,e.child,null,n),(a=t.child).memoizedState=Bo(n),a.childLanes=qo(e,s,n),t.memoizedState=Vo,t=i);else if(oo(t),vd(c)){if(s=c.nextSibling&&c.nextSibling.dataset)var u=s.dgst;s=u,(a=Error(r(419))).stack="",a.digest=s,ys({value:a,source:null,stack:null}),t=Go(e,t,n)}else if(Ro||Ns(e,t,n,!1),s=!!(n&e.childLanes),Ro||s){if(null!==(s=ac)&&(0!==(a=(a=42&(a=n&-n)?1:Ae(a))&(s.suspendedLanes|n)?0:a)&&a!==l.retryLane))throw l.retryLane=a,Ir(e,a),Uc(s,e,a),jo;"$?"===c.data||Qc(),t=Go(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,is=bd(c.nextSibling),as=t,os=!0,ls=null,cs=!1,null!==e&&(Xr[Yr++]=Zr,Xr[Yr++]=es,Xr[Yr++]=Jr,Zr=e.id,es=e.overflow,Jr=t),(t=Ho(t,a.children)).flags|=4096);return t}return i?(co(),i=a.fallback,c=t.mode,u=(l=e.child).sibling,(a=zr(l,{mode:"hidden",children:a.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?i=zr(u,i):(i=qr(i,c,n,null)).flags|=2,i.return=t,a.return=t,a.sibling=i,t.child=a,a=i,i=t.child,null===(c=e.child.memoizedState)?c=Bo(n):(null!==(l=c.cachePool)?(u=Ps._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Ws(),c={baseLanes:c.baseLanes|n,cachePool:l}),i.memoizedState=c,i.childLanes=qo(e,s,n),t.memoizedState=Vo,a):(oo(t),e=(n=e.child).sibling,(n=zr(n,{mode:"visible",children:a.children})).return=t,n.sibling=null,null!==e&&(null===(s=t.deletions)?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n)}function Ho(e,t){return(t=Wo({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Wo(e,t){return(e=Ur(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Go(e,t,n){return ro(t,e.child,null,n),(e=Ho(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ko(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ks(e.return,t,n)}function Qo(e,t,n,r,s){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function Xo(e,t,n){var r=t.pendingProps,s=r.revealOrder,a=r.tail;if(Ao(e,t,r.children,n),2&(r=ho.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ko(e,n,t);else if(19===e.tag)Ko(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(U(ho,r),s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===fo(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Qo(t,!1,s,n,a);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===fo(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Qo(t,!0,n,null,a);break;case"together":Qo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Yo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),pc|=t.lanes,!(n&t.childLanes)){if(null===e)return null;if(Ns(e,t,n,!1),!(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=zr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=zr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Jo(e,t){return!!(e.lanes&t)||!(null===(e=e.dependencies)||!Ts(e))}function Zo(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ro=!0;else{if(!(Jo(e,n)||128&t.flags))return Ro=!1,function(e,t,n){switch(t.tag){case 3:q(t,t.stateNode.containerInfo),ws(0,Ps,e.memoizedState.cache),ps();break;case 27:case 5:H(t);break;case 4:q(t,t.stateNode.containerInfo);break;case 10:ws(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(oo(t),t.flags|=128,null):n&t.child.childLanes?$o(e,t,n):(oo(t),null!==(e=Yo(e,t,n))?e.sibling:null);oo(t);break;case 19:var s=!!(128&e.flags);if((r=!!(n&t.childLanes))||(Ns(e,t,n,!1),r=!!(n&t.childLanes)),s){if(r)return Xo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),U(ho,ho.current),r)break;return null;case 22:case 23:return t.lanes=0,Po(e,t,n);case 24:ws(0,Ps,e.memoizedState.cache)}return Yo(e,t,n)}(e,t,n);Ro=!!(131072&e.flags)}else Ro=!1,os&&1048576&t.flags&&ns(t,Qr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var s=t.elementType,a=s._init;if(s=a(s._payload),t.type=s,"function"!=typeof s){if(null!=s){if((a=s.$$typeof)===b){t.tag=11,t=_o(null,t,s,e,n);break e}if(a===E){t.tag=14,t=Do(null,t,s,e,n);break e}}throw t=R(s)||s,Error(r(306,t,""))}Fr(s)?(e=vo(s,e),t.tag=1,t=Fo(null,t,s,e,n)):(t.tag=0,t=Oo(null,t,s,e,n))}return t;case 0:return Oo(e,t,t.type,t.pendingProps,n);case 1:return Fo(e,t,s=t.type,a=vo(s,t.pendingProps),n);case 3:e:{if(q(t,t.stateNode.containerInfo),null===e)throw Error(r(387));s=t.pendingProps;var i=t.memoizedState;a=i.element,aa(e,t),ha(t,s,null,n);var o=t.memoizedState;if(s=o.cache,ws(0,Ps,s),s!==i.cache&&Ss(t,[Ps],n,!0),da(),s=o.element,i.isDehydrated){if(i={element:s,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=zo(e,t,s,n);break e}if(s!==a){ys(a=Tr(Error(r(424)),t)),t=zo(e,t,s,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(is=bd(e.firstChild),as=t,os=!0,ls=null,cs=!0,n=so(t,null,s,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),s===a){t=Yo(e,t,n);break e}Ao(e,t,s,n)}t=t.child}return t;case 26:return Lo(e,t),null===e?(n=Ad(t.type,null,t.pendingProps,null))?t.memoizedState=n:os||(n=t.type,e=t.pendingProps,(s=ad(V.current).createElement(n))[Pe]=t,s[Me]=e,nd(s,n,e),Ge(s),t.stateNode=s):t.memoizedState=Ad(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return H(t),null===e&&os&&(s=t.stateNode=Ed(t.type,t.pendingProps,V.current),as=t,cs=!0,a=is,pd(t.type)?(xd=a,is=bd(s.firstChild)):is=a),Ao(e,t,t.pendingProps.children,n),Lo(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&os&&((a=s=is)&&(s=function(e,t,n,r){for(;1===e.nodeType;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Ve])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(a=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(a!==s.rel||e.getAttribute("href")!==(null==s.href||""===s.href?null:s.href)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin)||e.getAttribute("title")!==(null==s.title?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((a=e.getAttribute("src"))!==(null==s.src?null:s.src)||e.getAttribute("type")!==(null==s.type?null:s.type)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin))&&a&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var a=null==s.name?null:""+s.name;if("hidden"===s.type&&e.getAttribute("name")===a)return e}if(null===(e=bd(e.nextSibling)))break}return null}(s,t.type,t.pendingProps,cs),null!==s?(t.stateNode=s,as=t,is=bd(s.firstChild),cs=!1,a=!0):a=!1),a||ds(t)),H(t),a=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ld(a,i)?s=null:null!==o&&ld(a,o)&&(t.flags|=32),null!==t.memoizedState&&(a=Ia(e,t,La,null,null,n),Xd._currentValue=a),Lo(e,t),Ao(e,t,s,n),t.child;case 6:return null===e&&os&&((e=n=is)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=bd(e.nextSibling)))return null}return e}(n,t.pendingProps,cs))?(t.stateNode=n,as=t,is=null,e=!0):e=!1),e||ds(t)),null;case 13:return $o(e,t,n);case 4:return q(t,t.stateNode.containerInfo),s=t.pendingProps,null===e?t.child=ro(t,null,s,n):Ao(e,t,s,n),t.child;case 11:return _o(e,t,t.type,t.pendingProps,n);case 7:return Ao(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ao(e,t,t.pendingProps.children,n),t.child;case 10:return s=t.pendingProps,ws(0,t.type,s.value),Ao(e,t,s.children,n),t.child;case 9:return a=t.type._context,s=t.pendingProps.children,Cs(t),s=s(a=js(a)),t.flags|=1,Ao(e,t,s,n),t.child;case 14:return Do(e,t,t.type,t.pendingProps,n);case 15:return Io(e,t,t.type,t.pendingProps,n);case 19:return Xo(e,t,n);case 31:return s=t.pendingProps,n=t.mode,s={mode:s.mode,children:s.children},null===e?((n=Wo(s,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=zr(e.child,s)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Po(e,t,n);case 24:return Cs(t),s=js(Ps),null===e?(null===(a=$s())&&(a=ac,i=Ms(),a.pooledCache=i,i.refCount++,null!==i&&(a.pooledCacheLanes|=n),a=i),t.memoizedState={parent:s,cache:a},sa(t),ws(0,Ps,a)):(!!(e.lanes&n)&&(aa(e,t),ha(t,null,null,n),da()),a=e.memoizedState,i=t.memoizedState,a.parent!==s?(a={parent:s,cache:s},t.memoizedState=a,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=a),ws(0,Ps,s)):(s=i.cache,ws(0,Ps,s),s!==a.cache&&Ss(t,[Ps],n,!0))),Ao(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function el(e){e.flags|=4}function tl(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!qd(t)){if(null!==(t=ao.current)&&((4194048&oc)===oc?null!==io:(62914560&oc)!==oc&&!(536870912&oc)||t!==io))throw ea=Xs,Ks;e.flags|=8192}}function nl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ne():536870912,e.lanes|=t,bc|=t)}function rl(e,t){if(!os)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function sl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=65011712&s.subtreeFlags,r|=65011712&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function al(e,t,n){var s=t.pendingProps;switch(ss(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return sl(t),null;case 3:return n=t.stateNode,s=null,null!==e&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Es(Ps),$(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ms(t)?el(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,gs())),sl(t),null;case 26:return n=t.memoizedState,null===e?(el(t),null!==n?(sl(t),tl(t,n)):(sl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(el(t),sl(t),tl(t,n)):(sl(t),t.flags&=-16777217):(e.memoizedProps!==s&&el(t),sl(t),t.flags&=-16777217),null;case 27:W(t),n=V.current;var a=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==s&&el(t);else{if(!s){if(null===t.stateNode)throw Error(r(166));return sl(t),null}e=F.current,ms(t)?hs(t):(e=Ed(a,s,n),t.stateNode=e,el(t))}return sl(t),null;case 5:if(W(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==s&&el(t);else{if(!s){if(null===t.stateNode)throw Error(r(166));return sl(t),null}if(e=F.current,ms(t))hs(t);else{switch(a=ad(V.current),e){case 1:e=a.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=a.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=a.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=a.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"==typeof s.is?a.createElement("select",{is:s.is}):a.createElement("select"),s.multiple?e.multiple=!0:s.size&&(e.size=s.size);break;default:e="string"==typeof s.is?a.createElement(n,{is:s.is}):a.createElement(n)}}e[Pe]=t,e[Me]=s;e:for(a=t.child;null!==a;){if(5===a.tag||6===a.tag)e.appendChild(a.stateNode);else if(4!==a.tag&&27!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;null===a.sibling;){if(null===a.return||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=e;e:switch(nd(e,n,s),n){case"button":case"input":case"select":case"textarea":e=!!s.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&el(t)}}return sl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==s&&el(t);else{if("string"!=typeof s&&null===t.stateNode)throw Error(r(166));if(e=V.current,ms(t)){if(e=t.stateNode,n=t.memoizedProps,s=null,null!==(a=as))switch(a.tag){case 27:case 5:s=a.memoizedProps}e[Pe]=t,(e=!!(e.nodeValue===n||null!==s&&!0===s.suppressHydrationWarning||Ju(e.nodeValue,n)))||ds(t)}else(e=ad(e).createTextNode(s))[Pe]=t,t.stateNode=e}return sl(t),null;case 13:if(s=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(a=ms(t),null!==s&&null!==s.dehydrated){if(null===e){if(!a)throw Error(r(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(r(317));a[Pe]=t}else ps(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;sl(t),a=!1}else a=gs(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return 256&t.flags?(uo(t),t):(uo(t),null)}if(uo(t),128&t.flags)return t.lanes=n,t;if(n=null!==s,e=null!==e&&null!==e.memoizedState,n){a=null,null!==(s=t.child).alternate&&null!==s.alternate.memoizedState&&null!==s.alternate.memoizedState.cachePool&&(a=s.alternate.memoizedState.cachePool.pool);var i=null;null!==s.memoizedState&&null!==s.memoizedState.cachePool&&(i=s.memoizedState.cachePool.pool),i!==a&&(s.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),nl(t,t.updateQueue),sl(t),null;case 4:return $(),null===e&&Bu(t.stateNode.containerInfo),sl(t),null;case 10:return Es(t.type),sl(t),null;case 19:if(O(ho),null===(a=t.memoizedState))return sl(t),null;if(s=!!(128&t.flags),null===(i=a.rendering))if(s)rl(a,!1);else{if(0!==mc||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(i=fo(e))){for(t.flags|=128,rl(a,!1),e=i.updateQueue,t.updateQueue=e,nl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Vr(n,e),n=n.sibling;return U(ho,1&ho.current|2),t.child}e=e.sibling}null!==a.tail&&ee()>Sc&&(t.flags|=128,s=!0,rl(a,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=fo(i))){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,nl(t,e),rl(a,!0),null===a.tail&&"hidden"===a.tailMode&&!i.alternate&&!os)return sl(t),null}else 2*ee()-a.renderingStartTime>Sc&&536870912!==n&&(t.flags|=128,s=!0,rl(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=a.last)?e.sibling=i:t.child=i,a.last=i)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=ee(),t.sibling=null,e=ho.current,U(ho,s?1&e|2:1&e),t):(sl(t),null);case 22:case 23:return uo(t),ba(),s=null!==t.memoizedState,null!==e?null!==e.memoizedState!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?!!(536870912&n)&&!(128&t.flags)&&(sl(t),6&t.subtreeFlags&&(t.flags|=8192)):sl(t),null!==(n=t.updateQueue)&&nl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),s=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(s=t.memoizedState.cachePool.pool),s!==n&&(t.flags|=2048),null!==e&&O(qs),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Es(Ps),sl(t),null;case 25:case 30:return null}throw Error(r(156,t.tag))}function il(e,t){switch(ss(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Es(Ps),$(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return W(t),null;case 13:if(uo(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return O(ho),null;case 4:return $(),null;case 10:return Es(t.type),null;case 22:case 23:return uo(t),ba(),null!==e&&O(qs),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Es(Ps),null;default:return null}}function ol(e,t){switch(ss(t),t.tag){case 3:Es(Ps),$();break;case 26:case 27:case 5:W(t);break;case 4:$();break;case 13:uo(t);break;case 19:O(ho);break;case 10:Es(t.type);break;case 22:case 23:uo(t),ba(),null!==e&&O(qs);break;case 24:Es(Ps)}}function ll(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var s=r.next;n=s;do{if((n.tag&e)===e){r=void 0;var a=n.create,i=n.inst;r=a(),i.destroy=r}n=n.next}while(n!==s)}}catch(o){hu(t,t.return,o)}}function cl(e,t,n){try{var r=t.updateQueue,s=null!==r?r.lastEffect:null;if(null!==s){var a=s.next;r=a;do{if((r.tag&e)===e){var i=r.inst,o=i.destroy;if(void 0!==o){i.destroy=void 0,s=t;var l=n,c=o;try{c()}catch(u){hu(s,l,u)}}}r=r.next}while(r!==a)}}catch(u){hu(t,t.return,u)}}function ul(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{ma(t,n)}catch(r){hu(e,e.return,r)}}}function dl(e,t,n){n.props=vo(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){hu(e,t,r)}}function hl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"==typeof n?e.refCleanup=n(r):n.current=r}}catch(s){hu(e,t,s)}}function fl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"==typeof r)try{r()}catch(s){hu(e,t,s)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(a){hu(e,t,a)}else n.current=null}function ml(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(s){hu(e,e.return,s)}}function pl(e,t,n){try{var s=e.stateNode;!function(e,t,n,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,i=null,o=null,l=null,c=null,u=null,d=null;for(m in n){var h=n[m];if(n.hasOwnProperty(m)&&null!=h)switch(m){case"checked":case"value":break;case"defaultValue":c=h;default:s.hasOwnProperty(m)||ed(e,t,m,null,s,h)}}for(var f in s){var m=s[f];if(h=n[f],s.hasOwnProperty(f)&&(null!=m||null!=h))switch(f){case"type":i=m;break;case"name":a=m;break;case"checked":u=m;break;case"defaultChecked":d=m;break;case"value":o=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(r(137,t));break;default:m!==h&&ed(e,t,f,m,s,h)}}return void vt(e,o,l,c,u,d,i,a);case"select":for(i in m=o=l=f=null,n)if(c=n[i],n.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":m=c;default:s.hasOwnProperty(i)||ed(e,t,i,null,s,c)}for(a in s)if(i=s[a],c=n[a],s.hasOwnProperty(a)&&(null!=i||null!=c))switch(a){case"value":f=i;break;case"defaultValue":l=i;break;case"multiple":o=i;default:i!==c&&ed(e,t,a,i,s,c)}return t=l,n=o,s=m,void(null!=f?wt(e,!!n,f,!1):!!s!=!!n&&(null!=t?wt(e,!!n,t,!0):wt(e,!!n,n?[]:"",!1)));case"textarea":for(l in m=f=null,n)if(a=n[l],n.hasOwnProperty(l)&&null!=a&&!s.hasOwnProperty(l))switch(l){case"value":case"children":break;default:ed(e,t,l,null,s,a)}for(o in s)if(a=s[o],i=n[o],s.hasOwnProperty(o)&&(null!=a||null!=i))switch(o){case"value":f=a;break;case"defaultValue":m=a;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=a)throw Error(r(91));break;default:a!==i&&ed(e,t,o,a,s,i)}return void Et(e,f,m);case"option":for(var p in n)if(f=n[p],n.hasOwnProperty(p)&&null!=f&&!s.hasOwnProperty(p))if("selected"===p)e.selected=!1;else ed(e,t,p,null,s,f);for(c in s)if(f=s[c],m=n[c],s.hasOwnProperty(c)&&f!==m&&(null!=f||null!=m))if("selected"===c)e.selected=f&&"function"!=typeof f&&"symbol"!=typeof f;else ed(e,t,c,f,s,m);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!s.hasOwnProperty(g)&&ed(e,t,g,null,s,f);for(u in s)if(f=s[u],m=n[u],s.hasOwnProperty(u)&&f!==m&&(null!=f||null!=m))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(r(137,t));break;default:ed(e,t,u,f,s,m)}return;default:if(jt(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!s.hasOwnProperty(y)&&td(e,t,y,void 0,s,f);for(d in s)f=s[d],m=n[d],!s.hasOwnProperty(d)||f===m||void 0===f&&void 0===m||td(e,t,d,f,s,m);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!s.hasOwnProperty(v)&&ed(e,t,v,null,s,f);for(h in s)f=s[h],m=n[h],!s.hasOwnProperty(h)||f===m||null==f&&null==m||ed(e,t,h,f,s,m)}(s,e.type,n,t),s[Me]=t}catch(a){hu(e,e.return,a)}}function gl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&pd(e.type)||4===e.tag}function yl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||gl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&pd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function vl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Zu));else if(4!==r&&(27===r&&pd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(vl(e,t,n),e=e.sibling;null!==e;)vl(e,t,n),e=e.sibling}function bl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&pd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(bl(e,t,n),e=e.sibling;null!==e;)bl(e,t,n),e=e.sibling}function xl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);nd(t,r,n),t[Pe]=e,t[Me]=n}catch(a){hu(e,e.return,a)}}var wl=!1,El=!1,kl=!1,Sl="function"==typeof WeakSet?WeakSet:Set,Nl=null;function Tl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Fl(e,n),4&r&&ll(5,n);break;case 1:if(Fl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(i){hu(n,n.return,i)}else{var s=vo(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){hu(n,n.return,o)}}64&r&&ul(n),512&r&&hl(n,n.return);break;case 3:if(Fl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{ma(e,t)}catch(i){hu(n,n.return,i)}}break;case 27:null===t&&4&r&&xl(n);case 26:case 5:Fl(e,n),null===t&&4&r&&ml(n),512&r&&hl(n,n.return);break;case 12:Fl(e,n);break;case 13:Fl(e,n),4&r&&Dl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=gu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||wl)){t=null!==t&&null!==t.memoizedState||El,s=wl;var a=El;wl=r,(El=t)&&!a?Vl(e,n,!!(8772&n.subtreeFlags)):Fl(e,n),wl=s,El=a}break;case 30:break;default:Fl(e,n)}}function Cl(e){var t=e.alternate;null!==t&&(e.alternate=null,Cl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Be(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var jl=null,Rl=!1;function Al(e,t,n){for(n=n.child;null!==n;)_l(e,t,n),n=n.sibling}function _l(e,t,n){if(ue&&"function"==typeof ue.onCommitFiberUnmount)try{ue.onCommitFiberUnmount(ce,n)}catch(a){}switch(n.tag){case 26:El||fl(n,t),Al(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:El||fl(n,t);var r=jl,s=Rl;pd(n.type)&&(jl=n.stateNode,Rl=!1),Al(e,t,n),kd(n.stateNode),jl=r,Rl=s;break;case 5:El||fl(n,t);case 6:if(r=jl,s=Rl,jl=null,Al(e,t,n),Rl=s,null!==(jl=r))if(Rl)try{(9===jl.nodeType?jl.body:"HTML"===jl.nodeName?jl.ownerDocument.body:jl).removeChild(n.stateNode)}catch(i){hu(n,t,i)}else try{jl.removeChild(n.stateNode)}catch(i){hu(n,t,i)}break;case 18:null!==jl&&(Rl?(gd(9===(e=jl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Rh(e)):gd(jl,n.stateNode));break;case 4:r=jl,s=Rl,jl=n.stateNode.containerInfo,Rl=!0,Al(e,t,n),jl=r,Rl=s;break;case 0:case 11:case 14:case 15:El||cl(2,n,t),El||cl(4,n,t),Al(e,t,n);break;case 1:El||(fl(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount&&dl(n,t,r)),Al(e,t,n);break;case 21:Al(e,t,n);break;case 22:El=(r=El)||null!==n.memoizedState,Al(e,t,n),El=r;break;default:Al(e,t,n)}}function Dl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Rh(e)}catch(n){hu(t,t.return,n)}}function Il(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Sl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Sl),t;default:throw Error(r(435,e.tag))}}(e);t.forEach((function(t){var r=yu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}function Pl(e,t){var n=t.deletions;if(null!==n)for(var s=0;s<n.length;s++){var a=n[s],i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(pd(l.type)){jl=l.stateNode,Rl=!1;break e}break;case 5:jl=l.stateNode,Rl=!1;break e;case 3:case 4:jl=l.stateNode.containerInfo,Rl=!0;break e}l=l.return}if(null===jl)throw Error(r(160));_l(i,o,a),jl=null,Rl=!1,null!==(i=a.alternate)&&(i.return=null),a.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ll(t,e),t=t.sibling}var Ml=null;function Ll(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Pl(t,e),Ol(e),4&s&&(cl(3,e,e.return),ll(3,e),cl(5,e,e.return));break;case 1:Pl(t,e),Ol(e),512&s&&(El||null===n||fl(n,n.return)),64&s&&wl&&(null!==(e=e.updateQueue)&&(null!==(s=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?s:n.concat(s))));break;case 26:var a=Ml;if(Pl(t,e),Ol(e),512&s&&(El||null===n||fl(n,n.return)),4&s){var i=null!==n?n.memoizedState:null;if(s=e.memoizedState,null===n)if(null===s)if(null===e.stateNode){e:{s=e.type,n=e.memoizedProps,a=a.ownerDocument||a;t:switch(s){case"title":(!(i=a.getElementsByTagName("title")[0])||i[Ve]||i[Pe]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=a.createElement(s),a.head.insertBefore(i,a.querySelector("head > title"))),nd(i,s,n),i[Pe]=e,Ge(i),s=i;break e;case"link":var o=Vd("link","href",a).get(s+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((i=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}nd(i=a.createElement(s),s,n),a.head.appendChild(i);break;case"meta":if(o=Vd("meta","content",a).get(s+(n.content||"")))for(l=0;l<o.length;l++)if((i=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}nd(i=a.createElement(s),s,n),a.head.appendChild(i);break;default:throw Error(r(468,s))}i[Pe]=e,Ge(i),s=i}e.stateNode=s}else Bd(a,e.type,e.stateNode);else e.stateNode=Ld(a,s,e.memoizedProps);else i!==s?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===s?Bd(a,e.type,e.stateNode):Ld(a,s,e.memoizedProps)):null===s&&null!==e.stateNode&&pl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Pl(t,e),Ol(e),512&s&&(El||null===n||fl(n,n.return)),null!==n&&4&s&&pl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Pl(t,e),Ol(e),512&s&&(El||null===n||fl(n,n.return)),32&e.flags){a=e.stateNode;try{St(a,"")}catch(m){hu(e,e.return,m)}}4&s&&null!=e.stateNode&&pl(e,a=e.memoizedProps,null!==n?n.memoizedProps:a),1024&s&&(kl=!0);break;case 6:if(Pl(t,e),Ol(e),4&s){if(null===e.stateNode)throw Error(r(162));s=e.memoizedProps,n=e.stateNode;try{n.nodeValue=s}catch(m){hu(e,e.return,m)}}break;case 3:if(zd=null,a=Ml,Ml=Td(t.containerInfo),Pl(t,e),Ml=a,Ol(e),4&s&&null!==n&&n.memoizedState.isDehydrated)try{Rh(t.containerInfo)}catch(m){hu(e,e.return,m)}kl&&(kl=!1,Ul(e));break;case 4:s=Ml,Ml=Td(e.stateNode.containerInfo),Pl(t,e),Ol(e),Ml=s;break;case 12:default:Pl(t,e),Ol(e);break;case 13:Pl(t,e),Ol(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(kc=ee()),4&s&&(null!==(s=e.updateQueue)&&(e.updateQueue=null,Il(e,s)));break;case 22:a=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=wl,d=El;if(wl=u||a,El=d||c,Pl(t,e),El=d,wl=u,Ol(e),8192&s)e:for(t=e.stateNode,t._visibility=a?-2&t._visibility:1|t._visibility,a&&(null===n||c||wl||El||zl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(i=c.stateNode,a)"function"==typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=null!=h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"==typeof f?"":(""+f).trim()}}catch(m){hu(c,c.return,m)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=a?"":c.memoizedProps}catch(m){hu(c,c.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&s&&(null!==(s=e.updateQueue)&&(null!==(n=s.retryQueue)&&(s.retryQueue=null,Il(e,n))));break;case 19:Pl(t,e),Ol(e),4&s&&(null!==(s=e.updateQueue)&&(e.updateQueue=null,Il(e,s)));case 30:case 21:}}function Ol(e){var t=e.flags;if(2&t){try{for(var n,s=e.return;null!==s;){if(gl(s)){n=s;break}s=s.return}if(null==n)throw Error(r(160));switch(n.tag){case 27:var a=n.stateNode;bl(e,yl(e),a);break;case 5:var i=n.stateNode;32&n.flags&&(St(i,""),n.flags&=-33),bl(e,yl(e),i);break;case 3:case 4:var o=n.stateNode.containerInfo;vl(e,yl(e),o);break;default:throw Error(r(161))}}catch(l){hu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ul(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ul(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Fl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Tl(e,t.alternate,t),t=t.sibling}function zl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:cl(4,t,t.return),zl(t);break;case 1:fl(t,t.return);var n=t.stateNode;"function"==typeof n.componentWillUnmount&&dl(t,t.return,n),zl(t);break;case 27:kd(t.stateNode);case 26:case 5:fl(t,t.return),zl(t);break;case 22:null===t.memoizedState&&zl(t);break;default:zl(t)}e=e.sibling}}function Vl(e,t,n){for(n=n&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,s=e,a=t,i=a.flags;switch(a.tag){case 0:case 11:case 15:Vl(s,a,n),ll(4,a);break;case 1:if(Vl(s,a,n),"function"==typeof(s=(r=a).stateNode).componentDidMount)try{s.componentDidMount()}catch(c){hu(r,r.return,c)}if(null!==(s=(r=a).updateQueue)){var o=r.stateNode;try{var l=s.shared.hiddenCallbacks;if(null!==l)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)fa(l[s],o)}catch(c){hu(r,r.return,c)}}n&&64&i&&ul(a),hl(a,a.return);break;case 27:xl(a);case 26:case 5:Vl(s,a,n),n&&null===r&&4&i&&ml(a),hl(a,a.return);break;case 12:Vl(s,a,n);break;case 13:Vl(s,a,n),n&&4&i&&Dl(s,a);break;case 22:null===a.memoizedState&&Vl(s,a,n),hl(a,a.return);break;case 30:break;default:Vl(s,a,n)}t=t.sibling}}function Bl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ls(n))}function ql(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ls(e))}function $l(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Hl(e,t,n,r),t=t.sibling}function Hl(e,t,n,r){var s=t.flags;switch(t.tag){case 0:case 11:case 15:$l(e,t,n,r),2048&s&&ll(9,t);break;case 1:case 13:default:$l(e,t,n,r);break;case 3:$l(e,t,n,r),2048&s&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ls(e)));break;case 12:if(2048&s){$l(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,i=a.id,o=a.onPostCommit;"function"==typeof o&&o(i,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){hu(t,t.return,l)}}else $l(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,i=t.alternate,null!==t.memoizedState?2&a._visibility?$l(e,t,n,r):Gl(e,t):2&a._visibility?$l(e,t,n,r):(a._visibility|=2,Wl(e,t,n,r,!!(10256&t.subtreeFlags))),2048&s&&Bl(i,t);break;case 24:$l(e,t,n,r),2048&s&&ql(t.alternate,t)}}function Wl(e,t,n,r,s){for(s=s&&!!(10256&t.subtreeFlags),t=t.child;null!==t;){var a=e,i=t,o=n,l=r,c=i.flags;switch(i.tag){case 0:case 11:case 15:Wl(a,i,o,l,s),ll(8,i);break;case 23:break;case 22:var u=i.stateNode;null!==i.memoizedState?2&u._visibility?Wl(a,i,o,l,s):Gl(a,i):(u._visibility|=2,Wl(a,i,o,l,s)),s&&2048&c&&Bl(i.alternate,i);break;case 24:Wl(a,i,o,l,s),s&&2048&c&&ql(i.alternate,i);break;default:Wl(a,i,o,l,s)}t=t.sibling}}function Gl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,s=r.flags;switch(r.tag){case 22:Gl(n,r),2048&s&&Bl(r.alternate,r);break;case 24:Gl(n,r),2048&s&&ql(r.alternate,r);break;default:Gl(n,r)}t=t.sibling}}var Kl=8192;function Ql(e){if(e.subtreeFlags&Kl)for(e=e.child;null!==e;)Xl(e),e=e.sibling}function Xl(e){switch(e.tag){case 26:Ql(e),e.flags&Kl&&null!==e.memoizedState&&function(e,t,n){if(null===$d)throw Error(r(475));var s=$d;if(!("stylesheet"!==t.type||"string"==typeof n.media&&!1===matchMedia(n.media).matches||4&t.state.loading)){if(null===t.instance){var a=_d(n.href),i=e.querySelector(Dd(a));if(i)return null!==(e=i._p)&&"object"==typeof e&&"function"==typeof e.then&&(s.count++,s=Wd.bind(s),e.then(s,s)),t.state.loading|=4,t.instance=i,void Ge(i);i=e.ownerDocument||e,n=Id(n),(a=Sd.get(a))&&Ud(n,a),Ge(i=i.createElement("link"));var o=i;o._p=new Promise((function(e,t){o.onload=e,o.onerror=t})),nd(i,"link",n),t.instance=i}null===s.stylesheets&&(s.stylesheets=new Map),s.stylesheets.set(t,e),(e=t.state.preload)&&!(3&t.state.loading)&&(s.count++,t=Wd.bind(s),e.addEventListener("load",t),e.addEventListener("error",t))}}(Ml,e.memoizedState,e.memoizedProps);break;case 5:default:Ql(e);break;case 3:case 4:var t=Ml;Ml=Td(e.stateNode.containerInfo),Ql(e),Ml=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Kl,Kl=16777216,Ql(e),Kl=t):Ql(e))}}function Yl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Jl(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Nl=r,tc(r,e)}Yl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Zl(e),e=e.sibling}function Zl(e){switch(e.tag){case 0:case 11:case 15:Jl(e),2048&e.flags&&cl(9,e,e.return);break;case 3:case 12:default:Jl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,ec(e)):Jl(e)}}function ec(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Nl=r,tc(r,e)}Yl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:cl(8,t,t.return),ec(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,ec(t));break;default:ec(t)}e=e.sibling}}function tc(e,t){for(;null!==Nl;){var n=Nl;switch(n.tag){case 0:case 11:case 15:cl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ls(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Nl=r;else e:for(n=e;null!==Nl;){var s=(r=Nl).sibling,a=r.return;if(Cl(r),r===n){Nl=null;break e}if(null!==s){s.return=a,Nl=s;break e}Nl=a}}}var nc={getCacheForType:function(e){var t=js(Ps),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},rc="function"==typeof WeakMap?WeakMap:Map,sc=0,ac=null,ic=null,oc=0,lc=0,cc=null,uc=!1,dc=!1,hc=!1,fc=0,mc=0,pc=0,gc=0,yc=0,vc=0,bc=0,xc=null,wc=null,Ec=!1,kc=0,Sc=1/0,Nc=null,Tc=null,Cc=0,jc=null,Rc=null,Ac=0,_c=0,Dc=null,Ic=null,Pc=0,Mc=null;function Lc(){if(2&sc&&0!==oc)return oc&-oc;if(null!==_.T){return 0!==Fs?Fs:_u()}return De()}function Oc(){0===vc&&(vc=536870912&oc&&!os?536870912:ke());var e=ao.current;return null!==e&&(e.flags|=32),vc}function Uc(e,t,n){(e!==ac||2!==lc&&9!==lc)&&null===e.cancelPendingCommit||(Hc(e,0),Bc(e,oc,vc,!1)),Ce(e,n),2&sc&&e===ac||(e===ac&&(!(2&sc)&&(gc|=n),4===mc&&Bc(e,oc,vc,!1)),Su(e))}function Fc(e,t,n){if(6&sc)throw Error(r(327));for(var s=!n&&!(124&t)&&!(t&e.expiredLanes)||xe(e,t),a=s?function(e,t){var n=sc;sc|=2;var s=Gc(),a=Kc();ac!==e||oc!==t?(Nc=null,Sc=ee()+500,Hc(e,t)):dc=xe(e,t);e:for(;;)try{if(0!==lc&&null!==ic){t=ic;var i=cc;t:switch(lc){case 1:lc=0,cc=null,tu(e,t,i,1);break;case 2:case 9:if(Ys(i)){lc=0,cc=null,eu(t);break}t=function(){2!==lc&&9!==lc||ac!==e||(lc=7),Su(e)},i.then(t,t);break e;case 3:lc=7;break e;case 4:lc=5;break e;case 7:Ys(i)?(lc=0,cc=null,eu(t)):(lc=0,cc=null,tu(e,t,i,7));break;case 5:var o=null;switch(ic.tag){case 26:o=ic.memoizedState;case 5:case 27:var l=ic;if(!o||qd(o)){lc=0,cc=null;var c=l.sibling;if(null!==c)ic=c;else{var u=l.return;null!==u?(ic=u,nu(u)):ic=null}break t}}lc=0,cc=null,tu(e,t,i,5);break;case 6:lc=0,cc=null,tu(e,t,i,6);break;case 8:$c(),mc=6;break e;default:throw Error(r(462))}}Jc();break}catch(d){Wc(e,d)}return xs=bs=null,_.H=s,_.A=a,sc=n,null!==ic?0:(ac=null,oc=0,Ar(),mc)}(e,t):Xc(e,t,!0),i=s;;){if(0===a){dc&&!s&&Bc(e,t,0,!1);break}if(n=e.current.alternate,!i||Vc(n)){if(2===a){if(i=t,e.errorRecoveryDisabledLanes&i)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;a=xc;var c=l.current.memoizedState.isDehydrated;if(c&&(Hc(l,o).flags|=256),2!==(o=Xc(l,o,!1))){if(hc&&!c){l.errorRecoveryDisabledLanes|=i,gc|=i,a=4;break e}i=wc,wc=a,null!==i&&(null===wc?wc=i:wc.push.apply(wc,i))}a=o}if(i=!1,2!==a)continue}}if(1===a){Hc(e,0),Bc(e,t,0,!0);break}e:{switch(s=e,i=a){case 0:case 1:throw Error(r(345));case 4:if((4194048&t)!==t)break;case 6:Bc(s,t,vc,!uc);break e;case 2:wc=null;break;case 3:case 5:break;default:throw Error(r(329))}if((62914560&t)===t&&10<(a=kc+300-ee())){if(Bc(s,t,vc,!uc),0!==be(s,0,!0))break e;s.timeoutHandle=ud(zc.bind(null,s,n,wc,Nc,Ec,t,vc,gc,bc,uc,i,2,-0,0),a)}else zc(s,n,wc,Nc,Ec,t,vc,gc,bc,uc,i,0,-0,0)}break}a=Xc(e,t,!1),i=!1}Su(e)}function zc(e,t,n,s,a,i,o,l,c,u,d,h,f,m){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||!(16785408&~h))&&($d={stylesheets:null,count:0,unsuspend:Hd},Xl(t),null!==(h=function(){if(null===$d)throw Error(r(475));var e=$d;return e.stylesheets&&0===e.count&&Kd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout((function(){if(e.stylesheets&&Kd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}}),6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(su.bind(null,e,t,i,n,s,a,o,l,c,d,1,f,m)),void Bc(e,i,o,!u);su(e,t,i,n,s,a,o,l,c)}function Vc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!Yn(a(),s))return!1}catch(i){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bc(e,t,n,r){t&=~yc,t&=~gc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var s=t;0<s;){var a=31-he(s),i=1<<a;r[a]=-1,s&=~i}0!==n&&je(e,n,t)}function qc(){return!!(6&sc)||(Nu(0),!1)}function $c(){if(null!==ic){if(0===lc)var e=ic.return;else xs=bs=null,Fa(e=ic),Xi=null,Yi=0,e=ic;for(;null!==e;)ol(e.alternate,e),e=e.return;ic=null}}function Hc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,dd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),$c(),ac=e,ic=n=zr(e.current,null),oc=t,lc=0,cc=null,uc=!1,dc=xe(e,t),hc=!1,bc=vc=yc=gc=pc=mc=0,wc=xc=null,Ec=!1,8&t&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var s=31-he(r),a=1<<s;t|=e[s],r&=~a}return fc=t,Ar(),n}function Wc(e,t){wa=null,_.H=Wi,t===Gs||t===Qs?(t=ta(),lc=3):t===Ks?(t=ta(),lc=4):lc=t===jo?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,cc=t,null===ic&&(mc=1,ko(e,Tr(t,e.current)))}function Gc(){var e=_.H;return _.H=Wi,null===e?Wi:e}function Kc(){var e=_.A;return _.A=nc,e}function Qc(){mc=4,uc||(4194048&oc)!==oc&&null!==ao.current||(dc=!0),!(134217727&pc)&&!(134217727&gc)||null===ac||Bc(ac,oc,vc,!1)}function Xc(e,t,n){var r=sc;sc|=2;var s=Gc(),a=Kc();ac===e&&oc===t||(Nc=null,Hc(e,t)),t=!1;var i=mc;e:for(;;)try{if(0!==lc&&null!==ic){var o=ic,l=cc;switch(lc){case 8:$c(),i=6;break e;case 3:case 2:case 9:case 6:null===ao.current&&(t=!0);var c=lc;if(lc=0,cc=null,tu(e,o,l,c),n&&dc){i=0;break e}break;default:c=lc,lc=0,cc=null,tu(e,o,l,c)}}Yc(),i=mc;break}catch(u){Wc(e,u)}return t&&e.shellSuspendCounter++,xs=bs=null,sc=r,_.H=s,_.A=a,null===ic&&(ac=null,oc=0,Ar()),i}function Yc(){for(;null!==ic;)Zc(ic)}function Jc(){for(;null!==ic&&!J();)Zc(ic)}function Zc(e){var t=Zo(e.alternate,e,fc);e.memoizedProps=e.pendingProps,null===t?nu(e):ic=t}function eu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Uo(n,t,t.pendingProps,t.type,void 0,oc);break;case 11:t=Uo(n,t,t.pendingProps,t.type.render,t.ref,oc);break;case 5:Fa(t);default:ol(n,t),t=Zo(n,t=ic=Vr(t,fc),fc)}e.memoizedProps=e.pendingProps,null===t?nu(e):ic=t}function tu(e,t,n,s){xs=bs=null,Fa(t),Xi=null,Yi=0;var a=t.return;try{if(function(e,t,n,s,a){if(n.flags|=32768,null!==s&&"object"==typeof s&&"function"==typeof s.then){if(null!==(t=n.alternate)&&Ns(t,n,a,!0),null!==(n=ao.current)){switch(n.tag){case 13:return null===io?Qc():null===n.alternate&&0===mc&&(mc=3),n.flags&=-257,n.flags|=65536,n.lanes=a,s===Xs?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([s]):t.add(s),fu(e,s,a)),!1;case 22:return n.flags|=65536,s===Xs?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([s]):n.add(s),fu(e,s,a)),!1}throw Error(r(435,n.tag))}return fu(e,s,a),Qc(),!1}if(os)return null!==(t=ao.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=a,s!==us&&ys(Tr(e=Error(r(422),{cause:s}),n))):(s!==us&&ys(Tr(t=Error(r(423),{cause:s}),n)),(e=e.current.alternate).flags|=65536,a&=-a,e.lanes|=a,s=Tr(s,n),ca(e,a=No(e.stateNode,s,a)),4!==mc&&(mc=2)),!1;var i=Error(r(520),{cause:s});if(i=Tr(i,n),null===xc?xc=[i]:xc.push(i),4!==mc&&(mc=2),null===t)return!0;s=Tr(s,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,ca(n,e=No(n.stateNode,s,e)),!1;case 1:if(t=n.type,i=n.stateNode,!(128&n.flags||"function"!=typeof t.getDerivedStateFromError&&(null===i||"function"!=typeof i.componentDidCatch||null!==Tc&&Tc.has(i))))return n.flags|=65536,a&=-a,n.lanes|=a,Co(a=To(a),e,n,s),ca(n,a),!1}n=n.return}while(null!==n);return!1}(e,a,t,n,oc))return mc=1,ko(e,Tr(n,e.current)),void(ic=null)}catch(i){if(null!==a)throw ic=a,i;return mc=1,ko(e,Tr(n,e.current)),void(ic=null)}32768&t.flags?(os||1===s?e=!0:dc||536870912&oc?e=!1:(uc=e=!0,(2===s||9===s||3===s||6===s)&&(null!==(s=ao.current)&&13===s.tag&&(s.flags|=16384))),ru(t,e)):nu(t)}function nu(e){var t=e;do{if(32768&t.flags)return void ru(t,uc);e=t.return;var n=al(t.alternate,t,fc);if(null!==n)return void(ic=n);if(null!==(t=t.sibling))return void(ic=t);ic=t=e}while(null!==t);0===mc&&(mc=5)}function ru(e,t){do{var n=il(e.alternate,e);if(null!==n)return n.flags&=32767,void(ic=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(ic=e);ic=e=n}while(null!==e);mc=6,ic=null}function su(e,t,n,s,a,i,o,l,c){e.cancelPendingCommit=null;do{cu()}while(0!==Cc);if(6&sc)throw Error(r(327));if(null!==t){if(t===e.current)throw Error(r(177));if(i=t.lanes|t.childLanes,function(e,t,n,r,s,a){var i=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=i&~n;0<n;){var u=31-he(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&je(e,r,0),0!==a&&0===s&&0!==e.tag&&(e.suspendedLanes|=a&~(i&~t))}(e,n,i|=Rr,o,l,c),e===ac&&(ic=ac=null,oc=0),Rc=t,jc=e,Ac=n,_c=i,Dc=a,Ic=s,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,K(se,(function(){return uu(),null}))):(e.callbackNode=null,e.callbackPriority=0),s=!!(13878&t.flags),13878&t.subtreeFlags||s){s=_.T,_.T=null,a=D.p,D.p=2,o=sc,sc|=4;try{!function(e,t){if(e=e.containerInfo,rd=sh,rr(e=nr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var s=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(s&&0!==s.rangeCount){n=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==n||0!==a&&3!==h.nodeType||(l=o+a),h!==i||0!==s&&3!==h.nodeType||(c=o+s),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++u===a&&(l=o),f===i&&++d===s&&(c=o),null!==(m=h.nextSibling))break;f=(h=f).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(sd={focusedElem:e,selectionRange:n},sh=!1,Nl=t;null!==Nl;)if(e=(t=Nl).child,1024&t.subtreeFlags&&null!==e)e.return=t,Nl=e;else for(;null!==Nl;){switch(i=(t=Nl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==i){e=void 0,n=t,a=i.memoizedProps,i=i.memoizedState,s=n.stateNode;try{var p=vo(n.type,a,(n.elementType,n.type));e=s.getSnapshotBeforeUpdate(p,i),s.__reactInternalSnapshotBeforeUpdate=e}catch(y){hu(n,n.return,y)}}break;case 3:if(1024&e)if(9===(n=(e=t.stateNode.containerInfo).nodeType))yd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":yd(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(r(163))}if(null!==(e=t.sibling)){e.return=t.return,Nl=e;break}Nl=t.return}}(e,t)}finally{sc=o,D.p=a,_.T=s}}Cc=1,au(),iu(),ou()}}function au(){if(1===Cc){Cc=0;var e=jc,t=Rc,n=!!(13878&t.flags);if(13878&t.subtreeFlags||n){n=_.T,_.T=null;var r=D.p;D.p=2;var s=sc;sc|=4;try{Ll(t,e);var a=sd,i=nr(e.containerInfo),o=a.focusedElem,l=a.selectionRange;if(i!==o&&o&&o.ownerDocument&&tr(o.ownerDocument.documentElement,o)){if(null!==l&&rr(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),m=o.textContent.length,p=Math.min(l.start,m),g=void 0===l.end?p:Math.min(l.end,m);!f.extend&&p>g&&(i=g,g=p,p=i);var y=er(o,p),v=er(o,g);if(y&&v&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var b=d.createRange();b.setStart(y.node,y.offset),f.removeAllRanges(),p>g?(f.addRange(b),f.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),f.addRange(b))}}}}for(d=[],f=o;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"==typeof o.focus&&o.focus(),o=0;o<d.length;o++){var x=d[o];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}sh=!!rd,sd=rd=null}finally{sc=s,D.p=r,_.T=n}}e.current=t,Cc=2}}function iu(){if(2===Cc){Cc=0;var e=jc,t=Rc,n=!!(8772&t.flags);if(8772&t.subtreeFlags||n){n=_.T,_.T=null;var r=D.p;D.p=2;var s=sc;sc|=4;try{Tl(e,t.alternate,t)}finally{sc=s,D.p=r,_.T=n}}Cc=3}}function ou(){if(4===Cc||3===Cc){Cc=0,Z();var e=jc,t=Rc,n=Ac,r=Ic;10256&t.subtreeFlags||10256&t.flags?Cc=5:(Cc=0,Rc=jc=null,lu(e,e.pendingLanes));var s=e.pendingLanes;if(0===s&&(Tc=null),_e(n),t=t.stateNode,ue&&"function"==typeof ue.onCommitFiberRoot)try{ue.onCommitFiberRoot(ce,t,void 0,!(128&~t.current.flags))}catch(l){}if(null!==r){t=_.T,s=D.p,D.p=2,_.T=null;try{for(var a=e.onRecoverableError,i=0;i<r.length;i++){var o=r[i];a(o.value,{componentStack:o.stack})}}finally{_.T=t,D.p=s}}3&Ac&&cu(),Su(e),s=e.pendingLanes,4194090&n&&42&s?e===Mc?Pc++:(Pc=0,Mc=e):Pc=0,Nu(0)}}function lu(e,t){0==(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ls(t)))}function cu(e){return au(),iu(),ou(),uu()}function uu(){if(5!==Cc)return!1;var e=jc,t=_c;_c=0;var n=_e(Ac),s=_.T,a=D.p;try{D.p=32>n?32:n,_.T=null,n=Dc,Dc=null;var i=jc,o=Ac;if(Cc=0,Rc=jc=null,Ac=0,6&sc)throw Error(r(331));var l=sc;if(sc|=4,Zl(i.current),Hl(i,i.current,o,n),sc=l,Nu(0,!1),ue&&"function"==typeof ue.onPostCommitFiberRoot)try{ue.onPostCommitFiberRoot(ce,i)}catch(c){}return!0}finally{D.p=a,_.T=s,lu(e,t)}}function du(e,t,n){t=Tr(n,t),null!==(e=oa(e,t=No(e.stateNode,t,2),2))&&(Ce(e,2),Su(e))}function hu(e,t,n){if(3===e.tag)du(e,e,n);else for(;null!==t;){if(3===t.tag){du(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Tc||!Tc.has(r))){e=Tr(n,e),null!==(r=oa(t,n=To(2),2))&&(Co(n,r,t,e),Ce(r,2),Su(r));break}}t=t.return}}function fu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new rc;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(hc=!0,s.add(n),e=mu.bind(null,e,t,n),t.then(e,e))}function mu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,ac===e&&(oc&n)===n&&(4===mc||3===mc&&(62914560&oc)===oc&&300>ee()-kc?!(2&sc)&&Hc(e,0):yc|=n,bc===oc&&(bc=0)),Su(e)}function pu(e,t){0===t&&(t=Ne()),null!==(e=Ir(e,t))&&(Ce(e,t),Su(e))}function gu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),pu(e,n)}function yu(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(r(314))}null!==s&&s.delete(t),pu(e,n)}var vu=null,bu=null,xu=!1,wu=!1,Eu=!1,ku=0;function Su(e){e!==bu&&null===e.next&&(null===bu?vu=bu=e:bu=bu.next=e),wu=!0,xu||(xu=!0,fd((function(){6&sc?K(ne,Tu):Cu()})))}function Nu(e,t){if(!Eu&&wu){Eu=!0;do{for(var n=!1,r=vu;null!==r;){if(0!==e){var s=r.pendingLanes;if(0===s)var a=0;else{var i=r.suspendedLanes,o=r.pingedLanes;a=(1<<31-he(42|e)+1)-1,a=201326741&(a&=s&~(i&~o))?201326741&a|1:a?2|a:0}0!==a&&(n=!0,Au(r,a))}else a=oc,!(3&(a=be(r,r===ac?a:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||xe(r,a)||(n=!0,Au(r,a));r=r.next}}while(n);Eu=!1}}function Tu(){Cu()}function Cu(){wu=xu=!1;var e=0;0!==ku&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==cd&&(cd=e,!0);return cd=null,!1}()&&(e=ku),ku=0);for(var t=ee(),n=null,r=vu;null!==r;){var s=r.next,a=ju(r,t);0===a?(r.next=null,null===n?vu=s:n.next=s,null===s&&(bu=n)):(n=r,(0!==e||3&a)&&(wu=!0)),r=s}Nu(e)}function ju(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,a=-62914561&e.pendingLanes;0<a;){var i=31-he(a),o=1<<i,l=s[i];-1===l?o&n&&!(o&r)||(s[i]=Ee(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}if(n=oc,n=be(e,e===(t=ac)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===lc||9===lc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&Y(r),e.callbackNode=null,e.callbackPriority=0;if(!(3&n)||xe(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&Y(r),_e(n)){case 2:case 8:n=re;break;case 32:default:n=se;break;case 268435456:n=ie}return r=Ru.bind(null,e),n=K(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&Y(r),e.callbackPriority=2,e.callbackNode=null,2}function Ru(e,t){if(0!==Cc&&5!==Cc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(cu()&&e.callbackNode!==n)return null;var r=oc;return 0===(r=be(e,e===ac?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Fc(e,r,t),ju(e,ee()),null!=e.callbackNode&&e.callbackNode===n?Ru.bind(null,e):null)}function Au(e,t){if(cu())return null;Fc(e,t,!0)}function _u(){return 0===ku&&(ku=ke()),ku}function Du(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:_t(""+e)}function Iu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Pu=0;Pu<kr.length;Pu++){var Mu=kr[Pu];Sr(Mu.toLowerCase(),"on"+(Mu[0].toUpperCase()+Mu.slice(1)))}Sr(pr,"onAnimationEnd"),Sr(gr,"onAnimationIteration"),Sr(yr,"onAnimationStart"),Sr("dblclick","onDoubleClick"),Sr("focusin","onFocus"),Sr("focusout","onBlur"),Sr(vr,"onTransitionRun"),Sr(br,"onTransitionStart"),Sr(xr,"onTransitionCancel"),Sr(wr,"onTransitionEnd"),Ye("onMouseEnter",["mouseout","mouseover"]),Ye("onMouseLeave",["mouseout","mouseover"]),Ye("onPointerEnter",["pointerout","pointerover"]),Ye("onPointerLeave",["pointerout","pointerover"]),Xe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ou=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lu));function Uu(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var o=r[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&s.isPropagationStopped())break e;a=o,s.currentTarget=c;try{a(s)}catch(u){bo(u)}s.currentTarget=null,a=l}else for(i=0;i<r.length;i++){if(l=(o=r[i]).instance,c=o.currentTarget,o=o.listener,l!==a&&s.isPropagationStopped())break e;a=o,s.currentTarget=c;try{a(s)}catch(u){bo(u)}s.currentTarget=null,a=l}}}}function Fu(e,t){var n=t[Oe];void 0===n&&(n=t[Oe]=new Set);var r=e+"__bubble";n.has(r)||(qu(t,e,2,!1),n.add(r))}function zu(e,t,n){var r=0;t&&(r|=4),qu(n,e,r,t)}var Vu="_reactListening"+Math.random().toString(36).slice(2);function Bu(e){if(!e[Vu]){e[Vu]=!0,Ke.forEach((function(t){"selectionchange"!==t&&(Ou.has(t)||zu(t,!1,e),zu(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vu]||(t[Vu]=!0,zu("selectionchange",!1,t))}}function qu(e,t,n,r){switch(dh(t)){case 2:var s=ah;break;case 8:s=ih;break;default:s=oh}n=s.bind(null,t,n,e),s=void 0,!Vt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function $u(e,t,n,r,s){var i=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var l=r.stateNode.containerInfo;if(l===s)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===s)return;o=o.return}for(;null!==l;){if(null===(o=qe(l)))return;if(5===(c=o.tag)||6===c||26===c||27===c){r=i=o;continue e}l=l.parentNode}}r=r.return}Ut((function(){var r=i,s=It(n),o=[];e:{var l=Er.get(e);if(void 0!==l){var c=tn,u=e;switch(e){case"keypress":if(0===Gt(n))break e;case"keydown":case"keyup":c=yn;break;case"focusin":u="focus",c=ln;break;case"focusout":u="blur",c=ln;break;case"beforeblur":case"afterblur":c=ln;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=an;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=on;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=bn;break;case pr:case gr:case yr:c=cn;break;case wr:c=xn;break;case"scroll":case"scrollend":c=rn;break;case"wheel":c=wn;break;case"copy":case"cut":case"paste":c=un;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=vn;break;case"toggle":case"beforetoggle":c=En}var d=!!(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==l?l+"Capture":null:l;d=[];for(var m,p=r;null!==p;){var g=p;if(m=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===m||null===f||null!=(g=Ft(p,f))&&d.push(Hu(p,g,m)),h)break;p=p.return}0<d.length&&(l=new c(l,u,null,n,s),o.push({event:l,listeners:d}))}}if(!(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||n===Dt||!(u=n.relatedTarget||n.fromElement)||!qe(u)&&!u[Le])&&(c||l)&&(l=s.window===s?s:(l=s.ownerDocument)?l.defaultView||l.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?qe(u):null)&&(h=a(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=an,g="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=vn,g="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==c?l:He(c),m=null==u?l:He(u),(l=new d(g,p+"leave",c,n,s)).target=h,l.relatedTarget=m,g=null,qe(s)===r&&((d=new d(f,p+"enter",u,n,s)).target=m,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(f=u,p=0,m=d=c;m;m=Gu(m))p++;for(m=0,g=f;g;g=Gu(g))m++;for(;0<p-m;)d=Gu(d),p--;for(;0<m-p;)f=Gu(f),m--;for(;p--;){if(d===f||null!==f&&d===f.alternate)break e;d=Gu(d),f=Gu(f)}d=null}else d=null;null!==c&&Ku(o,l,c,d,!1),null!==u&&null!==h&&Ku(o,h,u,d,!0)}if("select"===(c=(l=r?He(r):window).nodeName&&l.nodeName.toLowerCase())||"input"===c&&"file"===l.type)var y=zn;else if(Pn(l))if(Vn)y=Xn;else{y=Kn;var v=Gn}else!(c=l.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==l.type&&"radio"!==l.type?r&&jt(r.elementType)&&(y=zn):y=Qn;switch(y&&(y=y(e,r))?Mn(o,y,n,s):(v&&v(e,l,r),"focusout"===e&&r&&"number"===l.type&&null!=r.memoizedProps.value&&xt(l,"number",l.value)),v=r?He(r):window,e){case"focusin":(Pn(v)||"true"===v.contentEditable)&&(ar=v,ir=r,or=null);break;case"focusout":or=ir=ar=null;break;case"mousedown":lr=!0;break;case"contextmenu":case"mouseup":case"dragend":lr=!1,cr(o,n,s);break;case"selectionchange":if(sr)break;case"keydown":case"keyup":cr(o,n,s)}var b;if(Sn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Dn?An(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Cn&&"ko"!==n.locale&&(Dn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Dn&&(b=Wt()):($t="value"in(qt=s)?qt.value:qt.textContent,Dn=!0)),0<(v=Wu(r,x)).length&&(x=new dn(x,e,null,n,s),o.push({event:x,listeners:v}),b?x.data=b:null!==(b=_n(n))&&(x.data=b))),(b=Tn?function(e,t){switch(e){case"compositionend":return _n(t);case"keypress":return 32!==t.which?null:(Rn=!0,jn);case"textInput":return(e=t.data)===jn&&Rn?null:e;default:return null}}(e,n):function(e,t){if(Dn)return"compositionend"===e||!Sn&&An(e,t)?(e=Wt(),Ht=$t=qt=null,Dn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(x=Wu(r,"onBeforeInput")).length&&(v=new dn("onBeforeInput","beforeinput",null,n,s),o.push({event:v,listeners:x}),v.data=b)),function(e,t,n,r,s){if("submit"===t&&n&&n.stateNode===s){var a=Du((s[Me]||null).action),i=r.submitter;i&&null!==(t=(t=i[Me]||null)?Du(t.formAction):i.getAttribute("formAction"))&&(a=t,i=null);var o=new tn("action","action",null,r,s);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==ku){var e=i?Iu(s,i):new FormData(s);Di(n,{pending:!0,data:e,method:s.method,action:a},null,e)}}else"function"==typeof a&&(o.preventDefault(),e=i?Iu(s,i):new FormData(s),Di(n,{pending:!0,data:e,method:s.method,action:a},a,e))},currentTarget:s}]})}}(o,e,r,n,s)}Uu(o,t)}))}function Hu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wu(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,a=s.stateNode;if(5!==(s=s.tag)&&26!==s&&27!==s||null===a||(null!=(s=Ft(e,n))&&r.unshift(Hu(e,s,a)),null!=(s=Ft(e,t))&&r.push(Hu(e,s,a))),3===e.tag)return r;e=e.return}return[]}function Gu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Ku(e,t,n,r,s){for(var a=t._reactName,i=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===c||(l=c,s?null!=(c=Ft(n,a))&&i.unshift(Hu(n,c,l)):s||null!=(c=Ft(n,a))&&i.push(Hu(n,c,l))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Qu=/\r\n?/g,Xu=/\u0000|\uFFFD/g;function Yu(e){return("string"==typeof e?e:""+e).replace(Qu,"\n").replace(Xu,"")}function Ju(e,t){return t=Yu(t),Yu(e)===t}function Zu(){}function ed(e,t,n,s,a,i){switch(n){case"children":"string"==typeof s?"body"===t||"textarea"===t&&""===s||St(e,s):("number"==typeof s||"bigint"==typeof s)&&"body"!==t&&St(e,""+s);break;case"className":st(e,"class",s);break;case"tabIndex":st(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":st(e,n,s);break;case"style":Ct(e,s,i);break;case"data":if("object"!==t){st(e,"data",s);break}case"src":case"href":if(""===s&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==s||"function"==typeof s||"symbol"==typeof s||"boolean"==typeof s){e.removeAttribute(n);break}s=_t(""+s),e.setAttribute(n,s);break;case"action":case"formAction":if("function"==typeof s){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof i&&("formAction"===n?("input"!==t&&ed(e,t,"name",a.name,a,null),ed(e,t,"formEncType",a.formEncType,a,null),ed(e,t,"formMethod",a.formMethod,a,null),ed(e,t,"formTarget",a.formTarget,a,null)):(ed(e,t,"encType",a.encType,a,null),ed(e,t,"method",a.method,a,null),ed(e,t,"target",a.target,a,null))),null==s||"symbol"==typeof s||"boolean"==typeof s){e.removeAttribute(n);break}s=_t(""+s),e.setAttribute(n,s);break;case"onClick":null!=s&&(e.onclick=Zu);break;case"onScroll":null!=s&&Fu("scroll",e);break;case"onScrollEnd":null!=s&&Fu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=s){if("object"!=typeof s||!("__html"in s))throw Error(r(61));if(null!=(n=s.__html)){if(null!=a.children)throw Error(r(60));e.innerHTML=n}}break;case"multiple":e.multiple=s&&"function"!=typeof s&&"symbol"!=typeof s;break;case"muted":e.muted=s&&"function"!=typeof s&&"symbol"!=typeof s;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==s||"function"==typeof s||"boolean"==typeof s||"symbol"==typeof s){e.removeAttribute("xlink:href");break}n=_t(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=s&&"function"!=typeof s&&"symbol"!=typeof s?e.setAttribute(n,""+s):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&"function"!=typeof s&&"symbol"!=typeof s?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===s?e.setAttribute(n,""):!1!==s&&null!=s&&"function"!=typeof s&&"symbol"!=typeof s?e.setAttribute(n,s):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&!isNaN(s)&&1<=s?e.setAttribute(n,s):e.removeAttribute(n);break;case"rowSpan":case"start":null==s||"function"==typeof s||"symbol"==typeof s||isNaN(s)?e.removeAttribute(n):e.setAttribute(n,s);break;case"popover":Fu("beforetoggle",e),Fu("toggle",e),rt(e,"popover",s);break;case"xlinkActuate":at(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":at(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":at(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":at(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":at(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":at(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":at(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":at(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":at(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":rt(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&rt(e,n=Rt.get(n)||n,s)}}function td(e,t,n,s,a,i){switch(n){case"style":Ct(e,s,i);break;case"dangerouslySetInnerHTML":if(null!=s){if("object"!=typeof s||!("__html"in s))throw Error(r(61));if(null!=(n=s.__html)){if(null!=a.children)throw Error(r(60));e.innerHTML=n}}break;case"children":"string"==typeof s?St(e,s):("number"==typeof s||"bigint"==typeof s)&&St(e,""+s);break;case"onScroll":null!=s&&Fu("scroll",e);break;case"onScrollEnd":null!=s&&Fu("scrollend",e);break;case"onClick":null!=s&&(e.onclick=Zu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Qe.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(a=n.endsWith("Capture"),t=n.slice(2,a?n.length-7:void 0),"function"==typeof(i=null!=(i=e[Me]||null)?i[n]:null)&&e.removeEventListener(t,i,a),"function"!=typeof s)?n in e?e[n]=s:!0===s?e.setAttribute(n,""):rt(e,n,s):("function"!=typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,s,a)))}}function nd(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fu("error",e),Fu("load",e);var s,a=!1,i=!1;for(s in n)if(n.hasOwnProperty(s)){var o=n[s];if(null!=o)switch(s){case"src":a=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:ed(e,t,s,o,n,null)}}return i&&ed(e,t,"srcSet",n.srcSet,n,null),void(a&&ed(e,t,"src",n.src,n,null));case"input":Fu("invalid",e);var l=s=o=i=null,c=null,u=null;for(a in n)if(n.hasOwnProperty(a)){var d=n[a];if(null!=d)switch(a){case"name":i=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":s=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(r(137,t));break;default:ed(e,t,a,d,n,null)}}return bt(e,s,l,c,u,o,i,!1),void ft(e);case"select":for(i in Fu("invalid",e),a=o=s=null,n)if(n.hasOwnProperty(i)&&null!=(l=n[i]))switch(i){case"value":s=l;break;case"defaultValue":o=l;break;case"multiple":a=l;default:ed(e,t,i,l,n,null)}return t=s,n=o,e.multiple=!!a,void(null!=t?wt(e,!!a,t,!1):null!=n&&wt(e,!!a,n,!0));case"textarea":for(o in Fu("invalid",e),s=i=a=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":a=l;break;case"defaultValue":i=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(r(91));break;default:ed(e,t,o,l,n,null)}return kt(e,a,i,s),void ft(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(a=n[c]))if("selected"===c)e.selected=a&&"function"!=typeof a&&"symbol"!=typeof a;else ed(e,t,c,a,n,null);return;case"dialog":Fu("beforetoggle",e),Fu("toggle",e),Fu("cancel",e),Fu("close",e);break;case"iframe":case"object":Fu("load",e);break;case"video":case"audio":for(a=0;a<Lu.length;a++)Fu(Lu[a],e);break;case"image":Fu("error",e),Fu("load",e);break;case"details":Fu("toggle",e);break;case"embed":case"source":case"link":Fu("error",e),Fu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(a=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:ed(e,t,u,a,n,null)}return;default:if(jt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(a=n[d])&&td(e,t,d,a,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(a=n[l])&&ed(e,t,l,a,n,null))}var rd=null,sd=null;function ad(e){return 9===e.nodeType?e:e.ownerDocument}function id(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function od(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ld(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var cd=null;var ud="function"==typeof setTimeout?setTimeout:void 0,dd="function"==typeof clearTimeout?clearTimeout:void 0,hd="function"==typeof Promise?Promise:void 0,fd="function"==typeof queueMicrotask?queueMicrotask:void 0!==hd?function(e){return hd.resolve(null).then(e).catch(md)}:ud;function md(e){setTimeout((function(){throw e}))}function pd(e){return"head"===e}function gd(e,t){var n=t,r=0,s=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0<r&&8>r){n=r;var i=e.ownerDocument;if(1&n&&kd(i.documentElement),2&n&&kd(i.body),4&n)for(kd(n=i.head),i=n.firstChild;i;){var o=i.nextSibling,l=i.nodeName;i[Ve]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===i.rel.toLowerCase()||n.removeChild(i),i=o}}if(0===s)return e.removeChild(a),void Rh(t);s--}else"$"===n||"$?"===n||"$!"===n?s++:r=n.charCodeAt(0)-48;else r=0;n=a}while(n);Rh(t)}function yd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":yd(n),Be(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function vd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function bd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var xd=null;function wd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function Ed(e,t,n){switch(t=ad(n),e){case"html":if(!(e=t.documentElement))throw Error(r(452));return e;case"head":if(!(e=t.head))throw Error(r(453));return e;case"body":if(!(e=t.body))throw Error(r(454));return e;default:throw Error(r(451))}}function kd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Be(e)}var Sd=new Map,Nd=new Set;function Td(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Cd=D.d;D.d={f:function(){var e=Cd.f(),t=qc();return e||t},r:function(e){var t=$e(e);null!==t&&5===t.tag&&"form"===t.type?Pi(t):Cd.r(e)},D:function(e){Cd.D(e),Rd("dns-prefetch",e,null)},C:function(e,t){Cd.C(e,t),Rd("preconnect",e,t)},L:function(e,t,n){Cd.L(e,t,n);var r=jd;if(r&&e&&t){var s='link[rel="preload"][as="'+yt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(s+='[imagesrcset="'+yt(n.imageSrcSet)+'"]',"string"==typeof n.imageSizes&&(s+='[imagesizes="'+yt(n.imageSizes)+'"]')):s+='[href="'+yt(e)+'"]';var a=s;switch(t){case"style":a=_d(e);break;case"script":a=Pd(e)}Sd.has(a)||(e=c({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Sd.set(a,e),null!==r.querySelector(s)||"style"===t&&r.querySelector(Dd(a))||"script"===t&&r.querySelector(Md(a))||(nd(t=r.createElement("link"),"link",e),Ge(t),r.head.appendChild(t)))}},m:function(e,t){Cd.m(e,t);var n=jd;if(n&&e){var r=t&&"string"==typeof t.as?t.as:"script",s='link[rel="modulepreload"][as="'+yt(r)+'"][href="'+yt(e)+'"]',a=s;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=Pd(e)}if(!Sd.has(a)&&(e=c({rel:"modulepreload",href:e},t),Sd.set(a,e),null===n.querySelector(s))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Md(a)))return}nd(r=n.createElement("link"),"link",e),Ge(r),n.head.appendChild(r)}}},X:function(e,t){Cd.X(e,t);var n=jd;if(n&&e){var r=We(n).hoistableScripts,s=Pd(e),a=r.get(s);a||((a=n.querySelector(Md(s)))||(e=c({src:e,async:!0},t),(t=Sd.get(s))&&Fd(e,t),Ge(a=n.createElement("script")),nd(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(s,a))}},S:function(e,t,n){Cd.S(e,t,n);var r=jd;if(r&&e){var s=We(r).hoistableStyles,a=_d(e);t=t||"default";var i=s.get(a);if(!i){var o={loading:0,preload:null};if(i=r.querySelector(Dd(a)))o.loading=5;else{e=c({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Sd.get(a))&&Ud(e,n);var l=i=r.createElement("link");Ge(l),nd(l,"link",e),l._p=new Promise((function(e,t){l.onload=e,l.onerror=t})),l.addEventListener("load",(function(){o.loading|=1})),l.addEventListener("error",(function(){o.loading|=2})),o.loading|=4,Od(i,t,r)}i={type:"stylesheet",instance:i,count:1,state:o},s.set(a,i)}}},M:function(e,t){Cd.M(e,t);var n=jd;if(n&&e){var r=We(n).hoistableScripts,s=Pd(e),a=r.get(s);a||((a=n.querySelector(Md(s)))||(e=c({src:e,async:!0,type:"module"},t),(t=Sd.get(s))&&Fd(e,t),Ge(a=n.createElement("script")),nd(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(s,a))}}};var jd="undefined"==typeof document?null:document;function Rd(e,t,n){var r=jd;if(r&&"string"==typeof t&&t){var s=yt(t);s='link[rel="'+e+'"][href="'+s+'"]',"string"==typeof n&&(s+='[crossorigin="'+n+'"]'),Nd.has(s)||(Nd.add(s),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(s)&&(nd(t=r.createElement("link"),"link",e),Ge(t),r.head.appendChild(t)))}}function Ad(e,t,n,s){var a,i,o,l,c=(c=V.current)?Td(c):null;if(!c)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof n.precedence&&"string"==typeof n.href?(t=_d(n.href),(s=(n=We(c).hoistableStyles).get(t))||(s={type:"style",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"==typeof n.href&&"string"==typeof n.precedence){e=_d(n.href);var u=We(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Dd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Sd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Sd.set(e,n),u||(a=c,i=e,o=n,l=d.state,a.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=a.createElement("link"),l.preload=i,i.addEventListener("load",(function(){return l.loading|=1})),i.addEventListener("error",(function(){return l.loading|=2})),nd(i,"link",o),Ge(i),a.head.appendChild(i))))),t&&null===s)throw Error(r(528,""));return d}if(t&&null!==s)throw Error(r(529,""));return null;case"script":return t=n.async,"string"==typeof(n=n.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=Pd(n),(s=(n=We(c).hoistableScripts).get(t))||(s={type:"script",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function _d(e){return'href="'+yt(e)+'"'}function Dd(e){return'link[rel="stylesheet"]['+e+"]"}function Id(e){return c({},e,{"data-precedence":e.precedence,precedence:null})}function Pd(e){return'[src="'+yt(e)+'"]'}function Md(e){return"script[async]"+e}function Ld(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+yt(n.href)+'"]');if(s)return t.instance=s,Ge(s),s;var a=c({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Ge(s=(e.ownerDocument||e).createElement("style")),nd(s,"style",a),Od(s,n.precedence,e),t.instance=s;case"stylesheet":a=_d(n.href);var i=e.querySelector(Dd(a));if(i)return t.state.loading|=4,t.instance=i,Ge(i),i;s=Id(n),(a=Sd.get(a))&&Ud(s,a),Ge(i=(e.ownerDocument||e).createElement("link"));var o=i;return o._p=new Promise((function(e,t){o.onload=e,o.onerror=t})),nd(i,"link",s),t.state.loading|=4,Od(i,n.precedence,e),t.instance=i;case"script":return i=Pd(n.src),(a=e.querySelector(Md(i)))?(t.instance=a,Ge(a),a):(s=n,(a=Sd.get(i))&&Fd(s=c({},n),a),Ge(a=(e=e.ownerDocument||e).createElement("script")),nd(a,"link",s),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(r(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(s=t.instance,t.state.loading|=4,Od(s,n.precedence,e));return t.instance}function Od(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=r.length?r[r.length-1]:null,a=s,i=0;i<r.length;i++){var o=r[i];if(o.dataset.precedence===t)a=o;else if(a!==s)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Ud(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Fd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var zd=null;function Vd(e,t,n){if(null===zd){var r=new Map,s=zd=new Map;s.set(n,r)}else(r=(s=zd).get(n))||(r=new Map,s.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var a=n[s];if(!(a[Ve]||a[Pe]||"link"===e&&"stylesheet"===a.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==a.namespaceURI){var i=a.getAttribute(t)||"";i=e+i;var o=r.get(i);o?o.push(a):r.set(i,[a])}}return r}function Bd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function qd(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var $d=null;function Hd(){}function Wd(){if(this.count--,0===this.count)if(this.stylesheets)Kd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Gd=null;function Kd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Gd=new Map,t.forEach(Qd,e),Gd=null,Wd.call(e))}function Qd(e,t){if(!(4&t.state.loading)){var n=Gd.get(e);if(n)var r=n.get(null);else{n=new Map,Gd.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<s.length;a++){var i=s[a];"LINK"!==i.nodeName&&"not all"===i.getAttribute("media")||(n.set(i.dataset.precedence,i),r=i)}r&&n.set(null,r)}i=(s=t.instance).getAttribute("data-precedence"),(a=n.get(i)||r)===r&&n.set(null,s),n.set(i,s),this.count++,r=Wd.bind(this),s.addEventListener("load",r),s.addEventListener("error",r),a?a.parentNode.insertBefore(s,a.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(s,e.firstChild),t.state.loading|=4}}var Xd={$$typeof:v,Provider:null,Consumer:null,_currentValue:I,_currentValue2:I,_threadCount:0};function Yd(e,t,n,r,s,a,i,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Te(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Te(0),this.hiddenUpdates=Te(null),this.identifierPrefix=r,this.onUncaughtError=s,this.onCaughtError=a,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Jd(e,t,n,r,s,a,i,o,l,c,u,d){return e=new Yd(e,t,n,i,o,l,c,d),t=1,!0===a&&(t|=24),a=Ur(3,null,null,t),e.current=a,a.stateNode=e,(t=Ms()).refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},sa(a),e}function Zd(e){return e?e=Lr:Lr}function eh(e,t,n,r,s,a){s=Zd(s),null===r.context?r.context=s:r.pendingContext=s,(r=ia(t)).payload={element:n},null!==(a=void 0===a?null:a)&&(r.callback=a),null!==(n=oa(e,r,t))&&(Uc(n,0,t),la(n,e,t))}function th(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function nh(e,t){th(e,t),(e=e.alternate)&&th(e,t)}function rh(e){if(13===e.tag){var t=Ir(e,67108864);null!==t&&Uc(t,0,67108864),nh(e,67108864)}}var sh=!0;function ah(e,t,n,r){var s=_.T;_.T=null;var a=D.p;try{D.p=2,oh(e,t,n,r)}finally{D.p=a,_.T=s}}function ih(e,t,n,r){var s=_.T;_.T=null;var a=D.p;try{D.p=8,oh(e,t,n,r)}finally{D.p=a,_.T=s}}function oh(e,t,n,r){if(sh){var s=lh(r);if(null===s)$u(e,t,r,ch,n),xh(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return fh=wh(fh,e,t,n,r,s),!0;case"dragenter":return mh=wh(mh,e,t,n,r,s),!0;case"mouseover":return ph=wh(ph,e,t,n,r,s),!0;case"pointerover":var a=s.pointerId;return gh.set(a,wh(gh.get(a)||null,e,t,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,yh.set(a,wh(yh.get(a)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(xh(e,r),4&t&&-1<bh.indexOf(e)){for(;null!==s;){var a=$e(s);if(null!==a)switch(a.tag){case 3:if((a=a.stateNode).current.memoizedState.isDehydrated){var i=ye(a.pendingLanes);if(0!==i){var o=a;for(o.pendingLanes|=2,o.entangledLanes|=2;i;){var l=1<<31-he(i);o.entanglements[1]|=l,i&=~l}Su(a),!(6&sc)&&(Sc=ee()+500,Nu(0))}}break;case 13:null!==(o=Ir(a,2))&&Uc(o,0,2),qc(),nh(a,2)}if(null===(a=lh(r))&&$u(e,t,r,ch,n),a===s)break;s=a}null!==s&&r.stopPropagation()}else $u(e,t,r,null,n)}}function lh(e){return uh(e=It(e))}var ch=null;function uh(e){if(ch=null,null!==(e=qe(e))){var t=a(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=i(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ch=e,null}function dh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(te()){case ne:return 2;case re:return 8;case se:case ae:return 32;case ie:return 268435456;default:return 32}default:return 32}}var hh=!1,fh=null,mh=null,ph=null,gh=new Map,yh=new Map,vh=[],bh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xh(e,t){switch(e){case"focusin":case"focusout":fh=null;break;case"dragenter":case"dragleave":mh=null;break;case"mouseover":case"mouseout":ph=null;break;case"pointerover":case"pointerout":gh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":yh.delete(t.pointerId)}}function wh(e,t,n,r,s,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},null!==t&&(null!==(t=$e(t))&&rh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Eh(e){var t=qe(e.target);if(null!==t){var n=a(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=i(n)))return e.blockedOn=t,void function(e,t){var n=D.p;try{return D.p=e,t()}finally{D.p=n}}(e.priority,(function(){if(13===n.tag){var e=Lc();e=Ae(e);var t=Ir(n,e);null!==t&&Uc(t,0,e),nh(n,e)}}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function kh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=lh(e.nativeEvent);if(null!==n)return null!==(t=$e(n))&&rh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Dt=r,n.target.dispatchEvent(r),Dt=null,t.shift()}return!0}function Sh(e,t,n){kh(e)&&n.delete(t)}function Nh(){hh=!1,null!==fh&&kh(fh)&&(fh=null),null!==mh&&kh(mh)&&(mh=null),null!==ph&&kh(ph)&&(ph=null),gh.forEach(Sh),yh.forEach(Sh)}function Th(t,n){t.blockedOn===n&&(t.blockedOn=null,hh||(hh=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Nh)))}var Ch=null;function jh(t){Ch!==t&&(Ch=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,(function(){Ch===t&&(Ch=null);for(var e=0;e<t.length;e+=3){var n=t[e],r=t[e+1],s=t[e+2];if("function"!=typeof r){if(null===uh(r||n))continue;break}var a=$e(n);null!==a&&(t.splice(e,3),e-=3,Di(a,{pending:!0,data:s,method:n.method,action:r},r,s))}})))}function Rh(e){function t(t){return Th(t,e)}null!==fh&&Th(fh,e),null!==mh&&Th(mh,e),null!==ph&&Th(ph,e),gh.forEach(t),yh.forEach(t);for(var n=0;n<vh.length;n++){var r=vh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<vh.length&&null===(n=vh[0]).blockedOn;)Eh(n),null===n.blockedOn&&vh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var s=n[r],a=n[r+1],i=s[Me]||null;if("function"==typeof a)i||jh(n);else if(i){var o=null;if(a&&a.hasAttribute("formAction")){if(s=a,i=a[Me]||null)o=i.formAction;else if(null!==uh(s))continue}else o=i.action;"function"==typeof o?n[r+1]=o:(n.splice(r,3),r-=3),jh(n)}}}function Ah(e){this._internalRoot=e}function _h(e){this._internalRoot=e}_h.prototype.render=Ah.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));eh(t.current,Lc(),e,t,null,null)},_h.prototype.unmount=Ah.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;eh(e.current,2,null,e,null,null),qc(),t[Le]=null}},_h.prototype.unstable_scheduleHydration=function(e){if(e){var t=De();e={blockedOn:null,target:e,priority:t};for(var n=0;n<vh.length&&0!==t&&t<vh[n].priority;n++);vh.splice(n,0,e),0===n&&Eh(e)}};var Dh=t.version;if("19.1.0"!==Dh)throw Error(r(527,Dh,"19.1.0"));D.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=a(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,s=t;;){var i=n.return;if(null===i)break;var l=i.alternate;if(null===l){if(null!==(s=i.return)){n=s;continue}break}if(i.child===l.child){for(l=i.child;l;){if(l===n)return o(i),e;if(l===s)return o(i),t;l=l.sibling}throw Error(r(188))}if(n.return!==s.return)n=i,s=l;else{for(var c=!1,u=i.child;u;){if(u===n){c=!0,n=i,s=l;break}if(u===s){c=!0,s=i,n=l;break}u=u.sibling}if(!c){for(u=l.child;u;){if(u===n){c=!0,n=l,s=i;break}if(u===s){c=!0,s=l,n=i;break}u=u.sibling}if(!c)throw Error(r(189))}}if(n.alternate!==s)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?l(e):null)?null:e.stateNode};var Ih={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:_,reconcilerVersion:"19.1.0"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Ph=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ph.isDisabled&&Ph.supportsFiber)try{ce=Ph.inject(Ih),ue=Ph}catch(Lh){}}return we.createRoot=function(e,t){if(!s(e))throw Error(r(299));var n=!1,a="",i=xo,o=wo,l=Eo;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(a=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(o=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Jd(e,1,!1,null,0,n,a,i,o,l,0,null),e[Le]=t.current,Bu(e),new Ah(t)},we.hydrateRoot=function(e,t,n){if(!s(e))throw Error(r(299));var a=!1,i="",o=xo,l=wo,c=Eo,u=null;return null!=n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(o=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Jd(e,1,!0,t,0,a,i,o,l,c,0,u)).context=Zd(null),n=t.current,(i=ia(a=Ae(a=Lc()))).callback=null,oa(n,i,a),n=a,t.current.lanes=n,Ce(t,n),Su(t),e[Le]=t.current,Bu(e),new _h(t)},we.version="19.1.0",we}var Te=(be||(be=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),xe.exports=Ne()),xe.exports);const Ce={},je=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map((e=>Promise.resolve(e).then((e=>({status:"fulfilled",value:e})),(e=>({status:"rejected",reason:e}))))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),s=n?.nonce||n?.getAttribute("nonce");r=e(t.map((e=>{if((e=function(e){return"/"+e}(e))in Ce)return;Ce[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script"),r.crossOrigin="",r.href=e,s&&r.setAttribute("nonce",s),document.head.appendChild(r),t?new Promise(((t,n)=>{r.addEventListener("load",t),r.addEventListener("error",(()=>n(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}function s(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then((t=>{for(const e of t||[])"rejected"===e.status&&s(e.reason);return e().catch(s)}))},Re=Y.createContext({});function Ae(e){const t=Y.useRef(null);return null===t.current&&(t.current=e()),t.current}const _e="undefined"!=typeof window,De=_e?Y.useLayoutEffect:Y.useEffect,Ie=Y.createContext(null),Pe=Y.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class Me extends Y.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,n=e instanceof HTMLElement&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=n-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Le({children:t,isPresent:n,anchorX:r}){const s=Y.useId(),a=Y.useRef(null),i=Y.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=Y.useContext(Pe);return Y.useInsertionEffect((()=>{const{width:e,height:t,top:l,left:c,right:u}=i.current;if(n||!a.current||!e||!t)return;const d="left"===r?`left: ${c}`:`right: ${u}`;a.current.dataset.motionPopId=s;const h=document.createElement("style");return o&&(h.nonce=o),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`\n          [data-motion-pop-id="${s}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${t}px !important;\n            ${d}px !important;\n            top: ${l}px !important;\n          }\n        `),()=>{document.head.contains(h)&&document.head.removeChild(h)}}),[n]),e.jsx(Me,{isPresent:n,childRef:a,sizeRef:i,children:Y.cloneElement(t,{ref:a})})}const Oe=({children:t,initial:n,isPresent:r,onExitComplete:s,custom:a,presenceAffectsLayout:i,mode:o,anchorX:l})=>{const c=Ae(Ue),u=Y.useId();let d=!0,h=Y.useMemo((()=>(d=!1,{id:u,initial:n,isPresent:r,custom:a,onExitComplete:e=>{c.set(e,!0);for(const t of c.values())if(!t)return;s&&s()},register:e=>(c.set(e,!1),()=>c.delete(e))})),[r,c,s]);return i&&d&&(h={...h}),Y.useMemo((()=>{c.forEach(((e,t)=>c.set(t,!1)))}),[r]),Y.useEffect((()=>{!r&&!c.size&&s&&s()}),[r]),"popLayout"===o&&(t=e.jsx(Le,{isPresent:r,anchorX:l,children:t})),e.jsx(Ie.Provider,{value:h,children:t})};function Ue(){return new Map}function Fe(e=!0){const t=Y.useContext(Ie);if(null===t)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,a=Y.useId();Y.useEffect((()=>{if(e)return s(a)}),[e]);const i=Y.useCallback((()=>e&&r&&r(a)),[a,r,e]);return!n&&r?[!1,i]:[!0]}const ze=e=>e.key||"";function Ve(e){const t=[];return Y.Children.forEach(e,(e=>{Y.isValidElement(e)&&t.push(e)})),t}const Be=({children:t,custom:n,initial:r=!0,onExitComplete:s,presenceAffectsLayout:a=!0,mode:i="sync",propagate:o=!1,anchorX:l="left"})=>{const[c,u]=Fe(o),d=Y.useMemo((()=>Ve(t)),[t]),h=o&&!c?[]:d.map(ze),f=Y.useRef(!0),m=Y.useRef(d),p=Ae((()=>new Map)),[g,y]=Y.useState(d),[v,b]=Y.useState(d);De((()=>{f.current=!1,m.current=d;for(let e=0;e<v.length;e++){const t=ze(v[e]);h.includes(t)?p.delete(t):!0!==p.get(t)&&p.set(t,!1)}}),[v,h.length,h.join("-")]);const x=[];if(d!==g){let e=[...d];for(let t=0;t<v.length;t++){const n=v[t],r=ze(n);h.includes(r)||(e.splice(t,0,n),x.push(n))}return"wait"===i&&x.length&&(e=x),b(Ve(e)),y(d),null}const{forceRender:w}=Y.useContext(Re);return e.jsx(e.Fragment,{children:v.map((t=>{const g=ze(t),y=!(o&&!c)&&(d===v||h.includes(g));return e.jsx(Oe,{isPresent:y,initial:!(f.current&&!r)&&void 0,custom:n,presenceAffectsLayout:a,mode:i,onExitComplete:y?void 0:()=>{if(!p.has(g))return;p.set(g,!0);let e=!0;p.forEach((t=>{t||(e=!1)})),e&&(w?.(),b(m.current),o&&u?.(),s&&s())},anchorX:l,children:t},g)}))})};function qe(e,t){-1===e.indexOf(t)&&e.push(t)}function $e(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const He=(e,t,n)=>n>t?t:n<e?e:n;const We={},Ge=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),Ke=e=>/^0[^.\s]+$/u.test(e);function Qe(e){let t;return()=>(void 0===t&&(t=e()),t)}const Xe=e=>e,Ye=(e,t)=>n=>t(e(n)),Je=(...e)=>e.reduce(Ye),Ze=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r};class et{constructor(){this.subscriptions=[]}add(e){return qe(this.subscriptions,e),()=>$e(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let s=0;s<r;s++){const r=this.subscriptions[s];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const tt=e=>1e3*e,nt=e=>e/1e3;function rt(e,t){return t?e*(1e3/t):0}const st=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function at(e,t,n,r){if(e===t&&n===r)return Xe;const s=t=>function(e,t,n,r,s){let a,i,o=0;do{i=t+(n-t)/2,a=st(i,r,s)-e,a>0?n=i:t=i}while(Math.abs(a)>1e-7&&++o<12);return i}(t,0,1,e,n);return e=>0===e||1===e?e:st(s(e),t,r)}const it=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,ot=e=>t=>1-e(1-t),lt=at(.33,1.53,.69,.99),ct=ot(lt),ut=it(ct),dt=e=>(e*=2)<1?.5*ct(e):.5*(2-Math.pow(2,-10*(e-1))),ht=e=>1-Math.sin(Math.acos(e)),ft=ot(ht),mt=it(ht),pt=at(.42,0,1,1),gt=at(0,0,.58,1),yt=at(.42,0,.58,1),vt=e=>Array.isArray(e)&&"number"==typeof e[0],bt={linear:Xe,easeIn:pt,easeInOut:yt,easeOut:gt,circIn:ht,circInOut:mt,circOut:ft,backIn:ct,backInOut:ut,backOut:lt,anticipate:dt},xt=e=>{if(vt(e)){e.length;const[t,n,r,s]=e;return at(t,n,r,s)}return"string"==typeof e?bt[e]:e},wt=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Et(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,i=wt.reduce(((e,t)=>(e[t]=function(e){let t=new Set,n=new Set,r=!1,s=!1;const a=new WeakSet;let i={delta:0,timestamp:0,isProcessing:!1};function o(t){a.has(t)&&(l.schedule(t),e()),t(i)}const l={schedule:(e,s=!1,i=!1)=>{const o=i&&r?t:n;return s&&a.add(e),o.has(e)||o.add(e),e},cancel:e=>{n.delete(e),a.delete(e)},process:e=>{i=e,r?s=!0:(r=!0,[t,n]=[n,t],t.forEach(o),t.clear(),r=!1,s&&(s=!1,l.process(e)))}};return l}(a),e)),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:u,update:d,preRender:h,render:f,postRender:m}=i,p=()=>{const a=We.useManualTiming?s.timestamp:performance.now();n=!1,We.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(a-s.timestamp,40),1)),s.timestamp=a,s.isProcessing=!0,o.process(s),l.process(s),c.process(s),u.process(s),d.process(s),h.process(s),f.process(s),m.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(p))};return{schedule:wt.reduce(((t,a)=>{const o=i[a];return t[a]=(t,a=!1,i=!1)=>(n||(n=!0,r=!0,s.isProcessing||e(p)),o.schedule(t,a,i)),t}),{}),cancel:e=>{for(let t=0;t<wt.length;t++)i[wt[t]].cancel(e)},state:s,steps:i}}const{schedule:kt,cancel:St,state:Nt,steps:Tt}=Et("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:Xe,!0);let Ct;function jt(){Ct=void 0}const Rt={now:()=>(void 0===Ct&&Rt.set(Nt.isProcessing||We.useManualTiming?Nt.timestamp:performance.now()),Ct),set:e=>{Ct=e,queueMicrotask(jt)}},At=e=>t=>"string"==typeof t&&t.startsWith(e),_t=At("--"),Dt=At("var(--"),It=e=>!!Dt(e)&&Pt.test(e.split("/*")[0].trim()),Pt=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Mt={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},Lt={...Mt,transform:e=>He(0,1,e)},Ot={...Mt,default:1},Ut=e=>Math.round(1e5*e)/1e5,Ft=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;const zt=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Vt=(e,t)=>n=>Boolean("string"==typeof n&&zt.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),Bt=(e,t,n)=>r=>{if("string"!=typeof r)return r;const[s,a,i,o]=r.match(Ft);return{[e]:parseFloat(s),[t]:parseFloat(a),[n]:parseFloat(i),alpha:void 0!==o?parseFloat(o):1}},qt={...Mt,transform:e=>Math.round((e=>He(0,255,e))(e))},$t={test:Vt("rgb","red"),parse:Bt("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+qt.transform(e)+", "+qt.transform(t)+", "+qt.transform(n)+", "+Ut(Lt.transform(r))+")"};const Ht={test:Vt("#"),parse:function(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}},transform:$t.transform},Wt=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),Gt=Wt("deg"),Kt=Wt("%"),Qt=Wt("px"),Xt=Wt("vh"),Yt=Wt("vw"),Jt=(()=>({...Kt,parse:e=>Kt.parse(e)/100,transform:e=>Kt.transform(100*e)}))(),Zt={test:Vt("hsl","hue"),parse:Bt("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Kt.transform(Ut(t))+", "+Kt.transform(Ut(n))+", "+Ut(Lt.transform(r))+")"},en={test:e=>$t.test(e)||Ht.test(e)||Zt.test(e),parse:e=>$t.test(e)?$t.parse(e):Zt.test(e)?Zt.parse(e):Ht.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?$t.transform(e):Zt.transform(e)},tn=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;const nn="number",rn="color",sn=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function an(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let a=0;const i=t.replace(sn,(e=>(en.test(e)?(r.color.push(a),s.push(rn),n.push(en.parse(e))):e.startsWith("var(")?(r.var.push(a),s.push("var"),n.push(e)):(r.number.push(a),s.push(nn),n.push(parseFloat(e))),++a,"${}"))).split("${}");return{values:n,split:i,indexes:r,types:s}}function on(e){return an(e).values}function ln(e){const{split:t,types:n}=an(e),r=t.length;return e=>{let s="";for(let a=0;a<r;a++)if(s+=t[a],void 0!==e[a]){const t=n[a];s+=t===nn?Ut(e[a]):t===rn?en.transform(e[a]):e[a]}return s}}const cn=e=>"number"==typeof e?0:e;const un={test:function(e){return isNaN(e)&&"string"==typeof e&&(e.match(Ft)?.length||0)+(e.match(tn)?.length||0)>0},parse:on,createTransformer:ln,getAnimatableNone:function(e){const t=on(e);return ln(e)(t.map(cn))}};function dn(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function hn(e,t){return n=>n>0?t:e}const fn=(e,t,n)=>e+(t-e)*n,mn=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},pn=[Ht,$t,Zt];function gn(e){const t=(e=>pn.find((t=>t.test(e))))(e);if(!Boolean(t))return!1;let n=t.parse(e);return t===Zt&&(n=function({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,n/=100;let s=0,a=0,i=0;if(t/=100){const r=n<.5?n*(1+t):n+t-n*t,o=2*n-r;s=dn(o,r,e+1/3),a=dn(o,r,e),i=dn(o,r,e-1/3)}else s=a=i=n;return{red:Math.round(255*s),green:Math.round(255*a),blue:Math.round(255*i),alpha:r}}(n)),n}const yn=(e,t)=>{const n=gn(e),r=gn(t);if(!n||!r)return hn(e,t);const s={...n};return e=>(s.red=mn(n.red,r.red,e),s.green=mn(n.green,r.green,e),s.blue=mn(n.blue,r.blue,e),s.alpha=fn(n.alpha,r.alpha,e),$t.transform(s))},vn=new Set(["none","hidden"]);function bn(e,t){return n=>fn(e,t,n)}function xn(e){return"number"==typeof e?bn:"string"==typeof e?It(e)?hn:en.test(e)?yn:kn:Array.isArray(e)?wn:"object"==typeof e?en.test(e)?yn:En:hn}function wn(e,t){const n=[...e],r=n.length,s=e.map(((e,n)=>xn(e)(e,t[n])));return e=>{for(let t=0;t<r;t++)n[t]=s[t](e);return n}}function En(e,t){const n={...e,...t},r={};for(const s in n)void 0!==e[s]&&void 0!==t[s]&&(r[s]=xn(e[s])(e[s],t[s]));return e=>{for(const t in r)n[t]=r[t](e);return n}}const kn=(e,t)=>{const n=un.createTransformer(t),r=an(e),s=an(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?vn.has(e)&&!s.values.length||vn.has(t)&&!r.values.length?function(e,t){return vn.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):Je(wn(function(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const a=t.types[s],i=e.indexes[a][r[a]],o=e.values[i]??0;n[s]=o,r[a]++}return n}(r,s),s.values),n):hn(e,t)};function Sn(e,t,n){if("number"==typeof e&&"number"==typeof t&&"number"==typeof n)return fn(e,t,n);return xn(e)(e,t)}const Nn=e=>{const t=({timestamp:t})=>e(t);return{start:(e=!0)=>kt.update(t,e),stop:()=>St(t),now:()=>Nt.isProcessing?Nt.timestamp:Rt.now()}},Tn=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let a=0;a<s;a++)r+=e(a/(s-1))+", ";return`linear(${r.substring(0,r.length-2)})`},Cn=2e4;function jn(e){let t=0;let n=e.next(t);for(;!n.done&&t<Cn;)t+=50,n=e.next(t);return t>=Cn?1/0:t}function Rn(e,t,n){const r=Math.max(t-5,0);return rt(n-e(r),t-r)}const An=100,_n=10,Dn=1,In=0,Pn=800,Mn=.3,Ln=.3,On={granular:.01,default:2},Un={granular:.005,default:.5},Fn=.01,zn=10,Vn=.05,Bn=1;function qn({duration:e=Pn,bounce:t=Mn,velocity:n=In,mass:r=Dn}){let s,a,i=1-t;i=He(Vn,Bn,i),e=He(Fn,zn,nt(e)),i<1?(s=t=>{const r=t*i,s=r*e;return.001-(r-n)/Hn(t,i)*Math.exp(-s)},a=t=>{const r=t*i*e,a=r*n+n,o=Math.pow(i,2)*Math.pow(t,2)*e,l=Math.exp(-r),c=Hn(Math.pow(t,2),i);return(.001-s(t)>0?-1:1)*((a-o)*l)/c}):(s=t=>Math.exp(-t*e)*((t-n)*e+1)-.001,a=t=>Math.exp(-t*e)*(e*e*(n-t)));const o=function(e,t,n){let r=n;for(let s=1;s<$n;s++)r-=e(r)/t(r);return r}(s,a,5/e);if(e=tt(e),isNaN(o))return{stiffness:An,damping:_n,duration:e};{const t=Math.pow(o,2)*r;return{stiffness:t,damping:2*i*Math.sqrt(r*t),duration:e}}}const $n=12;function Hn(e,t){return e*Math.sqrt(1-t*t)}const Wn=["duration","bounce"],Gn=["stiffness","damping","mass"];function Kn(e,t){return t.some((t=>void 0!==e[t]))}function Qn(e=Ln,t=Mn){const n="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const a=n.keyframes[0],i=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=function(e){let t={velocity:In,stiffness:An,damping:_n,mass:Dn,isResolvedFromDuration:!1,...e};if(!Kn(e,Gn)&&Kn(e,Wn))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(1.2*n),s=r*r,a=2*He(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:Dn,stiffness:s,damping:a}}else{const n=qn(e);t={...t,...n,mass:Dn},t.isResolvedFromDuration=!0}return t}({...n,velocity:-nt(n.velocity||0)}),m=h||0,p=c/(2*Math.sqrt(l*u)),g=i-a,y=nt(Math.sqrt(l/u)),v=Math.abs(g)<5;let b;if(r||(r=v?On.granular:On.default),s||(s=v?Un.granular:Un.default),p<1){const e=Hn(y,p);b=t=>{const n=Math.exp(-p*y*t);return i-n*((m+p*y*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===p)b=e=>i-Math.exp(-y*e)*(g+(m+y*g)*e);else{const e=y*Math.sqrt(p*p-1);b=t=>{const n=Math.exp(-p*y*t),r=Math.min(e*t,300);return i-n*((m+p*y*g)*Math.sinh(r)+e*g*Math.cosh(r))/e}}const x={calculatedDuration:f&&d||null,next:e=>{const t=b(e);if(f)o.done=e>=d;else{let n=0===e?m:0;p<1&&(n=0===e?tt(m):Rn(b,e,t));const a=Math.abs(n)<=r,l=Math.abs(i-t)<=s;o.done=a&&l}return o.value=o.done?i:t,o},toString:()=>{const e=Math.min(jn(x),Cn),t=Tn((t=>x.next(e*t).value),e,30);return e+"ms "+t},toTransition:()=>{}};return x}function Xn({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:i,min:o,max:l,restDelta:c=.5,restSpeed:u}){const d=e[0],h={done:!1,value:d},f=e=>void 0===o?l:void 0===l||Math.abs(o-e)<Math.abs(l-e)?o:l;let m=n*t;const p=d+m,g=void 0===i?p:i(p);g!==p&&(m=g-d);const y=e=>-m*Math.exp(-e/r),v=e=>g+y(e),b=e=>{const t=y(e),n=v(e);h.done=Math.abs(t)<=c,h.value=h.done?g:n};let x,w;const E=e=>{(e=>void 0!==o&&e<o||void 0!==l&&e>l)(h.value)&&(x=e,w=Qn({keyframes:[h.value,f(h.value)],velocity:Rn(v,e,h.value),damping:s,stiffness:a,restDelta:c,restSpeed:u}))};return E(0),{calculatedDuration:null,next:e=>{let t=!1;return w||void 0!==x||(t=!0,b(e),E(e)),void 0!==x&&e>=x?w.next(e-x):(!t&&b(e),h)}}}function Yn(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const a=e.length;if(t.length,1===a)return()=>t[0];if(2===a&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=function(e,t,n){const r=[],s=n||We.mix||Sn,a=e.length-1;for(let i=0;i<a;i++){let n=s(e[i],e[i+1]);if(t){const e=Array.isArray(t)?t[i]||Xe:t;n=Je(e,n)}r.push(n)}return r}(t,r,s),l=o.length,c=n=>{if(i&&n<e[0])return t[0];let r=0;if(l>1)for(;r<e.length-2&&!(n<e[r+1]);r++);const s=Ze(e[r],e[r+1],n);return o[r](s)};return n?t=>c(He(e[0],e[a-1],t)):c}function Jn(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=Ze(0,t,r);e.push(fn(n,1,s))}}(t,e.length-1),t}function Zn({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=(e=>Array.isArray(e)&&"number"!=typeof e[0])(r)?r.map(xt):xt(r),a={done:!1,value:t[0]},i=function(e,t){return e.map((e=>e*t))}(n&&n.length===t.length?n:Jn(t),e),o=Yn(i,t,{ease:Array.isArray(s)?s:(l=t,c=s,l.map((()=>c||yt)).splice(0,l.length-1))});var l,c;return{calculatedDuration:e,next:t=>(a.value=o(t),a.done=t>=e,a)}}Qn.applyToOptions=e=>{const t=function(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(jn(r),Cn);return{type:"keyframes",ease:e=>r.next(s*e).value/t,duration:nt(s)}}(e,100,Qn);return e.ease=t.ease,e.duration=tt(t.duration),e.type="keyframes",e};const er=e=>null!==e;function tr(e,{repeat:t,repeatType:n="loop"},r,s=1){const a=e.filter(er),i=s<0||t&&"loop"!==n&&t%2==1?0:a.length-1;return i&&void 0!==r?r:a[i]}const nr={decay:Xn,inertia:Xn,tween:Zn,keyframes:Zn,spring:Qn};function rr(e){"string"==typeof e.type&&(e.type=nr[e.type])}class sr{constructor(){this.count=0,this.updateFinished()}get finished(){return this._finished}updateFinished(){this.count++,this._finished=new Promise((e=>{this.resolve=e}))}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const ar=e=>e/100;class ir extends sr{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=(e=!0)=>{if(e){const{motionValue:e}=this.options;e&&e.updatedAt!==Rt.now()&&this.tick(Rt.now())}if(this.isStopped=!0,"idle"===this.state)return;this.teardown();const{onStop:t}=this.options;t&&t()},this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;rr(e);const{type:t=Zn,repeat:n=0,repeatDelay:r=0,repeatType:s,velocity:a=0}=e;let{keyframes:i}=e;const o=t||Zn;o!==Zn&&"number"!=typeof i[0]&&(this.mixKeyframes=Je(ar,Sn(i[0],i[1])),i=[0,100]);const l=o({...e,keyframes:i});"mirror"===s&&(this.mirroredGenerator=o({...e,keyframes:[...i].reverse(),velocity:-a})),null===l.calculatedDuration&&(l.calculatedDuration=jn(l));const{calculatedDuration:c}=l;this.calculatedDuration=c,this.resolvedDuration=c+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=l}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:n,totalDuration:r,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:i,calculatedDuration:o}=this;if(null===this.startTime)return n.next(0);const{delay:l=0,keyframes:c,repeat:u,repeatType:d,repeatDelay:h,type:f,onUpdate:m,finalKeyframe:p}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?g<0:g>r;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=r);let v=this.currentTime,b=n;if(u){const e=Math.min(this.currentTime,r)/i;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,u+1);Boolean(t%2)&&("reverse"===d?(n=1-n,h&&(n-=h/i)):"mirror"===d&&(b=a)),v=He(0,1,n)*i}const x=y?{done:!1,value:c[0]}:b.next(v);s&&(x.value=s(x.value));let{done:w}=x;y||null===o||(w=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const E=null===this.holdTime&&("finished"===this.state||"running"===this.state&&w);return E&&f!==Xn&&(x.value=tr(c,this.options,p,this.speed)),m&&m(x.value),E&&this.finish(),x}then(e,t){return this.finished.then(e,t)}get duration(){return nt(this.calculatedDuration)}get time(){return nt(this.currentTime)}set time(e){e=tt(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Rt.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=nt(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=Nn,onPlay:t,startTime:n}=this.options;this.driver||(this.driver=e((e=>this.tick(e)))),t&&t();const r=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=r):null!==this.holdTime?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Rt.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown()}teardown(){this.notifyFinished(),this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}const or=e=>180*e/Math.PI,lr=e=>{const t=or(Math.atan2(e[1],e[0]));return ur(t)},cr={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:lr,rotateZ:lr,skewX:e=>or(Math.atan(e[1])),skewY:e=>or(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},ur=e=>((e%=360)<0&&(e+=360),e),dr=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),hr=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),fr={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:dr,scaleY:hr,scale:e=>(dr(e)+hr(e))/2,rotateX:e=>ur(or(Math.atan2(e[6],e[5]))),rotateY:e=>ur(or(Math.atan2(-e[2],e[0]))),rotateZ:lr,rotate:lr,skewX:e=>or(Math.atan(e[4])),skewY:e=>or(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function mr(e){return e.includes("scale")?1:0}function pr(e,t){if(!e||"none"===e)return mr(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=fr,s=n;else{const t=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=cr,s=t}if(!s)return mr(t);const a=r[t],i=s[1].split(",").map(gr);return"function"==typeof a?a(i):i[a]}function gr(e){return parseFloat(e.trim())}const yr=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],vr=(()=>new Set(yr))(),br=e=>e===Mt||e===Qt,xr=new Set(["x","y","z"]),wr=yr.filter((e=>!xr.has(e)));const Er={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>pr(t,"x"),y:(e,{transform:t})=>pr(t,"y")};Er.translateX=Er.x,Er.translateY=Er.y;const kr=new Set;let Sr=!1,Nr=!1,Tr=!1;function Cr(){if(Nr){const e=Array.from(kr).filter((e=>e.needsMeasurement)),t=new Set(e.map((e=>e.element))),n=new Map;t.forEach((e=>{const t=function(e){const t=[];return wr.forEach((n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),t}(e);t.length&&(n.set(e,t),e.render())})),e.forEach((e=>e.measureInitialState())),t.forEach((e=>{e.render();const t=n.get(e);t&&t.forEach((([t,n])=>{e.getValue(t)?.set(n)}))})),e.forEach((e=>e.measureEndState())),e.forEach((e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)}))}Nr=!1,Sr=!1,kr.forEach((e=>e.complete(Tr))),kr.clear()}function jr(){kr.forEach((e=>{e.readKeyframes(),e.needsMeasurement&&(Nr=!0)}))}class Rr{constructor(e,t,n,r,s,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=s,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(kr.add(this),Sr||(Sr=!0,kt.read(jr),kt.resolveKeyframes(Cr))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;if(null===e[0]){const s=r?.get(),a=e[e.length-1];if(void 0!==s)e[0]=s;else if(n&&t){const r=n.readValue(t,a);null!=r&&(e[0]=r)}void 0===e[0]&&(e[0]=a),r&&void 0===s&&r.set(e[0])}!function(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),kr.delete(this)}cancel(){"scheduled"===this.state&&(kr.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}const Ar=Qe((()=>void 0!==window.ScrollTimeline)),_r={};function Dr(e,t){const n=Qe(e);return()=>_r[t]??n()}const Ir=Dr((()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0}),"linearEasing"),Pr=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Mr={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Pr([0,.65,.55,1]),circOut:Pr([.55,0,1,.45]),backIn:Pr([.31,.01,.66,-.59]),backOut:Pr([.33,1.53,.69,.99])};function Lr(e,t){return e?"function"==typeof e?Ir()?Tn(e,t):"ease-out":vt(e)?Pr(e):Array.isArray(e)?e.map((e=>Lr(e,t)||Mr.easeOut)):Mr[e]:void 0}function Or(e,t,n,{delay:r=0,duration:s=300,repeat:a=0,repeatType:i="loop",ease:o="easeOut",times:l}={},c=void 0){const u={[t]:n};l&&(u.offset=l);const d=Lr(o,s);Array.isArray(d)&&(u.easing=d);const h={delay:r,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:a+1,direction:"reverse"===i?"alternate":"normal"};c&&(h.pseudoElement=c);return e.animate(u,h)}function Ur(e){return"function"==typeof e&&"applyToOptions"in e}class Fr extends sr{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:n,keyframes:r,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:i,onComplete:o}=e;this.isPseudoElement=Boolean(s),this.allowFlatten=a,this.options=e,e.type;const l=function({type:e,...t}){return Ur(e)&&Ir()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}(e);this.animation=Or(t,n,r,l,s),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const e=tr(r,this.options,i,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,n){(e=>e.startsWith("--"))(t)?e.style.setProperty(t,n):e.style[t]=n}(t,n,e),this.animation.cancel()}o?.(),this.notifyFinished()},this.animation.oncancel=()=>this.notifyFinished()}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch(e){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return nt(Number(e))}get time(){return nt(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=tt(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&Ar()?(this.animation.timeline=e,Xe):t(this)}}const zr={anticipate:dt,backInOut:ut,circInOut:mt};function Vr(e){"string"==typeof e.ease&&e.ease in zr&&(e.ease=zr[e.ease])}class Br extends Fr{constructor(e){Vr(e),rr(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:n,onComplete:r,element:s,...a}=this.options;if(!t)return;if(void 0!==e)return void t.set(e);const i=new ir({...a,autoplay:!1}),o=tt(this.finishedTime??this.time);t.setWithVelocity(i.sample(o-10).value,i.sample(o).value,10),i.stop()}}const qr=(e,t)=>"zIndex"!==t&&(!("number"!=typeof e&&!Array.isArray(e))||!("string"!=typeof e||!un.test(e)&&"0"!==e||e.startsWith("url(")));const $r=new Set(["opacity","clipPath","filter","transform"]),Hr=Qe((()=>Object.hasOwnProperty.call(Element.prototype,"animate")));class Wr extends sr{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:a="loop",keyframes:i,name:o,motionValue:l,element:c,...u}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Rt.now();const d={autoplay:e,delay:t,type:n,repeat:r,repeatDelay:s,repeatType:a,name:o,motionValue:l,element:c,...u},h=c?.KeyframeResolver||Rr;this.keyframeResolver=new h(i,((e,t,n)=>this.onKeyframesResolved(e,t,d,!n)),o,l,c),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,n,r){this.keyframeResolver=void 0;const{name:s,type:a,velocity:i,delay:o,isHandoff:l,onUpdate:c}=n;this.resolvedAt=Rt.now(),function(e,t,n,r){const s=e[0];if(null===s)return!1;if("display"===t||"visibility"===t)return!0;const a=e[e.length-1],i=qr(s,t),o=qr(a,t);return!(!i||!o)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||Ur(n))&&r)}(e,s,a,i)||(!We.instantAnimations&&o||c?.(tr(e,n,t)),e[0]=e[e.length-1],n.duration=0,n.repeat=0);const u={startTime:r?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t,...n,keyframes:e},d=!l&&function(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:a,type:i}=e;if(!(t&&t.owner&&t.owner.current instanceof HTMLElement))return!1;const{onUpdate:o,transformTemplate:l}=t.owner.getProps();return Hr()&&n&&$r.has(n)&&("transform"!==n||!l)&&!o&&!r&&"mirror"!==s&&0!==a&&"inertia"!==i}(u)?new Br({...u,element:u.motionValue.owner.current}):new ir(u);d.finished.then((()=>this.notifyFinished())).catch(Xe),this.pendingTimeline&&(this.stopTimeline=d.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=d}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then((()=>{}))}get animation(){return this._animation||(this.keyframeResolver?.resume(),Tr=!0,jr(),Cr(),Tr=!1),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const Gr=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Kr(e,t,n=1){const[r,s]=function(e){const t=Gr.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const e=a.trim();return Ge(e)?parseFloat(e):e}return It(s)?Kr(s,t,n+1):s}function Qr(e,t){return e?.[t]??e?.default??e}const Xr=new Set(["width","height","top","left","right","bottom",...yr]),Yr=e=>t=>t.test(e),Jr=[Mt,Qt,Kt,Gt,Yt,Xt,{test:e=>"auto"===e,parse:e=>e}],Zr=e=>Jr.find(Yr(e));const es=new Set(["brightness","contrast","saturate","opacity"]);function ts(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(Ft)||[];if(!r)return e;const s=n.replace(r,"");let a=es.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+s+")"}const ns=/\b([a-z-]*)\(.*?\)/gu,rs={...un,getAnimatableNone:e=>{const t=e.match(ns);return t?t.map(ts).join(" "):e}},ss={...Mt,transform:Math.round},as={borderWidth:Qt,borderTopWidth:Qt,borderRightWidth:Qt,borderBottomWidth:Qt,borderLeftWidth:Qt,borderRadius:Qt,radius:Qt,borderTopLeftRadius:Qt,borderTopRightRadius:Qt,borderBottomRightRadius:Qt,borderBottomLeftRadius:Qt,width:Qt,maxWidth:Qt,height:Qt,maxHeight:Qt,top:Qt,right:Qt,bottom:Qt,left:Qt,padding:Qt,paddingTop:Qt,paddingRight:Qt,paddingBottom:Qt,paddingLeft:Qt,margin:Qt,marginTop:Qt,marginRight:Qt,marginBottom:Qt,marginLeft:Qt,backgroundPositionX:Qt,backgroundPositionY:Qt,...{rotate:Gt,rotateX:Gt,rotateY:Gt,rotateZ:Gt,scale:Ot,scaleX:Ot,scaleY:Ot,scaleZ:Ot,skew:Gt,skewX:Gt,skewY:Gt,distance:Qt,translateX:Qt,translateY:Qt,translateZ:Qt,x:Qt,y:Qt,z:Qt,perspective:Qt,transformPerspective:Qt,opacity:Lt,originX:Jt,originY:Jt,originZ:Qt},zIndex:ss,fillOpacity:Lt,strokeOpacity:Lt,numOctaves:ss},is={...as,color:en,backgroundColor:en,outlineColor:en,fill:en,stroke:en,borderColor:en,borderTopColor:en,borderRightColor:en,borderBottomColor:en,borderLeftColor:en,filter:rs,WebkitFilter:rs},os=e=>is[e];function ls(e,t){let n=os(e);return n!==rs&&(n=un),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const cs=new Set(["auto","none","0"]);class us extends Rr{constructor(e,t,n,r,s){super(e,t,n,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let o=0;o<e.length;o++){let n=e[o];if("string"==typeof n&&(n=n.trim(),It(n))){const r=Kr(n,t.current);void 0!==r&&(e[o]=r),o===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!Xr.has(n)||2!==e.length)return;const[r,s]=e,a=Zr(r),i=Zr(s);if(a!==i)if(br(a)&&br(i))for(let o=0;o<e.length;o++){const t=e[o];"string"==typeof t&&(e[o]=parseFloat(t))}else Er[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let s=0;s<e.length;s++)(null===e[s]||("number"==typeof(r=e[s])?0===r:null===r||"none"===r||"0"===r||Ke(r)))&&n.push(s);var r;n.length&&function(e,t,n){let r,s=0;for(;s<e.length&&!r;){const t=e[s];"string"==typeof t&&!cs.has(t)&&an(t).values.length&&(r=e[s]),s++}if(r&&n)for(const a of t)e[a]=ls(n,r)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Er[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];void 0!==r&&e.getValue(n,r).jump(r,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const r=e.getValue(t);r&&r.jump(this.measuredOrigin,!1);const s=n.length-1,a=n[s];n[s]=Er[t](e.measureViewportBox(),window.getComputedStyle(e.current)),null!==a&&void 0===this.finalKeyframe&&(this.finalKeyframe=a),this.removedTransforms?.length&&this.removedTransforms.forEach((([t,n])=>{e.getValue(t).set(n)})),this.resolveNoneKeyframes()}}const ds={current:void 0};class hs{constructor(e,t={}){this.version="__VERSION__",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(e,t=!0)=>{const n=Rt.now();if(this.updatedAt!==n&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const r of this.dependents)r.dirty();t&&this.events.renderRequest?.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){var t;this.current=e,this.updatedAt=Rt.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new et);const n=this.events[e].add(t);return"change"===e?()=>{n(),kt.read((()=>{this.events.change.getSize()||this.stop()}))}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return ds.current&&ds.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Rt.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return rt(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise((t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()})).then((()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()}))}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function fs(e,t){return new hs(e,t)}const ms=(e,t)=>t&&"number"==typeof e?t.transform(e):e,{schedule:ps}=Et(queueMicrotask,!1),gs={x:!1,y:!1};function ys(){return gs.x||gs.y}function vs(e,t){const n=function(e,t,n){if(e instanceof EventTarget)return[e];if("string"==typeof e){let t=document;const r=n?.[e]??t.querySelectorAll(e);return r?Array.from(r):[]}return Array.from(e)}(e),r=new AbortController;return[n,{passive:!0,...t,signal:r.signal},()=>r.abort()]}function bs(e){return!("touch"===e.pointerType||ys())}const xs=(e,t)=>!!t&&(e===t||xs(e,t.parentElement)),ws=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary,Es=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const ks=new WeakSet;function Ss(e){return t=>{"Enter"===t.key&&e(t)}}function Ns(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function Ts(e){return ws(e)&&!ys()}function Cs(e,t,n={}){const[r,s,a]=vs(e,n),i=e=>{const r=e.currentTarget;if(!Ts(e))return;ks.add(r);const a=t(r,e),i=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),ks.has(r)&&ks.delete(r),Ts(e)&&"function"==typeof a&&a(e,{success:t})},o=e=>{i(e,r===window||r===document||n.useGlobalTarget||xs(r,e.target))},l=e=>{i(e,!1)};window.addEventListener("pointerup",o,s),window.addEventListener("pointercancel",l,s)};return r.forEach((e=>{var t;(n.useGlobalTarget?window:e).addEventListener("pointerdown",i,s),e instanceof HTMLElement&&(e.addEventListener("focus",(e=>((e,t)=>{const n=e.currentTarget;if(!n)return;const r=Ss((()=>{if(ks.has(n))return;Ns(n,"down");const e=Ss((()=>{Ns(n,"up")}));n.addEventListener("keyup",e,t),n.addEventListener("blur",(()=>Ns(n,"cancel")),t)}));n.addEventListener("keydown",r,t),n.addEventListener("blur",(()=>n.removeEventListener("keydown",r)),t)})(e,s))),t=e,Es.has(t.tagName)||-1!==t.tabIndex||e.hasAttribute("tabindex")||(e.tabIndex=0))})),a}const js=[...Jr,en,un],Rs=Y.createContext({strict:!1}),As={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},_s={};for(const xD in As)_s[xD]={isEnabled:e=>As[xD].some((t=>!!e[t]))};const Ds=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Is(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Ds.has(e)}let Ps=e=>!Is(e);try{(Ms=require("@emotion/is-prop-valid").default)&&(Ps=e=>e.startsWith("on")?!Is(e):Ms(e))}catch{}var Ms;function Ls(e){if("undefined"==typeof Proxy)return e;const t=new Map;return new Proxy(((...t)=>e(...t)),{get:(n,r)=>"create"===r?e:(t.has(r)||t.set(r,e(r)),t.get(r))})}const Os=Y.createContext({});function Us(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}function Fs(e){return"string"==typeof e||Array.isArray(e)}const zs=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Vs=["initial",...zs];function Bs(e){return Us(e.animate)||Vs.some((t=>Fs(e[t])))}function qs(e){return Boolean(Bs(e)||e.variants)}function $s(e){const{initial:t,animate:n}=function(e,t){if(Bs(e)){const{initial:t,animate:n}=e;return{initial:!1===t||Fs(t)?t:void 0,animate:Fs(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,Y.useContext(Os));return Y.useMemo((()=>({initial:t,animate:n})),[Hs(t),Hs(n)])}function Hs(e){return Array.isArray(e)?e.join(" "):e}const Ws=Symbol.for("motionComponentSymbol");function Gs(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function Ks(e,t,n){return Y.useCallback((r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&("function"==typeof n?n(r):Gs(n)&&(n.current=r))}),[t])}const Qs=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Xs="data-"+Qs("framerAppearId"),Ys=Y.createContext({});function Js(e,t,n,r,s){const{visualElement:a}=Y.useContext(Os),i=Y.useContext(Rs),o=Y.useContext(Ie),l=Y.useContext(Pe).reducedMotion,c=Y.useRef(null);r=r||i.renderer,!c.current&&r&&(c.current=r(e,{visualState:t,parent:a,props:n,presenceContext:o,blockInitialAnimation:!!o&&!1===o.initial,reducedMotionConfig:l}));const u=c.current,d=Y.useContext(Ys);!u||u.projection||!s||"html"!==u.type&&"svg"!==u.type||function(e,t,n,r){const{layoutId:s,layout:a,drag:i,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Zs(e.parent)),e.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:Boolean(i)||o&&Gs(o),visualElement:e,animationType:"string"==typeof a?a:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:l,layoutRoot:c})}(c.current,n,s,d);const h=Y.useRef(!1);Y.useInsertionEffect((()=>{u&&h.current&&u.update(n,o)}));const f=n[Xs],m=Y.useRef(Boolean(f)&&!window.MotionHandoffIsComplete?.(f)&&window.MotionHasOptimisedAnimation?.(f));return De((()=>{u&&(h.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),ps.render(u.render),m.current&&u.animationState&&u.animationState.animateChanges())})),Y.useEffect((()=>{u&&(!m.current&&u.animationState&&u.animationState.animateChanges(),m.current&&(queueMicrotask((()=>{window.MotionHandoffMarkAsComplete?.(f)})),m.current=!1))})),u}function Zs(e){if(e)return!1!==e.options.allowProjection?e.projection:Zs(e.parent)}function ea({preloadedFeatures:t,createVisualElement:n,useRender:r,useVisualState:s,Component:a}){function i(t,i){let o;const l={...Y.useContext(Pe),...t,layoutId:ta(t)},{isStatic:c}=l,u=$s(t),d=s(t,c);if(!c&&_e){Y.useContext(Rs).strict;const e=function(e){const{drag:t,layout:n}=_s;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(l);o=e.MeasureLayout,u.visualElement=Js(a,d,l,n,e.ProjectionNode)}return e.jsxs(Os.Provider,{value:u,children:[o&&u.visualElement?e.jsx(o,{visualElement:u.visualElement,...l}):null,r(a,t,Ks(d,u.visualElement,i),d,c,u.visualElement)]})}t&&function(e){for(const t in e)_s[t]={..._s[t],...e[t]}}(t),i.displayName=`motion.${"string"==typeof a?a:`create(${a.displayName??a.name??""})`}`;const o=Y.forwardRef(i);return o[Ws]=a,o}function ta({layoutId:e}){const t=Y.useContext(Re).id;return t&&void 0!==e?t+"-"+e:e}const na={};function ra(e,{layout:t,layoutId:n}){return vr.has(e)||e.startsWith("origin")||(t||void 0!==n)&&(!!na[e]||"opacity"===e)}const sa=e=>Boolean(e&&e.getVelocity),aa={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ia=yr.length;function oa(e,t,n){const{style:r,vars:s,transformOrigin:a}=e;let i=!1,o=!1;for(const l in t){const e=t[l];if(vr.has(l))i=!0;else if(_t(l))s[l]=e;else{const t=ms(e,as[l]);l.startsWith("origin")?(o=!0,a[l]=t):r[l]=t}}if(t.transform||(i||n?r.transform=function(e,t,n){let r="",s=!0;for(let a=0;a<ia;a++){const i=yr[a],o=e[i];if(void 0===o)continue;let l=!0;if(l="number"==typeof o?o===(i.startsWith("scale")?1:0):0===parseFloat(o),!l||n){const e=ms(o,as[i]);l||(s=!1,r+=`${aa[i]||i}(${e}) `),n&&(t[i]=e)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}(t,e.transform,n):r.transform&&(r.transform="none")),o){const{originX:e="50%",originY:t="50%",originZ:n=0}=a;r.transformOrigin=`${e} ${t} ${n}`}}const la=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ca(e,t,n){for(const r in t)sa(t[r])||ra(r,n)||(e[r]=t[r])}function ua(e,t){const n={};return ca(n,e.style||{},e),Object.assign(n,function({transformTemplate:e},t){return Y.useMemo((()=>{const n={style:{},transform:{},transformOrigin:{},vars:{}};return oa(n,t,e),Object.assign({},n.vars,n.style)}),[t])}(e,t)),n}function da(e,t){const n={},r=ua(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const ha=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function fa(e){return"string"==typeof e&&!e.includes("-")&&!!(ha.indexOf(e)>-1||/[A-Z]/u.test(e))}const ma={offset:"stroke-dashoffset",array:"stroke-dasharray"},pa={offset:"strokeDashoffset",array:"strokeDasharray"};function ga(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:a=1,pathOffset:i=0,...o},l,c,u){if(oa(e,o,c),l)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:d,style:h}=e;d.transform&&(h.transform=d.transform,delete d.transform),(h.transform||d.transformOrigin)&&(h.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),h.transform&&(h.transformBox=u?.transformBox??"fill-box",delete d.transformBox),void 0!==t&&(d.x=t),void 0!==n&&(d.y=n),void 0!==r&&(d.scale=r),void 0!==s&&function(e,t,n=1,r=0,s=!0){e.pathLength=1;const a=s?ma:pa;e[a.offset]=Qt.transform(-r);const i=Qt.transform(t),o=Qt.transform(n);e[a.array]=`${i} ${o}`}(d,s,a,i,!1)}const ya=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),va=e=>"string"==typeof e&&"svg"===e.toLowerCase();function ba(e,t,n,r){const s=Y.useMemo((()=>{const n={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return ga(n,t,va(r),e.transformTemplate,e.style),{...n.attrs,style:{...n.style}}}),[t]);if(e.style){const t={};ca(t,e.style,e),s.style={...t,...s.style}}return s}function xa(e=!1){return(t,n,r,{latestValues:s},a)=>{const i=(fa(t)?ba:da)(n,s,a,t),o=function(e,t,n){const r={};for(const s in e)"values"===s&&"object"==typeof e.values||(Ps(s)||!0===n&&Is(s)||!t&&!Is(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}(n,"string"==typeof t,e),l=t!==Y.Fragment?{...o,...i,ref:r}:{},{children:c}=n,u=Y.useMemo((()=>sa(c)?c.get():c),[c]);return Y.createElement(t,{...l,children:u})}}function wa(e){const t=[{},{}];return e?.values.forEach(((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()})),t}function Ea(e,t,n,r){if("function"==typeof t){const[s,a]=wa(r);t=t(void 0!==n?n:e.custom,s,a)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){const[s,a]=wa(r);t=t(void 0!==n?n:e.custom,s,a)}return t}function ka(e){return sa(e)?e.get():e}const Sa=e=>(t,n)=>{const r=Y.useContext(Os),s=Y.useContext(Ie),a=()=>function({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:Na(n,r,s,e),renderState:t()}}(e,t,r,s);return n?a():Ae(a)};function Na(e,t,n,r){const s={},a=r(e,{});for(const h in a)s[h]=ka(a[h]);let{initial:i,animate:o}=e;const l=Bs(e),c=qs(e);t&&c&&!l&&!1!==e.inherit&&(void 0===i&&(i=t.initial),void 0===o&&(o=t.animate));let u=!!n&&!1===n.initial;u=u||!1===i;const d=u?o:i;if(d&&"boolean"!=typeof d&&!Us(d)){const t=Array.isArray(d)?d:[d];for(let n=0;n<t.length;n++){const r=Ea(e,t[n]);if(r){const{transitionEnd:e,transition:t,...n}=r;for(const r in n){let e=n[r];if(Array.isArray(e)){e=e[u?e.length-1:0]}null!==e&&(s[r]=e)}for(const r in e)s[r]=e[r]}}}return s}function Ta(e,t,n){const{style:r}=e,s={};for(const a in r)(sa(r[a])||t.style&&sa(t.style[a])||ra(a,e)||void 0!==n?.getValue(a)?.liveStyle)&&(s[a]=r[a]);return s}const Ca={useVisualState:Sa({scrapeMotionValuesFromProps:Ta,createRenderState:la})};function ja(e,t,n){const r=Ta(e,t,n);for(const s in e)if(sa(e[s])||sa(t[s])){r[-1!==yr.indexOf(s)?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s]=e[s]}return r}const Ra={useVisualState:Sa({scrapeMotionValuesFromProps:ja,createRenderState:ya})};function Aa(e,t){return function(n,{forwardMotionProps:r}={forwardMotionProps:!1}){return ea({...fa(n)?Ra:Ca,preloadedFeatures:e,useRender:xa(r),createVisualElement:t,Component:n})}}function _a(e,t,n){const r=e.getProps();return Ea(r,t,void 0!==n?n:r.custom,e)}const Da=e=>Array.isArray(e);function Ia(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,fs(n))}function Pa(e){return Da(e)?e[e.length-1]||0:e}function Ma(e,t){const n=_a(e,t);let{transitionEnd:r={},transition:s={},...a}=n||{};a={...a,...r};for(const i in a){Ia(e,i,Pa(a[i]))}}function La(e,t){const n=e.getValue("willChange");if(r=n,Boolean(sa(r)&&r.add))return n.add(t);if(!n&&We.WillChange){const n=new We.WillChange("auto");e.addValue("willChange",n),n.add(t)}var r}function Oa(e){return e.props[Xs]}const Ua=e=>null!==e;const Fa={type:"spring",stiffness:500,damping:25,restSpeed:10},za={type:"keyframes",duration:.8},Va={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Ba=(e,{keyframes:t})=>t.length>2?za:vr.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===t[1]?2*Math.sqrt(550):30,restSpeed:10}:Fa:Va;const qa=(e,t,n,r={},s,a)=>i=>{const o=Qr(r,e)||{},l=o.delay||r.delay||0;let{elapsed:c=0}=r;c-=tt(l);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-c,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{i(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:a?void 0:s};(function({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:i,repeatDelay:o,from:l,elapsed:c,...u}){return!!Object.keys(u).length})(o)||Object.assign(u,Ba(e,u)),u.duration&&(u.duration=tt(u.duration)),u.repeatDelay&&(u.repeatDelay=tt(u.repeatDelay)),void 0!==u.from&&(u.keyframes[0]=u.from);let d=!1;if((!1===u.type||0===u.duration&&!u.repeatDelay)&&(u.duration=0,0===u.delay&&(d=!0)),(We.instantAnimations||We.skipAnimations)&&(d=!0,u.duration=0,u.delay=0),u.allowFlatten=!o.type&&!o.ease,d&&!a&&void 0!==t.get()){const e=function(e,{repeat:t,repeatType:n="loop"}){const r=e.filter(Ua);return r[t&&"loop"!==n&&t%2==1?0:r.length-1]}(u.keyframes,o);if(void 0!==e)return void kt.update((()=>{u.onUpdate(e),u.onComplete()}))}return o.isSync?new ir(u):new Wr(u)};function $a({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&!0!==t[n];return t[n]=!1,r}function Ha(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:i,...o}=t;r&&(a=r);const l=[],c=s&&e.animationState&&e.animationState.getState()[s];for(const u in o){const t=e.getValue(u,e.latestValues[u]??null),r=o[u];if(void 0===r||c&&$a(c,u))continue;const s={delay:n,...Qr(a||{},u)},i=t.get();if(void 0!==i&&!t.isAnimating&&!Array.isArray(r)&&r===i&&!s.velocity)continue;let d=!1;if(window.MotionHandoffAnimation){const t=Oa(e);if(t){const e=window.MotionHandoffAnimation(t,u,kt);null!==e&&(s.startTime=e,d=!0)}}La(e,u),t.start(qa(u,t,r,e.shouldReduceMotion&&Xr.has(u)?{type:!1}:s,e,d));const h=t.animation;h&&l.push(h)}return i&&Promise.all(l).then((()=>{kt.update((()=>{i&&Ma(e,i)}))})),l}function Wa(e,t,n={}){const r=_a(e,t,"exit"===n.type?e.presenceContext?.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const a=r?()=>Promise.all(Ha(e,r,n)):()=>Promise.resolve(),i=e.variantChildren&&e.variantChildren.size?(r=0)=>{const{delayChildren:a=0,staggerChildren:i,staggerDirection:o}=s;return function(e,t,n=0,r=0,s=1,a){const i=[],o=(e.variantChildren.size-1)*r,l=1===s?(e=0)=>e*r:(e=0)=>o-e*r;return Array.from(e.variantChildren).sort(Ga).forEach(((e,r)=>{e.notify("AnimationStart",t),i.push(Wa(e,t,{...a,delay:n+l(r)}).then((()=>e.notify("AnimationComplete",t))))})),Promise.all(i)}(e,t,a+r,i,o,n)}:()=>Promise.resolve(),{when:o}=s;if(o){const[e,t]="beforeChildren"===o?[a,i]:[i,a];return e().then((()=>t()))}return Promise.all([a(),i(n.delay)])}function Ga(e,t){return e.sortNodePosition(t)}function Ka(e,t,n={}){let r;if(e.notify("AnimationStart",t),Array.isArray(t)){const s=t.map((t=>Wa(e,t,n)));r=Promise.all(s)}else if("string"==typeof t)r=Wa(e,t,n);else{const s="function"==typeof t?_a(e,t,n.custom):t;r=Promise.all(Ha(e,s,n))}return r.then((()=>{e.notify("AnimationComplete",t)}))}function Qa(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const Xa=Vs.length;function Ya(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&Ya(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<Xa;n++){const r=Vs[n],s=e.props[r];(Fs(s)||!1===s)&&(t[r]=s)}return t}const Ja=[...zs].reverse(),Za=zs.length;function ei(e){let t=function(e){return t=>Promise.all(t.map((({animation:t,options:n})=>Ka(e,t,n))))}(e),n=ri(),r=!0;const s=t=>(n,r)=>{const s=_a(e,r,"exit"===t?e.presenceContext?.custom:void 0);if(s){const{transition:e,transitionEnd:t,...r}=s;n={...n,...r,...t}}return n};function a(a){const{props:i}=e,o=Ya(e.parent)||{},l=[],c=new Set;let u={},d=1/0;for(let t=0;t<Za;t++){const h=Ja[t],f=n[h],m=void 0!==i[h]?i[h]:o[h],p=Fs(m),g=h===a?f.isActive:null;!1===g&&(d=t);let y=m===o[h]&&m!==i[h]&&p;if(y&&r&&e.manuallyAnimateOnMount&&(y=!1),f.protectedKeys={...u},!f.isActive&&null===g||!m&&!f.prevProp||Us(m)||"boolean"==typeof m)continue;const v=ti(f.prevProp,m);let b=v||h===a&&f.isActive&&!y&&p||t>d&&p,x=!1;const w=Array.isArray(m)?m:[m];let E=w.reduce(s(h),{});!1===g&&(E={});const{prevResolvedValues:k={}}=f,S={...k,...E},N=t=>{b=!0,c.has(t)&&(x=!0,c.delete(t)),f.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in S){const t=E[e],n=k[e];if(u.hasOwnProperty(e))continue;let r=!1;r=Da(t)&&Da(n)?!Qa(t,n):t!==n,r?null!=t?N(e):c.add(e):void 0!==t&&c.has(e)?N(e):f.protectedKeys[e]=!0}f.prevProp=m,f.prevResolvedValues=E,f.isActive&&(u={...u,...E}),r&&e.blockInitialAnimation&&(b=!1);b&&(!(y&&v)||x)&&l.push(...w.map((e=>({animation:e,options:{type:h}}))))}if(c.size){const t={};if("boolean"!=typeof i.initial){const n=_a(e,Array.isArray(i.initial)?i.initial[0]:i.initial);n&&n.transition&&(t.transition=n.transition)}c.forEach((n=>{const r=e.getBaseTarget(n),s=e.getValue(n);s&&(s.liveStyle=!0),t[n]=r??null})),l.push({animation:t})}let h=Boolean(l.length);return!r||!1!==i.initial&&i.initial!==i.animate||e.manuallyAnimateOnMount||(h=!1),r=!1,h?t(l):Promise.resolve()}return{animateChanges:a,setActive:function(t,r){if(n[t].isActive===r)return Promise.resolve();e.variantChildren?.forEach((e=>e.animationState?.setActive(t,r))),n[t].isActive=r;const s=a(t);for(const e in n)n[e].protectedKeys={};return s},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=ri(),r=!0}}}function ti(e,t){return"string"==typeof t?t!==e:!!Array.isArray(t)&&!Qa(t,e)}function ni(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ri(){return{animate:ni(!0),whileInView:ni(),whileHover:ni(),whileTap:ni(),whileDrag:ni(),whileFocus:ni(),exit:ni()}}class si{constructor(e){this.isMounted=!1,this.node=e}update(){}}let ai=0;const ii={animation:{Feature:class extends si{constructor(e){super(e),e.animationState||(e.animationState=ei(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Us(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}},exit:{Feature:class extends si{constructor(){super(...arguments),this.id=ai++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then((()=>{t(this.id)}))}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}};function oi(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function li(e){return{point:{x:e.pageX,y:e.pageY}}}function ci(e,t,n,r){return oi(e,t,(e=>t=>ws(t)&&e(t,li(t)))(n),r)}function ui({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function di(e){return e.max-e.min}function hi(e,t,n,r=.5){e.origin=r,e.originPoint=fn(t.min,t.max,e.origin),e.scale=di(n)/di(t),e.translate=fn(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function fi(e,t,n,r){hi(e.x,t.x,n.x,r?r.originX:void 0),hi(e.y,t.y,n.y,r?r.originY:void 0)}function mi(e,t,n){e.min=n.min+t.min,e.max=e.min+di(t)}function pi(e,t,n){e.min=t.min-n.min,e.max=e.min+di(t)}function gi(e,t,n){pi(e.x,t.x,n.x),pi(e.y,t.y,n.y)}const yi=()=>({x:{min:0,max:0},y:{min:0,max:0}});function vi(e){return[e("x"),e("y")]}function bi(e){return void 0===e||1===e}function xi({scale:e,scaleX:t,scaleY:n}){return!bi(e)||!bi(t)||!bi(n)}function wi(e){return xi(e)||Ei(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Ei(e){return ki(e.x)||ki(e.y)}function ki(e){return e&&"0%"!==e}function Si(e,t,n){return n+t*(e-n)}function Ni(e,t,n,r,s){return void 0!==s&&(e=Si(e,s,r)),Si(e,n,r)+t}function Ti(e,t=0,n=1,r,s){e.min=Ni(e.min,t,n,r,s),e.max=Ni(e.max,t,n,r,s)}function Ci(e,{x:t,y:n}){Ti(e.x,t.translate,t.scale,t.originPoint),Ti(e.y,n.translate,n.scale,n.originPoint)}const ji=.999999999999,Ri=1.0000000000001;function Ai(e,t){e.min=e.min+t,e.max=e.max+t}function _i(e,t,n,r,s=.5){Ti(e,t,n,fn(e.min,e.max,s),r)}function Di(e,t){_i(e.x,t.x,t.scaleX,t.scale,t.originX),_i(e.y,t.y,t.scaleY,t.scale,t.originY)}function Ii(e,t){return ui(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const Pi=({current:e})=>e?e.ownerDocument.defaultView:null,Mi=(e,t)=>Math.abs(e-t);class Li{constructor(e,t,{transformPagePoint:n,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=Fi(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=Mi(e.x,t.x),r=Mi(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!n)return;const{point:r}=e,{timestamp:s}=Nt;this.history.push({...r,timestamp:s});const{onStart:a,onMove:i}=this.handlers;t||(a&&a(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),i&&i(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=Oi(t,this.transformPagePoint),kt.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:s}=this.handlers;if(this.dragSnapToOrigin&&s&&s(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const a=Fi("pointercancel"===e.type?this.lastMoveEventInfo:Oi(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,a),r&&r(e,a)},!ws(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=n,this.contextWindow=r||window;const a=Oi(li(e),this.transformPagePoint),{point:i}=a,{timestamp:o}=Nt;this.history=[{...i,timestamp:o}];const{onSessionStart:l}=t;l&&l(e,Fi(a,this.history)),this.removeListeners=Je(ci(this.contextWindow,"pointermove",this.handlePointerMove),ci(this.contextWindow,"pointerup",this.handlePointerUp),ci(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),St(this.updatePoint)}}function Oi(e,t){return t?{point:t(e.point)}:e}function Ui(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Fi({point:e},t){return{point:e,delta:Ui(e,Vi(t)),offset:Ui(e,zi(t)),velocity:Bi(t,.1)}}function zi(e){return e[0]}function Vi(e){return e[e.length-1]}function Bi(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=Vi(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>tt(t)));)n--;if(!r)return{x:0,y:0};const a=nt(s.timestamp-r.timestamp);if(0===a)return{x:0,y:0};const i={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function qi(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function $i(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const Hi=.35;function Wi(e,t,n){return{min:Gi(e,t),max:Gi(e,n)}}function Gi(e,t){return"number"==typeof e?e:e[t]||0}const Ki=new WeakMap;class Qi{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:r}=this.getProps();this.panSession=new Li(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(li(e).point)},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:s}=this.getProps();if(n&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(a=n)||"y"===a?gs[a]?null:(gs[a]=!0,()=>{gs[a]=!1}):gs.x||gs.y?null:(gs.x=gs.y=!0,()=>{gs.x=gs.y=!1}),!this.openDragLock))return;var a;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),vi((e=>{let t=this.getAxisMotionValue(e).get()||0;if(Kt.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=di(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t})),s&&kt.postRender((()=>s(e,t))),La(this.visualElement,"transform");const{animationState:i}=this.visualElement;i&&i.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:s,onDrag:a}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:i}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e,t=10){let n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(i),void(null!==this.currentDirection&&s&&s(this.currentDirection));this.updateAxis("x",t.point,i),this.updateAxis("y",t.point,i),this.visualElement.render(),a&&a(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>vi((e=>"paused"===this.getAnimationState(e)&&this.getAxisMotionValue(e).animation?.play()))},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r,contextWindow:Pi(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&kt.postRender((()=>s(e,t)))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!Xi(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=function(e,{min:t,max:n},r){return void 0!==t&&e<t?e=r?fn(t,e,r.min):Math.max(e,t):void 0!==n&&e>n&&(e=r?fn(n,e,r.max):Math.min(e,n)),e}(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&Gs(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!e||!n)&&function(e,{top:t,left:n,bottom:r,right:s}){return{x:qi(e.x,n,s),y:qi(e.y,t,r)}}(n.layoutBox,e),this.elastic=function(e=Hi){return!1===e?e=0:!0===e&&(e=Hi),{x:Wi(e,"left","right"),y:Wi(e,"top","bottom")}}(t),r!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&vi((e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(n.layoutBox[e],this.constraints[e]))}))}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Gs(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=function(e,t,n){const r=Ii(e,n),{scroll:s}=t;return s&&(Ai(r.x,s.offset.x),Ai(r.y,s.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let a=function(e,t){return{x:$i(e.x,t.x),y:$i(e.y,t.y)}}(r.layout.layoutBox,s);if(t){const e=t(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(a));this.hasMutatedConstraints=!!e,e&&(a=ui(e))}return a}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:i}=this.getProps(),o=this.constraints||{},l=vi((i=>{if(!Xi(i,t,this.currentDirection))return;let l=o&&o[i]||{};a&&(l={min:0,max:0});const c=r?200:1e6,u=r?40:1e7,d={type:"inertia",velocity:n?e[i]:0,bounceStiffness:c,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...s,...l};return this.startAxisValueAnimation(i,d)}));return Promise.all(l).then(i)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return La(this.visualElement,e),n.start(qa(e,n,0,t,this.visualElement,!1))}stopAnimation(){vi((e=>this.getAxisMotionValue(e).stop()))}pauseAnimation(){vi((e=>this.getAxisMotionValue(e).animation?.pause()))}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){vi((t=>{const{drag:n}=this.getProps();if(!Xi(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:a}=r.layout.layoutBox[t];s.set(e[t]-fn(n,a,.5))}}))}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!Gs(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};vi((e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();r[e]=function(e,t){let n=.5;const r=di(e),s=di(t);return s>r?n=Ze(t.min,t.max-r,e.min):r>s&&(n=Ze(e.min,e.max-s,t.min)),He(0,1,n)}({min:n,max:n},this.constraints[e])}}));const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),vi((t=>{if(!Xi(t,e,null))return;const n=this.getAxisMotionValue(t),{min:s,max:a}=this.constraints[t];n.set(fn(s,a,r[t]))}))}addListeners(){if(!this.visualElement.current)return;Ki.set(this.visualElement,this);const e=ci(this.visualElement.current,"pointerdown",(e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)})),t=()=>{const{dragConstraints:e}=this.getProps();Gs(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),kt.read(t);const s=oi(window,"resize",(()=>this.scalePositionWithinConstraints())),a=n.addEventListener("didUpdate",(({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(vi((t=>{const n=this.getAxisMotionValue(t);n&&(this.originPoint[t]+=e[t].translate,n.set(n.get()+e[t].translate))})),this.visualElement.render())}));return()=>{s(),e(),r(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:a=Hi,dragMomentum:i=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:s,dragElastic:a,dragMomentum:i}}}function Xi(e,t,n){return!(!0!==t&&t!==e||null!==n&&n!==e)}const Yi=e=>(t,n)=>{e&&kt.postRender((()=>e(t,n)))};const Ji={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Zi(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const eo={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e){if(!Qt.test(e))return e;e=parseFloat(e)}return`${Zi(e,t.target.x)}% ${Zi(e,t.target.y)}%`}},to={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=un.parse(e);if(s.length>5)return r;const a=un.createTransformer(e),i="number"!=typeof s[0]?1:0,o=n.x.scale*t.x,l=n.y.scale*t.y;s[0+i]/=o,s[1+i]/=l;const c=fn(o,l,.5);return"number"==typeof s[2+i]&&(s[2+i]/=c),"number"==typeof s[3+i]&&(s[3+i]/=c),a(s)}};class no extends Y.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:s}=e;!function(e){for(const t in e)na[t]=e[t],_t(t)&&(na[t].isCSSVariable=!0)}(so),s&&(t.group&&t.group.add(s),n&&n.register&&r&&n.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",(()=>{this.safeToRemove()})),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Ji.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:s}=this.props,{projection:a}=n;return a?(a.isPresent=s,r||e.layoutDependency!==t||void 0===t||e.isPresent!==s?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||kt.postRender((()=>{const e=a.getStack();e&&e.members.length||this.safeToRemove()}))),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ps.postRender((()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()})))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function ro(t){const[n,r]=Fe(),s=Y.useContext(Re);return e.jsx(no,{...t,layoutGroup:s,switchLayoutGroup:Y.useContext(Ys),isPresent:n,safeToRemove:r})}const so={borderRadius:{...eo,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:eo,borderTopRightRadius:eo,borderBottomLeftRadius:eo,borderBottomRightRadius:eo,boxShadow:to};const ao=(e,t)=>e.depth-t.depth;class io{constructor(){this.children=[],this.isDirty=!1}add(e){qe(this.children,e),this.isDirty=!0}remove(e){$e(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(ao),this.isDirty=!1,this.children.forEach(e)}}const oo=["TopLeft","TopRight","BottomLeft","BottomRight"],lo=oo.length,co=e=>"string"==typeof e?parseFloat(e):e,uo=e=>"number"==typeof e||Qt.test(e);function ho(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const fo=po(0,.5,ft),mo=po(.5,.95,Xe);function po(e,t,n){return r=>r<e?0:r>t?1:n(Ze(e,t,r))}function go(e,t){e.min=t.min,e.max=t.max}function yo(e,t){go(e.x,t.x),go(e.y,t.y)}function vo(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function bo(e,t,n,r,s){return e=Si(e-=t,1/n,r),void 0!==s&&(e=Si(e,1/s,r)),e}function xo(e,t,[n,r,s],a,i){!function(e,t=0,n=1,r=.5,s,a=e,i=e){Kt.test(t)&&(t=parseFloat(t),t=fn(i.min,i.max,t/100)-i.min);if("number"!=typeof t)return;let o=fn(a.min,a.max,r);e===a&&(o-=t),e.min=bo(e.min,t,n,o,s),e.max=bo(e.max,t,n,o,s)}(e,t[n],t[r],t[s],t.scale,a,i)}const wo=["x","scaleX","originX"],Eo=["y","scaleY","originY"];function ko(e,t,n,r){xo(e.x,t,wo,n?n.x:void 0,r?r.x:void 0),xo(e.y,t,Eo,n?n.y:void 0,r?r.y:void 0)}function So(e){return 0===e.translate&&1===e.scale}function No(e){return So(e.x)&&So(e.y)}function To(e,t){return e.min===t.min&&e.max===t.max}function Co(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function jo(e,t){return Co(e.x,t.x)&&Co(e.y,t.y)}function Ro(e){return di(e.x)/di(e.y)}function Ao(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class _o{constructor(){this.members=[]}add(e){qe(this.members,e),e.scheduleRender()}remove(e){if($e(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex((t=>e===t));if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach((e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()}))}scheduleRender(){this.members.forEach((e=>{e.instance&&e.scheduleRender(!1)}))}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Do=["","X","Y","Z"],Io={visibility:"hidden"};let Po=0;function Mo(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function Lo(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Oa(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",kt,!(t||r))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&Lo(r)}function Oo({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(e={},n=t?.()){this.id=Po++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(zo),this.nodes.forEach(Go),this.nodes.forEach(Ko),this.nodes.forEach(Vo)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=n?n.root||n:this,this.path=n?[...n.path,n]:[],this.parent=n,this.depth=n?n.depth+1:0;for(let t=0;t<this.path.length;t++)this.path[t].shouldResetTransform=!0;this.root===this&&(this.nodes=new io)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new et),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){const n=this.eventHandlers.get(e);n&&n.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t){if(this.instance)return;var n;this.isSVG=(n=t)instanceof SVGElement&&"svg"!==n.tagName,this.instance=t;const{layoutId:r,layout:s,visualElement:a}=this.options;if(a&&!a.current&&a.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(s||r)&&(this.isLayoutDirty=!0),e){let n;const r=()=>this.root.updateBlockedByResize=!1;e(t,(()=>{this.root.updateBlockedByResize=!0,n&&n(),n=function(e,t){const n=Rt.now(),r=({timestamp:s})=>{const a=s-n;a>=t&&(St(r),e(a-t))};return kt.setup(r,!0),()=>St(r)}(r,250),Ji.hasAnimatedSinceResize&&(Ji.hasAnimatedSinceResize=!1,this.nodes.forEach(Wo))}))}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&a&&(r||s)&&this.addEventListener("didUpdate",(({delta:e,hasLayoutChanged:t,hasRelativeLayoutChanged:n,layout:r})=>{if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const s=this.options.transition||a.getDefaultTransition()||el,{onLayoutAnimationStart:i,onLayoutAnimationComplete:o}=a.getProps(),l=!this.targetLayout||!jo(this.targetLayout,r),c=!t&&n;if(this.options.layoutRoot||this.resumeFrom||c||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(e,c);const t={...Qr(s,"layout"),onPlay:i,onComplete:o};(a.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t)}else t||Wo(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r}))}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),St(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Qo),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Lo(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let s=0;s<this.path.length;s++){const e=this.path[s];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(qo);this.isUpdating||this.nodes.forEach($o),this.isUpdating=!1,this.nodes.forEach(Ho),this.nodes.forEach(Uo),this.nodes.forEach(Fo),this.clearAllSnapshots();const e=Rt.now();Nt.delta=He(0,1e3/60,e-Nt.timestamp),Nt.timestamp=e,Nt.isProcessing=!0,Tt.update.process(Nt),Tt.preRender.process(Nt),Tt.render.process(Nt),Nt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ps.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Bo),this.sharedNodes.forEach(Xo)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,kt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){kt.postRender((()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()}))}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||di(this.snapshot.measuredBox.x)||di(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){const t=r(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!s)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!No(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,a=r!==this.prevTransformTemplateValue;e&&this.instance&&(t||wi(this.latestValues)||a)&&(s(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),rl((r=n).x),rl(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:e}=this.options;if(!e)return{x:{min:0,max:0},y:{min:0,max:0}};const t=e.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(al))){const{scroll:e}=this.root;e&&(Ai(t.x,e.offset.x),Ai(t.y,e.offset.y))}return t}removeElementScroll(e){const t={x:{min:0,max:0},y:{min:0,max:0}};if(yo(t,e),this.scroll?.wasRoot)return t;for(let n=0;n<this.path.length;n++){const r=this.path[n],{scroll:s,options:a}=r;r!==this.root&&s&&a.layoutScroll&&(s.wasRoot&&yo(t,e),Ai(t.x,s.offset.x),Ai(t.y,s.offset.y))}return t}applyTransform(e,t=!1){const n={x:{min:0,max:0},y:{min:0,max:0}};yo(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&Di(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),wi(e.latestValues)&&Di(n,e.latestValues)}return wi(this.latestValues)&&Di(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};yo(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!wi(e.latestValues))continue;xi(e.latestValues)&&e.updateSnapshot();const r={x:{min:0,max:0},y:{min:0,max:0}};yo(r,e.measurePageBox()),ko(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return wi(this.latestValues)&&ko(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Nt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){const t=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=t.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=t.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=t.isSharedProjectionDirty);const n=Boolean(this.resumingFrom)||this!==t;if(!(e||n&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:r,layoutId:s}=this.options;if(this.layout&&(r||s)){if(this.resolvedRelativeTargetAt=Nt.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},gi(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),yo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}var a,i,o;if(this.relativeTarget||this.targetDelta)if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),a=this.target,i=this.relativeTarget,o=this.relativeParent.target,mi(a.x,i.x,o.x),mi(a.y,i.y,o.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):yo(this.target,this.layout.layoutBox),Ci(this.target,this.targetDelta)):yo(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},gi(this.relativeTargetOrigin,this.target,e.target),yo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(this.parent&&!xi(this.parent.latestValues)&&!Ei(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const e=this.getLead(),t=Boolean(this.resumingFrom)||this!==e;let n=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(n=!1),t&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(n=!1),this.resolvedRelativeTargetAt===Nt.timestamp&&(n=!1),n)return;const{layout:r,layoutId:s}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!r&&!s)return;yo(this.layoutCorrected,this.layout.layoutBox);const a=this.treeScale.x,i=this.treeScale.y;!function(e,t,n,r=!1){const s=n.length;if(!s)return;let a,i;t.x=t.y=1;for(let o=0;o<s;o++){a=n[o],i=a.projectionDelta;const{visualElement:s}=a.options;s&&s.props.style&&"contents"===s.props.style.display||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Di(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,Ci(e,i)),r&&wi(a.latestValues)&&Di(e,a.latestValues))}t.x<Ri&&t.x>ji&&(t.x=1),t.y<Ri&&t.y>ji&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,t),!e.layout||e.target||1===this.treeScale.x&&1===this.treeScale.y||(e.target=e.layout.layoutBox,e.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:o}=e;o?(this.projectionDelta&&this.prevProjectionDelta?(vo(this.prevProjectionDelta.x,this.projectionDelta.x),vo(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),fi(this.projectionDelta,this.layoutCorrected,o,this.latestValues),this.treeScale.x===a&&this.treeScale.y===i&&Ao(this.projectionDelta.x,this.prevProjectionDelta.x)&&Ao(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",o))):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){if(this.options.visualElement?.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e,t=!1){const n=this.snapshot,r=n?n.latestValues:{},s={...this.latestValues},a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const i={x:{min:0,max:0},y:{min:0,max:0}},o=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,u=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some(Zo));let d;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;var l,h,f,m,p,g;Yo(a.x,e.x,n),Yo(a.y,e.y,n),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(gi(i,this.layout.layoutBox,this.relativeParent.layout.layoutBox),f=this.relativeTarget,m=this.relativeTargetOrigin,p=i,g=n,Jo(f.x,m.x,p.x,g),Jo(f.y,m.y,p.y,g),d&&(l=this.relativeTarget,h=d,To(l.x,h.x)&&To(l.y,h.y))&&(this.isProjectionDirty=!1),d||(d={x:{min:0,max:0},y:{min:0,max:0}}),yo(d,this.relativeTarget)),o&&(this.animationValues=s,function(e,t,n,r,s,a){s?(e.opacity=fn(0,n.opacity??1,fo(r)),e.opacityExit=fn(t.opacity??1,0,mo(r))):a&&(e.opacity=fn(t.opacity??1,n.opacity??1,r));for(let i=0;i<lo;i++){const s=`border${oo[i]}Radius`;let a=ho(t,s),o=ho(n,s);void 0===a&&void 0===o||(a||(a=0),o||(o=0),0===a||0===o||uo(a)===uo(o)?(e[s]=Math.max(fn(co(a),co(o),r),0),(Kt.test(o)||Kt.test(a))&&(e[s]+="%")):e[s]=o)}(t.rotate||n.rotate)&&(e.rotate=fn(t.rotate||0,n.rotate||0,r))}(s,r,this.latestValues,n,u,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation?.stop(!1),this.resumingFrom?.currentAnimation?.stop(!1),this.pendingAnimation&&(St(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=kt.update((()=>{Ji.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=fs(0)),this.currentAnimation=function(e,t,n){const r=sa(e)?e:fs(e);return r.start(qa("",r,t,n)),r.animation}(this.motionValue,[0,1e3],{...e,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0}))}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop(!1)),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:s}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&sl(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=di(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=di(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}yo(t,n),Di(t,s),fi(this.projectionDeltaWithTransform,this.layoutCorrected,t,s)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new _o);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){const{layoutId:e}=this.options;return e&&this.getStack()?.lead||this}getPrevLead(){const{layoutId:e}=this.options;return e?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:n}={}){const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const r={};n.z&&Mo("z",e,r,this.animationValues);for(let s=0;s<Do.length;s++)Mo(`rotate${Do[s]}`,e,r,this.animationValues),Mo(`skew${Do[s]}`,e,r,this.animationValues);e.render();for(const s in r)e.setStaticValue(s,r[s]),this.animationValues&&(this.animationValues[s]=r[s]);e.scheduleRender()}getProjectionStyles(e){if(!this.instance||this.isSVG)return;if(!this.isVisible)return Io;const t={visibility:""},n=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,t.opacity="",t.pointerEvents=ka(e?.pointerEvents)||"",t.transform=n?n(this.latestValues,""):"none",t;const r=this.getLead();if(!this.projectionDelta||!this.layout||!r.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=ka(e?.pointerEvents)||""),this.hasProjected&&!wi(this.latestValues)&&(t.transform=n?n({},""):"none",this.hasProjected=!1),t}const s=r.animationValues||r.latestValues;this.applyTransformsToTarget(),t.transform=function(e,t,n){let r="";const s=e.x.translate/t.x,a=e.y.translate/t.y,i=n?.z||0;if((s||a||i)&&(r=`translate3d(${s}px, ${a}px, ${i}px) `),1===t.x&&1===t.y||(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:e,rotate:t,rotateX:s,rotateY:a,skewX:i,skewY:o}=n;e&&(r=`perspective(${e}px) ${r}`),t&&(r+=`rotate(${t}deg) `),s&&(r+=`rotateX(${s}deg) `),a&&(r+=`rotateY(${a}deg) `),i&&(r+=`skewX(${i}deg) `),o&&(r+=`skewY(${o}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return 1===o&&1===l||(r+=`scale(${o}, ${l})`),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,s),n&&(t.transform=n(s,t.transform));const{x:a,y:i}=this.projectionDelta;t.transformOrigin=`${100*a.origin}% ${100*i.origin}% 0`,r.animationValues?t.opacity=r===this?s.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:s.opacityExit:t.opacity=r===this?void 0!==s.opacity?s.opacity:"":void 0!==s.opacityExit?s.opacityExit:0;for(const o in na){if(void 0===s[o])continue;const{correct:e,applyTo:n,isCSSVariable:a}=na[o],i="none"===t.transform?s[o]:e(s[o],r);if(n){const e=n.length;for(let r=0;r<e;r++)t[n[r]]=i}else a?this.options.visualElement.renderState.vars[o]=i:t[o]=i}return this.options.layoutId&&(t.pointerEvents=r===this?ka(e?.pointerEvents)||"":"none"),t}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach((e=>e.currentAnimation?.stop(!1))),this.root.nodes.forEach(qo),this.root.sharedNodes.clear()}}}function Uo(e){e.updateLayout()}function Fo(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=e.layout,{animationType:s}=e.options,a=t.source!==e.layout.source;"size"===s?vi((e=>{const r=a?t.measuredBox[e]:t.layoutBox[e],s=di(r);r.min=n[e].min,r.max=r.min+s})):sl(s,t.layoutBox,n)&&vi((r=>{const s=a?t.measuredBox[r]:t.layoutBox[r],i=di(n[r]);s.max=s.min+i,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+i)}));const i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};fi(i,n,t.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};a?fi(o,e.applyTransform(r,!0),t.measuredBox):fi(o,n,t.layoutBox);const l=!No(i);let c=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:s,layout:a}=r;if(s&&a){const i={x:{min:0,max:0},y:{min:0,max:0}};gi(i,t.layoutBox,s.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};gi(o,n,a.layoutBox),jo(i,o)||(c=!0),r.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=i,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:o,layoutDelta:i,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function zo(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Vo(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Bo(e){e.clearSnapshot()}function qo(e){e.clearMeasurements()}function $o(e){e.isLayoutDirty=!1}function Ho(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Wo(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Go(e){e.resolveTargetDelta()}function Ko(e){e.calcProjection()}function Qo(e){e.resetSkewAndRotation()}function Xo(e){e.removeLeadSnapshot()}function Yo(e,t,n){e.translate=fn(t.translate,0,n),e.scale=fn(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Jo(e,t,n,r){e.min=fn(t.min,n.min,r),e.max=fn(t.max,n.max,r)}function Zo(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const el={duration:.45,ease:[.4,0,.1,1]},tl=e=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),nl=tl("applewebkit/")&&!tl("chrome/")?Math.round:Xe;function rl(e){e.min=nl(e.min),e.max=nl(e.max)}function sl(e,t,n){return"position"===e||"preserve-aspect"===e&&(r=Ro(t),s=Ro(n),a=.2,!(Math.abs(r-s)<=a));var r,s,a}function al(e){return e!==e.root&&e.scroll?.wasRoot}const il=Oo({attachResizeListener:(e,t)=>oi(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ol={current:void 0},ll=Oo({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!ol.current){const e=new il({});e.mount(window),e.setOptions({layoutScroll:!0}),ol.current=e}return ol.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),cl={pan:{Feature:class extends si{constructor(){super(...arguments),this.removePointerDownListener=Xe}onPointerDown(e){this.session=new Li(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Pi(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:Yi(e),onStart:Yi(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&kt.postRender((()=>r(e,t)))}}}mount(){this.removePointerDownListener=ci(this.node.current,"pointerdown",(e=>this.onPointerDown(e)))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends si{constructor(e){super(e),this.removeGroupControls=Xe,this.removeListeners=Xe,this.controls=new Qi(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Xe}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:ll,MeasureLayout:ro}};function ul(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover","Start"===n);const s=r["onHover"+n];s&&kt.postRender((()=>s(t,li(t))))}function dl(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap","Start"===n);const s=r["onTap"+("End"===n?"":n)];s&&kt.postRender((()=>s(t,li(t))))}const hl=new WeakMap,fl=new WeakMap,ml=e=>{const t=hl.get(e.target);t&&t(e)},pl=e=>{e.forEach(ml)};function gl(e,t,n){const r=function({root:e,...t}){const n=e||document;fl.has(n)||fl.set(n,{});const r=fl.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(pl,{root:e,...t})),r[s]}(t);return hl.set(e,n),r.observe(e),()=>{hl.delete(e),r.unobserve(e)}}const yl={some:0,all:1};const vl={inView:{Feature:class extends si{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:s}=e,a={root:t?t.current:void 0,rootMargin:n,threshold:"number"==typeof r?r:yl[r]};return gl(this.node.current,a,(e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,s&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),a=t?n:r;a&&a(e)}))}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends si{mount(){const{current:e}=this.node;e&&(this.unmount=Cs(e,((e,t)=>(dl(this.node,t,"Start"),(e,{success:t})=>dl(this.node,e,t?"End":"Cancel"))),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends si{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Je(oi(this.node.current,"focus",(()=>this.onFocus())),oi(this.node.current,"blur",(()=>this.onBlur())))}unmount(){}}},hover:{Feature:class extends si{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t,n={}){const[r,s,a]=vs(e,n),i=e=>{if(!bs(e))return;const{target:n}=e,r=t(n,e);if("function"!=typeof r||!n)return;const a=e=>{bs(e)&&(r(e),n.removeEventListener("pointerleave",a))};n.addEventListener("pointerleave",a,s)};return r.forEach((e=>{e.addEventListener("pointerenter",i,s)})),a}(e,((e,t)=>(ul(this.node,t,"Start"),e=>ul(this.node,e,"End")))))}unmount(){}}}},bl={layout:{ProjectionNode:ll,MeasureLayout:ro}},xl={current:null},wl={current:!1};const El=new WeakMap;const kl=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Sl{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:s,visualState:a},i={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Rr,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=Rt.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,kt.render(this.render,!1,!0))};const{latestValues:o,renderState:l}=a;this.latestValues=o,this.baseTarget={...o},this.initialValues=t.initial?{...o}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=i,this.blockInitialAnimation=Boolean(s),this.isControllingVariants=Bs(t),this.isVariantNode=qs(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(e&&e.current);const{willChange:c,...u}=this.scrapeMotionValuesFromProps(t,{},this);for(const d in u){const e=u[d];void 0!==o[d]&&sa(e)&&e.set(o[d],!1)}}mount(e){this.current=e,El.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach(((e,t)=>this.bindToMotionValue(t,e))),wl.current||function(){if(wl.current=!0,_e)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>xl.current=e.matches;e.addListener(t),t()}else xl.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||xl.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),St(this.notifyUpdate),St(this.render),this.valueSubscriptions.forEach((e=>e())),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=vr.has(e);n&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",(t=>{this.latestValues[e]=t,this.props.onUpdate&&kt.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)})),s=t.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,(()=>{r(),s(),a&&a(),t.owner&&t.stop()}))}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in _s){const t=_s[e];if(!t)continue;const{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<kl.length;n++){const t=kl[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){for(const r in t){const s=t[r],a=n[r];if(sa(s))e.addValue(r,s);else if(sa(a))e.addValue(r,fs(s,{owner:e}));else if(a!==s)if(e.hasValue(r)){const t=e.getValue(r);!0===t.liveStyle?t.jump(s):t.hasAnimated||t.set(s)}else{const t=e.getStaticValue(r);e.addValue(r,fs(void 0!==t?t:s,{owner:e}))}}for(const r in n)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=fs(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){let n=void 0===this.latestValues[e]&&this.current?this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];return null!=n&&("string"==typeof n&&(Ge(n)||Ke(n))?n=parseFloat(n):!(e=>js.find(Yr(e)))(n)&&un.test(t)&&(n=ls(e,t)),this.setBaseTarget(e,sa(n)?n.get():n)),sa(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let n;if("string"==typeof t||"object"==typeof t){const r=Ea(this.props,t,this.presenceContext?.custom);r&&(n=r[e])}if(t&&void 0!==n)return n;const r=this.getBaseTargetFromProps(this.props,e);return void 0===r||sa(r)?void 0!==this.initialValues[e]&&void 0===n?void 0:this.baseTarget[e]:r}on(e,t){return this.events[e]||(this.events[e]=new et),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class Nl extends Sl{constructor(){super(...arguments),this.KeyframeResolver=us}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;sa(e)&&(this.childSubscription=e.on("change",(e=>{this.current&&(this.current.textContent=`${e}`)})))}}function Tl(e,{style:t,vars:n},r,s){Object.assign(e.style,t,s&&s.getProjectionStyles(r));for(const a in n)e.style.setProperty(a,n[a])}class Cl extends Nl{constructor(){super(...arguments),this.type="html",this.renderInstance=Tl}readValueFromInstance(e,t){if(vr.has(t))return((e,t)=>{const{transform:n="none"}=getComputedStyle(e);return pr(n,t)})(e,t);{const r=(n=e,window.getComputedStyle(n)),s=(_t(t)?r.getPropertyValue(t):r[t])||0;return"string"==typeof s?s.trim():s}var n}measureInstanceViewportBox(e,{transformPagePoint:t}){return Ii(e,t)}build(e,t,n){oa(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return Ta(e,t,n)}}const jl=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);class Rl extends Nl{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=yi}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(vr.has(t)){const e=os(t);return e&&e.default||0}return t=jl.has(t)?t:Qs(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return ja(e,t,n)}build(e,t,n){ga(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,r){!function(e,t,n,r){Tl(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(jl.has(s)?s:Qs(s),t.attrs[s])}(e,t,0,r)}mount(e){this.isSVGTag=va(e.tagName),super.mount(e)}}const Al=(e,t)=>fa(e)?new Rl(t):new Cl(t,{allowProjection:e!==Y.Fragment}),_l=Ls(Aa({...ii,...vl,...cl,...bl},Al));function Dl(e,t){[...t].reverse().forEach((n=>{const r=e.getVariant(n);r&&Ma(e,r),e.variantChildren&&e.variantChildren.forEach((e=>{Dl(e,t)}))}))}function Il(){const e=new Set,t={subscribe:t=>(e.add(t),()=>{e.delete(t)}),start(t,n){const r=[];return e.forEach((e=>{r.push(Ka(e,t,{transitionOverride:n}))})),Promise.all(r)},set:t=>e.forEach((e=>{!function(e,t){Array.isArray(t)?Dl(e,t):"string"==typeof t?Dl(e,[t]):Ma(e,t)}(e,t)})),stop(){e.forEach((e=>{!function(e){e.values.forEach((e=>e.stop()))}(e)}))},mount:()=>()=>{t.stop()}};return t}const Pl=function(){const e=Ae(Il);return De(e.mount,[]),e},Ml=(...e)=>e.filter(((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t)).join(" ").trim()
/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */;
/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ll={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=Y.forwardRef((({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:i,...o},l)=>Y.createElement("svg",{ref:l,...Ll,width:t,height:t,stroke:e,strokeWidth:r?24*Number(n)/Number(t):n,className:Ml("lucide",s),...o},[...i.map((([e,t])=>Y.createElement(e,t))),...Array.isArray(a)?a:[a]]))),Ul=(e,t)=>{const n=Y.forwardRef((({className:n,...r},s)=>{return Y.createElement(Ol,{ref:s,iconNode:t,className:Ml(`lucide-${a=e,a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,n),...r});var a}));return n.displayName=`${e}`,n},Fl=Ul("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),zl=Ul("Bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),Vl=Ul("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),Bl=Ul("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),ql=Ul("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),$l=Ul("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),Hl=Ul("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Wl=Ul("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]),Gl=Ul("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]),Kl=Ul("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Ql=Ul("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Xl=Ul("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Yl=Ul("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Jl=Ul("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Zl=Ul("CircleUserRound",[["path",{d:"M18 20a6 6 0 0 0-12 0",key:"1qehca"}],["circle",{cx:"12",cy:"10",r:"4",key:"1h16sb"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),ec=Ul("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),tc=Ul("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),nc=Ul("ClipboardPenLine",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",key:"1oijnt"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-.5",key:"1but9f"}],["path",{d:"M16 4h2a2 2 0 0 1 1.73 1",key:"1p8n7l"}],["path",{d:"M8 18h1",key:"13wk12"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}]]),rc=Ul("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]),sc=Ul("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),ac=Ul("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),ic=Ul("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]),oc=Ul("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),lc=Ul("FileX",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m14.5 12.5-5 5",key:"b62r18"}],["path",{d:"m9.5 12.5 5 5",key:"1rk7el"}]]),cc=Ul("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),uc=Ul("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),dc=Ul("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]),hc=Ul("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),fc=Ul("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),mc=Ul("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),pc=Ul("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]),gc=Ul("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),yc=Ul("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),vc=Ul("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),bc=Ul("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),xc=Ul("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),wc=Ul("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Ec=Ul("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),kc=Ul("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),Sc=Ul("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]),Nc=Ul("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2V5z",key:"1ivx2i"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h.01",key:"xkw8gn"}]]),Tc=Ul("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Cc=Ul("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]),jc=Ul("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Rc=Ul("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),Ac=Ul("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),_c=Ul("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),Dc=Ul("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),Ic=Ul("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]),Pc=Ul("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),Mc=Ul("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]),Lc=Ul("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),Oc=Ul("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Uc=Ul("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Fc=Ul("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),zc=Ul("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);
/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function Vc(e,t){return function(){return e.apply(t,arguments)}}const{toString:Bc}=Object.prototype,{getPrototypeOf:qc}=Object,{iterator:$c,toStringTag:Hc}=Symbol,Wc=(Gc=Object.create(null),e=>{const t=Bc.call(e);return Gc[t]||(Gc[t]=t.slice(8,-1).toLowerCase())});var Gc;const Kc=e=>(e=e.toLowerCase(),t=>Wc(t)===e),Qc=e=>t=>typeof t===e,{isArray:Xc}=Array,Yc=Qc("undefined");const Jc=Kc("ArrayBuffer");const Zc=Qc("string"),eu=Qc("function"),tu=Qc("number"),nu=e=>null!==e&&"object"==typeof e,ru=e=>{if("object"!==Wc(e))return!1;const t=qc(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Hc in e||$c in e)},su=Kc("Date"),au=Kc("File"),iu=Kc("Blob"),ou=Kc("FileList"),lu=Kc("URLSearchParams"),[cu,uu,du,hu]=["ReadableStream","Request","Response","Headers"].map(Kc);function fu(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let r,s;if("object"!=typeof e&&(e=[e]),Xc(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{const s=n?Object.getOwnPropertyNames(e):Object.keys(e),a=s.length;let i;for(r=0;r<a;r++)i=s[r],t.call(null,e[i],i,e)}}function mu(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,s=n.length;for(;s-- >0;)if(r=n[s],t===r.toLowerCase())return r;return null}const pu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,gu=e=>!Yc(e)&&e!==pu;const yu=(vu="undefined"!=typeof Uint8Array&&qc(Uint8Array),e=>vu&&e instanceof vu);var vu;const bu=Kc("HTMLFormElement"),xu=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),wu=Kc("RegExp"),Eu=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};fu(n,((n,s)=>{let a;!1!==(a=t(n,s,e))&&(r[s]=a||n)})),Object.defineProperties(e,r)};const ku=Kc("AsyncFunction"),Su=(Nu="function"==typeof setImmediate,Tu=eu(pu.postMessage),Nu?setImmediate:Tu?(Cu=`axios@${Math.random()}`,ju=[],pu.addEventListener("message",(({source:e,data:t})=>{e===pu&&t===Cu&&ju.length&&ju.shift()()}),!1),e=>{ju.push(e),pu.postMessage(Cu,"*")}):e=>setTimeout(e));var Nu,Tu,Cu,ju;const Ru="undefined"!=typeof queueMicrotask?queueMicrotask.bind(pu):"undefined"!=typeof process&&process.nextTick||Su,Au={isArray:Xc,isArrayBuffer:Jc,isBuffer:function(e){return null!==e&&!Yc(e)&&null!==e.constructor&&!Yc(e.constructor)&&eu(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||eu(e.append)&&("formdata"===(t=Wc(e))||"object"===t&&eu(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Jc(e.buffer),t},isString:Zc,isNumber:tu,isBoolean:e=>!0===e||!1===e,isObject:nu,isPlainObject:ru,isReadableStream:cu,isRequest:uu,isResponse:du,isHeaders:hu,isUndefined:Yc,isDate:su,isFile:au,isBlob:iu,isRegExp:wu,isFunction:eu,isStream:e=>nu(e)&&eu(e.pipe),isURLSearchParams:lu,isTypedArray:yu,isFileList:ou,forEach:fu,merge:function e(){const{caseless:t}=gu(this)&&this||{},n={},r=(r,s)=>{const a=t&&mu(n,s)||s;ru(n[a])&&ru(r)?n[a]=e(n[a],r):ru(r)?n[a]=e({},r):Xc(r)?n[a]=r.slice():n[a]=r};for(let s=0,a=arguments.length;s<a;s++)arguments[s]&&fu(arguments[s],r);return n},extend:(e,t,n,{allOwnKeys:r}={})=>(fu(t,((t,r)=>{n&&eu(t)?e[r]=Vc(t,n):e[r]=t}),{allOwnKeys:r}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let s,a,i;const o={};if(t=t||{},null==e)return t;do{for(s=Object.getOwnPropertyNames(e),a=s.length;a-- >0;)i=s[a],r&&!r(i,e,t)||o[i]||(t[i]=e[i],o[i]=!0);e=!1!==n&&qc(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Wc,kindOfTest:Kc,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(Xc(e))return e;let t=e.length;if(!tu(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[$c]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:bu,hasOwnProperty:xu,hasOwnProp:xu,reduceDescriptors:Eu,freezeMethods:e=>{Eu(e,((t,n)=>{if(eu(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];eu(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return Xc(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:mu,global:pu,isContextDefined:gu,isSpecCompliantForm:function(e){return!!(e&&eu(e.append)&&"FormData"===e[Hc]&&e[$c])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(nu(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const s=Xc(e)?[]:{};return fu(e,((e,t)=>{const a=n(e,r+1);!Yc(a)&&(s[t]=a)})),t[r]=void 0,s}}return e};return n(e,0)},isAsyncFn:ku,isThenable:e=>e&&(nu(e)||eu(e))&&eu(e.then)&&eu(e.catch),setImmediate:Su,asap:Ru,isIterable:e=>null!=e&&eu(e[$c])};function _u(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}Au.inherits(_u,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Au.toJSONObject(this.config),code:this.code,status:this.status}}});const Du=_u.prototype,Iu={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Iu[e]={value:e}})),Object.defineProperties(_u,Iu),Object.defineProperty(Du,"isAxiosError",{value:!0}),_u.from=(e,t,n,r,s,a)=>{const i=Object.create(Du);return Au.toFlatObject(e,i,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),_u.call(i,e.message,t,n,r,s),i.cause=e,i.name=e.name,a&&Object.assign(i,a),i};function Pu(e){return Au.isPlainObject(e)||Au.isArray(e)}function Mu(e){return Au.endsWith(e,"[]")?e.slice(0,-2):e}function Lu(e,t,n){return e?e.concat(t).map((function(e,t){return e=Mu(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const Ou=Au.toFlatObject(Au,{},null,(function(e){return/^is[A-Z]/.test(e)}));function Uu(e,t,n){if(!Au.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=Au.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Au.isUndefined(t[e])}))).metaTokens,s=n.visitor||c,a=n.dots,i=n.indexes,o=(n.Blob||"undefined"!=typeof Blob&&Blob)&&Au.isSpecCompliantForm(t);if(!Au.isFunction(s))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Au.isDate(e))return e.toISOString();if(!o&&Au.isBlob(e))throw new _u("Blob is not supported. Use a Buffer instead.");return Au.isArrayBuffer(e)||Au.isTypedArray(e)?o&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,s){let o=e;if(e&&!s&&"object"==typeof e)if(Au.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(Au.isArray(e)&&function(e){return Au.isArray(e)&&!e.some(Pu)}(e)||(Au.isFileList(e)||Au.endsWith(n,"[]"))&&(o=Au.toArray(e)))return n=Mu(n),o.forEach((function(e,r){!Au.isUndefined(e)&&null!==e&&t.append(!0===i?Lu([n],r,a):null===i?n:n+"[]",l(e))})),!1;return!!Pu(e)||(t.append(Lu(s,n,a),l(e)),!1)}const u=[],d=Object.assign(Ou,{defaultVisitor:c,convertValue:l,isVisitable:Pu});if(!Au.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Au.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),Au.forEach(n,(function(n,a){!0===(!(Au.isUndefined(n)||null===n)&&s.call(t,n,Au.isString(a)?a.trim():a,r,d))&&e(n,r?r.concat(a):[a])})),u.pop()}}(e),t}function Fu(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function zu(e,t){this._pairs=[],e&&Uu(e,this,t)}const Vu=zu.prototype;function Bu(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function qu(e,t,n){if(!t)return e;const r=n&&n.encode||Bu;Au.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let a;if(a=s?s(t,n):Au.isURLSearchParams(t)?t.toString():new zu(t,n).toString(r),a){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}Vu.append=function(e,t){this._pairs.push([e,t])},Vu.toString=function(e){const t=e?function(t){return e.call(this,t,Fu)}:Fu;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};class $u{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Au.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}const Hu={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Wu={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:zu,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Gu="undefined"!=typeof window&&"undefined"!=typeof document,Ku="object"==typeof navigator&&navigator||void 0,Qu=Gu&&(!Ku||["ReactNative","NativeScript","NS"].indexOf(Ku.product)<0),Xu="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,Yu=Gu&&window.location.href||"http://localhost",Ju={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Gu,hasStandardBrowserEnv:Qu,hasStandardBrowserWebWorkerEnv:Xu,navigator:Ku,origin:Yu},Symbol.toStringTag,{value:"Module"})),...Wu};function Zu(e){function t(e,n,r,s){let a=e[s++];if("__proto__"===a)return!0;const i=Number.isFinite(+a),o=s>=e.length;if(a=!a&&Au.isArray(r)?r.length:a,o)return Au.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!i;r[a]&&Au.isObject(r[a])||(r[a]=[]);return t(e,n,r[a],s)&&Au.isArray(r[a])&&(r[a]=function(e){const t={},n=Object.keys(e);let r;const s=n.length;let a;for(r=0;r<s;r++)a=n[r],t[a]=e[a];return t}(r[a])),!i}if(Au.isFormData(e)&&Au.isFunction(e.entries)){const n={};return Au.forEachEntry(e,((e,r)=>{t(function(e){return Au.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null}const ed={transitional:Hu,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,s=Au.isObject(e);s&&Au.isHTMLForm(e)&&(e=new FormData(e));if(Au.isFormData(e))return r?JSON.stringify(Zu(e)):e;if(Au.isArrayBuffer(e)||Au.isBuffer(e)||Au.isStream(e)||Au.isFile(e)||Au.isBlob(e)||Au.isReadableStream(e))return e;if(Au.isArrayBufferView(e))return e.buffer;if(Au.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Uu(e,new Ju.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return Ju.isNode&&Au.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((a=Au.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Uu(a?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||r?(t.setContentType("application/json",!1),function(e,t,n){if(Au.isString(e))try{return(t||JSON.parse)(e),Au.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||ed.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(Au.isResponse(e)||Au.isReadableStream(e))return e;if(e&&Au.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(s){if(n){if("SyntaxError"===s.name)throw _u.from(s,_u.ERR_BAD_RESPONSE,this,null,this.response);throw s}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ju.classes.FormData,Blob:Ju.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Au.forEach(["delete","get","head","post","put","patch"],(e=>{ed.headers[e]={}}));const td=Au.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),nd=Symbol("internals");function rd(e){return e&&String(e).trim().toLowerCase()}function sd(e){return!1===e||null==e?e:Au.isArray(e)?e.map(sd):String(e)}function ad(e,t,n,r,s){return Au.isFunction(r)?r.call(this,t,n):(s&&(t=n),Au.isString(t)?Au.isString(r)?-1!==t.indexOf(r):Au.isRegExp(r)?r.test(t):void 0:void 0)}let id=class{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function s(e,t,n){const s=rd(t);if(!s)throw new Error("header name must be a non-empty string");const a=Au.findKey(r,s);(!a||void 0===r[a]||!0===n||void 0===n&&!1!==r[a])&&(r[a||t]=sd(e))}const a=(e,t)=>Au.forEach(e,((e,n)=>s(e,n,t)));if(Au.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(Au.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))a((e=>{const t={};let n,r,s;return e&&e.split("\n").forEach((function(e){s=e.indexOf(":"),n=e.substring(0,s).trim().toLowerCase(),r=e.substring(s+1).trim(),!n||t[n]&&td[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(Au.isObject(e)&&Au.isIterable(e)){let n,r,s={};for(const t of e){if(!Au.isArray(t))throw TypeError("Object iterator must return a key-value pair");s[r=t[0]]=(n=s[r])?Au.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}a(s,t)}else null!=e&&s(t,e,n);return this}get(e,t){if(e=rd(e)){const n=Au.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(Au.isFunction(t))return t.call(this,e,n);if(Au.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=rd(e)){const n=Au.findKey(this,e);return!(!n||void 0===this[n]||t&&!ad(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function s(e){if(e=rd(e)){const s=Au.findKey(n,e);!s||t&&!ad(0,n[s],s,t)||(delete n[s],r=!0)}}return Au.isArray(e)?e.forEach(s):s(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const s=t[n];e&&!ad(0,this[s],s,e,!0)||(delete this[s],r=!0)}return r}normalize(e){const t=this,n={};return Au.forEach(this,((r,s)=>{const a=Au.findKey(n,s);if(a)return t[a]=sd(r),void delete t[s];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(s):String(s).trim();i!==s&&delete t[s],t[i]=sd(r),n[i]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Au.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&Au.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[nd]=this[nd]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=rd(e);t[r]||(!function(e,t){const n=Au.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,s){return this[r].call(this,t,e,n,s)},configurable:!0})}))}(n,e),t[r]=!0)}return Au.isArray(e)?e.forEach(r):r(e),this}};function od(e,t){const n=this||ed,r=t||n,s=id.from(r.headers);let a=r.data;return Au.forEach(e,(function(e){a=e.call(n,a,s.normalize(),t?t.status:void 0)})),s.normalize(),a}function ld(e){return!(!e||!e.__CANCEL__)}function cd(e,t,n){_u.call(this,null==e?"canceled":e,_u.ERR_CANCELED,t,n),this.name="CanceledError"}function ud(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new _u("Request failed with status code "+n.status,[_u.ERR_BAD_REQUEST,_u.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}id.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Au.reduceDescriptors(id.prototype,(({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}})),Au.freezeMethods(id),Au.inherits(cd,_u,{__CANCEL__:!0});const dd=(e,t,n=3)=>{let r=0;const s=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s,a=0,i=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=r[i];s||(s=l),n[a]=o,r[a]=l;let u=i,d=0;for(;u!==a;)d+=n[u++],u%=e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),l-s<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}}(50,250);return function(e,t){let n,r,s=0,a=1e3/t;const i=(t,a=Date.now())=>{s=a,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[(...e)=>{const t=Date.now(),o=t-s;o>=a?i(e,t):(n=e,r||(r=setTimeout((()=>{r=null,i(n)}),a-o)))},()=>n&&i(n)]}((n=>{const a=n.loaded,i=n.lengthComputable?n.total:void 0,o=a-r,l=s(o);r=a;e({loaded:a,total:i,progress:i?a/i:void 0,bytes:o,rate:l||void 0,estimated:l&&i&&a<=i?(i-a)/l:void 0,event:n,lengthComputable:null!=i,[t?"download":"upload"]:!0})}),n)},hd=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},fd=e=>(...t)=>Au.asap((()=>e(...t))),md=Ju.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Ju.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Ju.origin),Ju.navigator&&/(msie|trident)/i.test(Ju.navigator.userAgent)):()=>!0,pd=Ju.hasStandardBrowserEnv?{write(e,t,n,r,s,a){const i=[e+"="+encodeURIComponent(t)];Au.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),Au.isString(r)&&i.push("path="+r),Au.isString(s)&&i.push("domain="+s),!0===a&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function gd(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const yd=e=>e instanceof id?{...e}:e;function vd(e,t){t=t||{};const n={};function r(e,t,n,r){return Au.isPlainObject(e)&&Au.isPlainObject(t)?Au.merge.call({caseless:r},e,t):Au.isPlainObject(t)?Au.merge({},t):Au.isArray(t)?t.slice():t}function s(e,t,n,s){return Au.isUndefined(t)?Au.isUndefined(e)?void 0:r(void 0,e,0,s):r(e,t,0,s)}function a(e,t){if(!Au.isUndefined(t))return r(void 0,t)}function i(e,t){return Au.isUndefined(t)?Au.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function o(n,s,a){return a in t?r(n,s):a in e?r(void 0,n):void 0}const l={url:a,method:a,data:a,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(e,t,n)=>s(yd(e),yd(t),0,!0)};return Au.forEach(Object.keys(Object.assign({},e,t)),(function(r){const a=l[r]||s,i=a(e[r],t[r],r);Au.isUndefined(i)&&a!==o||(n[r]=i)})),n}const bd=e=>{const t=vd({},e);let n,{data:r,withXSRFToken:s,xsrfHeaderName:a,xsrfCookieName:i,headers:o,auth:l}=t;if(t.headers=o=id.from(o),t.url=qu(gd(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Au.isFormData(r))if(Ju.hasStandardBrowserEnv||Ju.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(n=o.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...t].join("; "))}if(Ju.hasStandardBrowserEnv&&(s&&Au.isFunction(s)&&(s=s(t)),s||!1!==s&&md(t.url))){const e=a&&i&&pd.read(i);e&&o.set(a,e)}return t},xd="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=bd(e);let s=r.data;const a=id.from(r.headers).normalize();let i,o,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:f}=r;function m(){c&&c(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(i),r.signal&&r.signal.removeEventListener("abort",i)}let p=new XMLHttpRequest;function g(){if(!p)return;const r=id.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders());ud((function(e){t(e),m()}),(function(e){n(e),m()}),{data:d&&"text"!==d&&"json"!==d?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:r,config:e,request:p}),p=null}p.open(r.method.toUpperCase(),r.url,!0),p.timeout=r.timeout,"onloadend"in p?p.onloadend=g:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(g)},p.onabort=function(){p&&(n(new _u("Request aborted",_u.ECONNABORTED,e,p)),p=null)},p.onerror=function(){n(new _u("Network Error",_u.ERR_NETWORK,e,p)),p=null},p.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const s=r.transitional||Hu;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new _u(t,s.clarifyTimeoutError?_u.ETIMEDOUT:_u.ECONNABORTED,e,p)),p=null},void 0===s&&a.setContentType(null),"setRequestHeader"in p&&Au.forEach(a.toJSON(),(function(e,t){p.setRequestHeader(t,e)})),Au.isUndefined(r.withCredentials)||(p.withCredentials=!!r.withCredentials),d&&"json"!==d&&(p.responseType=r.responseType),f&&([l,u]=dd(f,!0),p.addEventListener("progress",l)),h&&p.upload&&([o,c]=dd(h),p.upload.addEventListener("progress",o),p.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(i=t=>{p&&(n(!t||t.type?new cd(null,e,p):t),p.abort(),p=null)},r.cancelToken&&r.cancelToken.subscribe(i),r.signal&&(r.signal.aborted?i():r.signal.addEventListener("abort",i)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);y&&-1===Ju.protocols.indexOf(y)?n(new _u("Unsupported protocol "+y+":",_u.ERR_BAD_REQUEST,e)):p.send(s||null)}))},wd=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const s=function(e){if(!n){n=!0,i();const t=e instanceof Error?e:this.reason;r.abort(t instanceof _u?t:new cd(t instanceof Error?t.message:t))}};let a=t&&setTimeout((()=>{a=null,s(new _u(`timeout ${t} of ms exceeded`,_u.ETIMEDOUT))}),t);const i=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(s):e.removeEventListener("abort",s)})),e=null)};e.forEach((e=>e.addEventListener("abort",s)));const{signal:o}=r;return o.unsubscribe=()=>Au.asap(i),o}},Ed=function*(e,t){let n=e.byteLength;if(n<t)return void(yield e);let r,s=0;for(;s<n;)r=s+t,yield e.slice(s,r),s=r},kd=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},Sd=(e,t,n,r)=>{const s=async function*(e,t){for await(const n of kd(e))yield*Ed(n,t)}(e,t);let a,i=0,o=e=>{a||(a=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await s.next();if(t)return o(),void e.close();let a=r.byteLength;if(n){let e=i+=a;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw o(t),t}},cancel:e=>(o(e),s.return())},{highWaterMark:2})},Nd="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,Td=Nd&&"function"==typeof ReadableStream,Cd=Nd&&("function"==typeof TextEncoder?(jd=new TextEncoder,e=>jd.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var jd;const Rd=(e,...t)=>{try{return!!e(...t)}catch(n){return!1}},Ad=Td&&Rd((()=>{let e=!1;const t=new Request(Ju.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),_d=Td&&Rd((()=>Au.isReadableStream(new Response("").body))),Dd={stream:_d&&(e=>e.body)};var Id;Nd&&(Id=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!Dd[e]&&(Dd[e]=Au.isFunction(Id[e])?t=>t[e]():(t,n)=>{throw new _u(`Response type '${e}' is not supported`,_u.ERR_NOT_SUPPORT,n)})})));const Pd=async(e,t)=>{const n=Au.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(Au.isBlob(e))return e.size;if(Au.isSpecCompliantForm(e)){const t=new Request(Ju.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Au.isArrayBufferView(e)||Au.isArrayBuffer(e)?e.byteLength:(Au.isURLSearchParams(e)&&(e+=""),Au.isString(e)?(await Cd(e)).byteLength:void 0)})(t):n},Md={http:null,xhr:xd,fetch:Nd&&(async e=>{let{url:t,method:n,data:r,signal:s,cancelToken:a,timeout:i,onDownloadProgress:o,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:h}=bd(e);c=c?(c+"").toLowerCase():"text";let f,m=wd([s,a&&a.toAbortSignal()],i);const p=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let g;try{if(l&&Ad&&"get"!==n&&"head"!==n&&0!==(g=await Pd(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(Au.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=hd(g,dd(fd(l)));r=Sd(n.body,65536,e,t)}}Au.isString(d)||(d=d?"include":"omit");const s="credentials"in Request.prototype;f=new Request(t,{...h,signal:m,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:s?d:void 0});let a=await fetch(f);const i=_d&&("stream"===c||"response"===c);if(_d&&(o||i&&p)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=a[t]}));const t=Au.toFiniteNumber(a.headers.get("content-length")),[n,r]=o&&hd(t,dd(fd(o),!0))||[];a=new Response(Sd(a.body,65536,n,(()=>{r&&r(),p&&p()})),e)}c=c||"text";let y=await Dd[Au.findKey(Dd,c)||"text"](a,e);return!i&&p&&p(),await new Promise(((t,n)=>{ud(t,n,{data:y,headers:id.from(a.headers),status:a.status,statusText:a.statusText,config:e,request:f})}))}catch(y){if(p&&p(),y&&"TypeError"===y.name&&/Load failed|fetch/i.test(y.message))throw Object.assign(new _u("Network Error",_u.ERR_NETWORK,e,f),{cause:y.cause||y});throw _u.from(y,y&&y.code,e,f)}})};Au.forEach(Md,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));const Ld=e=>`- ${e}`,Od=e=>Au.isFunction(e)||null===e||!1===e,Ud=e=>{e=Au.isArray(e)?e:[e];const{length:t}=e;let n,r;const s={};for(let a=0;a<t;a++){let t;if(n=e[a],r=n,!Od(n)&&(r=Md[(t=String(n)).toLowerCase()],void 0===r))throw new _u(`Unknown adapter '${t}'`);if(r)break;s[t||"#"+a]=r}if(!r){const e=Object.entries(s).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));throw new _u("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(Ld).join("\n"):" "+Ld(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r};function Fd(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new cd(null,e)}function zd(e){Fd(e),e.headers=id.from(e.headers),e.data=od.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Ud(e.adapter||ed.adapter)(e).then((function(t){return Fd(e),t.data=od.call(e,e.transformResponse,t),t.headers=id.from(t.headers),t}),(function(t){return ld(t)||(Fd(e),t&&t.response&&(t.response.data=od.call(e,e.transformResponse,t.response),t.response.headers=id.from(t.response.headers))),Promise.reject(t)}))}const Vd="1.9.0",Bd={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Bd[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const qd={};Bd.transitional=function(e,t,n){function r(e,t){return"[Axios v1.9.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,s,a)=>{if(!1===e)throw new _u(r(s," has been removed"+(t?" in "+t:"")),_u.ERR_DEPRECATED);return t&&!qd[s]&&(qd[s]=!0,console.warn(r(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,s,a)}},Bd.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};const $d={assertOptions:function(e,t,n){if("object"!=typeof e)throw new _u("options must be an object",_u.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const a=r[s],i=t[a];if(i){const t=e[a],n=void 0===t||i(t,a,e);if(!0!==n)throw new _u("option "+a+" must be "+n,_u.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new _u("Unknown option "+a,_u.ERR_BAD_OPTION)}},validators:Bd},Hd=$d.validators;let Wd=class{constructor(e){this.defaults=e||{},this.interceptors={request:new $u,response:new $u}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(r){}}throw n}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=vd(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:s}=t;void 0!==n&&$d.assertOptions(n,{silentJSONParsing:Hd.transitional(Hd.boolean),forcedJSONParsing:Hd.transitional(Hd.boolean),clarifyTimeoutError:Hd.transitional(Hd.boolean)},!1),null!=r&&(Au.isFunction(r)?t.paramsSerializer={serialize:r}:$d.assertOptions(r,{encode:Hd.function,serialize:Hd.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),$d.assertOptions(t,{baseUrl:Hd.spelling("baseURL"),withXsrfToken:Hd.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=s&&Au.merge(s.common,s[t.method]);s&&Au.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete s[e]})),t.headers=id.concat(a,s);const i=[];let o=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,i.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,d=0;if(!o){const e=[zd.bind(this),void 0];for(e.unshift.apply(e,i),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=i.length;let h=t;for(d=0;d<u;){const e=i[d++],t=i[d++];try{h=e(h)}catch(f){t.call(this,f);break}}try{c=zd.call(this,h)}catch(f){return Promise.reject(f)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return qu(gd((e=vd(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}};Au.forEach(["delete","get","head","options"],(function(e){Wd.prototype[e]=function(t,n){return this.request(vd(n||{},{method:e,url:t,data:(n||{}).data}))}})),Au.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,s){return this.request(vd(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Wd.prototype[e]=t(),Wd.prototype[e+"Form"]=t(!0)}));const Gd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Gd).forEach((([e,t])=>{Gd[t]=e}));const Kd=function e(t){const n=new Wd(t),r=Vc(Wd.prototype.request,n);return Au.extend(r,Wd.prototype,n,{allOwnKeys:!0}),Au.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(vd(t,n))},r}(ed);Kd.Axios=Wd,Kd.CanceledError=cd,Kd.CancelToken=class e{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,s){n.reason||(n.reason=new cd(e,r,s),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let t;return{token:new e((function(e){t=e})),cancel:t}}},Kd.isCancel=ld,Kd.VERSION=Vd,Kd.toFormData=Uu,Kd.AxiosError=_u,Kd.Cancel=Kd.CanceledError,Kd.all=function(e){return Promise.all(e)},Kd.spread=function(e){return function(t){return e.apply(null,t)}},Kd.isAxiosError=function(e){return Au.isObject(e)&&!0===e.isAxiosError},Kd.mergeConfig=vd,Kd.AxiosHeaders=id,Kd.formToJSON=e=>Zu(Au.isHTMLForm(e)?new FormData(e):e),Kd.getAdapter=Ud,Kd.HttpStatusCode=Gd,Kd.default=Kd;const{Axios:Qd,AxiosError:Xd,CanceledError:Yd,isCancel:Jd,CancelToken:Zd,VERSION:eh,all:th,Cancel:nh,isAxiosError:rh,spread:sh,toFormData:ah,AxiosHeaders:ih,HttpStatusCode:oh,formToJSON:lh,getAdapter:ch,mergeConfig:uh}=Kd,dh=Kd.create({baseURL:"https://bigproject-development.konstantine.fr/api",timeout:15e3,headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},transformResponse:[e=>{try{return JSON.parse(e)}catch(t){return e}}],maxRedirects:0});dh.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),!e.data||e.data instanceof FormData||(e.headers["Content-Type"]="application/json"),e}),(e=>Promise.reject(e))),Kd.create({timeout:1e4,headers:{Accept:"application/json"}});const hh=Kd.create({baseURL:"https://api-adresse.data.gouv.fr",timeout:5e3,headers:{Accept:"application/json"}});let fh=!1;(()=>{if(document.getElementById("hide-scrollbars-style"))return;const e=document.createElement("style");e.id="hide-scrollbars-style",e.innerHTML="\n    /* Hide scrollbars in all browsers while keeping scrollability */\n    \n    /* Universal selector for all elements */\n    * {\n      -ms-overflow-style: none !important;\n      scrollbar-width: none !important;\n    }\n    \n    /* WebKit browsers (Chrome, Safari, newer versions of Opera) */\n    ::-webkit-scrollbar,\n    ::-webkit-scrollbar-track,\n    ::-webkit-scrollbar-thumb {\n      width: 0 !important;\n      height: 0 !important;\n      background: transparent !important;\n      display: none !important;\n    }\n    \n    /* Specific elements that might have scrollbars */\n    html, body, div, main, section, article, aside, nav, header, footer {\n      scrollbar-width: none !important;\n      -ms-overflow-style: none !important;\n    }\n    \n    html::-webkit-scrollbar,\n    body::-webkit-scrollbar,\n    div::-webkit-scrollbar,\n    main::-webkit-scrollbar,\n    section::-webkit-scrollbar,\n    article::-webkit-scrollbar,\n    aside::-webkit-scrollbar,\n    nav::-webkit-scrollbar,\n    header::-webkit-scrollbar,\n    footer::-webkit-scrollbar {\n      width: 0 !important;\n      height: 0 !important;\n      background: transparent !important;\n      display: none !important;\n    }\n  ",document.head.appendChild(e)})();fh=(()=>{try{if(localStorage&&"true"===localStorage.getItem("preferLowPerformanceMode"))return!0;const e=navigator.hardwareConcurrency||0;if(e>0&&e<=2)return!0;const t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),n=/Windows NT (5\.1|6\.0|6\.1)|Mac OS X 10[._]([0-9]|10|11)/i.test(navigator.userAgent);return t||n}catch(e){return console.error("Error detecting performance mode:",e),!1}})();(()=>{if("undefined"==typeof document)return;if(document.getElementById("global-page-transition-overlay"))return;const e=document.createElement("div");e.id="global-page-transition-overlay",e.style.cssText=`\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: white;\n    z-index: 9999;\n    display: none;\n    justify-content: center;\n    align-items: center;\n    opacity: 0;\n    transition: opacity ${fh?"0.1s":"0.2s"} ease-in-out;\n  `;const t=document.createElement("div");t.style.cssText=fh?"\n      width: 30px;\n      height: 30px;\n      border-radius: 50%;\n      border: 2px solid rgba(0, 40, 79, 0.3);\n      border-top-color: #02284f;\n      animation: loader-spin 1.2s infinite linear;\n    ":"\n      width: 40px;\n      height: 40px;\n      border-radius: 50%;\n      border: 3px solid rgba(0, 40, 79, 0.1);\n      border-top-color: #02284f;\n      animation: loader-spin 1s infinite linear;\n    ";const n=document.createElement("style");n.textContent="\n    @keyframes loader-spin {\n      0% { transform: rotate(0deg); }\n      100% { transform: rotate(360deg); }\n    }\n  ",e.appendChild(t),document.head.appendChild(n),document.body?document.body.appendChild(e):window.addEventListener("DOMContentLoaded",(()=>{document.body.appendChild(e)}))})();const mh=new Map;function ph(){if(void 0!==window._devicePerformanceScore)return window._devicePerformanceScore;try{const e=performance.now();let t=0;for(let s=0;s<1e5;s++)t+=Math.sqrt(s);const n=performance.now()-e,r=Math.min(100,Math.max(0,n/10));return window._devicePerformanceScore=r,r}catch(e){return 50}}function gh(e,t=!1){const n=ph(),r=t?Math.max(1,1+n/100):Math.max(1,1.5+n/50);return Math.round(e*r)}const yh=(e=!1)=>{const t=(void 0===window._devicePerformanceScore&&ph(),"true"===localStorage.getItem("preferLowPerformanceMode")||window._devicePerformanceScore>70);return e?t?3e3:2e3:t?15e3:3e4};Kd.interceptors.request.use((e=>{if(e.data,e.url&&(e.url.includes("/login_check")||e.url.includes("/token/refresh")||e.url.includes("/token/revoke")),!e.timeout){const t=e.url&&(e.url.includes("/profile/")||e.url.includes("/me"));e.timeout=yh(t)}e.withCredentials=!0;const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),(e=>Promise.reject(e))),Kd.interceptors.response.use((e=>(e.config?.url&&(e.config.url.includes("/login_check")||e.config.url.includes("/token/refresh")||e.config.url.includes("/token/revoke")),e)),(e=>Promise.reject(e))),Kd.defaults.withCredentials=!0,Kd.defaults.timeout=15e3;const vh=3e5,bh={MAX_CACHE_SIZE:30,MAX_ITEM_SIZE:102400,PROFILE_SIZE_LIMIT:51200,CLEANUP_INTERVAL:12e4},xh=new Map;let wh=!1,Eh=Date.now();const kh="public-profile",Sh=e=>{const t=JSON.stringify(e);return t?2*t.length:0},Nh=()=>{const e=Date.now();if(!(e-Eh<bh.CLEANUP_INTERVAL)){Eh=e;for(const[t,n]of xh.entries())n.expiry<e&&xh.delete(t);if(xh.size>bh.MAX_CACHE_SIZE){const t=Array.from(xh.entries());t.forEach((([t,n])=>{const r=e-n.timestamp,s=Sh(n.data);n._score=r*(s/1024)})),t.sort(((e,t)=>t[1]._score-e[1]._score));for(let e=0;e<t.length&&xh.size>bh.MAX_CACHE_SIZE;e++)xh.delete(t[e][0])}if(window.gc)try{window.gc()}catch(t){}}},Th=e=>{if(!e)return"/api";const t=e.replace(/\/+$/,"");return t.match(/^https?:\/\//)||t.startsWith("/api/")?t:t.startsWith("/")?`/api${t}`:`/api/${t}`},Ch=(e,t,n={})=>`${e}:${t}:${JSON.stringify(n)}`,jh={async get(e,t={}){try{const r=Th(e),s=`${e}${JSON.stringify(t.params||{})}`,a=e.includes("/profile/public/"),i="/profile"===e||"/me"===e||"/api/me"===e,o=a||i,l=e.includes("/static")||e.includes("/config");if(i&&!t.noCache&&!t.background)try{const e=localStorage.getItem("user");if(e){const t=JSON.parse(e),n=t._extractedAt||0;if(Date.now()-n<3e4)return Promise.resolve(t)}}catch(n){}if(mh.has(s))return mh.get(s);if(!t.noCache){const e=Ch("GET",r,t.params),n=xh.get(e);if(n&&n.expiry>Date.now())return n.data}const c=e.includes("/messages"),u=e.includes("/auth")||!0===t.critical,d=o?2e3:c?5e3:u?8e3:1e4,h=t.timeout||gh(d,u),f={...t,timeout:h,headers:{...t.headers,"X-Request-Type":o?"profile":l?"static":"standard","X-Cache-Priority":o?"high":"normal","Cache-Control":o?"no-cache":"max-age=300"}},m=void 0!==t.retries?Math.min(t.retries,2):o?0:c?1:0,p=(async()=>{let e=0,s=null;Date.now();for(;e<=m;)try{const e=await Kd.get(r,f);if(!t.noCache){const s=Ch("GET",r,t.params);let a=t.cacheDuration||6e4;o?a=vh:l&&(a=6e5);const i=Sh(e.data);if(i<=(o?bh.PROFILE_SIZE_LIMIT:bh.MAX_ITEM_SIZE)&&xh.set(s,{data:e.data,timestamp:Date.now(),expiry:Date.now()+a,size:i}),o&&e.data)try{const t=this._createMinimalUserData(e.data);t._extractedAt=Date.now(),localStorage.setItem("user",JSON.stringify(t))}catch(n){}Nh()}return e.data}catch(a){if(s=a,o)try{const e=Ch("GET",r,t.params),n=xh.get(e);if(n)return n.data;const s=localStorage.getItem("user");if(s)return JSON.parse(s)}catch(n){}if(a.response&&a.response.status>=400&&a.response.status<500)break;if(!(e<m))break;{const t=Math.min(1e3*Math.pow(2,e),8e3);await new Promise((e=>setTimeout(e,t))),e++}}throw s})();mh.set(s,p);try{return await p}finally{mh.delete(s)}}catch(r){throw r}},async post(e,t={},n={}){try{const r=Th(e);return(await Kd.post(r,t,n)).data}catch(r){if(e.includes("login_check"))throw r;return r.message&&r.message.includes("Network Error")?{success:!1,message:"Erreur de communication avec le serveur"}:r.response&&r.response.data?{success:!1,message:r.response.data.message||"Une erreur est survenue"}:{success:!1,message:"Une erreur est survenue"}}},async put(e,t={},n={}){try{const r=Th(e);return(await Kd.put(r,t,n)).data}catch(r){return r.message&&r.message.includes("Network Error")?{success:!1,message:"Erreur de communication avec le serveur"}:r.response&&r.response.data?{success:!1,message:r.response.data.message||"Une erreur est survenue"}:{success:!1,message:"Une erreur est survenue"}}},async delete(e,t={}){try{return(await Kd.delete(Th(e),t)).data}catch(n){throw n}},async getUsersByRole(e){const t=e.startsWith("ROLE_")?e:`ROLE_${e.replace("ROLE_","")}`;try{return await this.get(`/users-by-role/${t}`)}catch(n){console.warn(`L'API /users-by-role/${t} a chou, tentative avec /users`);const e=await this.get("/users");if(e.success&&e.data){return{success:!0,data:e.data.filter((e=>e.roles&&e.roles.some((e=>e.name===t||e.name===t.replace("ROLE_","")||"ROLE_"+e.name===t))))}}return e}},async getAllRoles(){try{return await this.get("/user-roles/roles")}catch(e){return console.warn("Erreur lors de la rcupration des rles depuis l'API, utilisation des rles prdfinis",e),{success:!0,data:[{id:1,name:"ROLE_SUPERADMIN",description:"Super Administrateur"},{id:2,name:"ROLE_ADMIN",description:"Administrateur"},{id:3,name:"ROLE_TEACHER",description:"Formateur"},{id:4,name:"ROLE_STUDENT",description:"tudiant"},{id:5,name:"ROLE_HR",description:"Ressources Humaines"},{id:6,name:"ROLE_RECRUITER",description:"Recruteur"},{id:7,name:"ROLE_GUEST",description:"Invit"}]}}},async changeUserRole(e,t,n){return this.post("/user-roles/change-role",{userId:e,oldRoleName:t,newRoleName:n})},async updateUser(e,t){return this.put(`/users/${e}`,t)},withAuth(e={}){const t=localStorage.getItem("token");return t?{...e,headers:{...e.headers,Authorization:`Bearer ${t}`}}:e},invalidateCache(e){},invalidateProfileCache(){this.invalidateCache("/profile"),this.invalidateCache("/api/me")},invalidateDocumentCache(){this.invalidateCache("/documents")},clearCache(){xh.clear();["token","refresh_token","user","userRoles"].forEach((e=>{try{localStorage.getItem(e)&&localStorage.removeItem(e)}catch(t){}})),window.dispatchEvent(new Event("api-cache-cleared"))},invalidateCacheEntry(e,t,n={}){const r=Th(t),s=Ch(e,r,n);xh.delete(s)},async getUserProfile(e={}){if(!e.noCache)try{const e=localStorage.getItem("user");if(e){const t=JSON.parse(e),n=t._extractedAt||0;if(Date.now()-n<3e4)return t}}catch(t){}return this.get("/me",{headers:{"X-Request-Type":"profile","X-Cache-Priority":"high"},cacheDuration:vh,timeout:gh(2e3,!0),retries:0,...e})},preloadProfileData(){wh||(wh=!0,setTimeout((()=>{this.getUserProfile({background:!0}).catch((()=>{}))}),100))},_createMinimalUserData(e){if(!e)return null;const t={id:e.id,email:e.email,firstName:e.firstName||e.firstname,lastName:e.lastName||e.lastname,roles:e.roles,status:e.status};return e.avatar&&(t.avatar=e.avatar),e.permissions&&(t.permissions=e.permissions),t},clearMemoryCache(){if(xh.clear(),window.gc)try{window.gc()}catch(e){}},async getPublicProfile(e,t={}){if(!e)throw new Error("User ID is required to fetch public profile");const n=`${kh}-${e}`;try{if(!t.signal){const e=xh.get(n);if(e&&e.expiry>Date.now())return e.data}const r=await this.get(`/profile/public/${e}`,{...t,noCache:!0,headers:{...t.headers,"X-Request-Type":"public-profile","Cache-Control":"no-cache",Pragma:"no-cache"},timeout:gh(5e3,!0)});if(r){const e={success:!0,data:{user:r.data?.user||r.data||r}};return t.signal||xh.set(n,{data:e,timestamp:Date.now(),expiry:Date.now()+12e4}),e}throw new Error("No response received from server")}catch(r){if("ECONNABORTED"===r.code)throw new Error("La requte a pris trop de temps, veuillez ressayer");if(r.response)throw new Error(r.response.data.message||"Erreur lors de la rcupration du profil public");throw r}},clearPublicProfileCache(e){if(e){const t=`${kh}-${e}`;xh.delete(t)}else for(const[t]of xh.entries())t.startsWith(kh)&&xh.delete(t)}};const Rh=Array(12).fill(0),Ah=({visible:e,className:t})=>J.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},J.createElement("div",{className:"sonner-spinner"},Rh.map(((e,t)=>J.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`}))))),_h=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Dh=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Ih=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Ph=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Mh=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},J.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),J.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}));let Lh=1;const Oh=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach((t=>t(e)))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:n,...r}=e,s="number"==typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:Lh++,a=this.toasts.find((e=>e.id===s)),i=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),a?this.toasts=this.toasts.map((t=>t.id===s?(this.publish({...t,...e,id:s,title:n}),{...t,...e,id:s,dismissible:i,title:n}):t)):this.addToast({title:n,...r,dismissible:i,id:s}),s},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame((()=>this.subscribers.forEach((t=>t({id:e,dismiss:!0})))))):this.toasts.forEach((e=>{this.subscribers.forEach((t=>t({id:e.id,dismiss:!0})))})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;void 0!==t.loading&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:"function"!=typeof t.description?t.description:void 0}));const r=Promise.resolve(e instanceof Function?e():e);let s,a=void 0!==n;const i=r.then((async e=>{s=["resolve",e];if(J.isValidElement(e))a=!1,this.create({id:n,type:"default",message:e});else if(Uh(e)&&!e.ok){a=!1;const r="function"==typeof t.error?await t.error(`HTTP error! status: ${e.status}`):t.error,s="function"==typeof t.description?await t.description(`HTTP error! status: ${e.status}`):t.description,i="object"==typeof r&&!J.isValidElement(r)?r:{message:r};this.create({id:n,type:"error",description:s,...i})}else if(e instanceof Error){a=!1;const r="function"==typeof t.error?await t.error(e):t.error,s="function"==typeof t.description?await t.description(e):t.description,i="object"==typeof r&&!J.isValidElement(r)?r:{message:r};this.create({id:n,type:"error",description:s,...i})}else if(void 0!==t.success){a=!1;const r="function"==typeof t.success?await t.success(e):t.success,s="function"==typeof t.description?await t.description(e):t.description,i="object"==typeof r&&!J.isValidElement(r)?r:{message:r};this.create({id:n,type:"success",description:s,...i})}})).catch((async e=>{if(s=["reject",e],void 0!==t.error){a=!1;const r="function"==typeof t.error?await t.error(e):t.error,s="function"==typeof t.description?await t.description(e):t.description,i="object"==typeof r&&!J.isValidElement(r)?r:{message:r};this.create({id:n,type:"error",description:s,...i})}})).finally((()=>{a&&(this.dismiss(n),n=void 0),null==t.finally||t.finally.call(t)})),o=()=>new Promise(((e,t)=>i.then((()=>"reject"===s[0]?t(s[1]):e(s[1]))).catch(t)));return"string"!=typeof n&&"number"!=typeof n?{unwrap:o}:Object.assign(n,{unwrap:o})},this.custom=(e,t)=>{const n=(null==t?void 0:t.id)||Lh++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter((e=>!this.dismissedToasts.has(e.id))),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Uh=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,Fh=(e,t)=>{const n=(null==t?void 0:t.id)||Lh++;return Oh.addToast({title:e,...t,id:n}),n},zh=Object.assign(Fh,{success:Oh.success,info:Oh.info,warning:Oh.warning,error:Oh.error,custom:Oh.custom,message:Oh.message,promise:Oh.promise,dismiss:Oh.dismiss,loading:Oh.loading},{getHistory:()=>Oh.toasts,getToasts:()=>Oh.getActiveToasts()});function Vh(e){return void 0!==e.label}!function(e){if("undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");const Bh=3,qh=14;function $h(...e){return e.filter(Boolean).join(" ")}const Hh=e=>{var t,n,r,s,a,i,o,l,c;const{invert:u,toast:d,unstyled:h,interacting:f,setHeights:m,visibleToasts:p,heights:g,index:y,toasts:v,expanded:b,removeToast:x,defaultRichColors:w,closeButton:E,style:k,cancelButtonStyle:S,actionButtonStyle:N,className:T="",descriptionClassName:C="",duration:j,position:R,gap:A,expandByDefault:_,classNames:D,icons:I,closeButtonAriaLabel:P="Close toast"}=e,[M,L]=J.useState(null),[O,U]=J.useState(null),[F,z]=J.useState(!1),[V,B]=J.useState(!1),[q,$]=J.useState(!1),[H,W]=J.useState(!1),[G,K]=J.useState(!1),[Q,X]=J.useState(0),[Y,Z]=J.useState(0),ee=J.useRef(d.duration||j||4e3),te=J.useRef(null),ne=J.useRef(null),re=0===y,se=y+1<=p,ae=d.type,ie=!1!==d.dismissible,oe=d.className||"",le=d.descriptionClassName||"",ce=J.useMemo((()=>g.findIndex((e=>e.toastId===d.id))||0),[g,d.id]),ue=J.useMemo((()=>{var e;return null!=(e=d.closeButton)?e:E}),[d.closeButton,E]),de=J.useMemo((()=>d.duration||j||4e3),[d.duration,j]),he=J.useRef(0),fe=J.useRef(0),me=J.useRef(0),pe=J.useRef(null),[ge,ye]=R.split("-"),ve=J.useMemo((()=>g.reduce(((e,t,n)=>n>=ce?e:e+t.height),0)),[g,ce]),be=(()=>{const[e,t]=J.useState(document.hidden);return J.useEffect((()=>{const e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)}),[]),e})(),xe=d.invert||u,we="loading"===ae;fe.current=J.useMemo((()=>ce*A+ve),[ce,ve]),J.useEffect((()=>{ee.current=de}),[de]),J.useEffect((()=>{z(!0)}),[]),J.useEffect((()=>{const e=ne.current;if(e){const t=e.getBoundingClientRect().height;return Z(t),m((e=>[{toastId:d.id,height:t,position:d.position},...e])),()=>m((e=>e.filter((e=>e.toastId!==d.id))))}}),[m,d.id]),J.useLayoutEffect((()=>{if(!F)return;const e=ne.current,t=e.style.height;e.style.height="auto";const n=e.getBoundingClientRect().height;e.style.height=t,Z(n),m((e=>e.find((e=>e.toastId===d.id))?e.map((e=>e.toastId===d.id?{...e,height:n}:e)):[{toastId:d.id,height:n,position:d.position},...e]))}),[F,d.title,d.description,m,d.id]);const Ee=J.useCallback((()=>{B(!0),X(fe.current),m((e=>e.filter((e=>e.toastId!==d.id)))),setTimeout((()=>{x(d)}),200)}),[d,x,m,fe]);J.useEffect((()=>{if(d.promise&&"loading"===ae||d.duration===1/0||"loading"===d.type)return;let e;return b||f||be?(()=>{if(me.current<he.current){const e=(new Date).getTime()-he.current;ee.current=ee.current-e}me.current=(new Date).getTime()})():ee.current!==1/0&&(he.current=(new Date).getTime(),e=setTimeout((()=>{null==d.onAutoClose||d.onAutoClose.call(d,d),Ee()}),ee.current)),()=>clearTimeout(e)}),[b,f,d,ae,be,Ee]),J.useEffect((()=>{d.delete&&Ee()}),[Ee,d.delete]);const ke=d.icon||(null==I?void 0:I[ae])||(e=>{switch(e){case"success":return _h;case"info":return Ih;case"warning":return Dh;case"error":return Ph;default:return null}})(ae);var Se,Ne;return J.createElement("li",{tabIndex:0,ref:ne,className:$h(T,oe,null==D?void 0:D.toast,null==d||null==(t=d.classNames)?void 0:t.toast,null==D?void 0:D.default,null==D?void 0:D[ae],null==d||null==(n=d.classNames)?void 0:n[ae]),"data-sonner-toast":"","data-rich-colors":null!=(Se=d.richColors)?Se:w,"data-styled":!Boolean(d.jsx||d.unstyled||h),"data-mounted":F,"data-promise":Boolean(d.promise),"data-swiped":G,"data-removed":V,"data-visible":se,"data-y-position":ge,"data-x-position":ye,"data-index":y,"data-front":re,"data-swiping":q,"data-dismissible":ie,"data-type":ae,"data-invert":xe,"data-swipe-out":H,"data-swipe-direction":O,"data-expanded":Boolean(b||_&&F),style:{"--index":y,"--toasts-before":y,"--z-index":v.length-y,"--offset":`${V?Q:fe.current}px`,"--initial-height":_?"auto":`${Y}px`,...k,...d.style},onDragEnd:()=>{$(!1),L(null),pe.current=null},onPointerDown:e=>{!we&&ie&&(te.current=new Date,X(fe.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&($(!0),pe.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,t,n;if(H||!ie)return;pe.current=null;const r=Number((null==(e=ne.current)?void 0:e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),s=Number((null==(t=ne.current)?void 0:t.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),a=(new Date).getTime()-(null==(n=te.current)?void 0:n.getTime()),i="x"===M?r:s,o=Math.abs(i)/a;if(Math.abs(i)>=45||o>.11)return X(fe.current),null==d.onDismiss||d.onDismiss.call(d,d),U("x"===M?r>0?"right":"left":s>0?"down":"up"),Ee(),void W(!0);var l,c;null==(l=ne.current)||l.style.setProperty("--swipe-amount-x","0px"),null==(c=ne.current)||c.style.setProperty("--swipe-amount-y","0px"),K(!1),$(!1),L(null)},onPointerMove:t=>{var n,r,s;if(!pe.current||!ie)return;if((null==(n=window.getSelection())?void 0:n.toString().length)>0)return;const a=t.clientY-pe.current.y,i=t.clientX-pe.current.x;var o;const l=null!=(o=e.swipeDirections)?o:function(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}(R);!M&&(Math.abs(i)>1||Math.abs(a)>1)&&L(Math.abs(i)>Math.abs(a)?"x":"y");let c={x:0,y:0};const u=e=>1/(1.5+Math.abs(e)/20);if("y"===M){if(l.includes("top")||l.includes("bottom"))if(l.includes("top")&&a<0||l.includes("bottom")&&a>0)c.y=a;else{const e=a*u(a);c.y=Math.abs(e)<Math.abs(a)?e:a}}else if("x"===M&&(l.includes("left")||l.includes("right")))if(l.includes("left")&&i<0||l.includes("right")&&i>0)c.x=i;else{const e=i*u(i);c.x=Math.abs(e)<Math.abs(i)?e:i}(Math.abs(c.x)>0||Math.abs(c.y)>0)&&K(!0),null==(r=ne.current)||r.style.setProperty("--swipe-amount-x",`${c.x}px`),null==(s=ne.current)||s.style.setProperty("--swipe-amount-y",`${c.y}px`)}},ue&&!d.jsx&&"loading"!==ae?J.createElement("button",{"aria-label":P,"data-disabled":we,"data-close-button":!0,onClick:we||!ie?()=>{}:()=>{Ee(),null==d.onDismiss||d.onDismiss.call(d,d)},className:$h(null==D?void 0:D.closeButton,null==d||null==(r=d.classNames)?void 0:r.closeButton)},null!=(Ne=null==I?void 0:I.close)?Ne:Mh):null,(ae||d.icon||d.promise)&&null!==d.icon&&(null!==(null==I?void 0:I[ae])||d.icon)?J.createElement("div",{"data-icon":"",className:$h(null==D?void 0:D.icon,null==d||null==(s=d.classNames)?void 0:s.icon)},d.promise||"loading"===d.type&&!d.icon?d.icon||function(){var e,t;return(null==I?void 0:I.loading)?J.createElement("div",{className:$h(null==D?void 0:D.loader,null==d||null==(t=d.classNames)?void 0:t.loader,"sonner-loader"),"data-visible":"loading"===ae},I.loading):J.createElement(Ah,{className:$h(null==D?void 0:D.loader,null==d||null==(e=d.classNames)?void 0:e.loader),visible:"loading"===ae})}():null,"loading"!==d.type?ke:null):null,J.createElement("div",{"data-content":"",className:$h(null==D?void 0:D.content,null==d||null==(a=d.classNames)?void 0:a.content)},J.createElement("div",{"data-title":"",className:$h(null==D?void 0:D.title,null==d||null==(i=d.classNames)?void 0:i.title)},d.jsx?d.jsx:"function"==typeof d.title?d.title():d.title),d.description?J.createElement("div",{"data-description":"",className:$h(C,le,null==D?void 0:D.description,null==d||null==(o=d.classNames)?void 0:o.description)},"function"==typeof d.description?d.description():d.description):null),J.isValidElement(d.cancel)?d.cancel:d.cancel&&Vh(d.cancel)?J.createElement("button",{"data-button":!0,"data-cancel":!0,style:d.cancelButtonStyle||S,onClick:e=>{Vh(d.cancel)&&ie&&(null==d.cancel.onClick||d.cancel.onClick.call(d.cancel,e),Ee())},className:$h(null==D?void 0:D.cancelButton,null==d||null==(l=d.classNames)?void 0:l.cancelButton)},d.cancel.label):null,J.isValidElement(d.action)?d.action:d.action&&Vh(d.action)?J.createElement("button",{"data-button":!0,"data-action":!0,style:d.actionButtonStyle||N,onClick:e=>{Vh(d.action)&&(null==d.action.onClick||d.action.onClick.call(d.action,e),e.defaultPrevented||Ee())},className:$h(null==D?void 0:D.actionButton,null==d||null==(c=d.classNames)?void 0:c.actionButton)},d.action.label):null)};function Wh(){if("undefined"==typeof window)return"ltr";if("undefined"==typeof document)return"ltr";const e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}function Gh(e,t){const n={};return[e,t].forEach(((e,t)=>{const r=1===t,s=r?"--mobile-offset":"--offset",a=r?"16px":"24px";function i(e){["top","right","bottom","left"].forEach((t=>{n[`${s}-${t}`]="number"==typeof e?`${e}px`:e}))}"number"==typeof e||"string"==typeof e?i(e):"object"==typeof e?["top","right","bottom","left"].forEach((t=>{void 0===e[t]?n[`${s}-${t}`]=a:n[`${s}-${t}`]="number"==typeof e[t]?`${e[t]}px`:e[t]})):i(a)})),n}const Kh=J.forwardRef((function(e,t){const{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:a,closeButton:i,className:o,offset:l,mobileOffset:c,theme:u="light",richColors:d,duration:h,style:f,visibleToasts:m=Bh,toastOptions:p,dir:g=Wh(),gap:y=qh,icons:v,containerAriaLabel:b="Notifications"}=e,[x,w]=J.useState([]),E=J.useMemo((()=>Array.from(new Set([r].concat(x.filter((e=>e.position)).map((e=>e.position)))))),[x,r]),[k,S]=J.useState([]),[N,T]=J.useState(!1),[C,j]=J.useState(!1),[R,A]=J.useState("system"!==u?u:"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),_=J.useRef(null),D=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),I=J.useRef(null),P=J.useRef(!1),M=J.useCallback((e=>{w((t=>{var n;return(null==(n=t.find((t=>t.id===e.id)))?void 0:n.delete)||Oh.dismiss(e.id),t.filter((({id:t})=>t!==e.id))}))}),[]);return J.useEffect((()=>Oh.subscribe((e=>{e.dismiss?requestAnimationFrame((()=>{w((t=>t.map((t=>t.id===e.id?{...t,delete:!0}:t))))})):setTimeout((()=>{Z.flushSync((()=>{w((t=>{const n=t.findIndex((t=>t.id===e.id));return-1!==n?[...t.slice(0,n),{...t[n],...e},...t.slice(n+1)]:[e,...t]}))}))}))}))),[x]),J.useEffect((()=>{if("system"!==u)return void A(u);if("system"===u&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?A("dark"):A("light")),"undefined"==typeof window)return;const e=window.matchMedia("(prefers-color-scheme: dark)");try{e.addEventListener("change",(({matches:e})=>{A(e?"dark":"light")}))}catch(t){e.addListener((({matches:e})=>{try{A(e?"dark":"light")}catch(t){console.error(t)}}))}}),[u]),J.useEffect((()=>{x.length<=1&&T(!1)}),[x]),J.useEffect((()=>{const e=e=>{var t;var n;s.every((t=>e[t]||e.code===t))&&(T(!0),null==(n=_.current)||n.focus());"Escape"!==e.code||document.activeElement!==_.current&&!(null==(t=_.current)?void 0:t.contains(document.activeElement))||T(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[s]),J.useEffect((()=>{if(_.current)return()=>{I.current&&(I.current.focus({preventScroll:!0}),I.current=null,P.current=!1)}}),[_.current]),J.createElement("section",{ref:t,"aria-label":`${b} ${D}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},E.map(((t,r)=>{var s;const[u,b]=t.split("-");return x.length?J.createElement("ol",{key:t,dir:"auto"===g?Wh():g,tabIndex:-1,ref:_,className:o,"data-sonner-toaster":!0,"data-sonner-theme":R,"data-y-position":u,"data-lifted":N&&x.length>1&&!a,"data-x-position":b,style:{"--front-toast-height":`${(null==(s=k[0])?void 0:s.height)||0}px`,"--width":"356px","--gap":`${y}px`,...f,...Gh(l,c)},onBlur:e=>{P.current&&!e.currentTarget.contains(e.relatedTarget)&&(P.current=!1,I.current&&(I.current.focus({preventScroll:!0}),I.current=null))},onFocus:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||P.current||(P.current=!0,I.current=e.relatedTarget)},onMouseEnter:()=>T(!0),onMouseMove:()=>T(!0),onMouseLeave:()=>{C||T(!1)},onDragEnd:()=>T(!1),onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||j(!0)},onPointerUp:()=>j(!1)},x.filter((e=>!e.position&&0===r||e.position===t)).map(((r,s)=>{var o,l;return J.createElement(Hh,{key:r.id,icons:v,index:s,toast:r,defaultRichColors:d,duration:null!=(o=null==p?void 0:p.duration)?o:h,className:null==p?void 0:p.className,descriptionClassName:null==p?void 0:p.descriptionClassName,invert:n,visibleToasts:m,closeButton:null!=(l=null==p?void 0:p.closeButton)?l:i,interacting:C,position:t,style:null==p?void 0:p.style,unstyled:null==p?void 0:p.unstyled,classNames:null==p?void 0:p.classNames,cancelButtonStyle:null==p?void 0:p.cancelButtonStyle,actionButtonStyle:null==p?void 0:p.actionButtonStyle,closeButtonAriaLabel:null==p?void 0:p.closeButtonAriaLabel,removeToast:M,toasts:x.filter((e=>e.position==r.position)),heights:k.filter((e=>e.position==r.position)),setHeights:S,expandByDefault:a,gap:y,expanded:N,swipeDirections:e.swipeDirections})}))):null})))})),Qh=new ue({defaultOptions:{queries:{staleTime:6e4,cacheTime:3e5,refetchOnWindowFocus:!1,retry:1,gcTime:6e5,logging:!1,meta:{tracked:!0,devtools:{enabled:!1}}}},logger:{log:()=>{},warn:()=>{},error:(...e)=>console.error(...e)}}),Xh=()=>Qh,Yh={data:null,timestamp:0,isLoading:!1,loadingPromise:null,requestCount:0,pendingRequests:new Map,freshnessDuration:12e4,maxAgeDuration:12e5,consecutiveErrors:0,errorThreshold:3,lastCircuitBreak:0,circuitBreakDuration:15e3,events:new EventTarget,currentOperationId:null,operationDebounceTime:100,lastOperationTime:0,deduplicationMap:new Map,invalidate(){this.data=null,this.timestamp=0}},Jh={LOADED:"userData:loaded",LOADING:"userData:loading",ERROR:"userData:error",UPDATED:"userData:updated",INVALIDATED:"userData:invalidated",UPDATING:"userData:updating"},Zh={activeRequests:new Map,routeUsers:new Map,processingRoutes:new Map,requestDebounceTime:3e3,lastRequestTime:new Map,requestCountPerRoute:new Map,requestThreshold:5,requestCountResetTime:1e4,registerRouteUser(e,t){this.routeUsers.has(e)||this.routeUsers.set(e,new Set),this.routeUsers.get(e).add(t)},unregisterRouteUser(e,t){this.routeUsers.has(e)&&(this.routeUsers.get(e).delete(t),0===this.routeUsers.get(e).size&&this.routeUsers.delete(e))},isRouteShared(e){return this.routeUsers.has(e)&&this.routeUsers.get(e).size>1},markRouteAsProcessing(e){return!this.processingRoutes.has(e)&&(this.processingRoutes.set(e,Date.now()),!0)},markRouteAsNotProcessing(e){this.processingRoutes.delete(e)},isRouteProcessing(e){if(!this.processingRoutes.has(e))return!1;return!(Date.now()-this.processingRoutes.get(e)>1e4)||(this.markRouteAsNotProcessing(e),!1)},shouldThrottleRequest(e){if(e.includes("/api/me"))return!1;const t=Date.now();if(e.includes("/profile")||e.includes("/user-roles")||e.includes("/user")){if("/profile/consolidated"===e){if(this.requestCountPerRoute.has(e)){const n=this.requestCountPerRoute.get(e);if(t-n.timestamp>this.requestCountResetTime)this.requestCountPerRoute.set(e,{count:1,timestamp:t});else if(n.count++,n.count>3)return!0}else this.requestCountPerRoute.set(e,{count:1,timestamp:t});if(this.lastRequestTime.has(e)){if(t-this.lastRequestTime.get(e)<2e3)return!0}return this.lastRequestTime.set(e,t),!1}if(this.requestCountPerRoute.has(e)){const n=this.requestCountPerRoute.get(e);t-n.timestamp>this.requestCountResetTime?this.requestCountPerRoute.set(e,{count:1,timestamp:t}):n.count++}else this.requestCountPerRoute.set(e,{count:1,timestamp:t});return this.lastRequestTime.set(e,t),!1}if(this.requestCountPerRoute.has(e)){const n=this.requestCountPerRoute.get(e);if(t-n.timestamp>this.requestCountResetTime)this.requestCountPerRoute.set(e,{count:1,timestamp:t});else if(n.count++,n.count>this.requestThreshold)return!0}else this.requestCountPerRoute.set(e,{count:1,timestamp:t});if(!this.lastRequestTime.has(e))return this.lastRequestTime.set(e,t),!1;return t-this.lastRequestTime.get(e)<this.requestDebounceTime||(this.lastRequestTime.set(e,t),!1)},registerActiveRequest(e,t){return this.activeRequests.set(e,t),t.finally((()=>{this.activeRequests.get(e)===t&&this.activeRequests.delete(e)})),t},getActiveRequest(e){return this.activeRequests.get(e)},coordinateRequest(e,t){const n=this.getActiveRequest(e);if(n)return n;if(this.isRouteProcessing(e))return Promise.resolve(null);this.markRouteAsProcessing(e);const r=t().finally((()=>{this.markRouteAsNotProcessing(e)}));return this.registerActiveRequest(e,r),r}},ef={cache:Yh,requestRegistry:Zh,subscribers:{},stats:{requestCount:0,invalidationCount:0,updateCount:0,errorCount:0,lastUpdate:null},_debugCounters:{cacheHits:0,apiCalls:0,lastLogTime:0,logInterval:5e3},_log(e,t="info",n=!1){},getCachedUserData(){if(Yh.data)return Yh.data;try{const e=localStorage.getItem("user");if(e){const t=JSON.parse(e);return Yh.data=t,Yh.timestamp=Date.now(),t}}catch(e){}return null},getUserData(e={}){const{forceRefresh:t=!1,useCache:n=!0,componentId:r="default",requestId:s=null,routeKey:a="/api/profile",preventRecursion:i=!1}="object"==typeof e?e:{forceRefresh:!!e};if(window._userDataRequestDepth||(window._userDataRequestDepth=0),window._userDataRequestDepth>2){const e=this.getCachedUserData();if(e)return Promise.resolve(e)}window._userDataRequestDepth++;const o=()=>{window._userDataRequestDepth--};try{if(t)return this._loadUserData(r,{preventRecursion:i,forceRefresh:t,routeKey:a}).finally(o);if(n){const e=Yh,t=Date.now();if(e&&e.data&&e.timestamp&&t-e.timestamp<3e4)return this._debugCounters.cacheHits++,o(),Promise.resolve(e.data)}return this._loadUserData(r,{preventRecursion:i,routeKey:a}).finally(o)}catch(l){return o(),Promise.reject(l)}},async _loadUserData(e,t={}){const{preventRecursion:n=!1,forceRefresh:r=!1,routeKey:s="/api/profile"}=t,a=s;Yh.isLoading=!0,n||this._notifySubscribers(Jh.LOADING);const i=new Promise((async(e,t)=>{try{const t={noCache:!0,retries:2,timeout:12e3},r=await jh.get(a,t);let s=null;if(s=r?.data?r.data:r?.user?r.user:r,Array.isArray(s)&&(s=s[0]),!s||"object"!=typeof s)throw new Error("Invalid user data format");Yh.data=s,Yh.timestamp=Date.now(),Yh.isLoading=!1,Yh.consecutiveErrors=0,n||(this._notifySubscribers(Jh.LOADED,s),this._notifySubscribers(Jh.UPDATED,s)),e(s)}catch(r){if(Yh.isLoading=!1,Yh.consecutiveErrors++,Yh.consecutiveErrors>=Yh.errorThreshold&&(Yh.lastCircuitBreak=Date.now()),this._notifySubscribers(Jh.ERROR,r),Yh.data)e(Yh.data);else{try{const e=localStorage.getItem("user");if(e)return JSON.parse(e)}catch(s){}t(r)}}finally{setTimeout((()=>{Yh.pendingRequests.delete(a)}),0)}}));return Yh.pendingRequests.set(a,i),i},isLoading:()=>Yh.isLoading,invalidateCache(e=null,t={}){try{this.stats&&(this.stats.invalidationCount=(this.stats.invalidationCount||0)+1,this.stats.lastUpdate=Date.now()),"function"==typeof Yh.invalidate?Yh.invalidate():(Yh.data=null,Yh.timestamp=0);const s=Xh();if(s)try{if(s.invalidateQueries({queryKey:["user","current"]}),e)switch(e){case"profile_picture":s.invalidateQueries({queryKey:["profilePicture"]});break;case"address":s.invalidateQueries({queryKey:["userAddress"]})}}catch(n){}try{this._notifySubscribers(Jh.INVALIDATED,e),this._notifySubscribers(Jh.UPDATING,e)}catch(r){}if(t&&t.skipRefresh){try{this._notifySubscribers(Jh.UPDATED,e,null,{isPartialUpdate:!0})}catch(r){}return Promise.resolve(null)}return this._loadUserData("invalidateCache").then((t=>{try{this._notifySubscribers(Jh.UPDATED,e,t)}catch(r){}return t})).catch((e=>{try{this._notifySubscribers(Jh.ERROR,e)}catch(r){}throw e}))}catch(s){return Promise.resolve(null)}},_notifySubscribers(e,...t){if(!this.subscribers)return void(this.subscribers={});this._recentNotifications||(this._recentNotifications={});const n=Date.now(),r=t[0]?JSON.stringify(t[0]).substring(0,50):"no-data",s=`${e}_${r}`;this._recentNotifications[s]&&n-this._recentNotifications[s]<500||(this._recentNotifications[s]=n,Object.keys(this._recentNotifications).forEach((e=>{n-this._recentNotifications[e]>5e3&&delete this._recentNotifications[e]})),setTimeout((()=>{if(this.subscribers[e]){[...this.subscribers[e]].forEach((e=>{try{e(...t)}catch(n){}}))}}),0))},subscribe(e,t){return Object.values(Jh).includes(e)?(this.subscribers||(this.subscribers={}),this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push(t),()=>{const n=this.subscribers[e].indexOf(t);-1!==n&&this.subscribers[e].splice(n,1)}):()=>{}},getStats(){const e=Date.now();return{requestCount:Yh.requestCount,lastUpdated:Yh.timestamp?new Date(Yh.timestamp).toISOString():null,dataAge:Yh.timestamp?e-Yh.timestamp:null,consecutiveErrors:Yh.consecutiveErrors,pendingRequests:Array.from(Yh.pendingRequests.keys()),isCircuitBreakerActive:Yh.consecutiveErrors>=Yh.errorThreshold&&e-Yh.lastCircuitBreak<Yh.circuitBreakDuration,deduplicationMapSize:Yh.deduplicationMap.size,deduplicationEntries:Array.from(Yh.deduplicationMap.entries()).map((([t,n])=>({key:t,age:e-n.timestamp}))),cacheStatus:Yh.data?e-Yh.timestamp<Yh.freshnessDuration?"fresh":e-Yh.timestamp<Yh.maxAgeDuration?"stale":"expired":"empty",hasCachedData:!!Yh.data,isLoading:Yh.isLoading}},coordinateRequest(e,t,n){if(this.requestRegistry.registerRouteUser(e,t),e.includes("/api/me")){const t=Date.now(),r=this.getCachedUserData();if(r&&Yh.timestamp&&t-Yh.timestamp<3e4)return this._debugCounters.cacheHits++,Promise.resolve(r);const s=this.requestRegistry.getActiveRequest(e);if(s)return s;this._debugCounters.apiCalls++;const a=n().then((e=>{Yh.data=e,Yh.timestamp=Date.now();try{localStorage.setItem("user",JSON.stringify(e))}catch(t){}return e}));return this.requestRegistry.registerActiveRequest(e,a),a}if(e.includes("/profile")||e.includes("/user-roles")||e.includes("/user")){const t=this.requestRegistry.getActiveRequest(e);if(t)return t;const r=n();return this.requestRegistry.registerActiveRequest(e,r),r}if(this.requestRegistry.shouldThrottleRequest(e)){const t=this.requestRegistry.getActiveRequest(e);return t||Promise.resolve(null)}return this.requestRegistry.coordinateRequest(e,n)}};function tf(){const e=window.navigator.userAgent,t={Android:{type:"mobile",name:"Android Device"},"iPhone|iPad|iPod":{type:"mobile",name:"iOS Device"},Windows:{type:"desktop",name:"Windows Device"},Macintosh:{type:"desktop",name:"Mac Device"},Linux:{type:"desktop",name:"Linux Device"}};for(const[n,r]of Object.entries(t))if(new RegExp(n,"i").test(e))return r;return{type:"web",name:"Browser"}}function nf(e){try{return JSON.parse(atob(e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/")))}catch{return null}}let rf=localStorage.getItem("session_id")||Date.now().toString(36)+Math.random().toString(36).substring(2);const sf=()=>rf,af={lastCallTime:0,minInterval:2e3,callStack:[],stackLimit:3},of={async register(e){try{const t=await jh.post("/register",e);return t?.token&&localStorage.setItem("token",t.token),{status:t.status||201,data:t}}catch(t){throw t}},async login(e,t){try{sessionStorage.setItem("login_in_progress","true");const n=localStorage.getItem("device_id")||(()=>{const e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));return localStorage.setItem("device_id",e),e})(),{deviceName:r,deviceType:s}=tf();localStorage.clear(),rf=Date.now().toString(36)+Math.random().toString(36).substring(2),localStorage.setItem("session_id",rf);const a=await jh.post("/login_check",{username:e,password:t,device_id:n,device_name:r,device_type:s});if(a.token){localStorage.setItem("token",a.token);const e=nf(a.token);if(e?.roles){const t={username:e.username,roles:e.roles,id:e.id,email:e.username,firstName:e.firstName,lastName:e.lastName,_extractedAt:Date.now(),_minimal:!0};localStorage.setItem("user",JSON.stringify(t)),localStorage.setItem("userRoles",JSON.stringify(e.roles)),document.dispatchEvent(new CustomEvent("auth:minimal-data-ready",{detail:{user:t}}))}}return a.refresh_token&&localStorage.setItem("refresh_token",a.refresh_token),await this.getCurrentUser(!0,{requestSource:"login"}),window.dispatchEvent(new Event("login-success")),window.dispatchEvent(new Event("auth-state-change")),this.lazyLoadUserData(!0).catch((()=>{})),sessionStorage.removeItem("login_in_progress"),a.data}catch(n){throw sessionStorage.removeItem("login_in_progress"),n}},async lazyLoadUserData(e=!1){const t=this.getUser();if(!t)return null;try{const e=await this._loadProfileData();let n=t;if(e){n=e,localStorage.setItem("user",JSON.stringify(n))}return sessionStorage.removeItem("login_in_progress"),document.dispatchEvent(new CustomEvent("user:data-updated",{detail:{user:n}})),window.dispatchEvent(new Event("user-data-loaded")),n}catch(n){return sessionStorage.removeItem("login_in_progress"),window.dispatchEvent(new Event("user-data-loaded")),t}},async _loadProfileData(){if(!this.isLoggedIn())return null;try{const e=await jh.get("/api/me",{noCache:!0,timeout:1e4,retries:1}),t=e.user||e.data?.user||e.success?e.user:e;return t?(localStorage.setItem("user",JSON.stringify(t)),t):null}catch(e){return null}},async refreshToken(){try{const e=localStorage.getItem("refresh_token");if(!e)throw new Error("No refresh token available");const{deviceName:t,deviceType:n}=tf(),r=await jh.post("/token/refresh",{refresh_token:e,device_id:localStorage.getItem("device_id"),device_name:t,device_type:n});return r.token&&localStorage.setItem("token",r.token),r.refresh_token&&localStorage.setItem("refresh_token",r.refresh_token),r}catch(e){throw 401!==e.response?.status&&403!==e.response?.status||this.logout(),e}},async logout(e="/login"){try{window.__isLoggingOut=!0,window.__isNavigating=!0,localStorage.clear(),sessionStorage.clear();try{const e=localStorage.getItem("refresh_token");e&&await jh.post("/token/revoke",{refresh_token:e,device_id:localStorage.getItem("device_id")}).catch((()=>{}))}catch(t){}try{jh.clearCache()}catch(t){}return rf=Date.now().toString(36)+Math.random().toString(36).substring(2),window.dispatchEvent(new CustomEvent("logout-success",{detail:{redirectTo:e}})),window.dispatchEvent(new Event("auth-state-change")),setTimeout((()=>window.location.replace(e||"/login")),10),!0}catch(t){return localStorage.clear(),sessionStorage.clear(),window.location.replace("/login"),!1}},async logoutAllDevices(){try{await jh.post("/token/revoke-all"),localStorage.removeItem("token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),userDataPromise=null,console.warn("Impossible de vider le cache: queryClient non dfini")}catch(e){throw console.error("Erreur lors de la dconnexion de tous les appareils:",e),console.error("Dtails:",e.response?.data||e.message),e}},async getDevices(){try{return await jh.get("/token/devices")}catch(e){throw console.error("Erreur lors de la rcupration des appareils:",e),console.error("Dtails:",e.response?.data||e.message),e}},getToken:()=>localStorage.getItem("token"),getUser(){const e=localStorage.getItem("user");return e?JSON.parse(e):null},isLoggedIn(){const e=this.getToken();if(!e)return!1;try{const t=nf(e);return t&&t.exp>Date.now()/1e3}catch(t){return!1}},isAuthenticated(){return this.isLoggedIn()},hasRole(e){const t=this.getUser();if(!t)return!1;const n=Array.isArray(t.roles)?t.roles:"object"==typeof t.roles?Object.values(t.roles):t.role?Array.isArray(t.role)?t.role:[t.role]:[],r=e.toUpperCase().startsWith("ROLE_")?e.toUpperCase():`ROLE_${e.toUpperCase()}`;return n.some((e=>{if("string"==typeof e){return(e.toUpperCase().startsWith("ROLE_")?e.toUpperCase():`ROLE_${e.toUpperCase()}`)===r}if("object"==typeof e&&null!==e){const t=e.name||e.role||e.roleName||"";return(t.toUpperCase().startsWith("ROLE_")?t.toUpperCase():`ROLE_${t.toUpperCase()}`)===r}return!1}))},async getCurrentUser(e=!1,t={}){const{requestSource:n="unknown"}=t;if(!this.getToken())throw new Error("Aucun token d'authentification trouv");const r=`auth_service_${n}_${Date.now()}`;if(af.callStack.push(r),af.callStack.length>af.stackLimit){console.warn("Detected recursive calls to getCurrentUser. Call stack:",af.callStack),af.callStack=[];const e=ef.getCachedUserData();if(e)return e}const s=Date.now();if(!e&&s-af.lastCallTime<af.minInterval){const e=ef.getCachedUserData();if(e)return af.callStack=af.callStack.filter((e=>e!==r)),e}af.lastCallTime=s;try{const n=await ef.getUserData({forceRefresh:e,routeKey:"/api/me",requestId:r,preventRecursion:t?.preventRecursion||!1});return n.roles?.length>0&&(localStorage.setItem("last_role",n.roles[0]),localStorage.setItem("userRoles",JSON.stringify(n.roles))),n}catch(a){const e=ef.getCachedUserData();if(e)return e;throw a}finally{af.callStack=af.callStack.filter((e=>e!==r))}},async changePassword(e){try{return await jh.post("/api/change-password",e,jh.withAuth())}catch(t){throw t}},clearAuthData(e=!0,t="Vous avez t dconnect."){localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("refresh_token"),e&&zh.success(t,{duration:3e3,position:"top-center"}),window.location.href="/login"},triggerRoleUpdate:()=>{window.dispatchEvent(new Event("role-change")),triggerRoleUpdate()},async ensureUserDataInLocalStorage(){try{if(!localStorage.getItem("token"))return!1;const t=window.location.pathname.includes("/student/attendance");let n=null;try{n=await of.getCurrentUser(!0)}catch(e){}if(n){localStorage.setItem("user",JSON.stringify(n));let e=n.roles;return t&&!e.includes("ROLE_STUDENT")&&e.push("ROLE_STUDENT"),localStorage.setItem("userRoles",JSON.stringify(e)),!0}if(!localStorage.getItem("user")){const e={id:"1",email:"student@example.com",firstName:"Test",lastName:"Student",roles:["ROLE_STUDENT"]};localStorage.setItem("user",JSON.stringify(e))}return localStorage.getItem("userRoles")&&!t||localStorage.setItem("userRoles",JSON.stringify(["ROLE_STUDENT"])),!0}catch(t){return!1}},async fixProfileDataIssues(){try{if(!localStorage.getItem("token"))return{success:!1,message:"Not authenticated"};try{const e="/api/profile",t=await jh.get(e,{noCache:!0,retries:2,timeout:1e4});if(t)return localStorage.setItem("user",JSON.stringify(t)),{success:!0,message:"Profile data fixed successfully"}}catch(e){}try{const e=localStorage.getItem("token");if(e){const t=nf(e);if(t){const e={id:t.id||"1",email:t.username||"user@example.com",roles:t.roles||["ROLE_USER"],_fixedAt:Date.now()};return localStorage.setItem("user",JSON.stringify(e)),{success:!0,message:"Created minimal profile data"}}}}catch(t){}return{success:!1,message:"Could not fix profile data"}}catch(n){return{success:!1,message:n.message}}},getMinimalUserData(){try{const e=localStorage.getItem("user");if(!e)return null;const t=JSON.parse(e);return t&&(t.firstName||t.lastName)?{...t,_source:"localStorage",_retrievedAt:Date.now()}:null}catch(e){return null}},async changePassword(e){try{return await jh.post("/api/change-password",e,jh.withAuth())}catch(t){throw t}},clearAuthData(e=!0,t="Vous avez t dconnect."){localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("refresh_token"),e&&zh.success(t,{duration:3e3,position:"top-center"}),window.location.href="/login"},triggerRoleUpdate:()=>{window.dispatchEvent(new Event("role-change")),triggerRoleUpdate()},ensureUserDataInLocalStorage:async()=>{try{if(!localStorage.getItem("token"))return console.warn("Cannot ensure user data - no token found"),!1;const n=window.location.pathname.includes("/student/attendance");let r=null;try{r=await of.getCurrentUser(!0)}catch(e){console.warn("Failed to get user data from /me endpoint, trying backup methods")}if(r){if(localStorage.setItem("user",JSON.stringify(r)),r.roles&&Array.isArray(r.roles)){let e=r.roles;n&&!e.includes("ROLE_STUDENT")&&e.push("ROLE_STUDENT"),localStorage.setItem("userRoles",JSON.stringify(e))}else localStorage.setItem("userRoles",JSON.stringify(["ROLE_STUDENT"]));return!0}try{const e=localStorage.getItem("token");if(e){const t=nf(e);if(t){const e={id:t.id||"1",email:t.username||"user@example.com",roles:t.roles||["ROLE_USER"],_fixedAt:Date.now()};return localStorage.setItem("user",JSON.stringify(e)),!0}}}catch(t){console.error("Error creating fallback user data:",t)}return localStorage.getItem("userRoles")&&!n||localStorage.setItem("userRoles",JSON.stringify(["ROLE_STUDENT"])),!0}catch(n){return console.error("Error ensuring user data:",n),!1}},getMinimalUserData(){try{const e=localStorage.getItem("user");if(!e)return null;const t=JSON.parse(e);return t&&(t.firstName||t.lastName)?{...t,_source:"localStorage",_retrievedAt:Date.now()}:null}catch(e){return console.error("Erreur lors de la rcupration des donnes minimales:",e),null}},async fixProfileDataIssues(){try{if(!localStorage.getItem("token"))return{success:!1,message:"Not authenticated"};try{const e="/api/profile",t=await jh.get(e,{noCache:!0,retries:2,timeout:1e4});if(t)return localStorage.setItem("user",JSON.stringify(t)),{success:!0,message:"Profile data fixed successfully"}}catch(e){}try{const e=localStorage.getItem("token");if(e){const t=nf(e);if(t){const e={id:t.id||"1",email:t.username||"user@example.com",roles:t.roles||["ROLE_USER"],_fixedAt:Date.now()};return localStorage.setItem("user",JSON.stringify(e)),{success:!0,message:"Created minimal profile data"}}}}catch(t){}return{success:!1,message:"Could not fix profile data"}}catch(n){return{success:!1,message:n.message}}}},lf=new Map,cf={deduplicatedRequests:0,totalRequests:0,savedRequests:0},uf=1e4,df=async(e,t,n,r={})=>{const s=((e,t,n={})=>{const r=Array.isArray(t)?t:[t],s=sf(),a=(e.includes("/profile")||e.includes("/me")||e.includes("/user"))&&n?JSON.stringify(n):"";return`${s}:${e}:${r.join(":")}${a?`:${a}`:""}`})(e,t,r.params);if(cf.totalRequests++,lf.has(s))return cf.deduplicatedRequests++,lf.get(s);const a=new Promise((async(e,r)=>{try{const r=await n(),s=Xh(),a=sf(),i=Array.isArray(t)?["session",a,...t]:["session",a,t];s.setQueryData(i,r),e(r)}catch(a){r(a)}finally{setTimeout((()=>{lf.delete(s)}),500)}}));return lf.set(s,a),setTimeout((()=>{lf.has(s)&&lf.delete(s)}),uf),a},hf=async(e,t="get",n={},r={})=>{const s=`${t}:${e}:${JSON.stringify(n)}`;if(lf.has(s))return cf.savedRequests++,lf.get(s);const a=new Promise((async(a,i)=>{try{let s;switch(t.toLowerCase()){case"get":s=await jh.get(e,{...r,params:n});break;case"post":s=await jh.post(e,n,r);break;case"put":s=await jh.put(e,n,r);break;case"delete":s=await jh.delete(e,{...r,data:n});break;default:throw new Error(`Unsupported method: ${t}`)}a(s)}catch(o){i(o)}finally{setTimeout((()=>{lf.delete(s)}),300)}}));return lf.set(s,a),setTimeout((()=>{lf.delete(s)}),uf),a},ff=e=>{for(const[t,n]of lf.entries())t.includes(e)&&lf.delete(t)},mf="/api/profile/picture",pf="/api/documents",gf="/api/documents/type",yf="/api/documents/upload",vf=e=>["session",sf(),...Array.isArray(e)?e:[e]];function bf(e,t,n={}){const r=vf(t),s=e===mf,a=e.startsWith(pf)||e.startsWith(gf);return(s||a)&&(n.staleTime=0,n.refetchOnMount=!0,n.refetchOnWindowFocus=!0,s&&(n.retry=1,n.retryDelay=500,n.refetchInterval=!1,n.refetchOnReconnect=!1)),fe({queryKey:r,queryFn:async()=>{try{const r=s||a?{_t:Date.now()}:{},i=s?5e3:a?8e3:15e3;return await df(e,t,(async()=>await jh.get(e,{params:{...r,...n.params},timeout:i,retries:s?1:2,noCache:n.noCache,staleTime:n.staleTime},!0,n.staleTime||3e5)),n)}catch(r){if(s&&"ECONNABORTED"===r.code)return console.warn("Profile picture request timed out, using default avatar"),{url:"/assets/default-avatar.svg"};throw r}},...n})}function xf(e,t="post",n,r={}){const s=de();let a=null;n&&(a=vf(n));const i="string"==typeof e&&e===mf,o="string"==typeof e&&e.includes("/documents/upload")||"string"==typeof e&&e.startsWith(yf),l="function"==typeof e&&e().includes("/documents/")||"string"==typeof e&&e.includes("/documents/")&&"delete"===t.toLowerCase();return he({mutationFn:async n=>{try{let s=e;if("function"==typeof e&&(s=e(n)),"delete"===t.toLowerCase()&&"object"!=typeof n&&s===e&&(s=`${s}/${n}`),i||o||l){const e=Date.now();"delete"!==t.toLowerCase()&&"get"!==t.toLowerCase()||(s=`${s}${s.includes("?")?"&":"?"}_t=${e}`)}return await hf(s,t.toLowerCase(),n,{timeout:r.timeout||(o?3e4:15e3),retries:r.retries||2,noCache:r.noCache||!0})}catch(s){throw console.error(`Erreur lors de la requte ${t.toUpperCase()} vers ${e}:`,s),s}},onSuccess:(t,n,c)=>{if("string"==typeof e&&ff(e),a)if(i){jh.invalidateProfileCache(),s.invalidateQueries({queryKey:a,refetchType:"all"});const e=sf();s.invalidateQueries({predicate:t=>{const n=t.queryKey;return Array.isArray(n)&&"session"===n[0]&&n[1]===e&&(n.includes("profile")||n.includes("profilePicture")||n.includes("currentProfile"))},refetchType:"all"})}else if(o||l){jh.invalidateDocumentCache(),s.invalidateQueries({queryKey:a,refetchType:"all"});const e=sf();s.invalidateQueries({predicate:t=>{const n=t.queryKey;return Array.isArray(n)&&"session"===n[0]&&n[1]===e&&(n.includes("document")||n.includes("userCVDocument")||n.includes("documents"))},refetchType:"all"})}else s.invalidateQueries({queryKey:a,refetchType:"all"});r.onSuccess&&r.onSuccess(t,n,c)},onError:(t,n,s)=>{"string"==typeof e&&ff(e),r.onError&&r.onError(t,n,s)},...r})}const wf="cached_profile_picture",Ef="cached_profile_picture_timestamp",kf=864e5,Sf={listeners:new Set,subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)},notify(){this.listeners.forEach((e=>e()))}},Nf={profilePicture:["profilePicture"]},Tf={saveToCache:e=>{if(e)try{localStorage.setItem(wf,e),localStorage.setItem(Ef,Date.now().toString())}catch(t){}},getFromCache:()=>{try{const e=localStorage.getItem(wf),t=localStorage.getItem(Ef);if(!e||!t)return null;return Date.now()-Number(t)>kf?(Tf.clearCache(),null):e}catch(e){return null}},clearCache:()=>{try{localStorage.removeItem(wf),localStorage.removeItem(Ef)}catch(e){}},isCacheValid:()=>{try{const e=localStorage.getItem(Ef);return!!e&&Date.now()-Number(e)<=kf}catch(e){return!1}}};function Cf(e){if(!e)return null;if(!1===e.success)return null;if(!e.data)return null;const{has_profile_picture:t,profile_picture_url:n}=e.data,r=t?n:null;return r&&Tf.saveToCache(r),r}function jf(){const e=Y.useRef(!0),t=de(),[n]=Y.useState((()=>`profile_picture_${Date.now()}_${Math.random().toString(36).substr(2,9)}`)),[r,s]=Y.useState((()=>Tf.getFromCache()));Y.useEffect((()=>{e.current=!0,ef.requestRegistry.registerRouteUser("/api/profile/picture",n);const t=Tf.getFromCache();return t&&s(t),()=>{e.current=!1,ef.requestRegistry.unregisterRouteUser("/api/profile/picture",n)}}),[n]);const a=Y.useCallback((async()=>{try{return await ef.coordinateRequest("/api/profile/picture",n,(async()=>{const e=await jh.get("/api/profile/picture",{params:{_t:Date.now()},timeout:5e3,retries:1});if(e){if("string"==typeof e)return{success:!0,data:{has_profile_picture:!0,profile_picture_url:e}};if(e.url||e.profile_picture_url){return{success:!0,data:{has_profile_picture:!0,profile_picture_url:e.url||e.profile_picture_url}}}if(e.data&&(e.data.profile_picture_url||e.data.url)){const t={...e.data};return(t.profile_picture_url||t.url)&&(t.has_profile_picture=!0,t.profile_picture_url=t.profile_picture_url||t.url),{success:!0,data:t}}if("object"==typeof e&&null!==e){if(!0===e.success&&e.data)return e;const t=e=>{for(const n in e){if("string"==typeof e[n]&&(n.includes("url")||n.includes("picture"))&&(e[n].startsWith("http")||e[n].startsWith("/")))return e[n];if("object"==typeof e[n]&&null!==e[n]){const r=t(e[n]);if(r)return r}}return null},n=t(e);if(n)return{success:!0,data:{has_profile_picture:!0,profile_picture_url:n}}}}return e&&"object"==typeof e?e:{success:!1,data:{has_profile_picture:!1}}}))}catch(e){return{success:!1,data:{has_profile_picture:!1},error:e.message}}}),[n]),i=fe({queryKey:Nf.profilePicture,queryFn:a,staleTime:3e5,cacheTime:6e5,retry:1,refetchOnWindowFocus:!1,refetchOnMount:!Tf.isCacheValid(),refetchInterval:null,onSuccess:e=>{const n=Cf(e);if(n){t.setQueryData(Nf.profilePicture,e),Tf.saveToCache(n);try{ef.requestRegistry.isRouteShared("/api/profile/picture")||ef.invalidateCache("profile_picture")}catch(r){}}},onError:e=>{},placeholderData:r?{success:!0,data:{has_profile_picture:!0,profile_picture_url:r}}:void 0}),o=Y.useRef(0),l=Y.useRef(!1),c=Y.useCallback(((e=!0)=>{const t=Date.now();return l.current||t-o.current<3e3||ef.requestRegistry.isRouteProcessing("/api/profile/picture")?Promise.resolve():(o.current=t,l.current=!0,i.refetch().then((e=>{const t=e.data?.data;return t?.profile_picture_url&&(s(t.profile_picture_url),Tf.saveToCache(t.profile_picture_url)),e})).catch((e=>{throw e})).finally((()=>{setTimeout((()=>{l.current=!1}),1e3)})))}),[i,s]),u=xf("/api/profile/picture","post",Nf.profilePicture,{onMutate:async e=>{await t.cancelQueries({queryKey:Nf.profilePicture});return{previousData:t.getQueryData(Nf.profilePicture)}},onSuccess:async(e,n,r)=>{const a=e?.data?.profile_picture_url;if(a){t.setQueryData(Nf.profilePicture,{success:!0,data:{has_profile_picture:!0,profile_picture_url:a,is_temp_url:!1}}),s(a),Tf.saveToCache(a);try{const e=ef.getCachedUserData();if(e){e.profilePictureUrl=a;try{localStorage.setItem("user",JSON.stringify(e))}catch(i){}}}catch(i){}}try{ef.invalidateCache("profile_picture",{skipRefresh:!0})}catch(i){}Sf.notify(),c()},onError:(e,n,r)=>{if(r?.previousData){t.setQueryData(Nf.profilePicture,r.previousData);const e=Cf(r.previousData);e&&(s(e),Tf.saveToCache(e))}}}),d=xf("/api/profile/picture","delete",Nf.profilePicture,{onMutate:async()=>{await t.cancelQueries({queryKey:Nf.profilePicture});const e=t.getQueryData(Nf.profilePicture);return t.setQueryData(Nf.profilePicture,{success:!0,data:{has_profile_picture:!1,profile_picture_url:null}}),s(null),Tf.clearCache(),{previousData:e}},onSuccess:async()=>{ef.invalidateCache("profile_picture"),Sf.notify(),Tf.clearCache(),zh.success("Photo de profil supprime avec succs"),c()},onError:(e,n,r)=>{if(r?.previousData){t.setQueryData(Nf.profilePicture,r.previousData);const e=Cf(r.previousData);e&&(s(e),Tf.saveToCache(e))}}});Y.useEffect((()=>()=>{}),[]);return{profilePictureUrl:Cf(i.data)||r,isLoading:i.isLoading&&!r,isFetching:i.isFetching,isError:i.isError,error:i.error,refetch:c,uploadProfilePicture:u.mutate,deleteProfilePicture:d.mutate,uploadStatus:{isPending:u.isPending,isSuccess:u.isSuccess,isError:u.isError,error:u.error},deleteStatus:{isPending:d.isPending,isSuccess:d.isSuccess,isError:d.isError,error:d.error}}}const Rf={userData:null,userDataTimestamp:0,consolidatedData:null,consolidatedDataTimestamp:0,cacheDuration:12e4},Af=`profile_service_${Date.now()}`;const _f=new class{constructor(){ef.requestRegistry.registerRouteUser("/profile/picture",Af),ef.requestRegistry.registerRouteUser("/api/profile",Af)}async getUserProfile(){try{const e=Date.now();if(Rf.userData&&e-Rf.userDataTimestamp<Rf.cacheDuration)return Rf.userData;const t=await ef.coordinateRequest("/profile/user-data",Af,(()=>jh.get("/profile/user-data")));return Rf.userData=t.data,Rf.userDataTimestamp=e,t.data}catch(e){throw e}}async updateProfile(e,t){try{if(void 0!==e.portfolioUrl){const n=await jh.put("/student/profile/portfolio-url",{portfolioUrl:e.portfolioUrl});return this.invalidateCache("profile_data"),t&&t(),n.data}const n=await jh.put("/profile",e);return this.invalidateCache("profile_data"),t&&t(),n.data}catch(n){throw n}}async getDiplomas(){try{return(await jh.get("/profile/diplomas")).data}catch(e){throw e}}async getAddresses(){try{return(await jh.get("/profile/addresses")).data}catch(e){throw e}}async getStats(e={}){const{preventRecursion:t=!0,forceRefresh:n=!1}=e;try{let e="/api/profile/stats";n&&(e=`${e}?_t=${Date.now()}`);return{stats:(await jh.get(e,{...jh.withAuth(),preventRecursion:t,forceRefresh:n,headers:n?{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}:void 0})).stats||{profile:{completionPercentage:0}}}}catch(r){return{stats:{profile:{completionPercentage:0}}}}}async acknowledgeProfileCompletion(){try{const e=await jh.post("/api/profile/acknowledge-completion",{},{...jh.withAuth(),headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});return await this.getStats({forceRefresh:!0}),this.invalidateCache("profile_data"),jh.invalidateCache("/api/profile/stats"),e}catch(e){return console.error("Error fetching profile stats:",e),{stats:{profile:{completionPercentage:0}}}}}async acknowledgeProfileCompletion(){try{const e=await jh.post("/api/profile/acknowledge-completion",{},{...jh.withAuth(),headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});return await this.getStats({forceRefresh:!0}),this.invalidateCache("profile_data"),jh.invalidateCache("/api/profile/stats"),e}catch(e){throw console.error("Error acknowledging profile completion:",e),e}}async getAllProfileData(e={}){const t="/api/profile";try{if(ef.requestRegistry.getActiveRequest(t)&&!e.forceRefresh){const e=ef.requestRegistry.getActiveRequest(t);if(e)return e}const r=Date.now();if(!e.forceRefresh&&Rf.consolidatedData&&r-Rf.consolidatedDataTimestamp<Rf.cacheDuration)return Rf.consolidatedData;const s=e.forceRefresh?`${t}?_t=${Date.now()}`:t,a=await ef.coordinateRequest(s,Af,(()=>ef.getUserData({routeKey:s,forceRefresh:e.forceRefresh,useCache:!e.forceRefresh,fetchOptions:e.forceRefresh?{headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}}:void 0})));let i;if(a)if(a.user&&"object"==typeof a.user)i=a;else if(a.id||a.email)i={...a,firstName:a.firstName||a.first_name||"",lastName:a.lastName||a.last_name||"",email:a.email||"",profilePictureUrl:a.profilePictureUrl||a.profile_picture_url||"",linkedinUrl:a.linkedinUrl||"",hasCvDocument:a.hasCvDocument||!1,diplomas:Array.isArray(a.diplomas)?a.diplomas:[],addresses:Array.isArray(a.addresses)?a.addresses:[],stats:a.stats||{profile:{completionPercentage:0}}};else if(a.data&&"object"==typeof a.data||a.success){const e=a.data||{};i={...e,firstName:e.firstName||e.first_name||"",lastName:e.lastName||e.last_name||"",email:e.email||"",profilePictureUrl:e.profilePictureUrl||e.profile_picture_url||"",linkedinUrl:e.linkedinUrl||"",diplomas:Array.isArray(e.diplomas)?e.diplomas:[],addresses:Array.isArray(e.addresses)?e.addresses:[],stats:e.stats||{profile:{completionPercentage:0}}}}else i=a;else i={firstName:"",lastName:"",email:"",profilePictureUrl:"",diplomas:[],addresses:[],stats:{profile:{completionPercentage:0}}};Rf.consolidatedData=i,Rf.consolidatedDataTimestamp=r;try{localStorage.setItem("user",JSON.stringify(i))}catch(n){}return i}catch(r){if(Rf.consolidatedData)return Rf.consolidatedData;try{const e=ef.getCachedUserData();if(e)return e;const t=localStorage.getItem("user");if(t)try{return JSON.parse(t)}catch(n){}}catch(n){}throw r}}async getPublicProfile(e){if(!e)throw new Error("User ID is required to fetch public profile");try{return(await jh.get(`/profile/public/${e}`)).data}catch(t){throw t}}async getProfilePicture(){try{return await ef.coordinateRequest("/api/profile/picture",Af,(async()=>{const e=await jh.get("/profile/picture",{params:{_t:Date.now()},timeout:5e3});if(e){if("string"==typeof e)return{success:!0,data:{has_profile_picture:!0,profile_picture_url:e}};if(e.url||e.profile_picture_url){return{success:!0,data:{has_profile_picture:!0,profile_picture_url:e.url||e.profile_picture_url}}}if(e.data&&(e.data.profile_picture_url||e.data.url)){const t={...e.data};return(t.profile_picture_url||t.url)&&(t.has_profile_picture=!0,t.profile_picture_url=t.profile_picture_url||t.url),{success:!0,data:t}}if("object"==typeof e&&null!==e){if(!0===e.success&&e.data)return e;const t=e=>{for(const n in e){if("string"==typeof e[n]&&(n.includes("url")||n.includes("picture"))&&(e[n].startsWith("http")||e[n].startsWith("/")))return e[n];if("object"==typeof e[n]&&null!==e[n]){const r=t(e[n]);if(r)return r}}return null},n=t(e);if(n)return{success:!0,data:{has_profile_picture:!0,profile_picture_url:n}}}}return e&&"object"==typeof e?e:{success:!1,data:{has_profile_picture:!1}}}))}catch(e){return{success:!1,data:{has_profile_picture:!1},error:e.message}}}async uploadProfilePicture(e){try{const t=new FormData;t.append("profile_picture",e);const n=await jh.post("/profile/picture",t,{headers:{"Content-Type":"multipart/form-data"}});return this.invalidateCache("profile_picture"),Sf.notify(),n}catch(t){throw t}}async deleteProfilePicture(){try{const e=(new Date).getTime(),t=await jh.delete(`/profile/picture?t=${e}`);return this.invalidateCache("profile_picture"),Sf.notify(),t}catch(e){throw e}}async updateAddress(e){try{let t;return t=e.id?await jh.put(`/profile/addresses/${e.id}`,e):await jh.post("/profile/addresses",e),this.invalidateCache("address"),t.data}catch(t){throw t}}invalidateCache(e=null){if("profile_picture"===e&&ef.requestRegistry.isRouteShared("/api/profile/picture"))return Rf.userData=null,Rf.userDataTimestamp=0,Rf.consolidatedData=null,Rf.consolidatedDataTimestamp=0,void Sf.notify();Rf.userData=null,Rf.userDataTimestamp=0,Rf.consolidatedData=null,Rf.consolidatedDataTimestamp=0,ef.invalidateCache(e)}},Df=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,If=pe,Pf=(e,t)=>n=>{var r;if(null==(null==t?void 0:t.variants))return If(e,null==n?void 0:n.class,null==n?void 0:n.className);const{variants:s,defaultVariants:a}=t,i=Object.keys(s).map((e=>{const t=null==n?void 0:n[e],r=null==a?void 0:a[e];if(null===t)return null;const i=Df(t)||Df(r);return s[e][i]})),o=n&&Object.entries(n).reduce(((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e}),{}),l=null==t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce(((e,t)=>{let{class:n,className:r,...s}=t;return Object.entries(s).every((e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...a,...o}[t]):{...a,...o}[t]===n}))?[...e,n,r]:e}),[]);return If(e,i,l,null==n?void 0:n.class,null==n?void 0:n.className)},Mf=e=>{const t=Ff(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{const n=e.split("-");return""===n[0]&&1!==n.length&&n.shift(),Lf(n,t)||Uf(e)},getConflictingClassGroupIds:(e,t)=>{const s=n[e]||[];return t&&r[e]?[...s,...r[e]]:s}}},Lf=(e,t)=>{if(0===e.length)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?Lf(e.slice(1),r):void 0;if(s)return s;if(0===t.validators.length)return;const a=e.join("-");return t.validators.find((({validator:e})=>e(a)))?.classGroupId},Of=/^\[(.+)\]$/,Uf=e=>{if(Of.test(e)){const t=Of.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},Ff=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const s in n)zf(n[s],r,s,t);return r},zf=(e,t,n,r)=>{e.forEach((e=>{if("string"!=typeof e){if("function"==typeof e)return Bf(e)?void zf(e(r),t,n,r):void t.validators.push({validator:e,classGroupId:n});Object.entries(e).forEach((([e,s])=>{zf(s,Vf(t,e),n,r)}))}else{(""===e?t:Vf(t,e)).classGroupId=n}}))},Vf=(e,t)=>{let n=e;return t.split("-").forEach((e=>{n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)})),n},Bf=e=>e.isThemeGetter,qf=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(s,a)=>{n.set(s,a),t++,t>e&&(t=0,r=n,n=new Map)};return{get(e){let t=n.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(s(e,t),t):void 0},set(e,t){n.has(e)?n.set(e,t):s(e,t)}}},$f=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=e=>{const t=[];let n,r=0,s=0,a=0;for(let l=0;l<e.length;l++){let i=e[l];if(0===r&&0===s){if(":"===i){t.push(e.slice(a,l)),a=l+1;continue}if("/"===i){n=l;continue}}"["===i?r++:"]"===i?r--:"("===i?s++:")"===i&&s--}const i=0===t.length?e:e.substring(a),o=Hf(i);return{modifiers:t,hasImportantModifier:o!==i,baseClassName:o,maybePostfixModifierPosition:n&&n>a?n-a:void 0}};if(t){const e=t+":",n=r;r=t=>t.startsWith(e)?n(t.substring(e.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:t,maybePostfixModifierPosition:void 0}}if(n){const e=r;r=t=>n({className:t,parseClassName:e})}return r},Hf=e=>e.endsWith("!")?e.substring(0,e.length-1):e.startsWith("!")?e.substring(1):e,Wf=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map((e=>[e,!0])));return e=>{if(e.length<=1)return e;const n=[];let r=[];return e.forEach((e=>{"["===e[0]||t[e]?(n.push(...r.sort(),e),r=[]):r.push(e)})),n.push(...r.sort()),n}},Gf=/\s+/;function Kf(){let e,t,n=0,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=Qf(e))&&(r&&(r+=" "),r+=t);return r}const Qf=e=>{if("string"==typeof e)return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=Qf(e[r]))&&(n&&(n+=" "),n+=t);return n};function Xf(e,...t){let n,r,s,a=function(o){const l=t.reduce(((e,t)=>t(e)),e());return n=(e=>({cache:qf(e.cacheSize),parseClassName:$f(e),sortModifiers:Wf(e),...Mf(e)}))(l),r=n.cache.get,s=n.cache.set,a=i,i(o)};function i(e){const t=r(e);if(t)return t;const a=((e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:a}=t,i=[],o=e.trim().split(Gf);let l="";for(let c=o.length-1;c>=0;c-=1){const e=o[c],{isExternal:t,modifiers:u,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:f}=n(e);if(t){l=e+(l.length>0?" "+l:l);continue}let m=!!f,p=r(m?h.substring(0,f):h);if(!p){if(!m){l=e+(l.length>0?" "+l:l);continue}if(p=r(h),!p){l=e+(l.length>0?" "+l:l);continue}m=!1}const g=a(u).join(":"),y=d?g+"!":g,v=y+p;if(i.includes(v))continue;i.push(v);const b=s(p,m);for(let n=0;n<b.length;++n){const e=b[n];i.push(y+e)}l=e+(l.length>0?" "+l:l)}return l})(e,n);return s(e,a),a}return function(){return a(Kf.apply(null,arguments))}}const Yf=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},Jf=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Zf=/^\((?:(\w[\w-]*):)?(.+)\)$/i,em=/^\d+\/\d+$/,tm=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,nm=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,rm=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,sm=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,am=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,im=e=>em.test(e),om=e=>!!e&&!Number.isNaN(Number(e)),lm=e=>!!e&&Number.isInteger(Number(e)),cm=e=>e.endsWith("%")&&om(e.slice(0,-1)),um=e=>tm.test(e),dm=()=>!0,hm=e=>nm.test(e)&&!rm.test(e),fm=()=>!1,mm=e=>sm.test(e),pm=e=>am.test(e),gm=e=>!vm(e)&&!Sm(e),ym=e=>_m(e,Mm,fm),vm=e=>Jf.test(e),bm=e=>_m(e,Lm,hm),xm=e=>_m(e,Om,om),wm=e=>_m(e,Im,fm),Em=e=>_m(e,Pm,pm),km=e=>_m(e,Fm,mm),Sm=e=>Zf.test(e),Nm=e=>Dm(e,Lm),Tm=e=>Dm(e,Um),Cm=e=>Dm(e,Im),jm=e=>Dm(e,Mm),Rm=e=>Dm(e,Pm),Am=e=>Dm(e,Fm,!0),_m=(e,t,n)=>{const r=Jf.exec(e);return!!r&&(r[1]?t(r[1]):n(r[2]))},Dm=(e,t,n=!1)=>{const r=Zf.exec(e);return!!r&&(r[1]?t(r[1]):n)},Im=e=>"position"===e||"percentage"===e,Pm=e=>"image"===e||"url"===e,Mm=e=>"length"===e||"size"===e||"bg-size"===e,Lm=e=>"length"===e,Om=e=>"number"===e,Um=e=>"family-name"===e,Fm=e=>"shadow"===e,zm=Xf((()=>{const e=Yf("color"),t=Yf("font"),n=Yf("text"),r=Yf("font-weight"),s=Yf("tracking"),a=Yf("leading"),i=Yf("breakpoint"),o=Yf("container"),l=Yf("spacing"),c=Yf("radius"),u=Yf("shadow"),d=Yf("inset-shadow"),h=Yf("text-shadow"),f=Yf("drop-shadow"),m=Yf("blur"),p=Yf("perspective"),g=Yf("aspect"),y=Yf("ease"),v=Yf("animate"),b=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",Sm,vm],x=()=>[Sm,vm,l],w=()=>[im,"full","auto",...x()],E=()=>[lm,"none","subgrid",Sm,vm],k=()=>["auto",{span:["full",lm,Sm,vm]},lm,Sm,vm],S=()=>[lm,"auto",Sm,vm],N=()=>["auto","min","max","fr",Sm,vm],T=()=>["auto",...x()],C=()=>[im,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...x()],j=()=>[e,Sm,vm],R=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",Cm,wm,{position:[Sm,vm]}],A=()=>["auto","cover","contain",jm,ym,{size:[Sm,vm]}],_=()=>[cm,Nm,bm],D=()=>["","none","full",c,Sm,vm],I=()=>["",om,Nm,bm],P=()=>[om,cm,Cm,wm],M=()=>["","none",m,Sm,vm],L=()=>["none",om,Sm,vm],O=()=>["none",om,Sm,vm],U=()=>[om,Sm,vm],F=()=>[im,"full",...x()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[um],breakpoint:[um],color:[dm],container:[um],"drop-shadow":[um],ease:["in","out","in-out"],font:[gm],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[um],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[um],shadow:[um],spacing:["px",om],text:[um],"text-shadow":[um],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",im,vm,Sm,g]}],container:["container"],columns:[{columns:[om,vm,Sm,o]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:b()}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:w()}],"inset-x":[{"inset-x":w()}],"inset-y":[{"inset-y":w()}],start:[{start:w()}],end:[{end:w()}],top:[{top:w()}],right:[{right:w()}],bottom:[{bottom:w()}],left:[{left:w()}],visibility:["visible","invisible","collapse"],z:[{z:[lm,"auto",Sm,vm]}],basis:[{basis:[im,"full","auto",o,...x()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[om,im,"auto","initial","none",vm]}],grow:[{grow:["",om,Sm,vm]}],shrink:[{shrink:["",om,Sm,vm]}],order:[{order:[lm,"first","last","none",Sm,vm]}],"grid-cols":[{"grid-cols":E()}],"col-start-end":[{col:k()}],"col-start":[{"col-start":S()}],"col-end":[{"col-end":S()}],"grid-rows":[{"grid-rows":E()}],"row-start-end":[{row:k()}],"row-start":[{"row-start":S()}],"row-end":[{"row-end":S()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":N()}],"auto-rows":[{"auto-rows":N()}],gap:[{gap:x()}],"gap-x":[{"gap-x":x()}],"gap-y":[{"gap-y":x()}],"justify-content":[{justify:["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe","normal"]}],"justify-items":[{"justify-items":["start","end","center","stretch","center-safe","end-safe","normal"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"align-items":[{items:["start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"align-self":[{self:["auto","start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"place-items":[{"place-items":["start","end","center","stretch","center-safe","end-safe","baseline"]}],"place-self":[{"place-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],p:[{p:x()}],px:[{px:x()}],py:[{py:x()}],ps:[{ps:x()}],pe:[{pe:x()}],pt:[{pt:x()}],pr:[{pr:x()}],pb:[{pb:x()}],pl:[{pl:x()}],m:[{m:T()}],mx:[{mx:T()}],my:[{my:T()}],ms:[{ms:T()}],me:[{me:T()}],mt:[{mt:T()}],mr:[{mr:T()}],mb:[{mb:T()}],ml:[{ml:T()}],"space-x":[{"space-x":x()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":x()}],"space-y-reverse":["space-y-reverse"],size:[{size:C()}],w:[{w:[o,"screen",...C()]}],"min-w":[{"min-w":[o,"screen","none",...C()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[i]},...C()]}],h:[{h:["screen",...C()]}],"min-h":[{"min-h":["screen","none",...C()]}],"max-h":[{"max-h":["screen",...C()]}],"font-size":[{text:["base",n,Nm,bm]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Sm,xm]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",cm,vm]}],"font-family":[{font:[Tm,vm,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Sm,vm]}],"line-clamp":[{"line-clamp":[om,"none",Sm,xm]}],leading:[{leading:[a,...x()]}],"list-image":[{"list-image":["none",Sm,vm]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Sm,vm]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:j()}],"text-color":[{text:j()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","wavy"]}],"text-decoration-thickness":[{decoration:[om,"from-font","auto",Sm,bm]}],"text-decoration-color":[{decoration:j()}],"underline-offset":[{"underline-offset":[om,"auto",Sm,vm]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:x()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Sm,vm]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Sm,vm]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:R()}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:A()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},lm,Sm,vm],radial:["",Sm,vm],conic:[lm,Sm,vm]},Rm,Em]}],"bg-color":[{bg:j()}],"gradient-from-pos":[{from:_()}],"gradient-via-pos":[{via:_()}],"gradient-to-pos":[{to:_()}],"gradient-from":[{from:j()}],"gradient-via":[{via:j()}],"gradient-to":[{to:j()}],rounded:[{rounded:D()}],"rounded-s":[{"rounded-s":D()}],"rounded-e":[{"rounded-e":D()}],"rounded-t":[{"rounded-t":D()}],"rounded-r":[{"rounded-r":D()}],"rounded-b":[{"rounded-b":D()}],"rounded-l":[{"rounded-l":D()}],"rounded-ss":[{"rounded-ss":D()}],"rounded-se":[{"rounded-se":D()}],"rounded-ee":[{"rounded-ee":D()}],"rounded-es":[{"rounded-es":D()}],"rounded-tl":[{"rounded-tl":D()}],"rounded-tr":[{"rounded-tr":D()}],"rounded-br":[{"rounded-br":D()}],"rounded-bl":[{"rounded-bl":D()}],"border-w":[{border:I()}],"border-w-x":[{"border-x":I()}],"border-w-y":[{"border-y":I()}],"border-w-s":[{"border-s":I()}],"border-w-e":[{"border-e":I()}],"border-w-t":[{"border-t":I()}],"border-w-r":[{"border-r":I()}],"border-w-b":[{"border-b":I()}],"border-w-l":[{"border-l":I()}],"divide-x":[{"divide-x":I()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":I()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:["solid","dashed","dotted","double","hidden","none"]}],"divide-style":[{divide:["solid","dashed","dotted","double","hidden","none"]}],"border-color":[{border:j()}],"border-color-x":[{"border-x":j()}],"border-color-y":[{"border-y":j()}],"border-color-s":[{"border-s":j()}],"border-color-e":[{"border-e":j()}],"border-color-t":[{"border-t":j()}],"border-color-r":[{"border-r":j()}],"border-color-b":[{"border-b":j()}],"border-color-l":[{"border-l":j()}],"divide-color":[{divide:j()}],"outline-style":[{outline:["solid","dashed","dotted","double","none","hidden"]}],"outline-offset":[{"outline-offset":[om,Sm,vm]}],"outline-w":[{outline:["",om,Nm,bm]}],"outline-color":[{outline:j()}],shadow:[{shadow:["","none",u,Am,km]}],"shadow-color":[{shadow:j()}],"inset-shadow":[{"inset-shadow":["none",d,Am,km]}],"inset-shadow-color":[{"inset-shadow":j()}],"ring-w":[{ring:I()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:j()}],"ring-offset-w":[{"ring-offset":[om,bm]}],"ring-offset-color":[{"ring-offset":j()}],"inset-ring-w":[{"inset-ring":I()}],"inset-ring-color":[{"inset-ring":j()}],"text-shadow":[{"text-shadow":["none",h,Am,km]}],"text-shadow-color":[{"text-shadow":j()}],opacity:[{opacity:[om,Sm,vm]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[om]}],"mask-image-linear-from-pos":[{"mask-linear-from":P()}],"mask-image-linear-to-pos":[{"mask-linear-to":P()}],"mask-image-linear-from-color":[{"mask-linear-from":j()}],"mask-image-linear-to-color":[{"mask-linear-to":j()}],"mask-image-t-from-pos":[{"mask-t-from":P()}],"mask-image-t-to-pos":[{"mask-t-to":P()}],"mask-image-t-from-color":[{"mask-t-from":j()}],"mask-image-t-to-color":[{"mask-t-to":j()}],"mask-image-r-from-pos":[{"mask-r-from":P()}],"mask-image-r-to-pos":[{"mask-r-to":P()}],"mask-image-r-from-color":[{"mask-r-from":j()}],"mask-image-r-to-color":[{"mask-r-to":j()}],"mask-image-b-from-pos":[{"mask-b-from":P()}],"mask-image-b-to-pos":[{"mask-b-to":P()}],"mask-image-b-from-color":[{"mask-b-from":j()}],"mask-image-b-to-color":[{"mask-b-to":j()}],"mask-image-l-from-pos":[{"mask-l-from":P()}],"mask-image-l-to-pos":[{"mask-l-to":P()}],"mask-image-l-from-color":[{"mask-l-from":j()}],"mask-image-l-to-color":[{"mask-l-to":j()}],"mask-image-x-from-pos":[{"mask-x-from":P()}],"mask-image-x-to-pos":[{"mask-x-to":P()}],"mask-image-x-from-color":[{"mask-x-from":j()}],"mask-image-x-to-color":[{"mask-x-to":j()}],"mask-image-y-from-pos":[{"mask-y-from":P()}],"mask-image-y-to-pos":[{"mask-y-to":P()}],"mask-image-y-from-color":[{"mask-y-from":j()}],"mask-image-y-to-color":[{"mask-y-to":j()}],"mask-image-radial":[{"mask-radial":[Sm,vm]}],"mask-image-radial-from-pos":[{"mask-radial-from":P()}],"mask-image-radial-to-pos":[{"mask-radial-to":P()}],"mask-image-radial-from-color":[{"mask-radial-from":j()}],"mask-image-radial-to-color":[{"mask-radial-to":j()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]}],"mask-image-conic-pos":[{"mask-conic":[om]}],"mask-image-conic-from-pos":[{"mask-conic-from":P()}],"mask-image-conic-to-pos":[{"mask-conic-to":P()}],"mask-image-conic-from-color":[{"mask-conic-from":j()}],"mask-image-conic-to-color":[{"mask-conic-to":j()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:R()}],"mask-repeat":[{mask:["no-repeat",{repeat:["","x","y","space","round"]}]}],"mask-size":[{mask:A()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Sm,vm]}],filter:[{filter:["","none",Sm,vm]}],blur:[{blur:M()}],brightness:[{brightness:[om,Sm,vm]}],contrast:[{contrast:[om,Sm,vm]}],"drop-shadow":[{"drop-shadow":["","none",f,Am,km]}],"drop-shadow-color":[{"drop-shadow":j()}],grayscale:[{grayscale:["",om,Sm,vm]}],"hue-rotate":[{"hue-rotate":[om,Sm,vm]}],invert:[{invert:["",om,Sm,vm]}],saturate:[{saturate:[om,Sm,vm]}],sepia:[{sepia:["",om,Sm,vm]}],"backdrop-filter":[{"backdrop-filter":["","none",Sm,vm]}],"backdrop-blur":[{"backdrop-blur":M()}],"backdrop-brightness":[{"backdrop-brightness":[om,Sm,vm]}],"backdrop-contrast":[{"backdrop-contrast":[om,Sm,vm]}],"backdrop-grayscale":[{"backdrop-grayscale":["",om,Sm,vm]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[om,Sm,vm]}],"backdrop-invert":[{"backdrop-invert":["",om,Sm,vm]}],"backdrop-opacity":[{"backdrop-opacity":[om,Sm,vm]}],"backdrop-saturate":[{"backdrop-saturate":[om,Sm,vm]}],"backdrop-sepia":[{"backdrop-sepia":["",om,Sm,vm]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":x()}],"border-spacing-x":[{"border-spacing-x":x()}],"border-spacing-y":[{"border-spacing-y":x()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Sm,vm]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[om,"initial",Sm,vm]}],ease:[{ease:["linear","initial",y,Sm,vm]}],delay:[{delay:[om,Sm,vm]}],animate:[{animate:["none",v,Sm,vm]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[p,Sm,vm]}],"perspective-origin":[{"perspective-origin":b()}],rotate:[{rotate:L()}],"rotate-x":[{"rotate-x":L()}],"rotate-y":[{"rotate-y":L()}],"rotate-z":[{"rotate-z":L()}],scale:[{scale:O()}],"scale-x":[{"scale-x":O()}],"scale-y":[{"scale-y":O()}],"scale-z":[{"scale-z":O()}],"scale-3d":["scale-3d"],skew:[{skew:U()}],"skew-x":[{"skew-x":U()}],"skew-y":[{"skew-y":U()}],transform:[{transform:[Sm,vm,"","none","gpu","cpu"]}],"transform-origin":[{origin:b()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:F()}],"translate-x":[{"translate-x":F()}],"translate-y":[{"translate-y":F()}],"translate-z":[{"translate-z":F()}],"translate-none":["translate-none"],accent:[{accent:j()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:j()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Sm,vm]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":x()}],"scroll-mx":[{"scroll-mx":x()}],"scroll-my":[{"scroll-my":x()}],"scroll-ms":[{"scroll-ms":x()}],"scroll-me":[{"scroll-me":x()}],"scroll-mt":[{"scroll-mt":x()}],"scroll-mr":[{"scroll-mr":x()}],"scroll-mb":[{"scroll-mb":x()}],"scroll-ml":[{"scroll-ml":x()}],"scroll-p":[{"scroll-p":x()}],"scroll-px":[{"scroll-px":x()}],"scroll-py":[{"scroll-py":x()}],"scroll-ps":[{"scroll-ps":x()}],"scroll-pe":[{"scroll-pe":x()}],"scroll-pt":[{"scroll-pt":x()}],"scroll-pr":[{"scroll-pr":x()}],"scroll-pb":[{"scroll-pb":x()}],"scroll-pl":[{"scroll-pl":x()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Sm,vm]}],fill:[{fill:["none",...j()]}],"stroke-w":[{stroke:[om,Nm,bm,xm]}],stroke:[{stroke:["none",...j()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}}));function Vm(...e){return zm(pe(e))}const Bm=Pf("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 dark:hover:bg-primary/80",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 dark:bg-red-500 dark:text-white dark:font-medium dark:hover:bg-red-600 dark:hover:shadow-[0_0_8px_rgba(239,68,68,0.5)] dark:hover:text-white",outline:"border border-input hover:bg-accent hover:text-accent-foreground dark:border-gray-600 dark:hover:bg-gray-700 dark:text-gray-200",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 dark:bg-gray-700 dark:text-gray-100 dark:hover:bg-gray-600",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-gray-700 dark:text-gray-200",link:"underline-offset-4 hover:underline text-primary dark:text-[#78b9dd]"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),qm=Y.forwardRef((({className:n,variant:r,size:s,asChild:a=!1,...i},o)=>{const l=a?t:"button";return e.jsx(l,{className:Vm(Bm({variant:r,size:s,className:n})),ref:o,...i})}));qm.displayName="Button";const $m=Y.forwardRef((({modal:t=!0,...r},s)=>e.jsx(n,{modal:t,...r,ref:s})));$m.displayName=n.displayName;const Hm=f;Y.forwardRef((({className:t,inset:n,children:s,...a},i)=>e.jsxs(r,{ref:i,className:Vm("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-primary/10 focus:text-secondary data-[state=open]:bg-primary/10 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",t),...a,children:[s,e.jsx(Yl,{className:"ml-auto"})]}))).displayName=r.displayName;Y.forwardRef((({className:t,...n},r)=>e.jsx(s,{ref:r,className:Vm("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}))).displayName=s.displayName;const Wm=Y.forwardRef((({className:t,sideOffset:n=4,...r},s)=>e.jsx(a,{children:e.jsx(i,{ref:s,sideOffset:n,className:Vm("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","dark:bg-gray-800 dark:border-gray-700 dark:shadow-gray-900/40 dark:text-gray-100",t),position:"fixed",onOpenAutoFocus:e=>{e.preventDefault()},onCloseAutoFocus:e=>{e.preventDefault()},...r})})));Wm.displayName=i.displayName;const Gm=Y.forwardRef((({className:t,inset:n,...r},s)=>e.jsx(o,{ref:s,className:Vm("relative flex cursor-pointer select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-primary/10 focus:text-secondary hover:bg-primary/10 hover:text-secondary data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",n&&"pl-8",t),...r})));Gm.displayName=o.displayName;Y.forwardRef((({className:t,children:n,checked:r,...s},a)=>e.jsxs(l,{ref:a,className:Vm("relative flex cursor-pointer select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-primary/10 focus:text-secondary hover:bg-primary/10 hover:text-secondary data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...s,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(c,{children:e.jsx(Kl,{className:"h-4 w-4"})})}),n]}))).displayName=l.displayName;Y.forwardRef((({className:t,children:n,...r},s)=>e.jsxs(u,{ref:s,className:Vm("relative flex cursor-pointer select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-primary/10 focus:text-secondary hover:bg-primary/10 hover:text-secondary data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(c,{children:e.jsx(tc,{className:"h-2 w-2 fill-current"})})}),n]}))).displayName=u.displayName;Y.forwardRef((({className:t,inset:n,...r},s)=>e.jsx(d,{ref:s,className:Vm("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",t),...r}))).displayName=d.displayName;const Km=Y.forwardRef((({className:t,...n},r)=>e.jsx(h,{ref:r,className:Vm("-mx-1 my-1 h-px bg-muted",t),...n})));Km.displayName=h.displayName;const Qm=x,Xm=w,Ym=({className:t,...n})=>e.jsx(b,{className:Vm(t),...n});Ym.displayName=b.displayName;const Jm=Y.forwardRef((({className:t,...n},r)=>e.jsx(m,{ref:r,className:Vm("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 dark:bg-gray-950/90",t),...n})));Jm.displayName=m.displayName;const Zm=Y.forwardRef((({className:t,children:n,...r},s)=>e.jsxs(Ym,{children:[e.jsx(Jm,{}),e.jsxs(p,{ref:s,className:Vm("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg md:w-full dark:border-gray-700 dark:bg-gray-800 dark:text-white",t),...r,children:[n,e.jsxs(g,{className:"absolute top-4 right-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground dark:text-gray-300",children:[e.jsx(zc,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})));Zm.displayName=p.displayName;const ep=({className:t,...n})=>e.jsx("div",{className:Vm("flex flex-col space-y-1.5 text-left dark:text-white",t),...n});ep.displayName="DialogHeader";const tp=({className:t,...n})=>e.jsx("div",{className:Vm("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n});tp.displayName="DialogFooter";const np=Y.forwardRef((({className:t,...n},r)=>e.jsx(y,{ref:r,className:Vm("text-lg font-semibold leading-none tracking-tight dark:text-white",t),...n})));np.displayName=y.displayName;const rp=Y.forwardRef((({className:t,...n},r)=>e.jsx(v,{ref:r,className:Vm("text-sm text-muted-foreground dark:text-gray-300",t),...n})));rp.displayName=v.displayName;const sp=Y.createContext(null),ap={SUPERADMIN:"ROLE_SUPERADMIN",ADMIN:"ROLE_ADMIN",HR:"ROLE_HR",TEACHER:"ROLE_TEACHER",STUDENT:"ROLE_STUDENT",RECRUITER:"ROLE_RECRUITER",GUEST:"ROLE_GUEST"},ip=({children:t})=>{const[n,r]=Y.useState(null),[s,a]=Y.useState(null),i=de(),o=Y.useRef(!1),l=Y.useRef(0),c=Y.useRef(3e3),u=Y.useRef(null),d=Y.useRef(0),h=Y.useRef(3e3),f=Y.useCallback((async(e=!1)=>{if(!of.isLoggedIn())return r(null),a(null),i.setQueryData(["userRoles"],[]),null;try{const t=Date.now();if(o.current){const e=ef.getCachedUserData();if(e)return e}if(!e&&t-l.current<c.current){const e=ef.getCachedUserData();if(e)return e}o.current=!0,l.current=t;const n=await of.getCurrentUser(e,{requestSource:"roleContext"});r(n);const u=n?.roles?.[0];return u&&s&&u!==s&&(i.removeQueries(["admin-users"]),i.removeQueries(["admin-dashboard"]),i.removeQueries(["student-dashboard"]),i.removeQueries(["teacher-dashboard"]),i.removeQueries(["hr-dashboard"])),u&&a(u),o.current=!1,n}catch(t){return o.current=!1,r(null),a(null),i.setQueryData(["userRoles"],[]),null}}),[i,s]);Y.useEffect((()=>{const e=ef.getCachedUserData();if(e){r(e),e.roles&&e.roles.length>0&&a(e.roles[0]);const t=ef.getStats().lastUpdated?new Date(ef.getStats().lastUpdated).getTime():0;Date.now()-t>12e4&&f(!1).catch((()=>{}))}else f(!1).catch((()=>{}));const t=()=>{f(!0).then((()=>{i.invalidateQueries(["userRoles"])}))},n=()=>{r(null),a(null),i.setQueryData(["userRoles"],[]),i.removeQueries(["userRoles"])},s=()=>{o.current||f(!0).then((()=>{i.invalidateQueries(["userRoles"])}))};return window.addEventListener("login-success",t),window.addEventListener("logout-success",n),window.addEventListener("role-change",s),window.addEventListener("auth-logout-success",n),window.addEventListener("query-cache-cleared",n),()=>{window.removeEventListener("login-success",t),window.removeEventListener("logout-success",n),window.removeEventListener("role-change",s),window.removeEventListener("auth-logout-success",n),window.removeEventListener("query-cache-cleared",n)}}),[f,i]);const{data:m,isLoading:p}=fe({queryKey:["userRoles",n?.id],queryFn:async()=>n&&n.roles&&Array.isArray(n.roles)&&n.roles.length>0?n.roles:[],enabled:!!n,staleTime:3e5,cacheTime:6e5,onError:()=>[]}),g=Y.useMemo((()=>({roles:m||[],isLoading:p||!n,hasRole:e=>{if(p)return null;const t=m?.some((t=>t===e));return t},hasAnyRole:e=>{if(p)return null;if(!e||!Array.isArray(e))return!1;return e.some((e=>m?.some((t=>t===e))))},hasAllRoles:e=>{if(p)return null;if(!e||!Array.isArray(e))return!1;return e.every((e=>m?.some((t=>t===e))))},refreshRoles:()=>{u.current&&clearTimeout(u.current);const e=Date.now();e-d.current<h.current?u.current=setTimeout((()=>{d.current=Date.now(),f(!0).then((()=>{i.invalidateQueries(["userRoles"])})),u.current=null}),h.current-(e-d.current)):(d.current=e,f(!0).then((()=>{i.invalidateQueries(["userRoles"])})))}})),[m,p,i,f,n]);return e.jsx(sp.Provider,{value:g,children:t})},op=()=>{const e=Y.useContext(sp);if(!e)throw new Error("useRoles must be used within a RoleProvider");const t=Y.useCallback((t=>{if(e.roles&&e.roles.length>0&&e.roles.some((e=>e===t)))return!0;try{const e=JSON.parse(localStorage.getItem("userRoles")||"[]");if(e.length>0){if(e.some((e=>e===t)))return!0;const n=t.toUpperCase().replace("ROLE_","");if(e.some((e=>e.toUpperCase().replace("ROLE_","")===n)))return!0}if(0===e.length&&("ROLE_STUDENT"===t||"STUDENT"===t))return!0}catch(n){}return!1}),[e.roles]);return{...e,hasRoleRobust:t,hasRole:t}},lp=()=>{const{hasRole:e}=op(),t=Y.useMemo((()=>({isAdmin:()=>e(ap.ADMIN)||e(ap.SUPERADMIN),isRecruiter:()=>e(ap.RECRUITER),isHR:()=>e(ap.HR),isTeacher:()=>e(ap.TEACHER),isStudent:()=>e(ap.STUDENT),isGuest:()=>e(ap.GUEST),canEditPersonalInfo:()=>t.isAdmin()||t.isRecruiter()||t.isHR()||t.isTeacher()||t.isStudent()||t.isGuest(),isFieldEditable:n=>"email"===n?e(ap.ADMIN)||e(ap.SUPERADMIN):"portfolioUrl"===n?t.isStudent()||t.isAdmin():!!t.isAdmin()||!!(t.isRecruiter()||t.isHR()||t.isTeacher()||t.isStudent()||t.isGuest())&&["phoneNumber","linkedinUrl"].includes(n),canEditAddress:()=>e(ap.ADMIN)||e(ap.SUPERADMIN)||e(ap.GUEST),showLinkedIn:()=>t.isAdmin()||t.isRecruiter()||t.isHR()||t.isTeacher()||t.isStudent()||t.isGuest(),canEditAcademic:()=>t.isAdmin()||t.isStudent()||t.isGuest(),canEditPortfolioUrl:()=>t.isStudent()||t.isAdmin(),showPortfolioUrl:()=>t.isStudent()||t.isAdmin()||t.isTeacher()||t.isHR(),getRoleDashboardPath:()=>e(ap.SUPERADMIN)?"/superadmin/dashboard":e(ap.ADMIN)?"/admin/dashboard":e(ap.HR)?"/hr/dashboard":e(ap.TEACHER)?"/teacher/dashboard":e(ap.STUDENT)?"/student/dashboard":e(ap.RECRUITER)?"/recruiter/dashboard":e(ap.GUEST)?"/guest/dashboard":"/dashboard"})),[e]);return t},cp=()=>{const{roles:e}=op();return Y.useMemo((()=>({getMainRole:()=>e&&e.length>0?e[0]:"ROLE_GUEST",getRoleBadgeColor:e=>{switch(e){case ap.STUDENT:return"from-blue-500/90 to-blue-700/90";case ap.TEACHER:return"from-emerald-500/90 to-emerald-700/90";case ap.HR:return"from-purple-500/90 to-purple-700/90";case ap.ADMIN:return"from-amber-500/90 to-amber-700/90";case ap.SUPER_ADMIN:case"ROLE_SUPERADMIN":return"from-red-500/90 to-red-700/90";case ap.RECRUITER:return"from-pink-500/90 to-pink-700/90";case ap.GUEST:return"from-teal-500/90 to-teal-700/90";default:return"from-gray-500/90 to-gray-700/90"}},translateRoleName:e=>{switch(e){case ap.STUDENT:return"tudiant";case ap.TEACHER:return"Formateur";case ap.HR:return"Ressources Humaines";case ap.ADMIN:return"Administrateur";case ap.SUPER_ADMIN:case"ROLE_SUPERADMIN":return"Super Administrateur";case ap.RECRUITER:return"Recruteur";case ap.GUEST:return"Invit";default:return e}}})),[e])},up={ADMIN:["admin","adm","administrateur"],SUPER_ADMIN:["super admin","superadmin","super","super adm","super administrateur","superadministrateur","super-admin","super-administrateur"],SUPERADMIN:["superadmin","super admin","super","super adm","super administrateur","superadministrateur","super-admin","super-administrateur"],TEACHER:["formateur","forma","form","enseignant","prof","professeur"],STUDENT:["tudiant","etudiant","tud","etud","student","lve","eleve","apprenant"],HR:["rh","ressources humaines","ressources","hr","human resources"],RECRUITER:["recruteur","recru","rec","recruiter"],GUEST:["invit","invite","inv","guest"]};function dp(e){if(!e)return"Utilisateur";const t=e.replace(/^ROLE_/i,"");switch(t.toUpperCase()){case"ADMIN":return"Admin";case"SUPER_ADMIN":case"SUPERADMIN":return"Super Admin";case"TEACHER":return"Formateur";case"STUDENT":return"tudiant";case"RECRUITER":return"Recruteur";case"GUEST":return"Invit";case"HR":return"Ressources Humaines";default:return t||"Utilisateur"}}function hp(e={}){const{enabled:t=!0,onSuccess:n,onError:r,userId:s,...a}=e,i=de(),[o,l]=Y.useState(!1),c=sf(),[u,d]=Y.useState((()=>of.isLoggedIn())),[h]=Y.useState((()=>`user_data_${Date.now()}_${Math.random().toString(36).substr(2,9)}`)),[f,m]=Y.useState((()=>{try{const e=localStorage.getItem("user");if(e)return JSON.parse(e)}catch(e){}return null})),p=s?`/api/public-profile/${s}`:"/api/profile",[g,y]=Y.useState(0);Y.useEffect((()=>(ef.requestRegistry.registerRouteUser(p,h),()=>{ef.requestRegistry.unregisterRouteUser(p,h)})),[p,h]),Y.useEffect((()=>{if(!t||!c)return;if(!!!localStorage.getItem("token"))return;const e=Date.now();if(e-g<1e4)return;(async()=>{l(!0);try{const n=`useUserData_${h}_${e}`,r=await ef.getUserData({routeKey:p,forceRefresh:!1,useCache:!0,requestId:n});if(r){i.setQueryData(["unified-user-data",p,c],r);try{localStorage.setItem("user",JSON.stringify(r)),m(r)}catch(t){}}y(e)}catch(k){console.warn("Error fetching user data:",k)}finally{l(!1)}})()}),[t,c,p,i,g]);const v=Y.useCallback((()=>{try{const e=i.getQueryData(["unified-user-data",p,c]);if(e)return e;const t=ef.getCachedUserData();return t||f}catch(e){return f}}),[p,c,f,i]),b=Y.useCallback((async()=>{l(!0);try{const t=await ef.coordinateRequest(p,h,(async()=>{i.getQueryData(["unified-user-data",p,c]);return await jh.get(p,{noCache:!0,retries:2,timeout:12e3})}));let n;if(t)if(t.user&&"object"==typeof t.user)n=t;else if(t.id||t.email)n={...t,firstName:t.firstName||t.first_name||"",lastName:t.lastName||t.last_name||"",email:t.email||"",profilePictureUrl:t.profilePictureUrl||t.profile_picture_url||"",diplomas:Array.isArray(t.diplomas)?t.diplomas:[],addresses:Array.isArray(t.addresses)?t.addresses:[],stats:t.stats||{profile:{completionPercentage:0}}};else if(t.data&&"object"==typeof t.data||t.success){const e=t.data||{};n={...e,firstName:e.firstName||e.first_name||"",lastName:e.lastName||e.last_name||"",email:e.email||"",profilePictureUrl:e.profilePictureUrl||e.profile_picture_url||"",diplomas:Array.isArray(e.diplomas)?e.diplomas:[],addresses:Array.isArray(e.addresses)?e.addresses:[],stats:e.stats||{profile:{completionPercentage:0}}}}else n=t;else n={firstName:"",lastName:"",email:"",profilePictureUrl:"",diplomas:[],addresses:[],stats:{profile:{completionPercentage:0}}};if(n)try{localStorage.setItem("user",JSON.stringify(n)),m(n)}catch(e){}return l(!1),n}catch(k){throw l(!1),k}}),[p,h,i,c]),{data:x,isLoading:w,isError:E,error:k,refetch:S}=fe({queryKey:["unified-user-data",p,c,u],queryFn:b,initialData:v,enabled:t&&!!c&&u,staleTime:6e4,cacheTime:12e5,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchInterval:!1,retry:2,retryDelay:1e3,...a,onSuccess:e=>{if(e)try{localStorage.setItem("user",JSON.stringify(e)),m(e)}catch(t){}n&&n(e)},onError:e=>{r&&r(e)}}),N=Y.useCallback((async()=>{if(ef.requestRegistry.getActiveRequest(p))return null;if(ef.requestRegistry.shouldThrottleRequest(p))return null;try{l(!0);const t=await ef.coordinateRequest(p,h,(()=>ef.getUserData({routeKey:p,forceRefresh:!0,useCache:!1})));if(i.setQueryData(["unified-user-data",p,c],t),t)try{localStorage.setItem("user",JSON.stringify(t)),m(t)}catch(e){}return l(!1),t}catch(k){throw l(!1),k}}),[p,c,i,h]),T=Y.useCallback((e=>{const t=x||f;if(!t||!t.roles)return!1;return(Array.isArray(t.roles)?t.roles:"object"==typeof t.roles?Object.values(t.roles):[]).some((t=>"string"==typeof t&&t===e||"object"==typeof t&&t.name===e))}),[x,f]);Y.useEffect((()=>{const e=()=>{const e=of.isLoggedIn();e!==u&&d(e)};return e(),window.addEventListener("auth-state-change",e),window.addEventListener("login-success",e),()=>{window.removeEventListener("auth-state-change",e),window.removeEventListener("login-success",e)}}),[]),Y.useEffect((()=>{if(!t)return()=>{};let e=Date.now();let n=!1;const r=ef.subscribe(Jh.UPDATED,(t=>{if("profile_picture"===t)return;if(ef.requestRegistry.isRouteShared(p)&&ef.requestRegistry.getActiveRequest(p))return;const r=Date.now();n||r-e<2e3?n||(n=!0,setTimeout((()=>{e=Date.now(),n=!1,t?i.invalidateQueries(["unified-user-data",p,c]):S()}),2e3-(r-e))):(e=r,t?i.invalidateQueries(["unified-user-data",p,c]):S())}));return r}),[t,p,c,i,S]);const C=Y.useMemo((()=>{const e=x||f;if(!e)return{};let t="";e.roles&&e.roles.length>0&&(t=(e=>{if(!e||!Array.isArray(e)||0===e.length)return null;const t=["ROLE_SUPERADMIN","ROLE_ADMIN","ROLE_HR","ROLE_TEACHER","ROLE_RECRUITER","ROLE_STUDENT","ROLE_GUEST"];for(const n of t)if(e.includes(n))return n;return e[0]})(e.roles));return{primaryRole:t,isStudent:T("ROLE_STUDENT"),isTeacher:T("ROLE_TEACHER"),isAdmin:T("ROLE_ADMIN"),isSuperAdmin:T("ROLE_SUPER_ADMIN"),isGuest:T("ROLE_GUEST")}}),[x,f,T]);return{user:Y.useMemo((()=>{const e=x||f||{},t=e.user&&"object"==typeof e.user,n=e.data&&"object"==typeof e.data;let r;r=t?e.user:n?e.data:e;const s=(e,t,n="")=>{for(const r of t)if(void 0!==e[r]&&null!==e[r])return e[r];return n};let a=null;if(r.studentProfile?a={...r.studentProfile}:e.studentProfile?a={...e.studentProfile}:n&&e.data.studentProfile&&(a={...e.data.studentProfile}),a&&void 0===a.portfolioUrl){const t=[r.studentProfile?.portfolioUrl,e.studentProfile?.portfolioUrl,e.data?.studentProfile?.portfolioUrl];for(const e of t)if(void 0!==e){a.portfolioUrl=e;break}}return{id:s(r,["id"]),firstName:s(r,["firstName","first_name"]),lastName:s(r,["lastName","last_name"]),fullName:s(r,["fullName","full_name"]),email:s(r,["email"]),phoneNumber:s(r,["phoneNumber","phone_number"]),linkedinUrl:s(r,["linkedinUrl","linkedin_url"]),profilePictureUrl:s(r,["profilePictureUrl","profile_picture_url"]),profilePicturePath:s(r,["profilePicturePath","profile_picture_path"]),birthDate:s(r,["birthDate","birth_date"]),age:s(r,["age"],null),nationality:r.nationality||null,theme:r.theme||null,roles:Array.isArray(r.roles)?r.roles:[],specialization:r.specialization||null,diplomas:Array.isArray(r.diplomas)?r.diplomas:Array.isArray(e.diplomas)?e.diplomas:[],addresses:Array.isArray(r.addresses)?r.addresses:Array.isArray(e.addresses)?e.addresses:[],documents:Array.isArray(r.documents)?r.documents:Array.isArray(e.documents)?e.documents:[],studentProfile:a,stats:r.stats||e.stats||{profile:{completionPercentage:0}},createdAt:s(r,["createdAt","created_at"]),updatedAt:s(r,["updatedAt","updated_at"])}}),[x,f]),isLoading:(w||o)&&!f,isInitialLoading:o&&!f,isError:E,error:k,refetch:S,forceRefresh:N,hasRole:T,...C}}var fp,mp,pp={exports:{}},gp={};var yp=(mp||(mp=1,pp.exports=function(){if(fp)return gp;fp=1;var e=Q(),t="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=e.useState,r=e.useEffect,s=e.useLayoutEffect,a=e.useDebugValue;function i(e){var n=e.getSnapshot;e=e.value;try{var r=n();return!t(e,r)}catch(s){return!0}}var o="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var o=t(),l=n({inst:{value:o,getSnapshot:t}}),c=l[0].inst,u=l[1];return s((function(){c.value=o,c.getSnapshot=t,i(c)&&u({inst:c})}),[e,o,t]),r((function(){return i(c)&&u({inst:c}),e((function(){i(c)&&u({inst:c})}))}),[e]),a(o),o};return gp.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:o,gp}()),pp.exports);function vp(){return()=>{}}var bp="Avatar",[xp,wp]=E(bp),[Ep,kp]=xp(bp),Sp=Y.forwardRef(((t,n)=>{const{__scopeAvatar:r,...s}=t,[a,i]=Y.useState("idle");return e.jsx(Ep,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:e.jsx(k.span,{...s,ref:n})})}));Sp.displayName=bp;var Np="AvatarImage",Tp=Y.forwardRef(((t,n)=>{const{__scopeAvatar:r,src:s,onLoadingStatusChange:a=()=>{},...i}=t,o=kp(Np,r),l=function(e,{referrerPolicy:t,crossOrigin:n}){const r=yp.useSyncExternalStore(vp,(()=>!0),(()=>!1)),s=Y.useRef(null),a=r?(s.current||(s.current=new window.Image),s.current):null,[i,o]=Y.useState((()=>Rp(a,e)));return N((()=>{o(Rp(a,e))}),[a,e]),N((()=>{const e=e=>()=>{o(e)};if(!a)return;const r=e("loaded"),s=e("error");return a.addEventListener("load",r),a.addEventListener("error",s),t&&(a.referrerPolicy=t),"string"==typeof n&&(a.crossOrigin=n),()=>{a.removeEventListener("load",r),a.removeEventListener("error",s)}}),[a,n,t]),i}(s,i),c=S((e=>{a(e),o.onImageLoadingStatusChange(e)}));return N((()=>{"idle"!==l&&c(l)}),[l,c]),"loaded"===l?e.jsx(k.img,{...i,ref:n,src:s}):null}));Tp.displayName=Np;var Cp="AvatarFallback",jp=Y.forwardRef(((t,n)=>{const{__scopeAvatar:r,delayMs:s,...a}=t,i=kp(Cp,r),[o,l]=Y.useState(void 0===s);return Y.useEffect((()=>{if(void 0!==s){const e=window.setTimeout((()=>l(!0)),s);return()=>window.clearTimeout(e)}}),[s]),o&&"loaded"!==i.imageLoadingStatus?e.jsx(k.span,{...a,ref:n}):null}));function Rp(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}jp.displayName=Cp;var Ap=Sp,_p=Tp,Dp=jp;const Ip=Y.forwardRef((({className:t,...n},r)=>e.jsx(Ap,{ref:r,className:Vm("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...n})));Ip.displayName=Ap.displayName;const Pp=Y.forwardRef((({className:t,...n},r)=>e.jsx(_p,{ref:r,className:Vm("aspect-square h-full w-full",t),...n})));Pp.displayName=_p.displayName;const Mp=Y.forwardRef((({className:t,...n},r)=>e.jsx(Dp,{ref:r,className:Vm("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...n})));Mp.displayName=Dp.displayName;const Lp=({className:t=""})=>{const{profilePictureUrl:n}=jf();return e.jsx(Ip,{className:`rounded-full ${t}`,children:n?e.jsx("img",{src:n,alt:"Photo de profil",className:"w-full h-full object-cover",onError:e=>{e.target.src=""}}):e.jsx(Mp,{className:"bg-gradient-to-r from-[#02284f] to-[#03386b] text-white",children:e.jsx(Uc,{className:"w-4 h-4 sm:w-6 sm:h-6 md:w-8 md:h-8"})})})},Op=x,Up=w,Fp=b,zp=Y.forwardRef((({className:t,...n},r)=>e.jsx(m,{className:Vm("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...n,ref:r})));zp.displayName=m.displayName;const Vp=Pf("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Bp=Y.forwardRef((({side:t="right",className:n,children:r,showClose:s=!0,...a},i)=>e.jsxs(Fp,{children:[e.jsx(zp,{}),e.jsxs(p,{ref:i,className:Vm(Vp({side:t}),n),...a,children:[e.jsx(y,{className:"sr-only",children:"Sheet Dialog"}),e.jsx(v,{className:"sr-only",children:"Contenu du panneau latral"}),s&&e.jsxs(g,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(zc,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Fermer"})]}),r]})]})));Bp.displayName=p.displayName;const qp=Y.forwardRef((({className:t,...n},r)=>e.jsx(y,{ref:r,className:Vm("text-lg font-semibold text-foreground",t),...n})));qp.displayName=y.displayName;Y.forwardRef((({className:t,...n},r)=>e.jsx(v,{ref:r,className:Vm("text-sm text-muted-foreground",t),...n}))).displayName=v.displayName;const $p=Y.memo((()=>{const{user:t}=hp(),[n,r]=Y.useState(!1),[s,a]=Y.useState({}),i=Y.useRef(null),o=Y.useRef(null),l=ee(),{roles:c,hasAnyRole:u}=op(),{translateRoleName:d}=cp();lp(),Y.useEffect((()=>{const e=e=>{n&&i.current&&!i.current.contains(e.target)&&o.current&&!o.current.contains(e.target)&&r(!1)};return n&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[n]),Y.useEffect((()=>{n&&r(!1)}),[c]);const h=[{key:"dashboard",label:"Tableau de bord",icon:e.jsx(mc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),to:"/dashboard"},{key:"notifications",label:"Notifications",icon:e.jsx(zl,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[ap.SUPERADMIN,ap.ADMIN,ap.TEACHER,ap.STUDENT],to:"/notifications"},{key:"messagerie",label:"Messagerie",icon:e.jsx(Ec,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[ap.SUPERADMIN,ap.ADMIN,ap.TEACHER,ap.STUDENT,ap.RECRUITER],to:"#"},{key:"trombinoscope",label:"Trombinoscope",icon:e.jsx(Hl,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[ap.SUPERADMIN,ap.ADMIN,ap.TEACHER,ap.STUDENT,ap.RECRUITER],to:"/trombinoscope"},{key:"formations_section",label:"Formations",icon:e.jsx(Vl,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[ap.ADMIN,ap.SUPERADMIN,ap.RECRUITER],links:[{name:"Toutes les formations",to:"/formations",roles:[ap.ADMIN,ap.SUPERADMIN,ap.RECRUITER]},{name:"Crer une formation",to:"/formations/new",roles:[ap.ADMIN,ap.SUPERADMIN,ap.RECRUITER]},{name:"Demandes en attente",to:"/formations/pending",roles:[ap.ADMIN,ap.SUPERADMIN,ap.RECRUITER]}]},{key:"etudiants",label:"tudiants",icon:e.jsx(dc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[ap.SUPERADMIN,ap.ADMIN,ap.TEACHER,ap.HR,ap.RECRUITER],links:[{name:"Liste des tudiants",to:"/admin/users?filter=ROLE_STUDENT",roles:[ap.SUPERADMIN,ap.ADMIN]},{name:"Gestion des tudiants",to:"/eleves",roles:[ap.SUPERADMIN,ap.ADMIN,ap.TEACHER,ap.HR]},{name:"Rsultats",to:"/eleves/resultats",roles:[ap.SUPERADMIN,ap.ADMIN,ap.TEACHER]},{name:"Dossiers",to:"/eleves/dossiers",roles:[ap.SUPERADMIN,ap.ADMIN,ap.HR,ap.TEACHER]},{name:"Certificats et Diplmes",to:"/eleves/certificats",roles:[ap.SUPERADMIN,ap.ADMIN,ap.TEACHER]},{name:"Historique des Absences",to:"/eleves/absences",roles:[ap.SUPERADMIN,ap.ADMIN,ap.TEACHER,ap.HR]},{name:"Profils & CV",to:"/recruiter/student-profiles",roles:[ap.RECRUITER]},{name:"Stages & Alternances",to:"/recruiter/internships",roles:[ap.RECRUITER]}]},{key:"cours",label:"Mes Cours",icon:e.jsx(rc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[ap.STUDENT,ap.TEACHER],to:"#"},{key:"projet",label:"Mes Projets",icon:e.jsx(Bl,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[ap.STUDENT,ap.TEACHER],to:"#"},{key:"formations_management",label:"Gestion des formations",icon:e.jsx(Vl,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[ap.SUPERADMIN,ap.ADMIN,ap.TEACHER,ap.RECRUITER],to:"/formation-management"},{key:"justification_absence",label:"Justifier une absence",icon:e.jsx(rc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[ap.STUDENT],to:"#"},{key:"plannings",label:"Plannings",icon:e.jsx($l,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[ap.SUPERADMIN,ap.ADMIN,ap.TEACHER,ap.HR,ap.STUDENT],links:[{name:"vnements",to:"/plannings/evenements",roles:[ap.SUPERADMIN,ap.ADMIN,ap.TEACHER,ap.HR,ap.STUDENT]},{name:"Agenda",to:"/plannings/agenda",roles:[ap.SUPERADMIN,ap.ADMIN,ap.TEACHER,ap.HR,ap.STUDENT]},{name:"Rservation de salle",to:"/plannings/reservation-salle",roles:[ap.SUPERADMIN,ap.ADMIN,ap.TEACHER]},{name:"Rservation de matriel",to:"/plannings/reservation-materiel",roles:[ap.SUPERADMIN,ap.ADMIN,ap.TEACHER]}]},{key:"candidatures",label:"Candidatures",icon:e.jsx(_c,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[ap.HR,ap.RECRUITER],to:"/candidatures"},{key:"recrutement",label:"Recrutement",icon:e.jsx(Bl,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[ap.RECRUITER],links:[{name:"Tableau de bord",to:"/recruiter/dashboard",roles:[ap.RECRUITER]},{name:"Offres d'emploi",to:"/recruiter/jobs",roles:[ap.RECRUITER]},{name:"Candidatures",to:"/recruiter/applications",roles:[ap.RECRUITER]},{name:"Entretiens",to:"/recruiter/interviews",roles:[ap.RECRUITER]},{name:"Base de CV",to:"/recruiter/cv-database",roles:[ap.RECRUITER]},{name:"Statistiques",to:"/recruiter/statistics",roles:[ap.RECRUITER]}]},{key:"evenements",label:"vnements",icon:e.jsx($l,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[ap.RECRUITER],links:[{name:"Job Dating",to:"/recruiter/job-dating",roles:[ap.RECRUITER]},{name:"Forums Entreprises",to:"/recruiter/career-fairs",roles:[ap.RECRUITER]},{name:"Prsentations Entreprise",to:"/recruiter/company-presentations",roles:[ap.RECRUITER]}]},{key:"cagnottes",label:"Cagnottes",icon:e.jsx(Nc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[ap.SUPERADMIN,ap.ADMIN,ap.TEACHER,ap.STUDENT],to:"#"},{key:"sponsors",label:"Sponsors",icon:e.jsx(hc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[ap.SUPERADMIN,ap.ADMIN,ap.TEACHER,ap.STUDENT],to:"#"},{key:"admin_all_users",label:"Tous les utilisateurs",icon:e.jsx(Fc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[ap.ADMIN,ap.SUPERADMIN],to:"/admin/users"},{key:"admin_teachers",label:"Formateurs",icon:e.jsx(rc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[ap.ADMIN,ap.SUPERADMIN],links:[{name:"Liste des formateurs",to:"/admin/users?filter=ROLE_TEACHER",roles:[ap.ADMIN,ap.SUPERADMIN]},{name:"Planning des Formateurs",to:"/rh/planning",roles:[ap.ADMIN,ap.SUPERADMIN]},{name:"valuation des formateurs",to:"/admin/teacher-evaluation",roles:[ap.ADMIN,ap.SUPERADMIN]}]},{key:"admin_hr",label:"Personnel RH",icon:e.jsx(Fc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[ap.ADMIN,ap.SUPERADMIN],links:[{name:"Liste du personnel RH",to:"/admin/users?filter=ROLE_HR",roles:[ap.ADMIN,ap.SUPERADMIN]},{name:"Attributions",to:"/admin/hr-assignments",roles:[ap.ADMIN,ap.SUPERADMIN]}]},{key:"admin_admins",label:"Administrateurs",icon:e.jsx(Dc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[ap.ADMIN,ap.SUPERADMIN],links:[{name:"Liste des administrateurs",to:"/admin/users?filter=ROLE_ADMIN",roles:[ap.ADMIN,ap.SUPERADMIN]},{name:"Droits d'accs",to:"/admin/access-rights",roles:[ap.SUPERADMIN]}]},{key:"admin_guests",label:"Invits",icon:e.jsx(Oc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[ap.ADMIN,ap.SUPERADMIN],links:[{name:"Liste des invits",to:"/admin/users?filter=ROLE_GUEST",roles:[ap.ADMIN,ap.SUPERADMIN]},{name:"Gestion des invits",to:"/invites/",roles:[ap.ADMIN,ap.SUPERADMIN]},{name:"Test d'admission",to:"/invites/test_admission",roles:[ap.ADMIN,ap.SUPERADMIN]},{name:"Statistiques des Invits",to:"/admin/invite/statistiques",roles:[ap.ADMIN,ap.SUPERADMIN]}]},{key:"admin_recruiters",label:"Recruteurs",icon:e.jsx(Bl,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[ap.ADMIN,ap.SUPERADMIN],links:[{name:"Liste des recruteurs",to:"/admin/users?filter=ROLE_RECRUITER",roles:[ap.ADMIN,ap.SUPERADMIN]},{name:"Entreprises partenaires",to:"/admin/partner-companies",roles:[ap.ADMIN,ap.SUPERADMIN]},{name:"Offres d'emploi",to:"/admin/job-offers",roles:[ap.ADMIN,ap.SUPERADMIN]}]},{key:"guest_student_roles",label:"Gestion Invit/lve",icon:e.jsx(Fc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[ap.RECRUITER],to:"/recruiter/guest-student-roles"},{key:"rh",label:"Ressources Humaines",icon:e.jsx(Fc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[ap.SUPERADMIN,ap.ADMIN,ap.HR],links:[{name:"Gestion des Formateurs",to:"/rh/formateurs",roles:[ap.SUPERADMIN,ap.HR]},{name:"Gestion des Candidatures",to:"/rh/candidatures",roles:[ap.SUPERADMIN,ap.HR]},{name:"Suivi des Absences et Congs",to:"/rh/absences",roles:[ap.SUPERADMIN,ap.HR]},{name:"Planning des Formateurs",to:"/rh/planning",roles:[ap.SUPERADMIN,ap.HR]},{name:"Archivage des Dossiers",to:"/rh/archivage",roles:[ap.SUPERADMIN,ap.HR]},{name:"Suivi des Recrutements",to:"/rh/recrutement",roles:[ap.SUPERADMIN,ap.HR]},{name:"Gestion des formateurs",to:"/admin/users?filter=ROLE_TEACHER",roles:[ap.HR]}]},{key:"admins",label:"Administration",icon:e.jsx(Dc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[ap.SUPERADMIN,ap.ADMIN],links:[{name:"Gestion des Formations",to:"/admin/formations",roles:[ap.SUPERADMIN]},{name:"Gestion des Services de Support",to:"/admin/ticket-services",roles:[ap.SUPERADMIN,ap.ADMIN]},{name:"Gestion des Tickets",to:"/admin/tickets",roles:[ap.SUPERADMIN,ap.ADMIN]},{name:"Suivi des Inscriptions",to:"/admin/inscriptions",roles:[ap.SUPERADMIN]},{name:"Gestion des Paiements",to:"/admin/paiements",roles:[ap.SUPERADMIN]},{name:"Suivi des Absences",to:"/admin/absences",roles:[ap.SUPERADMIN]},{name:"Statistiques Administratives",to:"/admin/statistiques",roles:[ap.SUPERADMIN]},{name:"Les logs",to:"/admin/logs",roles:[ap.SUPERADMIN]},{name:"Gestion des partenaires",to:"/admin/partenariats",roles:[ap.SUPERADMIN]}]},{key:"centres_formations",label:"Centres de formations",icon:e.jsx(Cc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[ap.SUPERADMIN],to:"/centres_formations"},{key:"candidature",label:"Ma Candidature",icon:e.jsx(rc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[ap.GUEST],links:[{name:"tat de ma candidature",to:"/guest/application-status",roles:[ap.GUEST]},{name:"Documents  fournir",to:"/guest/required-documents",roles:[ap.GUEST]},{name:"Complter mon dossier",to:"/guest/complete-profile",roles:[ap.GUEST]},{name:"Historique des changes",to:"/guest/communications",roles:[ap.GUEST]}]},{key:"formations",label:"Formations",icon:e.jsx(Vl,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[ap.GUEST],links:[{name:"Catalogue des formations",to:"/guest/training-catalog",roles:[ap.GUEST]},{name:"Dtails des programmes",to:"/guest/program-details",roles:[ap.GUEST]},{name:"Conditions d'admission",to:"/guest/admission-requirements",roles:[ap.GUEST]},{name:"FAQ Formations",to:"/guest/training-faq",roles:[ap.GUEST]}]},{key:"ecole",label:"Notre cole",icon:e.jsx(Cc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[ap.GUEST],links:[{name:"Prsentation",to:"/guest/school-presentation",roles:[ap.GUEST]},{name:"Vie tudiante",to:"/guest/student-life",roles:[ap.GUEST]},{name:"Tmoignages",to:"/guest/testimonials",roles:[ap.GUEST]},{name:"Actualits",to:"/guest/news",roles:[ap.GUEST]}]},{key:"contact",label:"Contact & Support",icon:e.jsx(Ec,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[ap.GUEST],links:[{name:"Contacter un recruteur",to:"/guest/contact-recruiter",roles:[ap.GUEST]},{name:"Questions frquentes",to:"/guest/faq",roles:[ap.GUEST]},{name:"Support technique",to:"/guest/technical-support",roles:[ap.GUEST]},{name:"Prendre rendez-vous",to:"/guest/schedule-meeting",roles:[ap.GUEST]}]},{key:"nous_rejoindre",label:"Nous rejoindre",icon:e.jsx(Fc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[ap.GUEST],links:[{name:"Envoyer une candidature",to:"/nous-rejoindre/candidature"},{name:"Processus de recrutement",to:"/nous-rejoindre/recrutement"},{name:"Offres d'emploi",to:"/nous-rejoindre/offres"},{name:"Devenir partenaire",to:"/nous-rejoindre/partenaire"},{name:"Devenir sponsor",to:"/nous-rejoindre/sponsor"}]},{key:"aide",label:"Besoin d'aide",icon:e.jsx(Mc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[ap.TEACHER,ap.STUDENT,ap.HR,ap.RECRUITER,ap.GUEST],links:[{name:"Crer un ticket",to:"/tickets/new",roles:[ap.TEACHER,ap.STUDENT,ap.HR,ap.RECRUITER,ap.GUEST]},{name:"Mes tickets",to:"/tickets",roles:[ap.TEACHER,ap.STUDENT,ap.HR,ap.RECRUITER,ap.GUEST]}]}];return e.jsxs("div",{className:"relative z-[101]",children:[e.jsx("style",{children:'\n  .menu-burger-button {\n    position: relative;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 40px;\n    height: 40px;\n    border-radius: 50%;\n    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n    margin-right: 0.75rem;\n    background-color: transparent;\n    border: none;\n    cursor: pointer;\n    z-index: 101;\n  }\n  \n  .menu-burger-button:hover {\n    background-color: rgba(255, 255, 255, 0.1);\n    transform: scale(1.05);\n  }\n  \n  .menu-burger-button:active {\n    transform: scale(0.95);\n  }\n  \n  /* Override Sheet styles to match our design */\n  .sidebar-sheet {\n    background-color: #00284f !important;\n    color: white !important;\n    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3) !important;\n    border-right: 1px solid rgba(82, 142, 178, 0.2) !important;\n    z-index: 102 !important;\n  }\n  \n  .scrollable-div {\n    scrollbar-width: thin;\n    scrollbar-color: rgba(82, 142, 178, 0.5) transparent;\n  }\n  \n  .scrollable-div::-webkit-scrollbar {\n    width: 6px;\n  }\n  \n  .scrollable-div::-webkit-scrollbar-track {\n    background: transparent;\n  }\n  \n  .scrollable-div::-webkit-scrollbar-thumb {\n    background-color: rgba(82, 142, 178, 0.5);\n    border-radius: 3px;\n  }\n  \n  .menu-item {\n    position: relative;\n    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n    border-radius: 0.375rem;\n    margin: 0.25rem 0.5rem;\n  }\n  \n  .menu-item:hover {\n    background-color: rgba(82, 142, 178, 0.2);\n    transform: translateX(4px);\n  }\n  \n  .menu-item.active {\n    background-color: rgba(82, 142, 178, 0.3);\n    border-left: 3px solid #528eb2;\n  }\n  \n  .submenu-item {\n    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n    border-radius: 0.375rem;\n    margin: 0.25rem 0.5rem;\n  }\n  \n  .submenu-item:hover {\n    background-color: rgba(82, 142, 178, 0.3);\n    transform: translateX(4px);\n  }\n  \n  .chevron-icon {\n    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  }\n  \n  .chevron-icon.open {\n    transform: rotate(90deg);\n  }\n  \n  /* Responsive styles */\n  @media (min-width: 1024px) {\n    .sidebar-sheet {\n      width: 320px !important;\n    }\n  }\n  \n  @media (max-width: 1023px) {\n    .sidebar-sheet {\n      width: 280px !important;\n    }\n  }\n  \n  @media (max-width: 768px) {\n    .sidebar-sheet {\n      width: 85vw !important;\n    }\n    \n    .menu-item {\n      margin: 0.125rem 0.25rem;\n    }\n    \n    .submenu-item {\n      margin: 0.125rem 0.25rem;\n    }\n  }\n  \n  @media (max-width: 480px) {\n    .sidebar-sheet {\n      width: 100vw !important;\n    }\n    \n    .menu-item, .submenu-item {\n      margin: 0.125rem 0;\n      border-radius: 0;\n    }\n    \n    .menu-item:hover, .submenu-item:hover {\n      transform: none;\n      background-color: rgba(82, 142, 178, 0.15);\n    }\n  }\n\n  /* Hide the default close button from Sheet */\n  .sidebar-sheet [data-state] > button[type="button"] {\n    display: none;\n  }\n  \n  .menu-item {\n    position: relative;\n    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n    border-radius: 0.375rem;\n    margin: 0.25rem 0.5rem;\n  }\n  \n  .menu-item:hover {\n    background-color: rgba(82, 142, 178, 0.2);\n    transform: translateX(4px);\n  }\n  \n  .menu-item.active {\n    background-color: rgba(82, 142, 178, 0.3);\n    border-left: 3px solid #528eb2;\n  }\n  \n  .submenu-item {\n    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n    border-radius: 0.375rem;\n    margin: 0.25rem 0.5rem;\n  }\n  \n  .submenu-item:hover {\n    background-color: rgba(82, 142, 178, 0.3);\n    transform: translateX(4px);\n  }\n  \n  .chevron-icon {\n    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  }\n  \n  .chevron-icon.open {\n    transform: rotate(90deg);\n  }\n'}),e.jsxs(Op,{open:n,onOpenChange:r,children:[e.jsx(Up,{asChild:!0,children:e.jsx("button",{ref:o,className:"menu-burger-button text-gray-200 hover:text-white focus:outline-none","aria-label":"Menu principal",children:e.jsx(wc,{className:"w-6 h-6"})})}),e.jsx(Bp,{side:"left",className:"sidebar-sheet p-0 border-0",showClose:!1,children:e.jsxs("div",{className:"flex flex-col h-full",children:[c.length>0&&e.jsxs("div",{className:"flex items-center p-4 border-b border-blue-700 bg-gradient-to-r from-[#00284f] to-[#003a6b]",children:[e.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-full mr-3 flex items-center justify-center cursor-pointer hover:bg-white/30 transition-colors",onClick:()=>{r(!1),l("/profile")},children:e.jsx(Lp,{className:"w-full h-full"})}),e.jsxs("div",{className:"cursor-pointer",onClick:()=>{r(!1),l("/profile")},children:[e.jsx("p",{className:"font-semibold hover:underline transition-all text-white",children:t?`${t.firstName} ${t.lastName}`:"Chargement..."}),e.jsx("p",{className:"text-sm text-blue-200",children:d(c[0])})]}),e.jsx("button",{className:"ml-auto text-white p-2 rounded-full hover:bg-blue-800/50 transition-colors",onClick:()=>r(!1),"aria-label":"Fermer le menu",children:e.jsx(zc,{className:"w-5 h-5"})})]}),!c.length&&e.jsxs("div",{className:"p-4 border-b border-blue-700 bg-gradient-to-r from-[#00284f] to-[#003a6b]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Bienvenue"}),e.jsx("button",{className:"text-white p-2 rounded-full hover:bg-blue-800/50 transition-colors",onClick:()=>r(!1),"aria-label":"Fermer le menu",children:e.jsx(zc,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-sm text-blue-200 mb-3",children:"Connectez-vous pour accder  toutes les fonctionnalits"}),e.jsxs(te,{to:"/login",className:"flex items-center justify-center w-full py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors",onClick:()=>r(!1),children:[e.jsx(Uc,{className:"w-4 h-4 mr-2"}),"Se connecter"]})]}),e.jsx("div",{className:"scrollable-div overflow-y-auto flex-grow",children:e.jsx("ul",{className:"py-2",children:h.map((({key:t,icon:n,label:i,roles:o,links:c,to:d,onClick:h})=>!o||u(o)?e.jsx(J.Fragment,{children:d?e.jsx("li",{className:"menu-item",children:"support"===t?e.jsxs("div",{className:"flex items-center px-4 py-2.5 w-full cursor-pointer",onClick:()=>{r(!1),l("/tickets")},children:[n,e.jsx("span",{children:i})]}):e.jsxs(te,{to:d,className:"flex items-center px-4 py-2.5 w-full",onClick:()=>r(!1),children:[n,e.jsx("span",{children:i})]})}):e.jsxs("li",{className:"menu-item "+(s[t]?"active":""),onClick:()=>{return e=t,void a((t=>({...Object.keys(t).reduce(((e,t)=>({...e,[t]:!1})),{}),[e]:!t[e]})));var e},children:[e.jsxs("div",{className:"flex items-center px-4 py-2.5 w-full cursor-pointer",children:[n,e.jsx("span",{children:i}),e.jsx("div",{className:"ml-auto",children:s[t]?e.jsx(Ql,{className:"w-4 h-4 text-[#528eb2]"}):e.jsx(Yl,{className:"w-4 h-4 text-[#528eb2] chevron-icon "+(s[t]?"open":"")})})]}),e.jsx(Be,{children:s[t]&&c&&e.jsx(_l.ul,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"bg-[#001f3d] pl-4",children:c.map((t=>!t.roles||u(t.roles)?e.jsx("li",{className:"submenu-item",children:e.jsx(te,{to:t.to,className:"flex items-center px-4 py-2 text-sm",onClick:()=>r(!1),children:t.name})},t.to):null))})})]})},`menu-${t}`):null))})})]})})]})]})})),Hp=e=>{switch(e.replace(/^ROLE_/i,"").toUpperCase()){case"ADMIN":return"Admin";case"SUPER_ADMIN":case"SUPERADMIN":return"Super Admin";case"TEACHER":return"Formateur";case"STUDENT":return"tudiant";case"RECRUITER":return"Recruteur";case"HR":return"Ressources Humaines";case"GUEST":return"Invit";default:return e}},Wp=t=>{const n=t?.toLowerCase().replace("role_","");switch(n){case"admin":case"super_admin":return e.jsx(Bl,{className:"w-3 h-3 mr-1 text-blue-600 dark:text-blue-400"});case"teacher":return e.jsx(Bl,{className:"w-3 h-3 mr-1 text-green-600 dark:text-green-400"});case"student":return e.jsx(Zl,{className:"w-3 h-3 mr-1 text-amber-600 dark:text-amber-400"});case"hr":return e.jsx(Bl,{className:"w-3 h-3 mr-1 text-purple-600 dark:text-purple-400"});case"recruiter":return e.jsx(Bl,{className:"w-3 h-3 mr-1 text-indigo-600 dark:text-indigo-400"});default:return e.jsx(Zl,{className:"w-3 h-3 mr-1 text-gray-600 dark:text-gray-400"})}},Gp=e=>{const t=e?.toLowerCase().replace("role_","");switch(t){case"admin":return"bg-blue-50 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300";case"super_admin":case"superadmin":return"bg-red-50 text-red-700 dark:bg-red-900/40 dark:text-red-300";case"teacher":return"bg-green-50 text-green-700 dark:bg-green-900/40 dark:text-green-300";case"student":return"bg-amber-50 text-amber-700 dark:bg-amber-900/40 dark:text-amber-300";case"hr":return"bg-purple-50 text-purple-700 dark:bg-purple-900/40 dark:text-purple-300";case"recruiter":return"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/40 dark:text-indigo-300";default:return"bg-gray-50 text-gray-700 dark:bg-gray-800 dark:text-gray-300"}},Kp=e=>{const t=e?.replace(/^ROLE_/i,"").toLowerCase();switch(t){case"admin":return"Administrateur";case"super_admin":case"superadmin":return"Super Administrateur";case"teacher":return"Formateur";case"student":return"tudiant";case"hr":return"Ressources Humaines";case"recruiter":return"Recruteur";case"guest":return"Invit";default:return e||"Utilisateur"}},Qp=()=>{const[e,t]=Y.useState([]),[n,r]=Y.useState(!1),[s,a]=Y.useState(!1),{roles:i,hasRole:o,hasAnyRole:l}=op();Y.useEffect((()=>{const e=of.isLoggedIn();r(e)}),[]),Y.useEffect((()=>{let e=[];e=n?o(ap.SUPERADMIN)?["ADMIN","SUPER_ADMIN","SUPERADMIN","TEACHER","STUDENT","RECRUITER","HR","GUEST"]:o(ap.ADMIN)?["ADMIN","TEACHER","STUDENT","RECRUITER","HR","GUEST"]:o(ap.TEACHER)&&!l([ap.ADMIN,ap.SUPERADMIN])?["STUDENT","HR"]:o(ap.HR)&&!l([ap.ADMIN,ap.SUPERADMIN])?["TEACHER","STUDENT","RECRUITER"]:o(ap.RECRUITER)&&!l([ap.ADMIN,ap.SUPERADMIN,ap.HR,ap.TEACHER])?["TEACHER","STUDENT"]:o(ap.STUDENT)?["TEACHER","STUDENT","RECRUITER","HR"]:(o(ap.GUEST),["RECRUITER"]):[],t(e)}),[i,o,l,n]);return{allowedSearchRoles:e,isLoggedIn:n,isRoleSearch:s,setIsRoleSearch:a,checkForRoleSearch:t=>{const n=((e,t)=>{if(!e||!t||0===t.length)return!1;const n=e.toLowerCase(),r={admin:["admin","administrateur"],super_admin:["super admin","superadmin","super administrateur"],teacher:["prof","professeur","formateur","formatrice","enseignant"],student:["tudiant","etudiante","lve","eleve","apprenant"],hr:["rh","ressources humaines","ressource humaine"],recruiter:["recruteur","recruteuse","recrutement"]};for(const s of t){const e=s.replace(/^ROLE_/i,"").toLowerCase();if(n===e||(r[e]||[]).some((e=>n.includes(e))))return s}return!1})(t,e);return!!n},hasRole:o,hasAnyRole:l}};Object.entries(up).forEach((([e,t])=>{t.forEach((e=>{}))}));const Xp={async getSuggestions(e){try{if(!of.isLoggedIn())throw new Error("Vous devez tre connect pour effectuer une recherche.");const t=await of.getCurrentUser(),n=t?.roles||[],r=n.includes(ap.SUPERADMIN),s=n.includes(ap.ADMIN)&&!r,a=n.includes(ap.TEACHER)&&!r&&!s,i=n.includes(ap.HR)&&!r&&!s,o=n.includes(ap.RECRUITER)&&!r&&!s&&!a&&!i,l=function(e,t=null){if(!e)return null;const n=e.toLowerCase().trim(),r=t?Object.keys(up).filter((e=>!("SUPERADMIN"!==e||!t.includes("SUPER_ADMIN"))||!("SUPER_ADMIN"!==e||!t.includes("SUPERADMIN"))||t.includes(e))):Object.keys(up);for(const a of r)if(up[a].includes(n))return{role:a,matchType:"exact",alias:n};for(const a of r){const e=up[a];for(const t of e)try{if(new RegExp("\\b"+t+"\\b","i").test(n))return{role:a,matchType:"boundary",alias:t}}catch(s){continue}}for(const a of r){const e=up[a];for(const t of e)if(t.startsWith(n)||n.startsWith(t))return{role:a,matchType:"startsWith",alias:t}}for(const a of r){const e=up[a];for(const t of e)if(t.includes(n)||n.includes(t))return{role:a,matchType:"contains",alias:t}}return null}(e),c=!!l;if(c){const e=l.role.toUpperCase();if(s&&("SUPER_ADMIN"===e||"SUPERADMIN"===e))return[];if(a&&"STUDENT"!==e&&"HR"!==e)return[];if(i&&"TEACHER"!==e&&"STUDENT"!==e&&"RECRUITER"!==e)return[];if(o&&"TEACHER"!==e&&"STUDENT"!==e)return[]}let u=null;c&&(u="SUPERADMIN"===l.role||"SUPER_ADMIN"===l.role?ap.SUPERADMIN:ap[l.role]);const d=await jh.get("/user-autocomplete",{params:{q:e}});if(c&&(!d||0===d.length)){let e=[];l.role.includes("_")&&e.push(l.role.replace("_","")),"SUPERADMIN"===l.role?(e.push("SUPER_ADMIN"),e.push("super admin")):"SUPER_ADMIN"===l.role&&(e.push("SUPERADMIN"),e.push("superadmin"));const t=up[l.role];t&&t.length>0&&e.push(t[0]);for(const n of e){const e=await jh.get("/user-autocomplete",{params:{q:n}});if(e&&e.length>0)return e}}return d}catch(t){throw t.response&&t.response.status,t}}},Yp=({isLoggedIn:e,hasRole:t,hasAnyRole:n,checkForRoleSearch:r})=>{const[s,a]=Y.useState(""),[i,o]=Y.useState([]),[l,c]=Y.useState(!1),[u,d]=Y.useState(-1),[h,f]=Y.useState(!1),[m,p]=Y.useState(!1),g=Y.useRef(null),y=()=>t(ap.SUPERADMIN)||t(ap.RECRUITER)||t(ap.TEACHER)||t(ap.STUDENT)||t(ap.HR)||t(ap.GUEST)||t(ap.ADMIN);Y.useEffect((()=>()=>{g.current&&clearTimeout(g.current)}),[]);const v=e=>{const t=r(e);return f(t),t};return{query:s,setQuery:a,suggestions:i,setSuggestions:o,showSuggestions:l,setShowSuggestions:c,activeSuggestion:u,setActiveSuggestion:d,isRoleSearch:h,setIsRoleSearch:f,isLoading:m,hasSpecialRole:y,handleInputChange:t=>{const n=t.target.value;a(n),v(n),d(-1),g.current&&clearTimeout(g.current),y()&&!l&&c(!0),g.current=setTimeout((()=>{(t=>{if(!e)return;const n=y();if(t.length<1)return o([]),n||c(!1),void p(!1);p(!0),Xp.getSuggestions(t).then((e=>{Array.isArray(e)?(o(e.slice(0,10)),c(!0)):(o([]),n||c(!1)),p(!1)})).catch((e=>{console.error("Error fetching suggestions:",e),o([]),n||c(!1),p(!1)}))})(n)}),300)},clearSearch:()=>{a(""),o([]),c(!1),f(!1)},fetchInitialSuggestions:async()=>{if(!e||!y())return;p(!0),o([]),c(!0);let r=[],s=[];t(ap.SUPERADMIN)?s=["a"]:t(ap.ADMIN)&&!t(ap.SUPERADMIN)?s=["tudiant","formateur","recruteur","admin"]:t(ap.RECRUITER)&&!t(ap.SUPERADMIN)?s=["formateur","tudiant"]:t(ap.TEACHER)&&!n([ap.ADMIN,ap.SUPERADMIN])?s=["tudiant","ressources humaines"]:t(ap.STUDENT)&&!n([ap.ADMIN,ap.SUPERADMIN,ap.TEACHER])?s=["formateur","tudiant","recruteur"]:t(ap.HR)&&!n([ap.ADMIN,ap.SUPERADMIN])?s=["tudiant","formateur","recruteur"]:t(ap.GUEST)&&(s=["recruteur"]);try{const e=10;for(const t of s){if(r.length>=e)break;const n=await Xp.getSuggestions(t);if(Array.isArray(n)&&n.length>0){const t=n.filter((e=>!r.some((t=>t.id===e.id))));t.length>0&&(r=[...r,...t],o(r.slice(0,e)))}}if(r.length<e){const t=["a","e","i","o","u"];for(const n of t){if(r.length>=e)break;const t=await Xp.getSuggestions(n);if(Array.isArray(t)&&t.length>0){const n=t.filter((e=>!r.some((t=>t.id===e.id))));n.length>0&&(r=[...r,...n],o(r.slice(0,e)))}}}if(r.length>0){let n=[];t(ap.RECRUITER)?n=["TEACHER","STUDENT"]:t(ap.TEACHER)?n=["STUDENT","HR"]:t(ap.STUDENT)||t(ap.HR)?n=["TEACHER","STUDENT","RECRUITER"]:t(ap.GUEST)&&(n=["RECRUITER"]),n.length>0?(r.sort(((e,t)=>{const r=e.roles&&e.roles.length>0?e.roles[0].replace(/^ROLE_/i,""):"",s=t.roles&&t.roles.length>0?t.roles[0].replace(/^ROLE_/i,""):"",a=n.indexOf(r),i=n.indexOf(s);return-1!==a&&-1!==i?a-i:-1!==a?-1:-1!==i?1:0})),o(r.slice(0,e))):o(r.slice(0,e))}}catch(a){console.error("Error during sequential searches:",a)}finally{p(!1),c(!0)}},updateIsRoleSearch:v}},Jp=({user:t,index:n,activeSuggestion:r,handleSuggestionClick:s,setActiveSuggestion:a})=>e.jsxs(_l.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0,backgroundColor:n===r?"rgba(82, 142, 178, 0.08)":"rgba(0,0,0,0)"},transition:{duration:.2,delay:.03*n},whileHover:{backgroundColor:"rgba(82, 142, 178, 0.08)"},onClick:e=>s(t,e),onMouseEnter:()=>a(n),className:Vm("flex items-center px-4 py-3 cursor-pointer transition-all hover:bg-blue-50/50 dark:hover:bg-blue-800/20",n===r?"bg-[rgba(82,142,178,0.08)] dark:bg-[rgba(120,185,221,0.15)]":""),role:"button",tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),s(t,e))},children:[e.jsx(te,{to:`/profile/${t.id}`,className:"flex-shrink-0 w-10 h-10 rounded-full bg-gradient-to-br from-[#02284f] to-[#528eb2] flex items-center justify-center mr-3 shadow-sm overflow-hidden",onClick:e=>e.stopPropagation(),tabIndex:-1,children:t.profilePictureUrl?e.jsx("img",{src:t.profilePictureUrl,alt:`${t.firstName} ${t.lastName}`,className:"w-full h-full object-cover rounded-full"}):e.jsx(Uc,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs(te,{to:`/profile/${t.id}`,className:"font-medium text-gray-800 truncate dark:text-white block hover:underline",onClick:e=>e.stopPropagation(),tabIndex:-1,children:[t.firstName," ",t.lastName]}),e.jsx("div",{className:"flex items-center mt-1",children:t.roles&&t.roles.length>0?e.jsxs("span",{className:Vm("inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",Gp(t.roles[0])),children:[Wp(t.roles[0]),Kp(t.roles[0])]}):e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-50 text-gray-700 dark:bg-gray-700 dark:text-gray-300",children:[e.jsx(Uc,{className:"w-3 h-3 mr-1 text-gray-600 dark:text-gray-400"}),"Utilisateur"]})})]}),e.jsx("button",{onClick:e=>s(t,e),className:"ml-2 text-[#528eb2] p-2 rounded-full hover:bg-blue-100 transition-colors dark:text-[#78b9dd] dark:hover:bg-blue-900/30","aria-label":`Voir le profil de ${t.firstName} ${t.lastName}`,children:e.jsx(jc,{className:"w-4 h-4"})})]},n),Zp=({suggestions:t,isRoleSearch:n,activeSuggestion:r,setActiveSuggestion:s,handleSuggestionClick:a,allowedSearchRoles:i,hasRole:o,hasAnyRole:l,suggestionsRef:c,query:u,containerWidth:d,dropdownPosition:h,handleKeyDown:f})=>e.jsx(_l.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{duration:.2,type:"spring",stiffness:500,damping:30},className:Vm("search-dropdown-portal overflow-hidden bg-white rounded-xl shadow-xl border border-gray-100","dark:bg-gray-800 dark:border-gray-700 dark:shadow-gray-900/70","max-h-[300px] md:max-h-[400px]"),style:{boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1)",zIndex:9999,position:"absolute",top:`${h.top}px`,left:`${h.left}px`,width:h.width?`${h.width}px`:d>0?`${d}px`:"100%"},tabIndex:-1,onKeyDown:f,children:0===t.length?e.jsx(eg,{isRoleSearch:n,hasRole:o,hasAnyRole:l,allowedSearchRoles:i}):e.jsxs("div",{className:"overflow-hidden",children:[e.jsx("div",{className:"px-3 py-2 bg-gray-50 border-b border-gray-100 dark:bg-gray-700 dark:border-gray-600",children:e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-300",children:[t.length," rsultat",t.length>1?"s":""," trouv",t.length>1?"s":"",n&&e.jsxs("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-purple-50 text-purple-700 dark:bg-purple-800/30 dark:text-purple-300",children:[e.jsx(Bl,{className:"w-3 h-3 mr-1"}),"Recherche par rle"]})]})}),e.jsx("div",{ref:c,className:"max-h-[250px] overflow-y-auto py-1 divide-y divide-gray-50 dark:divide-gray-700",children:t.map(((t,n)=>e.jsx(Jp,{user:t,index:n,activeSuggestion:r,handleSuggestionClick:a,setActiveSuggestion:s},t.id||n)))}),(o(ap.SUPERADMIN)||o(ap.RECRUITER)||o(ap.TEACHER)||o(ap.STUDENT)||o(ap.HR)||o(ap.GUEST)||o(ap.ADMIN))&&0===u.length&&e.jsx(tg,{hasRole:o,hasAnyRole:l,allowedSearchRoles:i})]})}),eg=({isRoleSearch:t,hasRole:n,hasAnyRole:r,allowedSearchRoles:s})=>e.jsx(_l.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"p-6 text-center",children:e.jsx("div",{className:"flex flex-col items-center justify-center",children:t?e.jsxs(e.Fragment,{children:[e.jsx(Bl,{className:"w-10 h-10 text-purple-300 dark:text-purple-400 mb-2"}),e.jsx("p",{className:"text-gray-500 font-medium dark:text-gray-300",children:"Aucun utilisateur trouv avec ce rle"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1 dark:text-gray-400",children:n(ap.ADMIN)&&!n(ap.SUPERADMIN)?e.jsxs(e.Fragment,{children:["En tant qu'Admin, vous ne pouvez pas rechercher les ",e.jsx("strong",{children:"super admins"}),". Essayez un autre rle."]}):n(ap.TEACHER)&&!r([ap.ADMIN,ap.SUPERADMIN])?e.jsxs(e.Fragment,{children:["En tant que Formateur, vous pouvez uniquement rechercher des ",e.jsx("strong",{children:"tudiants"})," et des personnes des ",e.jsx("strong",{children:"ressources humaines"})]}):n(ap.RECRUITER)&&!r([ap.ADMIN,ap.SUPERADMIN,ap.HR,ap.TEACHER])?e.jsxs(e.Fragment,{children:["En tant que Recruteur, vous pouvez uniquement rechercher des ",e.jsx("strong",{children:"tudiants"})," et des ",e.jsx("strong",{children:"formateurs"})]}):n(ap.HR)&&!r([ap.ADMIN,ap.SUPERADMIN])?e.jsxs(e.Fragment,{children:["En tant que RH, vous pouvez uniquement rechercher des ",e.jsx("strong",{children:"tudiants"}),", des ",e.jsx("strong",{children:"formateurs"})," et des ",e.jsx("strong",{children:"recruteurs"})]}):s.length>0?1===s.length?e.jsxs(e.Fragment,{children:["Vous pouvez uniquement rechercher des ",e.jsx("strong",{children:Hp(s[0]).toLowerCase()})]}):e.jsxs(e.Fragment,{children:["Essayez avec un autre rle : ",s.map((e=>Hp(e).toLowerCase())).join(", ")]}):e.jsx(e.Fragment,{children:"Essayez avec un autre terme de recherche"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(jc,{className:"w-10 h-10 text-gray-300 dark:text-gray-400 mb-2"}),e.jsx("p",{className:"text-gray-500 font-medium dark:text-gray-300",children:"Aucun utilisateur trouv"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1 dark:text-gray-400",children:n(ap.ADMIN)&&!n(ap.SUPERADMIN)?e.jsxs(e.Fragment,{children:["Essayez avec un autre terme ou recherchez par rle ( l'exception des ",e.jsx("strong",{children:"super admins"}),") : ",s.map((e=>Hp(e).toLowerCase())).join(", ")]}):n(ap.TEACHER)&&!r([ap.ADMIN,ap.SUPERADMIN])?e.jsxs(e.Fragment,{children:["Essayez avec un autre terme ou recherchez par rle : ",e.jsx("strong",{children:"tudiant"})," ou ",e.jsx("strong",{children:"ressources humaines"})]}):n(ap.RECRUITER)&&!r([ap.ADMIN,ap.SUPERADMIN,ap.HR,ap.TEACHER])?e.jsxs(e.Fragment,{children:["Essayez avec un autre terme ou recherchez par rle : ",e.jsx("strong",{children:"tudiant"})," ou ",e.jsx("strong",{children:"formateur"})]}):n(ap.HR)&&!r([ap.ADMIN,ap.SUPERADMIN])?e.jsxs(e.Fragment,{children:["Essayez avec un autre terme ou recherchez par rle : ",e.jsx("strong",{children:"tudiant"}),", ",e.jsx("strong",{children:"formateur"})," ou ",e.jsx("strong",{children:"recruteur"})]}):s.length>0?1===s.length?e.jsxs(e.Fragment,{children:["Essayez avec un autre terme ou recherchez par le rle ",e.jsx("strong",{children:Hp(s[0]).toLowerCase()})]}):e.jsxs(e.Fragment,{children:["Essayez avec un autre terme ou recherchez par rle : ",s.map((e=>Hp(e).toLowerCase())).join(", ")]}):e.jsx(e.Fragment,{children:"Essayez avec un autre terme de recherche"})})]})})}),tg=({hasRole:t,hasAnyRole:n,allowedSearchRoles:r})=>e.jsx("div",{className:"px-3 py-2 bg-gray-50 border-t border-gray-100 text-xs text-gray-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300",children:e.jsx("p",{children:t(ap.SUPERADMIN)?e.jsxs(e.Fragment,{children:["En tant que Super Admin, vous pouvez rechercher tous les utilisateurs par nom ou par rle : ",r.map((e=>"SUPERADMIN"!==e?Hp(e).toLowerCase():null)).filter(Boolean).join(", ")]}):t(ap.ADMIN)?e.jsxs(e.Fragment,{children:["En tant qu'Admin, vous pouvez rechercher tous les utilisateurs par nom ou par rle,  l'exception des ",e.jsx("strong",{children:"super admins"})," : ",r.map((e=>Hp(e).toLowerCase())).filter(Boolean).join(", ")]}):t(ap.RECRUITER)&&!t(ap.SUPERADMIN)?e.jsxs(e.Fragment,{children:["En tant que Recruteur, vous pouvez uniquement rechercher des ",e.jsx("strong",{children:"tudiants"})," et des ",e.jsx("strong",{children:"formateurs"})," par nom ou par rle"]}):t(ap.TEACHER)&&!n([ap.ADMIN,ap.SUPERADMIN])?e.jsxs(e.Fragment,{children:["En tant que Formateur, vous pouvez uniquement rechercher des ",e.jsx("strong",{children:"tudiants"})," et des personnes des ",e.jsx("strong",{children:"ressources humaines"})," par nom ou par rle"]}):t(ap.STUDENT)&&!n([ap.ADMIN,ap.SUPERADMIN,ap.TEACHER])?e.jsxs(e.Fragment,{children:["En tant qu'tudiant, vous pouvez rechercher des ",e.jsx("strong",{children:"formateurs"}),", ",e.jsx("strong",{children:"tudiants"}),", ",e.jsx("strong",{children:"recruteurs"}),", et ",e.jsx("strong",{children:"ressources humaines"})," par nom ou par rle"]}):t(ap.HR)&&!n([ap.ADMIN,ap.SUPERADMIN])?e.jsxs(e.Fragment,{children:["En tant que RH, vous pouvez uniquement rechercher des ",e.jsx("strong",{children:"tudiants"}),", des ",e.jsx("strong",{children:"formateurs"})," et des ",e.jsx("strong",{children:"recruteurs"})," par nom ou par rle"]}):t(ap.GUEST)?e.jsxs(e.Fragment,{children:["En tant qu'Invit, vous pouvez uniquement rechercher des ",e.jsx("strong",{children:"recruteurs"})," par nom ou par rle"]}):e.jsx(e.Fragment,{children:"Vous pouvez rechercher par nom ou par rle"})})}),ng=()=>{const t=Y.useRef(null),n=Y.useRef(null),r=Y.useRef(null),s=ee(),[a,i]=Y.useState(!1),[o,l]=Y.useState(0),[c,u]=Y.useState({top:0,left:0}),{allowedSearchRoles:d,isLoggedIn:h,isRoleSearch:f,checkForRoleSearch:m,hasRole:p,hasAnyRole:g}=Qp(),{query:y,setQuery:v,suggestions:b,setSuggestions:x,showSuggestions:w,setShowSuggestions:E,activeSuggestion:k,setActiveSuggestion:S,isLoading:N,hasSpecialRole:T,handleInputChange:C,clearSearch:j,fetchInitialSuggestions:R}=Yp({isLoggedIn:h,hasRole:p,hasAnyRole:g,checkForRoleSearch:m});Y.useEffect((()=>{const e=()=>{t.current&&l(t.current.offsetWidth)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[w]),Y.useEffect((()=>{const e=e=>{!t.current||t.current.contains(e.target)||e.target.closest(".search-dropdown-portal")||(E(!1),i(!1))};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}),[E]),Y.useEffect((()=>{if(k>=0&&r.current){const e=r.current.children[k];e&&e.scrollIntoView({behavior:"smooth",block:"nearest"})}}),[k]),Y.useEffect((()=>{if(w&&t.current){const e=()=>{const e=t.current.getBoundingClientRect();u({top:e.bottom+window.scrollY+8,left:e.left+window.scrollX,width:e.width})};return e(),window.addEventListener("scroll",e),window.addEventListener("resize",e),()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}}}),[w]);const A=async(e,t)=>{t&&(t.preventDefault(),t.stopPropagation());const r=e.id;if(r)try{jh.clearPublicProfileCache(r),v(`${e.firstName} ${e.lastName}`),x([]),E(!1),S(-1),n.current&&(n.current.disabled=!0),await s(`/profile/${r}`),n.current&&(n.current.disabled=!1)}catch(a){console.error("Navigation error:",a),window.location.href=`/profile/${r}`}else console.error("No user ID found in suggestion:",e)},_=e=>{"ArrowDown"===e.key?(e.preventDefault(),S((e=>e<b.length-1?e+1:e))):"ArrowUp"===e.key?(e.preventDefault(),S((e=>e>0?e-1:e))):"Enter"===e.key&&k>=0?(e.preventDefault(),b[k]&&A(b[k])):"Escape"===e.key&&(E(!1),n.current.blur())};return e.jsxs("div",{ref:t,className:"relative w-full max-w-md font-sans",style:{isolation:"isolate",position:"relative",zIndex:90},children:[e.jsxs("div",{className:Vm("relative flex items-center transition-all duration-300 rounded-full overflow-hidden","w-full",a?"ring-2 ring-[#528eb2]/50 dark:ring-[#78b9dd]/50":"",f?"ring-2 ring-purple-500/50 dark:ring-purple-400/50":"",h?"":"opacity-50"),children:[e.jsx("div",{className:"absolute left-3 text-white/60 dark:text-white/80 z-10",children:f?e.jsx(Bl,{className:"w-4 h-4 text-purple-400 dark:text-purple-300"}):e.jsx(jc,{className:"w-4 h-4"})}),e.jsx("input",{ref:n,className:Vm("w-full py-2 pl-10 pr-10 text-sm text-white bg-[#02284f]/80 border border-white/20","dark:bg-gray-800 dark:border-gray-600 dark:text-white","rounded-full transition-all duration-300","placeholder:text-white/50 dark:placeholder:text-white/70 focus:outline-none","md:placeholder:text-sm placeholder:text-xs",a?"bg-[#02284f]/90 dark:bg-gray-700 border-[#528eb2] dark:border-[#78b9dd]":"hover:bg-[#02284f]/90 dark:hover:bg-gray-700",f?"border-purple-500/30 dark:border-purple-400/30":""),type:"text",placeholder:h?"Rechercher par nom ou rle...":"Connectez-vous pour effectuer une recherche",value:y,onChange:C,onKeyDown:_,onFocus:()=>{h?(i(!0),T()?R():y.length>=1&&fetchSuggestions(y)):n.current.blur()},disabled:!h}),e.jsx(Be,{mode:"wait",children:y.length>0&&e.jsx(_l.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},whileTap:{scale:.9},onClick:()=>{j(),n.current.focus()},className:"absolute right-3 p-1 rounded-full text-white/60 hover:text-white hover:bg-white/10 transition-colors z-10",children:e.jsx(zc,{className:"w-3 h-3"})})}),N&&e.jsx("div",{className:"absolute right-10 z-10",children:e.jsx("div",{className:"w-3 h-3 border-2 border-t-transparent border-white/30 rounded-full animate-spin"})})]}),a&&0===y.length&&h&&!T()&&!w&&e.jsx("div",{className:"absolute top-full left-0 w-full mt-2 px-3 py-2 text-xs text-white/70 bg-[#02284f]/90 rounded-md dark:bg-gray-800 dark:text-gray-200",children:e.jsx("p",{children:d.length>0?1===d.length?e.jsxs(e.Fragment,{children:["Vous pouvez rechercher des ",e.jsx("strong",{className:"dark:text-white",children:Hp(d[0]).toLowerCase()})," par nom"]}):e.jsxs(e.Fragment,{children:["Vous pouvez rechercher par nom ou par rle (",e.jsx("span",{className:"dark:text-white",children:d.map((e=>Hp(e).toLowerCase())).join(", ")}),")"]}):e.jsx(e.Fragment,{children:"Vous pouvez rechercher par nom"})})}),!h&&a&&e.jsx("div",{className:"absolute top-full left-0 w-full mt-2 px-3 py-2 text-xs text-white/70 bg-[#02284f]/90 rounded-md dark:bg-gray-800 dark:text-gray-200",children:e.jsx("p",{children:"Vous devez tre connect pour effectuer une recherche."})}),w&&ne.createPortal(e.jsx(Be,{mode:"wait",children:e.jsx(Zp,{suggestions:b,isRoleSearch:f,activeSuggestion:k,setActiveSuggestion:S,handleSuggestionClick:A,allowedSearchRoles:d,hasRole:p,hasAnyRole:g,suggestionsRef:r,query:y,containerWidth:o,dropdownPosition:c,handleKeyDown:_})}),document.body)]})};function rg({className:t,...n}){return e.jsx("div",{className:Vm("animate-pulse rounded-md bg-muted",t),...n})}const sg=new class{constructor(){this.baseApiUrl="https://translation.googleapis.com/language/translate/v2",this.apiKey="AIzaSyBW-7idcfzMg7XM1nudszE_Uo4CMPPyWfU",this.projectId="bigproject-456311",this.translationCache=new Map}getOrigin(){return window.location.origin}getHeaders(){return{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest",Referer:this.getOrigin()}}getCacheKey(e,t,n=null){return`${e}|${t}${n?`|${n}`:""}`}isReactElement(e){return e&&("object"==typeof e&&"$$typeof"in e||"_owner"in e||"_store"in e||"props"in e)}cleanCircularReferences(e){if("object"!=typeof e||null===e)return e;if(this.isReactElement(e))return String(e);if(Array.isArray(e))return e.map((e=>this.cleanCircularReferences(e)));const t={};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=e[n];"object"==typeof r&&null!==r?this.isReactElement(r)?t[n]=String(r):t[n]=this.cleanCircularReferences(r):t[n]=r}return t}async translateText(e,t,n=null){try{if(!e)return"";"object"==typeof e&&(e=String(e));const r=this.getCacheKey(e,t,n);if(this.translationCache.has(r))return this.translationCache.get(r);const s=`${this.baseApiUrl}?key=${this.apiKey}`,a={q:e,target:t,format:"text"};n&&(a.source=n);const i=await fetch(s,{method:"POST",headers:this.getHeaders(),body:JSON.stringify(this.cleanCircularReferences(a))});if(!i.ok){const e=await i.json();throw console.error("Erreur de traduction dtaille:",e),new Error(e.error?.message||"Erreur de traduction")}const o=(await i.json()).data.translations[0].translatedText;return this.translationCache.set(r,o),o}catch(r){return console.error("Translation error:",r),e}}async detectLanguage(e){try{if(!e)return"";"object"==typeof e&&(e=String(e));const t=`${this.baseApiUrl}/detect?key=${this.apiKey}`,n=await fetch(t,{method:"POST",headers:this.getHeaders(),body:JSON.stringify(this.cleanCircularReferences({q:e}))});if(!n.ok){const e=await n.json();throw console.error("Erreur de dtection dtaille:",e),new Error(e.error?.message||"Erreur de dtection de langue")}return(await n.json()).data.detections[0][0].language}catch(t){throw console.error("Language detection error:",t),t}}async getAvailableLanguages(e="fr"){try{const t=`${this.baseApiUrl}/languages?key=${this.apiKey}&target=${e}`,n=await fetch(t,{method:"GET",headers:this.getHeaders()});if(!n.ok){const e=await n.json();throw console.error("Erreur de rcupration des langues dtaille:",e),new Error(e.error?.message||"Erreur lors de la rcupration des langues")}return(await n.json()).data.languages}catch(t){throw console.error("Error fetching languages:",t),t}}clearCache(){this.translationCache.clear()}},ag=Y.createContext(),ig="preferred_language";function og({children:t}){const[n,r]=Y.useState((()=>localStorage.getItem(ig)||"fr")),[s,a]=Y.useState(!1);Y.useEffect((()=>{const e=localStorage.getItem(ig);e&&e!==n&&r(e)}),[]);const i={currentLanguage:n,changeLanguage:async e=>{try{a(!0),localStorage.setItem(ig,e),zh.loading("Changement de langue en cours..."),setTimeout((()=>{window.location.reload()}),500)}catch(t){console.error("Error changing language:",t),zh.error("Erreur lors du changement de langue")}},translate:async(e,t=n)=>{if(!e)return"";try{return await sg.translateText(e,t)}catch(r){return console.error("Translation error:",r),e}},loading:s};return e.jsx(ag.Provider,{value:i,children:t})}function lg(){const e=Y.useContext(ag);if(!e)throw new Error("useTranslation must be used within a TranslationProvider");return e}const cg=[{code:"fr",name:"Franais"},{code:"en",name:"English"}],ug=()=>{const{currentLanguage:t,changeLanguage:n}=lg();return e.jsx("div",{className:"language-selector-wrapper",children:e.jsxs($m,{children:[e.jsx(Hm,{asChild:!0,children:e.jsx(qm,{variant:"ghost",size:"icon",className:"rounded-full w-10 h-10 p-0 bg-transparent text-gray-200 hover:bg-[#02284f]/80 hover:text-white",children:e.jsx(uc,{className:"h-5 w-5"})})}),e.jsx(Wm,{align:"end",className:"w-[160px] z-[101]",children:cg.map((r=>e.jsxs(Gm,{className:"navbar-dropdown-item "+(t===r.code?"bg-[#528eb2]/10":""),onClick:()=>n(r.code),children:[e.jsx("span",{className:"mr-2",children:r.code.toUpperCase()}),r.name]},r.code)))})]})})};var dg={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296==(64512&s)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},fg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],a=s+1<e.length,i=a?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,u=(3&t)<<4|i>>4;let d=(15&i)<<2|l>>6,h=63&l;o||(h=64,a||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(hg(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&a)}else if(s>239&&s<365){const a=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{const a=e[n++],i=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&a)<<6|63&i)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],a=s<e.length?n[e.charAt(s)]:0;++s;const i=s<e.length?n[e.charAt(s)]:64;++s;const o=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==a||null==i||null==o)throw new mg;const l=t<<2|a>>4;if(r.push(l),64!==i){const e=a<<4&240|i>>2;if(r.push(e),64!==o){const e=i<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class mg extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pg=function(e){return function(e){const t=hg(e);return fg.encodeByteArray(t,!0)}(e).replace(/\./g,"")};
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const gg=()=>
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,yg=()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&function(e){try{return fg.decodeString(e,!0)}catch(n){console.error("base64Decode failed: ",n)}return null}(e[1]);return t&&JSON.parse(t)},vg=()=>{try{return gg()||(()=>{if("undefined"==typeof process)return;const e=dg.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||yg()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},bg=e=>{const t=(e=>{var t,n;return null===(n=null===(t=vg())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},xg=()=>{var e;return null===(e=vg())||void 0===e?void 0:e.config};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class wg{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(){return!function(){var e;const t=null===(e=vg())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(n){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}class kg extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,kg.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sg.prototype.create)}}class Sg{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],a=s?function(e,t){return e.replace(Ng,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(s,n):"Error",i=`${this.serviceName}: ${a} (${r}).`;return new kg(r,i,n)}}const Ng=/\{\$([^}]+)}/g;function Tg(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],a=t[s];if(Cg(n)&&Cg(a)){if(!Tg(n,a))return!1}else if(n!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Cg(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(e){return e&&e._delegate?e._delegate:e}class Rg{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _g=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new wg;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService({instanceIdentifier:Ag})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(e=Ag){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=Ag){return this.instances.has(e)}getOptions(e=Ag){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,a]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&a.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===Ag?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(s){}var r;return n||null}normalizeInstanceIdentifier(e=Ag){return this.component?this.component.multipleInstances?e:Ag:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}};class Dg{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new _g(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ig;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ig||(Ig={}));const Pg={debug:Ig.DEBUG,verbose:Ig.VERBOSE,info:Ig.INFO,warn:Ig.WARN,error:Ig.ERROR,silent:Ig.SILENT},Mg=Ig.INFO,Lg={[Ig.DEBUG]:"log",[Ig.VERBOSE]:"log",[Ig.INFO]:"info",[Ig.WARN]:"warn",[Ig.ERROR]:"error"},Og=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),s=Lg[t];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[s](`[${r}]  ${e.name}:`,...n)};class Ug{constructor(e){this.name=e,this._logLevel=Mg,this._logHandler=Og,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ig))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?Pg[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ig.DEBUG,...e),this._logHandler(this,Ig.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ig.VERBOSE,...e),this._logHandler(this,Ig.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ig.INFO,...e),this._logHandler(this,Ig.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ig.WARN,...e),this._logHandler(this,Ig.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ig.ERROR,...e),this._logHandler(this,Ig.ERROR,...e)}}let Fg,zg;const Vg=new WeakMap,Bg=new WeakMap,qg=new WeakMap,$g=new WeakMap,Hg=new WeakMap;let Wg={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Bg.get(e);if("objectStoreNames"===t)return e.objectStoreNames||qg.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qg(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Gg(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(zg||(zg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Xg(this),t),Qg(Vg.get(this))}:function(...t){return Qg(e.apply(Xg(this),t))}:function(t,...n){const r=e.call(Xg(this),t,...n);return qg.set(r,t.sort?t.sort():[t]),Qg(r)}}function Kg(e){return"function"==typeof e?Gg(e):(e instanceof IDBTransaction&&function(e){if(Bg.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{t(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)}));Bg.set(e,t)}(e),t=e,(Fg||(Fg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,Wg):e);var t}function Qg(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{t(Qg(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",a)}));return t.then((t=>{t instanceof IDBCursor&&Vg.set(t,e)})).catch((()=>{})),Hg.set(t,e),t}(e);if($g.has(e))return $g.get(e);const t=Kg(e);return t!==e&&($g.set(e,t),Hg.set(t,e)),t}const Xg=e=>Hg.get(e);const Yg=["get","getKey","getAll","getAllKeys","count"],Jg=["put","add","delete","clear"],Zg=new Map;function ey(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Zg.get(t))return Zg.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=Jg.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!Yg.includes(n))return;const a=async function(e,...t){const a=this.transaction(e,s?"readwrite":"readonly");let i=a.store;return r&&(i=i.index(t.shift())),(await Promise.all([i[n](...t),s&&a.done]))[0]};return Zg.set(t,a),a}Wg=(e=>({...e,get:(t,n,r)=>ey(t,n)||e.get(t,n,r),has:(t,n)=>!!ey(t,n)||e.has(t,n)}))(Wg);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ty{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const ny="@firebase/app",ry="0.11.5",sy=new Ug("@firebase/app"),ay="@firebase/app-compat",iy="@firebase/analytics-compat",oy="@firebase/analytics",ly="@firebase/app-check-compat",cy="@firebase/app-check",uy="@firebase/auth",dy="@firebase/auth-compat",hy="@firebase/database",fy="@firebase/data-connect",my="@firebase/database-compat",py="@firebase/functions",gy="@firebase/functions-compat",yy="@firebase/installations",vy="@firebase/installations-compat",by="@firebase/messaging",xy="@firebase/messaging-compat",wy="@firebase/performance",Ey="@firebase/performance-compat",ky="@firebase/remote-config",Sy="@firebase/remote-config-compat",Ny="@firebase/storage",Ty="@firebase/storage-compat",Cy="@firebase/firestore",jy="@firebase/vertexai",Ry="@firebase/firestore-compat",Ay="firebase",_y="[DEFAULT]",Dy={[ny]:"fire-core",[ay]:"fire-core-compat",[oy]:"fire-analytics",[iy]:"fire-analytics-compat",[cy]:"fire-app-check",[ly]:"fire-app-check-compat",[uy]:"fire-auth",[dy]:"fire-auth-compat",[hy]:"fire-rtdb",[fy]:"fire-data-connect",[my]:"fire-rtdb-compat",[py]:"fire-fn",[gy]:"fire-fn-compat",[yy]:"fire-iid",[vy]:"fire-iid-compat",[by]:"fire-fcm",[xy]:"fire-fcm-compat",[wy]:"fire-perf",[Ey]:"fire-perf-compat",[ky]:"fire-rc",[Sy]:"fire-rc-compat",[Ny]:"fire-gcs",[Ty]:"fire-gcs-compat",[Cy]:"fire-fst",[Ry]:"fire-fst-compat",[jy]:"fire-vertex","fire-js":"fire-js",[Ay]:"fire-js-all"},Iy=new Map,Py=new Map,My=new Map;function Ly(e,t){try{e.container.addComponent(t)}catch(n){sy.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Oy(e){const t=e.name;if(My.has(t))return sy.debug(`There were multiple attempts to register component ${t}.`),!1;My.set(t,e);for(const n of Iy.values())Ly(n,e);for(const n of Py.values())Ly(n,e);return!0}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Uy=new Sg("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Fy{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Rg("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Uy.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zy(e,t={}){let n=e;if("object"!=typeof t){t={name:t}}const r=Object.assign({name:_y,automaticDataCollectionEnabled:!1},t),s=r.name;if("string"!=typeof s||!s)throw Uy.create("bad-app-name",{appName:String(s)});if(n||(n=xg()),!n)throw Uy.create("no-options");const a=Iy.get(s);if(a){if(Tg(n,a.options)&&Tg(r,a.config))return a;throw Uy.create("duplicate-app",{appName:s})}const i=new Dg(s);for(const l of My.values())i.addComponent(l);const o=new Fy(n,r,i);return Iy.set(s,o),o}function Vy(e,t,n){var r;let s=null!==(r=Dy[e])&&void 0!==r?r:e;n&&(s+=`-${n}`);const a=s.match(/\s|\//),i=t.match(/\s|\//);if(a||i){const e=[`Unable to register library "${s}" with version "${t}":`];return a&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&i&&e.push("and"),i&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void sy.warn(e.join(" "))}Oy(new Rg(`${s}-version`,(()=>({library:s,version:t})),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By="firebase-heartbeat-store";let qy=null;function $y(){return qy||(qy=function(e,t,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const i=indexedDB.open(e,t),o=Qg(i);return r&&i.addEventListener("upgradeneeded",(e=>{r(Qg(i.result),e.oldVersion,e.newVersion,Qg(i.transaction),e)})),n&&i.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{a&&e.addEventListener("close",(()=>a())),s&&e.addEventListener("versionchange",(e=>s(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(By)}catch(n){console.warn(n)}}}).catch((e=>{throw Uy.create("idb-open",{originalErrorMessage:e.message})}))),qy}async function Hy(e,t){try{const n=(await $y()).transaction(By,"readwrite"),r=n.objectStore(By);await r.put(t,Wy(e)),await n.done}catch(n){if(n instanceof kg)sy.warn(n.message);else{const e=Uy.create("idb-set",{originalErrorMessage:null==n?void 0:n.message});sy.warn(e.message)}}}function Wy(e){return`${e.name}!${e.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Qy(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ky();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){sy.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Ky(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const s of e){const e=n.find((e=>e.agent===s.agent));if(e){if(e.dates.push(s.date),Xy(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Xy(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=pg(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return sy.warn(t),""}}}function Ky(){return(new Date).toISOString().substring(0,10)}class Qy{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(e){return!1}}()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await $y()).transaction(By),n=await t.objectStore(By).get(Wy(e));return await t.done,n}catch(t){if(t instanceof kg)sy.warn(t.message);else{const e=Uy.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});sy.warn(e.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Hy(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Hy(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Xy(e){return pg(JSON.stringify({version:2,heartbeats:e})).length}var Yy;Yy="",Oy(new Rg("platform-logger",(e=>new ty(e)),"PRIVATE")),Oy(new Rg("heartbeat",(e=>new Gy(e)),"PRIVATE")),Vy(ny,ry,Yy),Vy(ny,ry,"esm2017"),Vy("fire-js","");var Jy,Zy,ev="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var e;
/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var a=e.g[3],i=t+(a^n&(s^a))+r[0]+3614090360&4294967295;i=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=n+(i<<7&4294967295|i>>>25))+((i=a+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|i>>>20))+((i=s+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^s&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|i>>>10))+((i=t+(a^n&(s^a))+r[4]+4118548399&4294967295)<<7&4294967295|i>>>25))+((i=a+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|i>>>20))+((i=s+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^s&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|i>>>10))+((i=t+(a^n&(s^a))+r[8]+1770035416&4294967295)<<7&4294967295|i>>>25))+((i=a+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|i>>>20))+((i=s+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^s&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|i>>>10))+((i=t+(a^n&(s^a))+r[12]+1804603682&4294967295)<<7&4294967295|i>>>25))+((i=a+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|i>>>20))+((i=s+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^s&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|i>>>10))+((i=t+(s^a&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|i>>>27))+((i=a+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|i>>>23))+((i=s+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|i>>>18))+((i=n+(a^t&(s^a))+r[0]+3921069994&4294967295)<<20&4294967295|i>>>12))+((i=t+(s^a&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|i>>>27))+((i=a+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|i>>>23))+((i=s+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|i>>>18))+((i=n+(a^t&(s^a))+r[4]+3889429448&4294967295)<<20&4294967295|i>>>12))+((i=t+(s^a&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|i>>>27))+((i=a+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|i>>>23))+((i=s+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|i>>>18))+((i=n+(a^t&(s^a))+r[8]+1163531501&4294967295)<<20&4294967295|i>>>12))+((i=t+(s^a&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|i>>>27))+((i=a+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|i>>>23))+((i=s+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|i>>>18))+((i=n+(a^t&(s^a))+r[12]+2368359562&4294967295)<<20&4294967295|i>>>12))+((i=t+(n^s^a)+r[5]+4294588738&4294967295)<<4&4294967295|i>>>28))+((i=a+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|i>>>21))+((i=s+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|i>>>16))+((i=n+(s^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|i>>>9))+((i=t+(n^s^a)+r[1]+2763975236&4294967295)<<4&4294967295|i>>>28))+((i=a+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|i>>>21))+((i=s+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|i>>>16))+((i=n+(s^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|i>>>9))+((i=t+(n^s^a)+r[13]+681279174&4294967295)<<4&4294967295|i>>>28))+((i=a+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|i>>>21))+((i=s+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|i>>>16))+((i=n+(s^a^t)+r[6]+76029189&4294967295)<<23&4294967295|i>>>9))+((i=t+(n^s^a)+r[9]+3654602809&4294967295)<<4&4294967295|i>>>28))+((i=a+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|i>>>21))+((i=s+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|i>>>16))+((i=n+(s^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|i>>>9))+((i=t+(s^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|i>>>26))+((i=a+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|i>>>22))+((i=s+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|i>>>17))+((i=n+(a^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|i>>>11))+((i=t+(s^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|i>>>26))+((i=a+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|i>>>22))+((i=s+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|i>>>17))+((i=n+(a^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|i>>>11))+((i=t+(s^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|i>>>26))+((i=a+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|i>>>22))+((i=s+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|i>>>17))+((i=n+(a^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|i>>>11))+((a=(t=n+((i=t+(s^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|i>>>26))+((i=a+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|i>>>22))^((s=a+((i=s+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|i>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(i<<21&4294967295|i>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+a&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var a=0|e[s];r&&a==t||(n[s]=a,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return t.prototype[n].apply(e,s)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,a=this.h,i=0;i<t;){if(0==a)for(;i<=r;)n(this,e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(s[a++]=e.charCodeAt(i++),a==this.blockSize){n(this,s),a=0;break}}else for(;i<t;)if(s[a++]=e[i++],a==this.blockSize){n(this,s),a=0;break}}this.h=a,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var s={};function a(e){return-128<=e&&128>e?function(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function i(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(i(-e));for(var t=[],n=1,s=0;e>=n;s++)t[s]=e/n|0,n*=4294967296;return new r(t,0)}var o=a(0),l=a(1),c=a(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],s=0;s<t;s++)n[s]=~e.g[s];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function m(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function p(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new p(o,o);if(d(e))return t=g(h(e),t),new p(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new p(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var s=v(n,1),a=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=a.add(r);0>=c.l(e)&&(s=s.add(n),a=c),r=v(r,1),n=v(n,1)}return t=f(e,s.j(t)),new p(s,t)}for(s=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(a=i(n)).j(t);d(c)||0<c.l(e);)c=(a=i(n-=r)).j(t);u(a)&&(a=l),s=s.add(a),e=f(e,c)}return new p(s,e)}function y(e){for(var t=e.g.length+1,n=[],s=0;s<t;s++)n[s]=e.i(s)<<1|e.i(s-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var s=e.g.length-n,a=[],i=0;i<s;i++)a[i]=0<t?e.i(i+n)>>>t|e.i(i+n+1)<<32-t:e.i(i+n);return new r(a,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=i(Math.pow(e,6)),n=this,r="";;){var s=g(n,t).g,a=((0<(n=f(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=s))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0,a=0;a<=t;a++){var i=s+(65535&this.i(a))+(65535&e.i(a)),o=(i>>>16)+(this.i(a)>>>16)+(e.i(a)>>>16);s=o>>>16,i&=65535,o&=65535,n[a]=o<<16|i}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return i(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var a=0;a<e.g.length;a++){var l=this.i(s)>>>16,f=65535&this.i(s),p=e.i(a)>>>16,g=65535&e.i(a);n[2*s+2*a]+=f*g,m(n,2*s+2*a),n[2*s+2*a+1]+=l*g,m(n,2*s+2*a+1),n[2*s+2*a+1]+=f*p,m(n,2*s+2*a+1),n[2*s+2*a+2]+=l*p,m(n,2*s+2*a+2)}for(s=0;s<t;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=t;s<2*t;s++)n[s]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)&e.i(s);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)|e.i(s);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)^e.i(s);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Zy=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=i,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=i(Math.pow(n,8)),s=o,a=0;a<t.length;a+=8){var l=Math.min(8,t.length-a),c=parseInt(t.substring(a,a+l),n);8>l?(l=i(Math.pow(n,l)),s=s.j(l).add(i(c))):s=(s=s.j(r)).add(i(c))}return s},Jy=r}).apply(void 0!==ev?ev:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var tv,nv,rv,sv,av,iv,ov,lv,cv="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof cv&&cv];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var a=0;a<e.length-1;a++){var i=e[a];if(!(i in s))break e;s=s[i]}(r=r(a=s[e=e[e.length-1]]))!=a&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,(function(e,t){return t}))}}));
/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
var r=r||{},s=this||self;function a(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function i(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return t.prototype[n].apply(e,s)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(a(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function m(e){return/^[\s\xa0]*$/.test(e)}function p(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=!(-1==p().indexOf("Gecko")||-1!=p().toLowerCase().indexOf("webkit")&&-1==p().indexOf("Edge")||-1!=p().indexOf("Trident")||-1!=p().indexOf("MSIE")||-1!=p().indexOf("Edge"));function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<x.length;t++)n=x[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function E(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function k(e){s.setTimeout((()=>{throw e}),0)}function S(){var e=R;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var N=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new T),(e=>e.reset()));class T{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,j=!1,R=new class{constructor(){this.h=this.g=null}add(e,t){const n=N.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},A=()=>{const e=s.Promise.resolve(void 0);C=()=>{e.then(_)}};var _=()=>{for(var e;e=S();){try{e.h.call(e.g)}catch(n){k(n)}var t=N;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}j=!1};function D(){this.s=this.s,this.C=this.C}function I(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}D.prototype.s=!1,D.prototype.ma=function(){this.s||(this.s=!0,this.N())},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},I.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function M(e,t){if(I.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var s=!0;break e}catch(a){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&M.aa.h.call(this)}}d(M,I);var L={2:"touch",3:"pen",4:"mouse"};M.prototype.h=function(){M.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var O="closure_listenable_"+(1e6*Math.random()|0),U=0;function F(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++U,this.da=this.fa=!1}function z(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function V(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],a=Array.prototype.indexOf.call(s,t,void 0);(r=0<=a)&&Array.prototype.splice.call(s,a,1),r&&(z(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function q(e,t,n,r){for(var s=0;s<e.length;++s){var a=e[s];if(!a.da&&a.listener==t&&a.capture==!!n&&a.ha==r)return s}return-1}V.prototype.add=function(e,t,n,r,s){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var i=q(e,t,r,s);return-1<i?(t=e[i],n||(t.fa=!1)):((t=new F(t,this.src,a,!!r,s)).fa=n,e.push(t)),t};var $="closure_lm_"+(1e6*Math.random()|0),H={};function W(e,t,n,r,s){if(Array.isArray(t)){for(var a=0;a<t.length;a++)W(e,t[a],n,r,s);return null}return n=Z(n),e&&e[O]?e.K(t,n,!!i(r)&&!!r.capture,s):function(e,t,n,r,s,a){if(!t)throw Error("Invalid event type");var o=i(s)?!!s.capture:!!s,l=Y(e);if(l||(e[$]=l=new V(e)),n=l.add(t,n,r,o,a),n.proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=X;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)P||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(Q(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}(e,t,n,!1,r,s)}function G(e,t,n,r,s){if(Array.isArray(t))for(var a=0;a<t.length;a++)G(e,t[a],n,r,s);else r=i(r)?!!r.capture:!!r,n=Z(n),e&&e[O]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=q(a=e.g[t],n,r,s))&&(z(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Y(e))&&(t=e.g[t.toString()],e=-1,t&&(e=q(t,n,r,s)),(n=-1<e?t[e]:null)&&K(n))}function K(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[O])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Q(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Y(t))?(B(n,e),0==n.h&&(n.src=null,t[$]=null)):z(e)}}}function Q(e){return e in H?H[e]:H[e]="on"+e}function X(e,t){if(e.da)e=!0;else{t=new M(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&K(e),e=n.call(r,t)}return e}function Y(e){return(e=e[$])instanceof V?e:null}var J="__closure_events_fn_"+(1e9*Math.random()>>>0);function Z(e){return"function"==typeof e?e:(e[J]||(e[J]=function(t){return e.handleEvent(t)}),e[J])}function ee(){D.call(this),this.i=new V(this),this.M=this,this.F=null}function te(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"==typeof t)t=new I(t,e);else if(t instanceof I)t.target=t.target||e;else{var s=t;w(t=new I(r,e),s)}if(s=!0,n)for(var a=n.length-1;0<=a;a--){var i=t.g=n[a];s=ne(i,r,!0,t)&&s}if(s=ne(i=t.g=e,r,!0,t)&&s,s=ne(i,r,!1,t)&&s,n)for(a=0;a<n.length;a++)s=ne(i=t.g=n[a],r,!1,t)&&s}function ne(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,a=0;a<t.length;++a){var i=t[a];if(i&&!i.da&&i.capture==n){var o=i.listener,l=i.ha||i.src;i.fa&&B(e.i,i),s=!1!==o.call(l,r)&&s}}return s&&!r.defaultPrevented}function re(e,t,n){if("function"==typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function se(e){e.g=re((()=>{e.g=null,e.i&&(e.i=!1,se(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ee,D),ee.prototype[O]=!0,ee.prototype.removeEventListener=function(e,t,n,r){G(this,e,t,n,r)},ee.prototype.N=function(){if(ee.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)z(n[r]);delete t.g[e],t.h--}}this.F=null},ee.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ee.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends D{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:se(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ie(e){D.call(this),this.h=e,this.g={}}d(ie,D);var oe=[];function le(e){v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&K(e)}),e),e.g={}}ie.prototype.N=function(){ie.aa.N.call(this),le(this)},ie.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ce=s.JSON.stringify,ue=s.JSON.parse,de=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function he(){}function fe(e){return e.h||(e.h=e.i())}function me(){}he.prototype.h=null;var pe={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ge(){I.call(this,"d")}function ye(){I.call(this,"c")}d(ge,I),d(ye,I);var ve={},be=null;function xe(){return be=be||new ee}function we(e){I.call(this,ve.La,e)}function Ee(e){const t=xe();te(t,new we(t))}function ke(e,t){I.call(this,ve.STAT_EVENT,e),this.stat=t}function Se(e){const t=xe();te(t,new ke(t,e))}function Ne(e,t){I.call(this,ve.Ma,e),this.size=t}function Te(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout((function(){e()}),t)}function Ce(){this.g=!0}function je(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var a=s[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var i=1;i<s.length;i++)s[i]=""}}}return ce(n)}catch(o){return t}}(e,n)+(r?" "+r:"")}))}ve.La="serverreachability",d(we,I),ve.STAT_EVENT="statevent",d(ke,I),ve.Ma="timingevent",d(Ne,I),Ce.prototype.xa=function(){this.g=!1},Ce.prototype.info=function(){};var Re,Ae={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_e={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function De(){}function Ie(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new ie(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pe}function Pe(){this.i=null,this.g="",this.h=!1}d(De,he),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},Re=new De;var Me={},Le={};function Oe(e,t,n){e.L=1,e.v=ct(st(t)),e.m=n,e.P=!0,Ue(e,null)}function Ue(e,t){e.F=Date.now(),Ve(e),e.A=st(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),kt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Pe,e.g=dn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(oe[0]=s.toString()),s=oe);for(var a=0;a<s.length;a++){var i=W(n,s[a],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ee(),function(e,t,n,r,s,a){e.info((function(){if(e.g)if(a)for(var i="",o=a.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");i=2<=d.length&&"type"==d[1]?i+(u+"=")+c+"&":i+(u+"=redacted&")}}else i=null;else i=a;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+i}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Fe(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function ze(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Le:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Le:(t=t.slice(r,r+n),e.C=r+n,t))}function Ve(e){e.S=Date.now()+e.I,Be(e,e.I)}function Be(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Te(c(e.ba,e),t)}function qe(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function $e(e){0==e.j.G||e.J||an(e.j,e)}function He(e){qe(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,le(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function We(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ye(n.h,e)))if(!e.K&&Ye(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;sn(n),Kt(n)}tn(n),Se(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=Te(c(n.Za,n),6e3));if(1>=Xe(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else ln(n,11)}else if((e.K||n.g==e)&&sn(n),!m(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=c[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var a=r.h;a.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(Je(a,a.h),a.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,lt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var i=e;if((r=n).qa=un(r,r.J?r.ia:null,r.W),i.K){Ze(r.h,i);var o=i,l=r.L;l&&(o.I=l),o.B&&(qe(o),Ve(o)),r.g=i}else en(r);0<n.i.length&&Xt(n)}else"stop"!=c[0]&&"close"!=c[0]||ln(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?ln(n,7):Gt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ee()}catch(u){}}Ie.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==qt(e)?t.j():this.Y(e)},Ie.prototype.Y=function(e){try{if(e==this.g)e:{const h=qt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||$t(this.g)))){this.J||4!=h||7==t||Ee(),qe(this);var n=this.g.Z();this.X=n;t:if(Fe(this)){var r=$t(this.g);e="";var a=r.length,i=4==qt(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){He(this),$e(this);var o="";break t}this.h.i=new s.TextDecoder}for(t=0;t<a;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(i&&t==a-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,a,i){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+a+" "+i}))}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!m(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Se(12),He(this),$e(this);break e}je(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,We(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=ze(this,o),e==Le){4==h&&(this.s=4,Se(14),n=!1),je(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,Se(15),je(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}je(this.i,this.l,e,null),We(this,e)}if(Fe(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,Se(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),nn(d),d.M=!0,Se(11))}}else je(this.i,this.l,o,"[Invalid Chunked Response]"),He(this),$e(this)}else je(this.i,this.l,o,null),We(this,o);4==h&&He(this),this.o&&!this.J&&(4==h?an(this.j,this):(this.o=!1,Ve(this)))}else(function(e){const t={};e=(e.g&&2<=qt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(m(e[r]))continue;var n=E(e[r]);const s=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const a=t[s]||[];t[s]=a,a.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Se(12)):(this.s=0,Se(13)),He(this),$e(this)}}}catch(h){}},Ie.prototype.cancel=function(){this.J=!0,He(this)},Ie.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Ee(),Se(17)),He(this),this.s=2,$e(this)):Be(this,this.S-e)};var Ge=class{constructor(e,t){this.g=e,this.map=t}};function Ke(e){this.l=e||10,s.PerformanceNavigationTiming?e=0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Xe(e){return e.h?1:e.g?e.g.size:0}function Ye(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Je(e,t){e.g?e.g.add(t):e.h=t}function Ze(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function et(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function tt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(a(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(a(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(a(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,i=0;i<s;i++)t.call(void 0,r[i],n&&n[i],e)}Ke.prototype.cancel=function(){if(this.i=et(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var nt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof rt){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,it(this,e.s),this.l=e.l;var t=e.i,n=new bt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ot(this,n),this.m=e.m}else e&&(t=String(e).match(nt))?(this.h=!1,at(this,t[1]||"",!0),this.o=ut(t[2]||""),this.g=ut(t[3]||"",!0),it(this,t[4]),this.l=ut(t[5]||"",!0),ot(this,t[6]||"",!0),this.m=ut(t[7]||"")):(this.h=!1,this.i=new bt(null,this.h))}function st(e){return new rt(e)}function at(e,t,n){e.j=n?ut(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function it(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ot(e,t,n){t instanceof bt?(e.i=t,function(e,t){t&&!e.j&&(xt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(wt(this,t),kt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=dt(t,yt)),e.i=new bt(t,e.h))}function lt(e,t,n){e.i.set(t,n)}function ct(e){return lt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ut(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function dt(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,ht),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ht(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}rt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(dt(t,mt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(dt(t,mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(dt(n,"/"==n.charAt(0)?gt:pt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",dt(n,vt)),e.join("")};var ft,mt=/[#\/\?@]/g,pt=/[#\?:]/g,gt=/[#\?]/g,yt=/[#\?@]/g,vt=/#/g;function bt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function xt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var a=e[n].substring(0,r);s=e[n].substring(r+1)}else a=e[n];t(a,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function wt(e,t){xt(e),t=St(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Et(e,t){return xt(e),t=St(e,t),e.g.has(t)}function kt(e,t,n){wt(e,t),0<n.length&&(e.i=null,e.g.set(St(e,t),h(n)),e.h+=n.length)}function St(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Nt(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(a){}}function Tt(){this.g=new de}function Ct(e,t,n){const r=n||"";try{tt(e,(function(e,n){let s=e;i(e)&&(s=ce(e)),t.push(r+n+"="+encodeURIComponent(s))}))}catch(s){throw t.push(r+"type="+encodeURIComponent("_badmap")),s}}function jt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Rt(e,t){ee.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function At(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function _t(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Dt(e)}function Dt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function It(e){let t="";return v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Pt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=It(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):lt(e,t,n))}function Mt(e){ee.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=bt.prototype).add=function(e,t){xt(this),this.i=null,e=St(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){xt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){xt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){xt(this);let t=[];if("string"==typeof e)Et(this,e)&&(t=t.concat(this.g.get(St(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return xt(this),this.i=null,Et(this,e=St(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const a=encodeURIComponent(String(r)),i=this.V(r);for(r=0;r<i.length;r++){var s=a;""!==i[r]&&(s+="="+encodeURIComponent(String(i[r]))),e.push(s)}}return this.i=e.join("&")},d(jt,he),jt.prototype.g=function(){return new Rt(this.l,this.j)},jt.prototype.i=(ft={},function(){return ft}),d(Rt,ee),(e=Rt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Dt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,_t(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Dt(this)),this.g&&(this.readyState=3,Dt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;At(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?_t(this):Dt(this),3==this.readyState&&At(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,_t(this))},e.Qa=function(e){this.g&&(this.response=e,_t(this))},e.ga=function(){this.g&&_t(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Rt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Mt,ee);var Lt=/^https?$/i,Ot=["POST","PUT"];function Ut(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Ft(e),Vt(e)}function Ft(e){e.A||(e.A=!0,te(e,"complete"),te(e,"error"))}function zt(e){if(e.h&&void 0!==r&&(!e.v[1]||4!=qt(e)||2!=e.Z()))if(e.u&&4==qt(e))re(e.Ea,0,e);else if(te(e,"readystatechange"),4==qt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var a;if(a=0===r){var i=String(e.D).match(nt)[1]||null;!i&&s.self&&s.self.location&&(i=s.self.location.protocol.slice(0,-1)),a=!Lt.test(i?i.toLowerCase():"")}n=a}if(n)te(e,"complete"),te(e,"success");else{e.m=6;try{var o=2<qt(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Ft(e)}}finally{Vt(e)}}}function Vt(e,t){if(e.g){Bt(e);const r=e.g,s=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||te(e,"ready");try{r.onreadystatechange=s}catch(n){}}}function Bt(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function qt(e){return e.g?e.g.readyState:0}function $t(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Ht(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Wt(e){this.Aa=0,this.i=[],this.j=new Ce,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ht("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ht("baseRetryDelayMs",5e3,e),this.cb=Ht("retryDelaySeedMs",1e4,e),this.Wa=Ht("forwardChannelMaxRetries",2,e),this.wa=Ht("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ke(e&&e.concurrentRequestLimit),this.Da=new Tt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Gt(e){if(Qt(e),3==e.G){var t=e.U++,n=st(e.I);if(lt(n,"SID",e.K),lt(n,"RID",t),lt(n,"TYPE","terminate"),Jt(e,n),(t=new Ie(e,e.j,t)).L=2,t.v=ct(st(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=dn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Ve(t)}cn(e)}function Kt(e){e.g&&(nn(e),e.g.cancel(),e.g=null)}function Qt(e){Kt(e),e.u&&(s.clearTimeout(e.u),e.u=null),sn(e),e.h.cancel(),e.s&&("number"==typeof e.s&&s.clearTimeout(e.s),e.s=null)}function Xt(e){if(!Qe(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||A(),j||(C(),j=!0),R.add(t,e),e.B=0}}function Yt(e,t){var n;n=t?t.l:e.U++;const r=st(e.I);lt(r,"SID",e.K),lt(r,"RID",n),lt(r,"AID",e.T),Jt(e,r),e.m&&e.o&&Pt(r,e.m,e.o),n=new Ie(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=Zt(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),Je(e.h,n),Oe(n,r,t)}function Jt(e,t){e.H&&v(e.H,(function(e,n){lt(t,n,e)})),e.l&&tt({},(function(e,n){lt(t,n,e)}))}function Zt(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let i=!0;for(let o=0;o<n;o++){let n=s[o].g;const l=s[o].map;if(n-=t,0>n)t=Math.max(0,s[o].g-100),i=!1;else try{Ct(l,e,"req"+n+"_")}catch(a){r&&r(l)}}if(i){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function en(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||A(),j||(C(),j=!0),R.add(t,e),e.v=0}}function tn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Te(c(e.Fa,e),on(e,e.v)),e.v++,!0)}function nn(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function rn(e){e.g=new Ie(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=st(e.qa);lt(t,"RID","rpc"),lt(t,"SID",e.K),lt(t,"AID",e.T),lt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&lt(t,"TO",e.ja),lt(t,"TYPE","xmlhttp"),Jt(e,t),e.m&&e.o&&Pt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ct(st(t)),n.m=null,n.P=!0,Ue(n,e)}function sn(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function an(e,t){var n=null;if(e.g==t){sn(e),nn(e),e.g=null;var r=2}else{if(!Ye(e.h,t))return;n=t.D,Ze(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;te(r=xe(),new Ne(r,n)),Xt(e)}else en(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!(Xe(e.h)>=e.h.j-(e.s?1:0)||(e.s?(e.i=t.D.concat(e.i),0):1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa)||(e.s=Te(c(e.Ga,e,t),on(e,e.B)),e.B++,0)))}(e,t)||2==r&&tn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:ln(e,5);break;case 4:ln(e,10);break;case 3:ln(e,6);break;default:ln(e,2)}}function on(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function ln(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new rt(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||at(r,"https"),ct(r),t?function(e,t){const n=new Ce;if(s.Image){const r=new Image;r.onload=u(Nt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Nt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Nt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Nt,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ce;const n=new AbortController,r=setTimeout((()=>{n.abort(),Nt(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Nt(0,0,!0,t):Nt(0,0,!1,t)})).catch((()=>{clearTimeout(r),Nt(0,0,!1,t)}))}(r.toString(),n)}else Se(2);e.G=0,e.l&&e.l.sa(t),cn(e),Qt(e)}function cn(e){if(e.G=0,e.ka=[],e.l){const t=et(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function un(e,t,n){var r=n instanceof rt?st(n):new rt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),it(r,r.s);else{var a=s.location;r=a.protocol,t=t?t+"."+a.hostname:a.hostname,a=+a.port;var i=new rt(null);r&&at(i,r),t&&(i.g=t),a&&it(i,a),n&&(i.l=n),r=i}return n=e.D,t=e.ya,n&&t&&lt(r,n,t),lt(r,"VER",e.la),Jt(e,r),r}function dn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Mt(new jt({eb:n})):new Mt(e.pa)).Ha(e.J),t}function hn(){}function fn(){}function mn(e,t){ee.call(this),this.g=new Wt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!m(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!m(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new yn(this)}function pn(e){ge.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function gn(){ye.call(this),this.status=1}function yn(e){this.g=e}(e=Mt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Re.g(),this.v=this.o?fe(this.o):fe(Re),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(i){return void Ut(this,i)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var a in r)n.set(a,r[a]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),a=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Ot,t,void 0))||r||a||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bt(this),this.u=!0,this.g.send(e),this.u=!1}catch(i){Ut(this,i)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,te(this,"complete"),te(this,"abort"),Vt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vt(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?zt(this):this.bb())},e.bb=function(){zt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch(ft){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(ft){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ue(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(e=Wt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Se(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=un(this,null,this.W),Xt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new Ie(this,this.j,e);let a=this.o;if(this.S&&(a?(a=b(a),w(a,this.S)):a=this.S),null!==this.m||this.O||(s.H=a,a=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Zt(this,s,t),lt(n=st(this.I),"RID",e),lt(n,"CVER",22),this.D&&lt(n,"X-HTTP-Session-Id",this.D),Jt(this,n),a&&(this.O?t="headers="+encodeURIComponent(String(It(a)))+"&"+t:this.m&&Pt(n,this.m,a)),Je(this.h,s),this.Ua&&lt(n,"TYPE","init"),this.P?(lt(n,"$req",t),lt(n,"SID","null"),s.T=!0,Oe(s,n,null)):Oe(s,n,t),this.G=2}}else 3==this.G&&(e?Yt(this,e):0==this.i.length||Qe(this.h)||Yt(this))},e.Fa=function(){if(this.u=null,rn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Te(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Se(10),Kt(this),rn(this))},e.Za=function(){null!=this.C&&(this.C=null,Kt(this),tn(this),Se(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Se(2)):(this.j.info("Failed to ping google.com"),Se(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=hn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},fn.prototype.g=function(e,t){return new mn(e,t)},d(mn,ee),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Gt(this.g)},mn.prototype.o=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=ce(e),e=n);t.i.push(new Ge(t.Ya++,e)),3==t.G&&Xt(t)},mn.prototype.N=function(){this.g.l=null,delete this.j,Gt(this.g),delete this.g,mn.aa.N.call(this)},d(pn,ge),d(gn,ye),d(yn,hn),yn.prototype.ua=function(){te(this.g,"a")},yn.prototype.ta=function(e){te(this.g,new pn(e))},yn.prototype.sa=function(e){te(this.g,new gn)},yn.prototype.ra=function(){te(this.g,"b")},fn.prototype.createWebChannel=fn.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,lv=function(){return new fn},ov=function(){return xe()},iv=ve,av={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ae.NO_ERROR=0,Ae.TIMEOUT=8,Ae.HTTP_ERROR=6,sv=Ae,_e.COMPLETE="complete",rv=_e,me.EventType=pe,pe.OPEN="a",pe.CLOSE="b",pe.ERROR="c",pe.MESSAGE="d",ee.prototype.listen=ee.prototype.K,nv=me,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,tv=Mt}).apply(void 0!==cv?cv:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const uv="@firebase/firestore",dv="4.7.11";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hv.UNAUTHENTICATED=new hv(null),hv.GOOGLE_CREDENTIALS=new hv("google-credentials-uid"),hv.FIRST_PARTY=new hv("first-party-uid"),hv.MOCK_USER=new hv("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let fv="11.6.1";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv=new Ug("@firebase/firestore");function pv(){return mv.logLevel}function gv(e,...t){if(mv.logLevel<=Ig.DEBUG){const n=t.map(bv);mv.debug(`Firestore (${fv}): ${e}`,...n)}}function yv(e,...t){if(mv.logLevel<=Ig.ERROR){const n=t.map(bv);mv.error(`Firestore (${fv}): ${e}`,...n)}}function vv(e,...t){if(mv.logLevel<=Ig.WARN){const n=t.map(bv);mv.warn(`Firestore (${fv}): ${e}`,...n)}}function bv(e){if("string"==typeof e)return e;try{
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,wv(e,r,n)}function wv(e,t,n){let r=`FIRESTORE (${fv}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw yv(r),new Error(r)}function Ev(e,t,n,r){let s="Unexpected state";"string"==typeof n?s=n:r=n,e||wv(t,s,r)}function kv(e,t){return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Nv extends kg{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(hv.UNAUTHENTICATED)))}shutdown(){}}class Rv{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Av{constructor(e){this.t=e,this.currentUser=hv.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ev(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new Tv;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Tv,e.enqueueRetryable((()=>r(this.currentUser)))};const a=()=>{const t=s;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},i=e=>{gv("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((e=>i(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?i(e):(gv("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Tv)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(gv("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ev("string"==typeof t.accessToken,31837,{l:t}),new Cv(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ev(null===e||"string"==typeof e,2055,{h:e}),new hv(e)}}class _v{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=hv.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Dv{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new _v(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(hv.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Iv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Pv{constructor(e,t){var n;this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,null!=(n=e)&&void 0!==n.settings&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ev(void 0===this.o,3512);const n=e=>{null!=e.error&&gv("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.m;return this.m=e.token,gv("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{gv("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):gv("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Iv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Ev("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new Iv(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(){return new TextEncoder}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Mv(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Uv(e,t){return e<t?-1:e>t?1:0}function Fv(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),s=t.codePointAt(n);if(r!==s){if(r<128&&s<128)return Uv(r,s);{const a=Lv(),i=Vv(a.encode(zv(e,n)),a.encode(zv(t,n)));return 0!==i?i:Uv(r,s)}}n+=r>65535?2:1}return Uv(e.length,t.length)}function zv(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function Vv(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Uv(e[n],t[n]);return Uv(e.length,t.length)}function Bv(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv=-62135596800,$v=1e6;class Hv{static now(){return Hv.fromMillis(Date.now())}static fromDate(e){return Hv.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*$v);return new Hv(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Nv(Sv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Nv(Sv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<qv)throw new Nv(Sv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Nv(Sv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$v}_compareTo(e){return this.seconds===e.seconds?Uv(this.nanoseconds,e.nanoseconds):Uv(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-qv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{static fromTimestamp(e){return new Wv(e)}static min(){return new Wv(new Hv(0,0))}static max(){return new Wv(new Hv(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="__name__";class Kv{constructor(e,t,n){void 0===t?t=0:t>e.length&&xv(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&xv(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Kv.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Kv?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Kv.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Uv(e.length,t.length)}static compareSegments(e,t){const n=Kv.isNumericId(e),r=Kv.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Kv.extractNumericId(e).compare(Kv.extractNumericId(t)):Fv(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Jy.fromString(e.substring(4,e.length-2))}}class Qv extends Kv{construct(e,t,n){return new Qv(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Nv(Sv.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new Qv(t)}static emptyPath(){return new Qv([])}}const Xv=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yv extends Kv{construct(e,t,n){return new Yv(e,t,n)}static isValidIdentifier(e){return Xv.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yv.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Gv}static keyField(){return new Yv([Gv])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new Nv(Sv.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let a=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Nv(Sv.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Nv(Sv.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(a=!a,r++):"."!==t||a?(n+=t,r++):(s(),r++)}if(s(),a)throw new Nv(Sv.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yv(t)}static emptyPath(){return new Yv([])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e){this.path=e}static fromPath(e){return new Jv(Qv.fromString(e))}static fromName(e){return new Jv(Qv.fromString(e).popFirst(5))}static empty(){return new Jv(Qv.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Qv.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Qv.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Jv(new Qv(e.slice()))}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(e){return new eb(e.readTime,e.key,-1)}class eb{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new eb(Wv.min(),Jv.empty(),-1)}static max(){return new eb(Wv.max(),Jv.empty(),-1)}}function tb(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Jv.comparator(e.documentKey,t.documentKey),0!==n?n:Uv(e.largestBatchId,t.largestBatchId)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)}class nb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rb(e){if(e.code!==Sv.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;gv("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xv(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new sb(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof sb?t:sb.resolve(t)}catch(e){return sb.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):sb.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):sb.reject(t)}static resolve(e){return new sb(((t,n)=>{t(e)}))}static reject(e){return new sb(((t,n)=>{n(e)}))}static waitFor(e){return new sb(((t,n)=>{let r=0,s=0,a=!1;e.forEach((e=>{++r,e.next((()=>{++s,a&&s===r&&t()}),(e=>n(e)))})),a=!0,s===r&&t()}))}static or(e){let t=sb.resolve(!1);for(const n of e)t=t.next((e=>e?sb.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new sb(((n,r)=>{const s=e.length,a=new Array(s);let i=0;for(let o=0;o<s;o++){const l=o;t(e[l]).next((e=>{a[l]=e,++i,i===s&&n(a)}),(e=>r(e)))}}))}static doWhile(e,t){return new sb(((n,r)=>{const s=()=>{!0===e()?t().next((()=>{s()}),r):n()};s()}))}}function ab(e){return"IndexedDbTransactionError"===e.name}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ue(e),this.ce=e=>t.writeSequenceNumber(e))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}ib.le=-1;function ob(e){return null==e}function lb(e){return 0===e&&1/e==-1/0}function cb(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const t=e.charAt(s);switch(t){case"\0":n+="";break;case"":n+="";break;default:n+=t}}return n}function ub(e){return e+""}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function hb(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function fb(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e,t){this.comparator=e,this.root=t||gb.EMPTY}insert(e,t){return new mb(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,gb.BLACK,null,null))}remove(e){return new mb(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gb.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pb(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pb(this.root,e,this.comparator,!1)}getReverseIterator(){return new pb(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pb(this.root,e,this.comparator,!0)}}class pb{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gb{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:gb.RED,this.left=null!=r?r:gb.EMPTY,this.right=null!=s?s:gb.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new gb(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return gb.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return gb.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gb.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gb.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xv(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xv(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xv(27949);return e+(this.isRed()?0:1)}}gb.EMPTY=null,gb.RED=!0,gb.BLACK=!1,gb.EMPTY=new class{constructor(){this.size=0}get key(){throw xv(57766)}get value(){throw xv(16141)}get color(){throw xv(16727)}get left(){throw xv(29726)}get right(){throw xv(36894)}copy(e,t,n,r,s){return this}insert(e,t,n){return new gb(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class yb{constructor(e){this.comparator=e,this.data=new mb(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new vb(this.data.getIterator())}getIteratorFrom(e){return new vb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof yb))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new yb(this.comparator);return t.data=e,t}}class vb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e){this.fields=e,e.sort(Yv.comparator)}static empty(){return new bb([])}unionWith(e){let t=new yb(Yv.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new bb(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Bv(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new xb("Invalid base64 string: "+e):e}}(e);return new wb(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new wb(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Uv(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wb.EMPTY_BYTE_STRING=new wb("");const Eb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kb(e){if(Ev(!!e,39018),"string"==typeof e){let t=0;const n=Eb.exec(e);if(Ev(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Sb(e.seconds),nanos:Sb(e.nanos)}}function Sb(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Nb(e){return"string"==typeof e?wb.fromBase64String(e):wb.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb="server_timestamp",Cb="__type__",jb="__previous_value__",Rb="__local_write_time__";function Ab(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Cb])||void 0===n?void 0:n.stringValue)===Tb}function _b(e){const t=e.mapValue.fields[jb];return Ab(t)?_b(t):t}function Db(e){const t=kb(e.mapValue.fields[Rb].timestampValue);return new Hv(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e,t,n,r,s,a,i,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=i,this.longPollingOptions=o,this.useFetchStreams=l}}const Pb="(default)";class Mb{constructor(e,t){this.projectId=e,this.database=t||Pb}static empty(){return new Mb("","")}get isDefaultDatabase(){return this.database===Pb}isEqual(e){return e instanceof Mb&&e.projectId===this.projectId&&e.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb="__type__",Ob="__max__",Ub={},Fb="__vector__",zb="value";function Vb(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ab(e)?4:function(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Ob}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)?9007199254740991:function(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Lb])||void 0===n?void 0:n.stringValue)===Fb}(e)?10:11:xv(28295,{value:e})}function Bb(e,t){if(e===t)return!0;const n=Vb(e);if(n!==Vb(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Db(e).isEqual(Db(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=kb(e.timestampValue),r=kb(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Nb(e.bytesValue).isEqual(Nb(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Sb(e.geoPointValue.latitude)===Sb(t.geoPointValue.latitude)&&Sb(e.geoPointValue.longitude)===Sb(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Sb(e.integerValue)===Sb(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Sb(e.doubleValue),r=Sb(t.doubleValue);return n===r?lb(n)===lb(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Bv(e.arrayValue.values||[],t.arrayValue.values||[],Bb);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(db(n)!==db(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!Bb(n[s],r[s])))return!1;return!0}(e,t);default:return xv(52216,{left:e})}}function qb(e,t){return void 0!==(e.values||[]).find((e=>Bb(e,t)))}function $b(e,t){if(e===t)return 0;const n=Vb(e),r=Vb(t);if(n!==r)return Uv(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Uv(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Sb(e.integerValue||e.doubleValue),r=Sb(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Hb(e.timestampValue,t.timestampValue);case 4:return Hb(Db(e),Db(t));case 5:return Fv(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Nb(e),r=Nb(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=Uv(n[s],r[s]);if(0!==e)return e}return Uv(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Uv(Sb(e.latitude),Sb(t.latitude));return 0!==n?n:Uv(Sb(e.longitude),Sb(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Wb(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,s,a;const i=e.fields||{},o=t.fields||{},l=null===(n=i[zb])||void 0===n?void 0:n.arrayValue,c=null===(r=o[zb])||void 0===r?void 0:r.arrayValue,u=Uv((null===(s=null==l?void 0:l.values)||void 0===s?void 0:s.length)||0,(null===(a=null==c?void 0:c.values)||void 0===a?void 0:a.length)||0);return 0!==u?u:Wb(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Ub&&t===Ub)return 0;if(e===Ub)return 1;if(t===Ub)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},a=Object.keys(s);r.sort(),a.sort();for(let i=0;i<r.length&&i<a.length;++i){const e=Fv(r[i],a[i]);if(0!==e)return e;const t=$b(n[r[i]],s[a[i]]);if(0!==t)return t}return Uv(r.length,a.length)}(e.mapValue,t.mapValue);default:throw xv(23264,{Pe:n})}}function Hb(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Uv(e,t);const n=kb(e),r=kb(t),s=Uv(n.seconds,r.seconds);return 0!==s?s:Uv(n.nanos,r.nanos)}function Wb(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=$b(n[s],r[s]);if(e)return e}return Uv(n.length,r.length)}function Gb(e){return Kb(e)}function Kb(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=kb(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Nb(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Jv.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Kb(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+=`${s}:${Kb(e.fields[s])}`;return n+"}"}(e.mapValue):xv(61005,{value:e})}function Qb(e){switch(Vb(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=_b(e);return t?16+Qb(t):16;case 5:return 2*e.stringValue.length;case 6:return Nb(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+Qb(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return hb(e.fields,((e,n)=>{t+=e.length+Qb(n)})),t}(e.mapValue);default:throw xv(13486,{value:e})}}function Xb(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Yb(e){return!!e&&"integerValue"in e}function Jb(e){return!!e&&"arrayValue"in e}function Zb(e){return!!e&&"nullValue"in e}function ex(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function tx(e){return!!e&&"mapValue"in e}function nx(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return hb(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=nx(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=nx(e.arrayValue.values[n]);return t}return Object.assign({},e)}class rx{constructor(e){this.value=e}static empty(){return new rx({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!tx(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nx(t)}setAll(e){let t=Yv.emptyPath(),n={},r=[];e.forEach(((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=nx(e):r.push(s.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());tx(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Bb(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];tx(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){hb(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new rx(nx(this.value))}}function sx(e){const t=[];return hb(e.fields,((e,n)=>{const r=new Yv([e]);if(tx(n)){const e=sx(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new bb(t)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class ax{constructor(e,t,n,r,s,a,i){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=a,this.documentState=i}static newInvalidDocument(e){return new ax(e,0,Wv.min(),Wv.min(),Wv.min(),rx.empty(),0)}static newFoundDocument(e,t,n,r){return new ax(e,1,t,Wv.min(),n,r,0)}static newNoDocument(e,t){return new ax(e,2,t,Wv.min(),Wv.min(),rx.empty(),0)}static newUnknownDocument(e,t){return new ax(e,3,t,Wv.min(),Wv.min(),rx.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Wv.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rx.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rx.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Wv.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ax&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ax(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,t){this.position=e,this.inclusive=t}}function ox(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const a=t[s],i=e.position[s];if(r=a.field.isKeyField()?Jv.comparator(Jv.fromName(i.referenceValue),n.key):$b(i,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function lx(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Bb(e.position[n],t.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e,t="asc"){this.field=e,this.dir=t}}function ux(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{}class hx extends dx{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new bx(e,t,n):"array-contains"===t?new kx(e,n):"in"===t?new Sx(e,n):"not-in"===t?new Nx(e,n):"array-contains-any"===t?new Tx(e,n):new hx(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new xx(e,n):new wx(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison($b(t,this.value)):null!==t&&Vb(this.value)===Vb(t)&&this.matchesComparison($b(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return xv(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fx extends dx{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new fx(e,t)}matches(e){return mx(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.Te||(this.Te=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function mx(e){return"and"===e.op}function px(e){return function(e){for(const t of e.filters)if(t instanceof fx)return!1;return!0}(e)&&mx(e)}function gx(e){if(e instanceof hx)return e.field.canonicalString()+e.op.toString()+Gb(e.value);if(px(e))return e.filters.map((e=>gx(e))).join(",");{const t=e.filters.map((e=>gx(e))).join(",");return`${e.op}(${t})`}}function yx(e,t){return e instanceof hx?function(e,t){return t instanceof hx&&e.op===t.op&&e.field.isEqual(t.field)&&Bb(e.value,t.value)}(e,t):e instanceof fx?function(e,t){return t instanceof fx&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&yx(n,t.filters[r])),!0)}(e,t):void xv(19439)}function vx(e){return e instanceof hx?function(e){return`${e.field.canonicalString()} ${e.op} ${Gb(e.value)}`}(e):e instanceof fx?function(e){return e.op.toString()+" {"+e.getFilters().map(vx).join(" ,")+"}"}(e):"Filter"}class bx extends hx{constructor(e,t,n){super(e,t,n),this.key=Jv.fromName(n.referenceValue)}matches(e){const t=Jv.comparator(e.key,this.key);return this.matchesComparison(t)}}class xx extends hx{constructor(e,t){super(e,"in",t),this.keys=Ex("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class wx extends hx{constructor(e,t){super(e,"not-in",t),this.keys=Ex("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Ex(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Jv.fromName(e.referenceValue)))}class kx extends hx{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Jb(t)&&qb(t.arrayValue,this.value)}}class Sx extends hx{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&qb(this.value.arrayValue,t)}}class Nx extends hx{constructor(e,t){super(e,"not-in",t)}matches(e){if(qb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!qb(this.value.arrayValue,t)}}class Tx extends hx{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Jb(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>qb(this.value.arrayValue,e)))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e,t=null,n=[],r=[],s=null,a=null,i=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=a,this.endAt=i,this.Ie=null}}function jx(e,t=null,n=[],r=[],s=null,a=null,i=null){return new Cx(e,t,n,r,s,a,i)}function Rx(e){const t=kv(e);if(null===t.Ie){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>gx(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),ob(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Gb(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Gb(e))).join(",")),t.Ie=e}return t.Ie}function Ax(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ux(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!yx(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!lx(e.startAt,t.startAt)&&lx(e.endAt,t.endAt)}function _x(e){return Jv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e,t=null,n=[],r=[],s=null,a="F",i=null,o=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=a,this.startAt=i,this.endAt=o,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function Ix(e){return new Dx(e)}function Px(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Mx(e){return null!==e.collectionGroup}function Lx(e){const t=kv(e);if(null===t.Ee){t.Ee=[];const e=new Set;for(const s of t.explicitOrderBy)t.Ee.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new yb(Yv.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ee.push(new cx(r,n))})),e.has(Yv.keyField().canonicalString())||t.Ee.push(new cx(Yv.keyField(),n))}return t.Ee}function Ox(e){const t=kv(e);return t.de||(t.de=function(e,t){if("F"===e.limitType)return jx(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new cx(e.field,t)}));const n=e.endAt?new ix(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ix(e.startAt.position,e.startAt.inclusive):null;return jx(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}(t,Lx(e))),t.de}function Ux(e,t){const n=e.filters.concat([t]);return new Dx(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Fx(e,t,n){return new Dx(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function zx(e,t){return Ax(Ox(e),Ox(t))&&e.limitType===t.limitType}function Vx(e){return`${Rx(Ox(e))}|lt:${e.limitType}`}function Bx(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>vx(e))).join(", ")}]`),ob(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Gb(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Gb(e))).join(",")),`Target(${t})`}(Ox(e))}; limitType=${e.limitType})`}function qx(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Jv.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Lx(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=ox(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Lx(e),t))&&!(e.endAt&&!function(e,t,n){const r=ox(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Lx(e),t))}(e,t)}function $x(e){return(t,n)=>{let r=!1;for(const s of Lx(e)){const e=Hx(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function Hx(e,t,n){const r=e.field.isKeyField()?Jv.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?$b(r,s):xv(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return xv(19790,{direction:e.dir})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){hb(this.inner,((t,n)=>{for(const[r,s]of n)e(r,s)}))}isEmpty(){return fb(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=new mb(Jv.comparator);function Kx(){return Gx}const Qx=new mb(Jv.comparator);function Xx(...e){let t=Qx;for(const n of e)t=t.insert(n.key,n);return t}function Yx(e){let t=Qx;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Jx(){return ew()}function Zx(){return ew()}function ew(){return new Wx((e=>e.toString()),((e,t)=>e.isEqual(t)))}const tw=new mb(Jv.comparator),nw=new yb(Jv.comparator);function rw(...e){let t=nw;for(const n of e)t=t.add(n);return t}const sw=new yb(Uv);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function aw(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lb(t)?"-0":t}}function iw(e){return{integerValue:""+e}}function ow(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!lb(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)?iw(t):aw(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(){this._=void 0}}function cw(e,t,n){return e instanceof hw?function(e,t){const n={fields:{[Cb]:{stringValue:Tb},[Rb]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Ab(t)&&(t=_b(t)),t&&(n.fields[jb]=t),{mapValue:n}}(n,t):e instanceof fw?mw(e,t):e instanceof pw?gw(e,t):function(e,t){const n=dw(e,t),r=vw(n)+vw(e.Re);return Yb(n)&&Yb(e.Re)?iw(r):aw(e.serializer,r)}(e,t)}function uw(e,t,n){return e instanceof fw?mw(e,t):e instanceof pw?gw(e,t):n}function dw(e,t){return e instanceof yw?function(e){return Yb(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class hw extends lw{}class fw extends lw{constructor(e){super(),this.elements=e}}function mw(e,t){const n=bw(t);for(const r of e.elements)n.some((e=>Bb(e,r)))||n.push(r);return{arrayValue:{values:n}}}class pw extends lw{constructor(e){super(),this.elements=e}}function gw(e,t){let n=bw(t);for(const r of e.elements)n=n.filter((e=>!Bb(e,r)));return{arrayValue:{values:n}}}class yw extends lw{constructor(e,t){super(),this.serializer=e,this.Re=t}}function vw(e){return Sb(e.integerValue||e.doubleValue)}function bw(e){return Jb(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e,t){this.field=e,this.transform=t}}class ww{constructor(e,t){this.version=e,this.transformResults=t}}class Ew{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ew}static exists(e){return new Ew(void 0,e)}static updateTime(e){return new Ew(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kw(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Sw{}function Nw(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Mw(e.key,Ew.none()):new Aw(e.key,e.data,Ew.none());{const n=e.data,r=rx.empty();let s=new yb(Yv.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new _w(e.key,r,new bb(s.toArray()),Ew.none())}}function Tw(e,t,n){e instanceof Aw?function(e,t,n){const r=e.value.clone(),s=Iw(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof _w?function(e,t,n){if(!kw(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Iw(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(Dw(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Cw(e,t,n,r){return e instanceof Aw?function(e,t,n,r){if(!kw(e.precondition,t))return n;const s=e.value.clone(),a=Pw(e.fieldTransforms,r,t);return s.setAll(a),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof _w?function(e,t,n,r){if(!kw(e.precondition,t))return n;const s=Pw(e.fieldTransforms,r,t),a=t.data;return a.setAll(Dw(e)),a.setAll(s),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return kw(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function jw(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=dw(r.transform,e||null);null!=s&&(null===n&&(n=rx.empty()),n.set(r.field,s))}return n||null}function Rw(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Bv(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof fw&&t instanceof fw||e instanceof pw&&t instanceof pw?Bv(e.elements,t.elements,Bb):e instanceof yw&&t instanceof yw?Bb(e.Re,t.Re):e instanceof hw&&t instanceof hw}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Aw extends Sw{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class _w extends Sw{constructor(e,t,n,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Dw(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Iw(e,t,n){const r=new Map;Ev(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let s=0;s<n.length;s++){const a=e[s],i=a.transform,o=t.data.field(a.field);r.set(a.field,uw(i,o,n[s]))}return r}function Pw(e,t,n){const r=new Map;for(const s of e){const e=s.transform,a=n.data.field(s.field);r.set(s.field,cw(e,a,t))}return r}class Mw extends Sw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Lw extends Sw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Tw(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Cw(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Cw(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Zx();return this.mutations.forEach((r=>{const s=e.get(r.key),a=s.overlayedDocument;let i=this.applyToLocalView(a,s.mutatedFields);i=t.has(r.key)?null:i;const o=Nw(a,i);null!==o&&n.set(r.key,o),a.isValidDocument()||a.convertToNoDocument(Wv.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),rw())}isEqual(e){return this.batchId===e.batchId&&Bv(this.mutations,e.mutations,((e,t)=>Rw(e,t)))&&Bv(this.baseMutations,e.baseMutations,((e,t)=>Rw(e,t)))}}class Uw{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ev(e.mutations.length===n.length,58842,{fe:e.mutations.length,ge:n.length});let r=tw;const s=e.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,n[a].version);return new Uw(e,t,n,r)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e,t){this.count=e,this.unchangedNames=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vw,Bw;function qw(e){if(void 0===e)return yv("GRPC error has no .code"),Sv.UNKNOWN;switch(e){case Vw.OK:return Sv.OK;case Vw.CANCELLED:return Sv.CANCELLED;case Vw.UNKNOWN:return Sv.UNKNOWN;case Vw.DEADLINE_EXCEEDED:return Sv.DEADLINE_EXCEEDED;case Vw.RESOURCE_EXHAUSTED:return Sv.RESOURCE_EXHAUSTED;case Vw.INTERNAL:return Sv.INTERNAL;case Vw.UNAVAILABLE:return Sv.UNAVAILABLE;case Vw.UNAUTHENTICATED:return Sv.UNAUTHENTICATED;case Vw.INVALID_ARGUMENT:return Sv.INVALID_ARGUMENT;case Vw.NOT_FOUND:return Sv.NOT_FOUND;case Vw.ALREADY_EXISTS:return Sv.ALREADY_EXISTS;case Vw.PERMISSION_DENIED:return Sv.PERMISSION_DENIED;case Vw.FAILED_PRECONDITION:return Sv.FAILED_PRECONDITION;case Vw.ABORTED:return Sv.ABORTED;case Vw.OUT_OF_RANGE:return Sv.OUT_OF_RANGE;case Vw.UNIMPLEMENTED:return Sv.UNIMPLEMENTED;case Vw.DATA_LOSS:return Sv.DATA_LOSS;default:return xv(39323,{code:e})}}(Bw=Vw||(Vw={}))[Bw.OK=0]="OK",Bw[Bw.CANCELLED=1]="CANCELLED",Bw[Bw.UNKNOWN=2]="UNKNOWN",Bw[Bw.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bw[Bw.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bw[Bw.NOT_FOUND=5]="NOT_FOUND",Bw[Bw.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bw[Bw.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bw[Bw.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bw[Bw.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bw[Bw.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bw[Bw.ABORTED=10]="ABORTED",Bw[Bw.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bw[Bw.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bw[Bw.INTERNAL=13]="INTERNAL",Bw[Bw.UNAVAILABLE=14]="UNAVAILABLE",Bw[Bw.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const $w=new Jy([4294967295,4294967295],0);function Hw(e){const t=Lv().encode(e),n=new Zy;return n.update(t),new Uint8Array(n.digest())}function Ww(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Jy([n,r],0),new Jy([s,a],0)]}class Gw{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Kw(`Invalid padding: ${t}`);if(n<0)throw new Kw(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Kw(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Kw(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Jy.fromNumber(this.pe)}we(e,t,n){let r=e.add(t.multiply(Jy.fromNumber(n)));return 1===r.compare($w)&&(r=new Jy([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.pe)return!1;const t=Hw(e),[n,r]=Ww(t);for(let s=0;s<this.hashCount;s++){const e=this.we(n,r,s);if(!this.be(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new Gw(s,r,t);return n.forEach((e=>a.insert(e))),a}insert(e){if(0===this.pe)return;const t=Hw(e),[n,r]=Ww(t);for(let s=0;s<this.hashCount;s++){const e=this.we(n,r,s);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Kw extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Xw.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Qw(Wv.min(),r,new mb(Uv),Kx(),rw())}}class Xw{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Xw(n,t,rw(),rw(),rw())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e,t,n,r){this.De=e,this.removedTargetIds=t,this.key=n,this.ve=r}}class Jw{constructor(e,t){this.targetId=e,this.Ce=t}}class Zw{constructor(e,t,n=wb.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class eE{constructor(){this.Fe=0,this.Me=rE(),this.xe=wb.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return 0!==this.Fe}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=rw(),t=rw(),n=rw();return this.Me.forEach(((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:xv(38017,{changeType:s})}})),new Xw(this.xe,this.Oe,e,t,n)}Qe(){this.Ne=!1,this.Me=rE()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Ev(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class tE{constructor(e){this.ze=e,this.je=new Map,this.He=Kx(),this.Je=nE(),this.Ye=nE(),this.Ze=new mb(Uv)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,(t=>{const n=this.rt(t);switch(e.state){case 0:this.it(t)&&n.ke(e.resumeToken);break;case 1:n.We(),n.Be||n.Qe(),n.ke(e.resumeToken);break;case 2:n.We(),n.Be||this.removeTarget(t);break;case 3:this.it(t)&&(n.Ge(),n.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),n.ke(e.resumeToken));break;default:xv(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach(((e,n)=>{this.it(n)&&t(n)}))}ot(e){const t=e.targetId,n=e.Ce.count,r=this._t(t);if(r){const s=r.target;if(_x(s))if(0===n){const e=new Jv(s.path);this.tt(t,e,ax.newNoDocument(e,Wv.min()))}else Ev(1===n,20013,{expectedCount:n});else{const r=this.ut(t);if(r!==n){const n=this.ct(e),s=n?this.lt(n,e,r):1;if(0!==s){this.st(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,e)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let a,i;try{a=Nb(n).toUint8Array()}catch(e){if(e instanceof xb)return vv("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{i=new Gw(a,r,s)}catch(e){return vv(e instanceof Kw?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===i.pe?null:i}lt(e,t,n){return t.Ce.count===n-this.Tt(e,t.targetId)?0:2}Tt(e,t){const n=this.ze.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const s=this.ze.Pt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${n.path.canonicalString()}`;e.mightContain(a)||(this.tt(t,n,null),r++)})),r}It(e){const t=new Map;this.je.forEach(((n,r)=>{const s=this._t(r);if(s){if(n.current&&_x(s.target)){const t=new Jv(s.target.path);this.Et(t).has(r)||this.dt(r,t)||this.tt(r,t,ax.newNoDocument(t,e))}n.Le&&(t.set(r,n.qe()),n.Qe())}}));let n=rw();this.Ye.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this._t(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.He.forEach(((t,n)=>n.setReadTime(e)));const r=new Qw(e,t,this.Ze,this.He,n);return this.He=Kx(),this.Je=nE(),this.Ye=nE(),this.Ze=new mb(Uv),r}et(e,t){if(!this.it(e))return;const n=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,n),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,n){if(!this.it(e))return;const r=this.rt(e);this.dt(e,t)?r.$e(t,1):r.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),n&&(this.He=this.He.insert(t,n))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new eE,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new yb(Uv),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new yb(Uv),this.Je=this.Je.insert(e,t)),t}it(e){const t=null!==this._t(e);return t||gv("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new eE),this.ze.getRemoteKeysForTarget(e).forEach((t=>{this.tt(e,t,null)}))}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function nE(){return new mb(Jv.comparator)}function rE(){return new mb(Jv.comparator)}const sE={asc:"ASCENDING",desc:"DESCENDING"},aE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iE={and:"AND",or:"OR"};class oE{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function lE(e,t){return e.useProto3Json||ob(t)?t:{value:t}}function cE(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function uE(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function dE(e,t){return cE(e,t.toTimestamp())}function hE(e){return Ev(!!e,49232),Wv.fromTimestamp(function(e){const t=kb(e);return new Hv(t.seconds,t.nanos)}(e))}function fE(e,t){return mE(e,t).canonicalString()}function mE(e,t){const n=function(e){return new Qv(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function pE(e){const t=Qv.fromString(e);return Ev(IE(t),10190,{key:t.toString()}),t}function gE(e,t){return fE(e.databaseId,t.path)}function yE(e,t){const n=pE(t);if(n.get(1)!==e.databaseId.projectId)throw new Nv(Sv.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Nv(Sv.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Jv(xE(n))}function vE(e,t){return fE(e.databaseId,t)}function bE(e){return new Qv(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function xE(e){return Ev(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function wE(e,t,n){return{name:gE(e,t),fields:n.value.mapValue.fields}}function EE(e,t){return{documents:[vE(e,t.path)]}}function kE(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=vE(e,s);const a=function(e){if(0!==e.length)return _E(fx.create(e,"and"))}(t.filters);a&&(n.structuredQuery.where=a);const i=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:RE(e.field),direction:TE(e.dir)}}(e)))}(t.orderBy);i&&(n.structuredQuery.orderBy=i);const o=lE(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{gt:n,parent:s}}function SE(e){let t=function(e){const t=pE(e);return 4===t.length?Qv.emptyPath():xE(t)}(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ev(1===r,65062);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let a=[];n.where&&(a=function(e){const t=NE(e);return t instanceof fx&&px(t)?t.getFilters():[t]}(n.where));let i=[];n.orderBy&&(i=function(e){return e.map((e=>function(e){return new cx(AE(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,ob(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new ix(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new ix(n,t)}(n.endAt)),function(e,t,n,r,s,a,i,o){return new Dx(e,t,n,r,s,a,i,o)}(t,s,i,a,o,"F",l,c)}function NE(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=AE(e.unaryFilter.field);return hx.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=AE(e.unaryFilter.field);return hx.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=AE(e.unaryFilter.field);return hx.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=AE(e.unaryFilter.field);return hx.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xv(61313);default:return xv(60726)}}(e):void 0!==e.fieldFilter?function(e){return hx.create(AE(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xv(58110);default:return xv(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return fx.create(e.compositeFilter.filters.map((e=>NE(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return xv(1026)}}(e.compositeFilter.op))}(e):xv(30097,{filter:e})}function TE(e){return sE[e]}function CE(e){return aE[e]}function jE(e){return iE[e]}function RE(e){return{fieldPath:e.canonicalString()}}function AE(e){return Yv.fromServerFormat(e.fieldPath)}function _E(e){return e instanceof hx?function(e){if("=="===e.op){if(ex(e.value))return{unaryFilter:{field:RE(e.field),op:"IS_NAN"}};if(Zb(e.value))return{unaryFilter:{field:RE(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ex(e.value))return{unaryFilter:{field:RE(e.field),op:"IS_NOT_NAN"}};if(Zb(e.value))return{unaryFilter:{field:RE(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:RE(e.field),op:CE(e.op),value:e.value}}}(e):e instanceof fx?function(e){const t=e.getFilters().map((e=>_E(e)));return 1===t.length?t[0]:{compositeFilter:{op:jE(e.op),filters:t}}}(e):xv(54877,{filter:e})}function DE(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function IE(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,t,n,r,s=Wv.min(),a=Wv.min(),i=wb.EMPTY_BYTE_STRING,o=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=i,this.expectedCount=o}withSequenceNumber(e){return new PE(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new PE(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new PE(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new PE(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e){this.wt=e}}function LE(e){const t=SE({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Fx(t,t.limit,"L"):t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(){this.yn=new UE}addToCollectionParentIndex(e,t){return this.yn.add(t),sb.resolve()}getCollectionParents(e,t){return sb.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return sb.resolve()}deleteFieldIndex(e,t){return sb.resolve()}deleteAllFieldIndexes(e){return sb.resolve()}createTargetIndexes(e,t){return sb.resolve()}getDocumentsMatchingTarget(e,t){return sb.resolve(null)}getIndexType(e,t){return sb.resolve(0)}getFieldIndexes(e,t){return sb.resolve([])}getNextCollectionGroupToUpdate(e){return sb.resolve(null)}getMinOffset(e,t){return sb.resolve(eb.min())}getMinOffsetFromCollectionGroup(e,t){return sb.resolve(eb.min())}updateCollectionGroup(e,t,n){return sb.resolve()}updateIndexEntries(e,t){return sb.resolve()}}class UE{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new yb(Qv.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new yb(Qv.comparator)).toArray()}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zE=41943040;class VE{static withCacheSize(e){return new VE(e,VE.DEFAULT_COLLECTION_PERCENTILE,VE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */VE.DEFAULT_COLLECTION_PERCENTILE=10,VE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,VE.DEFAULT=new VE(zE,VE.DEFAULT_COLLECTION_PERCENTILE,VE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),VE.DISABLED=new VE(-1,0,0);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class BE{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new BE(0)}static ir(){return new BE(-1)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE="LruGarbageCollector";function $E([e,t],[n,r]){const s=Uv(e,n);return 0===s?Uv(t,r):s}class HE{constructor(e){this.cr=e,this.buffer=new yb($E),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();$E(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class WE{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Tr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return null!==this.Tr}Ir(e){gv(qE,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){ab(e)?gv(qE,"Ignoring IndexedDB error during garbage collection: ",e):await rb(e)}await this.Ir(3e5)}))}}class GE{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return sb.resolve(ib.le);const n=new HE(t);return this.Er.forEachTarget(e,(e=>n.Pr(e.sequenceNumber))).next((()=>this.Er.Ar(e,(e=>n.Pr(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Er.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(gv("LruGarbageCollector","Garbage collection skipped; disabled"),sb.resolve(FE)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(gv("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),FE):this.Rr(e,t)))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let n,r,s,a,i,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(gv("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,i=Date.now(),this.removeTargets(e,n,t)))).next((t=>(s=t,o=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),pv()<=Ig.DEBUG&&gv("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${a-c}ms\n\tDetermined least recently used ${r} in `+(i-a)+"ms\n"+`\tRemoved ${s} targets in `+(o-i)+"ms\n"+`\tRemoved ${e} documents in `+(l-o)+"ms\n"+`Total Duration: ${l-c}ms`),sb.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e}))))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class KE{constructor(){this.changes=new Wx((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ax.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?sb.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Cw(n.mutation,e,bb.empty(),Hv.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,rw()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=rw()){const r=Jx();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Xx();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Jx();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,rw())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let s=Kx();const a=ew(),i=ew();return t.forEach(((e,t)=>{const i=n.get(t.key);r.has(t.key)&&(void 0===i||i.mutation instanceof _w)?s=s.insert(t.key,t):void 0!==i?(a.set(t.key,i.mutation.getFieldMask()),Cw(i.mutation,t,i.mutation.getFieldMask(),Hv.now())):a.set(t.key,bb.empty())})),this.recalculateAndSaveOverlays(e,s).next((e=>(e.forEach(((e,t)=>a.set(e,t))),t.forEach(((e,t)=>{var n;return i.set(e,new QE(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),i)))}recalculateAndSaveOverlays(e,t){const n=ew();let r=new mb(((e,t)=>e-t)),s=rw();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const s of e)s.keys().forEach((e=>{const a=t.get(e);if(null===a)return;let i=n.get(e)||bb.empty();i=s.applyToLocalView(a,i),n.set(e,i);const o=(r.get(s.batchId)||rw()).add(e);r=r.insert(s.batchId,o)}))})).next((()=>{const a=[],i=r.getReverseIterator();for(;i.hasNext();){const r=i.getNext(),o=r.key,l=r.value,c=Zx();l.forEach((e=>{if(!s.has(e)){const r=Nw(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}})),a.push(this.documentOverlayCache.saveOverlays(e,o,c))}return sb.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Jv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Mx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):sb.resolve(Jx());let i=-1,o=s;return a.next((t=>sb.forEach(t,((t,n)=>(i<n.largestBatchId&&(i=n.largestBatchId),s.get(t)?sb.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{o=o.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,s))).next((()=>this.computeViews(e,o,t,rw()))).next((e=>({batchId:i,changes:Yx(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Jv(t)).next((e=>{let t=Xx();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let a=Xx();return this.indexManager.getCollectionParents(e,s).next((i=>sb.forEach(i,(i=>{const o=function(e,t){return new Dx(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,i.child(s));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next((e=>{e.forEach(((e,t)=>{a=a.insert(e,t)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r)))).next((e=>{s.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,ax.newInvalidDocument(r)))}));let n=Xx();return e.forEach(((e,r)=>{const a=s.get(e);void 0!==a&&Cw(a.mutation,r,bb.empty(),Hv.now()),qx(t,r)&&(n=n.insert(e,r))})),n}))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return sb.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:hE(e.createTime)}}(t)),sb.resolve()}getNamedQuery(e,t){return sb.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(e){return{name:e.name,query:LE(e.bundledQuery),readTime:hE(e.readTime)}}(t)),sb.resolve()}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(){this.overlays=new mb(Jv.comparator),this.Or=new Map}getOverlay(e,t){return sb.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Jx();return sb.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.St(e,t,r)})),sb.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Or.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Or.delete(n)),sb.resolve()}getOverlaysForCollection(e,t,n){const r=Jx(),s=t.length+1,a=new Jv(t.child("")),i=this.overlays.getIteratorFrom(a);for(;i.hasNext();){const e=i.getNext().value,a=e.getKey();if(!t.isPrefixOf(a.path))break;a.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return sb.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new mb(((e,t)=>e-t));const a=this.overlays.getIterator();for(;a.hasNext();){const e=a.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=Jx(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const i=Jx(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach(((e,t)=>i.set(e,t))),!(i.size()>=r)););return sb.resolve(i)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Or.get(r.largestBatchId).delete(n.key);this.Or.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Fw(t,n));let s=this.Or.get(t);void 0===s&&(s=rw(),this.Or.set(t,s)),this.Or.set(t,s.add(n.key))}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(){this.sessionToken=wb.EMPTY_BYTE_STRING}getSessionToken(e){return sb.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,sb.resolve()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(){this.Nr=new yb(tk.Br),this.Lr=new yb(tk.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const n=new tk(e,t);this.Nr=this.Nr.add(n),this.Lr=this.Lr.add(n)}qr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Qr(new tk(e,t))}$r(e,t){e.forEach((e=>this.removeReference(e,t)))}Ur(e){const t=new Jv(new Qv([])),n=new tk(t,e),r=new tk(t,e+1),s=[];return this.Lr.forEachInRange([n,r],(e=>{this.Qr(e),s.push(e.key)})),s}Kr(){this.Nr.forEach((e=>this.Qr(e)))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new Jv(new Qv([])),n=new tk(t,e),r=new tk(t,e+1);let s=rw();return this.Lr.forEachInRange([n,r],(e=>{s=s.add(e.key)})),s}containsKey(e){const t=new tk(e,0),n=this.Nr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class tk{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return Jv.comparator(e.key,t.key)||Uv(e.Gr,t.Gr)}static kr(e,t){return Uv(e.Gr,t.Gr)||Jv.comparator(e.key,t.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new yb(tk.Br)}checkEmpty(e){return sb.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Ow(s,t,n,r);this.mutationQueue.push(a);for(const i of r)this.zr=this.zr.add(new tk(i.key,s)),this.indexManager.addToCollectionParentIndex(e,i.key.path.popLast());return sb.resolve(a)}lookupMutationBatch(e,t){return sb.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Hr(n),s=r<0?0:r;return sb.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return sb.resolve(0===this.mutationQueue.length?-1:this.Jn-1)}getAllMutationBatches(e){return sb.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new tk(t,0),r=new tk(t,Number.POSITIVE_INFINITY),s=[];return this.zr.forEachInRange([n,r],(e=>{const t=this.jr(e.Gr);s.push(t)})),sb.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new yb(Uv);return t.forEach((e=>{const t=new tk(e,0),r=new tk(e,Number.POSITIVE_INFINITY);this.zr.forEachInRange([t,r],(e=>{n=n.add(e.Gr)}))})),sb.resolve(this.Jr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;Jv.isDocumentKey(s)||(s=s.child(""));const a=new tk(new Jv(s),0);let i=new yb(Uv);return this.zr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(i=i.add(e.Gr)),!0)}),a),sb.resolve(this.Jr(i))}Jr(e){const t=[];return e.forEach((e=>{const n=this.jr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Ev(0===this.Yr(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.zr;return sb.forEach(t.mutations,(r=>{const s=new tk(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.zr=n}))}Xn(e){}containsKey(e,t){const n=new tk(t,0),r=this.zr.firstAfterOrEqual(n);return sb.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,sb.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e){this.Zr=e,this.docs=new mb(Jv.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,a=this.Zr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return sb.resolve(n?n.document.mutableCopy():ax.newInvalidDocument(t))}getEntries(e,t){let n=Kx();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ax.newInvalidDocument(e))})),sb.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=Kx();const a=t.path,i=new Jv(a.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(i);for(;o.hasNext();){const{key:e,value:{document:i}}=o.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||tb(Zv(i),n)<=0||(r.has(i.key)||qx(t,i))&&(s=s.insert(i.key,i.mutableCopy()))}return sb.resolve(s)}getAllFromCollectionGroup(e,t,n,r){xv(9500)}Xr(e,t){return sb.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new sk(this)}getSize(e){return sb.resolve(this.size)}}class sk extends KE{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.vr.addEntry(e,r)):this.vr.removeEntry(n)})),sb.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e){this.persistence=e,this.ei=new Wx((e=>Rx(e)),Ax),this.lastRemoteSnapshotVersion=Wv.min(),this.highestTargetId=0,this.ti=0,this.ni=new ek,this.targetCount=0,this.ri=BE.rr()}forEachTarget(e,t){return this.ei.forEach(((e,n)=>t(n))),sb.resolve()}getLastRemoteSnapshotVersion(e){return sb.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return sb.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),sb.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ti&&(this.ti=t),sb.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new BE(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,sb.resolve()}updateTargetData(e,t){return this.ar(t),sb.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,sb.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.ei.forEach(((a,i)=>{i.sequenceNumber<=t&&null===n.get(i.targetId)&&(this.ei.delete(a),s.push(this.removeMatchingKeysForTargetId(e,i.targetId)),r++)})),sb.waitFor(s).next((()=>r))}getTargetCount(e){return sb.resolve(this.targetCount)}getTargetData(e,t){const n=this.ei.get(t)||null;return sb.resolve(n)}addMatchingKeys(e,t,n){return this.ni.qr(t,n),sb.resolve()}removeMatchingKeys(e,t,n){this.ni.$r(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach((t=>{s.push(r.markPotentiallyOrphaned(e,t))})),sb.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),sb.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ni.Wr(t);return sb.resolve(n)}containsKey(e,t){return sb.resolve(this.ni.containsKey(t))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e,t){this.ii={},this.overlays={},this.si=new ib(0),this.oi=!1,this.oi=!0,this._i=new ZE,this.referenceDelegate=e(this),this.ai=new ak(this),this.indexManager=new OE,this.remoteDocumentCache=function(e){return new rk(e)}((e=>this.referenceDelegate.ui(e))),this.serializer=new ME(t),this.ci=new YE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new JE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ii[e.toKey()];return n||(n=new nk(t,this.referenceDelegate),this.ii[e.toKey()]=n),n}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,n){gv("MemoryPersistence","Starting transaction:",e);const r=new ok(this.si.next());return this.referenceDelegate.li(),n(r).next((e=>this.referenceDelegate.hi(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Pi(e,t){return sb.or(Object.values(this.ii).map((n=>()=>n.containsKey(e,t))))}}class ok extends nb{constructor(e){super(),this.currentSequenceNumber=e}}class lk{constructor(e){this.persistence=e,this.Ti=new ek,this.Ii=null}static Ei(e){return new lk(e)}get di(){if(this.Ii)return this.Ii;throw xv(60996)}addReference(e,t,n){return this.Ti.addReference(n,t),this.di.delete(n.toString()),sb.resolve()}removeReference(e,t,n){return this.Ti.removeReference(n,t),this.di.add(n.toString()),sb.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),sb.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach((e=>this.di.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.di.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return sb.forEach(this.di,(n=>{const r=Jv.fromPath(n);return this.Ai(e,r).next((e=>{e||t.removeEntry(r,Wv.min())}))})).next((()=>(this.Ii=null,t.apply(e))))}updateLimboDocument(e,t){return this.Ai(e,t).next((e=>{e?this.di.delete(t.toString()):this.di.add(t.toString())}))}ui(e){return 0}Ai(e,t){return sb.or([()=>sb.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class ck{constructor(e,t){this.persistence=e,this.Ri=new Wx((e=>function(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=ub(t)),t=cb(e.get(n),t);return ub(t)}(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=function(e,t){return new GE(e,t)}(this,t)}static Ei(e,t){return new ck(e,t)}li(){}hi(e){return sb.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Vr(e){let t=0;return this.Ar(e,(e=>{t++})).next((()=>t))}Ar(e,t){return sb.forEach(this.Ri,((n,r)=>this.gr(e,n,r).next((e=>e?sb.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.Xr(e,(r=>this.gr(e,r,t).next((e=>{e||(n++,s.removeEntry(r,Wv.min()))})))).next((()=>s.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),sb.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.Ri.set(n,e.currentSequenceNumber),sb.resolve()}removeReference(e,t,n){return this.Ri.set(n,e.currentSequenceNumber),sb.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),sb.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Qb(e.data.value)),t}gr(e,t,n){return sb.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.Ri.get(t);return sb.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ls=n,this.hs=r}static Ps(e,t){let n=rw(),r=rw();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new uk(e,t.fromCache,n,r)}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=Eg()?8:function(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")>0?6:4}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.Rs(e,t).next((e=>{s.result=e})).next((()=>{if(!s.result)return this.Vs(e,t,r,n).next((e=>{s.result=e}))})).next((()=>{if(s.result)return;const n=new dk;return this.fs(e,t,n).next((r=>{if(s.result=r,this.Is)return this.gs(e,t,n,r.size)}))})).next((()=>s.result))}gs(e,t,n,r){return n.documentReadCount<this.Es?(pv()<=Ig.DEBUG&&gv("QueryEngine","SDK will not create cache indexes for query:",Bx(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),sb.resolve()):(pv()<=Ig.DEBUG&&gv("QueryEngine","Query:",Bx(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ds*r?(pv()<=Ig.DEBUG&&gv("QueryEngine","The SDK decides to create cache indexes for query:",Bx(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ox(t))):sb.resolve())}Rs(e,t){if(Px(t))return sb.resolve(null);let n=Ox(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Fx(t,null,"F"),n=Ox(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const s=rw(...r);return this.As.getDocuments(e,s).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const a=this.ps(t,r);return this.ys(t,a,s,n.readTime)?this.Rs(e,Fx(t,null,"F")):this.ws(e,a,t,n)}))))})))))}Vs(e,t,n,r){return Px(t)||r.isEqual(Wv.min())?sb.resolve(null):this.As.getDocuments(e,n).next((s=>{const a=this.ps(t,s);return this.ys(t,a,n,r)?sb.resolve(null):(pv()<=Ig.DEBUG&&gv("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Bx(t)),this.ws(e,a,t,function(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=Wv.fromTimestamp(1e9===r?new Hv(n+1,0):new Hv(n,r));return new eb(s,Jv.empty(),t)}(r,-1)).next((e=>e)))}))}ps(e,t){let n=new yb($x(e));return t.forEach(((t,r)=>{qx(e,r)&&(n=n.add(r))})),n}ys(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}fs(e,t,n){return pv()<=Ig.DEBUG&&gv("QueryEngine","Using full collection scan to execute query:",Bx(t)),this.As.getDocumentsMatchingQuery(e,t,eb.min(),n)}ws(e,t,n,r){return this.As.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk="LocalStore";class mk{constructor(e,t,n,r){this.persistence=e,this.bs=t,this.serializer=r,this.Ss=new mb(Uv),this.Ds=new Wx((e=>Rx(e)),Ax),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(n)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XE(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ss)))}}async function pk(e,t){const n=kv(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((s=>(r=s,n.Fs(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const s=[],a=[];let i=rw();for(const e of r){s.push(e.batchId);for(const t of e.mutations)i=i.add(t.key)}for(const e of t){a.push(e.batchId);for(const t of e.mutations)i=i.add(t.key)}return n.localDocuments.getDocuments(e,i).next((e=>({Ms:e,removedBatchIds:s,addedBatchIds:a})))}))}))}function gk(e){const t=kv(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.ai.getLastRemoteSnapshotVersion(e)))}function yk(e,t){const n=kv(e),r=t.snapshotVersion;let s=n.Ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const a=n.Cs.newChangeBuffer({trackRemovals:!0});s=n.Ss;const i=[];t.targetChanges.forEach(((a,o)=>{const l=s.get(o);if(!l)return;i.push(n.ai.removeMatchingKeys(e,a.removedDocuments,o).next((()=>n.ai.addMatchingKeys(e,a.addedDocuments,o))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(wb.EMPTY_BYTE_STRING,Wv.min()).withLastLimboFreeSnapshotVersion(Wv.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),s=s.insert(o,c),function(e,t,n){if(0===e.resumeToken.approximateByteSize())return!0;if(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8)return!0;return n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,a)&&i.push(n.ai.updateTargetData(e,c))}));let o=Kx(),l=rw();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&i.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),i.push(function(e,t,n){let r=rw(),s=rw();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Kx();return n.forEach(((n,a)=>{const i=e.get(n);a.isFoundDocument()!==i.isFoundDocument()&&(s=s.add(n)),a.isNoDocument()&&a.version.isEqual(Wv.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!i.isValidDocument()||a.version.compareTo(i.version)>0||0===a.version.compareTo(i.version)&&i.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):gv(fk,"Ignoring outdated watch update for ",n,". Current version:",i.version," Watch version:",a.version)})),{xs:r,Os:s}}))}(e,a,t.documentUpdates).next((e=>{o=e.xs,l=e.Os}))),!r.isEqual(Wv.min())){const t=n.ai.getLastRemoteSnapshotVersion(e).next((t=>n.ai.setTargetsMetadata(e,e.currentSequenceNumber,r)));i.push(t)}return sb.waitFor(i).next((()=>a.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,o,l))).next((()=>o))})).then((e=>(n.Ss=s,e)))}function vk(e,t){const n=kv(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}async function bk(e,t,n){const r=kv(e),s=r.Ss.get(t),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(e=>r.persistence.referenceDelegate.removeTarget(e,s)))}catch(e){if(!ab(e))throw e;gv(fk,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ss=r.Ss.remove(t),r.Ds.delete(s.target)}function xk(e,t,n){const r=kv(e);let s=Wv.min(),a=rw();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=kv(e),s=r.Ds.get(n);return void 0!==s?sb.resolve(r.Ss.get(s)):r.ai.getTargetData(t,n)}(r,e,Ox(t)).next((t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(e,t.targetId).next((e=>{a=e}))})).next((()=>r.bs.getDocumentsMatchingQuery(e,t,n?s:Wv.min(),n?a:rw()))).next((e=>(function(e,t,n){let r=e.vs.get(t)||Wv.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.vs.set(t,r)}(r,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,Ns:a})))))}class wk{constructor(){this.activeTargetIds=sw}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ek{constructor(){this.So=new wk,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,n){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new wk,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{vo(e){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk="ConnectivityMonitor";class Nk{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){gv(Sk,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){gv(Sk,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tk=null;function Ck(){return null===Tk?Tk=268435456+Math.round(2147483648*Math.random()):Tk++,"0x"+Tk.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const jk="RestConnection",Rk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ak{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${n}/databases/${r}`,this.qo=this.databaseId.database===Pb?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Qo(e,t,n,r,s){const a=Ck(),i=this.$o(e,t.toUriEncodedString());gv(jk,`Sending RPC '${e}' ${a}:`,i,n);const o={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};return this.Uo(o,r,s),this.Ko(e,i,o,n).then((t=>(gv(jk,`Received RPC '${e}' ${a}: `,t),t)),(t=>{throw vv(jk,`RPC '${e}' ${a} failed with error: `,t,"url: ",i,"request:",n),t}))}Wo(e,t,n,r,s,a){return this.Qo(e,t,n,r,s)}Uo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+fv,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}$o(e,t){const n=Rk[e];return`${this.Lo}/v1/${t}:${n}`}terminate(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk="WebChannelConnection";class Ik extends Ak{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,n,r){const s=Ck();return new Promise(((a,i)=>{const o=new tv;o.setWithCredentials(!0),o.listenOnce(rv.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case sv.NO_ERROR:const t=o.getResponseJson();gv(Dk,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(t)),a(t);break;case sv.TIMEOUT:gv(Dk,`RPC '${e}' ${s} timed out`),i(new Nv(Sv.DEADLINE_EXCEEDED,"Request time out"));break;case sv.HTTP_ERROR:const n=o.getStatus();if(gv(Dk,`RPC '${e}' ${s} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Sv).indexOf(t)>=0?t:Sv.UNKNOWN}(t.status);i(new Nv(e,t.message))}else i(new Nv(Sv.UNKNOWN,"Server responded with status "+o.getStatus()))}else i(new Nv(Sv.UNAVAILABLE,"Connection failed."));break;default:xv(9055,{s_:e,streamId:s,o_:o.getLastErrorCode(),__:o.getLastError()})}}finally{gv(Dk,`RPC '${e}' ${s} completed.`)}}));const l=JSON.stringify(r);gv(Dk,`RPC '${e}' ${s} sending request:`,r),o.send(t,"POST",l,n,15)}))}a_(e,t,n){const r=Ck(),s=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=lv(),i=ov(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Uo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=s.join("");gv(Dk,`Creating RPC '${e}' stream ${r}: ${c}`,o);const u=a.createWebChannel(c,o);let d=!1,h=!1;const f=new _k({Go:t=>{h?gv(Dk,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(gv(Dk,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),gv(Dk,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},zo:()=>u.close()}),m=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return m(u,nv.EventType.OPEN,(()=>{h||(gv(Dk,`RPC '${e}' stream ${r} transport opened.`),f.t_())})),m(u,nv.EventType.CLOSE,(()=>{h||(h=!0,gv(Dk,`RPC '${e}' stream ${r} transport closed`),f.r_())})),m(u,nv.EventType.ERROR,(t=>{h||(h=!0,vv(Dk,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,"Message:",t.message),f.r_(new Nv(Sv.UNAVAILABLE,"The operation could not be completed")))})),m(u,nv.EventType.MESSAGE,(t=>{var n;if(!h){const s=t.data[0];Ev(!!s,16349);const a=s,i=(null==a?void 0:a.error)||(null===(n=a[0])||void 0===n?void 0:n.error);if(i){gv(Dk,`RPC '${e}' stream ${r} received error:`,i);const t=i.status;let n=function(e){const t=Vw[e];if(void 0!==t)return qw(t)}(t),s=i.message;void 0===n&&(n=Sv.INTERNAL,s="Unknown error status: "+t+" with message "+i.message),h=!0,f.r_(new Nv(n,s)),u.close()}else gv(Dk,`RPC '${e}' stream ${r} received:`,s),f.i_(s)}})),m(i,iv.STAT_EVENT,(t=>{t.stat===av.PROXY?gv(Dk,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===av.NOPROXY&&gv(Dk,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.n_()}),0),f}}function Pk(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(e){return new oE(e,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e,t,n=1e3,r=1.5,s=6e4){this.bi=e,this.timerId=t,this.u_=n,this.c_=r,this.l_=s,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),n=Math.max(0,Date.now()-this.T_),r=Math.max(0,t-n);r>0&&gv("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,r,(()=>(this.T_=Date.now(),e()))),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){null!==this.P_&&(this.P_.skipDelay(),this.P_=null)}cancel(){null!==this.P_&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok="PersistentStream";class Uk{constructor(e,t,n,r,s,a,i,o){this.bi=e,this.R_=n,this.V_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=i,this.listener=o,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new Lk(e,t)}w_(){return 1===this.state||5===this.state||this.b_()}b_(){return 2===this.state||3===this.state}start(){this.p_=0,4!==this.state?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&null===this.f_&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,(()=>this.C_())))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,4!==e?this.y_.reset():t&&t.code===Sv.RESOURCE_EXHAUSTED?(yv(t.toString()),yv("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===Sv.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.m_===t&&this.B_(e,n)}),(t=>{e((()=>{const e=new Nv(Sv.UNKNOWN,"Fetching auth token failed: "+t.message);return this.L_(e)}))}))}B_(e,t){const n=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo((()=>{n((()=>this.listener.jo()))})),this.stream.Jo((()=>{n((()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,(()=>(this.b_()&&(this.state=3),Promise.resolve()))),this.listener.Jo())))})),this.stream.Zo((e=>{n((()=>this.L_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.p_?this.q_(e):this.onNext(e)))}))}S_(){this.state=5,this.y_.E_((async()=>{this.state=0,this.start()}))}L_(e){return gv(Ok,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget((()=>this.m_===e?t():(gv(Ok,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Fk extends Uk{constructor(e,t,n,r,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,a),this.serializer=s}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:xv(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Ev(void 0===t||"string"==typeof t,58123),wb.fromBase64String(t||"")):(Ev(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),wb.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),i=t.targetChange.cause,o=i&&function(e){const t=void 0===e.code?Sv.UNKNOWN:qw(e.code);return new Nv(t,e.message||"")}(i);n=new Zw(r,s,a,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=yE(e,r.document.name),a=hE(r.document.updateTime),i=r.document.createTime?hE(r.document.createTime):Wv.min(),o=new rx({mapValue:{fields:r.document.fields}}),l=ax.newFoundDocument(s,a,i,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Yw(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=yE(e,r.document),a=r.readTime?hE(r.readTime):Wv.min(),i=ax.newNoDocument(s,a),o=r.removedTargetIds||[];n=new Yw([],o,i.key,i)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=yE(e,r.document),a=r.removedTargetIds||[];n=new Yw([],a,s,null)}else{if(!("filter"in t))return xv(11601,{Vt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,a=new zw(r,s),i=e.targetId;n=new Jw(i,a)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Wv.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Wv.min():t.readTime?hE(t.readTime):Wv.min()}(e);return this.listener.Q_(t,n)}U_(e){const t={};t.database=bE(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=_x(r)?{documents:EE(e,r)}:{query:kE(e,r).gt},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=uE(e,t.resumeToken);const r=lE(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Wv.min())>0){n.readTime=cE(e,t.snapshotVersion.toTimestamp());const r=lE(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xv(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.F_(t)}K_(e){const t={};t.database=bE(this.serializer),t.removeTarget=e,this.F_(t)}}class zk extends Uk{constructor(e,t,n,r,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,a),this.serializer=s}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return Ev(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ev(!e.writeResults||0===e.writeResults.length,55816),this.listener.z_()}onNext(e){Ev(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=function(e,t){return e&&e.length>0?(Ev(void 0!==t,14353),e.map((e=>function(e,t){let n=e.updateTime?hE(e.updateTime):hE(t);return n.isEqual(Wv.min())&&(n=hE(t)),new ww(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=hE(e.commitTime);return this.listener.j_(n,t)}H_(){const e={};e.database=bE(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>function(e,t){let n;if(t instanceof Aw)n={update:wE(e,t.key,t.value)};else if(t instanceof Mw)n={delete:gE(e,t.key)};else if(t instanceof _w)n={update:wE(e,t.key,t.data),updateMask:DE(t.fieldMask)};else{if(!(t instanceof Lw))return xv(16599,{ft:t.type});n={verify:gE(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof hw)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof fw)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof pw)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof yw)return{fieldPath:t.field.canonicalString(),increment:n.Re};throw xv(20930,{transform:t.transform})}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:dE(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:xv(27497)}(e,t.precondition)),n}(this.serializer,e)))};this.F_(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{}class Bk extends Vk{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.J_=!1}Y_(){if(this.J_)throw new Nv(Sv.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,n,r){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Qo(e,mE(t,n),r,s,a))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Sv.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Nv(Sv.UNKNOWN,e.toString())}))}Wo(e,t,n,r,s){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,i])=>this.connection.Wo(e,mE(t,n),r,a,i,s))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Sv.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Nv(Sv.UNKNOWN,e.toString())}))}terminate(){this.J_=!0,this.connection.terminate()}}class qk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){0===this.Z_&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve()))))}ia(e){"Online"===this.state?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,"Online"===e&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(yv(t),this.ea=!1):gv("OnlineStateTracker",t)}sa(){null!==this.X_&&(this.X_.cancel(),this.X_=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k="RemoteStore";class Hk{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=s,this.ca.vo((e=>{n.enqueueAndForget((async()=>{eS(this)&&(gv($k,"Restarting streams for network reachability change."),await async function(e){const t=kv(e);t.aa.add(4),await Gk(t),t.la.set("Unknown"),t.aa.delete(4),await Wk(t)}(this))}))})),this.la=new qk(n,r)}}async function Wk(e){if(eS(e))for(const t of e.ua)await t(!0)}async function Gk(e){for(const t of e.ua)await t(!1)}function Kk(e,t){const n=kv(e);n._a.has(t.targetId)||(n._a.set(t.targetId,t),Zk(n)?Jk(n):vS(n).b_()&&Xk(n,t))}function Qk(e,t){const n=kv(e),r=vS(n);n._a.delete(t),r.b_()&&Yk(n,t),0===n._a.size&&(r.b_()?r.v_():eS(n)&&n.la.set("Unknown"))}function Xk(e,t){if(e.ha.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Wv.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}vS(e).U_(t)}function Yk(e,t){e.ha.Ke(t),vS(e).K_(t)}function Jk(e){e.ha=new tE({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e._a.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),vS(e).start(),e.la.ta()}function Zk(e){return eS(e)&&!vS(e).w_()&&e._a.size>0}function eS(e){return 0===kv(e).aa.size}function tS(e){e.ha=void 0}async function nS(e){e.la.set("Online")}async function rS(e){e._a.forEach(((t,n)=>{Xk(e,t)}))}async function sS(e,t){tS(e),Zk(e)?(e.la.ia(t),Jk(e)):e.la.set("Unknown")}async function aS(e,t,n){if(e.la.set("Online"),t instanceof Zw&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e._a.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e._a.delete(r),e.ha.removeTarget(r))}(e,t)}catch(n){gv($k,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await iS(e,n)}else if(t instanceof Yw?e.ha.Xe(t):t instanceof Jw?e.ha.ot(t):e.ha.nt(t),!n.isEqual(Wv.min()))try{const t=await gk(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.ha.It(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e._a.get(r);s&&e._a.set(r,s.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e._a.get(t);if(!r)return;e._a.set(t,r.withResumeToken(wb.EMPTY_BYTE_STRING,r.snapshotVersion)),Yk(e,t);const s=new PE(r.target,t,n,r.sequenceNumber);Xk(e,s)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){gv($k,"Failed to raise snapshot:",t),await iS(e,t)}}async function iS(e,t,n){if(!ab(t))throw t;e.aa.add(1),await Gk(e),e.la.set("Offline"),n||(n=()=>gk(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{gv($k,"Retrying IndexedDB access"),await n(),e.aa.delete(1),await Wk(e)}))}function oS(e,t){return t().catch((n=>iS(e,n,t)))}async function lS(e){const t=kv(e),n=bS(t);let r=t.oa.length>0?t.oa[t.oa.length-1].batchId:-1;for(;cS(t);)try{const e=await vk(t.localStore,r);if(null===e){0===t.oa.length&&n.v_();break}r=e.batchId,uS(t,e)}catch(e){await iS(t,e)}dS(t)&&hS(t)}function cS(e){return eS(e)&&e.oa.length<10}function uS(e,t){e.oa.push(t);const n=bS(e);n.b_()&&n.W_&&n.G_(t.mutations)}function dS(e){return eS(e)&&!bS(e).w_()&&e.oa.length>0}function hS(e){bS(e).start()}async function fS(e){bS(e).H_()}async function mS(e){const t=bS(e);for(const n of e.oa)t.G_(n.mutations)}async function pS(e,t,n){const r=e.oa.shift(),s=Uw.from(r,t,n);await oS(e,(()=>e.remoteSyncer.applySuccessfulWrite(s))),await lS(e)}async function gS(e,t){t&&bS(e).W_&&await async function(e,t){if(function(e){return function(e){switch(e){case Sv.OK:return xv(64938);case Sv.CANCELLED:case Sv.UNKNOWN:case Sv.DEADLINE_EXCEEDED:case Sv.RESOURCE_EXHAUSTED:case Sv.INTERNAL:case Sv.UNAVAILABLE:case Sv.UNAUTHENTICATED:return!1;case Sv.INVALID_ARGUMENT:case Sv.NOT_FOUND:case Sv.ALREADY_EXISTS:case Sv.PERMISSION_DENIED:case Sv.FAILED_PRECONDITION:case Sv.ABORTED:case Sv.OUT_OF_RANGE:case Sv.UNIMPLEMENTED:case Sv.DATA_LOSS:return!0;default:return xv(15467,{code:e})}}(e)&&e!==Sv.ABORTED}(t.code)){const n=e.oa.shift();bS(e).D_(),await oS(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await lS(e)}}(e,t),dS(e)&&hS(e)}async function yS(e,t){const n=kv(e);n.asyncQueue.verifyOperationInProgress(),gv($k,"RemoteStore received new credentials");const r=eS(n);n.aa.add(3),await Gk(n),r&&n.la.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.aa.delete(3),await Wk(n)}function vS(e){return e.Pa||(e.Pa=function(e,t,n){const r=kv(e);return r.Y_(),new Fk(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}(e.datastore,e.asyncQueue,{jo:nS.bind(null,e),Jo:rS.bind(null,e),Zo:sS.bind(null,e),Q_:aS.bind(null,e)}),e.ua.push((async t=>{t?(e.Pa.D_(),Zk(e)?Jk(e):e.la.set("Unknown")):(await e.Pa.stop(),tS(e))}))),e.Pa}function bS(e){return e.Ta||(e.Ta=function(e,t,n){const r=kv(e);return r.Y_(),new zk(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{jo:()=>Promise.resolve(),Jo:fS.bind(null,e),Zo:gS.bind(null,e),z_:mS.bind(null,e),j_:pS.bind(null,e)}),e.ua.push((async t=>{t?(e.Ta.D_(),await lS(e)):(await e.Ta.stop(),e.oa.length>0&&(gv($k,`Stopping write stream with ${e.oa.length} pending writes`),e.oa=[]))}))),e.Ta
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class xS{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new Tv,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const a=Date.now()+n,i=new xS(e,t,a,r,s);return i.start(n),i}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Nv(Sv.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wS(e,t){if(yv("AsyncQueue",`${t}: ${e}`),ab(e))return new Nv(Sv.UNAVAILABLE,`${t}: ${e}`);throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{static emptySet(e){return new ES(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Jv.comparator(t.key,n.key):(e,t)=>Jv.comparator(e.key,t.key),this.keyedMap=Xx(),this.sortedSet=new mb(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ES))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new ES;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(){this.Ia=new mb(Jv.comparator)}track(e){const t=e.doc.key,n=this.Ia.get(t);n?0!==e.type&&3===n.type?this.Ia=this.Ia.insert(t,e):3===e.type&&1!==n.type?this.Ia=this.Ia.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Ia=this.Ia.remove(t):1===e.type&&2===n.type?this.Ia=this.Ia.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):xv(63341,{Vt:e,Ea:n}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal(((t,n)=>{e.push(n)})),e}}class SS{constructor(e,t,n,r,s,a,i,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=i,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const a=[];return t.forEach((e=>{a.push({type:0,doc:e})})),new SS(e,t,ES.emptySet(t),a,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zx(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some((e=>e.ma()))}}class TS{constructor(){this.queries=CS(),this.onlineState="Unknown",this.fa=new Set}terminate(){!function(e,t){const n=kv(e),r=n.queries;n.queries=CS(),r.forEach(((e,n)=>{for(const r of n.Ra)r.onError(t)}))}(this,new Nv(Sv.ABORTED,"Firestore shutting down"))}}function CS(){return new Wx((e=>Vx(e)),zx)}async function jS(e,t){const n=kv(e);let r=3;const s=t.query;let a=n.queries.get(s);a?!a.Va()&&t.ma()&&(r=2):(a=new NS,r=t.ma()?0:1);try{switch(r){case 0:a.Aa=await n.onListen(s,!0);break;case 1:a.Aa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=wS(e,`Initialization of query '${Bx(t.query)}' failed`);return void t.onError(n)}n.queries.set(s,a),a.Ra.push(t),t.ga(n.onlineState),a.Aa&&t.pa(a.Aa)&&DS(n)}async function RS(e,t){const n=kv(e),r=t.query;let s=3;const a=n.queries.get(r);if(a){const e=a.Ra.indexOf(t);e>=0&&(a.Ra.splice(e,1),0===a.Ra.length?s=t.ma()?0:1:!a.Va()&&t.ma()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function AS(e,t){const n=kv(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.Ra)e.pa(s)&&(r=!0);t.Aa=s}}r&&DS(n)}function _S(e,t,n){const r=kv(e),s=r.queries.get(t);if(s)for(const a of s.Ra)a.onError(n);r.queries.delete(t)}function DS(e){e.fa.forEach((e=>{e.next()}))}var IS,PS;(PS=IS||(IS={})).ya="default",PS.Cache="cache";class MS{constructor(e,t,n){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=n||{}}pa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new SS(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache)return!0;if(!this.ma())return!0;const n="Offline"!==t;return(!this.options.Fa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Ca(e){e=SS.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==IS.Cache}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e){this.key=e}}class OS{constructor(e){this.key=e}}class US{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=rw(),this.mutatedKeys=rw(),this.Ua=$x(e),this.Ka=new ES(this.Ua)}get Wa(){return this.qa}Ga(e,t){const n=t?t.za:new kS,r=t?t.Ka:this.Ka;let s=t?t.mutatedKeys:this.mutatedKeys,a=r,i=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=qx(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.ja(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Ua(u,o)>0||l&&this.Ua(u,l)<0)&&(i=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(i=!0)),f&&(u?(a=a.add(u),s=h?s.add(e):s.delete(e)):(a=a.delete(e),s=s.delete(e)))})),null!==this.query.limit)for(;a.size>this.query.limit;){const e="F"===this.query.limitType?a.last():a.first();a=a.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{Ka:a,za:n,ys:i,mutatedKeys:s}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const a=e.za.da();a.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xv(20277,{Vt:e})}};return n(e)-n(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e.type,t.type)||this.Ua(e.doc,t.doc))),this.Ha(n),r=null!=r&&r;const i=t&&!r?this.Ja():[],o=0===this.$a.size&&this.current&&!r?1:0,l=o!==this.Qa;return this.Qa=o,0!==a.length||l?{snapshot:new SS(this.query,e.Ka,s,a,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ya:i}:{Ya:i}}ga(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new kS,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach((e=>this.qa=this.qa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.qa=this.qa.delete(e))),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=rw(),this.Ka.forEach((e=>{this.Za(e.key)&&(this.$a=this.$a.add(e.key))}));const t=[];return e.forEach((e=>{this.$a.has(e)||t.push(new OS(e))})),this.$a.forEach((n=>{e.has(n)||t.push(new LS(n))})),t}Xa(e){this.qa=e.Ns,this.$a=rw();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return SS.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,0===this.Qa,this.hasCachedResults)}}const FS="SyncEngine";class zS{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class VS{constructor(e){this.key=e,this.tu=!1}}class BS{constructor(e,t,n,r,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.nu={},this.ru=new Wx((e=>Vx(e)),zx),this.iu=new Map,this.su=new Set,this.ou=new mb(Jv.comparator),this._u=new Map,this.au=new ek,this.uu={},this.cu=new Map,this.lu=BE.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return!0===this.hu}}async function qS(e,t,n=!0){const r=uN(e);let s;const a=r.ru.get(t);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.eu()):s=await HS(r,t,n,!0),s}async function $S(e,t){const n=uN(e);await HS(n,t,!0,!1)}async function HS(e,t,n,r){const s=await function(e,t){const n=kv(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.ai.getTargetData(e,t).next((s=>s?(r=s,sb.resolve(r)):n.ai.allocateTargetId(e).next((s=>(r=new PE(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.ai.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ss.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ss=n.Ss.insert(e.targetId,e),n.Ds.set(t,e.targetId)),e}))}(e.localStore,Ox(t)),a=s.targetId,i=e.sharedClientState.addLocalQueryTarget(a,n);let o;return r&&(o=await async function(e,t,n,r,s){e.Pu=(t,n,r)=>async function(e,t,n,r){let s=t.view.Ga(n);s.ys&&(s=await xk(e.localStore,t.query,!1).then((({documents:e})=>t.view.Ga(e,s))));const a=r&&r.targetChanges.get(t.targetId),i=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,a,i);return sN(e,t.targetId,o.Ya),o.snapshot}(e,t,n,r);const a=await xk(e.localStore,t,!0),i=new US(t,a.Ns),o=i.Ga(a.documents),l=Xw.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=i.applyChanges(o,e.isPrimaryClient,l);sN(e,n,c.Ya);const u=new zS(t,n,i);return e.ru.set(t,u),e.iu.has(n)?e.iu.get(n).push(t):e.iu.set(n,[t]),c.snapshot}(e,t,a,"current"===i,s.resumeToken)),e.isPrimaryClient&&n&&Kk(e.remoteStore,s),o}async function WS(e,t,n){const r=kv(e),s=r.ru.get(t),a=r.iu.get(s.targetId);if(a.length>1)return r.iu.set(s.targetId,a.filter((e=>!zx(e,t)))),void r.ru.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await bk(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Qk(r.remoteStore,s.targetId),nN(r,s.targetId)})).catch(rb)):(nN(r,s.targetId),await bk(r.localStore,s.targetId,!0))}async function GS(e,t){const n=kv(e),r=n.ru.get(t),s=n.iu.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Qk(n.remoteStore,r.targetId))}async function KS(e,t,n){const r=function(e){const t=kv(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=JS.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ZS.bind(null,t),t}(e);try{const e=await function(e,t){const n=kv(e),r=Hv.now(),s=t.reduce(((e,t)=>e.add(t.key)),rw());let a,i;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let o=Kx(),l=rw();return n.Cs.getEntries(e,s).next((e=>{o=e,o.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,o))).next((s=>{a=s;const i=[];for(const e of t){const t=jw(e,a.get(e.key).overlayedDocument);null!=t&&i.push(new _w(e.key,t,sx(t.value.mapValue),Ew.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,i,t)})).next((t=>{i=t;const r=t.applyToLocalDocumentSet(a,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:i.batchId,changes:Yx(a)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.uu[e.currentUser.toKey()];r||(r=new mb(Uv)),r=r.insert(t,n),e.uu[e.currentUser.toKey()]=r}(r,e.batchId,n),await oN(r,e.changes),await lS(r.remoteStore)}catch(e){const t=wS(e,"Failed to persist write");n.reject(t)}}async function QS(e,t){const n=kv(e);try{const e=await yk(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n._u.get(t);r&&(Ev(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.tu=!0:e.modifiedDocuments.size>0?Ev(r.tu,14607):e.removedDocuments.size>0&&(Ev(r.tu,42227),r.tu=!1))})),await oN(n,e,t)}catch(e){await rb(e)}}function XS(e,t,n){const r=kv(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ru.forEach(((n,r)=>{const s=r.view.ga(t);s.snapshot&&e.push(s.snapshot)})),function(e,t){const n=kv(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const s of n.Ra)s.ga(t)&&(r=!0)})),r&&DS(n)}(r.eventManager,t),e.length&&r.nu.Q_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function YS(e,t,n){const r=kv(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r._u.get(t),a=s&&s.key;if(a){let e=new mb(Jv.comparator);e=e.insert(a,ax.newNoDocument(a,Wv.min()));const n=rw().add(a),s=new Qw(Wv.min(),new Map,new mb(Uv),e,n);await QS(r,s),r.ou=r.ou.remove(a),r._u.delete(t),iN(r)}else await bk(r.localStore,t,!1).then((()=>nN(r,t,n))).catch(rb)}async function JS(e,t){const n=kv(e),r=t.batch.batchId;try{const e=await function(e,t){const n=kv(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),s=n.Cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,a=s.keys();let i=sb.resolve();return a.forEach((e=>{i=i.next((()=>r.getEntry(t,e))).next((t=>{const a=n.docVersions.get(e);Ev(null!==a,48541),t.version.compareTo(a)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),i.next((()=>e.mutationQueue.removeMutationBatch(t,s)))}(n,e,t,s).next((()=>s.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=rw();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);tN(n,r,null),eN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await oN(n,e)}catch(e){await rb(e)}}async function ZS(e,t,n){const r=kv(e);try{const e=await function(e,t){const n=kv(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Ev(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);tN(r,t,n),eN(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await oN(r,e)}catch(n){await rb(n)}}function eN(e,t){(e.cu.get(t)||[]).forEach((e=>{e.resolve()})),e.cu.delete(t)}function tN(e,t,n){const r=kv(e);let s=r.uu[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.uu[r.currentUser.toKey()]=s}}function nN(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.iu.get(t))e.ru.delete(r),n&&e.nu.Tu(r,n);e.iu.delete(t),e.isPrimaryClient&&e.au.Ur(t).forEach((t=>{e.au.containsKey(t)||rN(e,t)}))}function rN(e,t){e.su.delete(t.path.canonicalString());const n=e.ou.get(t);null!==n&&(Qk(e.remoteStore,n),e.ou=e.ou.remove(t),e._u.delete(n),iN(e))}function sN(e,t,n){for(const r of n)r instanceof LS?(e.au.addReference(r.key,t),aN(e,r)):r instanceof OS?(gv(FS,"Document no longer in limbo: "+r.key),e.au.removeReference(r.key,t),e.au.containsKey(r.key)||rN(e,r.key)):xv(19791,{Iu:r})}function aN(e,t){const n=t.key,r=n.path.canonicalString();e.ou.get(n)||e.su.has(r)||(gv(FS,"New document in limbo: "+n),e.su.add(r),iN(e))}function iN(e){for(;e.su.size>0&&e.ou.size<e.maxConcurrentLimboResolutions;){const t=e.su.values().next().value;e.su.delete(t);const n=new Jv(Qv.fromString(t)),r=e.lu.next();e._u.set(r,new VS(n)),e.ou=e.ou.insert(n,r),Kk(e.remoteStore,new PE(Ox(Ix(n.path)),r,"TargetPurposeLimboResolution",ib.le))}}async function oN(e,t,n){const r=kv(e),s=[],a=[],i=[];r.ru.isEmpty()||(r.ru.forEach(((e,o)=>{i.push(r.Pu(o,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const s=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,s?"current":"not-current")}if(e){s.push(e);const t=uk.Ps(o.targetId,e);a.push(t)}})))})),await Promise.all(i),r.nu.Q_(s),await async function(e,t){const n=kv(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>sb.forEach(t,(t=>sb.forEach(t.ls,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>sb.forEach(t.hs,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!ab(e))throw e;gv(fk,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ss.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.Ss=n.Ss.insert(e,s)}}}(r.localStore,a))}async function lN(e,t){const n=kv(e);if(!n.currentUser.isEqual(t)){gv(FS,"User change. New user:",t.toKey());const e=await pk(n.localStore,t);n.currentUser=t,function(e,t){e.cu.forEach((e=>{e.forEach((e=>{e.reject(new Nv(Sv.CANCELLED,t))}))})),e.cu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await oN(n,e.Ms)}}function cN(e,t){const n=kv(e),r=n._u.get(t);if(r&&r.tu)return rw().add(r.key);{let e=rw();const r=n.iu.get(t);if(!r)return e;for(const t of r){const r=n.ru.get(t);e=e.unionWith(r.view.Wa)}return e}}function uN(e){const t=kv(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=QS.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=cN.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=YS.bind(null,t),t.nu.Q_=AS.bind(null,t.eventManager),t.nu.Tu=_S.bind(null,t.eventManager),t}class dN{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mk(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return function(e,t,n,r){return new mk(e,t,n,r)}(this.persistence,new hk,e.initialUser,this.serializer)}Ru(e){return new ik(lk.Ei,this.serializer)}Au(e){return new Ek}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dN.provider={build:()=>new dN};class hN extends dN{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){Ev(this.persistence.referenceDelegate instanceof ck,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new WE(n,e.asyncQueue,t)}Ru(e){const t=void 0!==this.cacheSizeBytes?VE.withCacheSize(this.cacheSizeBytes):VE.DEFAULT;return new ik((e=>ck.Ei(e,t)),this.serializer)}}class fN{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>XS(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=lN.bind(null,this.syncEngine),await async function(e,t){const n=kv(e);t?(n.aa.delete(2),await Wk(n)):t||(n.aa.add(2),await Gk(n),n.la.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new TS}createDatastore(e){const t=Mk(e.databaseInfo.databaseId),n=function(e){return new Ik(e)}(e.databaseInfo);return function(e,t,n,r){return new Bk(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new Hk(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,(e=>XS(this.syncEngine,e,0)),Nk.C()?new Nk:new kk)}createSyncEngine(e,t){return function(e,t,n,r,s,a,i){const o=new BS(e,t,n,r,s,a);return i&&(o.hu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=kv(e);gv($k,"RemoteStore shutting down."),t.aa.add(5),await Gk(t),t.ca.shutdown(),t.la.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}fN.provider={build:()=>new fN};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class mN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):yv("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN="FirestoreClient";class gN{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=hv.UNAUTHENTICATED,this.clientId=Ov.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,(async e=>{gv(pN,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(gv(pN,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Tv;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=wS(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function yN(e,t){e.asyncQueue.verifyOperationInProgress(),gv(pN,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await pk(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function vN(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){gv(pN,"Using user provided OfflineComponentProvider");try{await yN(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(e){return"FirebaseError"===e.name?e.code===Sv.FAILED_PRECONDITION||e.code===Sv.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(r))throw r;vv("Error using user provided cache. Falling back to memory cache: "+r),await yN(e,new dN)}}else gv(pN,"Using default OfflineComponentProvider"),await yN(e,new hN(void 0));return e._offlineComponents}(e);gv(pN,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>yS(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>yS(t.remoteStore,n))),e._onlineComponents=t}async function bN(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(gv(pN,"Using user provided OnlineComponentProvider"),await vN(e,e._uninitializedComponentsProvider._online)):(gv(pN,"Using default OnlineComponentProvider"),await vN(e,new fN))),e._onlineComponents}async function xN(e){const t=await bN(e),n=t.eventManager;return n.onListen=qS.bind(null,t.syncEngine),n.onUnlisten=WS.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=$S.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=GS.bind(null,t.syncEngine),n}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function wN(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const EN=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kN(e,t,n){if(!n)throw new Nv(Sv.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function SN(e){if(!Jv.isDocumentKey(e))throw new Nv(Sv.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function NN(e){if(Jv.isDocumentKey(e))throw new Nv(Sv.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function TN(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":xv(12329,{type:typeof e})}function CN(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Nv(Sv.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=TN(e);throw new Nv(Sv.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN="firestore.googleapis.com",RN=!0;class AN{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Nv(Sv.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jN,this.ssl=RN}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:RN;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=zE;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Nv(Sv.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Nv(Sv.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wN(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Nv(Sv.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Nv(Sv.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Nv(Sv.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _N{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new AN({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Nv(Sv.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Nv(Sv.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new AN(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new jv;switch(e.type){case"firstParty":return new Dv(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Nv(Sv.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=EN.get(e);t&&(gv("ComponentProvider","Removing Datastore"),EN.delete(e),t.terminate())}(this),Promise.resolve()}}function DN(e,t,n,r={}){var s;const a=(e=CN(e,_N))._getSettings(),i=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),o=`${t}:${n}`;a.host!==jN&&a.host!==o&&vv("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},a),{host:o,ssl:!1,emulatorOptions:r});if(!Tg(l,i)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=hv.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[pg(JSON.stringify({alg:"none",type:"JWT"})),pg(JSON.stringify(a)),""].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const a=r.mockUserToken.sub||r.mockUserToken.user_id;if(!a)throw new Nv(Sv.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new hv(a)}e._authCredentials=new Rv(new Cv(t,n))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new IN(this.firestore,e,this._query)}}class PN{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new MN(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new PN(this.firestore,e,this._key)}}class MN extends IN{constructor(e,t,n){super(e,t,Ix(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new PN(this.firestore,null,new Jv(e))}withConverter(e){return new MN(this.firestore,e,this._path)}}function LN(e,t,...n){if(e=jg(e),kN("collection","path",t),e instanceof _N){const r=Qv.fromString(t,...n);return NN(r),new MN(e,null,r)}{if(!(e instanceof PN||e instanceof MN))throw new Nv(Sv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Qv.fromString(t,...n));return NN(r),new MN(e.firestore,null,r)}}function ON(e,t,...n){if(e=jg(e),1===arguments.length&&(t=Ov.newId()),kN("doc","path",t),e instanceof _N){const r=Qv.fromString(t,...n);return SN(r),new PN(e,null,new Jv(r))}{if(!(e instanceof PN||e instanceof MN))throw new Nv(Sv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Qv.fromString(t,...n));return SN(r),new PN(e.firestore,e instanceof MN?e.converter:null,new Jv(r))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN="AsyncQueue";class FN{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new Lk(this,"async_queue_retry"),this.ju=()=>{const e=Pk();e&&gv(UN,"Visibility state changed to "+e.visibilityState),this.y_.A_()},this.Hu=e;const t=Pk();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=Pk();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise((()=>{}));const t=new Tv;return this.Yu((()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Qu.push(e),this.Zu())))}async Zu(){if(0!==this.Qu.length){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!ab(e))throw e;gv(UN,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_((()=>this.Zu()))}}Yu(e){const t=this.Hu.then((()=>(this.Wu=!0,e().catch((e=>{throw this.Ku=e,this.Wu=!1,yv("INTERNAL UNHANDLED ERROR: ",zN(e)),e})).then((e=>(this.Wu=!1,e))))));return this.Hu=t,t}enqueueAfterDelay(e,t,n){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const r=xS.createAndSchedule(this,e,t,n,(e=>this.Xu(e)));return this.Uu.push(r),r}Ju(){this.Ku&&xv(47125,{ec:zN(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do{e=this.Hu,await e}while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then((()=>{this.Uu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Uu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.tc()}))}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function zN(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function VN(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,["next","error","complete"])}class BN extends _N{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new FN,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new FN(e),this._firestoreClient=void 0,await e}}}function qN(e,t){const n="object"==typeof e?e:function(e=_y){const t=Iy.get(e);if(!t&&e===_y&&xg())return zy();if(!t)throw Uy.create("no-app",{appName:e});return t}(),r="string"==typeof e?e:Pb,s=function(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const e=bg("firestore");e&&DN(s,...e)}return s}function $N(e){if(e._terminated)throw new Nv(Sv.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||function(e){var t,n,r;const s=e._freezeSettings(),a=function(e,t,n,r){return new Ib(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,wN(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new gN(e._authCredentials,e._appCheckCredentials,e._queue,a,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e),e._firestoreClient}class HN{constructor(e){this._byteString=e}static fromBase64String(e){try{return new HN(wb.fromBase64String(e))}catch(e){throw new Nv(Sv.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new HN(wb.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Nv(Sv.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yv(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e){this._methodName=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Nv(Sv.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Nv(Sv.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Uv(this._lat,e._lat)||Uv(this._long,e._long)}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=/^__.*__$/;class YN{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new _w(e,this.data,this.fieldMask,t,this.fieldTransforms):new Aw(e,this.data,t,this.fieldTransforms)}}class JN{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new _w(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ZN(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xv(40011,{oc:e})}}class eT{constructor(e,t,n,r,s,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this._c(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new eT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ac({path:n,cc:!1});return r.lc(e),r}hc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ac({path:n,cc:!1});return r._c(),r}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return pT(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(0===e.length)throw this.Tc("Document fields must not be empty");if(ZN(this.oc)&&XN.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class tT{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Mk(e)}dc(e,t,n,r=!1){return new eT({oc:e,methodName:t,Ec:n,path:Yv.emptyPath(),cc:!1,Ic:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nT(e){const t=e._freezeSettings(),n=Mk(e._databaseId);return new tT(e._databaseId,!!t.ignoreUndefinedProperties,n)}function rT(e,t,n,r,s,a={}){const i=e.dc(a.merge||a.mergeFields?2:0,t,n,s);dT("Data must be an object, but it was:",i,r);const o=cT(r,i);let l,c;if(a.merge)l=new bb(i.fieldMask),c=i.fieldTransforms;else if(a.mergeFields){const e=[];for(const r of a.mergeFields){const s=hT(t,r,n);if(!i.contains(s))throw new Nv(Sv.INVALID_ARGUMENT,`Field '${s}' is specified in your field mask but missing from your input data.`);gT(e,s)||e.push(s)}l=new bb(e),c=i.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=i.fieldTransforms;return new YN(new rx(o),l,c)}class sT extends GN{_toFieldTransform(e){if(2!==e.oc)throw 1===e.oc?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sT}}class aT extends GN{_toFieldTransform(e){return new xw(e.path,new hw)}isEqual(e){return e instanceof aT}}function iT(e,t,n,r){const s=e.dc(1,t,n);dT("Data must be an object, but it was:",s,r);const a=[],i=rx.empty();hb(r,((e,r)=>{const o=mT(t,e,n);r=jg(r);const l=s.hc(o);if(r instanceof sT)a.push(o);else{const e=lT(r,l);null!=e&&(a.push(o),i.set(o,e))}}));const o=new bb(a);return new JN(i,o,s.fieldTransforms)}function oT(e,t,n,r,s,a){const i=e.dc(1,t,n),o=[hT(t,r,n)],l=[s];if(a.length%2!=0)throw new Nv(Sv.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<a.length;h+=2)o.push(hT(t,a[h])),l.push(a[h+1]);const c=[],u=rx.empty();for(let h=o.length-1;h>=0;--h)if(!gT(c,o[h])){const e=o[h];let t=l[h];t=jg(t);const n=i.hc(e);if(t instanceof sT)c.push(e);else{const r=lT(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new bb(c);return new JN(u,d,i.fieldTransforms)}function lT(e,t){if(uT(e=jg(e)))return dT("Unsupported field value:",t,e),cT(e,t);if(e instanceof GN)return function(e,t){if(!ZN(t.oc))throw t.Tc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Tc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.cc&&4!==t.oc)throw t.Tc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=lT(s,t.Pc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=jg(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ow(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Hv.fromDate(e);return{timestampValue:cE(t.serializer,n)}}if(e instanceof Hv){const n=new Hv(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:cE(t.serializer,n)}}if(e instanceof KN)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof HN)return{bytesValue:uE(t.serializer,e._byteString)};if(e instanceof PN){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Tc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:fE(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof QN)return function(e,t){return{mapValue:{fields:{[Lb]:{stringValue:Fb},[zb]:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.Tc("VectorValues must only contain numeric values.");return aw(t.serializer,e)}))}}}}}}(e,t);throw t.Tc(`Unsupported field value: ${TN(e)}`)}(e,t)}function cT(e,t){const n={};return fb(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):hb(e,((e,r)=>{const s=lT(r,t.uc(e));null!=s&&(n[e]=s)})),{mapValue:{fields:n}}}function uT(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Hv||e instanceof KN||e instanceof HN||e instanceof PN||e instanceof GN||e instanceof QN)}function dT(e,t,n){if(!uT(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=TN(n);throw"an object"===r?t.Tc(e+" a custom object"):t.Tc(e+" "+r)}}function hT(e,t,n){if((t=jg(t))instanceof WN)return t._internalPath;if("string"==typeof t)return mT(e,t);throw pT("Field path arguments must be of type string or ",e,!1,void 0,n)}const fT=new RegExp("[~\\*/\\[\\]]");function mT(e,t,n){if(t.search(fT)>=0)throw pT(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new WN(...t.split("."))._internalPath}catch(r){throw pT(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function pT(e,t,n,r,s){const a=r&&!r.isEmpty(),i=void 0!==s;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(a||i)&&(l+=" (found",a&&(l+=` in field ${r}`),i&&(l+=` in document ${s}`),l+=")"),new Nv(Sv.INVALID_ARGUMENT,o+e+l)}function gT(e,t){return e.some((e=>e.isEqual(t)))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new PN(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new vT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(bT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class vT extends yT{data(){return super.data()}}function bT(e,t){return"string"==typeof t?mT(e,t):t instanceof WN?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Nv(Sv.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wT{}class ET extends wT{}function kT(e,t,...n){let r=[];t instanceof wT&&r.push(t),r=r.concat(n),function(e){const t=e.filter((e=>e instanceof TT)).length,n=e.filter((e=>e instanceof ST)).length;if(t>1||t>0&&n>0)throw new Nv(Sv.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r);for(const s of r)e=s._apply(e);return e}class ST extends ET{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new ST(e,t,n)}_apply(e){const t=this._parse(e);return DT(e._query,t),new IN(e.firestore,e.converter,Ux(e._query,t))}_parse(e){const t=nT(e.firestore),n=function(e,t,n,r,s,a,i){let o;if(s.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Nv(Sv.INVALID_ARGUMENT,`Invalid Query. You can't perform '${a}' queries on documentId().`);if("in"===a||"not-in"===a){_T(i,a);const t=[];for(const n of i)t.push(AT(r,e,n));o={arrayValue:{values:t}}}else o=AT(r,e,i)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||_T(i,a),o=function(e,t,n,r=!1){return lT(n,e.dc(r?4:3,t))}(n,t,i,"in"===a||"not-in"===a);return hx.create(s,a,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function NT(e,t,n){const r=t,s=bT("where",e);return ST._create(s,r,n)}class TT extends wT{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new TT(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:fx.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)DT(n,s),n=Ux(n,s)}(e._query,t),new IN(e.firestore,e.converter,Ux(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class CT extends ET{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new CT(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Nv(Sv.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Nv(Sv.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new cx(t,n)}(e._query,this._field,this._direction);return new IN(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Dx(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function jT(e,t="asc"){const n=t,r=bT("orderBy",e);return CT._create(r,n)}class RT extends ET{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new RT(e,t,n)}_apply(e){return new IN(e.firestore,e.converter,Fx(e._query,this._limit,this._limitType))}}function AT(e,t,n){if("string"==typeof(n=jg(n))){if(""===n)throw new Nv(Sv.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mx(t)&&-1!==n.indexOf("/"))throw new Nv(Sv.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Qv.fromString(n));if(!Jv.isDocumentKey(r))throw new Nv(Sv.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Xb(e,new Jv(r))}if(n instanceof PN)return Xb(e,n._key);throw new Nv(Sv.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${TN(n)}.`)}function _T(e,t){if(!Array.isArray(e)||0===e.length)throw new Nv(Sv.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function DT(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Nv(Sv.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Nv(Sv.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class IT{convertValue(e,t="none"){switch(Vb(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Sb(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Nb(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xv(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return hb(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const s=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[zb].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>Sb(e.doubleValue)));return new QN(s)}convertGeoPoint(e){return new KN(Sb(e.latitude),Sb(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=_b(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Db(e));default:return null}}convertTimestamp(e){const t=kb(e);return new Hv(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Qv.fromString(e);Ev(IE(n),9688,{name:e});const r=new Mb(n.get(1),n.get(3)),s=new Jv(n.popFirst(5));return r.isEqual(t)||yv(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class MT{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class LT extends yT{constructor(e,t,n,r,s,a){super(e,t,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new OT(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(bT("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class OT extends LT{data(e={}){return super.data(e)}}class UT{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new MT(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new OT(this._firestore,this._userDataWriter,n.key,n,new MT(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Nv(Sv.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new OT(e._firestore,e._userDataWriter,n.doc.key,n.doc,new MT(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new OT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new MT(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,a=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),a=n.indexOf(t.doc.key)),{type:FT(t.type),doc:r,oldIndex:s,newIndex:a}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function FT(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xv(61501,{type:e})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(e){e=CN(e,PN);const t=CN(e.firestore,BN);return function(e,t,n={}){const r=new Tv;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,s){const a=new mN({next:o=>{a.yu(),t.enqueueAndForget((()=>RS(e,i)));const l=o.docs.has(n);!l&&o.fromCache?s.reject(new Nv(Sv.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?s.reject(new Nv(Sv.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(o)},error:e=>s.reject(e)}),i=new MS(Ix(n.path),a,{includeMetadataChanges:!0,Fa:!0});return jS(e,i)}(await xN(e),e.asyncQueue,t,n,r))),r.promise}($N(t),e._key).then((n=>KT(t,e,n)))}class VT extends IT{constructor(e){super(),this.firestore=e}convertBytes(e){return new HN(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new PN(this.firestore,null,t)}}function BT(e){e=CN(e,IN);const t=CN(e.firestore,BN),n=$N(t),r=new VT(t);return xT(e._query),function(e,t,n={}){const r=new Tv;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,s){const a=new mN({next:n=>{a.yu(),t.enqueueAndForget((()=>RS(e,i))),n.fromCache&&"server"===r.source?s.reject(new Nv(Sv.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),i=new MS(n,a,{includeMetadataChanges:!0,Fa:!0});return jS(e,i)}(await xN(e),e.asyncQueue,t,n,r))),r.promise}(n,e._query).then((n=>new UT(t,r,e,n)))}function qT(e,t,n){e=CN(e,PN);const r=CN(e.firestore,BN),s=PT(e.converter,t,n);return GT(r,[rT(nT(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,Ew.none())])}function $T(e,t,n,...r){e=CN(e,PN);const s=CN(e.firestore,BN),a=nT(s);let i;return i="string"==typeof(t=jg(t))||t instanceof WN?oT(a,"updateDoc",e._key,t,n,r):iT(a,"updateDoc",e._key,t),GT(s,[i.toMutation(e._key,Ew.exists(!0))])}function HT(e,t){const n=CN(e.firestore,BN),r=ON(e),s=PT(e.converter,t);return GT(n,[rT(nT(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,Ew.exists(!1))]).then((()=>r))}function WT(e,...t){var n,r,s;e=jg(e);let a={includeMetadataChanges:!1,source:"default"},i=0;"object"!=typeof t[i]||VN(t[i])||(a=t[i],i++);const o={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(VN(t[i])){const e=t[i];t[i]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[i+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[i+2]=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}let l,c,u;if(e instanceof PN)c=CN(e.firestore,BN),u=Ix(e._key.path),l={next:n=>{t[i]&&t[i](KT(c,e,n))},error:t[i+1],complete:t[i+2]};else{const n=CN(e,IN);c=CN(n.firestore,BN),u=n._query;const r=new VT(c);l={next:e=>{t[i]&&t[i](new UT(c,r,n,e))},error:t[i+1],complete:t[i+2]},xT(e._query)}return function(e,t,n,r){const s=new mN(r),a=new MS(t,s,n);return e.asyncQueue.enqueueAndForget((async()=>jS(await xN(e),a))),()=>{s.yu(),e.asyncQueue.enqueueAndForget((async()=>RS(await xN(e),a)))}}($N(c),u,o,l)}function GT(e,t){return function(e,t){const n=new Tv;return e.asyncQueue.enqueueAndForget((async()=>KS(await function(e){return bN(e).then((e=>e.syncEngine))}(e),t,n))),n.promise}($N(e),t)}function KT(e,t,n){const r=n.docs.get(t._key),s=new VT(e);return new LT(e,s,t._key,r,new MT(n.hasPendingWrites,n.fromCache),t.converter)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=nT(e)}set(e,t,n){this._verifyNotCommitted();const r=XT(e,this._firestore),s=PT(r.converter,t,n),a=rT(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Ew.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const s=XT(e,this._firestore);let a;return a="string"==typeof(t=jg(t))||t instanceof WN?oT(this._dataReader,"WriteBatch.update",s._key,t,n,r):iT(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(a.toMutation(s._key,Ew.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=XT(e,this._firestore);return this._mutations=this._mutations.concat(new Mw(t._key,Ew.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Nv(Sv.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function XT(e,t){if((e=jg(e)).firestore!==t)throw new Nv(Sv.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}!function(e,t=!0){!function(e){fv=e}("11.6.1"),Oy(new Rg("firestore",((e,{instanceIdentifier:n,options:r})=>{const s=e.getProvider("app").getImmediate(),a=new BN(new Av(e.getProvider("auth-internal")),new Pv(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Nv(Sv.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mb(e.options.projectId,t)}(s,n),s);return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC").setMultipleInstances(!0)),Vy(uv,dv,e),Vy(uv,dv,"esm2017")}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Vy("firebase","11.6.1","app");const YT=qN(zy({apiKey:"AIzaSyAXPOWUzhGZNFjuVXX-bRZYyOqVRUL-vwQ",authDomain:"bigproject-d6daf.firebaseapp.com",projectId:"bigproject-d6daf",storageBucket:"bigproject-d6daf.appspot.com",messagingSenderId:"540438748170",appId:"1:540438748170:web:416d4e38ac4a3be11513f3",measurementId:"G-MVPMBS32W2"})),JT=Y.createContext(),ZT=()=>{const e=Y.useContext(JT);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},eC=({children:t})=>{const[n,r]=Y.useState(null),[s,a]=Y.useState(!0),[i,o]=Y.useState(!1),[l,c]=Y.useState(null),u=()=>{const e=localStorage.getItem("token");if(!e)return!0;try{const t=JSON.parse(atob(e.split(".")[1])).exp;return t-Date.now()/1e3<300}catch(t){return!0}},d=async()=>{try{return o(!0),await of.refreshToken(),!0}catch(e){return!1}finally{o(!1)}},h=async()=>{try{a(!0);const t=await of.getCurrentUser();if(r(t),t&&t.id){localStorage.setItem("userId",String(t.id));try{localStorage.setItem("user",JSON.stringify(t))}catch(e){console.error("Error storing user object in localStorage:",e)}}return t}catch(t){return r(null),null}finally{a(!1)}};Y.useEffect((()=>{(async()=>{try{if(a(!0),!localStorage.getItem("token"))return r(null),void a(!1);if(u()){if(!(await d()))return void f()}await h()}catch(e){f()}finally{a(!1)}})();const e=setInterval((()=>{localStorage.getItem("token")&&u()&&d().catch((()=>{f()}))}),24e4);return()=>{clearInterval(e)}}),[]);const f=async(e="/login")=>{try{a(!0),await of.logout(e)}catch(t){console.error("Logout error:",t)}finally{r(null),a(!1)}},m={user:n,loading:s,refreshingToken:i,error:l,login:async(e,t)=>{try{c(null),a(!0);const n=await of.login(e,t);if(n&&n.token){const e=await h();return e&&e.id&&localStorage.setItem("userId",String(e.id)),zh.success("Connexion russie"),n}throw new Error("Login failed - No token received")}catch(n){const e=n.response?.data?.message||"chec de la connexion";throw c(e),zh.error(e),n}finally{a(!1)}},logout:f,register:async e=>{try{c(null),a(!0);const t=await of.register(e);return zh.success("Inscription russie"),t}catch(t){const e=t.response?.data?.message||"chec de l'inscription";throw c(e),zh.error(e),t}finally{a(!1)}},refreshToken:d,loadUserData:h,isAuthenticated:!!n&&of.isAuthenticated()};return e.jsx(JT.Provider,{value:m,children:t})};var tC={};const nC=()=>{const[e,t]=Y.useState([]),[n,r]=Y.useState(!0),{user:s}=ZT(),a=()=>{try{let t;if(s?.id)t=s.id;else if(localStorage.getItem("user"))try{const e=JSON.parse(localStorage.getItem("user"));t=e?.id}catch(e){console.warn("Error parsing user from localStorage:",e)}else t=localStorage.getItem("userId")||localStorage.getItem("user_id");return t?(t=String(t),localStorage.setItem("userId",t),t):(console.warn("No user ID found in any source"),null)}catch(t){return console.error("useNotifications - Erreur lors de la rcupration de l'ID utilisateur:",t),null}},i=()=>{if(s?.email)return s.email;try{const e=JSON.parse(localStorage.getItem("user")||"{}");return e?.email||null}catch(e){return console.warn("Error parsing user email from localStorage:",e),null}},[o,l]=Y.useState(!0);Y.useEffect((()=>{let e=!0;return(async()=>{const n=a();if(!n)return t([]),void r(!1);o&&(await c(n),await(async e=>{try{if(!e)return;const t=ON(YT,"notificationPreferences",e);(await zT(t)).exists()&&await $T(t,{lastLogin:new Date,lastLoginTimestamp:Date.now()})}catch(t){console.warn("Erreur lors de la mise  jour du timestamp de dernire connexion:",t)}})(n),e&&l(!1));const s=WT(kT(LN(YT,"notifications"),NT("recipientId","==",n),jT("timestamp","desc")),(n=>{if(e)try{const e=new Map;localStorage.getItem("seenNotifications")?.split(",").forEach((t=>{t&&e.set(t,!0)}));const s=n.docs.map((t=>({id:t.id,...t.data(),read:!!e.has(t.id)||(t.data().read||!1)})));localStorage.setItem("seenNotifications",[...e.keys(),...s.filter((e=>e.read)).map((e=>e.id))].join(",")),t(s),r(!1),localStorage.setItem("unreadNotificationCount",s.filter((e=>!e.read)).length)}catch(s){console.error("Error processing notifications:",s),r(!1)}}),(e=>{console.error("Error fetching notifications:",e),r(!1)}))})(),()=>{e=!1}}),[s]);const c=async e=>{try{if(!e)return void console.error("Impossible d'initialiser les prfrences - userId manquant");e=String(e);const n=i(),r=[e,Number(e),parseInt(e,10),`${e}`],s=ON(YT,"notificationPreferences",e),a=await zT(s);if(a.exists()){const e=a.data();!n||e.userEmail&&e.userEmail===n||await $T(s,{userEmail:n,lastUpdated:new Date}),await $T(s,{lastLogin:new Date});try{localStorage.setItem("notificationPreferences",JSON.stringify({...e,lastSynced:(new Date).toISOString()}))}catch(t){console.warn("Impossible de sauvegarder dans localStorage:",t)}return}const o=LN(YT,"notificationPreferences"),l=await BT(o);let c=null;if(l.forEach((e=>{const t=e.data(),s=r.includes(t.userId)||r.includes(e.id),a=n&&t.userEmail===n;(s||a)&&(c={docId:e.id,...t})})),c){c.docId!==e&&await qT(s,{...c,userId:e,userEmail:n||c.userEmail,migratedFrom:c.docId,migratedAt:new Date,lastLogin:new Date});try{localStorage.setItem("notificationPreferences",JSON.stringify({...c,userId:e,lastSynced:(new Date).toISOString()}))}catch(t){console.warn("Impossible de sauvegarder dans localStorage:",t)}return}let u=null;try{const e=localStorage.getItem("notificationPreferences");if(e){const t=JSON.parse(e),s=r.includes(t.userId),a=n&&t.userEmail===n;(s||a)&&(u=t)}}catch(t){console.warn("Erreur lors de la rcupration des prfrences locales:",t)}if(u){const t={...u};delete t.lastUpdated;const r={...t,userId:e,userEmail:n||u.userEmail,lastRestored:new Date,restoredFrom:"localStorage",createdAt:new Date,lastLogin:new Date};await qT(s,r)}else{const r={userId:e,userEmail:n,ROLE_UPDATE:!0,DOCUMENT_UPLOADED:!0,DOCUMENT_DELETED:!0,DOCUMENT_APPROVED:!0,DOCUMENT_REJECTED:!0,createdAt:new Date,lastLogin:new Date};await qT(s,r);try{localStorage.setItem("notificationPreferences",JSON.stringify({...r,createdAt:r.createdAt.toISOString(),lastLogin:r.lastLogin.toISOString()}))}catch(t){console.warn("Impossible de sauvegarder les prfrences dans localStorage:",t)}}}catch(n){console.error("Erreur lors de l'initialisation des prfrences:",n)}},u=async e=>{try{const t=ON(YT,"notifications",e);await $T(t,{read:!0})}catch(t){throw console.error("Error marking notification as read:",t),new Error("Failed to mark notification as read")}},d=async()=>{const e=a();if(!e)return[];try{const t=kT(LN(YT,"notifications"),NT("recipientId","==",e));return(await BT(t)).docs.map((e=>({id:e.id,...e.data()})))}catch(t){return console.error("Error fetching notifications:",t),[]}},h=async()=>{try{const t=a();if(!t)return;const n=kT(LN(YT,"notifications"),NT("recipientId","==",t),jT("timestamp","desc")),r=await BT(n),s=new Date;s.setDate(s.getDate()-30);const i=r.docs.filter((e=>{const t=e.data(),n=t.timestamp?.toDate?t.timestamp.toDate():new Date(t.timestamp);return t.read&&n<s})).map((e=>e.id)),o=20,l=i.slice(0,o);for(const a of l)await(e=ON(YT,"notifications",a),GT(CN(e.firestore,BN),[new Mw(e._key,Ew.none())]));return l.length}catch(t){return console.error("Erreur lors du nettoyage des anciennes notifications:",t),0}var e};return Y.useEffect((()=>{const e=localStorage.getItem("lastNotificationsCleanup"),t=Date.now();if(!e||t-parseInt(e,10)>864e5){const e=setTimeout((()=>{h().then((e=>{localStorage.setItem("lastNotificationsCleanup",t.toString())}))}),3e4);return()=>clearTimeout(e)}}),[]),{notifications:e,loading:n,unreadCount:e.filter((e=>!e.read)).length,markAsRead:u,markAllAsRead:async()=>{try{const t=e.filter((e=>!e.read)).map((e=>u(e.id)));await Promise.all(t)}catch(t){console.error("Erreur lors du marquage des notifications:",t)}},updateNotificationPreference:async(e,t)=>{try{const r=a();if(!r)return console.error("No user ID available"),void zh.error("Erreur: Utilisateur non identifi");const s=String(r),o=i(),l=ON(YT,"notificationPreferences",s),u=await zT(l);let d={};if(u.exists()){if(d=u.data(),d.userId&&d.userId!==s){console.error("Les prfrences ne correspondent pas  l'utilisateur actuel",{expectedId:s,actualId:d.userId}),await c(s);const e=await zT(l);d=e.exists()?e.data():{userId:s,userEmail:o}}}else{await c(s);const e=await zT(l);d=e.exists()?e.data():{userId:s,userEmail:o}}const h={...d,userId:s,userEmail:o||d.userEmail,[e]:t,lastUpdated:new Date};await qT(l,h,{merge:!0});const f=await zT(l);if(!f.exists())return console.error("Erreur: prfrences non trouves aprs mise  jour"),void zh.error("Erreur: Les prfrences n'ont pas t correctement enregistres");{const r=f.data();if(r[e]!==t)return console.error("Mise  jour des prfrences choue - valeur diffrente de celle attendue"),void zh.error("Erreur: La mise  jour n'a pas t applique correctement");try{localStorage.setItem("notificationPreferences",JSON.stringify({...r,lastUpdated:(new Date).toISOString()}))}catch(n){console.warn("Impossible de sauvegarder les prfrences dans localStorage:",n)}}zh.success("Prfrences de notification mises  jour")}catch(r){console.error("Erreur dtaille lors de la mise  jour des prfrences:",r),zh.error("Erreur lors de la mise  jour des prfrences")}},createNotification:async(e,t,n,r="INFO")=>{try{const i=String(e);if("SYSTEM_CRITICAL"!==r){const e=ON(YT,"notificationPreferences",i);let t=null,n="firestore";try{const n=await zT(e);n.exists()&&(t=n.data())}catch(s){console.warn("Erreur lors de la rcupration des prfrences depuis Firestore:",s)}if(!t)try{const e=localStorage.getItem("notificationPreferences");if(e){const r=JSON.parse(e);r.userId===i&&(t=r,n="localStorage")}}catch(a){console.warn("Erreur lors de la rcupration des prfrences depuis localStorage:",a)}if(t){if(t.userId&&t.userId!==i&&console.error("Erreur: Les prfrences ne correspondent pas  l'utilisateur",{expectedId:i,actualId:t.userId}),!1===t[r])return}else await c(i)}const o=LN(YT,"notifications"),l=new Date(Date.now()-3e5),u=kT(o,NT("recipientId","==",i),NT("title","==",t),NT("type","==",r)),d=await BT(u);if(d.docs.some((e=>{const t=e.data();return(t.timestamp?.toDate?t.timestamp.toDate():new Date(t.timestamp))>l&&t.message===n})))return;await HT(LN(YT,"notifications"),{recipientId:i,title:t,message:n,type:r,timestamp:new Date,read:!1,userId:i,source:"frontend",appVersion:tC.REACT_APP_VERSION||"unknown",createdAt:new Date})}catch(s){throw console.error("Erreur lors de la cration de la notification:",s),s}},forceReinitializePreferences:async()=>{try{const e=a();if(!e)return;const t=i(),n=ON(YT,"notificationPreferences",e),r={userId:e,userEmail:t,ROLE_UPDATE:!0,DOCUMENT_UPLOADED:!0,DOCUMENT_DELETED:!0,DOCUMENT_APPROVED:!0,DOCUMENT_REJECTED:!0,DOCUMENT_UPDATED:!0,createdAt:new Date,lastLogin:new Date,lastReset:new Date};return await qT(n,r),localStorage.setItem("notificationPreferences",JSON.stringify({...r,createdAt:r.createdAt.toISOString(),lastLogin:r.lastLogin.toISOString(),lastReset:r.lastReset.toISOString()})),d(),!0}catch(e){return console.error("Error resetting notification preferences:",e),!1}},cleanupOldNotifications:h}};function rC(e){return rC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rC(e)}function sC(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function aC(e){sC(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===rC(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}var iC={};function oC(){return iC}function lC(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function cC(e,t){sC(2,arguments);var n=aC(e),r=aC(t),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}var uC={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}};function dC(e){sC(1,arguments);var t=aC(e);return function(e){sC(1,arguments);var t=aC(e);return t.setHours(23,59,59,999),t}(t).getTime()===function(e){sC(1,arguments);var t=aC(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}(t).getTime()}function hC(e,t){sC(2,arguments);var n,r=aC(e),s=aC(t),a=cC(r,s),i=Math.abs(function(e,t){sC(2,arguments);var n=aC(e),r=aC(t);return 12*(n.getFullYear()-r.getFullYear())+(n.getMonth()-r.getMonth())}(r,s));if(i<1)n=0;else{1===r.getMonth()&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*i);var o=cC(r,s)===-a;dC(aC(e))&&1===i&&1===cC(e,s)&&(o=!1),n=a*(i-Number(o))}return 0===n?0:n}function fC(e,t,n){sC(2,arguments);var r=function(e,t){return sC(2,arguments),aC(e).getTime()-aC(t).getTime()}(e,t)/1e3;return uC.trunc(r)}var mC={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function pC(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}var gC={date:pC({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:pC({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:pC({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},yC={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function vC(e){return function(t,n){var r;if("formatting"===(null!=n&&n.context?String(n.context):"standalone")&&e.formattingValues){var s=e.defaultFormattingWidth||e.defaultWidth,a=null!=n&&n.width?String(n.width):s;r=e.formattingValues[a]||e.formattingValues[s]}else{var i=e.defaultWidth,o=null!=n&&n.width?String(n.width):e.defaultWidth;r=e.values[o]||e.values[i]}return r[e.argumentCallback?e.argumentCallback(t):t]}}var bC={ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:vC({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:vC({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:vC({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:vC({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:vC({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function xC(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;var i,o=a[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return}(l,(function(e){return e.test(o)})):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n;return}(l,(function(e){return e.test(o)}));return i=e.valueCallback?e.valueCallback(c):c,{value:i=n.valueCallback?n.valueCallback(i):i,rest:t.slice(o.length)}}}function wC(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;var s=r[0],a=t.match(e.parsePattern);if(!a)return null;var i=e.valueCallback?e.valueCallback(a[0]):a[0];return{value:i=n.valueCallback?n.valueCallback(i):i,rest:t.slice(s.length)}}}var EC={code:"en-US",formatDistance:function(e,t,n){var r,s=mC[e];return r="string"==typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:gC,formatRelative:function(e,t,n,r){return yC[e]},localize:bC,match:{ordinalNumber:wC({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:xC({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:xC({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:xC({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:xC({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:xC({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function kC(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}var SC=43200;function NC(e,t,n){var r,s;sC(2,arguments);var a=oC(),i=null!==(r=null!==(s=null==n?void 0:n.locale)&&void 0!==s?s:a.locale)&&void 0!==r?r:EC;if(!i.formatDistance)throw new RangeError("locale must contain formatDistance property");var o=cC(e,t);if(isNaN(o))throw new RangeError("Invalid time value");var l,c,u=kC(kC({},n),{addSuffix:Boolean(null==n?void 0:n.addSuffix),comparison:o});o>0?(l=aC(t),c=aC(e)):(l=aC(e),c=aC(t));var d,h=fC(c,l),f=(lC(c)-lC(l))/1e3,m=Math.round((h-f)/60);if(m<2)return null!=n&&n.includeSeconds?h<5?i.formatDistance("lessThanXSeconds",5,u):h<10?i.formatDistance("lessThanXSeconds",10,u):h<20?i.formatDistance("lessThanXSeconds",20,u):h<40?i.formatDistance("halfAMinute",0,u):h<60?i.formatDistance("lessThanXMinutes",1,u):i.formatDistance("xMinutes",1,u):0===m?i.formatDistance("lessThanXMinutes",1,u):i.formatDistance("xMinutes",m,u);if(m<45)return i.formatDistance("xMinutes",m,u);if(m<90)return i.formatDistance("aboutXHours",1,u);if(m<1440){var p=Math.round(m/60);return i.formatDistance("aboutXHours",p,u)}if(m<2520)return i.formatDistance("xDays",1,u);if(m<SC){var g=Math.round(m/1440);return i.formatDistance("xDays",g,u)}if(m<86400)return d=Math.round(m/SC),i.formatDistance("aboutXMonths",d,u);if((d=hC(c,l))<12){var y=Math.round(m/SC);return i.formatDistance("xMonths",y,u)}var v=d%12,b=Math.floor(d/12);return v<3?i.formatDistance("aboutXYears",b,u):v<9?i.formatDistance("overXYears",b,u):i.formatDistance("almostXYears",b+1,u)}var TC={lessThanXSeconds:{one:"moins dune seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins dune minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus dun an",other:"plus de {{count}} ans"},almostXYears:{one:"presquun an",other:"presque {{count}} ans"}},CC={date:pC({formats:{full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},defaultWidth:"full"}),time:pC({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:pC({formats:{full:"{{date}} '' {{time}}",long:"{{date}} '' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},jC={lastWeek:"eeee 'dernier ' p",yesterday:"'hier ' p",today:"'aujourdhui ' p",tomorrow:"'demain ' p'",nextWeek:"eeee 'prochain ' p",other:"P"},RC={ordinalNumber:function(e,t){var n=Number(e),r=null==t?void 0:t.unit;if(0===n)return"0";return n+(1===n?r&&["year","week","hour","minute","second"].includes(r)?"re":"er":"me")},era:vC({values:{narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jsus-Christ","aprs Jsus-Christ"]},defaultWidth:"wide"}),quarter:vC({values:{narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2me trim.","3me trim.","4me trim."],wide:["1er trimestre","2me trimestre","3me trimestre","4me trimestre"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:vC({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],wide:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"]},defaultWidth:"wide"}),day:vC({values:{narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},defaultWidth:"wide"}),dayPeriod:vC({values:{narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"aprs-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de laprs-midi",evening:"du soir",night:"du matin"}},defaultWidth:"wide"})},AC={code:"fr",formatDistance:function(e,t,n){var r,s=TC[e];return r="string"==typeof s?s:1===t?s.one:s.other.replace("{{count}}",String(t)),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+r:"il y a "+r:r},formatLong:CC,formatRelative:function(e,t,n,r){return jC[e]},localize:RC,match:{ordinalNumber:wC({matchPattern:/^(\d+)(ime|re|me|er|e)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e)}}),era:xC({matchPatterns:{narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jsus-Christ|aprs Jsus-Christ)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^av/i,/^ap/i]},defaultParseWidth:"any"}),quarter:xC({matchPatterns:{narrow:/^T?[1234]/i,abbreviated:/^[1234](er|me|e)? trim\.?/i,wide:/^[1234](er|me|e)? trimestre/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:xC({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(janv|fvr|mars|avr|mai|juin|juill|juil|aot|sept|oct|nov|dc)\.?/i,wide:/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:xC({matchPatterns:{narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:xC({matchPatterns:{narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'aprs[-\s]midi|du soir|de la nuit)/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:4}};const _C=Pf("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80 dark:bg-primary-dark dark:text-primary-dark-foreground dark:hover:bg-primary-dark/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80 dark:bg-secondary-dark dark:text-secondary-dark-foreground dark:hover:bg-secondary-dark/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80 dark:bg-destructive-dark dark:text-destructive-dark-foreground dark:hover:bg-destructive-dark/80",outline:"text-foreground dark:text-foreground-dark",student:"border-transparent bg-blue-900 text-blue-200 hover:bg-blue-800",teacher:"border-transparent bg-emerald-900 text-emerald-200 hover:bg-emerald-800",admin:"border-transparent bg-amber-900 text-amber-200 hover:bg-amber-800",super_admin:"border-transparent bg-red-900 text-red-200 hover:bg-red-800",superadmin:"border-transparent bg-red-900 text-red-200 hover:bg-red-800",hr:"border-transparent bg-purple-900 text-purple-200 hover:bg-purple-800",recruiter:"border-transparent bg-pink-900 text-pink-200 hover:bg-pink-800",guest:"border-transparent bg-teal-900 text-teal-200 hover:bg-teal-800",user:"border-transparent bg-gray-800 text-gray-200 hover:bg-gray-700"}},defaultVariants:{variant:"default"}});function DC({className:t,variant:n,...r}){const{isDark:s,...a}=r;return e.jsx("span",{className:Vm(_C({variant:n}),t),...a})}const IC=e=>{try{if(!e)return"";let t;if(e&&"function"==typeof e.toDate)t=e.toDate();else if(e instanceof Date)t=e;else if("number"==typeof e)t=new Date(e);else{if("string"!=typeof e)return"";t=new Date(e)}return function(e,t){return sC(1,arguments),NC(e,Date.now(),t)}(t,{addSuffix:!0,locale:AC})}catch(t){return""}},PC={ROLE_UPDATE:{color:"bg-blue-100 text-blue-800",icon:e.jsx(Ac,{className:"h-4 w-4 text-blue-600"})},INFO_UPDATE:{color:"bg-teal-100 text-teal-800",icon:e.jsx(Uc,{className:"h-4 w-4 text-teal-600"})},SYSTEM:{color:"bg-purple-100 text-purple-800",icon:e.jsx(zl,{className:"h-4 w-4 text-purple-600"})},INFO:{color:"bg-green-100 text-green-800",icon:e.jsx(zl,{className:"h-4 w-4 text-green-600"})},WARNING:{color:"bg-yellow-100 text-yellow-800",icon:e.jsx(zl,{className:"h-4 w-4 text-yellow-600"})},ALERT:{color:"bg-red-100 text-red-800",icon:e.jsx(zl,{className:"h-4 w-4 text-red-600"})},DOCUMENT_APPROVED:{color:"bg-green-100 text-green-800",icon:e.jsx(ic,{className:"h-4 w-4 text-green-600"})},DOCUMENT_REJECTED:{color:"bg-red-100 text-red-800",icon:e.jsx(lc,{className:"h-4 w-4 text-red-600"})},DOCUMENT_UPLOADED:{color:"bg-blue-100 text-blue-800",icon:e.jsx(cc,{className:"h-4 w-4 text-blue-600"})},DOCUMENT_DELETED:{color:"bg-red-100 text-red-800",icon:e.jsx(Lc,{className:"h-4 w-4 text-red-600"})},DOCUMENT_UPDATED:{color:"bg-yellow-100 text-yellow-800",icon:e.jsx(cc,{className:"h-4 w-4 text-yellow-600"})}},MC=()=>{const{user:t}=ZT(),{notifications:n,loading:r,unreadCount:s,markAsRead:a,markAllAsRead:i}=nC(),[o,l]=Y.useState(!1);Y.useRef(null),Y.useRef(!1);const c=Pl(),u=ee();Y.useEffect((()=>{o?(async()=>{await c.start({rotate:-10,transition:{duration:.08}}),await c.start({rotate:10,transition:{duration:.12}}),await c.start({rotate:-10,transition:{duration:.12}}),await c.start({rotate:10,transition:{duration:.12}}),await c.start({rotate:0,transition:{duration:.16}})})():c.start({rotate:0,transition:{duration:.2}})}),[o]);return t?.roles?.includes("ROLE_STUDENT"),t?.roles?.includes("ROLE_GUEST"),r?null:e.jsxs($m,{children:[e.jsx(Hm,{asChild:!0,children:e.jsxs(qm,{variant:"ghost",size:"icon",className:"relative p-2 rounded-full hover:bg-white/10 transition-colors mr-2 group","aria-label":"Notifications",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[e.jsx(_l.div,{animate:c,initial:{rotate:0},style:{display:"inline-block"},children:e.jsx(zl,{className:"h-5 w-5 text-gray-200 group-hover:text-white transition-colors"})}),e.jsx(Be,{children:s>0&&e.jsx(_l.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full h-5 w-5 flex items-center justify-center text-xs",children:s})})]})}),e.jsxs(Wm,{align:"end",className:"w-96 mt-2 p-0 overflow-hidden border border-gray-200 shadow-lg rounded-lg bg-white dark:bg-gray-800 dark:border-gray-700",sideOffset:5,children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(zl,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),"Notifications",s>0&&e.jsx(DC,{className:"ml-2 bg-red-500 text-white dark:bg-red-600",children:s})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s>0&&e.jsxs(qm,{onClick:async()=>{await i()},variant:"ghost",size:"sm",className:"text-xs flex items-center gap-1 text-[#528eb2] hover:text-[#02284f] transition-colors",children:[e.jsx(Gl,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Tout marquer comme lu"})]}),e.jsx(te,{to:"/settings/notifications",children:e.jsx(qm,{variant:"ghost",size:"sm",className:"text-xs p-1.5",children:e.jsx(Ac,{className:"h-4 w-4 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"})})})]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:0===n.filter((e=>!e.read)).length?e.jsxs("div",{className:"py-8 px-4 text-center",children:[e.jsx(zl,{className:"h-12 w-12 mx-auto text-gray-300 dark:text-gray-600 mb-3"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:"Aucune notification"}),e.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-sm mt-1",children:"Les notifications apparatront ici"})]}):n.filter((e=>!e.read)).slice(0,5).map((t=>{const n=PC[t.type]||{color:"bg-gray-100 text-gray-600",icon:e.jsx(zl,{className:"h-4 w-4 text-gray-500"})},r=IC(t.timestamp);return e.jsx("div",{onClick:()=>(async e=>{await a(e.id),"INFO"===e.type&&e.title&&(e.title.toLowerCase().includes("votre demande d'inscription a t accepte")||e.title.toLowerCase().includes("votre demande d'inscription a t refuse"))?u("/notifications"):"INFO"===e.type&&e.title&&e.title.toLowerCase().includes("demande d'inscription envoye")?u("/guest/enrollment-requests"):"GUEST_APPLICATION"!==e.type||u("/recruiter/enrollment-requests")})(t),className:"p-4 border-b border-gray-100 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors bg-blue-50/60 dark:bg-blue-900/20",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"mt-0.5",children:e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${n.color||"bg-gray-100 text-gray-600"}`,children:n.icon||e.jsx(zl,{className:"h-4 w-4"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:t.title}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"h-2 w-2 bg-blue-500 rounded-full mr-2"}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 whitespace-nowrap",children:r})]})]}),(()=>{if(t.message&&t.message.includes("Commentaire du recruteur :")){const[n,r]=t.message.split(/\nCommentaire du recruteur ?: ?/);return e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 line-clamp-2",children:n}),e.jsxs("div",{className:"mt-2 p-2 rounded bg-yellow-50 dark:bg-yellow-900/30 border-l-4 border-yellow-400 text-yellow-900 dark:text-yellow-100 text-sm font-medium whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold",children:"Commentaire du recruteur :"})," ",r]})]})}return e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 line-clamp-2",children:t.message})})(),e.jsxs(qm,{variant:"ghost",size:"sm",className:"mt-2 text-xs h-6 px-2 text-blue-600 dark:text-blue-400",onClick:async e=>{e.stopPropagation(),await a(t.id)},children:[e.jsx(Gl,{className:"h-3 w-3 mr-1"}),"Marquer comme lue"]})]})]})},t.id)}))}),n.filter((e=>!e.read)).length>5&&e.jsx("div",{className:"p-2 text-center border-t border-gray-100 dark:border-gray-700",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:[n.filter((e=>!e.read)).length-5," notifications supplmentaires"]})}),e.jsx(Km,{}),e.jsx(te,{to:"/notifications",className:"block",children:e.jsxs(Gm,{className:"cursor-pointer flex justify-center items-center p-3 text-[#528eb2] hover:text-[#02284f] dark:text-blue-400 dark:hover:text-blue-300 transition-colors",children:[e.jsx("span",{children:"Voir toutes les notifications"}),e.jsx(Fl,{className:"ml-2 h-4 w-4"})]})})]})]})},LC=Y.createContext(),OC=({children:t})=>{const[n,r]=Y.useState("light");Y.useEffect((()=>{const e=localStorage.getItem("protectedTheme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches;r(e||(t?"dark":"light")),document.documentElement.classList.toggle("dark","dark"===e||!e&&t)}),[]);const s={theme:n,toggleTheme:()=>{const e="light"===n?"dark":"light";r(e),localStorage.setItem("protectedTheme",e),document.documentElement.classList.toggle("dark","dark"===e)},setTheme:e=>{"light"===e||"dark"===e?(r(e),localStorage.setItem("protectedTheme",e),document.documentElement.classList.toggle("dark","dark"===e)):console.error('Invalid theme mode. Use "light" or "dark".')},isDark:"dark"===n};return e.jsx(LC.Provider,{value:s,children:t})},UC=()=>{const e=Y.useContext(LC);if(!e)throw new Error("useProtectedTheme must be used within a ProtectedThemeProvider");return e};function FC({className:t=""}){const{theme:n,toggleTheme:r}=UC(),s="dark"===n;return e.jsxs(_l.button,{onClick:r,className:`group relative w-10 h-10 rounded-full flex items-center justify-center bg-transparent transition-colors duration-300 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-400 ${t}`,"aria-label":s?"Switch to light mode":"Switch to dark mode",type:"button",whileTap:{scale:.95},style:{border:"none",padding:0,boxShadow:"none"},children:[e.jsx("span",{className:`absolute inset-0 rounded-full pointer-events-none transition-colors duration-200\n          group-hover:${s?"bg-[#232f47]/70":"bg-[#e5eaf3]/60"}\n          group-focus-visible:${s?"bg-[#232f47]/70":"bg-[#e5eaf3]/60"}\n        `}),e.jsxs("div",{className:"relative w-6 h-6 flex items-center justify-center z-10",children:[e.jsx(_l.div,{initial:!1,animate:{opacity:s?0:1,scale:s?0:1,y:s?-10:0,rotate:s?90:0},transition:{duration:.4,ease:"easeInOut"},className:"absolute inset-0 flex items-center justify-center",children:e.jsx(Pc,{className:"w-6 h-6",strokeWidth:2,style:{color:"#FFD600"}})}),e.jsx(_l.div,{initial:!1,animate:{opacity:s?1:0,scale:s?1:0,y:s?0:10,rotate:0},transition:{duration:.4,ease:"easeInOut"},className:"absolute inset-0 flex items-center justify-center",children:e.jsx(kc,{className:"w-6 h-6 text-white",strokeWidth:1.5})})]})]})}const zC=()=>e.jsxs(e.Fragment,{children:[e.jsx(te,{to:"/login",className:"px-4 py-2 text-gray-200 transition-all duration-200 rounded-md hover:text-white hover:bg-[#02284f]/50\r\n      dark:text-white dark:bg-[#004080]/80 dark:border dark:border-[#78b9dd]/50 dark:font-medium \r\n      dark:hover:bg-[#005db3] dark:hover:border-[#78b9dd] dark:hover:shadow-[0_0_8px_rgba(120,185,221,0.25)]",children:"Connexion"}),e.jsx(te,{to:"/register",className:"ml-2 px-4 py-2 bg-[#528eb2] rounded-md text-white font-medium hover:bg-[#528eb2]/90 transition-all transform hover:scale-105 dark:bg-[#004080] dark:hover:bg-[#004d99] dark:hover:shadow-[0_0_10px_rgba(120,185,221,0.3)]",children:"Inscription"})]}),VC=({onLogout:t,userData:n,setLogoutDialogOpen:r})=>{const[s,a]=Y.useState(!1),i=ee(),o=Y.useRef(null),{theme:l,toggleTheme:c}=UC();return e.jsxs("div",{className:"flex items-center",children:[e.jsx(ug,{}),e.jsx(MC,{}),e.jsx(FC,{className:"mr-3"}),e.jsxs($m,{modal:!0,children:[e.jsx(Hm,{asChild:!0,children:e.jsx(qm,{variant:"outline",className:`rounded-full w-10 h-10 p-0 ${s?"bg-[#528eb2]/20 border-[#528eb2]":"bg-transparent border-gray-500"} hover:bg-[#02284f]/80 hover:text-white hover:border-gray-400 transition-all duration-300 dark:border-[#78b9dd]/50 dark:hover:bg-[#78b9dd]/20 dark:hover:border-[#78b9dd]`,children:e.jsx(Ip,{className:"h-11 w-11",children:e.jsx(Mp,{className:"bg-gradient-to-r from-[#02284f] to-[#03386b] text-white",children:e.jsx(Uc,{className:"h-5 w-5"})})})})}),e.jsxs(Wm,{align:"end",className:"w-64 mt-2 p-0 overflow-hidden border border-gray-100 shadow-xl rounded-xl dark:bg-gray-800 dark:border-gray-700 dark:shadow-[0_4px_16px_rgba(0,0,0,0.5),0_0_0_1px_rgba(120,185,221,0.1)]",onOpenAutoFocus:e=>e.preventDefault(),sideOffset:5,ref:o,children:[e.jsx("div",{className:"bg-gradient-to-r from-[#02284f] to-[#03386b] p-4 text-white dark:from-[#01111e] dark:to-[#001f3d] dark:border-b dark:border-[#78b9dd]/20",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-white/20 rounded-full p-4.5",children:e.jsx(Lp,{className:"h-11 w-11"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"font-medium text-sm",children:n?.firstName&&n?.lastName?`${n.firstName} ${n.lastName}`:n?.user?.firstName&&n?.user?.lastName?`${n.user.firstName} ${n.user.lastName}`:"Utilisateur"}),e.jsx("p",{className:"text-xs text-gray-300",children:n?.email||n?.user?.email||"utilisateur@example.com"})]})]})}),e.jsxs("div",{className:"py-1 bg-white dark:bg-gray-800",children:[e.jsxs(Gm,{className:"navbar-dropdown-item",onClick:()=>i("/profile"),children:[e.jsx(Uc,{className:"mr-2 h-4 w-4 text-[#528eb2] dark:text-[#78b9dd]"}),e.jsx("span",{children:"Mon profil"})]}),e.jsxs(Gm,{className:"navbar-dropdown-item",onClick:()=>i("/settings/profile"),children:[e.jsx(Ac,{className:"mr-2 h-4 w-4 text-[#528eb2] dark:text-[#78b9dd]"}),e.jsx("span",{children:"Paramtres"})]}),e.jsx(Km,{className:"my-1 bg-gray-100 dark:bg-gray-700"}),e.jsxs(Gm,{className:"navbar-dropdown-item danger",onClick:()=>r(!0),children:[e.jsx(vc,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Dconnexion"})]})]})]})]})]})},BC=Y.memo((()=>{const[t,n]=Y.useState(!1),[r,s]=Y.useState(null),[a,i]=Y.useState(!1),[o,l]=Y.useState(!1),c=lp(),u=ee(),d=re(),[h,f]=Y.useState(!0),m=function(){const[e,t]=Y.useState(!1);return Y.useEffect((()=>{let e,n=!0;const r=async()=>{try{const r=localStorage.getItem("token");if(!r)return;if(!JSON.parse(localStorage.getItem("userRoles")||"[]").some((e=>"ROLE_STUDENT"===e||"ROLE_TEACHER"===e)))return;const s=(new Date).getHours(),a=s>=9&&s<12;if(!(a||s>=13&&s<17))return void(n&&t(!1));const i=a?"morning":"afternoon";try{const e=`signature_${(new Date).toISOString().split("T")[0]}_${i}`;if("true"===localStorage.getItem(e))return void(n&&t(!1));const s=await fetch("/api/signatures/today",{method:"GET",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(!s.ok)return void(n&&t(!0));const a=await s.json(),o=a.signedPeriods&&a.signedPeriods.includes(i);o&&localStorage.setItem(e,"true"),n&&t(!o)}catch(e){n&&t(!0)}}catch(e){}};r(),e=setInterval(r,3e5);const s=e=>{if(e.detail.success){const n=`signature_${(new Date).toISOString().split("T")[0]}_${e.detail.period}`;localStorage.setItem(n,"true"),t(!1)}};return window.addEventListener("signatureSubmitted",s),()=>{n=!1,clearInterval(e),window.removeEventListener("signatureSubmitted",s)}}),[]),e}(),[p,g]=Y.useState(!1),y=async()=>{try{const i=of.isLoggedIn(),o=t;if(n(i),i)try{const t=ef.getCachedUserData();if(t){s(t),f(!1),o||window.dispatchEvent(new Event("role-change"));try{const e=(ef.getStats?ef.getStats():{dataAge:1/0}).dataAge||1/0,n=Date.now();window._lastNavbarRefreshTime||(window._lastNavbarRefreshTime=0);const r=n-window._lastNavbarRefreshTime;e>12e4&&r>3e4&&(window._lastNavbarRefreshTime=n,ef.getUserData({routeKey:"/api/me",forceRefresh:!1,background:!0,requestId:"navbar_background_refresh"}).then((e=>{e&&JSON.stringify(e)!==JSON.stringify(t)&&s(e)})).catch((e=>{console.warn("Erreur lors du rafrachissement des donnes utilisateur:",e)})))}catch(e){console.warn("Error checking user data stats:",e)}}else{if(!o){const e=window.queryClient||of.getQueryClient();e&&(e.invalidateQueries({queryKey:["user"]}),e.invalidateQueries({queryKey:["profile"]}))}const e=await of.getCurrentUser(!1,{requestSource:"navbar"});s(e),f(!1),o||window.dispatchEvent(new Event("role-change"))}}catch(r){console.warn("Erreur lors de la rcupration des donnes utilisateur:",r);try{const e=await _f.getAllProfileData();s(e?.user?e.user:e?.data?.user?e.data.user:e),f(!1),o||window.dispatchEvent(new Event("role-change"))}catch(a){f(!1)}}else s(null),f(!1),o&&window.dispatchEvent(new Event("role-change"))}catch(i){console.error("Erreur lors de la vrification de l'authentification:",i)}finally{f(!1)}};Y.useEffect((()=>{y()}),[d.pathname]),Y.useEffect((()=>{const e=()=>{y()};return window.addEventListener("login-success",e),()=>{window.removeEventListener("login-success",e)}}),[]);return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:"\n  .navbar-dropdown-item {\n    display: flex !important;\n    align-items: center !important;\n    padding: 0.75rem !important;\n    cursor: pointer !important;\n    transition: all 0.2s ease !important;\n  }\n  \n  .navbar-dropdown-item:hover {\n    background-color: rgba(82, 142, 178, 0.1) !important;\n    color: #02284f !important;\n  }\n  \n  .navbar-dropdown-item.danger {\n    color: #e11d48 !important;\n  }\n  \n  .navbar-dropdown-item.danger:hover {\n    background-color: rgba(225, 29, 72, 0.1) !important;\n    color: #be123c !important;\n  }\n  \n  /* Styles pour le mode sombre */\n  .dark .navbar-dropdown-item:hover {\n    background-color: rgba(120, 185, 221, 0.2) !important;\n    color: #78b9dd !important;\n  }\n  \n  .dark .navbar-dropdown-item.danger {\n    color: #fb7185 !important;\n    background-color: rgba(244, 63, 94, 0.05) !important;\n    font-weight: 500 !important;\n  }\n  \n  .dark .navbar-dropdown-item.danger:hover {\n    background-color: rgba(244, 63, 94, 0.2) !important;\n    color: #fff !important;\n    font-weight: 600 !important;\n    box-shadow: 0 0 0 1px rgba(244, 63, 94, 0.3) !important;\n  }\n  \n  .menu-burger-btn {\n    position: relative;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 40px;\n    height: 40px;\n    border-radius: 50%;\n    transition: all 0.2s ease;\n    margin-right: 0.75rem;\n  }\n  \n  .menu-burger-btn:hover {\n    background-color: rgba(255, 255, 255, 0.1);\n    transform: scale(1.05);\n  }\n  \n  .menu-burger-btn:active {\n    transform: scale(0.95);\n  }\n  \n  .search-container {\n    position: relative;\n    max-width: 400px;\n    width: 100%;\n    margin: 0 1rem;\n    isolation: isolate;\n    z-index: 90;\n  }\n  \n  .search-container input {\n    background-color: rgba(255, 255, 255, 0.1) !important;\n    border-color: rgba(255, 255, 255, 0.2) !important;\n    color: white !important;\n  }\n  \n  .search-container input::placeholder {\n    color: rgba(255, 255, 255, 0.6) !important;\n  }\n  \n  .search-container input:focus {\n    background-color: rgba(255, 255, 255, 0.15) !important;\n    border-color: #528eb2 !important;\n    box-shadow: 0 0 0 2px rgba(82, 142, 178, 0.25) !important;\n  }\n  \n  /* Styles pour la barre de recherche en mode sombre */\n  .dark .search-container input {\n    background-color: rgba(120, 185, 221, 0.1) !important;\n    border-color: rgba(120, 185, 221, 0.3) !important;\n    color: #e0f2fe !important;\n  }\n  \n  .dark .search-container input::placeholder {\n    color: rgba(224, 242, 254, 0.6) !important;\n  }\n  \n  .dark .search-container input:focus {\n    background-color: rgba(120, 185, 221, 0.15) !important;\n    border-color: #78b9dd !important;\n    box-shadow: 0 0 0 2px rgba(120, 185, 221, 0.25) !important;\n  }\n  \n  /* Fixed navbar styles */\n  .navbar-fixed {\n    position: sticky;\n    top: 0;\n    width: 100%;\n    overflow-x: hidden;\n    isolation: isolate;\n  }\n\n  /* Z-index hierarchy */\n  .navbar-fixed {\n    z-index: 100;\n  }\n\n  .menu-burger-wrapper {\n    z-index: 101;\n    position: relative;\n  }\n\n  .language-selector-wrapper {\n    z-index: 101;\n    position: relative;\n  }\n\n  .search-container {\n    z-index: 90;\n  }\n\n  /* Override Sheet styles to match our design */\n  .sidebar-sheet {\n    z-index: 102 !important;\n  }\n\n  /* Responsive styles */\n  @media (max-width: 1280px) {\n    .search-container {\n      max-width: 350px;\n    }\n    \n    .navbar-actions {\n      gap: 0.5rem;\n    }\n  \n  .dark .navbar-fixed {\n    background-color: #01111e !important;\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2), 0 0 1px rgba(120, 185, 221, 0.1) !important;\n    border-bottom: 1px solid rgba(120, 185, 221, 0.1) !important;\n  }\n  \n  @media (max-width: 1024px) {\n    .search-container {\n      max-width: 300px;\n    }\n    \n    .navbar-brand {\n      font-size: 1.5rem;\n    }\n    \n    .navbar-actions {\n      gap: 0.25rem;\n    }\n  }\n  \n  @media (max-width: 768px) {\n    .menu-burger-btn {\n      margin-right: 0.5rem;\n    }\n    \n    .mobile-auth-buttons {\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n      gap: 0.5rem;\n    }\n    \n    .mobile-auth-buttons a {\n      font-size: 0.875rem;\n      padding: 0.5rem 0.75rem;\n    }\n    \n    .search-container {\n      display: none;\n    }\n    \n    .navbar-brand {\n      font-size: 1.25rem;\n    }\n    \n    .desktop-only {\n      display: none;\n    }\n    \n    .mobile-only {\n      display: flex;\n    }\n  }\n  \n  @media (max-width: 640px) {\n    .container {\n      padding-left: 0.5rem;\n      padding-right: 0.5rem;\n    }\n    \n    .navbar-brand {\n      font-size: 1.125rem;\n    }\n    \n    .mobile-auth-buttons {\n      flex-direction: column;\n      position: absolute;\n      top: 100%;\n      right: 0;\n      background: #02284f;\n      padding: 0.5rem;\n      border-radius: 0 0 0.5rem 0.5rem;\n      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n    }\n    \n    .mobile-auth-buttons a {\n      width: 100%;\n      text-align: center;\n    }\n  }\n  \n  @media (max-width: 480px) {\n    .navbar-actions {\n      gap: 0.25rem;\n    }\n    \n    .notification-button {\n      display: none;\n    }\n  }\n  \n  /* Default states */\n  .mobile-only {\n    display: none;\n  }\n  \n  .desktop-only {\n    display: flex;\n  }\n"}),e.jsx("header",{className:"navbar-fixed bg-[#02284f] dark:bg-[#01111e] shadow-lg z-[100]",children:e.jsx("nav",{className:"bg-[#02284f] dark:bg-[#01111e] w-full relative",children:e.jsxs("div",{className:"container px-4 mx-auto relative",children:[e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"menu-burger-wrapper",children:e.jsx($p,{})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(_l.div,{onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),style:{display:"inline-block"},children:e.jsxs(te,{to:t?c.getRoleDashboardPath():"/login",className:"navbar-brand text-2xl font-black tracking-tight text-white dark:text-white whitespace-nowrap",tabIndex:0,children:[e.jsx(_l.span,{animate:{color:p?"#528eb2":"white"},transition:{duration:.4,ease:"easeInOut"},className:"transition-colors",style:{marginRight:2},children:"Big"}),e.jsx(_l.span,{animate:{color:p?"white":"#528eb2"},transition:{duration:.4,ease:"easeInOut"},className:"transition-colors",children:"Project"})]})})})]}),t&&e.jsx("div",{className:"hidden md:flex flex-1 justify-center mx-4",children:e.jsx("div",{className:"search-container w-full max-w-md flex justify-end",children:e.jsx(ng,{})})}),e.jsxs("div",{className:"flex items-center navbar-actions",children:[t&&(c.isStudent()||c.isTeacher())&&e.jsx("div",{className:"desktop-only relative mr-2",children:e.jsxs("button",{onClick:()=>u(c.isTeacher()?"/teacher/attendance":"/student/attendance"),className:"group flex items-center justify-start w-11 h-11 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-full cursor-pointer relative overflow-hidden transition-all duration-200 shadow-md md:hover:w-32 hover:rounded-[50px] hover:shadow-lg active:translate-x-1 active:translate-y-1",children:[e.jsxs("div",{className:"flex items-center justify-center w-full transition-all duration-300 group-hover:justify-start group-hover:px-3",children:[e.jsx(nc,{className:"w-4 h-4 text-white group-hover:animate-pulse"}),m&&e.jsxs("span",{className:"absolute top-1 right-2 md:right-5 flex h-3 w-3",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-500 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-red-600"})]})]}),e.jsx("div",{className:"absolute right-5 transform translate-x-full opacity-0 text-white text-sm font-medium transition-all duration-300 group-hover:translate-x-0 group-hover:opacity-100 hidden md:block",children:"Prsence"})]})}),t&&e.jsx("div",{className:"md:hidden",children:e.jsx(qm,{variant:"ghost",size:"icon",className:"rounded-full w-10 h-10 p-0 bg-transparent text-gray-200 hover:bg-[#02284f]/80 hover:text-white dark:text-[#78b9dd] dark:hover:bg-[#78b9dd]/20",onClick:()=>l(!o),children:e.jsx(jc,{className:"h-5 w-5"})})}),h?e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(rg,{className:"h-8 w-24 rounded-md dark:bg-gray-700"}),e.jsx(rg,{className:"h-10 w-10 rounded-full dark:bg-gray-700"})]}):t?e.jsx(VC,{onLogout:()=>i(!0),userData:r,setLogoutDialogOpen:i}):e.jsx("div",{className:"mobile-auth-buttons",children:e.jsx(zC,{})})]})]}),t&&o&&e.jsx("div",{className:"md:hidden px-4 pb-4",children:e.jsx(ng,{})})]})})}),e.jsx(Qm,{open:a,onOpenChange:e=>i(e),children:e.jsxs(Zm,{className:"max-h-[calc(100vh-2rem)] w-full max-w-md overflow-hidden rounded-2xl border-0 shadow-xl",children:[e.jsx("div",{className:"overflow-y-auto max-h-[70vh] fade-in-up",children:e.jsxs(ep,{children:[e.jsx(np,{className:"text-xl font-semibold",children:"Confirmation de dconnexion"}),e.jsx(rp,{className:"text-base mt-2",children:"tes-vous sr de vouloir vous dconnecter de votre compte ? Toutes vos sessions actives seront fermes."})]})}),e.jsxs(tp,{className:"mt-6 flex justify-end space-x-2",children:[e.jsx(qm,{variant:"outline",onClick:()=>i(!1),className:"rounded-full border-2 hover:bg-gray-100 transition-all duration-200",children:"Annuler"}),e.jsx(qm,{variant:"destructive",onClick:async()=>{try{if(i(!1),window.__isLoggingOut)return;window.dispatchEvent(new Event("logout-start")),of.logout("/login")}catch(e){console.error("Erreur lors de la dconnexion:",e),of.clearAuthData(!0,"Une erreur est survenue lors de la dconnexion.")}},className:"rounded-full bg-gradient-to-r from-red-500 to-red-700 hover:from-red-600 hover:to-red-800 transition-all duration-200",children:"Se dconnecter"})]})]})})]})}));BC.displayName="Navbar";var qC="Popover",[$C,HC]=E(qC,[j]),WC=j(),[GC,KC]=$C(qC),QC=t=>{const{__scopePopover:n,children:r,open:s,defaultOpen:a,onOpenChange:i,modal:o=!1}=t,l=WC(n),c=Y.useRef(null),[u,d]=Y.useState(!1),[h,f]=U({prop:s,defaultProp:a??!1,onChange:i,caller:qC});return e.jsx(F,{...l,children:e.jsx(GC,{scope:n,contentId:z(),triggerRef:c,open:h,onOpenChange:f,onOpenToggle:Y.useCallback((()=>f((e=>!e))),[f]),hasCustomAnchor:u,onCustomAnchorAdd:Y.useCallback((()=>d(!0)),[]),onCustomAnchorRemove:Y.useCallback((()=>d(!1)),[]),modal:o,children:r})})};QC.displayName=qC;var XC="PopoverAnchor";Y.forwardRef(((t,n)=>{const{__scopePopover:r,...s}=t,a=KC(XC,r),i=WC(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return Y.useEffect((()=>(o(),()=>l())),[o,l]),e.jsx(V,{...i,...s,ref:n})})).displayName=XC;var YC="PopoverTrigger",JC=Y.forwardRef(((t,n)=>{const{__scopePopover:r,...s}=t,a=KC(YC,r),i=WC(r),o=R(n,a.triggerRef),l=e.jsx(k.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":uj(a.open),...s,ref:o,onClick:I(t.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:e.jsx(V,{asChild:!0,...i,children:l})}));JC.displayName=YC;var ZC="PopoverPortal",[ej,tj]=$C(ZC,{forceMount:void 0}),nj=t=>{const{__scopePopover:n,forceMount:r,children:s,container:a}=t,i=KC(ZC,n);return e.jsx(ej,{scope:n,forceMount:r,children:e.jsx(T,{present:r||i.open,children:e.jsx(C,{asChild:!0,container:a,children:s})})})};nj.displayName=ZC;var rj="PopoverContent",sj=Y.forwardRef(((t,n)=>{const r=tj(rj,t.__scopePopover),{forceMount:s=r.forceMount,...a}=t,i=KC(rj,t.__scopePopover);return e.jsx(T,{present:s||i.open,children:i.modal?e.jsx(ij,{...a,ref:n}):e.jsx(oj,{...a,ref:n})})}));sj.displayName=rj;var aj=D("PopoverContent.RemoveScroll"),ij=Y.forwardRef(((t,n)=>{const r=KC(rj,t.__scopePopover),s=Y.useRef(null),a=R(n,s),i=Y.useRef(!1);return Y.useEffect((()=>{const e=s.current;if(e)return A(e)}),[]),e.jsx(_,{as:aj,allowPinchZoom:!0,children:e.jsx(lj,{...t,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:I(t.onCloseAutoFocus,(e=>{e.preventDefault(),i.current||r.triggerRef.current?.focus()})),onPointerDownOutside:I(t.onPointerDownOutside,(e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;i.current=r}),{checkForDefaultPrevented:!1}),onFocusOutside:I(t.onFocusOutside,(e=>e.preventDefault()),{checkForDefaultPrevented:!1})})})})),oj=Y.forwardRef(((t,n)=>{const r=KC(rj,t.__scopePopover),s=Y.useRef(!1),a=Y.useRef(!1);return e.jsx(lj,{...t,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:e=>{t.onCloseAutoFocus?.(e),e.defaultPrevented||(s.current||r.triggerRef.current?.focus(),e.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:e=>{t.onInteractOutside?.(e),e.defaultPrevented||(s.current=!0,"pointerdown"===e.detail.originalEvent.type&&(a.current=!0));const n=e.target,i=r.triggerRef.current?.contains(n);i&&e.preventDefault(),"focusin"===e.detail.originalEvent.type&&a.current&&e.preventDefault()}})})),lj=Y.forwardRef(((t,n)=>{const{__scopePopover:r,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...h}=t,f=KC(rj,r),m=WC(r);return P(),e.jsx(M,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:i,children:e.jsx(L,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>f.onOpenChange(!1),children:e.jsx(O,{"data-state":uj(f.open),role:"dialog",id:f.contentId,...m,...h,ref:n,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})})),cj="PopoverClose";Y.forwardRef(((t,n)=>{const{__scopePopover:r,...s}=t,a=KC(cj,r);return e.jsx(k.button,{type:"button",...s,ref:n,onClick:I(t.onClick,(()=>a.onOpenChange(!1)))})})).displayName=cj;function uj(e){return e?"open":"closed"}Y.forwardRef(((t,n)=>{const{__scopePopover:r,...s}=t,a=WC(r);return e.jsx(B,{...a,...s,ref:n})})).displayName="PopoverArrow";var dj=nj,hj=sj;const fj=QC,mj=JC,pj=Y.forwardRef((({className:t,align:n="center",sideOffset:r=4,...s},a)=>e.jsx(dj,{children:e.jsx(hj,{ref:a,align:n,sideOffset:r,className:Vm("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),onEscapeKeyDown:e=>e.preventDefault(),onFocusOutside:e=>e.preventDefault(),onOpenAutoFocus:e=>e.preventDefault(),onCloseAutoFocus:e=>e.preventDefault(),...s})})));pj.displayName=hj.displayName;const gj=()=>{const[t,n]=Y.useState(!1),{refreshProfileData:r,isProfileLoading:s,profileData:a}=Y.useContext(lR),[i,o]=Y.useState(!1),l=Y.useRef(0),[c,u]=Y.useState(!1),[d,h]=Y.useState(!1),[f,m]=Y.useState(!1),p=Y.useRef(null);Y.useEffect((()=>{const e=()=>{r()};return window.addEventListener("user:data-updated",e),()=>{window.removeEventListener("user:data-updated",e)}}),[r]),Y.useEffect((()=>{a?.stats?.profile?.isAcknowledged&&(h(!0),u(!0))}),[a]);const g=async()=>{try{localStorage.getItem("profile_completion_acknowledged"),(()=>{try{const e=parseInt(localStorage.getItem("profile_completion_acknowledged_at")||"0",10);return Date.now()-e<1e4}catch(e){return!1}})(),localStorage.getItem("profile_completion_showing");const t=a?.stats?.profile||{completedItems:0},n=await r({forceRefresh:!0}),s=await _f.getStats({forceRefresh:!0});3===(s?.stats?.profile||{completedItems:0}).completedItems&&(t.completedItems<3||t.completedItems);if(s?.stats?.profile?.isAcknowledged){h(!0),u(!0);try{localStorage.setItem("profile_completion_acknowledged","true")}catch(e){}}return n}catch(t){}};Y.useEffect((()=>{const e=setTimeout((()=>{g()}),500);return()=>clearTimeout(e)}),[]);const{completedItems:y,completionItems:v,isAcknowledged:b}=Y.useMemo((()=>{const e=a||{},t=Boolean(e?.linkedinUrl),n=Boolean(e?.hasCvDocument),r=(()=>{const t=Array.isArray(e?.diplomas),n=t?e.diplomas.length:0;return t&&n>0})(),s=[{name:"LinkedIn",completed:t,description:"Votre profil LinkedIn permet aux recruteurs de mieux vous connatre.",action:"/settings/profile"},{name:"CV",completed:n,description:"Votre CV est essentiel pour prsenter votre parcours.",action:"/settings/career"},{name:"Diplme",completed:r,description:"Vos diplmes certifient vos qualifications.",action:"/settings/career"}].sort(((e,t)=>e.completed&&!t.completed?-1:!e.completed&&t.completed?1:0)),i=[t,n,r].filter(Boolean).length,o="true"===localStorage.getItem("profile_completion_acknowledged");return{completedItems:i,completionItems:s,isAcknowledged:d||o||(e?.stats?.profile?.isAcknowledged||!1)}}),[a,d]);Y.useEffect((()=>{if(a?.stats?.profile?.isAcknowledged)return h(!0),void u(!0);const e=3===y&&l.current<3;if(3===y){if(!b&&!d&&!f){console.log("[ProfileProgress] Conditions pour dispatch:",{completedItems:y,justCompleted:e,isAcknowledged:b,localAcknowledged:d,hasDispatchedEvent:f}),m(!0);const t=new CustomEvent("profile:completion",{bubbles:!0,composed:!0,detail:{timestamp:Date.now(),completedItems:y,justCompleted:e}});console.log("[ProfileProgress] Dispatching profile:completion event"),window.dispatchEvent(t),console.log("[ProfileProgress] Event dispatched");const n=setTimeout((()=>{u(!0)}),4e3);return()=>{clearTimeout(n)}}u(!0)}else m(!1);l.current=y}),[y,b,d,f,a]);if(Y.useEffect((()=>{!s&&i&&o(!1)}),[s,i]),Y.useEffect((()=>{if(t)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)};function e(e){p.current&&!p.current.contains(e.target)&&n(!1)}}),[t]),Y.useEffect((()=>{console.log("[ProfileProgress] profileData reu :",a)}),[a]),Y.useEffect((()=>{const e=a||{},t=Boolean(e?.linkedinUrl),n=Boolean(e?.hasCvDocument),r=(()=>{const t=Array.isArray(e?.diplomas),n=t?e.diplomas.length:0;return t&&n>0})(),s=[t,n,r].filter(Boolean).length,i="true"===localStorage.getItem("profile_completion_acknowledged"),o=d||i||(e?.stats?.profile?.isAcknowledged||!1);console.log("[ProfileProgress] hasLinkedIn:",t,"hasCv:",n,"hasDiploma:",r,"completedItems:",s,"isAcknowledged:",o)}),[a,d]),c&&3===y||b)return null;if(s&&!a||i)return e.jsxs("button",{className:"fixed right-4 sm:right-8 bottom-4 sm:bottom-8 z-20 flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-3 rounded-full shadow-lg bg-primary text-primary-foreground text-sm hover:bg-primary/90",disabled:!0,children:[e.jsx(Tc,{className:"w-4 h-4 sm:w-5 sm:h-5 animate-spin"}),e.jsx("span",{className:"font-medium",children:"Chargement..."})]});const x=Math.round(y/3*100),w=3-y;return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>n(!t),className:"fixed right-4 sm:right-8 bottom-4 sm:bottom-8 z-20 flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-3 rounded-full shadow-lg text-sm "+(t?"bg-background text-foreground hover:bg-muted":"bg-primary text-primary-foreground hover:bg-primary/90"),children:[e.jsx(Wl,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("span",{className:"font-medium",children:0===w?"Profil complet ":`${w} lment${w>1?"s":""}  complter`})]}),t&&e.jsx("div",{ref:p,className:"fixed right-4 sm:right-8 bottom-16 sm:bottom-24 w-72 sm:w-80 z-10",children:e.jsx("div",{className:"bg-background/80 backdrop-blur-lg rounded-xl shadow-lg border border-border/5 overflow-hidden",children:e.jsxs("div",{className:"p-3 sm:p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-sm font-medium text-foreground",children:"Compltude du profil"}),e.jsxs(fj,{children:[e.jsx(mj,{asChild:!0,children:e.jsx("button",{className:"inline-flex items-center justify-center rounded-full w-4 h-4 text-muted-foreground hover:text-primary transition-colors",children:e.jsx(fc,{className:"w-3 h-3"})})}),e.jsx(pj,{className:"w-60 sm:w-64 p-3",align:"end",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"Compltez ces informations pour augmenter la visibilit de votre profil auprs des recruteurs."})})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:async()=>{if(!i&&!s){o(!0);try{await g()}catch(e){}}},disabled:i||s,className:"inline-flex items-center justify-center rounded-full w-6 h-6 text-muted-foreground hover:text-primary transition-colors disabled:opacity-50",title:"Actualiser",children:e.jsx(Tc,{className:"w-4 h-4 "+(i||s?"animate-spin":"")})}),e.jsxs("span",{className:"text-sm font-medium",children:[y,"/3"]})]})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-1.5 mb-3 sm:mb-4",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-primary to-primary/80 rounded-full transition-all duration-300",style:{width:`${x}%`}})}),e.jsx("div",{className:"space-y-2 transition-opacity duration-300 "+(i||s?"opacity-50 pointer-events-none":"opacity-100"),children:v.map((t=>e.jsxs("div",{className:"flex items-start gap-2 sm:gap-3 p-2 rounded-lg transition-colors duration-300 "+(t.completed?"bg-green-50/50 dark:bg-green-900/10":"bg-red-50/50 dark:bg-red-900/10"),children:[e.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full flex items-center justify-center mt-0.5 transition-colors duration-300 "+(t.completed?"text-green-600 dark:text-green-400":"text-red-500 dark:text-red-400"),children:t.completed?e.jsx(Jl,{className:"w-4 h-4"}):e.jsx(ec,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:t.name}),!t.completed&&e.jsx(qm,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs",asChild:!0,children:e.jsxs("a",{href:t.action,className:"flex items-center gap-1",children:["Complter",e.jsx(ac,{className:"w-3 h-3"})]})})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5 line-clamp-1",children:t.description}),"CV"===t.name&&t.completed&&e.jsx(qm,{variant:"outline",size:"xs",className:"mt-2 h-6 px-2 text-xs w-full justify-center",onClick:()=>{},children:"Extraire LinkedIn du CV"})]})]},t.name)))})]})})})]})},yj=({children:e,element:t,roles:n,allowedRoles:r,requireAll:s=!1,fallback:a=null})=>{const{hasRole:i,isLoading:o,refreshRoles:l}=op();Y.useRef(!1);const c=Y.useRef(null),u=Y.useRef(!1),[d,h]=Y.useState(!1),[f,m]=Y.useState(!0),p=r||n;Y.useEffect((()=>()=>{c.current&&clearTimeout(c.current)}),[]),Y.useEffect((()=>{u.current||(u.current=!0,l());const e=setTimeout((()=>{m(!1)}),500);return()=>clearTimeout(e)}),[l]),Y.useEffect((()=>{if(!o){const e=setTimeout((()=>{h(!0)}),300);return()=>clearTimeout(e)}}),[o]);const g=Y.useMemo((()=>e=>{if(i(e))return!0;const t=e.replace(/^ROLE_/,""),n=`ROLE_${t}`;return i(t)||i(n)}),[i]),y=Y.useMemo((()=>e=>!(!e||!Array.isArray(e))&&e.some((e=>g(e)))),[g]),v=Y.useMemo((()=>!(!o&&d&&!f)||("string"==typeof p?g(p):s?p.every((e=>g(e))):y(p))),[p,g,y,o,d,s,f]);return o||f?null:t&&v?t:v?e:a},vj=()=>{const{isLoading:t,refreshRoles:n}=op(),r=lp();ee();const[s,a]=Y.useState(!1);if(Y.useEffect((()=>{let e=!0;return(async()=>{if(of.isLoggedIn()&&!s){a(!0);try{await of.getCurrentUser(!0),e&&n()}catch(t){console.error("Error refreshing user roles:",t)}finally{e&&a(!1)}}})(),()=>{e=!1}}),[n,s]),t||s)return null;const i=r.getRoleDashboardPath();return i&&localStorage.setItem("dashboard_path",i),e.jsx(se,{to:i,replace:!0})},bj={ROLE_SUPERADMIN:"Super Administrateur",ROLE_SUPER_ADMIN:"Super Administrateur",ROLE_ADMIN:"Administrateur",ROLE_HR:"Ressources Humaines",ROLE_TEACHER:"Formateur",ROLE_STUDENT:"tudiant",ROLE_RECRUITER:"Recruteur",ROLE_GUEST:"Invit",ROLE_USER:"Utilisateur",SUPERADMIN:"Super Administrateur",SUPER_ADMIN:"Super Administrateur",ADMIN:"Administrateur",HR:"Ressources Humaines",TEACHER:"Formateur",STUDENT:"tudiant",RECRUITER:"Recruteur",GUEST:"Invit",USER:"Utilisateur"},xj={ROLE_SUPERADMIN:"bg-gradient-to-r from-red-500/90 to-red-700/90 text-white",ROLE_SUPER_ADMIN:"bg-gradient-to-r from-red-500/90 to-red-700/90 text-white",ROLE_ADMIN:"bg-gradient-to-r from-amber-500/90 to-amber-700/90 text-white",ROLE_HR:"bg-gradient-to-r from-purple-500/90 to-purple-700/90 text-white",ROLE_TEACHER:"bg-gradient-to-r from-emerald-500/90 to-emerald-700/90 text-white",ROLE_STUDENT:"bg-gradient-to-r from-blue-500/90 to-blue-700/90 text-white",ROLE_RECRUITER:"bg-gradient-to-r from-pink-500/90 to-pink-700/90 text-white",ROLE_GUEST:"bg-gradient-to-r from-teal-500/90 to-teal-700/90 text-white",ROLE_USER:"bg-gradient-to-r from-gray-500/90 to-gray-700/90 text-white",SUPERADMIN:"bg-gradient-to-r from-red-500/90 to-red-700/90 text-white",SUPER_ADMIN:"bg-gradient-to-r from-red-500/90 to-red-700/90 text-white",ADMIN:"bg-gradient-to-r from-amber-500/90 to-amber-700/90 text-white",HR:"bg-gradient-to-r from-purple-500/90 to-purple-700/90 text-white",TEACHER:"bg-gradient-to-r from-emerald-500/90 to-emerald-700/90 text-white",STUDENT:"bg-gradient-to-r from-blue-500/90 to-blue-700/90 text-white",RECRUITER:"bg-gradient-to-r from-pink-500/90 to-pink-700/90 text-white",GUEST:"bg-gradient-to-r from-teal-500/90 to-teal-700/90 text-white",USER:"bg-gradient-to-r from-gray-500/90 to-gray-700/90 text-white"},wj={ROLE_SUPERADMIN:"bg-red-100 text-red-700",ROLE_SUPER_ADMIN:"bg-red-100 text-red-700",ROLE_ADMIN:"bg-amber-100 text-amber-700",ROLE_HR:"bg-purple-100 text-purple-700",ROLE_TEACHER:"bg-emerald-100 text-emerald-700",ROLE_STUDENT:"bg-blue-100 text-blue-700",ROLE_RECRUITER:"bg-pink-100 text-pink-700",ROLE_GUEST:"bg-teal-100 text-teal-700",ROLE_USER:"bg-gray-100 text-gray-700",SUPERADMIN:"bg-red-100 text-red-700",SUPER_ADMIN:"bg-red-100 text-red-700",ADMIN:"bg-amber-100 text-amber-700",HR:"bg-purple-100 text-purple-700",TEACHER:"bg-emerald-100 text-emerald-700",STUDENT:"bg-blue-100 text-blue-700",RECRUITER:"bg-pink-100 text-pink-700",GUEST:"bg-teal-100 text-teal-700",USER:"bg-gray-100 text-gray-700"},Ej=e=>{if(!e)return bj.ROLE_USER;if(bj[e])return bj[e];if(!e.startsWith("ROLE_")){const t=`ROLE_${e}`;if(bj[t])return bj[t]}if(e.startsWith("ROLE_")){const t=e.replace(/^ROLE_/i,"");if(bj[t])return bj[t]}return e||bj.ROLE_USER},kj=(e,t=!1)=>{if(!e)return t?wj.ROLE_USER:xj.ROLE_USER;const n=t?wj:xj;if(n[e])return n[e];if(!e.startsWith("ROLE_")){const t=`ROLE_${e}`;if(n[t])return n[t]}if(e.startsWith("ROLE_")){const t=e.replace(/^ROLE_/i,"");if(n[t])return n[t]}return t?wj.ROLE_USER:xj.ROLE_USER},Sj=({role:t,animated:n=!1,index:r=0,className:s="",solid:a=!1,useVariant:i=!1,interactive:o=!0,onHoverStart:l=null,onHoverEnd:c=null,hovered:u=!1,...d})=>{const h=Y.useMemo((()=>"object"==typeof t&&null!==t?t.name||"USER":t||"USER"),[t]),f=Y.useMemo((()=>Ej(h)),[h]),m=Y.useMemo((()=>{if(!i)return;const e=(e=>e?e.replace(/^ROLE_/i,"").toUpperCase():"")(h).toLowerCase();switch(e){case"student":return"student";case"teacher":return"teacher";case"admin":return"admin";case"super_admin":case"superadmin":return"superadmin";case"hr":return"hr";case"recruiter":return"recruiter";case"guest":return"guest";case"user":return"user";default:return}}),[h,i]),p=Y.useMemo((()=>i?"":kj(h,a)),[h,a,i]),g=Y.useMemo((()=>Vm(!i&&p,!i&&"px-2.5 py-0.5 text-xs rounded-full",o&&"transition-all duration-300",u&&o&&"shadow-lg scale-105",s)),[p,s,u,o,i]);return n?e.jsx(_l.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2,delay:.1*r},onHoverStart:o?l:void 0,onHoverEnd:o?c:void 0,children:e.jsx(DC,{className:g,variant:m,...(()=>{const{isDark:e,...t}=d;return t})(),children:f})}):e.jsx(DC,{className:g,variant:m,...(()=>{const{isDark:e,...t}=d;return t})(),children:f})};var[Nj,Tj]=E("Tooltip",[j]),Cj=j(),jj="TooltipProvider",Rj=700,Aj="tooltip.open",[_j,Dj]=Nj(jj),Ij=t=>{const{__scopeTooltip:n,delayDuration:r=Rj,skipDelayDuration:s=300,disableHoverableContent:a=!1,children:i}=t,o=Y.useRef(!0),l=Y.useRef(!1),c=Y.useRef(0);return Y.useEffect((()=>{const e=c.current;return()=>window.clearTimeout(e)}),[]),e.jsx(_j,{scope:n,isOpenDelayedRef:o,delayDuration:r,onOpen:Y.useCallback((()=>{window.clearTimeout(c.current),o.current=!1}),[]),onClose:Y.useCallback((()=>{window.clearTimeout(c.current),c.current=window.setTimeout((()=>o.current=!0),s)}),[s]),isPointerInTransitRef:l,onPointerInTransitChange:Y.useCallback((e=>{l.current=e}),[]),disableHoverableContent:a,children:i})};Ij.displayName=jj;var Pj="Tooltip",[Mj,Lj]=Nj(Pj),Oj=t=>{const{__scopeTooltip:n,children:r,open:s,defaultOpen:a,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=t,c=Dj(Pj,t.__scopeTooltip),u=Cj(n),[d,h]=Y.useState(null),f=z(),m=Y.useRef(0),p=o??c.disableHoverableContent,g=l??c.delayDuration,y=Y.useRef(!1),[v,b]=U({prop:s,defaultProp:a??!1,onChange:e=>{e?(c.onOpen(),document.dispatchEvent(new CustomEvent(Aj))):c.onClose(),i?.(e)},caller:Pj}),x=Y.useMemo((()=>v?y.current?"delayed-open":"instant-open":"closed"),[v]),w=Y.useCallback((()=>{window.clearTimeout(m.current),m.current=0,y.current=!1,b(!0)}),[b]),E=Y.useCallback((()=>{window.clearTimeout(m.current),m.current=0,b(!1)}),[b]),k=Y.useCallback((()=>{window.clearTimeout(m.current),m.current=window.setTimeout((()=>{y.current=!0,b(!0),m.current=0}),g)}),[g,b]);return Y.useEffect((()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)}),[]),e.jsx(F,{...u,children:e.jsx(Mj,{scope:n,contentId:f,open:v,stateAttribute:x,trigger:d,onTriggerChange:h,onTriggerEnter:Y.useCallback((()=>{c.isOpenDelayedRef.current?k():w()}),[c.isOpenDelayedRef,k,w]),onTriggerLeave:Y.useCallback((()=>{p?E():(window.clearTimeout(m.current),m.current=0)}),[E,p]),onOpen:w,onClose:E,disableHoverableContent:p,children:r})})};Oj.displayName=Pj;var Uj="TooltipTrigger",Fj=Y.forwardRef(((t,n)=>{const{__scopeTooltip:r,...s}=t,a=Lj(Uj,r),i=Dj(Uj,r),o=Cj(r),l=Y.useRef(null),c=R(n,l,a.onTriggerChange),u=Y.useRef(!1),d=Y.useRef(!1),h=Y.useCallback((()=>u.current=!1),[]);return Y.useEffect((()=>()=>document.removeEventListener("pointerup",h)),[h]),e.jsx(V,{asChild:!0,...o,children:e.jsx(k.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...s,ref:c,onPointerMove:I(t.onPointerMove,(e=>{"touch"!==e.pointerType&&(d.current||i.isPointerInTransitRef.current||(a.onTriggerEnter(),d.current=!0))})),onPointerLeave:I(t.onPointerLeave,(()=>{a.onTriggerLeave(),d.current=!1})),onPointerDown:I(t.onPointerDown,(()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})})),onFocus:I(t.onFocus,(()=>{u.current||a.onOpen()})),onBlur:I(t.onBlur,a.onClose),onClick:I(t.onClick,a.onClose)})})}));Fj.displayName=Uj;var zj="TooltipPortal",[Vj,Bj]=Nj(zj,{forceMount:void 0}),qj=t=>{const{__scopeTooltip:n,forceMount:r,children:s,container:a}=t,i=Lj(zj,n);return e.jsx(Vj,{scope:n,forceMount:r,children:e.jsx(T,{present:r||i.open,children:e.jsx(C,{asChild:!0,container:a,children:s})})})};qj.displayName=zj;var $j="TooltipContent",Hj=Y.forwardRef(((t,n)=>{const r=Bj($j,t.__scopeTooltip),{forceMount:s=r.forceMount,side:a="top",...i}=t,o=Lj($j,t.__scopeTooltip);return e.jsx(T,{present:s||o.open,children:o.disableHoverableContent?e.jsx(Xj,{side:a,...i,ref:n}):e.jsx(Wj,{side:a,...i,ref:n})})})),Wj=Y.forwardRef(((t,n)=>{const r=Lj($j,t.__scopeTooltip),s=Dj($j,t.__scopeTooltip),a=Y.useRef(null),i=R(n,a),[o,l]=Y.useState(null),{trigger:c,onClose:u}=r,d=a.current,{onPointerInTransitChange:h}=s,f=Y.useCallback((()=>{l(null),h(!1)}),[h]),m=Y.useCallback(((e,t)=>{const n=e.currentTarget,r={x:e.clientX,y:e.clientY},s=function(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n})}return r}(r,function(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,s,a)){case a:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}(r,n.getBoundingClientRect())),a=function(e){const t=e.slice();return t.sort(((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0)),function(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const n=e[r];for(;t.length>=2;){const e=t[t.length-1],r=t[t.length-2];if(!((e.x-r.x)*(n.y-r.y)>=(e.y-r.y)*(n.x-r.x)))break;t.pop()}t.push(n)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const t=e[r];for(;n.length>=2;){const e=n[n.length-1],r=n[n.length-2];if(!((e.x-r.x)*(t.y-r.y)>=(e.y-r.y)*(t.x-r.x)))break;n.pop()}n.push(t)}return n.pop(),1===t.length&&1===n.length&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}(t)}([...s,...function(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}(t.getBoundingClientRect())]);l(a),h(!0)}),[h]);return Y.useEffect((()=>()=>f()),[f]),Y.useEffect((()=>{if(c&&d){const e=e=>m(e,d),t=e=>m(e,c);return c.addEventListener("pointerleave",e),d.addEventListener("pointerleave",t),()=>{c.removeEventListener("pointerleave",e),d.removeEventListener("pointerleave",t)}}}),[c,d,m,f]),Y.useEffect((()=>{if(o){const e=e=>{const t=e.target,n={x:e.clientX,y:e.clientY},r=c?.contains(t)||d?.contains(t),s=!function(e,t){const{x:n,y:r}=e;let s=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const e=t[a],o=t[i],l=e.x,c=e.y,u=o.x,d=o.y;c>r!=d>r&&n<(u-l)*(r-c)/(d-c)+l&&(s=!s)}return s}(n,o);r?f():s&&(f(),u())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}}),[c,d,o,u,f]),e.jsx(Xj,{...t,ref:i})})),[Gj,Kj]=Nj(Pj,{isInside:!1}),Qj=q("TooltipContent"),Xj=Y.forwardRef(((t,n)=>{const{__scopeTooltip:r,children:s,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=t,c=Lj($j,r),u=Cj(r),{onClose:d}=c;return Y.useEffect((()=>(document.addEventListener(Aj,d),()=>document.removeEventListener(Aj,d))),[d]),Y.useEffect((()=>{if(c.trigger){const e=e=>{const t=e.target;t?.contains(c.trigger)&&d()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}}),[c.trigger,d]),e.jsx(L,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:e=>e.preventDefault(),onDismiss:d,children:e.jsxs(O,{"data-state":c.stateAttribute,...u,...l,ref:n,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(Qj,{children:s}),e.jsx(Gj,{scope:r,isInside:!0,children:e.jsx($,{id:c.contentId,role:"tooltip",children:a||s})})]})})}));Hj.displayName=$j;var Yj="TooltipArrow";Y.forwardRef(((t,n)=>{const{__scopeTooltip:r,...s}=t,a=Cj(r);return Kj(Yj,r).isInside?null:e.jsx(B,{...a,...s,ref:n})})).displayName=Yj;var Jj=qj,Zj=Hj;const eR=Ij,tR=Oj,nR=Fj,rR=Y.forwardRef((({className:t,sideOffset:n=4,...r},s)=>e.jsx(Jj,{children:e.jsx(Zj,{ref:s,sideOffset:n,className:Vm("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})})));function sR({searchTerm:t,roleFilter:n,selectedUserId:r,onUserSelect:s}){const[a,i]=Y.useState([]),[o,l]=Y.useState(!0),[c,u]=Y.useState(null),[d,h]=Y.useState({}),f=function(){const{user:e}=ZT(),[t,n]=Y.useState({});return Y.useEffect((()=>{if(!e?.id)return void n({});const t=kT(LN(YT,"chats"),NT("participants","array-contains",String(e.id)));let r=[];const s=WT(t,(t=>{r.forEach((e=>e())),r=[],t.forEach((t=>{const s=t.id;if(!s.startsWith("private_"))return;const a=(t.data().participants||[]).find((t=>String(t)!==String(e.id)));if(!a)return;const i=WT(kT(LN(YT,"chats",s,"messages"),NT("readBy","not-in",[[String(e.id)]])),(t=>{let r=0;t.forEach((t=>{const n=t.data();n.senderId!==String(a)||n.readBy&&n.readBy.includes(String(e.id))||r++})),n((e=>({...e,[a]:r})))}));r.push(i)}))}));return()=>{r.forEach((e=>e())),s()}}),[e?.id]),t}(),{user:m}=ZT();Y.useEffect((()=>{let e=!0;return m?.id&&(async()=>{try{if(!m?.id)return;const t=kT(LN(YT,"chats"),NT("participants","array-contains",String(m.id)),jT("lastActivity","desc")),n=await BT(t),r={};n.forEach((e=>{const t=e.data();if(t.participants&&2===t.participants.length){const[e,n]=t.participants,s=String(e)===String(m.id)?n:e;r[s]=t.lastActivity?.toDate()||new Date(0)}})),e&&h(r)}catch(t){console.error("Error fetching last activities:",t)}})(),()=>{e=!1}}),[m?.id]),Y.useEffect((()=>{let e=!0;return(async()=>{try{l(!0);const t={includeRoles:!0};n&&(t.role=n);const r=(await Kd.get("/api/users/list",{params:t})).data.data||[];console.log("API Response - Users:",r);const s=[...r].sort(((e,t)=>{const n=d[e.id]||new Date(0),r=d[t.id]||new Date(0),s=f[e.id]>0,a=f[t.id]>0;return s&&!a?-1:!s&&a?1:r.getTime()-n.getTime()}));e&&i(s)}catch(t){e&&u("Erreur lors de la rcupration des utilisateurs")}finally{e&&l(!1)}})(),()=>{e=!1}}),[n,d,f]);const p=a.filter((e=>{const n=t.toLowerCase();return e.firstName?.toLowerCase().includes(n)||e.lastName?.toLowerCase().includes(n)||e.email?.toLowerCase().includes(n)||e.userRoles&&e.userRoles.some((e=>e.role.name.toLowerCase().includes(n)))}));return o?e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}):c?e.jsx("div",{className:"text-red-500 text-center p-4",children:c}):e.jsx("div",{className:"overflow-y-auto flex-1",children:e.jsx(eR,{children:e.jsx("div",{className:"space-y-2 p-4",children:p.map((t=>e.jsxs("button",{onClick:()=>s?.(t),className:"w-full flex items-center space-x-3 p-3 rounded-lg transition-colors text-sm "+(r===t.id?"bg-gray-700 border-2 border-blue-500":"hover:bg-gray-700"),style:{minHeight:48},children:[e.jsxs(tR,{children:[e.jsx(nR,{asChild:!0,children:e.jsx(te,{to:`/profile/${t.id}`,onClick:e=>e.stopPropagation(),className:"w-10 h-10 rounded-full bg-gray-600 flex items-center justify-center text-white text-base cursor-pointer hover:opacity-80 transition-colors overflow-hidden",children:t.profilePictureUrl?e.jsx("img",{src:t.profilePictureUrl,alt:`Photo de profil de ${t.firstName}`,className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-base",children:t.firstName?.charAt(0)?.toUpperCase()||t.email?.charAt(0)?.toUpperCase()||"U"})})}),e.jsx(rR,{side:"top",align:"center",className:`max-w-md px-4 py-2 text-sm z-50 ${t.userRoles&&t.userRoles.length>0?kj(t.userRoles[0].role.name):""}`,children:t.userRoles&&t.userRoles.length>0?t.userRoles.map(((t,n)=>e.jsx("div",{className:"text-sm text-white whitespace-nowrap",children:Ej(t.role.name)},t.role.name))):e.jsx("div",{className:"text-sm text-white whitespace-nowrap",children:"Utilisateur"})})]}),e.jsxs("div",{className:"flex-1 flex items-center gap-2 truncate",children:[e.jsx("span",{className:"font-medium text-white truncate",style:{maxWidth:140},children:t.firstName&&t.lastName?`${t.firstName} ${t.lastName}`:t.email}),f[t.id]>0&&e.jsx("span",{className:"ml-2 inline-flex items-center justify-center px-2 py-0.5 rounded-full text-xs font-bold bg-red-600 text-white min-w-[20px] h-5",children:f[t.id]})]}),e.jsx(Ec,{className:"w-5 h-5 text-gray-400"})]},t.id)))})})})}function aR({onUserSelect:t,selectedUserId:n}){const[r,s]=Y.useState(""),[a,i]=Y.useState(""),[o,l]=Y.useState(!1),[c,u]=Y.useState([]);Y.useEffect((()=>{let e=!0;return(async()=>{try{const t=(await Kd.get("/api/users/list",{params:{includeRoles:!0}})).data.data||[],n=Array.from(new Set(t.flatMap((e=>(e.userRoles||[]).map((e=>e.role.name))))));e&&u(n)}catch{}})(),()=>{e=!1}}),[]);const d=e=>{i(e),l(!1)};return e.jsx(eR,{children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"p-4 border-b border-gray-800 flex gap-2 items-center",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"text",value:r,onChange:e=>s(e.target.value),placeholder:"Rechercher un contact...",className:"w-full bg-gray-700 text-white rounded-lg pl-10 pr-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx(jc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"})]}),e.jsxs(fj,{open:o,onOpenChange:l,children:[e.jsx(mj,{asChild:!0,children:e.jsx("button",{className:`bg-gray-700 ${a?"text-blue-400 ring-2 ring-blue-500":"text-gray-400"} hover:text-white rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors`,children:e.jsx(Ic,{className:"h-5 w-5 "+(a?"text-blue-400":"")})})}),e.jsx(pj,{className:"w-64 p-3 bg-gray-800 border border-gray-700 rounded-lg shadow-xl",align:"end",side:"top",sideOffset:5,style:{zIndex:9999},children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-medium text-gray-300 mb-2",children:"Filtrer par rle"}),e.jsx("button",{onClick:()=>d(""),className:"w-full text-left px-3 py-2 rounded-lg transition-colors "+(a?"text-gray-300 hover:bg-gray-700":"bg-blue-600 text-white"),children:"Tous les rles"}),c.map((t=>e.jsx("button",{onClick:()=>d(t),className:"w-full text-left px-3 py-2 rounded-lg transition-colors "+(a===t?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-700"),children:Ej(t)},t)))]})})]})]}),e.jsx("div",{className:"p-4 border-b border-gray-800",children:e.jsxs("button",{onClick:()=>t?.({id:"global",firstName:"Chat Global"}),className:"w-full flex items-center space-x-3 p-3 rounded-lg hover:bg-blue-700 transition-colors "+("global"===n?"bg-blue-800 border-2 border-blue-500":"bg-blue-800/80 border border-blue-600"),children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center text-white text-lg",children:e.jsx(uc,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"font-medium text-white",children:"Chat Global"}),e.jsx("div",{className:"text-sm text-blue-200",children:"Tous les utilisateurs"})]}),e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})]},"global-chat")}),e.jsx(sR,{searchTerm:r,roleFilter:a,selectedUserId:n,onUserSelect:t})]})})}rR.displayName=Zj.displayName;const iR=(e="global",t=0)=>{const[n,r]=Y.useState([]),[s,a]=Y.useState(!0),[i,o]=Y.useState(null),[l,c]=Y.useState(!1),[u,d]=Y.useState({}),{user:h}=ZT();console.log("RENDER useChat",{chatId:e,refreshChat:t,user:h});const f=()=>{try{let t;if(h?.id)t=h.id;else if(localStorage.getItem("user"))try{const e=JSON.parse(localStorage.getItem("user"));t=e?.id}catch(e){console.warn("Error parsing user from localStorage:",e)}else t=localStorage.getItem("userId")||localStorage.getItem("user_id");return t?(t=String(t),t):(console.warn("No user ID found in any source"),null)}catch(t){return console.error("useChat - Erreur lors de la rcupration de l'ID utilisateur:",t),null}},m=Y.useCallback((async e=>{try{const t=await jh.getPublicProfile(e);o(t)}catch(t){console.error("Error fetching chat partner:",t)}}),[]),p=Y.useCallback((async t=>{if("global"!==e&&h?.id)try{const r=ON(YT,"chats",String(e)),s=ON(LN(r,"typing"),String(h.id));if(t)await qT(s,{userId:String(h.id),timestamp:new aT("serverTimestamp")});else try{await $T(s,{timestamp:null})}catch(n){console.log("No typing status to update")}}catch(r){console.error("Error updating typing status:",r)}}),[e,h]);Y.useEffect((()=>{if("global"!==e)try{const t=ON(YT,"chats",String(e)),n=WT(LN(t,"typing"),(e=>{const t={};e.docs.forEach((e=>{e.data().timestamp&&(t[e.id]=!0)})),d(t)}),(e=>{console.error("Error listening to typing status:",e)}));return()=>n()}catch(t){console.error("Error setting up typing listener:",t)}}),[e]),Y.useEffect((()=>{let n=!0;const s=f();if(console.log("[useChat] useEffect triggered",{chatId:e,refreshChat:t,userId:s,user:h}),!s)return r([]),a(!1),void console.warn("[useChat] No userId, aborting listener");if("global"!==e&&e.startsWith("private_")){const[,t,n]=e.split("_");m(t===s?n:t)}const i=kT(LN(YT,"chats",e,"messages"),jT("createdAt","desc"),(o=50,RT._create("limit",o,"F")));var o;console.log("[useChat] Setting up Firestore listener",{path:`chats/${e}/messages`});const l=WT(i,(e=>{if(n)try{const t=e.docs.map((e=>({id:e.id,...e.data(),isUser:e.data().senderId===s})));console.log("[useChat] Firestore snapshot received",{count:t.length,messagesData:t}),r(t.reverse()),a(!1)}catch(t){console.error("[useChat] Error processing messages:",t),a(!1)}}),(e=>{console.error("[useChat] Error fetching messages:",e),a(!1)}));return()=>{n=!1,l(),console.log("[useChat] Firestore listener unsubscribed",{chatId:e})}}),[e,h?.id,t]);const g=Y.useCallback((e=>{const t=f();return t&&e?((e,t)=>{const n=[e,t].sort();return`private_${n[0]}_${n[1]}`})(t,e):null}),[]);return Y.useEffect((()=>{if("global"===e)return;const t=f();if(!t)return;const n=WT(kT(LN(YT,"chats",e,"messages"),NT("readBy","not-in",[[t]])),(async n=>{const r=($N(s=CN(s=YT,BN)),new QT(s,(e=>GT(s,e))));
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var s;n.docs.forEach((n=>{const s=n.data();if(!(s.senderId===t||s.readBy&&s.readBy.includes(t))){const a=ON(YT,"chats",e,"messages",n.id);r.update(a,{readBy:[...s.readBy||[],t]})}})),n.empty||await r.commit()}));return()=>n()}),[e]),{messages:n,loading:s,sendMessage:async t=>{try{const n=f();if(!n||!t.trim())return;if("global"!==e&&e.startsWith("private_")){const[,t,n]=e.split("_"),r=ON(YT,"chats",e);(await zT(r)).exists()?await qT(r,{lastActivity:new Date},{merge:!0}):await qT(r,{participants:[t,n],createdAt:new Date,lastActivity:new Date})}const r=LN(YT,"chats",e,"messages"),s={content:t.trim(),senderId:n,senderName:h?.username||h?.firstName||"Anonymous",senderRole:h?.roles?.[0]||"ROLE_USER",createdAt:new Date,timestamp:Date.now(),readBy:[n]};return await HT(r,s),p(!1),!0}catch(n){return console.error("[useChat] Error sending message:",n),!1}},startPrivateChat:g,chatPartner:i,handleTyping:p,isTyping:l,typingUsers:u}};function oR({shakePauseDuration:t=3.5}){const[n,r]=Y.useState(!1),[s,a]=Y.useState("contact"),[i,o]=Y.useState(320),[l,c]=Y.useState(""),[u,d]=Y.useState("global"),[h,f]=Y.useState(0),m=Y.useRef(null),p=Y.useRef(null),g=Y.useRef(null),y=Y.useRef(null),v=Y.useRef(null),b=Y.useRef(null),{messages:x,loading:w,sendMessage:E,startPrivateChat:k,chatPartner:S}=iR(u,h),N=function(){const{user:e}=ZT(),[t,n]=Y.useState(0);return Y.useEffect((()=>{console.log("[useUnreadPrivateMessagesCount] user:",e)}),[e]),Y.useEffect((()=>{if(!e?.id)return void n(0);const t=kT(LN(YT,"chats"),NT("participants","array-contains",String(e.id)));let r=[];const s=WT(t,(t=>{r.forEach((e=>e())),r=[];const s={};t.forEach((t=>{const a=t.id;if(!a.startsWith("private_"))return;const i=WT(kT(LN(YT,"chats",a,"messages"),NT("readBy","not-in",[[String(e.id)]])),(t=>{let r=0;t.forEach((t=>{const n=t.data();n.senderId===String(e.id)||n.readBy&&n.readBy.includes(String(e.id))||r++})),s[a]=r,n(Object.values(s).reduce(((e,t)=>e+t),0))}));r.push(i)}))}));return()=>{r.forEach((e=>e())),s()}}),[e?.id]),t}(),{user:T}=ZT();Y.useEffect((()=>{console.log("[SlidingChat] user from useAuth:",T)}),[T]),Y.useEffect((()=>{console.log("[SlidingChat] unreadPrivateCount:",N)}),[N]),Y.useEffect((()=>{m.current&&o(m.current.offsetWidth)}),[]),Y.useEffect((()=>{p.current?.scrollIntoView({behavior:"smooth"})}),[x]),Y.useEffect((()=>{"chat"===s&&f((e=>e+1))}),[s,u]),Y.useEffect((()=>{if(g.current){g.current.style.height="auto";const e=g.current.scrollHeight;g.current.style.height=Math.min(e,120)+"px"}}),[l]),Y.useEffect((()=>{document.documentElement.style.setProperty("--shake-pause-duration",`${t}s`)}),[t]),Y.useEffect((()=>{const e=()=>{if(!b.current||!y.current||!v.current)return;const e="chat"===s?y.current:v.current,t=e.getBoundingClientRect();b.current.style.width=`${t.width+8}px`,b.current.style.left=e.offsetLeft-4+"px"};e(),"chat"===s&&S?.data?.user?.firstName&&e();const t=new ResizeObserver(e);return y.current&&t.observe(y.current),v.current&&t.observe(v.current),()=>{t.disconnect()}}),[s,S?.data?.user?.firstName]);const C=async()=>{if(!l.trim())return;await E(l)&&(c(""),g.current&&(g.current.style.height="auto"))};return Y.useEffect((()=>{if(n)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)};function e(e){!m.current||m.current.contains(e.target)||e.target.closest("[data-radix-popper-content-wrapper]")||r(!1)}}),[n]),e.jsx("div",{className:"fixed top-1/2 z-50",style:{right:n?28:-24,transform:"translateY(-50%)",width:376,transition:"right 0.8s cubic-bezier(0.4,0,0.2,1)",pointerEvents:n?"auto":"none"},children:e.jsxs("div",{ref:m,className:"relative flex items-center h-full",style:{transform:`translateX(${n?0:320}px)`,transition:"transform 0.8s cubic-bezier(0.4,0,0.2,1)"},children:[e.jsxs("button",{onClick:()=>{r(!n)},className:"flex items-center justify-center w-[32px] h-[80px] rounded-l-[28px] focus:outline-none relative overflow-hidden cursor-pointer","aria-label":"Toggle chat",style:{background:"linear-gradient(135deg, #5C85EE 23%, #00164D 100%)",boxShadow:"0 8px 48px 0 rgba(79, 123, 250, 0.35)",border:"none",padding:0,pointerEvents:"auto"},children:[e.jsxs("span",{style:{position:"absolute",transition:"opacity 0.4s cubic-bezier(0.4,0,0.2,1), transform 0.4s cubic-bezier(0.4,0,0.2,1)",opacity:n?0:1,transform:n?"translateX(-20px) scale(0.8)":"translateX(0) scale(1)",width:25,height:25,display:"block"},children:[e.jsx("img",{src:"data:image/svg+xml,%3csvg%20width='9'%20height='9'%20viewBox='0%200%209%209'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M7.69714%205.88792C8.08283%205.13605%208.18729%204.27115%207.99172%203.44908C7.79614%202.62701%207.31337%201.90182%206.63042%201.40419C5.94747%200.90657%205.10923%200.669236%204.26678%200.734959C3.42432%200.800682%202.63303%201.16514%202.03552%201.76266C1.438%202.36018%201.07354%203.15146%201.00782%203.99392C0.942092%204.83638%201.17943%205.67461%201.67705%206.35756C2.17468%207.04052%202.89986%207.52328%203.72194%207.71886C4.54401%207.91444%205.40891%207.80997%206.16077%207.42428L8.48501%208.21216L7.69714%205.88792Z'%20stroke='white'%20stroke-width='0.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M6.12305%204.27075H6.11755'%20stroke='white'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M4.54688%204.27075H4.54137'%20stroke='white'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M2.97168%204.27075H2.96618'%20stroke='white'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",alt:"Chat",style:{width:25,height:25,display:"block"},className:N>0?"chat-icon-notif":"","data-pause-duration":t}),N>0&&console.log("[SlidingChat] Affichage badge numrot",N),N>0&&e.jsx("span",{className:"absolute min-w-[16px] h-[16px] bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center border border-white shadow-lg z-10",style:{padding:"0 4px",lineHeight:"16px",boxShadow:"0 0 4px 0 rgba(0,0,0,0.15)",top:"-7px",right:"1px"},title:`${N} message(s) priv(s) non lu(s)`,children:N})]}),e.jsx("span",{style:{position:"absolute",transition:"opacity 0.4s cubic-bezier(0.4,0,0.2,1), transform 0.4s cubic-bezier(0.4,0,0.2,1)",opacity:n?1:0,transform:n?"translateX(0) scale(1)":"translateX(20px) scale(0.8)",pointerEvents:n?"auto":"none",width:25,height:25,display:"block"},children:e.jsx(zc,{className:"w-[25px] h-[25px] text-white"})})]}),e.jsxs("div",{className:"w-80 h-[36rem] rounded-3xl shadow-xl overflow-hidden flex flex-col chat-panel-modern",style:{transition:"opacity 0.8s ease-in-out",opacity:n?1:.95},children:[e.jsx("div",{className:"flex items-center justify-center p-4 border-b border-gray-800",children:e.jsxs("div",{className:"relative flex space-x-1 tab-switcher",children:[e.jsx("div",{ref:b,className:"tab-bg-slider","aria-hidden":"true"}),e.jsx("button",{ref:y,onClick:()=>{a("chat"),u||d("global")},className:Vm("tab-btn","chat"===s?"active":""),tabIndex:0,children:"global"===u?"Global":S?.data?.user?.firstName||"Global"}),e.jsx("button",{ref:v,onClick:()=>a("contact"),className:Vm("tab-btn","contact"===s?"active":""),tabIndex:0,style:{position:"relative"},children:"Contact"})]})}),e.jsx("div",{className:"relative flex-1 overflow-hidden sliding-tabs-container",children:e.jsxs("div",{className:"sliding-tabs-inner "+("chat"===s?"show-chat":"show-contact"),children:[e.jsxs("div",{className:"tab-content chat-tab flex flex-col justify-between",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[w?e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}):0===x.length?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:["global"===u?e.jsxs(e.Fragment,{children:[e.jsx(uc,{className:"w-16 h-16 mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-semibold mb-2",children:"Chat Global"})]}):S?.data?.user?e.jsxs(e.Fragment,{children:[S.data.user.profilePictureUrl?e.jsx(te,{to:`/profile/${S.data.user.id}`,className:"hover:opacity-80 transition-opacity",children:e.jsx("img",{src:S.data.user.profilePictureUrl,alt:`Photo de profil de ${S.data.user.firstName}`,className:"w-16 h-16 rounded-full mb-4 object-cover"})}):e.jsx(te,{to:`/profile/${S.data.user.id}`,className:"w-16 h-16 rounded-full bg-gray-600 mb-4 flex items-center justify-center text-2xl text-white hover:opacity-80 transition-opacity",children:S.data.user.firstName?.charAt(0).toUpperCase()||"A"}),e.jsx("p",{className:"text-lg font-semibold mb-2",children:S.data.user.firstName||"Utilisateur"})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-600 mb-4 animate-pulse"}),e.jsx("p",{className:"text-lg font-semibold mb-2",children:"Chargement du profil..."})]}),e.jsx("p",{className:"text-sm",children:"Commencez la conversation !"})]}):x.map((t=>e.jsxs("div",{className:Vm("flex mb-4",t.isUser?"justify-end":"justify-start"),style:{transition:"opacity 0.8s ease-in-out, transform 0.8s ease-in-out",opacity:n?1:0,transform:n?"translateY(0)":"translateY(10px)"},children:[!t.isUser&&e.jsx(te,{to:`/profile/${t.senderId}`,className:"w-8 h-8 rounded-full bg-gray-600 mr-2 overflow-hidden flex items-center justify-center text-xs text-white hover:opacity-80 transition-opacity",children:t.senderName?.charAt(0).toUpperCase()||"A"}),e.jsxs("div",{className:Vm("max-w-[70%] p-3 rounded-2xl break-words whitespace-pre-wrap",t.isUser?"bg-blue-600 text-white user-bubble":"bg-gray-700 text-white"),style:{wordBreak:"break-word",overflowWrap:"break-word",hyphens:"auto",marginRight:t.isUser?12:0,marginLeft:t.isUser?void 0:0},children:[e.jsx("p",{className:"text-sm",children:t.content}),e.jsxs("p",{className:"text-xs opacity-50 mt-1",children:[t.senderName,"  ",new Date(t.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]},t.id))),e.jsx("div",{ref:p})]}),e.jsx("div",{className:"px-3 pb-3 pt-2",style:{transition:"opacity 0.8s ease-in-out, transform 0.8s ease-in-out",transitionDelay:"0.1s",opacity:n?1:0,transform:n?"translateY(0)":"translateY(20px)"},children:e.jsxs("div",{className:"flex items-end gap-2 w-full",children:[e.jsx("div",{className:"flex-1 flex items-start px-3 py-1.5",style:{background:"linear-gradient(135deg, #2B367A 0%, #3B47B6 100%)",borderRadius:"1.8rem",boxShadow:"0 2px 8px 0 rgba(44, 62, 120, 0.10)",minHeight:44,maxHeight:132,display:"flex",alignItems:"center",height:"100%"},children:e.jsx("textarea",{ref:g,value:l,onChange:e=>c(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),C())},placeholder:"Commencer  parler...",rows:1,className:"bg-transparent border-none outline-none text-white placeholder-gray-300 w-full font-normal resize-none placeholder:text-xs placeholder:leading-tight",style:{padding:"6px 12px",minHeight:28,maxHeight:120,background:"transparent",overflow:"hidden",lineHeight:"1.2",fontSize:14,textAlign:"left",verticalAlign:"middle",height:"100%",display:"flex",alignItems:"center"}})}),e.jsx("button",{onClick:C,className:"w-11 h-11 rounded-full flex items-center justify-center shadow-lg send-btn",style:{background:"linear-gradient(135deg, #5C85EE 23%, #00164D 100%)",boxShadow:"0 4px 16px 0 rgba(79, 123, 250, 0.18)",border:"none",marginLeft:4},children:e.jsx(Rc,{className:"h-5 w-5 text-white"})})]})})]}),e.jsxs("div",{className:"tab-content contact-tab flex flex-col justify-between",children:[e.jsx("div",{className:"flex-1",children:e.jsx(aR,{onUserSelect:e=>{if("global"===e.id)d("global"),a("chat");else{const t=k(e.id);t&&(d(t),a("chat"))}},selectedUserId:"global"===u?"global":S?.data?.user?.id})}),e.jsx("div",{style:{height:68}})]})]})})]})]})})}const lR=Y.createContext({profileData:null,refreshProfileData:()=>{},isProfileLoading:!1}),cR=({isActive:t})=>{const n=Y.useRef(null),r=Y.useRef(null),s=Y.useRef([]),a=Y.useCallback((()=>{const e=n.current;if(!e)return;e.getContext("2d").clearRect(0,0,e.width,e.height)}),[]),i=Y.useCallback((()=>{const e=n.current;if(!e)return;e.getContext("2d");const t=["#FFD700","#FF69B4","#1E90FF","#20B2AA","#9370DB","#FF7F50"];s.current=[];for(let n=0;n<80;n++)s.current.push({x:Math.random()*e.width,y:Math.random()*e.height-e.height,color:t[Math.floor(Math.random()*t.length)],size:8*Math.random()+3,velocity:{x:3*Math.random()-1.5,y:2*Math.random()+1.5},rotation:360*Math.random(),rotationSpeed:4*Math.random()-2,shape:Math.random()>.7?"circle":"square",opacity:.4*Math.random()+.6})}),[]),o=Y.useCallback((()=>{const e=n.current;if(!e)return;const a=e.getContext("2d");a.clearRect(0,0,e.width,e.height),s.current.forEach((t=>{a.save(),a.globalAlpha=t.opacity,a.translate(t.x,t.y),a.rotate(t.rotation*Math.PI/180),a.fillStyle=t.color,"circle"===t.shape?(a.beginPath(),a.arc(0,0,t.size/2,0,2*Math.PI),a.fill()):a.fillRect(-t.size/2,-t.size/2,t.size,t.size),a.restore(),t.x+=t.velocity.x,t.y+=t.velocity.y,t.rotation+=t.rotationSpeed,t.y>e.height&&(t.y=-t.size,t.x=Math.random()*e.width),(t.x<-t.size||t.x>e.width+t.size)&&(t.x=Math.random()*e.width)})),t&&(r.current=requestAnimationFrame(o))}),[t]);return Y.useEffect((()=>{const e=()=>{const e=n.current;e&&(e.width=window.innerWidth,e.height=window.innerHeight,t&&i())};return window.addEventListener("resize",e),setTimeout(e,0),()=>{window.removeEventListener("resize",e)}}),[i,t]),Y.useEffect((()=>(t?(i(),r.current=requestAnimationFrame(o)):(r.current&&(cancelAnimationFrame(r.current),r.current=null),a(),s.current=[]),()=>{r.current&&(cancelAnimationFrame(r.current),r.current=null),a()})),[t,i,o,a]),t?e.jsx("canvas",{ref:n,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:100}}):null},uR=({isOpen:t,onClose:n})=>{if(J.useEffect((()=>{t?console.log("[CongratulationsModal] OUVERT"):console.log("[CongratulationsModal] Pas ouvert")}),[t]),!t)return null;const r=()=>{n()};return e.jsx(Be,{children:t&&e.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[e.jsx(_l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},className:"fixed inset-0 bg-black/30 backdrop-blur-sm",onClick:r}),e.jsx(_l.div,{initial:{scale:.8,opacity:0,y:30},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:30},transition:{type:"spring",damping:25,stiffness:200,duration:.8},className:"relative w-full max-w-[85vw] sm:max-w-md bg-white dark:bg-gray-900 rounded-xl shadow-xl overflow-hidden z-[61]",children:e.jsx("div",{className:"relative p-4 sm:p-6 md:p-8 flex flex-col items-center justify-center text-center",children:e.jsxs("div",{className:"relative z-10 w-full",children:[e.jsx("div",{className:"mb-4 sm:mb-6 bg-blue-100 dark:bg-blue-900/30 w-16 h-16 sm:w-20 sm:h-20 md:w-24 md:h-24 rounded-full flex items-center justify-center mx-auto",children:e.jsx(Sc,{className:"h-8 w-8 sm:h-10 sm:w-10 md:h-12 md:w-12 text-blue-600 dark:text-blue-400"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-2 sm:mb-3 md:mb-4 text-gray-800 dark:text-gray-100",children:"Flicitations !"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-300 mb-4 sm:mb-6 md:mb-8 mx-auto max-w-xs sm:max-w-sm",children:"Votre profil est maintenant complet ! Vous tes prt  vous connecter avec des recruteurs potentiels et  profiter pleinement de toutes les fonctionnalits."}),e.jsx(qm,{className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 text-sm sm:text-base",onClick:r,children:"Continuer"})]})})})]})})},dR="initial",hR="minimal",fR="loading",mR="complete",pR="error",gR=()=>{const[t,n]=Y.useState(null),[r,s]=Y.useState(null),[a,i]=Y.useState(dR),[o,l]=Y.useState(!1),{hasRole:c}=op(),u=re(),[d,h]=Y.useState(of.isLoggedIn()),[f,m]=Y.useState("100vh"),[p,g]=Y.useState(!0),[y,v]=Y.useState(!1),[b,x]=Y.useState(!1),{theme:w,isDark:E}=UC(),[k,S]=Y.useState(null);Y.useEffect((()=>{d||(i(dR),n(null),s(null))}),[d]);const N=[].includes(u.pathname),T=Y.useCallback((()=>{const e=window.innerHeight;m(e-64+200+"px")}),[]),C=Y.useCallback((async(e={})=>{if(of.isLoggedIn())try{i(fR);const t=await _f.getAllProfileData({forceRefresh:e.forceRefresh||!0,preventImmediateRefresh:e.preventImmediateRefresh||!1});return s(t),i(mR),t}catch(t){return i(pR),null}return null}),[]);Y.useEffect((()=>{function e(e){console.log("[MainLayout] Rception de l'vnement profile:completion",{detail:e.detail,isShowingConfetti:y,showCongratulations:b,currentUser:k}),y||b?console.log("[MainLayout] Modal dj affich, on ignore l'vnement"):(v(!0),x(!0),console.log("[MainLayout] Modal et confettis activs"))}return window.addEventListener("profile:completion",e),console.log("[MainLayout] Event listener profile:completion ajout"),()=>{window.removeEventListener("profile:completion",e),console.log("[MainLayout] Event listener profile:completion retir")}}),[y,b,k]),Y.useEffect((()=>{console.log("[MainLayout] tat du modal:",{isShowingConfetti:y,showCongratulations:b,currentUser:k?.id})}),[y,b,k]);const j=Y.useCallback((()=>{v(!1),x(!1),_f.acknowledgeProfileCompletion().then((()=>C({forceRefresh:!0}))).catch((e=>{console.error("Failed to acknowledge profile completion from modal:",e)}))}),[C]);Y.useEffect((()=>(T(),window.addEventListener("resize",T),()=>{window.removeEventListener("resize",T)})),[T]),Y.useEffect((()=>{T(),window.scrollTo(0,0)}),[u.pathname,T]),Y.useEffect((()=>{const e=e=>{e.detail&&e.detail.user&&(n(e.detail.user),i(hR))},t=e=>{e.detail&&e.detail.user&&n(e.detail.user)},r=()=>{h(!0)},a=()=>{h(!1),n(null),s(null),i(dR)};return h(of.isLoggedIn()),(async()=>{if(of.isLoggedIn())try{const t=of.getUser();if(t){if(n(t),i(hR),!t._minimal){i(mR);try{const[e,t]=await Promise.all([_f.getAllProfileData({forceRefresh:!1}),_f.getStats({forceRefresh:!1})]);t&&t.stats&&(e.stats=t.stats),s(e),setTimeout((async()=>{const[e,t]=await Promise.all([_f.getAllProfileData({forceRefresh:!0}),_f.getStats({forceRefresh:!0})]);t&&t.stats&&(e.stats=t.stats),s(e)}),9e3)}catch(e){}}}else{i(fR);const e=await of.getCurrentUser();n(e),i(mR)}setTimeout((()=>{l(!0)}),300)}catch(t){i(pR)}})(),document.addEventListener("auth:minimal-data-ready",e),document.addEventListener("user:data-updated",t),window.addEventListener("login-success",r),window.addEventListener("logout-success",a),()=>{document.removeEventListener("auth:minimal-data-ready",e),document.removeEventListener("user:data-updated",t),window.removeEventListener("login-success",r),window.removeEventListener("logout-success",a)}}),[T]);const R=Y.useMemo((()=>({profileData:r,refreshProfileData:C,isProfileLoading:a===fR})),[r,C,a]),A=a===dR||a===fR,_=a===hR||a===mR;return e.jsx(lR.Provider,{value:R,children:e.jsxs("div",{className:"flex flex-col min-h-screen transition-colors duration-300 "+("dark"===w?"dark bg-gray-900 text-gray-100":"bg-gray-50 text-gray-900"),children:[d&&e.jsx(BC,{}),e.jsx(uR,{isOpen:b&&r&&r.stats&&r.stats.profile&&!r.stats.profile.isAcknowledged,onClose:j}),e.jsx("main",{className:`flex-grow transition-colors duration-300 ${N?"px-0 py-0":"container mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full"} ${"dark"===w?"bg-gray-900":"bg-gray-50"}`,style:{minHeight:f,maxWidth:N?"100%":void 0},children:e.jsx("div",{className:"w-full max-w-[2000px] mx-auto",children:e.jsx(ae,{context:{userData:t,profileData:r,loadingState:a,isLoading:A,hasMinimalData:_,theme:w,isDark:"dark"===w}})})}),e.jsx(cR,{isActive:y}),e.jsx(oR,{}),c&&c(ap.GUEST)&&e.jsx(gj,{})]})})},yR=()=>{const t=re(),[n,r]=Y.useState(!0),[s,a]=Y.useState(!1),[i,o]=Y.useState(!1),l=Y.useRef(!1),c=Y.useRef(!1),{hasRole:u,isLoading:d}=op(),h=lp();if(Y.useEffect((()=>{!d&&s&&o(!0)}),[d,s]),Y.useEffect((()=>{(async()=>{const e=of.isLoggedIn();e||"/"!==t.pathname&&"/login"!==t.pathname&&"/register"!==t.pathname&&zh.error("Veuillez vous connecter pour accder  cette page",{duration:3e3,position:"top-center"}),a(e),r(!1)})()}),[t.pathname]),n||s&&d)return c.current&&localStorage.getItem("token")?e.jsx(ae,{}):null;if(!s){if(l.current)return null;l.current=!0;const n="/"!==t.pathname?t.pathname:void 0;return n&&sessionStorage.setItem("returnTo",n),e.jsx(se,{to:"/",replace:!0})}return!(()=>{if(!i||d)return!0;const e=t.pathname;if(u("ROLE_SUPERADMIN"))return!0;const n=[{path:"/superadmin",check:()=>u("ROLE_SUPERADMIN"),message:"Accs refus: Cette page est rserve aux super administrateurs"},{path:"/admin",check:()=>h.isAdmin(),message:"Accs refus: Vous n'avez pas les droits d'administrateur ncessaires"},{path:"/teacher",check:()=>h.isTeacher(),message:"Accs refus: Cette page est rserve aux formateurs"},{path:"/student",check:()=>h.isStudent(),message:"Accs refus: Cette page est rserve aux tudiants"},{path:"/hr",check:()=>h.isHR(),message:"Accs refus: Cette page est rserve aux ressources humaines"},{path:"/recruiter",check:()=>h.isRecruiter()||h.isAdmin()||h.isSuperAdmin(),message:"Accs refus: Cette page est rserve aux recruteurs"},{path:"/guest",check:()=>h.isGuest(),message:"Accs refus: Cette page est rserve aux invits"}].find((t=>e.startsWith(t.path)));return!(n&&!n.check())||("/guest"===n.path||"/student"===n.path||zh.error(n.message,{duration:3e3,position:"top-center"}),!1)})()&&i?e.jsx(se,{to:"/dashboard",replace:!0}):(c.current=!0,e.jsx("div",{className:"protected-route-wrapper",children:e.jsx(ae,{})}))},vR=Y.createContext();function bR({children:t}){const[n,r]=Y.useState("navy"),[s,a]=Y.useState("public"),i=Y.useMemo((()=>{const e={bg:"light"===n?"bg-white":"bg-gray-900",textPrimary:"light"===n?"text-gray-900":"text-white",textSecondary:"light"===n?"text-gray-600":"text-gray-300",textHighlight:"light"===n?"text-blue-600":"text-blue-400",border:"light"===n?"border-gray-200":"border-gray-700",cardBg:"light"===n?"bg-white":"bg-gray-800",shadow:"shadow-lg",buttonBg:"light"===n?"bg-blue-600 text-white hover:bg-blue-700":"bg-blue-500 text-white hover:bg-blue-600",buttonAlt:"light"===n?"bg-gray-200 text-gray-800 hover:bg-gray-300":"bg-gray-700 text-white hover:bg-gray-600",cosmicBg:"navy"===n?"bg-[#002147]":"bg-[#2D0922]",cosmicGlow:"navy"===n?"from-blue-900/20 to-blue-900/10":"from-purple-900/20 to-purple-900/10",buttonGradient:"navy"===n?"from-blue-600 to-blue-700":"from-purple-600 to-purple-700"},t={...e,navBg:"bg-transparent",navText:"text-white",navTextHover:"navy"===n?"hover:text-blue-400":"hover:text-purple-400",navBrand:{primary:"text-white",secondary:"navy"===n?"text-[#528eb2]":"text-purple-400"}},r={...e,navBg:"light"===n?"bg-white":"bg-gray-900",navText:"light"===n?"text-gray-900":"text-white",navTextHover:"light"===n?"hover:text-blue-600":"hover:text-blue-400",navBrand:{primary:"light"===n?"text-gray-900":"text-white",secondary:"light"===n?"text-blue-600":"text-blue-400"}};return"public"===s?t:r}),[n,s]),o={colorMode:n,themeMode:s,currentTheme:i,toggleColorMode:()=>r((e=>"navy"===e?"purple":"navy")),setThemeMode:a};return e.jsx(vR.Provider,{value:o,children:t})}function xR(){const e=Y.useContext(vR);if(void 0===e)throw new Error("useTheme must be used within a ThemeProvider");return e}const wR=()=>{const{colorMode:t,toggleColorMode:n,currentTheme:r}=xR(),s=re(),a="/login"===s.pathname,i="/register"===s.pathname;return e.jsx("nav",{className:"fixed top-0 left-0 w-full z-40 transition-all duration-300",children:e.jsxs("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[e.jsx("div",{className:"flex items-center",children:e.jsx(te,{to:"/",className:"flex items-center",children:e.jsxs(_l.div,{className:"text-2xl font-bold text-white",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},children:["Big",e.jsx("span",{className:"text-[#528eb2]",children:"Project"})]})})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex md:hidden",children:e.jsx($p,{})}),e.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[e.jsx(_l.button,{className:"relative w-10 h-10 rounded-full overflow-hidden",whileHover:{scale:1.1},whileTap:{scale:.9},onClick:n,children:e.jsx("div",{className:`absolute inset-0 ${"navy"===t?"bg-gradient-to-br from-[#0a3c6e] to-[#001a38]":"bg-gradient-to-br from-gray-800 to-black"} rounded-full flex items-center justify-center shadow-lg ${r.shadow}`,children:e.jsx(Be,{mode:"wait",children:"navy"===t?e.jsx(_l.div,{initial:{rotate:-45,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:45,opacity:0},transition:{duration:.3},className:"w-full h-full flex items-center justify-center",children:e.jsx(kc,{className:"w-7 h-7 text-blue-200"})},"moon"):e.jsx(_l.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:1.5,opacity:0},transition:{duration:.3},className:"w-full h-full flex items-center justify-center",children:e.jsx(Pc,{className:"w-7 h-7 text-yellow-300"})},"sun")})})}),!a&&e.jsx(te,{to:"/login",children:e.jsx(_l.button,{className:`py-2 px-6 ${r.navButtonBg} text-white rounded-full font-medium hover:bg-opacity-90 transition-colors shadow-lg ${r.shadow}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Connexion"})}),!i&&e.jsx(te,{to:"/register",children:e.jsx(_l.button,{className:`py-2 px-6 bg-transparent border ${r.navButtonBorder} ${r.textPrimary} rounded-full font-medium hover:bg-opacity-10 hover:bg-white hover:text-white transition-colors shadow-lg ${r.shadow}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Inscription"})})]})]})]})})},ER=({colorMode:t="navy",animationMode:n="cosmic",shootingStarDirection:r="diagonal"})=>{const s=Y.useRef(null);return Y.useEffect((()=>{if("cosmic"!==n)return;const e=s.current;if(!e)return;const a=e.getContext("2d");e.width=window.innerWidth,e.height=window.innerHeight;const i="navy"===t?{nebula1:"#0a3c6e",nebula2:"#001a38",nebula3:"#002147",nebula4:"#003366",star:"#e6f0ff",dust:"#0a3c6e"}:{nebula1:"#4B0082",nebula2:"#2D0922",nebula3:"#190033",nebula4:"#330033",star:"#ffffff",dust:"#4B0082"},o=[];for(let t=0;t<200;t++)o.push({x:Math.random()*e.width,y:Math.random()*e.height,radius:1.5*Math.random(),opacity:Math.random(),speed:.05*Math.random()});const l=[],c=[],u=[],d=(e,t,n)=>{c.push({x:e,y:t,vx:-Math.cos(n)*(.5+Math.random()),vy:-Math.sin(n)*(.5+Math.random()),alpha:.8+.2*Math.random(),radius:.6+.7*Math.random(),life:12+Math.floor(8*Math.random())})},h=(e,t,n,r)=>{const s=e,a=t,i=e-12*Math.cos(n),o=t-12*Math.sin(n);u.push({startX:s,startY:a,endX:i,endY:o,alpha:.5,width:2.2,life:25+Math.floor(15*Math.random()),startColor:"rgba(200,220,255,",endColor:"rgba(100,150,255,"})},f=[];for(let t=0;t<5;t++)f.push({x:Math.random()*e.width,y:Math.random()*e.height,radius:100+200*Math.random(),color:[i.nebula1,i.nebula2,i.nebula3,i.nebula4][Math.floor(4*Math.random())],opacity:.05+.1*Math.random()});const m=[];for(let t=0;t<100;t++)m.push({x:Math.random()*e.width,y:Math.random()*e.height,radius:1*Math.random(),color:i.dust,opacity:.1+.2*Math.random(),speed:.2*Math.random()});let p,g=null,y=0,v=!1,b=0,x=.1,w=null,E=0,k=!1,S=0,N=.1;if("horizontal"===r){(()=>{g={x:-8,y:e.height*(.4+.2*Math.random()),radius:1.1+.8*Math.random(),color:"rgba(180,220,255,1)"},v=!0,x=.08+.07*Math.random(),b=2e3+4e3*Math.random()})();setTimeout((()=>{w={x:e.width+8,y:e.height*(.4+.2*Math.random()),radius:1.1+.8*Math.random(),color:"rgba(180,220,255,1)"},k=!0,N=.08+.07*Math.random(),S=3e3+5e3*Math.random()}),1200+2e3*Math.random())}const T=()=>{if(a.clearRect(0,0,e.width,e.height),"horizontal"===r){const t=.21*e.height,n=.6*t,r=Date.now()/2200,s=Math.sin(r)*e.width*.08,i=a.createLinearGradient(s,n,e.width+s,n+t);i.addColorStop(0,"rgba(60,180,255,0.17)"),i.addColorStop(.3,"rgba(80,255,180,0.23)"),i.addColorStop(.6,"rgba(180,120,255,0.19)"),i.addColorStop(1,"rgba(60,180,255,0.13)"),a.save(),a.globalAlpha=1,a.filter="blur(28px)",a.fillStyle=i,a.fillRect(0,0,e.width,1.5*t),a.filter="none",a.globalAlpha=1,a.restore()}if(f.forEach((e=>{a.beginPath();const t=a.createRadialGradient(e.x,e.y,0,e.x,e.y,e.radius);t.addColorStop(0,`${e.color}${Math.round(255*e.opacity).toString(16).padStart(2,"0")}`),t.addColorStop(1,"transparent"),a.fillStyle=t,a.arc(e.x,e.y,e.radius,0,2*Math.PI),a.fill()})),o.forEach((t=>{t.y-=t.speed,t.y<0&&(t.y=e.height,t.x=Math.random()*e.width),a.beginPath(),a.arc(t.x,t.y,t.radius,0,2*Math.PI),a.fillStyle=`${i.star}${Math.round(255*t.opacity).toString(16).padStart(2,"0")}`,a.fill()})),"horizontal"===r&&g)if(v){g.x+=x;const t=Date.now(),n=.65+.35*Math.abs(Math.sin(t/400));a.save(),a.beginPath(),a.arc(g.x,g.y,g.radius,0,2*Math.PI),a.shadowColor="#bcdfff",a.shadowBlur=12,a.globalAlpha=n,a.fillStyle=g.color,a.fill(),a.globalAlpha=1,a.shadowBlur=0,a.restore(),g.x-g.radius>e.width+8&&(v=!1,y=0)}else y+=16,y>b&&(g.x=-8,g.y=e.height*(.4+.2*Math.random()),g.radius=1.1+.8*Math.random(),v=!0,x=.08+.07*Math.random(),b=2e3+4e3*Math.random());if("horizontal"===r&&w)if(k){w.x-=N;const e=Date.now()+1e3,t=.65+.35*Math.abs(Math.sin(e/400));a.save(),a.beginPath(),a.arc(w.x,w.y,w.radius,0,2*Math.PI),a.shadowColor="#bcdfff",a.shadowBlur=12,a.globalAlpha=t,a.fillStyle=w.color,a.fill(),a.globalAlpha=1,a.shadowBlur=0,a.restore(),w.x+w.radius<-8&&(k=!1,E=0)}else E+=16,E>S&&(w.x=e.width+8,w.y=e.height*(.6+.2*Math.random()),w.radius=1.1+.8*Math.random(),k=!0,N=.08+.07*Math.random(),S=3e3+5e3*Math.random());(()=>{if(l.length<3&&Math.random()<.01){const t=1+.5*Math.random(),n=0+14*Math.random();let s,a,i;"horizontal"===r?(s=0,a=0,i=Math.random()*(.7*e.height)):(s=Math.PI/4+Math.random()*Math.PI/4,a=Math.random()*e.width,i=0);const o="horizontal"===r?e.width:Math.sqrt(e.width*e.width+e.height*e.height),c=Math.random()<.2?(.3+.5*Math.random())*o:1.2*o,u=c*(.9+.15*Math.random());l.push({x:a,y:i,length:80+70*Math.random(),speed:5+7*Math.random(),angle:s,headRadius:t,headBlur:n,vibratePhase:Math.random()*Math.PI*2,distanceTraveled:0,lifespan:c,fadeOutPoint:u,trailSegments:[],headLifespan:.85*c,headVisible:!0})}})();for(let t=l.length-1;t>=0;t--){const n=l[t],r=n.angle+.03*Math.sin(n.vibratePhase+Date.now()/200);n.headVisible&&n.distanceTraveled>=n.headLifespan&&(n.headVisible=!1);let s=1;if(n.distanceTraveled>n.fadeOutPoint&&(s=Math.max(0,1-(n.distanceTraveled-n.fadeOutPoint)/(n.lifespan-n.fadeOutPoint))),n.trailSegments.length<50||n.trailSegments.shift(),n.trailSegments.push({x:n.x,y:n.y,opacity:s}),Math.random()<.3&&h(n.x,n.y,n.angle,n.speed),n.headVisible){const e=n.x+Math.cos(r)*n.speed*3,t=n.y+Math.sin(r)*n.speed*3;let s=1;if(n.distanceTraveled>n.fadeOutPoint){const e=(n.distanceTraveled-n.fadeOutPoint)/(n.headLifespan-n.fadeOutPoint);s=Math.max(0,1-e)}a.save(),a.save(),a.translate(e,t),a.rotate(r),a.scale(2.2,1),a.beginPath(),a.arc(0,0,n.headRadius,0,2*Math.PI),a.fillStyle=`rgba(230,240,255,${s})`,a.shadowColor=`rgba(230,240,255,${s})`,a.shadowBlur=n.headBlur*s,a.globalAlpha=.93*s,a.fill(),a.globalAlpha=1,a.shadowBlur=0,a.restore(),Math.random()<.9*s&&d(e-2*Math.cos(r),t-2*Math.sin(r),r)}n.x+=Math.cos(n.angle)*n.speed,n.y+=Math.sin(n.angle)*n.speed,n.distanceTraveled+=n.speed,(n.x>e.width||n.y>e.height||n.distanceTraveled>=n.lifespan||s<=.05)&&l.splice(t,1)}for(let e=c.length-1;e>=0;e--){const t=c[e];a.save(),a.beginPath(),a.arc(t.x,t.y,t.radius,0,2*Math.PI),a.fillStyle=`rgba(200,220,255,${t.alpha})`,a.shadowColor="#e6f0ff",a.shadowBlur=6,a.fill(),a.restore(),t.x+=t.vx,t.y+=t.vy,t.alpha*=.88,t.radius*=.97,t.life--,(t.life<=0||t.alpha<.05)&&c.splice(e,1)}for(let e=u.length-1;e>=0;e--){const t=u[e];a.save(),a.beginPath(),a.moveTo(t.startX,t.startY),a.lineTo(t.endX,t.endY);const n=a.createLinearGradient(t.startX,t.startY,t.endX,t.endY);n.addColorStop(0,`${t.startColor}${t.alpha})`),n.addColorStop(1,`${t.endColor}${.6*t.alpha})`),a.strokeStyle=n,a.lineWidth=t.width,a.shadowColor="#bcdfff",a.shadowBlur=5,a.stroke(),a.restore(),t.alpha*=.96,t.life--,(t.life<=0||t.alpha<.05)&&u.splice(e,1)}m.forEach((t=>{t.y+=t.speed,t.y>e.height&&(t.y=0,t.x=Math.random()*e.width),a.beginPath(),a.arc(t.x,t.y,t.radius,0,2*Math.PI),a.fillStyle=`${t.color}${Math.round(255*t.opacity).toString(16).padStart(2,"0")}`,a.fill()})),p=window.requestAnimationFrame(T)};T();const C=()=>{e.width=window.innerWidth,e.height=window.innerHeight};return window.addEventListener("resize",C),()=>{window.removeEventListener("resize",C),window.cancelAnimationFrame(p)}}),[t,n]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-0 "+("navy"===t?"bg-[#002147]":"bg-black")}),e.jsx("canvas",{ref:s,className:`absolute inset-0 ${"cosmic"===n?"opacity-100":"opacity-0"} transition-opacity duration-1000`}),e.jsx("div",{className:"absolute top-0 left-1/4 w-1/2 h-1/3 rounded-full blur-3xl "+("navy"===t?"bg-blue-900/20":"bg-purple-900/20")}),e.jsx("div",{className:"absolute bottom-0 right-1/4 w-1/2 h-1/3 rounded-full blur-3xl "+("navy"===t?"bg-blue-900/10":"bg-purple-900/10")})]})},kR=()=>{const{colorMode:t,currentTheme:n}=xR();return e.jsxs("div",{className:`min-h-screen relative ${n.bg}`,children:[e.jsx("div",{className:"fixed inset-0 z-0",children:e.jsx(ER,{colorMode:t})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx(wR,{}),e.jsx("main",{children:e.jsx(ae,{})})]})]})},SR=()=>{re();const[t,n]=Y.useState(!0),[r,s]=Y.useState(!1),a=Y.useRef(!1),i=Y.useRef(!1),o=lp();if(Y.useEffect((()=>{const e=async()=>{if(i.current)return;i.current=!0;const e=of.isLoggedIn();e!==a.current&&(a.current=e,s(e)),n(!1),i.current=!1};e();const t=()=>{setTimeout(e,50)};return window.addEventListener("login-success",t),window.addEventListener("logout-success",t),()=>{window.removeEventListener("login-success",t),window.removeEventListener("logout-success",t)}}),[]),t)return null;if(r){const t=o.getRoleDashboardPath();return e.jsx(se,{to:t,replace:!0})}return e.jsx(ae,{})},NR=Y.createContext({isLayoutLoading:!1,setLayoutLoading:()=>{},currentSection:null,isSidebarLoaded:!1,setSidebarLoaded:()=>{},visitedSections:new Set}),TR=({children:t})=>{const[n,r]=Y.useState(!1),[s,a]=Y.useState(!1),i=re(),[o,l]=Y.useState(null),[c,u]=Y.useState(new Set),d=Y.useRef(null),h=Y.useRef(""),{data:f,isLoading:m,isSuccess:p}=fe({queryKey:["currentUser"],queryFn:()=>{const e=ef.getCachedUserData(),t=Date.now(),n=e?Date.now()-6e4:0;return e&&t-n<3e4?Promise.resolve(e):of.getCurrentUser(!1,{requestSource:"profileLayout",preventRecursion:!0})},staleTime:3e5,cacheTime:18e5,enabled:of.isLoggedIn(),refetchOnWindowFocus:!1,retry:1});return Y.useEffect((()=>{if(p&&f){const e=setTimeout((()=>{a(!0)}),300);return()=>clearTimeout(e)}}),[p,f]),Y.useEffect((()=>{const e=i.pathname;let t=null;e.includes("/settings/profile")?t="profile":e.includes("/settings/security")?t="security":e.includes("/settings/notifications")?t="notifications":e.includes("/settings/documents")?t="documents":e.includes("/settings/career")&&(t="career"),l(t),d.current&&(clearTimeout(d.current),d.current=null);const n=e.startsWith("/settings/"),s=h.current.startsWith("/settings/");return t&&!c.has(t)||!s&&n?(r(!0),t&&u((e=>{const n=new Set(e);return n.add(t),n})),d.current=setTimeout((()=>{r(!1)}),600)):r(!1),h.current=e,()=>{d.current&&clearTimeout(d.current)}}),[i.pathname,c]),e.jsx(NR.Provider,{value:{isLayoutLoading:n,setLayoutLoading:r,currentSection:o,isSidebarLoaded:s,setSidebarLoaded:a,isUserDataLoading:m,visitedSections:c},children:t})},CR=()=>{const e=Y.useContext(NR);if(!e)throw new Error("useProfileLayout must be used within a ProfileLayoutProvider");return e},jR=Y.memo((({item:t,isActive:n,onClick:r})=>e.jsxs("button",{onClick:r,className:`w-full flex items-center justify-between px-3 py-2 rounded-md transition-colors\n      ${n?"bg-primary text-primary-foreground no":"hover:bg-muted text-muted-foregrfound hover:text-foreground"}\n      focus:outline-none focus-visible:outline-none`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(t.icon,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:t.title})]}),t.badge&&e.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 text-xs font-bold text-white bg-red-600 rounded-full",children:t.badge})]})));jR.displayName="NavButton";const RR=(e,t)=>{if(!e||!Array.isArray(e))return!1;const n=t.replace(/^ROLE_/,""),r=`ROLE_${n}`;return e.some((e=>{const s="object"==typeof e&&e?.name?e.name:e;return s===t||s===n||s===r}))},AR=Y.memo((({onNavigate:t})=>{const n=ee(),r=re(),{setSidebarLoaded:s}=CR(),{user:a,isLoading:i}=hp(),[o,l]=Y.useState(null),c=Y.useMemo((()=>!(!a||!a.roles)&&RR(a.roles,"ROLE_STUDENT")),[a]),u=Y.useMemo((()=>!(!a||!a.roles)&&RR(a.roles,"ROLE_GUEST")),[a]);Y.useEffect((()=>{if(a&&a.roles){const e={roles:a.roles,isStudent:c,isGuest:u,shouldShowCareer:c||u};l(e)}}),[a,c,u]),Y.useEffect((()=>{!i&&a&&s&&s(!0)}),[i,a,s]);const d=Y.useCallback((e=>{n(e),t?.()}),[n,t]),h=Y.useMemo((()=>{const e=[{title:"Mon compte",type:"header"},{title:"Modifier profil",icon:Uc,href:"/settings/profile"}];return(c||u)&&e.push({title:"Carrire",icon:Bl,href:"/settings/career"}),e.push({title:"Scurit",icon:yc,href:"/settings/security"},{title:"Notifications",icon:zl,href:"/settings/notifications"}),e}),[c,u]);return Y.useCallback((async()=>{try{await of.logout(),window.queryClient?.invalidateQueries("currentUser"),n("/login")}catch(e){console.error("Error during logout:",e),n("/login")}}),[n]),e.jsx("div",{className:"space-y-4 bg-transparent dark:bg-transparent sidebar-profile",children:e.jsx("nav",{className:"space-y-1 bg-transparent dark:bg-transparent",children:h.map((t=>{if("header"===t.type)return e.jsx("h2",{className:"px-3 text-lg font-semibold text-foreground",children:t.title},t.title);const n=r.pathname===t.href;return e.jsx(jR,{item:t,isActive:n,onClick:()=>d(t.href)},t.href)}))})})}));AR.displayName="SidebarProfile";const _R=Y.memo((()=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"px-3 mb-4 text-lg font-semibold text-foreground",children:e.jsx(rg,{className:"h-6 w-36"})}),e.jsx("nav",{className:"space-y-1",children:[{active:!0,badge:!1},{active:!1,badge:!1},{active:!1,badge:!1},{active:!1,badge:!1}].map(((t,n)=>e.jsxs("div",{className:`w-full flex items-center justify-between px-3 py-2 rounded-md ${t.active?"bg-primary/10":"hover:bg-muted"} transition-colors`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(rg,{className:"w-5 h-5 rounded-full"}),e.jsx(rg,{className:"h-5 w-24"})]}),t.badge&&e.jsx(rg,{className:"w-5 h-5 rounded-full bg-red-200"})]},n)))})]})));_R.displayName="SidebarSkeleton";const DR=()=>{const[t,n]=Y.useState(!1),r=re(),s=ee(),{isLayoutLoading:a,currentSection:i,isSidebarLoaded:o,isUserDataLoading:l,visitedSections:c}=CR();i&&c.has(i);const u=l||!o;return Y.useEffect((()=>{n(!1)}),[r.pathname]),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"lg:hidden mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(qm,{variant:"ghost",size:"icon",onClick:()=>s(-1),className:"mr-2",children:e.jsx(Xl,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-xl font-semibold",children:"Paramtres du profil"})]}),e.jsxs(Op,{open:t,onOpenChange:n,children:[e.jsx(Up,{asChild:!0,children:e.jsxs(qm,{variant:"outline",size:"sm",className:"flex items-center gap-2 rounded-full px-3 py-1 border-[#528eb2]/50 text-[#02284f]",children:[e.jsx("span",{className:"text-sm",children:"Navigation"}),e.jsx(Yl,{className:"h-4 w-4"})]})}),e.jsxs(Bp,{side:"right",className:"w-[280px] sm:w-[340px]",children:[e.jsxs(qp,{className:"text-lg font-bold mb-4 flex items-center",children:[e.jsx(Ac,{className:"mr-2 h-5 w-5 text-[#528eb2]"}),"Paramtres"]}),e.jsx("div",{className:"py-4 bg-transparent dark:bg-transparent",children:e.jsx(Be,{mode:"wait",children:u?e.jsx(_l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:e.jsx(_R,{})},"skeleton"):e.jsx(_l.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"bg-transparent dark:bg-transparent",children:e.jsx(AR,{onNavigate:()=>n(!1)})},"sidebar")})})]})]})]}),e.jsx("div",{className:"mt-2 pb-2 border-b border-gray-200",children:e.jsx("p",{className:"text-sm text-gray-500",children:i?`Section: ${i}`:"Chargement..."})})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("div",{className:"hidden lg:block w-[280px] flex-shrink-0 bg-transparent dark:bg-transparent",children:e.jsx(Be,{mode:"wait",children:u?e.jsx(_l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:e.jsx(_R,{})},"skeleton"):e.jsx(_l.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"bg-transparent dark:bg-transparent",children:e.jsx(AR,{})},"sidebar")})}),e.jsx("div",{className:"flex-1 bg-white shadow-sm rounded-lg p-4 sm:p-6 min-h-[calc(100vh-8rem)]",children:a&&i?e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 w-48 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-4 w-full bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-4 w-3/4 bg-gray-200 rounded mb-4"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"h-12 bg-gray-200 rounded"}),e.jsx("div",{className:"h-12 bg-gray-200 rounded"})]})]}):e.jsx(ae,{})})]})]})},IR=()=>e.jsx(TR,{children:e.jsx(DR,{})}),PR=()=>e.jsx(ae,{});var MR=(e,t,n,r,s,a,i,o)=>{let l=document.documentElement,c=["light","dark"];function u(t){(Array.isArray(e)?e:[e]).forEach((e=>{let n="class"===e,r=n&&a?s.map((e=>a[e]||e)):s;n?(l.classList.remove(...r),l.classList.add(a&&a[t]?a[t]:t)):l.setAttribute(e,t)})),function(e){o&&c.includes(e)&&(l.style.colorScheme=e)}(t)}if(r)u(r);else try{let e=localStorage.getItem(t)||n;u(i&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e)}catch(d){}},LR=Y.createContext(void 0),OR={setTheme:e=>{},themes:[]};Y.memo((({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:a,value:i,themes:o,nonce:l,scriptProps:c})=>{let u=JSON.stringify([n,t,a,e,o,i,r,s]).slice(1,-1);return Y.createElement("script",{...c,suppressHydrationWarning:!0,nonce:"undefined"==typeof window?l:"",dangerouslySetInnerHTML:{__html:`(${MR.toString()})(${u})`}})}));const UR=({...t})=>{const{theme:n="system"}=null!=(r=Y.useContext(LR))?r:OR;var r;return e.jsx(Kh,{theme:n,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})},FR={Ouvert:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300","En cours":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300","Rsolu":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300","Ferm":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300","En attente":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"},zR={Low:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",Normal:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",High:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"};function VR({tickets:t,statuses:n,services:r,toggleTicketSelection:s,selectedTickets:a}){if(!t||0===t.length)return e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8 text-center",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Aucun ticket trouv"})});const i=e=>{const t=r.find((t=>t.id===e));return t?t.name:"N/A"};return e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:e.jsx("input",{type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"ID"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Titre"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Cr par"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Service"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Statut"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Priorit"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Date de cration"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700",children:t.map((t=>{const r=(e=>{const t=n.find((t=>t.id===e));return t?t.name:"Inconnu"})(t.status_id),o=t.priority||"Normal";return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("input",{type:"checkbox",checked:a?.includes(t.id),onChange:()=>s&&s(t.id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",onClick:e=>e.stopPropagation()})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["#",t.id]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:e.jsx(te,{to:`/tickets/${t.id}`,children:t.title})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:t.first_name&&t.last_name?`${t.first_name} ${t.last_name}`:"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:t.service_id?i(t.service_id):"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${FR[r]}`,children:r})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${zR[o]}`,children:o})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(t.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx(te,{to:`/tickets/${t.id}`,className:"text-blue-600 hover:text-blue-900 mr-4",children:"Voir"})})]},t.id)}))})]})})})}function BR(){const t=re(),[n,r]=Y.useState([]),[s,a]=Y.useState([]),[i,o]=Y.useState([]),[l,c]=Y.useState([]),[u,d]=Y.useState(!0),[h,f]=Y.useState(null),[m,p]=Y.useState(""),[g,y]=Y.useState(""),[v,b]=Y.useState(""),[x,w]=Y.useState([]),[E,k]=Y.useState([]),[S,N]=Y.useState(""),[T,C]=Y.useState(!1);Y.useEffect((()=>{(async()=>{try{const i=localStorage.getItem("token");if(!i)return f("Authentication required"),void d(!1);try{const e=i.split(".");if(3===e.length){JSON.parse(atob(e[1]))}}catch(e){}try{const e=await dh.get("/tickets/raw-data");e.data.success&&e.data.rawTickets&&a(e.data.rawTickets)}catch(t){try{const e=await dh.get("/tickets");if(e.data.success&&e.data.tickets){const t=e.data.tickets.map((e=>({id:e.id,title:e.title,description:e.description,status_id:e.status?.id,status_name:e.status?.name,priority:e.priority,creator_id:e.creator?.id,first_name:e.creator?.firstName,last_name:e.creator?.lastName,service_id:e.service?.id,created_at:e.createdAt,updated_at:e.updatedAt})));a(t)}else zh.error("Impossible de rcuprer les tickets")}catch(n){zh.error("Erreur lors de la rcupration des tickets")}}try{const e=await dh.get("/tickets/status");e.data&&e.data.statuses&&w(e.data.statuses)}catch(r){zh.error(`Error fetching statuses: ${r.response?.data?.message||r.message}`)}try{const e=await dh.get("/ticket-services");k(e.data)}catch(s){zh.error(`Error fetching services: ${s.response?.data?.message||s.message}`)}d(!1)}catch(i){f("Failed to load data. Please try again later."),zh.error("Failed to load data"),d(!1)}})()}),[t.pathname]);const j=s.filter((e=>(!m||e.status_id===parseInt(m))&&((!g||e.priority===g)&&!(v&&(!e.service_id||e.service_id!==parseInt(v)))))),R=()=>{p(""),y(""),b("")};return u?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):h?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:e.jsx("p",{children:h})})}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4 md:mb-0",children:"Gestion des tickets"}),e.jsx(te,{to:"/tickets/new",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Crer un nouveau ticket"})]}),l.length>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:["Actions groupes (",l.length," tickets slectionns)"]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Mise  jour du statut"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("select",{value:S,onChange:e=>N(e.target.value),className:"flex-grow p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"",children:"Slectionner un statut"}),x.map((t=>e.jsx("option",{value:t.name,children:t.name},t.id)))]}),e.jsx("button",{onClick:async()=>{if(S&&0!==l.length){C(!0);try{const e=x.find((e=>e.name===S));if(!e)return void zh.error("Invalid status selected");const t=l.length>0?l:[199,200,201,202,203],n=await dh.post("/tickets/custom-bulk-update",{ticketIds:t,statusId:e.id});if(n.data.success){zh.success(`Successfully updated ${n.data.updatedCount} tickets`),n.data.errors&&n.data.errors.length>0&&zh.warning(`Some tickets could not be updated: ${n.data.errors.join(", ")}`),c([]),N("");const e=await dh.get("/tickets/raw-data");e.data.success&&e.data.rawTickets&&a(e.data.rawTickets)}else zh.error(n.data.message||"Failed to update tickets")}catch(e){zh.error(e.response?.data?.message||"Failed to update tickets")}finally{C(!1)}}else zh.error("Please select tickets and a status")},disabled:!S||T,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:T?"Traitement...":"Appliquer"})]})]})}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:()=>c([]),className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600",children:"Dslectionner tout"})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Filtrer les tickets"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Statut"}),e.jsxs("select",{value:m,onChange:e=>p(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"",children:"Tous les statuts"}),x.map((t=>e.jsx("option",{value:t.id,children:t.name},t.id)))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Priorit"}),e.jsxs("select",{value:g,onChange:e=>y(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"",children:"Toutes les priorits"}),e.jsx("option",{value:"Low",children:"Basse"}),e.jsx("option",{value:"Normal",children:"Normale"}),e.jsx("option",{value:"High",children:"Haute"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Service"}),e.jsxs("select",{value:v,onChange:e=>b(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"",children:"Tous les services"}),E.map((t=>e.jsx("option",{value:t.id,children:t.name},t.id)))]})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:R,className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600",children:"Effacer les filtres"})})]}),0===j.length?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8 text-center",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Aucun ticket ne correspond  vos critres"}),(m||g||v)&&e.jsx("button",{onClick:R,className:"mt-4 px-4 py-2 text-sm text-blue-700 bg-blue-100 rounded-md hover:bg-blue-200 dark:bg-blue-900 dark:text-blue-300 dark:hover:bg-blue-800",children:"Effacer les filtres"})]}):e.jsx(VR,{tickets:j,statuses:x,services:E,toggleTicketSelection:e=>{c((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))},selectedTickets:l}),e.jsxs("div",{className:"mt-8 p-4 bg-gray-100 dark:bg-gray-800 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Information de dbogage"}),e.jsxs("p",{children:["Total tickets from database: ",s.length]}),e.jsxs("p",{children:["Filtered tickets: ",j.length]})]})]})}const qR="/api/student/profile",$R="/api/student/profile/job-seeking-status",HR="/api/student/profile/toggle-internship-seeking",WR="/api/student/profile/toggle-apprenticeship-seeking",GR="/api/student/profile/portfolio-url",KR=e=>e?void 0!==e.success&&void 0!==e.data?e:"object"==typeof e&&null!==e?void 0!==e.data?{success:!0,data:e.data}:{success:!0,data:e}:{success:!1,data:e}:null;let QR=null,XR=0;const YR={clearCache:()=>{QR=null,XR=0},getMyProfile:async(e=!1)=>{try{const t=e||(window.performance&&window.performance.navigation?1===window.performance.navigation.type:window.performance&&window.performance.getEntriesByType&&"reload"===window.performance.getEntriesByType("navigation")[0]?.type),n=Date.now();if(!t&&QR&&n-XR<5e3)return QR;const r=await jh.get(qR),s=KR(r);return QR=s,XR=n,s}catch(t){throw t}},updateJobSeekingStatus:async e=>{try{const t={};if(e&&"object"==typeof e&&("boolean"==typeof e.isSeekingInternship&&(t.isSeekingInternship=e.isSeekingInternship),"boolean"==typeof e.isSeekingApprenticeship&&(t.isSeekingApprenticeship=e.isSeekingApprenticeship)),0===Object.keys(t).length)throw new Error("Invalid status data: at least one valid status property is required");const n=await jh.put($R,t),r=KR(n);return r.success&&r.data?(QR&&(QR={...QR,data:{...QR.data,...r.data}},XR=Date.now()),window.dispatchEvent(new CustomEvent("job-status-updated",{detail:{type:"both",data:r.data,isSeekingInternship:t.isSeekingInternship,isSeekingApprenticeship:t.isSeekingApprenticeship}}))):YR.clearCache(),r}catch(t){throw YR.clearCache(),t}},toggleInternshipSeeking:async e=>{try{if("boolean"==typeof e){const t=await YR.updateJobSeekingStatus({isSeekingInternship:e});return window.dispatchEvent(new CustomEvent("job-status-updated",{detail:{type:"internship",status:e}})),t}const t=await jh.put(HR),n=KR(t);let r=!1;return n.success&&n.data&&(void 0!==n.data.isSeekingInternship?r=n.data.isSeekingInternship:n.data.profile&&void 0!==n.data.profile.isSeekingInternship&&(r=n.data.profile.isSeekingInternship)),QR&&QR.data&&(void 0!==QR.data.isSeekingInternship&&(QR.data.isSeekingInternship=r),XR=Date.now()),window.dispatchEvent(new CustomEvent("job-status-updated",{detail:{type:"internship",status:r}})),n}catch(t){throw YR.clearCache(),t}},toggleApprenticeshipSeeking:async e=>{try{if("boolean"==typeof e){const t=await YR.updateJobSeekingStatus({isSeekingApprenticeship:e});return window.dispatchEvent(new CustomEvent("job-status-updated",{detail:{type:"apprenticeship",status:e}})),t}const t=await jh.put(WR),n=KR(t);let r=!1;return n.success&&n.data&&(void 0!==n.data.isSeekingApprenticeship?r=n.data.isSeekingApprenticeship:n.data.profile&&void 0!==n.data.profile.isSeekingApprenticeship&&(r=n.data.profile.isSeekingApprenticeship)),QR&&QR.data&&(void 0!==QR.data.isSeekingApprenticeship&&(QR.data.isSeekingApprenticeship=r),XR=Date.now()),window.dispatchEvent(new CustomEvent("job-status-updated",{detail:{type:"apprenticeship",status:r}})),n}catch(t){throw YR.clearCache(),t}},updatePortfolioUrl:async e=>{try{if(e&&!e.startsWith("https://"))throw new Error("L'URL du portfolio doit commencer par https://");const n=await jh.put(GR,{portfolioUrl:e}),r=KR(n);YR.clearCache();try{const t=localStorage.getItem("user");if(t){const n=JSON.parse(t);n.studentProfile&&(n.studentProfile.portfolioUrl=e,localStorage.setItem("user",JSON.stringify(n)))}}catch(t){}return eA(e),r}catch(n){throw YR.clearCache(),n}}},JR=(e,t=null)=>{if(t)return t;if(!e||""===e.trim())return null;if(e.startsWith("http"))return e;const n="https://bigproject-development.konstantine.fr/api".replace(/\/api$/,"");if(!e.includes("/")&&!e.includes("\\")){return[`${n}/uploads/documents/${e}`,`${n}/uploads/profile-pictures/${e}`,`${n}/uploads/${e}`][0]}if(e.includes("/var/www/")||e.includes("C:\\")||e.includes("/public/uploads/")){let t;if(e.includes("/public/uploads/"))t=e.split("/public/")[1];else if(e.includes("/var/www/")){t=e.split("/var/www/")[1].split("/").slice(1).join("/")}else{const n=e.split("\\"),r=n.findIndex((e=>"uploads"===e));t=-1!==r?"uploads/"+n.slice(r+1).join("/"):"uploads/"+n[n.length-1]}return`${n}/${t}`}const r=e.startsWith("/")?e:`/${e}`;return r.includes("uploads")?`${n}${r}`:`${n}/uploads${r}`},ZR=e=>{if(!e)return"";const t=e.firstName||"",n=e.lastName||"";return`${t.charAt(0)}${n.charAt(0)}`},eA=e=>{const t=new CustomEvent("portfolio-updated",{detail:{portfolioUrl:e}});window.dispatchEvent(t);const n=new CustomEvent("profile-updated",{detail:{type:"portfolio",portfolioUrl:e}});window.dispatchEvent(n);try{const t=localStorage.getItem("user");if(t){const n=JSON.parse(t);if(n&&"object"==typeof n){if(n.studentProfile)n.studentProfile.portfolioUrl=e;else if(!n.studentProfile&&n.roles){Array.isArray(n.roles)&&n.roles.some((e=>"string"==typeof e&&e.includes("STUDENT")||"object"==typeof e&&e.name&&e.name.includes("STUDENT")))&&(n.studentProfile={portfolioUrl:e})}localStorage.setItem("user",JSON.stringify(n))}}const n=sessionStorage.getItem("user");if(n){const t=JSON.parse(n);if(t&&"object"==typeof t){if(t.studentProfile)t.studentProfile.portfolioUrl=e;else if(!t.studentProfile&&t.roles){Array.isArray(t.roles)&&t.roles.some((e=>"string"==typeof e&&e.includes("STUDENT")||"object"==typeof e&&e.name&&e.name.includes("STUDENT")))&&(t.studentProfile={portfolioUrl:e})}sessionStorage.setItem("user",JSON.stringify(t))}}}catch(r){}YR.clearCache()},tA=({userData:t,isPublicProfile:n=!1,profilePictureUrl:r})=>{const[s,a]=Y.useState(!1),[i,o]=Y.useState(!1),[l,c]=Y.useState(null),[u,d]=Y.useState(null),h={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}};Y.useEffect((()=>{(async()=>{if(t?.user?.specialization&&!t.user.specialization.domain&&t.user.specialization.id)try{const e=t.user.specialization.id,n=await jh.get(`/api/specialization/${e}`);n.data&&n.data.success&&n.data.data&&c(n.data.data.domain)}catch(e){console.error("Error fetching domain data:",e)}})()}),[t]);const f=(e,n="")=>t&&void 0!==t[e]?t[e]:t&&t.user&&void 0!==t.user[e]?t.user[e]:n,m=()=>`${f("firstName")} ${f("lastName")}`.trim()||"Utilisateur";(()=>{const e=f("roles");if(e&&Array.isArray(e)&&e.length>0){const t=e[0];if("object"==typeof t&&null!==t&&t.name&&t.displayName&&t.color)return t;if("object"==typeof t&&null!==t&&t.name)return t;if("string"==typeof t)return{name:t}}if(t?.user?.roles){const e=t.user.roles;if(Array.isArray(e)&&e.length>0){const t=e[0];if("object"==typeof t&&null!==t&&t.name&&t.displayName&&t.color)return t;if("object"==typeof t&&null!==t&&t.name)return t;if("string"==typeof t)return{name:t}}}})();const p=r||t.user?.profilePictureUrl||JR(t.user?.profilePicturePath);ZR(t.user),Y.useEffect((()=>{a(!1),o(!1)}),[p]);return t?.documents&&Array.isArray(t.documents)&&t.documents.some((e=>"CV"===e?.documentType?.code||"CV"===e?.type)),t?.diplomas&&Array.isArray(t.diplomas)&&t.diplomas.length,e.jsx(_l.div,{className:"w-full bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},initial:"hidden",animate:"visible",children:e.jsxs("div",{className:"relative p-4 sm:p-6",children:[e.jsx("div",{className:"absolute left-0 top-0 w-1/3 h-full bg-blue-500/10 blur-[40px] pointer-events-none"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:gap-6 items-center sm:items-start relative",children:[e.jsx(_l.div,{variants:h,className:"relative z-10",children:e.jsx("div",{className:"rounded-full p-0.5 bg-gradient-to-br from-blue-400/30 to-indigo-600/30",children:e.jsxs(Ip,{className:"h-20 w-20 sm:h-24 sm:w-24 ring-2 ring-white/10",children:[!s&&p&&e.jsx(Pp,{src:p,alt:m(),onError:()=>{a(!0)},onLoad:()=>{o(!0)},className:"transition-opacity duration-300 "+(i?"opacity-100":"opacity-0")}),e.jsx(Mp,{className:"bg-gradient-to-r from-[#02284f] to-[#03386b] text-white",children:e.jsx(Uc,{className:"w-10 h-10 sm:w-12 sm:h-12"})})]})})}),e.jsxs("div",{className:"flex-1 min-w-0 text-center sm:text-left",children:[e.jsxs(_l.div,{variants:h,children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary to-indigo-600",children:m()}),(f("specialization")||t&&t.user&&t.user.specialization)&&e.jsx("div",{className:"flex items-center justify-center sm:justify-start gap-2 mt-1",children:e.jsx("span",{className:"text-sm text-muted-foreground",children:(()=>{const n=f("specialization")||t&&t.user&&t.user.specialization||{},r=n.domain?.name||l?.name||"",s=n.name||"";return e.jsxs(e.Fragment,{children:[r,r&&s&&e.jsx("span",{className:"mx-1.5 opacity-40",children:""}),s]})})()})})]}),e.jsx(_l.div,{variants:h,className:"flex flex-wrap justify-center sm:justify-start gap-1.5 mt-2",children:e.jsxs(Be,{children:[(()=>{let n=[];return t?.roles&&Array.isArray(t.roles)?n=t.roles:t?.user?.roles&&Array.isArray(t.user.roles)?n=t.user.roles:t?.data?.roles&&Array.isArray(t.data.roles)?n=t.data.roles:Array.isArray(t)&&(n=t),0===n.length&&t?.user?.role&&(n=[t.user.role]),Array.isArray(n)||(n=[]),n.length>0?n.map(((t,n)=>{const r="object"==typeof t&&null!==t?t.name||t||"USER":String(t);return e.jsx(Sj,{role:r,animated:!0,index:n,hovered:u===r,onHoverStart:()=>d(r),onHoverEnd:()=>d(null)},`${r}-${n}`)})):e.jsx(Sj,{role:"USER",animated:!0},"default-user")})(),t.studentProfile?.isSeekingInternship&&e.jsx(_l.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},children:e.jsx(DC,{className:"bg-gradient-to-r from-amber-500/90 to-amber-700/90 text-white px-2.5 py-0.5 text-xs rounded-full",children:"Recherche Stage"})},"seeking-internship"),t.studentProfile?.isSeekingApprenticeship&&e.jsx(_l.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},children:e.jsx(DC,{className:"bg-gradient-to-r from-green-500/90 to-green-700/90 text-white px-2.5 py-0.5 text-xs rounded-full",children:"Recherche Alternance"})},"seeking-apprenticeship")]})})]}),e.jsxs("div",{className:"flex gap-2 mt-2 sm:mt-0",children:[t.studentProfile?.portfolioUrl&&e.jsx(_l.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.3,delay:.2},children:e.jsxs("div",{onClick:()=>window.open(t.studentProfile.portfolioUrl,"_blank"),className:"group flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-gradient-to-r from-indigo-500/90 via-violet-500/90 to-purple-500/90 hover:from-indigo-600/90 hover:via-violet-600/90 hover:to-purple-600/90 text-white cursor-pointer transition-all duration-300 hover:shadow-lg hover:shadow-violet-500/20",children:[e.jsx("span",{className:"text-xs font-medium",children:"Voir mon portfolio"}),e.jsx(Yl,{className:"h-3.5 w-3.5 transform transition-transform duration-300 group-hover:translate-x-0.5"})]})}),!n&&e.jsx(_l.div,{variants:h,children:e.jsx(qm,{asChild:!0,variant:"outline",size:"sm",className:"border-primary/20 hover:border-primary/50 hover:bg-primary/5 transition-all duration-300 text-xs h-auto py-1.5",children:e.jsxs(te,{to:"/settings/profile",className:"flex items-center gap-1.5",children:["Modifier",e.jsx(Yl,{className:"h-3.5 w-3.5"})]})})})]})]})]})})};var nA="Tabs",[rA,sA]=E(nA,[H]),aA=H(),[iA,oA]=rA(nA),lA=Y.forwardRef(((t,n)=>{const{__scopeTabs:r,value:s,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,d=K(l),[h,f]=U({prop:s,onChange:a,defaultProp:i??"",caller:nA});return e.jsx(iA,{scope:r,baseId:z(),value:h,onValueChange:f,orientation:o,dir:d,activationMode:c,children:e.jsx(k.div,{dir:d,"data-orientation":o,...u,ref:n})})}));lA.displayName=nA;var cA="TabsList",uA=Y.forwardRef(((t,n)=>{const{__scopeTabs:r,loop:s=!0,...a}=t,i=oA(cA,r),o=aA(r);return e.jsx(W,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:s,children:e.jsx(k.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:n})})}));uA.displayName=cA;var dA="TabsTrigger",hA=Y.forwardRef(((t,n)=>{const{__scopeTabs:r,value:s,disabled:a=!1,...i}=t,o=oA(dA,r),l=aA(r),c=pA(o.baseId,s),u=gA(o.baseId,s),d=s===o.value;return e.jsx(G,{asChild:!0,...l,focusable:!a,active:d,children:e.jsx(k.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:n,onMouseDown:I(t.onMouseDown,(e=>{a||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(s)})),onKeyDown:I(t.onKeyDown,(e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(s)})),onFocus:I(t.onFocus,(()=>{const e="manual"!==o.activationMode;d||a||!e||o.onValueChange(s)}))})})}));hA.displayName=dA;var fA="TabsContent",mA=Y.forwardRef(((t,n)=>{const{__scopeTabs:r,value:s,forceMount:a,children:i,...o}=t,l=oA(fA,r),c=pA(l.baseId,s),u=gA(l.baseId,s),d=s===l.value,h=Y.useRef(d);return Y.useEffect((()=>{const e=requestAnimationFrame((()=>h.current=!1));return()=>cancelAnimationFrame(e)}),[]),e.jsx(T,{present:a||d,children:({present:r})=>e.jsx(k.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!r,id:u,tabIndex:0,...o,ref:n,style:{...t.style,animationDuration:h.current?"0s":void 0},children:r&&i})})}));function pA(e,t){return`${e}-trigger-${t}`}function gA(e,t){return`${e}-content-${t}`}mA.displayName=fA;var yA=uA,vA=hA,bA=mA;const xA=lA,wA=J.forwardRef((({className:t,...n},r)=>e.jsx(yA,{ref:r,className:Vm("inline-flex h-10 items-center justify-center rounded-md bg-transparent p-1 text-muted-foreground",t),...n})));wA.displayName=yA.displayName;const EA=J.forwardRef((({className:t,...n},r)=>e.jsx(vA,{ref:r,className:Vm("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-primary data-[state=active]:text-white data-[state=active]:shadow-sm",t),...n})));EA.displayName=vA.displayName;const kA=J.forwardRef((({className:t,...n},r)=>e.jsx(bA,{ref:r,className:Vm("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...n})));kA.displayName=bA.displayName;const SA=Y.forwardRef((({className:t,...n},r)=>e.jsx("div",{ref:r,className:Vm("rounded-lg border bg-card text-card-foreground shadow-sm dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100",t),...n})));SA.displayName="Card";const NA=Y.forwardRef((({className:t,...n},r)=>e.jsx("div",{ref:r,className:Vm("flex flex-col space-y-1.5 p-6",t),...n})));NA.displayName="CardHeader";const TA=Y.forwardRef((({className:t,...n},r)=>e.jsx("h3",{ref:r,className:Vm("text-2xl font-semibold leading-none tracking-tight dark:text-white dark:font-medium",t),...n})));TA.displayName="CardTitle";const CA=Y.forwardRef((({className:t,...n},r)=>e.jsx("p",{ref:r,className:Vm("text-sm text-muted-foreground dark:text-gray-300",t),...n})));CA.displayName="CardDescription";const jA=Y.forwardRef((({className:t,...n},r)=>e.jsx("div",{ref:r,className:Vm("p-6 pt-0",t),...n})));jA.displayName="CardContent";const RA=Y.forwardRef((({className:t,...n},r)=>e.jsx("div",{ref:r,className:Vm("flex items-center p-6 pt-0",t),...n})));RA.displayName="CardFooter";const AA={listeners:new Set,subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)},notify(){this.listeners.forEach((e=>e()))}},_A={documents:null,documentsByType:{},lastFetch:null,cacheDuration:3e5,isValid(){return this.lastFetch&&Date.now()-this.lastFetch<this.cacheDuration},clear(){this.documents=null,this.documentsByType={},this.lastFetch=null,jh.invalidateDocumentCache()},updateOptimistically(e,t){this.documents||(this.documents=[]),this.documents.push(t);const n=e.toUpperCase();this.documentsByType[n]||(this.documentsByType[n]=[]),this.documentsByType[n].push(t)},removeDocument(e){this.documents&&(this.documents=this.documents.filter((t=>t.id!==e))),Object.keys(this.documentsByType).forEach((t=>{this.documentsByType[t]&&(this.documentsByType[t]=this.documentsByType[t].filter((t=>t.id!==e)))}))}};const DA=new class{async getDocuments(e=!1){if(!e&&_A.isValid()&&_A.documents)return _A.documents;try{const e=(await jh.get("/documents")).data||[];return _A.documents=e,_A.lastFetch=Date.now(),e}catch(t){throw t}}async uploadCV(e){try{const t=e.get("file")||e.get("cv"),n={id:`temp-${Date.now()}`,type:"CV",name:t?t.name:"CV en cours d'upload",mime_type:t?t.type:"application/pdf",created_at:(new Date).toISOString(),is_temp:!0};_A.updateOptimistically("CV",n),AA.notify(),e.append("type","CV");const r={headers:{Authorization:`Bearer ${of.getToken()}`}},s=await jh.post("/documents/upload/cv",e,r);return _A.clear(),AA.notify(),s}catch(t){throw _A.clear(),AA.notify(),t}}async uploadCVForStudent(e,t){try{const n=e.get("file")||e.get("cv"),r={id:`temp-${Date.now()}`,type:"CV",name:n?n.name:"CV en cours d'upload",mime_type:n?n.type:"application/pdf",created_at:(new Date).toISOString(),student_id:t,is_temp:!0};_A.updateOptimistically("CV",r),AA.notify();const s={headers:{Authorization:`Bearer ${of.getToken()}`}},a=await jh.post(`/documents/upload/cv/${t}`,e,s);return _A.clear(),AA.notify(),a}catch(n){throw _A.clear(),AA.notify(),n}}async downloadDocument(e){try{const t={headers:{Authorization:`Bearer ${of.getToken()}`},responseType:"blob"},n=await jh.get(`/documents/${e}/download`,t);if(!(n.data instanceof Blob))throw new Error("Invalid response format");return n.data}catch(t){if(t.response){const e=t.response.data instanceof Blob?"Erreur lors du tlchargement":t.response.data?.message||"Erreur lors du tlchargement";throw new Error(e)}throw t}}async deleteDocument(e){try{_A.removeDocument(e),AA.notify();const t=await jh.delete(`/documents/${e}`);return _A.clear(),AA.notify(),t}catch(t){throw _A.clear(),AA.notify(),t}}async getDocumentByType(e,t=!1){const n=e.toUpperCase();if(!t&&_A.isValid()&&_A.documentsByType[n])return _A.documentsByType[n];try{const e=(await jh.get(`/documents/type/${n}`)).data||[];return _A.documentsByType[n]=e,_A.lastFetch=Date.now(),e}catch(r){throw r}}clearCache(){_A.clear(),AA.notify()}},IA=({userData:t,isPublicProfile:n=!1,documents:r=[]})=>{const[s,a]=Y.useState(!1),i=t?.user||t||{},o=i?.roles?.some((e=>"object"==typeof e?"STUDENT"===e.name||"ROLE_STUDENT"===e.name:"STUDENT"===e||"ROLE_STUDENT"===e)),l=i?.roles?.some((e=>"object"==typeof e?"GUEST"===e.name||"ROLE_GUEST"===e.name:"GUEST"===e||"ROLE_GUEST"===e)),c=o||l,u=n?i?.id:null,{data:d,isLoading:h}=((e=null)=>fe({queryKey:["userCV",e],queryFn:async()=>{try{return e?(await jh.get("/documents/type/CV")).data||{success:!0,data:[]}:{success:!0,data:await DA.getDocumentByType("CV")}}catch(t){return console.warn("Error fetching CV document:",t.message),{success:!1,error:t.message,data:[]}}},enabled:!0,staleTime:3e5,retry:!1}))(u),f=r?.find((e=>"CV"===e?.documentType?.code||"CV"===e?.type)),m=Array.isArray(d?.data)?d?.data[0]:d?.data,p=i?.cvFilePath,g=f||d?.success&&d?.data&&(Array.isArray(d.data)?d.data.length>0:!!d.data)||!!p,y=f||m,v=i?.addresses&&i.addresses.length>0?i.addresses[0]:null,b=v?.city?.name||("string"==typeof v?.city?v.city:null)||i?.city?.name||("string"==typeof i?.city?i.city:"Non renseigne"),x=i?.linkedinUrl,w=i?.studentProfile?.portfolioUrl,E=n?i?.cvDocument:null,k=async()=>{if(n&&E&&E.downloadUrl){a(!0);try{const e=await jh.get(`/documents/${E.id}/download`,{responseType:"blob",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!e.data)throw new Error("Failed to download document");const t=e.data,n=(E.name||"cv.pdf").replace(/[^a-zA-Z0-9.-]/g,"_"),r=window.URL.createObjectURL(t),s=document.createElement("a");s.href=r,s.download=n,document.body.appendChild(s),s.click(),setTimeout((()=>{window.URL.revokeObjectURL(r),document.body.removeChild(s)}),100),zh.success("CV tlcharg avec succs")}catch(e){zh.error(e.message||"Erreur lors du tlchargement du CV")}finally{a(!1)}}else if(y&&y.id){a(!0);try{const e=await jh.get(`/documents/${y.id}/download`,{responseType:"blob",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!e.data)throw new Error("Failed to download document");const t=e.data,n=(y.name||"cv.pdf").replace(/[^a-zA-Z0-9.-]/g,"_"),r=window.URL.createObjectURL(t),s=document.createElement("a");s.href=r,s.download=n,document.body.appendChild(s),s.click(),setTimeout((()=>{window.URL.revokeObjectURL(r),document.body.removeChild(s)}),100),zh.success("CV tlcharg avec succs")}catch(e){console.error("Erreur lors du tlchargement du CV:",e),zh.error(e.message||"Erreur lors du tlchargement du CV")}finally{a(!1)}}else p?window.open(p,"_blank"):zh.error("CV non disponible")},S=({icon:t,title:n,value:r,link:s,isDownload:a=!1})=>e.jsx("div",{className:"group "+(s||a?"cursor-pointer":""),onClick:a?k:void 0,children:e.jsxs("div",{className:"relative flex items-center gap-4 p-4 rounded-xl bg-background/50 backdrop-blur-sm border border-border/5 shadow-sm overflow-hidden "+(s||a?"hover:shadow-lg hover:border-primary transition-all duration-300 pr-12":""),children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center "+(s||a?"group-hover:bg-primary/20 transition-colors duration-300":""),children:e.jsx(t,{className:"h-5 w-5 text-primary"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:n}),s&&!a?e.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"font-medium text-foreground group-hover:text-primary flex items-center gap-1 transition-colors duration-300",children:r}):e.jsx("p",{className:"font-medium truncate",children:r||"Non renseign"})]}),(s||a)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute right-0 inset-y-0 w-12 bg-gradient-to-l from-primary/5 to-transparent group-hover:from-primary/10 transition-colors duration-300"}),e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 transform transition-transform duration-300 group-hover:translate-x-1",children:e.jsx(Yl,{className:"h-5 w-5 text-primary opacity-50 group-hover:opacity-100"})})]})]})});return e.jsx("div",{className:"space-y-8",children:e.jsxs(SA,{className:"overflow-hidden border-none shadow-md bg-background/50 backdrop-blur-sm",children:[e.jsx(NA,{className:"border-b border-border/5 bg-background/50",children:e.jsxs(TA,{className:"text-xl font-semibold text-foreground/90 flex items-center gap-2",children:[e.jsx(Uc,{className:"h-5 w-5 text-primary"}),"Informations personnelles"]})}),e.jsx(jA,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(S,{icon:Uc,title:"Nom complet",value:`${i.firstName||""} ${i.lastName||""}`}),e.jsx(S,{icon:bc,title:"Email",value:i.email}),e.jsx(S,{icon:xc,title:"Ville",value:b}),x&&e.jsx(S,{icon:pc,title:"LinkedIn",value:"Voir le profil LinkedIn",link:x}),c&&w&&e.jsx(S,{icon:ac,title:"Portfolio",value:"Voir le portfolio",link:w}),n&&E&&e.jsx(S,{icon:oc,title:"CV",value:E.name||"Tlcharger le CV",isDownload:!0}),!n&&c&&g&&e.jsx(S,{icon:oc,title:"CV",value:"Tlcharger mon CV",link:p,isDownload:!0})]})})]})})},PA=({userData:t,isPublicProfile:n=!1,documents:r=[]})=>{const s={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100,duration:.5}}},a=(()=>{const e=t?.user||t||{},n=e?.roles||[];if(0===n.length)return"USER";const r=n[0];return"object"==typeof r&&null!==r&&r.name?r.name:"string"==typeof r?r:"USER"})(),i=(Array.isArray(t?.diplomas)&&t.diplomas.length>0?t.diplomas:t?.user?.diplomas&&Array.isArray(t.user.diplomas)&&t.user.diplomas.length>0?t.user.diplomas:t?.data?.diplomas&&Array.isArray(t.data.diplomas)&&t.data.diplomas.length>0?t.data.diplomas:[]).map((e=>e.diploma&&"object"==typeof e.diploma?{id:e.id,name:e.diploma.name,institution:e.diploma.institution,obtainedAt:e.obtainedDate}:e)),o=i.length>0;return e.jsxs(e.Fragment,{children:[o&&e.jsx(_l.div,{variants:s,initial:"hidden",animate:"visible",children:e.jsxs(SA,{className:"overflow-hidden border-none shadow-md bg-white dark:bg-slate-800",children:[e.jsx(NA,{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 pb-4",children:e.jsxs(TA,{className:"text-xl flex items-center gap-2",children:[e.jsx(dc,{className:"h-5 w-5 text-primary"}),"Diplmes"]})}),e.jsx(jA,{className:"p-6",children:e.jsx("div",{className:"space-y-8",children:i.map(((t,n)=>{return e.jsxs("div",{className:"relative pl-6 pb-8 border-l-2 border-primary/20 last:border-0 last:pb-0",children:[e.jsx("div",{className:"absolute left-[-8px] top-0 h-4 w-4 rounded-full bg-primary shadow-md"}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-4 rounded-lg transition-all duration-300 hover:bg-slate-100 dark:hover:bg-slate-700/50 hover:shadow-md",children:[e.jsx("h3",{className:"font-bold text-primary",children:t.name||t.title||"Diplme"}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground mb-3 bg-primary/5 px-2 py-1 rounded-full w-fit mt-2",children:[e.jsx(sc,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:t.obtainedAt||t.obtainedDate||t.obtained_at?(r=t.obtainedAt||t.obtainedDate||t.obtained_at,r?new Date(r).toLocaleDateString("fr-FR",{month:"short",year:"numeric"}):"Aujourd'hui"):"En cours"})]}),(t.institution||t.school)&&e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground mt-2",children:[e.jsx(ql,{className:"h-4 w-4 mr-1 text-muted-foreground/70"}),e.jsx("span",{children:t.institution||t.school})]}),(t.location||t.city)&&e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground mt-1",children:[e.jsx(xc,{className:"h-4 w-4 mr-1 text-muted-foreground/70"}),e.jsx("span",{children:t.location||t.city})]})]})]},n);var r}))})})]})}),!o&&e.jsx(_l.div,{variants:s,initial:"hidden",animate:"visible",children:e.jsxs(SA,{className:"overflow-hidden border-none shadow-md bg-white dark:bg-slate-800",children:[e.jsx(NA,{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 pb-4",children:e.jsxs(TA,{className:"text-xl flex items-center gap-2",children:[e.jsx(dc,{className:"h-5 w-5 text-primary"}),"Diplmes"]})}),e.jsx(jA,{className:"p-6",children:e.jsx("div",{className:"text-center p-6 text-muted-foreground",children:e.jsx("p",{children:"Aucun diplme n'a t ajout pour le moment."})})})]})}),"TEACHER"===a&&e.jsx(_l.div,{variants:s,initial:"hidden",animate:"visible",className:"mt-8",children:e.jsxs(SA,{className:"overflow-hidden border-none shadow-md bg-white dark:bg-slate-800",children:[e.jsx(NA,{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 pb-4",children:e.jsxs(TA,{className:"text-xl flex items-center gap-2",children:[e.jsx(Bl,{className:"h-5 w-5 text-primary"}),"Mes cours et ateliers"]})}),e.jsx(jA,{className:"p-6",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"relative pl-6 pb-8 border-l-2 border-primary/20 last:border-0 last:pb-0",children:[e.jsx("div",{className:"absolute left-[-8px] top-0 h-4 w-4 rounded-full bg-primary shadow-md"}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-4 rounded-lg transition-all duration-300 hover:bg-slate-100 dark:hover:bg-slate-700/50 hover:shadow-md",children:[e.jsx("h3",{className:"font-bold text-primary",children:"Dveloppement Web Full-Stack"}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground mb-3 bg-primary/5 px-2 py-1 rounded-full w-fit mt-2",children:[e.jsx(sc,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:"Sept. 2022 - Prsent"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Formation complte aux technologies web modernes incluant HTML/CSS, JavaScript, React, Node.js et MongoDB."})]})]}),e.jsxs("div",{className:"relative pl-6 pb-8 border-l-2 border-primary/20 last:border-0 last:pb-0",children:[e.jsx("div",{className:"absolute left-[-8px] top-0 h-4 w-4 rounded-full bg-primary shadow-md"}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-4 rounded-lg transition-all duration-300 hover:bg-slate-100 dark:hover:bg-slate-700/50 hover:shadow-md",children:[e.jsx("h3",{className:"font-bold text-primary",children:"DevOps & CI/CD"}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground mb-3 bg-primary/5 px-2 py-1 rounded-full w-fit mt-2",children:[e.jsx(sc,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:"Jan. 2023 - Prsent"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Atelier pratique sur l'intgration et le dploiement continus, avec Docker, Jenkins et GitHub Actions."})]})]})]})})]})})]})},MA=({userData:t,isPublicProfile:n=!1,documents:r=[]})=>{const s={inactive:{opacity:.7,scale:.95},active:{opacity:1,scale:1,transition:{type:"spring",stiffness:300,damping:20}}},a=(()=>{if(t?.user?.roles){if(Array.isArray(t.user.roles)&&t.user.roles.length>0){const e=t.user.roles[0];if("object"==typeof e&&null!==e&&e.name)return e.name;if("string"==typeof e)return e}if("string"==typeof t.user.roles)return t.user.roles}return"USER"})(),i=t?.user?.diplomas&&Array.isArray(t.user.diplomas)&&t.user.diplomas.length>0,o="TEACHER"===a||i;return e.jsx(_l.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100,delay:.3}}},initial:"hidden",animate:"visible",className:"w-full",children:e.jsxs(xA,{defaultValue:"about",className:"w-full",children:[e.jsx("div",{className:"bg-white/5 backdrop-blur-sm border-b border-white/10 rounded-t-xl p-1.5 mb-0",children:e.jsxs(wA,{className:`grid w-full ${o?"grid-cols-2":"grid-cols-1"} bg-transparent h-auto p-1 gap-4`,children:[e.jsx(EA,{value:"about",className:"relative overflow-hidden \r\n                data-[state=active]:bg-transparent !bg-transparent\r\n                data-[state=active]:text-primary\r\n                py-2.5 transition-all duration-200 \r\n                text-slate-400\r\n                font-medium\r\n                rounded-md\r\n                before:absolute before:inset-x-0 before:h-[2px] before:bg-primary\r\n                before:bottom-0 before:scale-x-0 hover:before:scale-x-100\r\n                before:transition-transform before:duration-300\r\n                before:origin-left",children:e.jsx(_l.div,{variants:s,initial:"inactive",animate:"active",className:"flex items-center justify-center gap-2",children:e.jsx("span",{className:"relative z-10 font-medium",children:" propos"})})}),o&&e.jsx(EA,{value:"experience",className:"relative overflow-hidden \r\n                  data-[state=active]:bg-transparent !bg-transparent\r\n                  data-[state=active]:text-primary\r\n                  py-2.5 transition-all duration-200 \r\n                  text-slate-400\r\n                  font-medium\r\n                  rounded-md\r\n                  before:absolute before:inset-x-0 before:h-[2px] before:bg-primary\r\n                  before:bottom-0 before:scale-x-0 hover:before:scale-x-100\r\n                  before:transition-transform before:duration-300\r\n                  before:origin-left",children:e.jsx(_l.div,{variants:s,initial:"inactive",animate:"active",className:"flex items-center justify-center gap-2",children:e.jsx("span",{className:"relative z-10 font-medium",children:"TEACHER"===a?"Exprience et Cours":"Diplmes"})})})]})}),e.jsxs(_l.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"relative bg-white/5 rounded-b-xl p-6",children:[e.jsx(kA,{value:"about",className:"mt-0 space-y-6 focus-visible:outline-none focus-visible:ring-0",children:e.jsx(IA,{userData:t,isPublicProfile:n,documents:r})}),o&&e.jsx(kA,{value:"experience",className:"mt-0 space-y-6 focus-visible:outline-none focus-visible:ring-0",children:e.jsx(PA,{userData:t,isPublicProfile:n,documents:r})})]})]})})},LA=()=>{const{userId:t}=ie(),[n,r]=Y.useState(null),[s,a]=Y.useState(null),[i,o]=Y.useState(!0),[l,c]=Y.useState(null),[u,d]=Y.useState(!1),h=cp();Y.useEffect((()=>{const e=async()=>{try{if(await(async()=>{try{const e=await jh.getUserProfile();return e?.id?.toString()===t?.toString()&&(d(!0),window.location.href="/profile",!0)}catch(e){return!1}})())return;jh.clearPublicProfileCache(t);const e=await jh.getPublicProfile(t);if(e?.data?.user)if(r(e.data.user),e.data.user.profilePictureUrl)a(e.data.user.profilePictureUrl);else if(e.data.user.profilePicturePath){const{getProfilePictureUrl:t}=require("@/lib/utils/profileUtils"),n=t(e.data.user.profilePicturePath);a(n)}else a(null);else c("Donnes du profil non disponibles")}catch(e){c(e.message||"Erreur lors de la rcupration du profil")}finally{o(!1)}};return t&&e(),()=>{jh.clearPublicProfileCache(t)}}),[t]);if(i)return e.jsx("div",{className:"w-full max-w-7xl mx-auto px-4 py-6 space-y-8","data-testid":"public-profile-loading",children:e.jsxs("div",{className:"w-full bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 rounded-lg shadow-md overflow-hidden",children:[e.jsx(rg,{className:"h-64 w-full"}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx(rg,{className:"h-8 w-1/3"}),e.jsx(rg,{className:"h-4 w-2/3"}),e.jsx(rg,{className:"h-4 w-1/2"})]})]})});if(l)return e.jsx("div",{className:"w-full max-w-7xl mx-auto px-4 py-6","data-testid":"public-profile-error",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[e.jsx("strong",{className:"font-bold",children:"Erreur :"}),e.jsxs("span",{className:"block sm:inline",children:[" ",l]})]})});if(!n)return e.jsx("div",{className:"w-full max-w-7xl mx-auto px-4 py-6","data-testid":"public-profile-no-data",children:e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-700 px-4 py-3 rounded relative",role:"alert",children:[e.jsx("strong",{className:"font-bold",children:"Attention :"}),e.jsx("span",{className:"block sm:inline",children:" Profil non trouv."})]})});const f={user:{...n,profilePictureUrl:s,roles:Array.isArray(n.roles)?n.roles.map((e=>({name:e,displayName:h.translateRoleName(e),color:h.getRoleBadgeColor(e)}))):[{name:ap.GUEST,displayName:h.translateRoleName(ap.GUEST),color:h.getRoleBadgeColor(ap.GUEST)}],specialization:n.specialization||{},linkedinUrl:n.linkedinUrl||"",birthDate:n.birthDate,createdAt:n.createdAt,updatedAt:n.updatedAt,addresses:n.addresses||[]},studentProfile:n.studentProfile||{isSeekingInternship:!1,isSeekingApprenticeship:!1,portfolioUrl:null,currentInternshipCompany:null,internshipStartDate:null,internshipEndDate:null,situationType:null},addresses:n.addresses||[],stats:{profile:{completionPercentage:0}}};return e.jsxs(_l.div,{className:"w-full max-w-7xl mx-auto px-4 py-6 space-y-8",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{when:"beforeChildren",staggerChildren:.2,duration:.3}}},initial:"hidden",animate:"visible","data-testid":"public-profile-view",children:[e.jsx(tA,{userData:f,isPublicProfile:!0,profilePictureUrl:s,onProfileUpdate:()=>{}}),e.jsx(MA,{userData:f,isPublicProfile:!0,documents:[],onProfileUpdate:()=>{}})]})},OA=[{language:"fr",name:"Franais"},{language:"en",name:"English"},{language:"es",name:"Espaol"},{language:"de",name:"Deutsch"},{language:"it",name:"Italiano"}],UA=()=>{const[t,n]=Y.useState(""),[r,s]=Y.useState("en"),[a,i]=Y.useState(""),[o,l]=Y.useState(""),[c,u]=Y.useState(!1),[d,h]=Y.useState(OA),[f,m]=Y.useState(!1),[p,g]=Y.useState(null);Y.useEffect((()=>{(async()=>{try{m(!0),g(null);const e=await sg.getAvailableLanguages("fr");e&&e.length>0&&(h(e),zh.success("Langues charges avec succs"))}catch(e){console.error("Error loading languages:",e),g(`Erreur de configuration: ${e.message}`),zh.error("Erreur de chargement des langues: "+(e.message||"Une erreur est survenue"))}finally{m(!1)}})()}),[true]);return e.jsxs("div",{className:"max-w-2xl mx-auto p-6 space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Test de Traduction Google Cloud"}),p&&e.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-red-700 mb-2",children:" Erreur"}),e.jsx("p",{className:"text-red-700",children:p})]}),!1,e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Texte  traduire:"}),e.jsx("textarea",{value:t,onChange:e=>n(e.target.value),className:"w-full p-2 border rounded-md",rows:"4",placeholder:"Entrez votre texte ici..."})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:async()=>{if(t)try{u(!0),g(null);const e=await sg.detectLanguage(t);i(e);const n=d.find((t=>t.language===e))?.name||e;zh.success(`Langue dtecte: ${n}`)}catch(e){console.error("Detection error:",e),g(`Erreur de dtection: ${e.message}`),zh.error("Erreur de dtection: "+(e.message||"Une erreur est survenue"))}finally{u(!1)}else zh.error("Veuillez entrer un texte pour dtecter la langue")},disabled:c||!t||!1,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 disabled:bg-gray-400",children:"Dtecter la langue"}),a&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium",children:"Langue dtecte: "}),e.jsx("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 rounded",children:a})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Langue cible:"}),e.jsx("select",{value:r,onChange:e=>s(e.target.value),className:"w-full p-2 border rounded-md",disabled:f,children:f?e.jsx("option",{children:"Chargement des langues..."}):d.map((t=>e.jsx("option",{value:t.language,children:t.name},t.language)))})]}),e.jsx("button",{onClick:async()=>{if(t)try{u(!0),g(null);const e=await sg.translateText(t,r,a||null);l(e),zh.success("Traduction russie")}catch(e){console.error("Translation error:",e),g(`Erreur de traduction: ${e.message}`),zh.error("Erreur de traduction: "+(e.message||"Une erreur est survenue"))}finally{u(!1)}else zh.error("Veuillez entrer un texte  traduire")},disabled:c||!t||!1,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:c?"Traduction en cours...":"Traduire"}),o&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h2",{className:"text-lg font-medium mb-2",children:"Rsultat :"}),e.jsx("div",{className:"p-4 bg-gray-100 rounded-md",children:o})]})]})]})};const FA=new class{constructor(){this.cache={notifications:{notifications:[],pagination:{total:0,page:1,limit:10,pages:1},unread_count:0},unreadCount:0,lastFetch:null,fetchPromise:null},this.subscribers=[],this.pollingInterval=null,this.pollingDelay=6e4,this.useMockBackend=!0}async getNotifications(e=1,t=10,n=!0,r=!1){try{if(await new Promise((e=>setTimeout(e,300))),this.cache.notifications&&this.cache.notifications.notifications){let r=[...this.cache.notifications.notifications];n||(r=r.filter((e=>!e.isRead))),r.sort(((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)));const s=r.length,a=Math.max(1,Math.ceil(s/t)),i=(e-1)*t,o={notifications:r.slice(i,i+t),pagination:{total:s,page:e,limit:t,pages:a},unread_count:r.filter((e=>!e.isRead)).length};return this.cache.notifications=o,this.cache.unreadCount=o.unread_count,this.cache.lastFetch=new Date,this.notifySubscribers(),o}if(this.cache.fetchPromise)try{await this.cache.fetchPromise}catch(s){console.log("Waiting for fetch promise failed, checking cache next")}if(!r&&this.cache.notifications&&this.cache.notifications.notifications)return this.cache.notifications;console.log("No valid cached data, returning empty notifications");const a={notifications:[],pagination:{total:0,page:1,limit:10,pages:1},unread_count:0};return this.cache.notifications=a,this.cache.unreadCount=0,this.cache.lastFetch=new Date,this.notifySubscribers(),a}catch(s){return this.cache.fetchPromise=null,console.error("Error fetching notifications:",s),this.cache.notifications&&this.cache.notifications.notifications?this.cache.notifications:{notifications:[],pagination:{total:0,page:1,limit:10,pages:1},unread_count:0}}}async getUnreadCount(e=!1){try{if(e){let e=0;this.cache.notifications&&this.cache.notifications.notifications&&(e=this.cache.notifications.notifications.filter((e=>!e.readAt&&!e.isRead)).length,this.cache.unreadCount=e,this.notifySubscribers())}if(!e&&this.cache.lastFetch){const e=new Date;if(e-this.cache.lastFetch<3e4)return this.cache.unreadCount}let t=0;return this.cache.notifications&&this.cache.notifications.notifications&&(t=this.cache.notifications.notifications.filter((e=>!e.readAt&&!e.isRead)).length),this.cache.unreadCount=t,this.cache.lastFetch=new Date,this.notifySubscribers(),t}catch(t){return console.error("Error calculating unread notification count:",t),0}}markNotificationAsReadLocally(e){if(!this.cache.notifications||!this.cache.notifications.notifications)return!1;const t=this.cache.notifications.notifications.find((t=>t.id===e));return!(!t||t.readAt)&&(t.readAt=(new Date).toISOString(),t.isRead=!0,this.cache.unreadCount=Math.max(0,this.cache.unreadCount-1),this.notifySubscribers(),!0)}markAllNotificationsAsReadLocally(){if(!this.cache.notifications||!this.cache.notifications.notifications)return!1;let e=!1;return this.cache.notifications.notifications.forEach((t=>{t.readAt||(t.readAt=(new Date).toISOString(),t.isRead=!0,e=!0)})),e&&(this.cache.unreadCount=0,this.notifySubscribers()),e}startPolling(){this.pollingInterval&&clearInterval(this.pollingInterval),this.pollingInterval=setInterval((()=>{this.getUnreadCount(!0).catch((e=>{console.error("Error in notification polling:",e)}))}),this.pollingDelay)}stopPolling(){this.pollingInterval&&(clearInterval(this.pollingInterval),this.pollingInterval=null)}subscribe(e){if("function"==typeof e)return this.subscribers.push(e),()=>{this.subscribers=this.subscribers.filter((t=>t!==e))};console.warn("Notification subscriber must be a function")}notifySubscribers(){this.subscribers.forEach((e=>{try{e({unreadCount:this.cache.unreadCount,notifications:this.cache.notifications?.notifications||[]})}catch(t){console.error("Error in notification subscriber:",t)}}))}resetCache(){this.cache={notifications:{notifications:[],pagination:{total:0,page:1,limit:10,pages:1},unread_count:0},unreadCount:0,lastFetch:null,fetchPromise:null},this.notifySubscribers()}async markAsRead(e){try{this.markNotificationAsReadLocally(e);return{success:!0,notification:this.cache.notifications?.notifications?.find((t=>t.id===e))||null,unread_count:this.cache.unreadCount}}catch(t){return console.error("Error marking notification as read:",t),{success:!1,error:t.message,unread_count:this.cache.unreadCount}}}async markAllAsRead(){try{this.markAllNotificationsAsReadLocally();return{success:!0,updated:this.cache.notifications?.notifications?.length||0,unread_count:0}}catch(e){return console.error("Error marking all notifications as read:",e),{success:!1,error:e.message,unread_count:this.cache.unreadCount}}}async createTestNotification(e="document",t="/dashboard"){try{console.log("Creating local test notification");const n=new Date,r={id:`local-${n.getTime()}`,title:`Test Notification (${e})`,message:`Ceci est une notification de test de type "${e}" cre localement`,type:e,targetUrl:t,createdAt:n.toISOString(),readAt:null,isRead:!1};return this.cache.notifications.notifications||(this.cache.notifications.notifications=[]),this.cache.notifications.notifications.unshift(r),this.cache.unreadCount+=1,this.cache.notifications.pagination&&(this.cache.notifications.pagination.total+=1),this.notifySubscribers(),{success:!0,notification:r}}catch(n){return console.error("Error creating test notification:",n),{success:!1,error:n.message}}}},zA=async(e,{date:t,period:n,limit:r,offset:s}={})=>{try{let a=`/api/signatures/absences/formation/${e}`;const i=[];t&&i.push(`date=${encodeURIComponent(t)}`),n&&i.push(`period=${encodeURIComponent(n)}`),void 0!==r&&i.push(`limit=${encodeURIComponent(r)}`),void 0!==s&&i.push(`offset=${encodeURIComponent(s)}`),i.length&&(a+=`?${i.join("&")}`);return await jh.get(a)}catch(a){throw console.error("Erreur lors de la rcupration des absences de la formation:",a),a}},VA=async(e,{formationId:t,date:n,period:r,limit:s,offset:a}={})=>{try{let i=`/api/signatures/absences/user/${e}`;const o=[];t&&o.push(`formationId=${encodeURIComponent(t)}`),n&&o.push(`date=${encodeURIComponent(n)}`),r&&o.push(`period=${encodeURIComponent(r)}`),void 0!==s&&o.push(`limit=${encodeURIComponent(s)}`),void 0!==a&&o.push(`offset=${encodeURIComponent(a)}`),o.length&&(i+=`?${o.join("&")}`);return await jh.get(i)}catch(i){throw console.error("Erreur lors de la rcupration des absences de l'utilisateur:",i),i}},BA=[{value:"morning",label:"Matin (9h-12h)"},{value:"afternoon",label:"Aprs-midi (13h-17h)"}],qA=()=>{const{formationId:t}=ie(),[n,r]=Y.useState((()=>(new Date).toISOString().slice(0,10))),[s,a]=Y.useState("morning"),[i,o]=Y.useState(!1),[l,c]=Y.useState(null),[u,d]=Y.useState([]),[h,f]=Y.useState(0),[m,p]=Y.useState(0),[g]=Y.useState(10),[y,v]=Y.useState(0),b=async(e=y)=>{o(!0),c(null);try{const r=await zA(t,{date:n,period:s,limit:g,offset:e});d(r.absents||[]),f(r.studentCount||0),p(r.totalAbsents||0),v(r.offset||0)}catch(r){c(r.message||"Erreur lors du chargement des absences")}finally{o(!1)}};Y.useEffect((()=>{v(0),b(0)}),[t,n,s]);const x=Math.floor(y/g)+1,w=Math.ceil(m/g);return e.jsxs("div",{className:"max-w-5xl w-full mx-auto p-6 bg-white dark:bg-gray-900 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 mt-8 animate-fadeInUp",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-6 text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx("span",{className:"inline-block w-2 h-6 bg-blue-500 rounded-full mr-2"}),"Absences de la formation ",e.jsxs("span",{className:"text-blue-600 dark:text-blue-300",children:["#",t]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 mb-6 items-end",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-xs font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"Date"}),e.jsx("input",{type:"date",value:n,onChange:e=>r(e.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-400 focus:outline-none transition"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-xs font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"Priode"}),e.jsx("select",{value:s,onChange:e=>a(e.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-400 focus:outline-none transition",children:BA.map((t=>e.jsx("option",{value:t.value,children:t.label},t.value)))})]}),e.jsx("button",{onClick:()=>b(0),className:"bg-gradient-to-r from-blue-600 to-blue-500 text-white px-5 py-2 rounded-lg shadow hover:from-blue-700 hover:to-blue-600 transition font-semibold focus:outline-none focus:ring-2 focus:ring-blue-400",children:"Rafrachir"})]}),i&&e.jsx("div",{className:"my-6 text-center text-blue-500 animate-pulse",children:"Chargement..."}),l&&e.jsx("div",{className:"my-6 text-center text-red-500 bg-red-100 dark:bg-red-900/40 rounded-lg px-4 py-2 font-medium animate-fadeInUp",children:l}),e.jsxs("div",{className:"mb-3 text-sm text-gray-600 dark:text-gray-400",children:["Total tudiants : ",e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:h})," | Absents : ",e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:m})]}),e.jsx("div",{className:"overflow-x-auto rounded-lg shadow-sm",children:e.jsxs("table",{className:"w-full border-collapse bg-white dark:bg-gray-900 rounded-lg overflow-hidden",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 dark:bg-gray-800",children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-700 dark:text-gray-200 uppercase tracking-wider",children:"Prnom"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-700 dark:text-gray-200 uppercase tracking-wider",children:"Nom"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-700 dark:text-gray-200 uppercase tracking-wider",children:"Email"})]})}),e.jsx("tbody",{children:0!==u.length||i?u.map((t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/60 transition",children:[e.jsx("td",{className:"px-4 py-2 border-b border-gray-100 dark:border-gray-700",children:t.firstName}),e.jsx("td",{className:"px-4 py-2 border-b border-gray-100 dark:border-gray-700",children:t.lastName}),e.jsx("td",{className:"px-4 py-2 border-b border-gray-100 dark:border-gray-700",children:t.email})]},t.id))):e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"text-center py-4 text-gray-400 dark:text-gray-500",children:"Aucun absent"})})})]})}),e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsx("button",{onClick:()=>{y-g>=0&&b(y-g)},disabled:0===y,className:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition",children:"Prcdent"}),e.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Page ",e.jsx("span",{className:"font-bold",children:x})," / ",w]}),e.jsx("button",{onClick:()=>{y+g<m&&b(y+g)},disabled:y+g>=m,className:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition",children:"Suivant"})]})]})},$A=[{value:"morning",label:"Matin (9h-12h)"},{value:"afternoon",label:"Aprs-midi (13h-17h)"}],HA=()=>{const{userId:t}=ie(),[n,r]=Y.useState(""),[s,a]=Y.useState(""),[i,o]=Y.useState(""),[l,c]=Y.useState(!1),[u,d]=Y.useState(null),[h,f]=Y.useState([]),[m,p]=Y.useState(0),[g]=Y.useState(10),[y,v]=Y.useState(0),b=async(e=y)=>{c(!0),d(null);try{const r=await VA(t,{formationId:n||void 0,date:s||void 0,period:i||void 0,limit:g,offset:e});f(r.absences||[]),p(r.totalAbsences||0),v(r.offset||0)}catch(r){d(r.message||"Erreur lors du chargement des absences")}finally{c(!1)}};Y.useEffect((()=>{v(0),b(0)}),[t,n,s,i]);const x=Math.floor(y/g)+1,w=Math.ceil(m/g);return e.jsxs("div",{className:"max-w-5xl w-full mx-auto p-6 bg-white dark:bg-gray-900 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 mt-8 animate-fadeInUp",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-6 text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx("span",{className:"inline-block w-2 h-6 bg-blue-500 rounded-full mr-2"}),"Absences de l'utilisateur"]}),e.jsxs("div",{className:"flex flex-wrap gap-4 mb-6 items-end",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-xs font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"Date"}),e.jsx("input",{type:"date",value:s,onChange:e=>a(e.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-400 focus:outline-none transition"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-xs font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"Priode"}),e.jsxs("select",{value:i,onChange:e=>o(e.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-400 focus:outline-none transition",children:[e.jsx("option",{value:"",children:"Toutes"}),$A.map((t=>e.jsx("option",{value:t.value,children:t.label},t.value)))]})]}),e.jsx("button",{onClick:()=>b(0),className:"bg-gradient-to-r from-blue-600 to-blue-500 text-white px-5 py-2 rounded-lg shadow hover:from-blue-700 hover:to-blue-600 transition font-semibold focus:outline-none focus:ring-2 focus:ring-blue-400",children:"Rafrachir"})]}),l&&e.jsx("div",{className:"my-6 text-center text-blue-500 animate-pulse",children:"Chargement..."}),u&&e.jsx("div",{className:"my-6 text-center text-red-500 bg-red-100 dark:bg-red-900/40 rounded-lg px-4 py-2 font-medium animate-fadeInUp",children:u}),e.jsxs("div",{className:"mb-3 text-sm text-gray-600 dark:text-gray-400",children:["Total absences : ",e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:m})]}),e.jsx("div",{className:"overflow-x-auto rounded-lg shadow-sm",children:e.jsxs("table",{className:"w-full border-collapse bg-white dark:bg-gray-900 rounded-lg overflow-hidden",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 dark:bg-gray-800",children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-700 dark:text-gray-200 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-700 dark:text-gray-200 uppercase tracking-wider",children:"Priode"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-700 dark:text-gray-200 uppercase tracking-wider",children:"Formation"})]})}),e.jsx("tbody",{children:0!==h.length||l?h.map(((t,n)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/60 transition",children:[e.jsx("td",{className:"px-4 py-2 border-b border-gray-100 dark:border-gray-700",children:t.date}),e.jsx("td",{className:"px-4 py-2 border-b border-gray-100 dark:border-gray-700",children:$A.find((e=>e.value===t.period))?.label||t.period}),e.jsxs("td",{className:"px-4 py-2 border-b border-gray-100 dark:border-gray-700",children:[t.formationName," "]})]},n))):e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"text-center py-4 text-gray-400 dark:text-gray-500",children:"Aucune absence"})})})]})}),e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsx("button",{onClick:()=>{y-g>=0&&b(y-g)},disabled:0===y,className:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition",children:"Prcdent"}),e.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Page ",e.jsx("span",{className:"font-bold",children:x})," / ",w]}),e.jsx("button",{onClick:()=>{y+g<m&&b(y+g)},disabled:y+g>=m,className:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition",children:"Suivant"})]})]})},WA="/api/formations",GA=(e={})=>jh.get(WA,e),KA=e=>jh.get(`${WA}/${e}`),QA=e=>jh.post(WA,e,{headers:{"Content-Type":"multipart/form-data"}}),XA=(e,t)=>jh.put(`${WA}/${e}`,t),YA=e=>jh.delete(`${WA}/${e}`),JA=(e,t)=>jh.post(`${WA}/${e}/image`,t,{headers:{"Content-Type":"multipart/form-data"}}),ZA=e=>jh.delete(`${WA}/${e}/image`),e_=e=>jh.get(`${WA}/${e}/available-students`),t_=(e,t)=>jh.post(`${WA}/${e}/students/${t}`),n_=()=>jh.get("/api/specializations"),r_=e=>jh.post(`${WA}/${e}/enrollment-request`),s_=(e,t,n="")=>jh.patch(`/api/formation-requests/${e}`,{status:t,comment:n}),a_=e=>e?e.success&&e.data||e.data?e.data:(Array.isArray(e),e):null,i_=e=>{if(!e)return null;const t=decodeURIComponent(e);return t.startsWith("http")?t:null},o_=e=>(console.error("API Error:",e),e.response?.data?.message?e.response.data.message:e.message?e.message:"Une erreur est survenue"),l_={getAllFormations:async(e=1,t=10,n="")=>{try{const r=await GA({params:{page:e,limit:t,search:n.trim()}}),s=a_(r.data),a=s?.formations?.map((e=>({...e,image_url:i_(e.image_url),dateStart:e.dateStart?new Date(e.dateStart):null,students:e.students||[],capacity:parseInt(e.capacity)||0,duration:parseInt(e.duration)||0})))||[];return{formations:a,pagination:s?.pagination||{currentPage:1,totalPages:1,limit:10,total:a.length}}}catch(r){throw new Error(o_(r))}},getFormation:async e=>{try{const t=await KA(e),n=a_(t.data),r=n?.formation;if(!r)throw new Error("Formation non trouve");return{...r,image_url:i_(r.image_url),dateStart:r.dateStart?new Date(r.dateStart):null,students:r.students||[],capacity:parseInt(r.capacity)||0,duration:parseInt(r.duration)||0}}catch(t){throw new Error(o_(t))}},createFormation:async e=>{try{const t=["name","promotion","capacity","duration","dateStart","specializationId"].filter((t=>!e[t]));if(t.length>0)throw new Error(`Champs requis manquants : ${t.join(", ")}`);const n=new FormData;Object.entries(e).forEach((([e,t])=>{"imageFile"===e&&t?n.append("image",t):null!=t&&n.append(e,t.toString())}));const r=await QA(n),s=a_(r.data);return s?.formation}catch(t){throw new Error(o_(t))}},updateFormation:async(e,t)=>{try{if(!e)throw new Error("ID de formation manquant");const n=await XA(e,t),r=a_(n.data);return r?.formation}catch(n){throw new Error(o_(n))}},deleteFormation:async e=>{try{if(!e)throw new Error("ID de formation manquant");const t=await YA(e);return a_(t.data)}catch(t){throw new Error(o_(t))}},uploadFormationImage:async(e,t)=>{try{if(!e||!t)throw new Error("ID de formation ou fichier image manquant");const n=t.get("image");if(!(n&&n instanceof File))throw new Error("Fichier image invalide");const r=await JA(e,t);if(!r?.data)throw new Error("Rponse invalide du serveur");const s=r.data.data?.image_url||r.data.image_url;if(!s)throw new Error("URL de l'image manquante dans la rponse");return{success:!0,image_url:i_(s)}}catch(n){throw n instanceof Error?n:new Error("Erreur lors du tlchargement de l'image")}},deleteFormationImage:async e=>{try{if(!e)throw new Error("ID de formation manquant");const t=await ZA(e);return a_(t.data)}catch(t){throw new Error(o_(t))}},getAvailableStudents:async e=>{try{const t=await e_(e);return a_(t.data)}catch(t){throw new Error(o_(t))}},addStudentToFormation:async(e,t)=>{try{const n=await t_(e,t);return a_(n.data)}catch(n){throw new Error(o_(n))}},getSpecializations:async()=>{try{const e=await n_();return e?.success&&e?.data?.specializations?e.data.specializations:[]}catch(e){throw new Error(o_(e))}},requestEnrollment:async e=>{const t=await r_(e);if(!t.success)throw new Error(t.message||"Erreur lors de la demande d'inscription  la formation.");return t.data},processEnrollmentRequest:async(e,t,n="")=>{try{const r=await s_(e,t,n);return a_(r.data)}catch(r){throw new Error(o_(r))}}},c_=J.forwardRef((({className:t,value:n=0,...r},s)=>e.jsx("div",{ref:s,className:`relative h-4 w-full overflow-hidden rounded-full bg-secondary ${t||""}`,...r,children:e.jsx("div",{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(n||0)}%)`,transition:"transform 0.2s ease-in-out"}})})));c_.displayName="Progress";const u_=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",version:"1.1",style:{shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",imageRendering:"optimizeQuality",fillRule:"evenodd",clipRule:"evenodd"},viewBox:"0 0 784.11 815.53",children:e.jsxs("g",{id:"Layer_x0020_1",children:[e.jsx("metadata",{id:"CorelCorpID_0Corel-Layer"}),e.jsx("path",{className:"fil0",d:"M392.05 0c-20.9,210.08 -184.06,378.41 -392.05,407.78 207.96,29.37 371.12,197.68 392.05,407.74 20.93,-210.06 184.09,-378.37 392.05,-407.74 -207.98,-29.38 -371.16,-197.69 -392.06,-407.78z"})]})});function d_({children:t,className:n,...r}){return e.jsxs("button",{className:`magic-button ${n||""}`,...r,children:[t,e.jsx("div",{className:"star-1",children:e.jsx(u_,{})}),e.jsx("div",{className:"star-2",children:e.jsx(u_,{})}),e.jsx("div",{className:"star-3",children:e.jsx(u_,{})}),e.jsx("div",{className:"star-4",children:e.jsx(u_,{})}),e.jsx("div",{className:"star-5",children:e.jsx(u_,{})}),e.jsx("div",{className:"star-6",children:e.jsx(u_,{})})]})}const h_=async(e={})=>{try{const t=await Kd.get("/api/users/list",{params:{...e,includeRoles:!0}});return Array.isArray(t.data.data)?t.data.data:[]}catch(t){throw t}},f_={requested:async({formationName:e,formationId:t,userId:n},r=!0)=>{try{let t=n||localStorage.getItem("userId")||localStorage.getItem("user_id");if(!t)try{const e=localStorage.getItem("user");if(e){const n=JSON.parse(e);n&&n.id&&(t=n.id)}}catch(s){}if(!t)return;t=String(t);let r={};try{const e=ON(YT,"notificationPreferences",t);if(r=(await zT(e)).data()||{},!1===r.INFO)return}catch(s){}const a=new Date,i={recipientId:t,title:"Demande d'inscription envoye",message:`Votre demande pour rejoindre la formation ${e} a bien t prise en compte.`,type:"INFO",targetUrl:"/formations",timestamp:a,read:!1};await HT(LN(YT,"notifications"),i);const o={id:`local-${a.getTime()}`,...i,createdAt:a.toISOString()};FA.cache.notifications&&FA.cache.notifications.notifications&&(FA.cache.notifications.notifications.unshift(o),FA.cache.unreadCount=(FA.cache.unreadCount||0)+1,FA.cache.notifications.pagination&&(FA.cache.notifications.pagination.total+=1),FA.notifySubscribers(),setTimeout((()=>{FA.getNotifications(1,10,!0,!0).then((()=>FA.getUnreadCount(!0))).catch((()=>{}))}),300))}catch(a){}},guestApplication:async({formationName:e,guestId:t})=>{try{const r=(await h_()).filter((e=>!!e.roles&&e.roles.some((e=>{if("object"==typeof e&&e.name&&(e=e.name),"string"!=typeof e)return!1;return e.toUpperCase().replace("ROLE_","")===ap.RECRUITER.toUpperCase().replace("ROLE_","")}))));if(!Array.isArray(r)||0===r.length)return;for(const s of r){const r=s.id;let a={};try{const e=ON(YT,"notificationPreferences",r);if(a=(await zT(e)).data()||{},!1===a.GUEST_APPLICATION)continue}catch(n){}const i={recipientId:r,title:"Nouvelle demande d'inscription invit",message:`Un invit a demand  rejoindre la formation ${e}.`,type:"GUEST_APPLICATION",targetUrl:"/recruiter/enrollment-requests",timestamp:new Date,read:!1,guestId:t||null};await HT(LN(YT,"notifications"),i)}}catch(r){}}};async function m_(){const e=await fetch("/api/formation-requests/my",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!e.ok)throw new Error("Erreur lors du chargement des demandes");return await e.json()}function p_(){const{id:t}=ie(),n=ee(),[r,s]=Y.useState(null),[a,i]=Y.useState(!0),[o,l]=Y.useState(null),[c,u]=Y.useState(!1),[d,h]=Y.useState(!1),{profileData:f}=Y.useContext(lR)||{},m=f?.stats?.profile?.isAcknowledged,[p,g]=Y.useState(!1),[y,v]=Y.useState(!1);Y.useEffect((()=>{i(!0),l(null),Promise.all([l_.getFormation(t),l_.getMyEnrollmentRequests?l_.getMyEnrollmentRequests():m_()]).then((([e,n])=>{s(e);let r=[];n&&n.requests?r=n.requests.filter((e=>null===e.status)).map((e=>e.formation.id)):Array.isArray(n)&&(r=n.filter((e=>null===e.status)).map((e=>e.formation?.id||e.formation_id)));const a=JSON.parse(localStorage.getItem("requestedFormations")||"[]").filter((e=>r.includes(e)));localStorage.setItem("requestedFormations",JSON.stringify(a)),u(r.includes(Number(t)))})).catch((e=>l(e.message||"Erreur lors du chargement de la formation."))).finally((()=>i(!1)))}),[t]);if(a)return e.jsx("div",{className:"flex justify-center items-center min-h-[300px]",children:e.jsx(gc,{className:"h-8 w-8 animate-spin text-primary"})});if(o||!r)return e.jsxs("div",{className:"p-4 bg-destructive/10 text-destructive rounded-md",children:[e.jsx("p",{children:"Une erreur est survenue lors du chargement de la formation."}),e.jsx("p",{className:"text-sm",children:o}),e.jsxs(qm,{variant:"outline",className:"mt-4",onClick:()=>n(-1),children:[e.jsx(Xl,{className:"mr-2 h-4 w-4"})," Retour"]})]});const{name:b,promotion:x,image_url:w,description:E,capacity:k,duration:S,dateStart:N,location:T,specialization:C,students:j=[]}=r,R=j.length,A=Math.min(R/(k||1)*100,100);return e.jsxs("div",{className:"max-w-3xl mx-auto py-8 px-4",children:[e.jsxs(qm,{variant:"ghost",className:"mb-6",onClick:()=>n(-1),children:[e.jsx(Xl,{className:"mr-2 h-4 w-4"})," Retour"]}),e.jsx(SA,{className:"relative rounded-3xl shadow-xl bg-white border border-gray-200 overflow-visible",children:e.jsx(jA,{className:"p-0",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 pt-12 pb-8 px-8",children:[e.jsx("div",{className:"-mt-20 mb-2 z-10",children:e.jsx("div",{className:"w-32 h-32 rounded-full shadow-lg border-4 border-white bg-gray-100 flex items-center justify-center overflow-hidden",children:e.jsx("img",{src:w||"/placeholder.svg",alt:b,className:"object-cover w-full h-full"})})}),e.jsx("div",{className:"font-extrabold text-3xl mb-1 text-gray-900 dark:text-white text-center drop-shadow tracking-tight animate-fade-in",children:b}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-2 animate-fade-in",children:[e.jsx(DC,{className:"bg-[#2563eb] text-white font-semibold shadow-sm animate-bounceIn",children:C?.name||"Formation"}),e.jsx(DC,{variant:"outline",className:"border-[#2563eb] text-[#2563eb] bg-white font-semibold animate-bounceIn delay-100",children:x||"N/A"})]}),e.jsx("div",{className:"text-gray-700 dark:text-gray-100 mb-2 text-center max-w-xl animate-fade-in-slow",children:E}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 w-full justify-center mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-amber-600 dark:text-amber-300",children:[e.jsx($l,{className:"h-5 w-5"}),e.jsxs("span",{children:["Dbut : ",N?new Date(N).toLocaleDateString():"Non dfini"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[#528eb2] dark:text-[#78b9dd]",children:[e.jsx(sc,{className:"h-5 w-5"}),e.jsxs("span",{children:[S," mois"]})]}),T&&e.jsxs("div",{className:"flex items-center gap-2 text-[#528eb2] dark:text-[#78b9dd]",children:[e.jsx(xc,{className:"h-5 w-5"}),e.jsx("span",{children:T})]})]}),e.jsxs("div",{className:"w-full mt-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fc,{className:"h-5 w-5 text-blue-500"}),e.jsxs("span",{className:"text-base font-medium",children:[R," / ",k," tudiants inscrits"]})]})}),e.jsx(c_,{value:A,className:"h-2"})]}),j&&j.length>0&&e.jsxs("div",{className:"w-full mt-8",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"tudiants inscrits :"}),e.jsx("ul",{className:"list-disc pl-6 space-y-1 text-left text-sm",children:j.map(((t,n)=>e.jsxs("li",{children:[t.firstname," ",t.lastname," (",t.email,")"]},t.id||n)))})]}),e.jsx("div",{className:"w-full flex justify-center mt-8",children:c?e.jsxs(qm,{className:"w-full max-w-xs text-base font-medium bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-300 cursor-not-allowed flex items-center justify-center gap-2",disabled:!0,onClick:e=>e.stopPropagation(),children:[e.jsx(yc,{className:"h-4 w-4 mr-2"}),"Demande envoye"]}):e.jsx(d_,{className:"w-full max-w-xs text-base font-medium bg-gradient-to-r from-amber-400 via-[#528eb2] to-[#78b9dd] hover:from-transparent hover:to-transparent hover:text-amber-600 dark:hover:text-white",onClick:()=>{m?v(!0):g(!0)},disabled:d,children:e.jsxs("span",{className:"flex items-center justify-center gap-2",children:["Demander  rejoindre ",e.jsx(Yl,{className:"ml-2 h-4 w-4"})]})})})]})})}),e.jsx(Qm,{open:p,onOpenChange:g,children:e.jsx(Zm,{className:"bg-gradient-to-br from-amber-50 via-blue-50 to-white dark:from-amber-900/30 dark:via-blue-900/20 dark:to-slate-900 p-0 overflow-hidden",children:e.jsxs("div",{className:"flex flex-col items-center px-6 pt-8 pb-6",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-pink-300 via-purple-300 to-indigo-300 dark:from-pink-900/30 dark:via-purple-900/30 dark:to-indigo-900/30 flex items-center justify-center mb-4 shadow-lg",children:e.jsx(fc,{className:"w-12 h-12 text-white dark:text-white"})}),e.jsxs(ep,{className:"w-full text-center",children:[e.jsx(np,{className:"text-2xl font-bold mb-2",children:"Profil  complter !"}),e.jsx(rp,{asChild:!0,children:e.jsxs("div",{className:"mb-4 text-base text-gray-700 dark:text-gray-200",children:[e.jsx("span",{className:"block mb-2",children:"Oups, il te manque encore quelques infos pour pouvoir faire une demande :"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-1 text-left",children:[e.jsx("li",{children:e.jsx("button",{type:"button",className:"underline text-blue-600 dark:text-blue-300 hover:text-blue-800 dark:hover:text-blue-100 transition-colors cursor-pointer p-0 bg-transparent border-0",onClick:()=>{g(!1),n("/settings/profile")},children:"Ajoute ton profil LinkedIn"})}),e.jsx("li",{children:e.jsx("button",{type:"button",className:"underline text-amber-700 dark:text-amber-300 hover:text-amber-900 dark:hover:text-amber-100 transition-colors cursor-pointer p-0 bg-transparent border-0",onClick:()=>{g(!1),n("/settings/career")},children:"Dpose ton CV"})}),e.jsx("li",{children:e.jsx("button",{type:"button",className:"underline text-emerald-700 dark:text-emerald-300 hover:text-emerald-900 dark:hover:text-emerald-100 transition-colors cursor-pointer p-0 bg-transparent border-0",onClick:()=>{g(!1),n("/settings/career")},children:"Ajoute au moins un diplme"})})]}),e.jsx("span",{className:"block mt-4",children:"C'est rapide, et a t'ouvrira toutes les portes "})]})})]}),e.jsxs(tp,{className:"w-full flex flex-col gap-2 mt-2",children:[e.jsx(qm,{variant:"outline",onClick:()=>g(!1),className:"w-full",children:"Fermer"}),e.jsx(qm,{asChild:!0,variant:"default",className:"w-full text-base font-semibold",children:e.jsx("a",{href:"/settings/profile",className:"text-primary",onClick:()=>g(!1),children:"Complter mon profil"})})]})]})})}),e.jsx(Qm,{open:y,onOpenChange:v,children:e.jsxs(Zm,{children:[e.jsxs(ep,{children:[e.jsx(np,{children:"Confirmer la demande"}),e.jsx(rp,{children:"Voulez-vous vraiment rejoindre cette formation ? Cette action enverra une demande d'inscription."})]}),e.jsxs(tp,{children:[e.jsx(qm,{variant:"outline",onClick:()=>v(!1),children:"Annuler"}),e.jsx(qm,{onClick:async()=>{h(!0),u(!0);const n=JSON.parse(localStorage.getItem("requestedFormations")||"[]");localStorage.setItem("requestedFormations",JSON.stringify([...new Set([...n,Number(t)])]));try{await l_.requestEnrollment(t),r&&await f_.requested({formationName:r.name,formationId:r.id,userId:f?.id}),zh.success(e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-6 h-6 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{className:"font-bold",children:"Demande envoye !"})]}),{duration:5e3})}catch(s){if(console.error("[FormationDetail] Erreur dans handleRequestJoin",s),s?.message&&s.message.toLowerCase().includes("demande d'inscription cre avec succs"))return r&&await f_.requested({formationName:r.name,formationId:r.id,userId:f?.id}),zh.success(e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-6 h-6 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{className:"font-bold",children:"Demande envoye !"})]}),{duration:5e3}),h(!1),void v(!1);zh.error(s.message||"Erreur lors de la demande d'inscription  la formation."),u(!1)}finally{h(!1),v(!1)}},disabled:d,children:"Confirmer"})]})]})})]})}const g_=()=>{const{colorMode:t,currentTheme:n}=xR();return e.jsxs("div",{className:"min-h-screen relative overflow-hidden pt-[72px]",children:[e.jsxs("header",{className:"container mx-auto pt-8 pb-12 px-4 text-center relative z-10",children:[e.jsx(_l.h1,{className:`text-5xl md:text-6xl font-bold mb-6 ${n.textHighlight}`,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.8},children:"Toutes Nos Formations"}),e.jsx(_l.p,{className:`text-xl md:text-2xl ${n.textPrimary} max-w-3xl mx-auto`,initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.2},children:"Explorez notre catalogue complet de formations pour trouver celle qui correspond  vos aspirations professionnelles"})]}),e.jsx("section",{className:"container mx-auto px-4 py-12 relative z-10",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[{id:"web",title:"Dveloppement Web",description:"Matrisez HTML, CSS, JavaScript et les frameworks modernes pour crer des sites web et applications web interactifs et responsifs.",image:"/assets/images/formations/web-dev.webp",color:"from-blue-500 to-cyan-400",modules:["HTML/CSS","JavaScript","React","Node.js","PHP/MySQL"],duration:"9 mois"},{id:"cybersecurity",title:"Cyberscurit",description:"Apprenez  protger les systmes informatiques contre les menaces et vulnrabilits avec des techniques avances de scurit.",image:"/assets/images/formations/cybersecurity.webp",color:"from-green-500 to-emerald-400",modules:["Scurit rseau","Cryptographie","Ethical Hacking","Forensics","Scurit Cloud"],duration:"10 mois"},{id:"ai",title:"Intelligence Artificielle",description:"Dcouvrez le machine learning, le deep learning et leurs applications pratiques dans divers domaines industriels.",image:"/assets/images/formations/ia.webp",color:"from-purple-500 to-pink-500",modules:["Machine Learning","Deep Learning","NLP","Computer Vision","thique de l'IA"],duration:"12 mois"},{id:"data-science",title:"Science des Donnes",description:"Analysez et visualisez des donnes complexes pour en extraire des insights prcieux et prendre des dcisions bases sur les donnes.",image:"/assets/images/formations/data-science.webp",color:"from-indigo-500 to-blue-600",modules:["Python pour Data Science","Statistiques","Visualisation","Big Data","Business Intelligence"],duration:"10 mois"},{id:"mobile",title:"Dveloppement Mobile",description:"Crez des applications mobiles pour iOS et Android avec des frameworks natifs et cross-platform comme React Native et Flutter.",image:"/assets/images/formations/mobile-dev.webp",color:"from-pink-500 to-red-500",modules:["iOS (Swift)","Android (Kotlin)","React Native","Flutter","UX/UI Mobile"],duration:"8 mois"},{id:"game",title:"Dveloppement de Jeux",description:"Concevez et crez des jeux vido captivants en utilisant des moteurs de jeu professionnels comme Unity et Unreal Engine.",image:"/assets/images/formations/game-dev.webp",color:"from-yellow-500 to-orange-500",modules:["Game Design","Unity","Unreal Engine","3D Modeling","Game Physics"],duration:"11 mois"}].map(((t,r)=>e.jsxs(_l.div,{className:`${n.cardBg} backdrop-blur-sm rounded-xl overflow-hidden ${n.shadow}`,initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1*r},whileHover:{y:-10,transition:{duration:.3}},children:[e.jsxs("div",{className:"h-48 relative overflow-hidden flex items-center justify-center bg-gray-900",children:[e.jsx("img",{src:t.image,alt:t.title,className:"w-full h-48 object-cover object-[center_30%] z-10 relative"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40"})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:`text-2xl font-bold mb-2 ${n.textHighlight}`,children:t.title}),e.jsx("p",{className:`${n.textPrimary} mb-4`,children:t.description}),e.jsx("div",{className:"mb-4",children:e.jsxs("span",{className:`text-sm font-semibold ${n.textHighlight}`,children:["Dure: ",t.duration]})}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:t.modules.map(((t,r)=>e.jsx("span",{className:`px-3 py-1 ${n.cardBg} rounded-full text-sm ${n.textPrimary}`,children:t},r)))}),e.jsx(te,{to:`/formations/${t.id}`,className:`inline-block w-full py-3 px-6 ${n.buttonBg} rounded-lg font-medium text-center transition-colors`,children:"Dcouvrir la formation"})]})]},t.id)))})}),e.jsx("section",{className:"container mx-auto px-4 py-16 text-center relative z-10",children:e.jsxs(_l.div,{className:`${n.cardBg} rounded-2xl p-8 md:p-12 ${n.shadow}`,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},children:[e.jsx("h2",{className:`text-3xl md:text-4xl font-bold mb-4 ${n.textHighlight}`,children:"Prt  commencer votre voyage ducatif?"}),e.jsx("p",{className:`text-xl ${n.textPrimary} mb-8 max-w-2xl mx-auto`,children:"Rejoignez notre communaut d'apprenants et transformez votre carrire avec nos formations de pointe."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(te,{to:"/register",className:`py-3 px-8 ${n.buttonBg} rounded-lg font-medium text-lg transition-colors`,children:"S'inscrire maintenant"}),e.jsx(te,{to:"/login",className:`py-3 px-8 ${n.buttonAlt} rounded-lg font-medium text-lg transition-colors`,children:"Se connecter"})]})]})}),e.jsx("footer",{className:`container mx-auto px-4 py-8 text-center ${n.textPrimary} relative z-10`,children:e.jsx("p",{children:" 2025 Tech Odyssey Academy. Tous droits rservs."})})]})},y_=Y.lazy((()=>je((()=>import("./Login-BstxQBGJ.js")),__vite__mapDeps([0,1,2,3,4,5,6])))),v_=Y.lazy((()=>je((()=>import("./Register-BMjVpW_c.js")),__vite__mapDeps([7,1,2,3,4,8,9,10,11,12,13,14,15,16,5,6,17])))),b_=Y.lazy((()=>je((()=>import("./RegistrationSuccess-C_rhmQlA.js")),__vite__mapDeps([18,1,2,3,19,5,6])))),x_=Y.lazy((()=>je((()=>import("./VerificationSuccess-BYUa2Xi3.js")),__vite__mapDeps([20,1,2,3,19,5,6])))),w_=Y.lazy((()=>je((()=>import("./VerificationError-Cold5Jo6.js")),__vite__mapDeps([21,1,2,3,5,6])))),E_=Y.lazy((()=>je((()=>import("./ResetPasswordRequest-BKSjLXap.js")),__vite__mapDeps([22,1,2,3,23,5,6])))),k_=Y.lazy((()=>je((()=>import("./ResetPasswordConfirmation-CEvnfA7T.js")),__vite__mapDeps([24,1,2,3,5,6])))),S_=Y.lazy((()=>je((()=>import("./ResetPassword-DtpGBR2d.js")),__vite__mapDeps([25,1,2,3,23,15,16,5,6])))),N_=Y.lazy((()=>je((()=>import("./SettingsProfile-CgDI2EeC.js")),__vite__mapDeps([26,1,2,3,5,27,28,8,9,23,29,30,31,10,32,33,34,13,35,11,6])))),T_=Y.lazy((()=>je((()=>import("./SecuritySettings-CpNDGnJ8.js")),__vite__mapDeps([36,1,2,3,23,9,37,38,16,33,5,6])))),C_=Y.lazy((()=>je((()=>import("./NotificationSettings-Cp0RURWp.js")),__vite__mapDeps([39,1,2,3,34,9,37,38,5,6])))),j_=Y.lazy((()=>je((()=>import("./CareerSettings-vGbgz5jp.js")),__vite__mapDeps([40,1,2,3,38,5,29,23,30,8,9,31,10,32,28,27,33,34,11,12,6])))),R_=Y.lazy((()=>je((()=>import("./ProfileView-3gyU2kJk.js")),__vite__mapDeps([41,1,2,3,5,6]))));Y.lazy((()=>je((()=>import("./Dashboard-Cb_NI0J0.js")),__vite__mapDeps([42,1,2,3,43,6,33,5]))));const A_=Y.lazy((()=>je((()=>import("./Trombinoscope-B_Nh6ZtF.js")),__vite__mapDeps([44,1,2,3,5,33,45,6])))),__=Y.lazy((()=>je((()=>import("./Dashboard-BuJMTo4L.js")),__vite__mapDeps([46,1,2,3,47,5,23,9,43,6,33,14])))),D_=Y.lazy((()=>je((()=>import("./Dashboard-BZiphXug.js")),__vite__mapDeps([48,1,2,3,47,5,43,6,33,49,50,51])))),I_=Y.lazy((()=>je((()=>import("./Schedule-DvS1cizn.js")),__vite__mapDeps([52,1,2,3,53,54,10,55,5,6])))),P_=Y.lazy((()=>je((()=>import("./Grades-D-9axuBS.js")),__vite__mapDeps([56,1,2,3,57,53,54,58,51,32,5,6])))),M_=Y.lazy((()=>je((()=>import("./Absences-CnZ8IFps.js")),__vite__mapDeps([59,1,2,3,57,6,60,54,49,10,5])))),L_=Y.lazy((()=>je((()=>import("./Projects-g3hOOClZ.js")),__vite__mapDeps([61,1,2,3])))),O_=Y.lazy((()=>je((()=>import("./Attendance-BES7rWjK.js")),__vite__mapDeps([62,1,2,3,63,37,19,33,64,57,43,6,65,5])))),U_=Y.lazy((()=>je((()=>import("./Dashboard-_SwM5cTN.js")),__vite__mapDeps([66,1,2,3,47,5,53,54,43,6,33,57,65,58,50])))),F_=Y.lazy((()=>je((()=>import("./SignatureMonitoring-BoJx1yLx.js")),__vite__mapDeps([67,1,2,3,57,65,10,19,5,6])))),z_=Y.lazy((()=>je((()=>import("./Attendance-BYD268jX.js")),__vite__mapDeps([68,1,2,3,63,37,19,33,64,57,43,6,65,5])))),V_=Y.lazy((()=>je((()=>import("./SignatureHistory-DA2royHw.js")),__vite__mapDeps([69,1,2,3,64,57,37,33,19,5,6])))),B_=Y.lazy((()=>je((()=>import("./TeacherFormationList-C7Tc7RrR.js")),__vite__mapDeps([70,1,2,3,5,71,23,57,6])))),q_=Y.lazy((()=>je((()=>import("./TeacherFormationDetails-DB-4Qirq.js")),__vite__mapDeps([72,1,2,3,5,71,57,10,6])))),$_=Y.lazy((()=>je((()=>import("./Dashboard-X7Ft8Cn5.js")),__vite__mapDeps([73,1,2,3,47,5,43,6,33,50])))),H_=Y.lazy((()=>je((()=>import("./Dashboard-DiFJTaAb.js")),__vite__mapDeps([74,1,2,3,43,6,33,47,5])))),W_=Y.lazy((()=>je((()=>import("./Dashboard-BbnEARVb.js")),__vite__mapDeps([75,1,2,3,43,6,33,47,5,55])))),G_=Y.lazy((()=>je((()=>import("./Dashboard-CMx5jeLI.js")),__vite__mapDeps([76,1,2,3,43,6,33,47,5,23,9,60,54])))),K_=Y.lazy((()=>je((()=>import("./FormationTable-wbZgajoY.js")),__vite__mapDeps([77,1,2,3,57,37,31,28,78,5,6])))),Q_=Y.lazy((()=>je((()=>import("./GuestStudentRoleManager-BB2Eyn4R.js")),__vite__mapDeps([79,1,2,3,5,57,14,43,6,33,9])))),X_=Y.lazy((()=>je((()=>import("./UserRoleManager-C-eYOn3Y.js")),__vite__mapDeps([80,1,2,3,43,6,33,23,60,54,81,57,28,9,37,78,8,10,35,5])))),Y_=Y.lazy((()=>je((()=>import("./FormationFinder-Ceh5h5Cw.js")),__vite__mapDeps([82,1,2,3,5,6])))),J_=Y.lazy((()=>je((()=>import("./AdminFormationsView-BLhiJyra.js")),__vite__mapDeps([83,1,2,3,37,28,78,77,57,31,5,6])))),Z_=Y.lazy((()=>je((()=>import("./WebDevelopment-Cu0wHrLA.js")),__vite__mapDeps([84,1,2,3,85,5,6])))),eD=Y.lazy((()=>je((()=>import("./Cybersecurity-FCiBM2Ln.js")),__vite__mapDeps([86,1,2,3,85,5,6])))),tD=Y.lazy((()=>je((()=>import("./ArtificialIntelligence-CmVtT9We.js")),__vite__mapDeps([87,1,2,3,85,5,6])))),nD=Y.lazy((()=>je((()=>import("./DataScience-LbYL0qk_.js")),__vite__mapDeps([88,1,2,3,85,5,6])))),rD=Y.lazy((()=>je((()=>import("./MobileDevelopment-B5qm2z-9.js")),__vite__mapDeps([89,1,2,3,85,5,6])))),sD=Y.lazy((()=>je((()=>import("./GameDevelopment-Jsqk5ViU.js")),__vite__mapDeps([90,1,2,3,85,5,6])))),aD=Y.lazy((()=>je((()=>import("./Games-CYb5ax9F.js")),__vite__mapDeps([91,1,2,3,5,6])))),iD=Y.lazy((()=>je((()=>import("./NotificationsPage-DmXcqnAX.js")),__vite__mapDeps([92,1,2,3,10,5,6]))));Y.lazy((()=>je((()=>import("./HomePage-DUnnPEFQ.js")),__vite__mapDeps([93,1,2,3,5,6]))));const oD=Y.lazy((()=>je((()=>import("./Home-B7mPYKbJ.js")),__vite__mapDeps([94,1,2,3,5,6])))),lD=Y.lazy((()=>je((()=>import("./TicketList-Cq3uCqvW.js")),__vite__mapDeps([95,1,2,3,5,6])))),cD=Y.lazy((()=>je((()=>import("./TicketForm-r3VGZHXg.js")),__vite__mapDeps([96,1,2,3,5,6])))),uD=Y.lazy((()=>je((()=>import("./TicketDetail-Dx9MPONb.js")),__vite__mapDeps([97,1,2,3,5,6])))),dD=Y.lazy((()=>je((()=>import("./TicketServiceList-BdlEr71n.js")),__vite__mapDeps([98,1,2,3,5,6])))),hD=Y.lazy((()=>je((()=>import("./FormationForm-BWtQFpLM.js")),__vite__mapDeps([99,1,2,3,23,9,100,60,54,27,28,5,6])))),fD=Y.lazy((()=>je((()=>import("./EditFormationForm-C-sguUYp.js")),__vite__mapDeps([101,1,2,3,23,9,100,60,54,34,28,29,5,55,27,6])))),mD=Y.lazy((()=>je((()=>import("./index-B1TacQy-.js")),__vite__mapDeps([102,1,2,3,37,23,60,54,81,45,33,5,6])))),pD=Y.lazy((()=>je((()=>import("./EnrollmentRequests-M1H6IIoU.js")),__vite__mapDeps([103,1,2,3,23,9,60,54,5,6])))),gD=Y.lazy((()=>je((()=>import("./FormationDetails-Dj9mw7gP.js")),__vite__mapDeps([104,1,2,3,5,6])))),yD=Y.lazy((()=>je((()=>import("./MyFormation-B77Azp-E.js")),__vite__mapDeps([105,1,2,3,55,5,6])))),vD=Y.lazy((()=>je((()=>import("./EnrollmentRequests-CflnxQDe.js")),__vite__mapDeps([106,1,2,3,53,54,55,28,5,6])))),bD=()=>(FA.getNotifications(1,10,!0,!0).then((e=>{})).catch((e=>{})),e.jsx(me,{client:Qh,children:e.jsx(bR,{children:e.jsx(eC,{children:e.jsx(ip,{children:e.jsxs(og,{children:[e.jsxs(oe,{children:[e.jsx(le,{element:e.jsx(SR,{}),children:e.jsxs(le,{element:e.jsx(kR,{}),children:[e.jsx(le,{index:!0,element:e.jsx(oD,{})}),e.jsx(le,{path:"/login",element:e.jsx(y_,{})}),e.jsx(le,{path:"/register",element:e.jsx(v_,{})}),e.jsx(le,{path:"/registration-success",element:e.jsx(b_,{})}),e.jsx(le,{path:"/verification-success",element:e.jsx(x_,{})}),e.jsx(le,{path:"/verification-error",element:e.jsx(w_,{})}),e.jsx(le,{path:"/reset-password",element:e.jsx(E_,{})}),e.jsx(le,{path:"/reset-password/confirmation",element:e.jsx(k_,{})}),e.jsx(le,{path:"/reset-password/reset",element:e.jsx(S_,{})}),e.jsx(le,{path:"/formations",element:e.jsx(K_,{})}),e.jsx(le,{path:"/formation-finder",element:e.jsx(Y_,{})}),e.jsx(le,{path:"/all-formations",element:e.jsx(J_,{})}),e.jsx(le,{path:"/formations/web",element:e.jsx(Z_,{})}),e.jsx(le,{path:"/formations/ai",element:e.jsx(tD,{})}),e.jsx(le,{path:"/formations/cybersecurity",element:e.jsx(eD,{})}),e.jsx(le,{path:"/formations/mobile",element:e.jsx(rD,{})}),e.jsx(le,{path:"/formations/data-science",element:e.jsx(nD,{})}),e.jsx(le,{path:"/formations/game",element:e.jsx(sD,{})}),e.jsx(le,{path:"/skill-assessment",element:e.jsx(aD,{})}),e.jsx(le,{path:"/formations-catalogue",element:e.jsx(g_,{})})]})}),e.jsx(le,{element:e.jsx(yR,{}),children:e.jsxs(le,{element:e.jsx(OC,{children:e.jsx(gR,{})}),children:[e.jsx(le,{path:"/dashboard",element:e.jsx(vj,{})}),e.jsx(le,{path:"/notifications",element:e.jsx(iD,{})}),e.jsx(le,{path:"/profile",element:e.jsx(R_,{})}),e.jsx(le,{path:"/profile/:userId",element:e.jsx(LA,{})}),e.jsx(le,{path:"/public-profile/:userId",element:e.jsx(LA,{})}),e.jsxs(le,{element:e.jsx(IR,{}),children:[e.jsx(le,{path:"/settings",element:e.jsx(se,{to:"/profile",replace:!0})}),e.jsx(le,{path:"/settings/profile",element:e.jsx(N_,{})}),e.jsx(le,{path:"/settings/career",element:e.jsx(j_,{})}),e.jsx(le,{path:"/settings/security",element:e.jsx(T_,{})}),e.jsx(le,{path:"/settings/notifications",element:e.jsx(C_,{})})]}),e.jsx(le,{path:"/admin/dashboard",element:e.jsx(yj,{roles:ap.ADMIN,fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(__,{})})}),e.jsx(le,{path:"/admin/users",element:e.jsx(yj,{roles:[ap.ADMIN,ap.HR,ap.TEACHER,ap.SUPERADMIN],children:e.jsx(X_,{})})}),e.jsx(le,{path:"/admin/ticket-services",element:e.jsx(yj,{roles:[ap.ADMIN,ap.SUPERADMIN],fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(dD,{})})}),e.jsx(le,{path:"/admin/tickets",element:e.jsx(yj,{roles:[ap.ADMIN,ap.SUPERADMIN],fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(BR,{})})}),e.jsx(le,{path:"/admin/formations",element:e.jsx(yj,{roles:[ap.ADMIN,ap.SUPERADMIN],fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(J_,{})})}),e.jsx(le,{path:"/admin/formations/:id",element:e.jsx(yj,{roles:[ap.ADMIN,ap.SUPERADMIN],fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(gD,{})})}),e.jsx(le,{path:"/admin/formations/new",element:e.jsx(yj,{roles:[ap.ADMIN,ap.SUPERADMIN],fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(hD,{})})}),e.jsx(le,{path:"/admin/formations/edit/:id",element:e.jsx(yj,{roles:[ap.ADMIN,ap.SUPERADMIN],fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(fD,{})})}),e.jsx(le,{path:"/formation-management",element:e.jsx(yj,{roles:[ap.RECRUITER,ap.ADMIN,ap.SUPERADMIN],fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(J_,{})})}),e.jsx(le,{path:"/formation-management/:id",element:e.jsx(yj,{roles:[ap.RECRUITER,ap.ADMIN,ap.SUPERADMIN],fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(gD,{})})}),e.jsx(le,{path:"/formation-management/new",element:e.jsx(yj,{roles:[ap.RECRUITER,ap.ADMIN,ap.SUPERADMIN],fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(hD,{})})}),e.jsx(le,{path:"/formation-management/edit/:id",element:e.jsx(yj,{roles:[ap.RECRUITER,ap.ADMIN,ap.SUPERADMIN],fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(fD,{})})}),e.jsxs(le,{path:"/student",children:[e.jsx(le,{path:"dashboard",element:e.jsx(yj,{roles:ap.STUDENT,fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(D_,{})})}),e.jsx(le,{path:"schedule",element:e.jsx(yj,{roles:ap.STUDENT,fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(I_,{})})}),e.jsx(le,{path:"grades",element:e.jsx(yj,{roles:ap.STUDENT,fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(P_,{})})}),e.jsx(le,{path:"absences",element:e.jsx(yj,{roles:ap.STUDENT,fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(M_,{})})}),e.jsx(le,{path:"projects",element:e.jsx(yj,{roles:ap.STUDENT,fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(L_,{})})}),e.jsx(le,{path:"formation",element:e.jsx(yj,{roles:ap.STUDENT,fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(yD,{})})}),e.jsx(le,{element:e.jsx(PR,{}),children:e.jsx(le,{path:"attendance",element:e.jsx(O_,{})})})]}),e.jsxs(le,{path:"/teacher",children:[e.jsx(le,{path:"dashboard",element:e.jsx(yj,{roles:ap.TEACHER,fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(U_,{})})}),e.jsx(le,{path:"attendance",element:e.jsx(yj,{roles:ap.TEACHER,fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(z_,{})})}),e.jsx(le,{path:"signature-monitoring",element:e.jsx(yj,{roles:ap.TEACHER,fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(F_,{})})}),e.jsx(le,{path:"signature-history",element:e.jsx(yj,{roles:ap.TEACHER,fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(V_,{})})}),e.jsx(le,{path:"formations",element:e.jsx(yj,{roles:ap.TEACHER,fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(B_,{})})}),e.jsx(le,{path:"formations/:id",element:e.jsx(yj,{roles:ap.TEACHER,fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(q_,{})})})]}),e.jsx(le,{path:"/hr/dashboard",element:e.jsx(yj,{roles:ap.HR,fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx($_,{})})}),e.jsx(le,{path:"/admin",children:e.jsx(le,{path:"users",element:e.jsx(yj,{roles:[ap.ADMIN,ap.SUPERADMIN],fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(X_,{})})})}),e.jsx(le,{path:"/superadmin/dashboard",element:e.jsx(yj,{roles:ap.SUPERADMIN,fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(H_,{})})}),e.jsx(le,{path:"/guest/dashboard",element:e.jsx(yj,{roles:ap.GUEST,fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(W_,{})})}),e.jsx(le,{path:"/guest/enrollment-requests",element:e.jsx(yj,{roles:ap.GUEST,fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(vD,{})})}),e.jsx(le,{path:"/recruiter/dashboard",element:e.jsx(yj,{roles:ap.RECRUITER,fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(G_,{})})}),e.jsx(le,{path:"/recruiter/guest-student-roles",element:e.jsx(yj,{roles:[ap.RECRUITER,ap.ADMIN,ap.SUPERADMIN],fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(Q_,{})})}),e.jsx(le,{path:"/recruiter/enrollment-requests",element:e.jsx(yj,{roles:ap.RECRUITER,fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(pD,{})})}),e.jsx(le,{path:"trombinoscope",element:e.jsx(yj,{roles:[ap.SUPERADMIN,ap.ADMIN,ap.TEACHER,ap.STUDENT,ap.RECRUITER],fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(A_,{})})}),e.jsx(le,{path:"/tickets",element:e.jsx(lD,{})}),e.jsx(le,{path:"/tickets/new",element:e.jsx(cD,{})}),e.jsx(le,{path:"/tickets/:id",element:e.jsx(uD,{})}),e.jsx(le,{path:"/translation",element:e.jsx(UA,{})}),e.jsxs(le,{path:"/formations",children:[e.jsx(le,{path:"new",element:e.jsx(yj,{roles:[ap.ADMIN,ap.SUPERADMIN,ap.RECRUITER],fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(hD,{})})}),e.jsx(le,{path:"edit/:id",element:e.jsx(yj,{roles:[ap.ADMIN,ap.SUPERADMIN,ap.RECRUITER],fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(fD,{})})}),e.jsx(le,{path:"list",element:e.jsx(yj,{roles:[ap.GUEST],fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(mD,{})})})]}),e.jsx(le,{path:"/recruiter/formation-management",element:e.jsx(yj,{roles:[ap.RECRUITER,ap.ADMIN,ap.SUPERADMIN],fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(J_,{})})}),e.jsx(le,{path:"/recruiter/formation-management/:id",element:e.jsx(yj,{roles:[ap.RECRUITER,ap.ADMIN,ap.SUPERADMIN],fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(gD,{})})}),e.jsx(le,{path:"/absences/formation/:formationId",element:e.jsx(yj,{roles:[ap.TEACHER,ap.ADMIN,ap.SUPERADMIN],fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(qA,{})})}),e.jsx(le,{path:"/absences/user/:userId",element:e.jsx(yj,{roles:[ap.TEACHER,ap.ADMIN,ap.SUPERADMIN,ap.STUDENT],fallback:e.jsx(se,{to:"/dashboard",replace:!0}),children:e.jsx(HA,{})})}),e.jsx(le,{path:"/formations/:id",element:e.jsx(p_,{})})]})}),e.jsx(le,{path:"*",element:e.jsx(se,{to:"/",replace:!0})})]}),e.jsx(UR,{})]})})})})}));window.queryClient=Qh,Te.createRoot(document.getElementById("root")).render(e.jsx(Y.StrictMode,{children:e.jsxs(me,{client:Qh,children:[e.jsx(ce,{children:e.jsx(bD,{})}),!1]})})),window.addEventListener("profile:completion",(e=>{console.log("[GLOBAL] profile:completion event capt",e)}));export{hh as $,Be as A,qm as B,Yl as C,Qm as D,jf as E,Ip as F,Mp as G,Hl as H,ep as I,tp as J,uc as K,gc as L,xc as M,jc as N,bc as O,fj as P,ZT as Q,Bl as R,rg as S,dc as T,Uc as U,pc as V,YR as W,eA as X,hp as Y,xf as Z,je as _,op as a,Sj as a$,Dc as a0,Xm as a1,nC as a2,Tc as a3,zl as a4,ON as a5,YT as a6,zT as a7,$T as a8,qT as a9,sC as aA,aC as aB,oC as aC,eR as aD,tR as aE,nR as aF,rR as aG,xA as aH,wA as aI,EA as aJ,nc as aK,kA as aL,Kh as aM,Cc as aN,lR as aO,d_ as aP,yc as aQ,fc as aR,l_ as aS,f_ as aT,rC as aU,EC as aV,lC as aW,Pf as aX,Lp as aY,Xh as aZ,Kd as a_,bf as aa,zc as ab,AC as ac,DA as ad,HT as ae,LN as af,FA as ag,oc as ah,cc as ai,Jl as aj,Vl as ak,tA as al,MA as am,Qh as an,sf as ao,Qp as ap,ap as aq,Fc as ar,Ql as as,JR as at,ZR as au,h_ as av,lg as aw,sc as ax,DC as ay,Fl as az,of as b,kC as b0,qN as b1,dp as b2,Kp as b3,Pp as b4,$m as b5,Hm as b6,Wm as b7,Gm as b8,Km as b9,wj as ba,Ej as bb,UC as bc,c_ as bd,Yn as be,Ae as bf,fs as bg,Pe as bh,De as bi,kt as bj,St as bk,ds as bl,Ac as bm,Lc as bn,lc as bo,ic as bp,dh as bq,Xl as c,xR as d,ER as e,Vm as f,mj as g,pj as h,Kl as i,$l as j,Zm as k,np as l,_l as m,rp as n,ec as o,_f as p,SA as q,NA as r,TA as s,zh as t,lp as u,CA as v,jA as w,RA as x,jh as y,Ul as z};
