const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Login-DtaJkTmS.js","assets/ui-CEgDFHEN.js","assets/router-Cgxi-4fo.js","assets/react-0RZ2pslC.js","assets/PageTransition-C7VUONEl.js","assets/query-CdiCT4_A.js","assets/charts-D4j3G6dB.js","assets/Register-CkdHohZy.js","assets/phone-input-BDHoxrci.js","assets/label-CZ2eSvnT.js","assets/index-BvyXXQGh.js","assets/command-CwVBHN1d.js","assets/chevrons-up-down-C6rUcLOP.js","assets/api-ByLJPBWa.js","assets/checkbox-zFLhYDGw.js","assets/RegisterUtils-B4fhN566.js","assets/eye-CoNfHwbr.js","assets/Register-CGbFyten.css","assets/RegistrationSuccess-DDQs0Xdb.js","assets/circle-check-big-DE6jNIrp.js","assets/VerificationSuccess-BCoqUTP3.js","assets/VerificationError-C7g4J_c2.js","assets/ResetPasswordRequest-CLx6L2sU.js","assets/input-Dh8hMSvB.js","assets/ResetPasswordConfirmation-BH9lGX6-.js","assets/ResetPassword-DdaDjh8V.js","assets/SettingsProfile-Cx81SmiD.js","assets/upload-CWRQgADi.js","assets/trash-2-531J_cvk.js","assets/separator-Bvbj5MUI.js","assets/JobSeekingSettings-FGhXNR3a.js","assets/pencil-CDABaW1g.js","assets/download-Dy16K2o2.js","assets/circle-alert-CuflSOg3.js","assets/switch-Clw6eJ5N.js","assets/phone-Cuhb2h1V.js","assets/SecuritySettings-qE7oGdXs.js","assets/alert-CCchSlA4.js","assets/ProfileSettingsSkeleton-BAcD1-j8.js","assets/NotificationSettings-CnmDiP5z.js","assets/CareerSettings-DPLTMk73.js","assets/ProfileView-BndpOMui.js","assets/Dashboard-CLPO_par.js","assets/DashboardLayout-B-ArcSsG.js","assets/Trombinoscope-BnAa1WXM.js","assets/list-BmsRkMGn.js","assets/Dashboard-ChiTCPJ9.js","assets/useDashboardQueries-DKvqWitB.js","assets/Dashboard-BCkF6Dk8.js","assets/user-check-knDq27ta.js","assets/chart-column-BU4C8Lnt.js","assets/zap-D1wyGdja.js","assets/Schedule-NZUazehK.js","assets/scroll-area-DNyuG3Cj.js","assets/index-jVOyRz7F.js","assets/tooltip-CrspzI1l.js","assets/arrow-left-DsVZLv3H.js","assets/Grades-aXSesOd_.js","assets/table-0jZFX3es.js","assets/trending-up-BtUHn7kD.js","assets/Absences-DPoiGkgu.js","assets/select-I7k2-oC4.js","assets/Projects-DHWP2YU_.js","assets/Attendance-B6wP3CP9.js","assets/DocumentSignature-CrqOuRpx.js","assets/SignatureHistory-C9LCTIJ2.js","assets/clipboard-check-BELgbt1T.js","assets/Dashboard-C2mB3mYu.js","assets/SignatureMonitoring-BeJ7akv9.js","assets/Attendance-Cm8ud17p.js","assets/SignatureHistory-BoAKsRSB.js","assets/TeacherFormationList-DLFpqwTt.js","assets/formationTeacher.service-BEg5cIPf.js","assets/TeacherFormationDetails-B1mq_pyF.js","assets/Dashboard-D8p0JFnw.js","assets/Dashboard-CXvcMKNt.js","assets/Dashboard-DcdSk3VF.js","assets/Dashboard-CRn8WVrg.js","assets/FormationTable-DhybBscm.js","assets/triangle-alert-DGiZc1qp.js","assets/GuestStudentRoleManager-hpNe7TkK.js","assets/UserRoleManager-CfZOb_Gg.js","assets/filter-qWTWZ_uo.js","assets/FormationFinder-CuKAne1m.js","assets/AdminFormationsView-BwELiAa6.js","assets/WebDevelopment-DUgE7P8i.js","assets/FormationLayout-B2lMuD-x.js","assets/Cybersecurity-jYnOLzf_.js","assets/ArtificialIntelligence-DBQL2TYB.js","assets/DataScience-DZ29QkTT.js","assets/MobileDevelopment-C0EkOkvD.js","assets/GameDevelopment-DMs4_4Mt.js","assets/Games-DjC5tLk-.js","assets/NotificationsPage-Cix3xJBc.js","assets/HomePage-B3pQtmK3.js","assets/Home-BbpaCdrO.js","assets/TicketList-BVK1y_2D.js","assets/TicketForm-C9dojjbu.js","assets/TicketDetail-CowRmek7.js","assets/TicketServiceList-Dj_zP6vE.js","assets/FormationForm-DVI_bgAG.js","assets/textarea-DUVvTh6h.js","assets/EditFormationForm-DVG8DUZ2.js","assets/index-BsNBXA2I.js","assets/EnrollmentRequests-krRhBClj.js","assets/FormationDetails-0gyhHeb-.js","assets/MyFormation-BCh7X4v0.js","assets/EnrollmentRequests-6fZTnolc.js"])))=>i.map(i=>d[i]);
import{j as e,S as t,R as n,a as r,b as s,P as a,C as i,I as o,c as l,d as c,e as u,L as d,f as h,T as f,O as m,g as p,h as g,i as y,D as v,k as b,l as x,m as w,n as E,o as k,u as S,p as N,q as T,r as C,s as R,t as j,v as A,w as _,x as D,y as I,z as P,F as M,A as L,B as O,E as U,G as F,H as z,J as V,K as B,M as q,N as $,Q as H,U as W}from"./ui-CEgDFHEN.js";import{r as G,a as K}from"./react-0RZ2pslC.js";import{r as Q,b as X,c as J,u as Y,L as Z,a as ee,d as te,N as ne,O as re,e as se,f as ae,g as ie,B as oe}from"./router-Cgxi-4fo.js";import{Q as le,u as ce,a as ue,b as de,c as he}from"./query-CdiCT4_A.js";import{c as fe}from"./charts-D4j3G6dB.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var me,pe,ge,ye,ve={exports:{}},be={},xe={exports:{}},we={};function Ee(){return pe||(pe=1,xe.exports=(me||(me=1,function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<s(a,t)))break e;e[r]=t,e[n]=a,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,i=a>>>1;r<i;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<a&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<a&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var l=[],c=[],u=1,d=null,h=3,f=!1,m=!1,p=!1,g=!1,y="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function x(e){for(var s=n(c);null!==s;){if(null===s.callback)r(c);else{if(!(s.startTime<=e))break;r(c),s.sortIndex=s.expirationTime,t(l,s)}s=n(c)}}function w(e){if(p=!1,x(e),!m)if(null!==n(l))m=!0,k||(k=!0,E());else{var t=n(c);null!==t&&_(w,t.startTime-e)}}var E,k=!1,S=-1,N=5,T=-1;function C(){return!(!g&&e.unstable_now()-T<N)}function R(){if(g=!1,k){var t=e.unstable_now();T=t;var s=!0;try{e:{m=!1,p&&(p=!1,v(S),S=-1),f=!0;var a=h;try{t:{for(x(t),d=n(l);null!==d&&!(d.expirationTime>t&&C());){var i=d.callback;if("function"==typeof i){d.callback=null,h=d.priorityLevel;var o=i(d.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof o){d.callback=o,x(t),s=!0;break t}d===n(l)&&r(l),x(t)}else r(l);d=n(l)}if(null!==d)s=!0;else{var u=n(c);null!==u&&_(w,u.startTime-t),s=!1}}break e}finally{d=null,h=a,f=!1}s=void 0}}finally{s?E():k=!1}}}if("function"==typeof b)E=function(){b(R)};else if("undefined"!=typeof MessageChannel){var j=new MessageChannel,A=j.port2;j.port1.onmessage=R,E=function(){A.postMessage(null)}}else E=function(){y(R,0)};function _(t,n){S=y((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(r,s,a){var i=e.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?i+a:i,r){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return r={id:u++,callback:s,priorityLevel:r,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>i?(r.sortIndex=a,t(c,r),null===n(l)&&r===n(c)&&(p?(v(S),S=-1):p=!0,_(w,a-i))):(r.sortIndex=o,t(l,r),m||f||(m=!0,k||(k=!0,E()))),r},e.unstable_shouldYield=C,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(we)),we)),xe.exports}
/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function ke(){if(ge)return be;ge=1;var e=Ee(),t=G(),n=K();function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function a(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function i(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function o(e){if(a(e)!==e)throw Error(r(188))}function l(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=l(e)))return t;e=e.sibling}return null}var c=Object.assign,u=Symbol.for("react.element"),d=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),y=Symbol.for("react.consumer"),v=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),T=Symbol.iterator;function C(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=T&&e[T]||e["@@iterator"])?e:null}var R=Symbol.for("react.client.reference");function j(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===R?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case f:return"Fragment";case p:return"Profiler";case m:return"StrictMode";case x:return"Suspense";case w:return"SuspenseList";case S:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case h:return"Portal";case v:return(e.displayName||"Context")+".Provider";case y:return(e._context.displayName||"Context")+".Consumer";case b:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case E:return null!==(t=e.displayName||null)?t:j(e.type)||"Memo";case k:t=e._payload,e=e._init;try{return j(e(t))}catch(KR){}}return null}var A=Array.isArray,_=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I={pending:!1,data:null,method:null,action:null},P=[],M=-1;function L(e){return{current:e}}function O(e){0>M||(e.current=P[M],P[M]=null,M--)}function U(e,t){M++,P[M]=e.current,e.current=t}var F=L(null),z=L(null),V=L(null),B=L(null);function q(e,t){switch(U(V,t),U(z,e),U(F,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?id(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=od(t=id(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}O(F),U(F,e)}function $(){O(F),O(z),O(V)}function H(e){null!==e.memoizedState&&U(B,e);var t=F.current,n=od(t,e.type);t!==n&&(U(z,e),U(F,n))}function W(e){z.current===e&&(O(F),O(z)),B.current===e&&(O(B),Xd._currentValue=I)}var Q=Object.prototype.hasOwnProperty,X=e.unstable_scheduleCallback,J=e.unstable_cancelCallback,Y=e.unstable_shouldYield,Z=e.unstable_requestPaint,ee=e.unstable_now,te=e.unstable_getCurrentPriorityLevel,ne=e.unstable_ImmediatePriority,re=e.unstable_UserBlockingPriority,se=e.unstable_NormalPriority,ae=e.unstable_LowPriority,ie=e.unstable_IdlePriority,oe=e.log,le=e.unstable_setDisableYieldValue,ce=null,ue=null;function de(e){if("function"==typeof oe&&le(e),ue&&"function"==typeof ue.setStrictMode)try{ue.setStrictMode(ce,e)}catch(t){}}var he=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(fe(e)/me|0)|0},fe=Math.log,me=Math.LN2;var pe=256,ye=4194304;function ve(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function xe(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var s=0,a=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~a)?s=ve(r):0!==(i&=o)?s=ve(i):n||0!==(n=o&~e)&&(s=ve(n)):0!==(o=r&~a)?s=ve(o):0!==i?s=ve(i):n||0!==(n=r&~e)&&(s=ve(n)),0===s?0:0!==t&&t!==s&&!(t&a)&&((a=s&-s)>=(n=t&-t)||32===a&&4194048&n)?t:s}function we(e,t){return!(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function ke(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Se(){var e=pe;return!(4194048&(pe<<=1))&&(pe=256),e}function Ne(){var e=ye;return!(62914560&(ye<<=1))&&(ye=4194304),e}function Te(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ce(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Re(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-he(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function je(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-he(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}function Ae(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function _e(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function De(){var e=D.p;return 0!==e?e:void 0===(e=window.event)?32:dh(e.type)}var Ie=Math.random().toString(36).slice(2),Pe="__reactFiber$"+Ie,Me="__reactProps$"+Ie,Le="__reactContainer$"+Ie,Oe="__reactEvents$"+Ie,Ue="__reactListeners$"+Ie,Fe="__reactHandles$"+Ie,ze="__reactResources$"+Ie,Ve="__reactMarker$"+Ie;function Be(e){delete e[Pe],delete e[Me],delete e[Oe],delete e[Ue],delete e[Fe]}function qe(e){var t=e[Pe];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Le]||n[Pe]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=wd(e);null!==e;){if(n=e[Pe])return n;e=wd(e)}return t}n=(e=n).parentNode}return null}function $e(e){if(e=e[Pe]||e[Le]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function He(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(r(33))}function We(e){var t=e[ze];return t||(t=e[ze]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ge(e){e[Ve]=!0}var Ke=new Set,Qe={};function Xe(e,t){Je(e,t),Je(e+"Capture",t)}function Je(e,t){for(Qe[e]=t,e=0;e<t.length;e++)Ke.add(t[e])}var Ye,Ze,et=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tt={},nt={};function rt(e,t,n){if(s=t,Q.call(nt,s)||!Q.call(tt,s)&&(et.test(s)?nt[s]=!0:(tt[s]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var s}function st(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function at(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function it(e){if(void 0===Ye)try{throw Error()}catch(KR){var t=KR.stack.trim().match(/\n( *(at )?)/);Ye=t&&t[1]||"",Ze=-1<KR.stack.indexOf("\n    at")?" (<anonymous>)":-1<KR.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Ye+e+Ze}var ot=!1;function lt(e,t){if(!e||ot)return"";ot=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(KR){var r=KR}Reflect.construct(e,[],n)}else{try{n.call()}catch(s){r=s}e.call(n.prototype)}}else{try{throw Error()}catch(a){r=a}(n=e())&&"function"==typeof n.catch&&n.catch((function(){}))}}catch(i){if(i&&r&&"string"==typeof i.stack)return[i.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=r.DetermineComponentFrameRoot(),i=a[0],o=a[1];if(i&&o){var l=i.split("\n"),c=o.split("\n");for(s=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(r===l.length||s===c.length)for(r=l.length-1,s=c.length-1;1<=r&&0<=s&&l[r]!==c[s];)s--;for(;1<=r&&0<=s;r--,s--)if(l[r]!==c[s]){if(1!==r||1!==s)do{if(r--,0>--s||l[r]!==c[s]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=s);break}}}finally{ot=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?it(n):""}function ct(e){switch(e.tag){case 26:case 27:case 5:return it(e.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return lt(e.type,!1);case 11:return lt(e.type.render,!1);case 1:return lt(e.type,!0);case 31:return it("Activity");default:return""}}function ut(e){try{var t="";do{t+=ct(e),e=e.return}while(e);return t}catch(KR){return"\nError generating stack: "+KR.message+"\n"+KR.stack}}function dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ht(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ft(e){e._valueTracker||(e._valueTracker=function(e){var t=ht(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var s=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function mt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ht(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function pt(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function yt(e){return e.replace(gt,(function(e){return"\\"+e.charCodeAt(0).toString(16)+" "}))}function vt(e,t,n,r,s,a,i,o){e.name="",null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&"boolean"!=typeof i?e.type=i:e.removeAttribute("type"),null!=t?"number"===i?(0===t&&""===e.value||e.value!=t)&&(e.value=""+dt(t)):e.value!==""+dt(t)&&(e.value=""+dt(t)):"submit"!==i&&"reset"!==i||e.removeAttribute("value"),null!=t?xt(e,i,dt(t)):null!=n?xt(e,i,dt(n)):null!=r&&e.removeAttribute("value"),null==s&&null!=a&&(e.defaultChecked=!!a),null!=s&&(e.checked=s&&"function"!=typeof s&&"symbol"!=typeof s),null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o?e.name=""+dt(o):e.removeAttribute("name")}function bt(e,t,n,r,s,a,i,o){if(null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a&&(e.type=a),null!=t||null!=n){if(("submit"===a||"reset"===a)&&null==t)return;n=null!=n?""+dt(n):"",t=null!=t?""+dt(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!=typeof(r=null!=r?r:s)&&"symbol"!=typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&"boolean"!=typeof i&&(e.name=i)}function xt(e,t,n){"number"===t&&pt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function wt(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+dt(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function Et(e,t,n){null==t||((t=""+dt(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+dt(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function kt(e,t,n,s){if(null==t){if(null!=s){if(null!=n)throw Error(r(92));if(A(s)){if(1<s.length)throw Error(r(93));s=s[0]}n=s}null==n&&(n=""),t=n}n=dt(t),e.defaultValue=n,(s=e.textContent)===n&&""!==s&&null!==s&&(e.value=s)}function St(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Nt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"==typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!=typeof n||0===n||Nt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Ct(e,t,n){if(null!=t&&"object"!=typeof t)throw Error(r(62));if(e=e.style,null!=n){for(var s in n)!n.hasOwnProperty(s)||null!=t&&t.hasOwnProperty(s)||(0===s.indexOf("--")?e.setProperty(s,""):"float"===s?e.cssFloat="":e[s]="");for(var a in t)s=t[a],t.hasOwnProperty(a)&&n[a]!==s&&Tt(e,a,s)}else for(var i in t)t.hasOwnProperty(i)&&Tt(e,i,t[i])}function Rt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),At=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _t(e){return At.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Dt=null;function It(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Pt=null,Mt=null;function Lt(e){var t=$e(e);if(t&&(e=t.stateNode)){var n=e[Me]||null;e:switch(e=t.stateNode,t.type){case"input":if(vt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+yt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var a=s[Me]||null;if(!a)throw Error(r(90));vt(s,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)(s=n[t]).form===e.form&&mt(s)}break e;case"textarea":Et(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&wt(e,!!n.multiple,t,!1)}}}var Ot=!1;function Ut(e,t,n){if(Ot)return e(t,n);Ot=!0;try{return e(t)}finally{if(Ot=!1,(null!==Pt||null!==Mt)&&(qc(),Pt&&(t=Pt,e=Mt,Mt=Pt=null,Lt(t),e)))for(t=0;t<e.length;t++)Lt(e[t])}}function Ft(e,t){var n=e.stateNode;if(null===n)return null;var s=n[Me]||null;if(null===s)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(s=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!s;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(r(231,t,typeof n));return n}var zt=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Vt=!1;if(zt)try{var Bt={};Object.defineProperty(Bt,"passive",{get:function(){Vt=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch(Mh){Vt=!1}var qt=null,$t=null,Ht=null;function Wt(){if(Ht)return Ht;var e,t,n=$t,r=n.length,s="value"in qt?qt.value:qt.textContent,a=s.length;for(e=0;e<r&&n[e]===s[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===s[a-t];t++);return Ht=s.slice(e,1<t?1-t:void 0)}function Gt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Kt(){return!0}function Qt(){return!1}function Xt(e){function t(t,n,r,s,a){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(s):s[i]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?Kt:Qt,this.isPropagationStopped=Qt,this}return c(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Kt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Kt)},persist:function(){},isPersistent:Kt}),t}var Jt,Yt,Zt,en={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tn=Xt(en),nn=c({},en,{view:0,detail:0}),rn=Xt(nn),sn=c({},nn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zt&&(Zt&&"mousemove"===e.type?(Jt=e.screenX-Zt.screenX,Yt=e.screenY-Zt.screenY):Yt=Jt=0,Zt=e),Jt)},movementY:function(e){return"movementY"in e?e.movementY:Yt}}),an=Xt(sn),on=Xt(c({},sn,{dataTransfer:0})),ln=Xt(c({},nn,{relatedTarget:0})),cn=Xt(c({},en,{animationName:0,elapsedTime:0,pseudoElement:0})),un=Xt(c({},en,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),dn=Xt(c({},en,{data:0})),hn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=mn[e])&&!!t[e]}function gn(){return pn}var yn=Xt(c({},nn,{key:function(e){if(e.key){var t=hn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Gt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?fn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gn,charCode:function(e){return"keypress"===e.type?Gt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Gt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),vn=Xt(c({},sn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),bn=Xt(c({},nn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gn})),xn=Xt(c({},en,{propertyName:0,elapsedTime:0,pseudoElement:0})),wn=Xt(c({},sn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),En=Xt(c({},en,{newState:0,oldState:0})),kn=[9,13,27,32],Sn=zt&&"CompositionEvent"in window,Nn=null;zt&&"documentMode"in document&&(Nn=document.documentMode);var Tn=zt&&"TextEvent"in window&&!Nn,Cn=zt&&(!Sn||Nn&&8<Nn&&11>=Nn),Rn=String.fromCharCode(32),jn=!1;function An(e,t){switch(e){case"keyup":return-1!==kn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _n(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Dn=!1;var In={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!In[e.type]:"textarea"===t}function Mn(e,t,n,r){Pt?Mt?Mt.push(r):Mt=[r]:Pt=r,0<(t=Wu(t,"onChange")).length&&(n=new tn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ln=null,On=null;function Un(e){Uu(e,0)}function Fn(e){if(mt(He(e)))return e}function zn(e,t){if("change"===e)return t}var Vn=!1;if(zt){var Bn;if(zt){var qn="oninput"in document;if(!qn){var $n=document.createElement("div");$n.setAttribute("oninput","return;"),qn="function"==typeof $n.oninput}Bn=qn}else Bn=!1;Vn=Bn&&(!document.documentMode||9<document.documentMode)}function Hn(){Ln&&(Ln.detachEvent("onpropertychange",Wn),On=Ln=null)}function Wn(e){if("value"===e.propertyName&&Fn(On)){var t=[];Mn(t,On,e,It(e)),Ut(Un,t)}}function Gn(e,t,n){"focusin"===e?(Hn(),On=n,(Ln=t).attachEvent("onpropertychange",Wn)):"focusout"===e&&Hn()}function Kn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Fn(On)}function Qn(e,t){if("click"===e)return Fn(t)}function Xn(e,t){if("input"===e||"change"===e)return Fn(t)}var Jn="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function Yn(e,t){if(Jn(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Q.call(t,s)||!Jn(e[s],t[s]))return!1}return!0}function Zn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function er(e,t){var n,r=Zn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Zn(r)}}function tr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?tr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function nr(e){for(var t=pt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=pt((e=t.contentWindow).document)}return t}function rr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var sr=zt&&"documentMode"in document&&11>=document.documentMode,ar=null,ir=null,or=null,lr=!1;function cr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;lr||null==ar||ar!==pt(r)||("selectionStart"in(r=ar)&&rr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},or&&Yn(or,r)||(or=r,0<(r=Wu(ir,"onSelect")).length&&(t=new tn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ar)))}function ur(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var dr={animationend:ur("Animation","AnimationEnd"),animationiteration:ur("Animation","AnimationIteration"),animationstart:ur("Animation","AnimationStart"),transitionrun:ur("Transition","TransitionRun"),transitionstart:ur("Transition","TransitionStart"),transitioncancel:ur("Transition","TransitionCancel"),transitionend:ur("Transition","TransitionEnd")},hr={},fr={};function mr(e){if(hr[e])return hr[e];if(!dr[e])return e;var t,n=dr[e];for(t in n)if(n.hasOwnProperty(t)&&t in fr)return hr[e]=n[t];return e}zt&&(fr=document.createElement("div").style,"AnimationEvent"in window||(delete dr.animationend.animation,delete dr.animationiteration.animation,delete dr.animationstart.animation),"TransitionEvent"in window||delete dr.transitionend.transition);var pr=mr("animationend"),gr=mr("animationiteration"),yr=mr("animationstart"),vr=mr("transitionrun"),br=mr("transitionstart"),xr=mr("transitioncancel"),wr=mr("transitionend"),Er=new Map,kr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(e,t){Er.set(e,t),Xe(t,[e])}kr.push("scrollEnd");var Nr=new WeakMap;function Tr(e,t){if("object"==typeof e&&null!==e){var n=Nr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ut(t)},Nr.set(e,t),t)}return{value:e,source:t,stack:ut(t)}}var Cr=[],Rr=0,jr=0;function Ar(){for(var e=Rr,t=jr=Rr=0;t<e;){var n=Cr[t];Cr[t++]=null;var r=Cr[t];Cr[t++]=null;var s=Cr[t];Cr[t++]=null;var a=Cr[t];if(Cr[t++]=null,null!==r&&null!==s){var i=r.pending;null===i?s.next=s:(s.next=i.next,i.next=s),r.pending=s}0!==a&&Pr(n,s,a)}}function _r(e,t,n,r){Cr[Rr++]=e,Cr[Rr++]=t,Cr[Rr++]=n,Cr[Rr++]=r,jr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Dr(e,t,n,r){return _r(e,t,n,r),Mr(e)}function Ir(e,t){return _r(e,null,null,t),Mr(e)}function Pr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var s=!1,a=e.return;null!==a;)a.childLanes|=n,null!==(r=a.alternate)&&(r.childLanes|=n),22===a.tag&&(null===(e=a.stateNode)||1&e._visibility||(s=!0)),e=a,a=a.return;return 3===e.tag?(a=e.stateNode,s&&null!==t&&(s=31-he(n),null===(r=(e=a.hiddenUpdates)[s])?e[s]=[t]:r.push(t),t.lane=536870912|n),a):null}function Mr(e){if(50<Pc)throw Pc=0,Mc=null,Error(r(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Lr={};function Or(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ur(e,t,n,r){return new Or(e,t,n,r)}function Fr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zr(e,t){var n=e.alternate;return null===n?((n=Ur(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Vr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Br(e,t,n,s,a,i){var o=0;if(s=e,"function"==typeof e)Fr(e)&&(o=1);else if("string"==typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,n,F.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case S:return(e=Ur(31,n,t,a)).elementType=S,e.lanes=i,e;case f:return qr(n.children,a,i,t);case m:o=8,a|=24;break;case p:return(e=Ur(12,n,t,2|a)).elementType=p,e.lanes=i,e;case x:return(e=Ur(13,n,t,a)).elementType=x,e.lanes=i,e;case w:return(e=Ur(19,n,t,a)).elementType=w,e.lanes=i,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case g:case v:o=10;break e;case y:o=9;break e;case b:o=11;break e;case E:o=14;break e;case k:o=16,s=null;break e}o=29,n=Error(r(130,null===e?"null":typeof e,"")),s=null}return(t=Ur(o,n,t,a)).elementType=e,t.type=s,t.lanes=i,t}function qr(e,t,n,r){return(e=Ur(7,e,r,t)).lanes=n,e}function $r(e,t,n){return(e=Ur(6,e,null,t)).lanes=n,e}function Hr(e,t,n){return(t=Ur(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Wr=[],Gr=0,Kr=null,Qr=0,Xr=[],Jr=0,Yr=null,Zr=1,es="";function ts(e,t){Wr[Gr++]=Qr,Wr[Gr++]=Kr,Kr=e,Qr=t}function ns(e,t,n){Xr[Jr++]=Zr,Xr[Jr++]=es,Xr[Jr++]=Yr,Yr=e;var r=Zr;e=es;var s=32-he(r)-1;r&=~(1<<s),n+=1;var a=32-he(t)+s;if(30<a){var i=s-s%5;a=(r&(1<<i)-1).toString(32),r>>=i,s-=i,Zr=1<<32-he(t)+s|n<<s|r,es=a+e}else Zr=1<<a|n<<s|r,es=e}function rs(e){null!==e.return&&(ts(e,1),ns(e,1,0))}function ss(e){for(;e===Kr;)Kr=Wr[--Gr],Wr[Gr]=null,Qr=Wr[--Gr],Wr[Gr]=null;for(;e===Yr;)Yr=Xr[--Jr],Xr[Jr]=null,es=Xr[--Jr],Xr[Jr]=null,Zr=Xr[--Jr],Xr[Jr]=null}var as=null,is=null,os=!1,ls=null,cs=!1,us=Error(r(519));function ds(e){throw ys(Tr(Error(r(418,"")),e)),us}function hs(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Pe]=e,t[Me]=r,n){case"dialog":Fu("cancel",t),Fu("close",t);break;case"iframe":case"object":case"embed":Fu("load",t);break;case"video":case"audio":for(n=0;n<Lu.length;n++)Fu(Lu[n],t);break;case"source":Fu("error",t);break;case"img":case"image":case"link":Fu("error",t),Fu("load",t);break;case"details":Fu("toggle",t);break;case"input":Fu("invalid",t),bt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),ft(t);break;case"select":Fu("invalid",t);break;case"textarea":Fu("invalid",t),kt(t,r.value,r.defaultValue,r.children),ft(t)}"string"!=typeof(n=r.children)&&"number"!=typeof n&&"bigint"!=typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Yu(t.textContent,n)?(null!=r.popover&&(Fu("beforetoggle",t),Fu("toggle",t)),null!=r.onScroll&&Fu("scroll",t),null!=r.onScrollEnd&&Fu("scrollend",t),null!=r.onClick&&(t.onclick=Zu),t=!0):t=!1,t||ds(e)}function fs(e){for(as=e.return;as;)switch(as.tag){case 5:case 13:return void(cs=!1);case 27:case 3:return void(cs=!0);default:as=as.return}}function ms(e){if(e!==as)return!1;if(!os)return fs(e),os=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ld(e.type,e.memoizedProps)),t=!t),t&&is&&ds(e),fs(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){is=bd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}is=null}}else 27===n?(n=is,pd(e.type)?(e=xd,xd=null,is=e):is=n):is=as?bd(e.stateNode.nextSibling):null;return!0}function ps(){is=as=null,os=!1}function gs(){var e=ls;return null!==e&&(null===wc?wc=e:wc.push.apply(wc,e),ls=null),e}function ys(e){null===ls?ls=[e]:ls.push(e)}var vs=L(null),bs=null,xs=null;function ws(e,t,n){U(vs,t._currentValue),t._currentValue=n}function Es(e){e._currentValue=vs.current,O(vs)}function ks(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ss(e,t,n,s){var a=e.child;for(null!==a&&(a.return=e);null!==a;){var i=a.dependencies;if(null!==i){var o=a.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=a;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),ks(i.return,n,e),s||(o=null);break e}i=l.next}}else if(18===a.tag){if(null===(o=a.return))throw Error(r(341));o.lanes|=n,null!==(i=o.alternate)&&(i.lanes|=n),ks(o,n,e),o=null}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===e){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}}function Ns(e,t,n,s){e=null;for(var a=t,i=!1;null!==a;){if(!i)if(524288&a.flags)i=!0;else if(262144&a.flags)break;if(10===a.tag){var o=a.alternate;if(null===o)throw Error(r(387));if(null!==(o=o.memoizedProps)){var l=a.type;Jn(a.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(a===B.current){if(null===(o=a.alternate))throw Error(r(387));o.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(null!==e?e.push(Xd):e=[Xd])}a=a.return}null!==e&&Ss(t,e,n,s),t.flags|=262144}function Ts(e){for(e=e.firstContext;null!==e;){if(!Jn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Cs(e){bs=e,xs=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Rs(e){return As(bs,e)}function js(e,t){return null===bs&&Cs(e),As(e,t)}function As(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===xs){if(null===e)throw Error(r(308));xs=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else xs=xs.next=t;return n}var _s="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},Ds=e.unstable_scheduleCallback,Is=e.unstable_NormalPriority,Ps={$$typeof:v,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ms(){return{controller:new _s,data:new Map,refCount:0}}function Ls(e){e.refCount--,0===e.refCount&&Ds(Is,(function(){e.controller.abort()}))}var Os=null,Us=0,Fs=0,zs=null;function Vs(){if(0==--Us&&null!==Os){null!==zs&&(zs.status="fulfilled");var e=Os;Os=null,Fs=0,zs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Bs=_.S;_.S=function(e,t){"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===Os){var n=Os=[];Us=0,Fs=_u(),zs={status:"pending",value:void 0,then:function(e){n.push(e)}}}Us++,t.then(Vs,Vs)}(0,t),null!==Bs&&Bs(e,t)};var qs=L(null);function $s(){var e=qs.current;return null!==e?e:ac.pooledCache}function Hs(e,t){U(qs,null===t?qs.current:t.pool)}function Ws(){var e=$s();return null===e?null:{parent:Ps._currentValue,pool:e}}var Gs=Error(r(460)),Ks=Error(r(474)),Qs=Error(r(542)),Xs={then:function(){}};function Js(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Ys(){}function Zs(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Ys,Ys),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw na(e=t.reason),e;default:if("string"==typeof t.status)t.then(Ys,Ys);else{if(null!==(e=ac)&&100<e.shellSuspendCounter)throw Error(r(482));(e=t).status="pending",e.then((function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}}),(function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}}))}switch(t.status){case"fulfilled":return t.value;case"rejected":throw na(e=t.reason),e}throw ea=t,Gs}}var ea=null;function ta(){if(null===ea)throw Error(r(459));var e=ea;return ea=null,e}function na(e){if(e===Gs||e===Qs)throw Error(r(483))}var ra=!1;function sa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function aa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ia(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&sc){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,t=Mr(e),Pr(e,null,n),t}return _r(e,r,t,n),Mr(e)}function la(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,je(e,n)}}function ca(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var i={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===a?s=a=i:a=a.next=i,n=n.next}while(null!==n);null===a?s=a=t:a=a.next=t}else s=a=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ua=!1;function da(){if(ua){if(null!==zs)throw zs}}function ha(e,t,n,r){ua=!1;var s=e.updateQueue;ra=!1;var a=s.firstBaseUpdate,i=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,u=l.next;l.next=null,null===i?a=u:i.next=u,i=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===o?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=l))}if(null!==a){var h=s.baseState;for(i=0,d=u=l=null,o=a;;){var f=-536870913&o.lane,m=f!==o.lane;if(m?(oc&f)===f:(r&f)===f){0!==f&&f===Fs&&(ua=!0),null!==d&&(d=d.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var p=e,g=o;f=t;var y=n;switch(g.tag){case 1:if("function"==typeof(p=g.payload)){h=p.call(y,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(f="function"==typeof(p=g.payload)?p.call(y,h,f):p))break e;h=c({},h,f);break e;case 2:ra=!0}}null!==(f=o.callback)&&(e.flags|=64,m&&(e.flags|=8192),null===(m=s.callbacks)?s.callbacks=[f]:m.push(f))}else m={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(u=d=m,l=h):d=d.next=m,i|=f;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(m=o).next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}null===d&&(l=h),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=d,null===a&&(s.shared.lanes=0),pc|=i,e.lanes=i,e.memoizedState=h}}function fa(e,t){if("function"!=typeof e)throw Error(r(191,e));e.call(t)}function ma(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)fa(n[e],t)}var pa=L(null),ga=L(0);function ya(e,t){U(ga,e=fc),U(pa,t),fc=e|t.baseLanes}function va(){U(ga,fc),U(pa,pa.current)}function ba(){fc=ga.current,O(pa),O(ga)}var xa=0,wa=null,Ea=null,ka=null,Sa=!1,Na=!1,Ta=!1,Ca=0,Ra=0,ja=null,Aa=0;function _a(){throw Error(r(321))}function Da(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Jn(e[n],t[n]))return!1;return!0}function Ia(e,t,n,r,s,a){return xa=a,wa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_.H=null===e||null===e.memoizedState?Gi:Ki,Ta=!1,a=n(r,s),Ta=!1,Na&&(a=Ma(t,n,r,s)),Pa(e),a}function Pa(e){_.H=Wi;var t=null!==Ea&&null!==Ea.next;if(xa=0,ka=Ea=wa=null,Sa=!1,Ra=0,ja=null,t)throw Error(r(300));null===e||jo||null!==(e=e.dependencies)&&Ts(e)&&(jo=!0)}function Ma(e,t,n,s){wa=e;var a=0;do{if(Na&&(ja=null),Ra=0,Na=!1,25<=a)throw Error(r(301));if(a+=1,ka=Ea=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}_.H=Qi,i=t(n,s)}while(Na);return i}function La(){var e=_.H,t=e.useState()[0];return t="function"==typeof t.then?Ba(t):t,e=e.useState()[0],(null!==Ea?Ea.memoizedState:null)!==e&&(wa.flags|=1024),t}function Oa(){var e=0!==Ca;return Ca=0,e}function Ua(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Fa(e){if(Sa){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Sa=!1}xa=0,ka=Ea=wa=null,Na=!1,Ra=Ca=0,ja=null}function za(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ka?wa.memoizedState=ka=e:ka=ka.next=e,ka}function Va(){if(null===Ea){var e=wa.alternate;e=null!==e?e.memoizedState:null}else e=Ea.next;var t=null===ka?wa.memoizedState:ka.next;if(null!==t)ka=t,Ea=e;else{if(null===e){if(null===wa.alternate)throw Error(r(467));throw Error(r(310))}e={memoizedState:(Ea=e).memoizedState,baseState:Ea.baseState,baseQueue:Ea.baseQueue,queue:Ea.queue,next:null},null===ka?wa.memoizedState=ka=e:ka=ka.next=e}return ka}function Ba(e){var t=Ra;return Ra+=1,null===ja&&(ja=[]),e=Zs(ja,e,t),t=wa,null===(null===ka?t.memoizedState:ka.next)&&(t=t.alternate,_.H=null===t||null===t.memoizedState?Gi:Ki),e}function qa(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return Ba(e);if(e.$$typeof===v)return Rs(e)}throw Error(r(438,String(e)))}function $a(e){var t=null,n=wa.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=wa.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map((function(e){return e.slice()})),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},wa.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=N;return t.index++,n}function Ha(e,t){return"function"==typeof t?t(e):t}function Wa(e){return Ga(Va(),Ea,e)}function Ga(e,t,n){var s=e.queue;if(null===s)throw Error(r(311));s.lastRenderedReducer=n;var a=e.baseQueue,i=s.pending;if(null!==i){if(null!==a){var o=a.next;a.next=i.next,i.next=o}t.baseQueue=a=i,s.pending=null}if(i=e.baseState,null===a)e.memoizedState=i;else{var l=o=null,c=null,u=t=a.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(oc&h)===h:(xa&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Fs&&(d=!0);else{if((xa&f)===f){u=u.next,f===Fs&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=i):c=c.next=h,wa.lanes|=f,pc|=f}h=u.action,Ta&&n(i,h),i=u.hasEagerState?u.eagerState:n(i,h)}else f={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,o=i):c=c.next=f,wa.lanes|=h,pc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=i:c.next=l,!Jn(i,e.memoizedState)&&(jo=!0,d&&null!==(n=zs)))throw n;e.memoizedState=i,e.baseState=o,e.baseQueue=c,s.lastRenderedState=i}return null===a&&(s.lanes=0),[e.memoizedState,s.dispatch]}function Ka(e){var t=Va(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var s=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var o=a=a.next;do{i=e(i,o.action),o=o.next}while(o!==a);Jn(i,t.memoizedState)||(jo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,s]}function Qa(e,t,n){var s=wa,a=Va(),i=os;if(i){if(void 0===n)throw Error(r(407));n=n()}else n=t();var o=!Jn((Ea||a).memoizedState,n);if(o&&(a.memoizedState=n,jo=!0),a=a.queue,vi(2048,8,Ya.bind(null,s,a,e),[e]),a.getSnapshot!==t||o||null!==ka&&1&ka.memoizedState.tag){if(s.flags|=2048,pi(9,{destroy:void 0,resource:void 0},Ja.bind(null,s,a,n,t),null),null===ac)throw Error(r(349));i||124&xa||Xa(s,t,n)}return n}function Xa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=wa.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},wa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ja(e,t,n,r){t.value=n,t.getSnapshot=r,Za(t)&&ei(e)}function Ya(e,t,n){return n((function(){Za(t)&&ei(e)}))}function Za(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Jn(e,n)}catch(r){return!0}}function ei(e){var t=Ir(e,2);null!==t&&Uc(t,e,2)}function ti(e){var t=za();if("function"==typeof e){var n=e;if(e=n(),Ta){de(!0);try{n()}finally{de(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:e},t}function ni(e,t,n,r){return e.baseState=n,Ga(e,Ea,"function"==typeof r?r:Ha)}function ri(e,t,n,s,a){if(qi(e))throw Error(r(485));if(null!==(e=t.action)){var i={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==_.T?n(!0):i.isTransition=!1,s(i),null===(n=t.pending)?(i.next=t.pending=i,si(t,i)):(i.next=n.next,t.pending=n.next=i)}}function si(e,t){var n=t.action,r=t.payload,s=e.state;if(t.isTransition){var a=_.T,i={};_.T=i;try{var o=n(s,r),l=_.S;null!==l&&l(i,o),ai(e,t,o)}catch(c){oi(e,t,c)}finally{_.T=a}}else try{ai(e,t,a=n(s,r))}catch(u){oi(e,t,u)}}function ai(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then((function(n){ii(e,t,n)}),(function(n){return oi(e,t,n)})):ii(e,t,n)}function ii(e,t,n){t.status="fulfilled",t.value=n,li(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,si(e,n)))}function oi(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,li(t),t=t.next}while(t!==r)}e.action=null}function li(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ci(e,t){return t}function ui(e,t){if(os){var n=ac.formState;if(null!==n){e:{var r=wa;if(os){if(is){t:{for(var s=is,a=cs;8!==s.nodeType;){if(!a){s=null;break t}if(null===(s=bd(s.nextSibling))){s=null;break t}}s="F!"===(a=s.data)||"F"===a?s:null}if(s){is=bd(s.nextSibling),r="F!"===s.data;break e}}ds(r)}r=!1}r&&(t=n[0])}}return(n=za()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:t},n.queue=r,n=zi.bind(null,wa,r),r.dispatch=n,r=ti(!1),a=Bi.bind(null,wa,!1,r.queue),s={state:t,dispatch:null,action:e,pending:null},(r=za()).queue=s,n=ri.bind(null,wa,s,a,n),s.dispatch=n,r.memoizedState=e,[t,n,!1]}function di(e){return hi(Va(),Ea,e)}function hi(e,t,n){if(t=Ga(e,t,ci)[0],e=Wa(Ha)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var r=Ba(t)}catch(KR){if(KR===Gs)throw Qs;throw KR}else r=t;var s=(t=Va()).queue,a=s.dispatch;return n!==t.memoizedState&&(wa.flags|=2048,pi(9,{destroy:void 0,resource:void 0},fi.bind(null,s,n),null)),[r,a,e]}function fi(e,t){e.action=t}function mi(e){var t=Va(),n=Ea;if(null!==n)return hi(t,n,e);Va(),t=t.memoizedState;var r=(n=Va()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function pi(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=wa.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},wa.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function gi(){return Va().memoizedState}function yi(e,t,n,r){var s=za();r=void 0===r?null:r,wa.flags|=e,s.memoizedState=pi(1|t,{destroy:void 0,resource:void 0},n,r)}function vi(e,t,n,r){var s=Va();r=void 0===r?null:r;var a=s.memoizedState.inst;null!==Ea&&null!==r&&Da(r,Ea.memoizedState.deps)?s.memoizedState=pi(t,a,n,r):(wa.flags|=e,s.memoizedState=pi(1|t,a,n,r))}function bi(e,t){yi(8390656,8,e,t)}function xi(e,t){vi(2048,8,e,t)}function wi(e,t){return vi(4,2,e,t)}function Ei(e,t){return vi(4,4,e,t)}function ki(e,t){if("function"==typeof t){e=e();var n=t(e);return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function Si(e,t,n){n=null!=n?n.concat([e]):null,vi(4,4,ki.bind(null,t,e),n)}function Ni(){}function Ti(e,t){var n=Va();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Da(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ci(e,t){var n=Va();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Da(t,r[1]))return r[0];if(r=e(),Ta){de(!0);try{e()}finally{de(!1)}}return n.memoizedState=[r,t],r}function Ri(e,t,n){return void 0===n||1073741824&xa?e.memoizedState=t:(e.memoizedState=n,e=Oc(),wa.lanes|=e,pc|=e,n)}function ji(e,t,n,r){return Jn(n,t)?n:null!==pa.current?(e=Ri(e,n,r),Jn(e,t)||(jo=!0),e):42&xa?(e=Oc(),wa.lanes|=e,pc|=e,t):(jo=!0,e.memoizedState=n)}function Ai(e,t,n,r,s){var a=D.p;D.p=0!==a&&8>a?a:8;var i,o,l,c=_.T,u={};_.T=u,Bi(e,!1,t,n);try{var d=s(),h=_.S;if(null!==h&&h(u,d),null!==d&&"object"==typeof d&&"function"==typeof d.then)Vi(e,t,(i=r,o=[],l={status:"pending",value:null,reason:null,then:function(e){o.push(e)}},d.then((function(){l.status="fulfilled",l.value=i;for(var e=0;e<o.length;e++)(0,o[e])(i)}),(function(e){for(l.status="rejected",l.reason=e,e=0;e<o.length;e++)(0,o[e])(void 0)})),l),Lc());else Vi(e,t,r,Lc())}catch(f){Vi(e,t,{then:function(){},status:"rejected",reason:f},Lc())}finally{D.p=a,_.T=c}}function _i(){}function Di(e,t,n,s){if(5!==e.tag)throw Error(r(476));var a=Ii(e).queue;Ai(e,a,t,I,null===n?_i:function(){return Pi(e),n(s)})}function Ii(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:I,baseState:I,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:I},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Pi(e){Vi(e,Ii(e).next.queue,{},Lc())}function Mi(){return Rs(Xd)}function Li(){return Va().memoizedState}function Oi(){return Va().memoizedState}function Ui(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Lc(),r=oa(t,e=ia(n),n);return null!==r&&(Uc(r,t,n),la(r,t,n)),t={cache:Ms()},void(e.payload=t)}t=t.return}}function Fi(e,t,n){var r=Lc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},qi(e)?$i(t,n):null!==(n=Dr(e,t,n,r))&&(Uc(n,e,r),Hi(n,t,r))}function zi(e,t,n){Vi(e,t,n,Lc())}function Vi(e,t,n,r){var s={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(qi(e))$i(t,s);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=a(i,n);if(s.hasEagerState=!0,s.eagerState=o,Jn(o,i))return _r(e,t,s,0),null===ac&&Ar(),!1}catch(l){}if(null!==(n=Dr(e,t,s,r)))return Uc(n,e,r),Hi(n,t,r),!0}return!1}function Bi(e,t,n,s){if(s={lane:2,revertLane:_u(),action:s,hasEagerState:!1,eagerState:null,next:null},qi(e)){if(t)throw Error(r(479))}else null!==(t=Dr(e,n,s,2))&&Uc(t,e,2)}function qi(e){var t=e.alternate;return e===wa||null!==t&&t===wa}function $i(e,t){Na=Sa=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Hi(e,t,n){if(4194048&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,je(e,n)}}var Wi={readContext:Rs,use:qa,useCallback:_a,useContext:_a,useEffect:_a,useImperativeHandle:_a,useLayoutEffect:_a,useInsertionEffect:_a,useMemo:_a,useReducer:_a,useRef:_a,useState:_a,useDebugValue:_a,useDeferredValue:_a,useTransition:_a,useSyncExternalStore:_a,useId:_a,useHostTransitionStatus:_a,useFormState:_a,useActionState:_a,useOptimistic:_a,useMemoCache:_a,useCacheRefresh:_a},Gi={readContext:Rs,use:qa,useCallback:function(e,t){return za().memoizedState=[e,void 0===t?null:t],e},useContext:Rs,useEffect:bi,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,yi(4194308,4,ki.bind(null,t,e),n)},useLayoutEffect:function(e,t){return yi(4194308,4,e,t)},useInsertionEffect:function(e,t){yi(4,2,e,t)},useMemo:function(e,t){var n=za();t=void 0===t?null:t;var r=e();if(Ta){de(!0);try{e()}finally{de(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=za();if(void 0!==n){var s=n(t);if(Ta){de(!0);try{n(t)}finally{de(!1)}}}else s=t;return r.memoizedState=r.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},r.queue=e,e=e.dispatch=Fi.bind(null,wa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},za().memoizedState=e},useState:function(e){var t=(e=ti(e)).queue,n=zi.bind(null,wa,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ni,useDeferredValue:function(e,t){return Ri(za(),e,t)},useTransition:function(){var e=ti(!1);return e=Ai.bind(null,wa,e.queue,!0,!1),za().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var s=wa,a=za();if(os){if(void 0===n)throw Error(r(407));n=n()}else{if(n=t(),null===ac)throw Error(r(349));124&oc||Xa(s,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,bi(Ya.bind(null,s,i,e),[e]),s.flags|=2048,pi(9,{destroy:void 0,resource:void 0},Ja.bind(null,s,i,n,t),null),n},useId:function(){var e=za(),t=ac.identifierPrefix;if(os){var n=es;t="«"+t+"R"+(n=(Zr&~(1<<32-he(Zr)-1)).toString(32)+n),0<(n=Ca++)&&(t+="H"+n.toString(32)),t+="»"}else t="«"+t+"r"+(n=Aa++).toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:Mi,useFormState:ui,useActionState:ui,useOptimistic:function(e){var t=za();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Bi.bind(null,wa,!0,n),n.dispatch=t,[e,t]},useMemoCache:$a,useCacheRefresh:function(){return za().memoizedState=Ui.bind(null,wa)}},Ki={readContext:Rs,use:qa,useCallback:Ti,useContext:Rs,useEffect:xi,useImperativeHandle:Si,useInsertionEffect:wi,useLayoutEffect:Ei,useMemo:Ci,useReducer:Wa,useRef:gi,useState:function(){return Wa(Ha)},useDebugValue:Ni,useDeferredValue:function(e,t){return ji(Va(),Ea.memoizedState,e,t)},useTransition:function(){var e=Wa(Ha)[0],t=Va().memoizedState;return["boolean"==typeof e?e:Ba(e),t]},useSyncExternalStore:Qa,useId:Li,useHostTransitionStatus:Mi,useFormState:di,useActionState:di,useOptimistic:function(e,t){return ni(Va(),0,e,t)},useMemoCache:$a,useCacheRefresh:Oi},Qi={readContext:Rs,use:qa,useCallback:Ti,useContext:Rs,useEffect:xi,useImperativeHandle:Si,useInsertionEffect:wi,useLayoutEffect:Ei,useMemo:Ci,useReducer:Ka,useRef:gi,useState:function(){return Ka(Ha)},useDebugValue:Ni,useDeferredValue:function(e,t){var n=Va();return null===Ea?Ri(n,e,t):ji(n,Ea.memoizedState,e,t)},useTransition:function(){var e=Ka(Ha)[0],t=Va().memoizedState;return["boolean"==typeof e?e:Ba(e),t]},useSyncExternalStore:Qa,useId:Li,useHostTransitionStatus:Mi,useFormState:mi,useActionState:mi,useOptimistic:function(e,t){var n=Va();return null!==Ea?ni(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:$a,useCacheRefresh:Oi},Xi=null,Ji=0;function Yi(e){var t=Ji;return Ji+=1,null===Xi&&(Xi=[]),Zs(Xi,e,t)}function Zi(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function eo(e,t){if(t.$$typeof===u)throw Error(r(525));throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function to(e){return(0,e._init)(e._payload)}function no(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function s(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(e,t){return(e=zr(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=$r(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===f?m(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===k&&to(s)===t.type)?(Zi(t=a(t,n.props),n),t.return=e,t):(Zi(t=Br(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Hr(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function m(e,t,n,r,s){return null===t||7!==t.tag?((t=qr(n,e.mode,r,s)).return=e,t):((t=a(t,n)).return=e,t)}function p(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=$r(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case d:return Zi(n=Br(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case h:return(t=Hr(t,e.mode,n)).return=e,t;case k:return p(e,t=(0,t._init)(t._payload),n)}if(A(t)||C(t))return(t=qr(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return p(e,Yi(t),n);if(t.$$typeof===v)return p(e,js(e,t),n);eo(e,t)}return null}function g(e,t,n,r){var s=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==s?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case d:return n.key===s?c(e,t,n,r):null;case h:return n.key===s?u(e,t,n,r):null;case k:return g(e,t,n=(s=n._init)(n._payload),r)}if(A(n)||C(n))return null!==s?null:m(e,t,n,r,null);if("function"==typeof n.then)return g(e,t,Yi(n),r);if(n.$$typeof===v)return g(e,t,js(e,n),r);eo(e,n)}return null}function y(e,t,n,r,s){if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"==typeof r&&null!==r){switch(r.$$typeof){case d:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case h:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case k:return y(e,t,n,r=(0,r._init)(r._payload),s)}if(A(r)||C(r))return m(t,e=e.get(n)||null,r,s,null);if("function"==typeof r.then)return y(e,t,n,Yi(r),s);if(r.$$typeof===v)return y(e,t,n,js(t,r),s);eo(t,r)}return null}function b(l,c,u,m){if("object"==typeof u&&null!==u&&u.type===f&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case d:e:{for(var x=u.key;null!==c;){if(c.key===x){if((x=u.type)===f){if(7===c.tag){n(l,c.sibling),(m=a(c,u.props.children)).return=l,l=m;break e}}else if(c.elementType===x||"object"==typeof x&&null!==x&&x.$$typeof===k&&to(x)===c.type){n(l,c.sibling),Zi(m=a(c,u.props),u),m.return=l,l=m;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===f?((m=qr(u.props.children,l.mode,m,u.key)).return=l,l=m):(Zi(m=Br(u.type,u.key,u.props,null,l.mode,m),u),m.return=l,l=m)}return o(l);case h:e:{for(x=u.key;null!==c;){if(c.key===x){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(m=a(c,u.children||[])).return=l,l=m;break e}n(l,c);break}t(l,c),c=c.sibling}(m=Hr(u,l.mode,m)).return=l,l=m}return o(l);case k:return b(l,c,u=(x=u._init)(u._payload),m)}if(A(u))return function(r,a,o,l){for(var c=null,u=null,d=a,h=a=0,f=null;null!==d&&h<o.length;h++){d.index>h?(f=d,d=null):f=d.sibling;var m=g(r,d,o[h],l);if(null===m){null===d&&(d=f);break}e&&d&&null===m.alternate&&t(r,d),a=i(m,a,h),null===u?c=m:u.sibling=m,u=m,d=f}if(h===o.length)return n(r,d),os&&ts(r,h),c;if(null===d){for(;h<o.length;h++)null!==(d=p(r,o[h],l))&&(a=i(d,a,h),null===u?c=d:u.sibling=d,u=d);return os&&ts(r,h),c}for(d=s(d);h<o.length;h++)null!==(f=y(d,r,h,o[h],l))&&(e&&null!==f.alternate&&d.delete(null===f.key?h:f.key),a=i(f,a,h),null===u?c=f:u.sibling=f,u=f);return e&&d.forEach((function(e){return t(r,e)})),os&&ts(r,h),c}(l,c,u,m);if(C(u)){if("function"!=typeof(x=C(u)))throw Error(r(150));return function(a,o,l,c){if(null==l)throw Error(r(151));for(var u=null,d=null,h=o,f=o=0,m=null,v=l.next();null!==h&&!v.done;f++,v=l.next()){h.index>f?(m=h,h=null):m=h.sibling;var b=g(a,h,v.value,c);if(null===b){null===h&&(h=m);break}e&&h&&null===b.alternate&&t(a,h),o=i(b,o,f),null===d?u=b:d.sibling=b,d=b,h=m}if(v.done)return n(a,h),os&&ts(a,f),u;if(null===h){for(;!v.done;f++,v=l.next())null!==(v=p(a,v.value,c))&&(o=i(v,o,f),null===d?u=v:d.sibling=v,d=v);return os&&ts(a,f),u}for(h=s(h);!v.done;f++,v=l.next())null!==(v=y(h,a,f,v.value,c))&&(e&&null!==v.alternate&&h.delete(null===v.key?f:v.key),o=i(v,o,f),null===d?u=v:d.sibling=v,d=v);return e&&h.forEach((function(e){return t(a,e)})),os&&ts(a,f),u}(l,c,u=x.call(u),m)}if("function"==typeof u.then)return b(l,c,Yi(u),m);if(u.$$typeof===v)return b(l,c,js(l,u),m);eo(l,u)}return"string"==typeof u&&""!==u||"number"==typeof u||"bigint"==typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(m=a(c,u)).return=l,l=m):(n(l,c),(m=$r(u,l.mode,m)).return=l,l=m),o(l)):n(l,c)}return function(e,t,n,r){try{Ji=0;var s=b(e,t,n,r);return Xi=null,s}catch(KR){if(KR===Gs||KR===Qs)throw KR;var a=Ur(29,KR,null,e.mode);return a.lanes=r,a.return=e,a}}}var ro=no(!0),so=no(!1),ao=L(null),io=null;function oo(e){var t=e.alternate;U(ho,1&ho.current),U(ao,e),null===io&&(null===t||null!==pa.current||null!==t.memoizedState)&&(io=e)}function lo(e){if(22===e.tag){if(U(ho,ho.current),U(ao,e),null===io){var t=e.alternate;null!==t&&null!==t.memoizedState&&(io=e)}}else co()}function co(){U(ho,ho.current),U(ao,ao.current)}function uo(e){O(ao),io===e&&(io=null),O(ho)}var ho=L(0);function fo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||vd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function mo(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:c({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var po={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Lc(),s=ia(r);s.payload=t,null!=n&&(s.callback=n),null!==(t=oa(e,s,r))&&(Uc(t,e,r),la(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Lc(),s=ia(r);s.tag=1,s.payload=t,null!=n&&(s.callback=n),null!==(t=oa(e,s,r))&&(Uc(t,e,r),la(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Lc(),r=ia(n);r.tag=2,null!=t&&(r.callback=t),null!==(t=oa(e,r,n))&&(Uc(t,e,n),la(t,e,n))}};function go(e,t,n,r,s,a,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!Yn(n,r)||!Yn(s,a))}function yo(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&po.enqueueReplaceState(t,t.state,null)}function vo(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var s in n===t&&(n=c({},n)),e)void 0===n[s]&&(n[s]=e[s]);return n}var bo="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function xo(e){bo(e)}function wo(e){console.error(e)}function Eo(e){bo(e)}function ko(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout((function(){throw n}))}}function So(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout((function(){throw r}))}}function No(e,t,n){return(n=ia(n)).tag=3,n.payload={element:null},n.callback=function(){ko(e,t)},n}function To(e){return(e=ia(e)).tag=3,e}function Co(e,t,n,r){var s=n.type.getDerivedStateFromError;if("function"==typeof s){var a=r.value;e.payload=function(){return s(a)},e.callback=function(){So(t,n,r)}}var i=n.stateNode;null!==i&&"function"==typeof i.componentDidCatch&&(e.callback=function(){So(t,n,r),"function"!=typeof s&&(null===Tc?Tc=new Set([this]):Tc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ro=Error(r(461)),jo=!1;function Ao(e,t,n,r){t.child=null===e?so(t,null,n,r):ro(t,e.child,n,r)}function _o(e,t,n,r,s){n=n.render;var a=t.ref;if("ref"in r){var i={};for(var o in r)"ref"!==o&&(i[o]=r[o])}else i=r;return Cs(t),r=Ia(e,t,n,i,a,s),o=Oa(),null===e||jo?(os&&o&&rs(t),t.flags|=1,Ao(e,t,r,s),t.child):(Ua(e,t,s),Jo(e,t,s))}function Do(e,t,n,r,s){if(null===e){var a=n.type;return"function"!=typeof a||Fr(a)||void 0!==a.defaultProps||null!==n.compare?((e=Br(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Io(e,t,a,r,s))}if(a=e.child,!Yo(e,s)){var i=a.memoizedProps;if((n=null!==(n=n.compare)?n:Yn)(i,r)&&e.ref===t.ref)return Jo(e,t,s)}return t.flags|=1,(e=zr(a,r)).ref=t.ref,e.return=t,t.child=e}function Io(e,t,n,r,s){if(null!==e){var a=e.memoizedProps;if(Yn(a,r)&&e.ref===t.ref){if(jo=!1,t.pendingProps=r=a,!Yo(e,s))return t.lanes=e.lanes,Jo(e,t,s);131072&e.flags&&(jo=!0)}}return Oo(e,t,n,r,s)}function Po(e,t,n){var r=t.pendingProps,s=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(128&t.flags){if(r=null!==a?a.baseLanes|n:n,null!==e){for(s=t.child=e.child,a=0;null!==s;)a=a|s.lanes|s.childLanes,s=s.sibling;t.childLanes=a&~r}else t.childLanes=0,t.child=null;return Mo(e,t,r,n)}if(!(536870912&n))return t.lanes=t.childLanes=536870912,Mo(e,t,null!==a?a.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Hs(0,null!==a?a.cachePool:null),null!==a?ya(t,a):va(),lo(t)}else null!==a?(Hs(0,a.cachePool),ya(t,a),co(),t.memoizedState=null):(null!==e&&Hs(0,null),va(),co());return Ao(e,t,s,n),t.child}function Mo(e,t,n,r){var s=$s();return s=null===s?null:{parent:Ps._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},null!==e&&Hs(0,null),va(),lo(t),null!==e&&Ns(e,t,r,!0),null}function Lo(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(r(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Oo(e,t,n,r,s){return Cs(t),n=Ia(e,t,n,r,void 0,s),r=Oa(),null===e||jo?(os&&r&&rs(t),t.flags|=1,Ao(e,t,n,s),t.child):(Ua(e,t,s),Jo(e,t,s))}function Uo(e,t,n,r,s,a){return Cs(t),t.updateQueue=null,n=Ma(t,r,n,s),Pa(e),r=Oa(),null===e||jo?(os&&r&&rs(t),t.flags|=1,Ao(e,t,n,a),t.child):(Ua(e,t,a),Jo(e,t,a))}function Fo(e,t,n,r,s){if(Cs(t),null===t.stateNode){var a=Lr,i=n.contextType;"object"==typeof i&&null!==i&&(a=Rs(i)),a=new n(r,a),t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,a.updater=po,t.stateNode=a,a._reactInternals=t,(a=t.stateNode).props=r,a.state=t.memoizedState,a.refs={},sa(t),i=n.contextType,a.context="object"==typeof i&&null!==i?Rs(i):Lr,a.state=t.memoizedState,"function"==typeof(i=n.getDerivedStateFromProps)&&(mo(t,n,i,r),a.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(i=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),i!==a.state&&po.enqueueReplaceState(a,a.state,null),ha(t,r,a,s),da(),a.state=t.memoizedState),"function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){a=t.stateNode;var o=t.memoizedProps,l=vo(n,o);a.props=l;var c=a.context,u=n.contextType;i=Lr,"object"==typeof u&&null!==u&&(i=Rs(u));var d=n.getDerivedStateFromProps;u="function"==typeof d||"function"==typeof a.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o||c!==i)&&yo(t,a,r,i),ra=!1;var h=t.memoizedState;a.state=h,ha(t,r,a,s),da(),c=t.memoizedState,o||h!==c||ra?("function"==typeof d&&(mo(t,n,d,r),c=t.memoizedState),(l=ra||go(t,n,l,r,h,c,i))?(u||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=i,r=l):("function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,aa(e,t),u=vo(n,i=t.memoizedProps),a.props=u,d=t.pendingProps,h=a.context,c=n.contextType,l=Lr,"object"==typeof c&&null!==c&&(l=Rs(c)),(c="function"==typeof(o=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(i!==d||h!==l)&&yo(t,a,r,l),ra=!1,h=t.memoizedState,a.state=h,ha(t,r,a,s),da();var f=t.memoizedState;i!==d||h!==f||ra||null!==e&&null!==e.dependencies&&Ts(e.dependencies)?("function"==typeof o&&(mo(t,n,o,r),f=t.memoizedState),(u=ra||go(t,n,u,r,h,f,l)||null!==e&&null!==e.dependencies&&Ts(e.dependencies))?(c||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=l,r=u):("function"!=typeof a.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,Lo(e,t),r=!!(128&t.flags),a||r?(a=t.stateNode,n=r&&"function"!=typeof n.getDerivedStateFromError?null:a.render(),t.flags|=1,null!==e&&r?(t.child=ro(t,e.child,null,s),t.child=ro(t,null,n,s)):Ao(e,t,n,s),t.memoizedState=a.state,e=t.child):e=Jo(e,t,s),e}function zo(e,t,n,r){return ps(),t.flags|=256,Ao(e,t,n,r),t.child}var Vo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bo(e){return{baseLanes:e,cachePool:Ws()}}function qo(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=vc),e}function $o(e,t,n){var s,a=t.pendingProps,i=!1,o=!!(128&t.flags);if((s=o)||(s=(null===e||null!==e.memoizedState)&&!!(2&ho.current)),s&&(i=!0,t.flags&=-129),s=!!(32&t.flags),t.flags&=-33,null===e){if(os){if(i?oo(t):co(),os){var l,c=is;if(l=c){e:{for(l=c,c=cs;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=bd(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Yr?{id:Zr,overflow:es}:null,retryLane:536870912,hydrationErrors:null},(l=Ur(18,null,null,0)).stateNode=c,l.return=t,t.child=l,as=t,is=null,l=!0):l=!1}l||ds(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return vd(c)?t.lanes=32:t.lanes=536870912,null;uo(t)}return c=a.children,a=a.fallback,i?(co(),c=Wo({mode:"hidden",children:c},i=t.mode),a=qr(a,i,n,null),c.return=t,a.return=t,c.sibling=a,t.child=c,(i=t.child).memoizedState=Bo(n),i.childLanes=qo(e,s,n),t.memoizedState=Vo,a):(oo(t),Ho(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(o)256&t.flags?(oo(t),t.flags&=-257,t=Go(e,t,n)):null!==t.memoizedState?(co(),t.child=e.child,t.flags|=128,t=null):(co(),i=a.fallback,c=t.mode,a=Wo({mode:"visible",children:a.children},c),(i=qr(i,c,n,null)).flags|=2,a.return=t,i.return=t,a.sibling=i,t.child=a,ro(t,e.child,null,n),(a=t.child).memoizedState=Bo(n),a.childLanes=qo(e,s,n),t.memoizedState=Vo,t=i);else if(oo(t),vd(c)){if(s=c.nextSibling&&c.nextSibling.dataset)var u=s.dgst;s=u,(a=Error(r(419))).stack="",a.digest=s,ys({value:a,source:null,stack:null}),t=Go(e,t,n)}else if(jo||Ns(e,t,n,!1),s=!!(n&e.childLanes),jo||s){if(null!==(s=ac)&&(0!==(a=(a=42&(a=n&-n)?1:Ae(a))&(s.suspendedLanes|n)?0:a)&&a!==l.retryLane))throw l.retryLane=a,Ir(e,a),Uc(s,e,a),Ro;"$?"===c.data||Qc(),t=Go(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,is=bd(c.nextSibling),as=t,os=!0,ls=null,cs=!1,null!==e&&(Xr[Jr++]=Zr,Xr[Jr++]=es,Xr[Jr++]=Yr,Zr=e.id,es=e.overflow,Yr=t),(t=Ho(t,a.children)).flags|=4096);return t}return i?(co(),i=a.fallback,c=t.mode,u=(l=e.child).sibling,(a=zr(l,{mode:"hidden",children:a.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?i=zr(u,i):(i=qr(i,c,n,null)).flags|=2,i.return=t,a.return=t,a.sibling=i,t.child=a,a=i,i=t.child,null===(c=e.child.memoizedState)?c=Bo(n):(null!==(l=c.cachePool)?(u=Ps._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Ws(),c={baseLanes:c.baseLanes|n,cachePool:l}),i.memoizedState=c,i.childLanes=qo(e,s,n),t.memoizedState=Vo,a):(oo(t),e=(n=e.child).sibling,(n=zr(n,{mode:"visible",children:a.children})).return=t,n.sibling=null,null!==e&&(null===(s=t.deletions)?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n)}function Ho(e,t){return(t=Wo({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Wo(e,t){return(e=Ur(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Go(e,t,n){return ro(t,e.child,null,n),(e=Ho(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ko(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ks(e.return,t,n)}function Qo(e,t,n,r,s){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function Xo(e,t,n){var r=t.pendingProps,s=r.revealOrder,a=r.tail;if(Ao(e,t,r.children,n),2&(r=ho.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ko(e,n,t);else if(19===e.tag)Ko(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(U(ho,r),s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===fo(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Qo(t,!1,s,n,a);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===fo(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Qo(t,!0,n,null,a);break;case"together":Qo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Jo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),pc|=t.lanes,!(n&t.childLanes)){if(null===e)return null;if(Ns(e,t,n,!1),!(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=zr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=zr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Yo(e,t){return!!(e.lanes&t)||!(null===(e=e.dependencies)||!Ts(e))}function Zo(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)jo=!0;else{if(!(Yo(e,n)||128&t.flags))return jo=!1,function(e,t,n){switch(t.tag){case 3:q(t,t.stateNode.containerInfo),ws(0,Ps,e.memoizedState.cache),ps();break;case 27:case 5:H(t);break;case 4:q(t,t.stateNode.containerInfo);break;case 10:ws(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(oo(t),t.flags|=128,null):n&t.child.childLanes?$o(e,t,n):(oo(t),null!==(e=Jo(e,t,n))?e.sibling:null);oo(t);break;case 19:var s=!!(128&e.flags);if((r=!!(n&t.childLanes))||(Ns(e,t,n,!1),r=!!(n&t.childLanes)),s){if(r)return Xo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),U(ho,ho.current),r)break;return null;case 22:case 23:return t.lanes=0,Po(e,t,n);case 24:ws(0,Ps,e.memoizedState.cache)}return Jo(e,t,n)}(e,t,n);jo=!!(131072&e.flags)}else jo=!1,os&&1048576&t.flags&&ns(t,Qr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var s=t.elementType,a=s._init;if(s=a(s._payload),t.type=s,"function"!=typeof s){if(null!=s){if((a=s.$$typeof)===b){t.tag=11,t=_o(null,t,s,e,n);break e}if(a===E){t.tag=14,t=Do(null,t,s,e,n);break e}}throw t=j(s)||s,Error(r(306,t,""))}Fr(s)?(e=vo(s,e),t.tag=1,t=Fo(null,t,s,e,n)):(t.tag=0,t=Oo(null,t,s,e,n))}return t;case 0:return Oo(e,t,t.type,t.pendingProps,n);case 1:return Fo(e,t,s=t.type,a=vo(s,t.pendingProps),n);case 3:e:{if(q(t,t.stateNode.containerInfo),null===e)throw Error(r(387));s=t.pendingProps;var i=t.memoizedState;a=i.element,aa(e,t),ha(t,s,null,n);var o=t.memoizedState;if(s=o.cache,ws(0,Ps,s),s!==i.cache&&Ss(t,[Ps],n,!0),da(),s=o.element,i.isDehydrated){if(i={element:s,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=zo(e,t,s,n);break e}if(s!==a){ys(a=Tr(Error(r(424)),t)),t=zo(e,t,s,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(is=bd(e.firstChild),as=t,os=!0,ls=null,cs=!0,n=so(t,null,s,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),s===a){t=Jo(e,t,n);break e}Ao(e,t,s,n)}t=t.child}return t;case 26:return Lo(e,t),null===e?(n=Ad(t.type,null,t.pendingProps,null))?t.memoizedState=n:os||(n=t.type,e=t.pendingProps,(s=ad(V.current).createElement(n))[Pe]=t,s[Me]=e,nd(s,n,e),Ge(s),t.stateNode=s):t.memoizedState=Ad(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return H(t),null===e&&os&&(s=t.stateNode=Ed(t.type,t.pendingProps,V.current),as=t,cs=!0,a=is,pd(t.type)?(xd=a,is=bd(s.firstChild)):is=a),Ao(e,t,t.pendingProps.children,n),Lo(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&os&&((a=s=is)&&(s=function(e,t,n,r){for(;1===e.nodeType;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Ve])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(a=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(a!==s.rel||e.getAttribute("href")!==(null==s.href||""===s.href?null:s.href)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin)||e.getAttribute("title")!==(null==s.title?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((a=e.getAttribute("src"))!==(null==s.src?null:s.src)||e.getAttribute("type")!==(null==s.type?null:s.type)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin))&&a&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var a=null==s.name?null:""+s.name;if("hidden"===s.type&&e.getAttribute("name")===a)return e}if(null===(e=bd(e.nextSibling)))break}return null}(s,t.type,t.pendingProps,cs),null!==s?(t.stateNode=s,as=t,is=bd(s.firstChild),cs=!1,a=!0):a=!1),a||ds(t)),H(t),a=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ld(a,i)?s=null:null!==o&&ld(a,o)&&(t.flags|=32),null!==t.memoizedState&&(a=Ia(e,t,La,null,null,n),Xd._currentValue=a),Lo(e,t),Ao(e,t,s,n),t.child;case 6:return null===e&&os&&((e=n=is)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=bd(e.nextSibling)))return null}return e}(n,t.pendingProps,cs))?(t.stateNode=n,as=t,is=null,e=!0):e=!1),e||ds(t)),null;case 13:return $o(e,t,n);case 4:return q(t,t.stateNode.containerInfo),s=t.pendingProps,null===e?t.child=ro(t,null,s,n):Ao(e,t,s,n),t.child;case 11:return _o(e,t,t.type,t.pendingProps,n);case 7:return Ao(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ao(e,t,t.pendingProps.children,n),t.child;case 10:return s=t.pendingProps,ws(0,t.type,s.value),Ao(e,t,s.children,n),t.child;case 9:return a=t.type._context,s=t.pendingProps.children,Cs(t),s=s(a=Rs(a)),t.flags|=1,Ao(e,t,s,n),t.child;case 14:return Do(e,t,t.type,t.pendingProps,n);case 15:return Io(e,t,t.type,t.pendingProps,n);case 19:return Xo(e,t,n);case 31:return s=t.pendingProps,n=t.mode,s={mode:s.mode,children:s.children},null===e?((n=Wo(s,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=zr(e.child,s)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Po(e,t,n);case 24:return Cs(t),s=Rs(Ps),null===e?(null===(a=$s())&&(a=ac,i=Ms(),a.pooledCache=i,i.refCount++,null!==i&&(a.pooledCacheLanes|=n),a=i),t.memoizedState={parent:s,cache:a},sa(t),ws(0,Ps,a)):(!!(e.lanes&n)&&(aa(e,t),ha(t,null,null,n),da()),a=e.memoizedState,i=t.memoizedState,a.parent!==s?(a={parent:s,cache:s},t.memoizedState=a,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=a),ws(0,Ps,s)):(s=i.cache,ws(0,Ps,s),s!==a.cache&&Ss(t,[Ps],n,!0))),Ao(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function el(e){e.flags|=4}function tl(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!qd(t)){if(null!==(t=ao.current)&&((4194048&oc)===oc?null!==io:(62914560&oc)!==oc&&!(536870912&oc)||t!==io))throw ea=Xs,Ks;e.flags|=8192}}function nl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ne():536870912,e.lanes|=t,bc|=t)}function rl(e,t){if(!os)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function sl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=65011712&s.subtreeFlags,r|=65011712&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function al(e,t,n){var s=t.pendingProps;switch(ss(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return sl(t),null;case 3:return n=t.stateNode,s=null,null!==e&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Es(Ps),$(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ms(t)?el(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,gs())),sl(t),null;case 26:return n=t.memoizedState,null===e?(el(t),null!==n?(sl(t),tl(t,n)):(sl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(el(t),sl(t),tl(t,n)):(sl(t),t.flags&=-16777217):(e.memoizedProps!==s&&el(t),sl(t),t.flags&=-16777217),null;case 27:W(t),n=V.current;var a=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==s&&el(t);else{if(!s){if(null===t.stateNode)throw Error(r(166));return sl(t),null}e=F.current,ms(t)?hs(t):(e=Ed(a,s,n),t.stateNode=e,el(t))}return sl(t),null;case 5:if(W(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==s&&el(t);else{if(!s){if(null===t.stateNode)throw Error(r(166));return sl(t),null}if(e=F.current,ms(t))hs(t);else{switch(a=ad(V.current),e){case 1:e=a.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=a.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=a.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=a.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"==typeof s.is?a.createElement("select",{is:s.is}):a.createElement("select"),s.multiple?e.multiple=!0:s.size&&(e.size=s.size);break;default:e="string"==typeof s.is?a.createElement(n,{is:s.is}):a.createElement(n)}}e[Pe]=t,e[Me]=s;e:for(a=t.child;null!==a;){if(5===a.tag||6===a.tag)e.appendChild(a.stateNode);else if(4!==a.tag&&27!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;null===a.sibling;){if(null===a.return||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=e;e:switch(nd(e,n,s),n){case"button":case"input":case"select":case"textarea":e=!!s.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&el(t)}}return sl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==s&&el(t);else{if("string"!=typeof s&&null===t.stateNode)throw Error(r(166));if(e=V.current,ms(t)){if(e=t.stateNode,n=t.memoizedProps,s=null,null!==(a=as))switch(a.tag){case 27:case 5:s=a.memoizedProps}e[Pe]=t,(e=!!(e.nodeValue===n||null!==s&&!0===s.suppressHydrationWarning||Yu(e.nodeValue,n)))||ds(t)}else(e=ad(e).createTextNode(s))[Pe]=t,t.stateNode=e}return sl(t),null;case 13:if(s=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(a=ms(t),null!==s&&null!==s.dehydrated){if(null===e){if(!a)throw Error(r(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(r(317));a[Pe]=t}else ps(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;sl(t),a=!1}else a=gs(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return 256&t.flags?(uo(t),t):(uo(t),null)}if(uo(t),128&t.flags)return t.lanes=n,t;if(n=null!==s,e=null!==e&&null!==e.memoizedState,n){a=null,null!==(s=t.child).alternate&&null!==s.alternate.memoizedState&&null!==s.alternate.memoizedState.cachePool&&(a=s.alternate.memoizedState.cachePool.pool);var i=null;null!==s.memoizedState&&null!==s.memoizedState.cachePool&&(i=s.memoizedState.cachePool.pool),i!==a&&(s.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),nl(t,t.updateQueue),sl(t),null;case 4:return $(),null===e&&Bu(t.stateNode.containerInfo),sl(t),null;case 10:return Es(t.type),sl(t),null;case 19:if(O(ho),null===(a=t.memoizedState))return sl(t),null;if(s=!!(128&t.flags),null===(i=a.rendering))if(s)rl(a,!1);else{if(0!==mc||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(i=fo(e))){for(t.flags|=128,rl(a,!1),e=i.updateQueue,t.updateQueue=e,nl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Vr(n,e),n=n.sibling;return U(ho,1&ho.current|2),t.child}e=e.sibling}null!==a.tail&&ee()>Sc&&(t.flags|=128,s=!0,rl(a,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=fo(i))){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,nl(t,e),rl(a,!0),null===a.tail&&"hidden"===a.tailMode&&!i.alternate&&!os)return sl(t),null}else 2*ee()-a.renderingStartTime>Sc&&536870912!==n&&(t.flags|=128,s=!0,rl(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=a.last)?e.sibling=i:t.child=i,a.last=i)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=ee(),t.sibling=null,e=ho.current,U(ho,s?1&e|2:1&e),t):(sl(t),null);case 22:case 23:return uo(t),ba(),s=null!==t.memoizedState,null!==e?null!==e.memoizedState!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?!!(536870912&n)&&!(128&t.flags)&&(sl(t),6&t.subtreeFlags&&(t.flags|=8192)):sl(t),null!==(n=t.updateQueue)&&nl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),s=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(s=t.memoizedState.cachePool.pool),s!==n&&(t.flags|=2048),null!==e&&O(qs),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Es(Ps),sl(t),null;case 25:case 30:return null}throw Error(r(156,t.tag))}function il(e,t){switch(ss(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Es(Ps),$(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return W(t),null;case 13:if(uo(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return O(ho),null;case 4:return $(),null;case 10:return Es(t.type),null;case 22:case 23:return uo(t),ba(),null!==e&&O(qs),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Es(Ps),null;default:return null}}function ol(e,t){switch(ss(t),t.tag){case 3:Es(Ps),$();break;case 26:case 27:case 5:W(t);break;case 4:$();break;case 13:uo(t);break;case 19:O(ho);break;case 10:Es(t.type);break;case 22:case 23:uo(t),ba(),null!==e&&O(qs);break;case 24:Es(Ps)}}function ll(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var s=r.next;n=s;do{if((n.tag&e)===e){r=void 0;var a=n.create,i=n.inst;r=a(),i.destroy=r}n=n.next}while(n!==s)}}catch(o){hu(t,t.return,o)}}function cl(e,t,n){try{var r=t.updateQueue,s=null!==r?r.lastEffect:null;if(null!==s){var a=s.next;r=a;do{if((r.tag&e)===e){var i=r.inst,o=i.destroy;if(void 0!==o){i.destroy=void 0,s=t;var l=n,c=o;try{c()}catch(u){hu(s,l,u)}}}r=r.next}while(r!==a)}}catch(u){hu(t,t.return,u)}}function ul(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{ma(t,n)}catch(r){hu(e,e.return,r)}}}function dl(e,t,n){n.props=vo(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){hu(e,t,r)}}function hl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"==typeof n?e.refCleanup=n(r):n.current=r}}catch(s){hu(e,t,s)}}function fl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"==typeof r)try{r()}catch(s){hu(e,t,s)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(a){hu(e,t,a)}else n.current=null}function ml(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(s){hu(e,e.return,s)}}function pl(e,t,n){try{var s=e.stateNode;!function(e,t,n,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,i=null,o=null,l=null,c=null,u=null,d=null;for(m in n){var h=n[m];if(n.hasOwnProperty(m)&&null!=h)switch(m){case"checked":case"value":break;case"defaultValue":c=h;default:s.hasOwnProperty(m)||ed(e,t,m,null,s,h)}}for(var f in s){var m=s[f];if(h=n[f],s.hasOwnProperty(f)&&(null!=m||null!=h))switch(f){case"type":i=m;break;case"name":a=m;break;case"checked":u=m;break;case"defaultChecked":d=m;break;case"value":o=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(r(137,t));break;default:m!==h&&ed(e,t,f,m,s,h)}}return void vt(e,o,l,c,u,d,i,a);case"select":for(i in m=o=l=f=null,n)if(c=n[i],n.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":m=c;default:s.hasOwnProperty(i)||ed(e,t,i,null,s,c)}for(a in s)if(i=s[a],c=n[a],s.hasOwnProperty(a)&&(null!=i||null!=c))switch(a){case"value":f=i;break;case"defaultValue":l=i;break;case"multiple":o=i;default:i!==c&&ed(e,t,a,i,s,c)}return t=l,n=o,s=m,void(null!=f?wt(e,!!n,f,!1):!!s!=!!n&&(null!=t?wt(e,!!n,t,!0):wt(e,!!n,n?[]:"",!1)));case"textarea":for(l in m=f=null,n)if(a=n[l],n.hasOwnProperty(l)&&null!=a&&!s.hasOwnProperty(l))switch(l){case"value":case"children":break;default:ed(e,t,l,null,s,a)}for(o in s)if(a=s[o],i=n[o],s.hasOwnProperty(o)&&(null!=a||null!=i))switch(o){case"value":f=a;break;case"defaultValue":m=a;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=a)throw Error(r(91));break;default:a!==i&&ed(e,t,o,a,s,i)}return void Et(e,f,m);case"option":for(var p in n)if(f=n[p],n.hasOwnProperty(p)&&null!=f&&!s.hasOwnProperty(p))if("selected"===p)e.selected=!1;else ed(e,t,p,null,s,f);for(c in s)if(f=s[c],m=n[c],s.hasOwnProperty(c)&&f!==m&&(null!=f||null!=m))if("selected"===c)e.selected=f&&"function"!=typeof f&&"symbol"!=typeof f;else ed(e,t,c,f,s,m);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!s.hasOwnProperty(g)&&ed(e,t,g,null,s,f);for(u in s)if(f=s[u],m=n[u],s.hasOwnProperty(u)&&f!==m&&(null!=f||null!=m))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(r(137,t));break;default:ed(e,t,u,f,s,m)}return;default:if(Rt(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!s.hasOwnProperty(y)&&td(e,t,y,void 0,s,f);for(d in s)f=s[d],m=n[d],!s.hasOwnProperty(d)||f===m||void 0===f&&void 0===m||td(e,t,d,f,s,m);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!s.hasOwnProperty(v)&&ed(e,t,v,null,s,f);for(h in s)f=s[h],m=n[h],!s.hasOwnProperty(h)||f===m||null==f&&null==m||ed(e,t,h,f,s,m)}(s,e.type,n,t),s[Me]=t}catch(a){hu(e,e.return,a)}}function gl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&pd(e.type)||4===e.tag}function yl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||gl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&pd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function vl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Zu));else if(4!==r&&(27===r&&pd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(vl(e,t,n),e=e.sibling;null!==e;)vl(e,t,n),e=e.sibling}function bl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&pd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(bl(e,t,n),e=e.sibling;null!==e;)bl(e,t,n),e=e.sibling}function xl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);nd(t,r,n),t[Pe]=e,t[Me]=n}catch(a){hu(e,e.return,a)}}var wl=!1,El=!1,kl=!1,Sl="function"==typeof WeakSet?WeakSet:Set,Nl=null;function Tl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Fl(e,n),4&r&&ll(5,n);break;case 1:if(Fl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(i){hu(n,n.return,i)}else{var s=vo(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){hu(n,n.return,o)}}64&r&&ul(n),512&r&&hl(n,n.return);break;case 3:if(Fl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{ma(e,t)}catch(i){hu(n,n.return,i)}}break;case 27:null===t&&4&r&&xl(n);case 26:case 5:Fl(e,n),null===t&&4&r&&ml(n),512&r&&hl(n,n.return);break;case 12:Fl(e,n);break;case 13:Fl(e,n),4&r&&Dl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=gu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||wl)){t=null!==t&&null!==t.memoizedState||El,s=wl;var a=El;wl=r,(El=t)&&!a?Vl(e,n,!!(8772&n.subtreeFlags)):Fl(e,n),wl=s,El=a}break;case 30:break;default:Fl(e,n)}}function Cl(e){var t=e.alternate;null!==t&&(e.alternate=null,Cl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Be(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Rl=null,jl=!1;function Al(e,t,n){for(n=n.child;null!==n;)_l(e,t,n),n=n.sibling}function _l(e,t,n){if(ue&&"function"==typeof ue.onCommitFiberUnmount)try{ue.onCommitFiberUnmount(ce,n)}catch(a){}switch(n.tag){case 26:El||fl(n,t),Al(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:El||fl(n,t);var r=Rl,s=jl;pd(n.type)&&(Rl=n.stateNode,jl=!1),Al(e,t,n),kd(n.stateNode),Rl=r,jl=s;break;case 5:El||fl(n,t);case 6:if(r=Rl,s=jl,Rl=null,Al(e,t,n),jl=s,null!==(Rl=r))if(jl)try{(9===Rl.nodeType?Rl.body:"HTML"===Rl.nodeName?Rl.ownerDocument.body:Rl).removeChild(n.stateNode)}catch(i){hu(n,t,i)}else try{Rl.removeChild(n.stateNode)}catch(i){hu(n,t,i)}break;case 18:null!==Rl&&(jl?(gd(9===(e=Rl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),jh(e)):gd(Rl,n.stateNode));break;case 4:r=Rl,s=jl,Rl=n.stateNode.containerInfo,jl=!0,Al(e,t,n),Rl=r,jl=s;break;case 0:case 11:case 14:case 15:El||cl(2,n,t),El||cl(4,n,t),Al(e,t,n);break;case 1:El||(fl(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount&&dl(n,t,r)),Al(e,t,n);break;case 21:Al(e,t,n);break;case 22:El=(r=El)||null!==n.memoizedState,Al(e,t,n),El=r;break;default:Al(e,t,n)}}function Dl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{jh(e)}catch(n){hu(t,t.return,n)}}function Il(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Sl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Sl),t;default:throw Error(r(435,e.tag))}}(e);t.forEach((function(t){var r=yu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}function Pl(e,t){var n=t.deletions;if(null!==n)for(var s=0;s<n.length;s++){var a=n[s],i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(pd(l.type)){Rl=l.stateNode,jl=!1;break e}break;case 5:Rl=l.stateNode,jl=!1;break e;case 3:case 4:Rl=l.stateNode.containerInfo,jl=!0;break e}l=l.return}if(null===Rl)throw Error(r(160));_l(i,o,a),Rl=null,jl=!1,null!==(i=a.alternate)&&(i.return=null),a.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ll(t,e),t=t.sibling}var Ml=null;function Ll(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Pl(t,e),Ol(e),4&s&&(cl(3,e,e.return),ll(3,e),cl(5,e,e.return));break;case 1:Pl(t,e),Ol(e),512&s&&(El||null===n||fl(n,n.return)),64&s&&wl&&(null!==(e=e.updateQueue)&&(null!==(s=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?s:n.concat(s))));break;case 26:var a=Ml;if(Pl(t,e),Ol(e),512&s&&(El||null===n||fl(n,n.return)),4&s){var i=null!==n?n.memoizedState:null;if(s=e.memoizedState,null===n)if(null===s)if(null===e.stateNode){e:{s=e.type,n=e.memoizedProps,a=a.ownerDocument||a;t:switch(s){case"title":(!(i=a.getElementsByTagName("title")[0])||i[Ve]||i[Pe]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=a.createElement(s),a.head.insertBefore(i,a.querySelector("head > title"))),nd(i,s,n),i[Pe]=e,Ge(i),s=i;break e;case"link":var o=Vd("link","href",a).get(s+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((i=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}nd(i=a.createElement(s),s,n),a.head.appendChild(i);break;case"meta":if(o=Vd("meta","content",a).get(s+(n.content||"")))for(l=0;l<o.length;l++)if((i=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}nd(i=a.createElement(s),s,n),a.head.appendChild(i);break;default:throw Error(r(468,s))}i[Pe]=e,Ge(i),s=i}e.stateNode=s}else Bd(a,e.type,e.stateNode);else e.stateNode=Ld(a,s,e.memoizedProps);else i!==s?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===s?Bd(a,e.type,e.stateNode):Ld(a,s,e.memoizedProps)):null===s&&null!==e.stateNode&&pl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Pl(t,e),Ol(e),512&s&&(El||null===n||fl(n,n.return)),null!==n&&4&s&&pl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Pl(t,e),Ol(e),512&s&&(El||null===n||fl(n,n.return)),32&e.flags){a=e.stateNode;try{St(a,"")}catch(m){hu(e,e.return,m)}}4&s&&null!=e.stateNode&&pl(e,a=e.memoizedProps,null!==n?n.memoizedProps:a),1024&s&&(kl=!0);break;case 6:if(Pl(t,e),Ol(e),4&s){if(null===e.stateNode)throw Error(r(162));s=e.memoizedProps,n=e.stateNode;try{n.nodeValue=s}catch(m){hu(e,e.return,m)}}break;case 3:if(zd=null,a=Ml,Ml=Td(t.containerInfo),Pl(t,e),Ml=a,Ol(e),4&s&&null!==n&&n.memoizedState.isDehydrated)try{jh(t.containerInfo)}catch(m){hu(e,e.return,m)}kl&&(kl=!1,Ul(e));break;case 4:s=Ml,Ml=Td(e.stateNode.containerInfo),Pl(t,e),Ol(e),Ml=s;break;case 12:default:Pl(t,e),Ol(e);break;case 13:Pl(t,e),Ol(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(kc=ee()),4&s&&(null!==(s=e.updateQueue)&&(e.updateQueue=null,Il(e,s)));break;case 22:a=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=wl,d=El;if(wl=u||a,El=d||c,Pl(t,e),El=d,wl=u,Ol(e),8192&s)e:for(t=e.stateNode,t._visibility=a?-2&t._visibility:1|t._visibility,a&&(null===n||c||wl||El||zl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(i=c.stateNode,a)"function"==typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=null!=h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"==typeof f?"":(""+f).trim()}}catch(m){hu(c,c.return,m)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=a?"":c.memoizedProps}catch(m){hu(c,c.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&s&&(null!==(s=e.updateQueue)&&(null!==(n=s.retryQueue)&&(s.retryQueue=null,Il(e,n))));break;case 19:Pl(t,e),Ol(e),4&s&&(null!==(s=e.updateQueue)&&(e.updateQueue=null,Il(e,s)));case 30:case 21:}}function Ol(e){var t=e.flags;if(2&t){try{for(var n,s=e.return;null!==s;){if(gl(s)){n=s;break}s=s.return}if(null==n)throw Error(r(160));switch(n.tag){case 27:var a=n.stateNode;bl(e,yl(e),a);break;case 5:var i=n.stateNode;32&n.flags&&(St(i,""),n.flags&=-33),bl(e,yl(e),i);break;case 3:case 4:var o=n.stateNode.containerInfo;vl(e,yl(e),o);break;default:throw Error(r(161))}}catch(l){hu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ul(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ul(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Fl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Tl(e,t.alternate,t),t=t.sibling}function zl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:cl(4,t,t.return),zl(t);break;case 1:fl(t,t.return);var n=t.stateNode;"function"==typeof n.componentWillUnmount&&dl(t,t.return,n),zl(t);break;case 27:kd(t.stateNode);case 26:case 5:fl(t,t.return),zl(t);break;case 22:null===t.memoizedState&&zl(t);break;default:zl(t)}e=e.sibling}}function Vl(e,t,n){for(n=n&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,s=e,a=t,i=a.flags;switch(a.tag){case 0:case 11:case 15:Vl(s,a,n),ll(4,a);break;case 1:if(Vl(s,a,n),"function"==typeof(s=(r=a).stateNode).componentDidMount)try{s.componentDidMount()}catch(c){hu(r,r.return,c)}if(null!==(s=(r=a).updateQueue)){var o=r.stateNode;try{var l=s.shared.hiddenCallbacks;if(null!==l)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)fa(l[s],o)}catch(c){hu(r,r.return,c)}}n&&64&i&&ul(a),hl(a,a.return);break;case 27:xl(a);case 26:case 5:Vl(s,a,n),n&&null===r&&4&i&&ml(a),hl(a,a.return);break;case 12:Vl(s,a,n);break;case 13:Vl(s,a,n),n&&4&i&&Dl(s,a);break;case 22:null===a.memoizedState&&Vl(s,a,n),hl(a,a.return);break;case 30:break;default:Vl(s,a,n)}t=t.sibling}}function Bl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ls(n))}function ql(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ls(e))}function $l(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Hl(e,t,n,r),t=t.sibling}function Hl(e,t,n,r){var s=t.flags;switch(t.tag){case 0:case 11:case 15:$l(e,t,n,r),2048&s&&ll(9,t);break;case 1:case 13:default:$l(e,t,n,r);break;case 3:$l(e,t,n,r),2048&s&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ls(e)));break;case 12:if(2048&s){$l(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,i=a.id,o=a.onPostCommit;"function"==typeof o&&o(i,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){hu(t,t.return,l)}}else $l(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,i=t.alternate,null!==t.memoizedState?2&a._visibility?$l(e,t,n,r):Gl(e,t):2&a._visibility?$l(e,t,n,r):(a._visibility|=2,Wl(e,t,n,r,!!(10256&t.subtreeFlags))),2048&s&&Bl(i,t);break;case 24:$l(e,t,n,r),2048&s&&ql(t.alternate,t)}}function Wl(e,t,n,r,s){for(s=s&&!!(10256&t.subtreeFlags),t=t.child;null!==t;){var a=e,i=t,o=n,l=r,c=i.flags;switch(i.tag){case 0:case 11:case 15:Wl(a,i,o,l,s),ll(8,i);break;case 23:break;case 22:var u=i.stateNode;null!==i.memoizedState?2&u._visibility?Wl(a,i,o,l,s):Gl(a,i):(u._visibility|=2,Wl(a,i,o,l,s)),s&&2048&c&&Bl(i.alternate,i);break;case 24:Wl(a,i,o,l,s),s&&2048&c&&ql(i.alternate,i);break;default:Wl(a,i,o,l,s)}t=t.sibling}}function Gl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,s=r.flags;switch(r.tag){case 22:Gl(n,r),2048&s&&Bl(r.alternate,r);break;case 24:Gl(n,r),2048&s&&ql(r.alternate,r);break;default:Gl(n,r)}t=t.sibling}}var Kl=8192;function Ql(e){if(e.subtreeFlags&Kl)for(e=e.child;null!==e;)Xl(e),e=e.sibling}function Xl(e){switch(e.tag){case 26:Ql(e),e.flags&Kl&&null!==e.memoizedState&&function(e,t,n){if(null===$d)throw Error(r(475));var s=$d;if(!("stylesheet"!==t.type||"string"==typeof n.media&&!1===matchMedia(n.media).matches||4&t.state.loading)){if(null===t.instance){var a=_d(n.href),i=e.querySelector(Dd(a));if(i)return null!==(e=i._p)&&"object"==typeof e&&"function"==typeof e.then&&(s.count++,s=Wd.bind(s),e.then(s,s)),t.state.loading|=4,t.instance=i,void Ge(i);i=e.ownerDocument||e,n=Id(n),(a=Sd.get(a))&&Ud(n,a),Ge(i=i.createElement("link"));var o=i;o._p=new Promise((function(e,t){o.onload=e,o.onerror=t})),nd(i,"link",n),t.instance=i}null===s.stylesheets&&(s.stylesheets=new Map),s.stylesheets.set(t,e),(e=t.state.preload)&&!(3&t.state.loading)&&(s.count++,t=Wd.bind(s),e.addEventListener("load",t),e.addEventListener("error",t))}}(Ml,e.memoizedState,e.memoizedProps);break;case 5:default:Ql(e);break;case 3:case 4:var t=Ml;Ml=Td(e.stateNode.containerInfo),Ql(e),Ml=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Kl,Kl=16777216,Ql(e),Kl=t):Ql(e))}}function Jl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Yl(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Nl=r,tc(r,e)}Jl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Zl(e),e=e.sibling}function Zl(e){switch(e.tag){case 0:case 11:case 15:Yl(e),2048&e.flags&&cl(9,e,e.return);break;case 3:case 12:default:Yl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,ec(e)):Yl(e)}}function ec(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Nl=r,tc(r,e)}Jl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:cl(8,t,t.return),ec(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,ec(t));break;default:ec(t)}e=e.sibling}}function tc(e,t){for(;null!==Nl;){var n=Nl;switch(n.tag){case 0:case 11:case 15:cl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ls(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Nl=r;else e:for(n=e;null!==Nl;){var s=(r=Nl).sibling,a=r.return;if(Cl(r),r===n){Nl=null;break e}if(null!==s){s.return=a,Nl=s;break e}Nl=a}}}var nc={getCacheForType:function(e){var t=Rs(Ps),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},rc="function"==typeof WeakMap?WeakMap:Map,sc=0,ac=null,ic=null,oc=0,lc=0,cc=null,uc=!1,dc=!1,hc=!1,fc=0,mc=0,pc=0,gc=0,yc=0,vc=0,bc=0,xc=null,wc=null,Ec=!1,kc=0,Sc=1/0,Nc=null,Tc=null,Cc=0,Rc=null,jc=null,Ac=0,_c=0,Dc=null,Ic=null,Pc=0,Mc=null;function Lc(){if(2&sc&&0!==oc)return oc&-oc;if(null!==_.T){return 0!==Fs?Fs:_u()}return De()}function Oc(){0===vc&&(vc=536870912&oc&&!os?536870912:Se());var e=ao.current;return null!==e&&(e.flags|=32),vc}function Uc(e,t,n){(e!==ac||2!==lc&&9!==lc)&&null===e.cancelPendingCommit||(Hc(e,0),Bc(e,oc,vc,!1)),Ce(e,n),2&sc&&e===ac||(e===ac&&(!(2&sc)&&(gc|=n),4===mc&&Bc(e,oc,vc,!1)),Su(e))}function Fc(e,t,n){if(6&sc)throw Error(r(327));for(var s=!n&&!(124&t)&&!(t&e.expiredLanes)||we(e,t),a=s?function(e,t){var n=sc;sc|=2;var s=Gc(),a=Kc();ac!==e||oc!==t?(Nc=null,Sc=ee()+500,Hc(e,t)):dc=we(e,t);e:for(;;)try{if(0!==lc&&null!==ic){t=ic;var i=cc;t:switch(lc){case 1:lc=0,cc=null,tu(e,t,i,1);break;case 2:case 9:if(Js(i)){lc=0,cc=null,eu(t);break}t=function(){2!==lc&&9!==lc||ac!==e||(lc=7),Su(e)},i.then(t,t);break e;case 3:lc=7;break e;case 4:lc=5;break e;case 7:Js(i)?(lc=0,cc=null,eu(t)):(lc=0,cc=null,tu(e,t,i,7));break;case 5:var o=null;switch(ic.tag){case 26:o=ic.memoizedState;case 5:case 27:var l=ic;if(!o||qd(o)){lc=0,cc=null;var c=l.sibling;if(null!==c)ic=c;else{var u=l.return;null!==u?(ic=u,nu(u)):ic=null}break t}}lc=0,cc=null,tu(e,t,i,5);break;case 6:lc=0,cc=null,tu(e,t,i,6);break;case 8:$c(),mc=6;break e;default:throw Error(r(462))}}Yc();break}catch(d){Wc(e,d)}return xs=bs=null,_.H=s,_.A=a,sc=n,null!==ic?0:(ac=null,oc=0,Ar(),mc)}(e,t):Xc(e,t,!0),i=s;;){if(0===a){dc&&!s&&Bc(e,t,0,!1);break}if(n=e.current.alternate,!i||Vc(n)){if(2===a){if(i=t,e.errorRecoveryDisabledLanes&i)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;a=xc;var c=l.current.memoizedState.isDehydrated;if(c&&(Hc(l,o).flags|=256),2!==(o=Xc(l,o,!1))){if(hc&&!c){l.errorRecoveryDisabledLanes|=i,gc|=i,a=4;break e}i=wc,wc=a,null!==i&&(null===wc?wc=i:wc.push.apply(wc,i))}a=o}if(i=!1,2!==a)continue}}if(1===a){Hc(e,0),Bc(e,t,0,!0);break}e:{switch(s=e,i=a){case 0:case 1:throw Error(r(345));case 4:if((4194048&t)!==t)break;case 6:Bc(s,t,vc,!uc);break e;case 2:wc=null;break;case 3:case 5:break;default:throw Error(r(329))}if((62914560&t)===t&&10<(a=kc+300-ee())){if(Bc(s,t,vc,!uc),0!==xe(s,0,!0))break e;s.timeoutHandle=ud(zc.bind(null,s,n,wc,Nc,Ec,t,vc,gc,bc,uc,i,2,-0,0),a)}else zc(s,n,wc,Nc,Ec,t,vc,gc,bc,uc,i,0,-0,0)}break}a=Xc(e,t,!1),i=!1}Su(e)}function zc(e,t,n,s,a,i,o,l,c,u,d,h,f,m){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||!(16785408&~h))&&($d={stylesheets:null,count:0,unsuspend:Hd},Xl(t),null!==(h=function(){if(null===$d)throw Error(r(475));var e=$d;return e.stylesheets&&0===e.count&&Kd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout((function(){if(e.stylesheets&&Kd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}}),6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(su.bind(null,e,t,i,n,s,a,o,l,c,d,1,f,m)),void Bc(e,i,o,!u);su(e,t,i,n,s,a,o,l,c)}function Vc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!Jn(a(),s))return!1}catch(i){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bc(e,t,n,r){t&=~yc,t&=~gc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var s=t;0<s;){var a=31-he(s),i=1<<a;r[a]=-1,s&=~i}0!==n&&Re(e,n,t)}function qc(){return!!(6&sc)||(Nu(0),!1)}function $c(){if(null!==ic){if(0===lc)var e=ic.return;else xs=bs=null,Fa(e=ic),Xi=null,Ji=0,e=ic;for(;null!==e;)ol(e.alternate,e),e=e.return;ic=null}}function Hc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,dd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),$c(),ac=e,ic=n=zr(e.current,null),oc=t,lc=0,cc=null,uc=!1,dc=we(e,t),hc=!1,bc=vc=yc=gc=pc=mc=0,wc=xc=null,Ec=!1,8&t&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var s=31-he(r),a=1<<s;t|=e[s],r&=~a}return fc=t,Ar(),n}function Wc(e,t){wa=null,_.H=Wi,t===Gs||t===Qs?(t=ta(),lc=3):t===Ks?(t=ta(),lc=4):lc=t===Ro?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,cc=t,null===ic&&(mc=1,ko(e,Tr(t,e.current)))}function Gc(){var e=_.H;return _.H=Wi,null===e?Wi:e}function Kc(){var e=_.A;return _.A=nc,e}function Qc(){mc=4,uc||(4194048&oc)!==oc&&null!==ao.current||(dc=!0),!(134217727&pc)&&!(134217727&gc)||null===ac||Bc(ac,oc,vc,!1)}function Xc(e,t,n){var r=sc;sc|=2;var s=Gc(),a=Kc();ac===e&&oc===t||(Nc=null,Hc(e,t)),t=!1;var i=mc;e:for(;;)try{if(0!==lc&&null!==ic){var o=ic,l=cc;switch(lc){case 8:$c(),i=6;break e;case 3:case 2:case 9:case 6:null===ao.current&&(t=!0);var c=lc;if(lc=0,cc=null,tu(e,o,l,c),n&&dc){i=0;break e}break;default:c=lc,lc=0,cc=null,tu(e,o,l,c)}}Jc(),i=mc;break}catch(u){Wc(e,u)}return t&&e.shellSuspendCounter++,xs=bs=null,sc=r,_.H=s,_.A=a,null===ic&&(ac=null,oc=0,Ar()),i}function Jc(){for(;null!==ic;)Zc(ic)}function Yc(){for(;null!==ic&&!Y();)Zc(ic)}function Zc(e){var t=Zo(e.alternate,e,fc);e.memoizedProps=e.pendingProps,null===t?nu(e):ic=t}function eu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Uo(n,t,t.pendingProps,t.type,void 0,oc);break;case 11:t=Uo(n,t,t.pendingProps,t.type.render,t.ref,oc);break;case 5:Fa(t);default:ol(n,t),t=Zo(n,t=ic=Vr(t,fc),fc)}e.memoizedProps=e.pendingProps,null===t?nu(e):ic=t}function tu(e,t,n,s){xs=bs=null,Fa(t),Xi=null,Ji=0;var a=t.return;try{if(function(e,t,n,s,a){if(n.flags|=32768,null!==s&&"object"==typeof s&&"function"==typeof s.then){if(null!==(t=n.alternate)&&Ns(t,n,a,!0),null!==(n=ao.current)){switch(n.tag){case 13:return null===io?Qc():null===n.alternate&&0===mc&&(mc=3),n.flags&=-257,n.flags|=65536,n.lanes=a,s===Xs?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([s]):t.add(s),fu(e,s,a)),!1;case 22:return n.flags|=65536,s===Xs?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([s]):n.add(s),fu(e,s,a)),!1}throw Error(r(435,n.tag))}return fu(e,s,a),Qc(),!1}if(os)return null!==(t=ao.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=a,s!==us&&ys(Tr(e=Error(r(422),{cause:s}),n))):(s!==us&&ys(Tr(t=Error(r(423),{cause:s}),n)),(e=e.current.alternate).flags|=65536,a&=-a,e.lanes|=a,s=Tr(s,n),ca(e,a=No(e.stateNode,s,a)),4!==mc&&(mc=2)),!1;var i=Error(r(520),{cause:s});if(i=Tr(i,n),null===xc?xc=[i]:xc.push(i),4!==mc&&(mc=2),null===t)return!0;s=Tr(s,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,ca(n,e=No(n.stateNode,s,e)),!1;case 1:if(t=n.type,i=n.stateNode,!(128&n.flags||"function"!=typeof t.getDerivedStateFromError&&(null===i||"function"!=typeof i.componentDidCatch||null!==Tc&&Tc.has(i))))return n.flags|=65536,a&=-a,n.lanes|=a,Co(a=To(a),e,n,s),ca(n,a),!1}n=n.return}while(null!==n);return!1}(e,a,t,n,oc))return mc=1,ko(e,Tr(n,e.current)),void(ic=null)}catch(i){if(null!==a)throw ic=a,i;return mc=1,ko(e,Tr(n,e.current)),void(ic=null)}32768&t.flags?(os||1===s?e=!0:dc||536870912&oc?e=!1:(uc=e=!0,(2===s||9===s||3===s||6===s)&&(null!==(s=ao.current)&&13===s.tag&&(s.flags|=16384))),ru(t,e)):nu(t)}function nu(e){var t=e;do{if(32768&t.flags)return void ru(t,uc);e=t.return;var n=al(t.alternate,t,fc);if(null!==n)return void(ic=n);if(null!==(t=t.sibling))return void(ic=t);ic=t=e}while(null!==t);0===mc&&(mc=5)}function ru(e,t){do{var n=il(e.alternate,e);if(null!==n)return n.flags&=32767,void(ic=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(ic=e);ic=e=n}while(null!==e);mc=6,ic=null}function su(e,t,n,s,a,i,o,l,c){e.cancelPendingCommit=null;do{cu()}while(0!==Cc);if(6&sc)throw Error(r(327));if(null!==t){if(t===e.current)throw Error(r(177));if(i=t.lanes|t.childLanes,function(e,t,n,r,s,a){var i=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=i&~n;0<n;){var u=31-he(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&Re(e,r,0),0!==a&&0===s&&0!==e.tag&&(e.suspendedLanes|=a&~(i&~t))}(e,n,i|=jr,o,l,c),e===ac&&(ic=ac=null,oc=0),jc=t,Rc=e,Ac=n,_c=i,Dc=a,Ic=s,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,X(se,(function(){return uu(),null}))):(e.callbackNode=null,e.callbackPriority=0),s=!!(13878&t.flags),13878&t.subtreeFlags||s){s=_.T,_.T=null,a=D.p,D.p=2,o=sc,sc|=4;try{!function(e,t){if(e=e.containerInfo,rd=sh,rr(e=nr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var s=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(s&&0!==s.rangeCount){n=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==n||0!==a&&3!==h.nodeType||(l=o+a),h!==i||0!==s&&3!==h.nodeType||(c=o+s),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++u===a&&(l=o),f===i&&++d===s&&(c=o),null!==(m=h.nextSibling))break;f=(h=f).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(sd={focusedElem:e,selectionRange:n},sh=!1,Nl=t;null!==Nl;)if(e=(t=Nl).child,1024&t.subtreeFlags&&null!==e)e.return=t,Nl=e;else for(;null!==Nl;){switch(i=(t=Nl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==i){e=void 0,n=t,a=i.memoizedProps,i=i.memoizedState,s=n.stateNode;try{var p=vo(n.type,a,(n.elementType,n.type));e=s.getSnapshotBeforeUpdate(p,i),s.__reactInternalSnapshotBeforeUpdate=e}catch(y){hu(n,n.return,y)}}break;case 3:if(1024&e)if(9===(n=(e=t.stateNode.containerInfo).nodeType))yd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":yd(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(r(163))}if(null!==(e=t.sibling)){e.return=t.return,Nl=e;break}Nl=t.return}}(e,t)}finally{sc=o,D.p=a,_.T=s}}Cc=1,au(),iu(),ou()}}function au(){if(1===Cc){Cc=0;var e=Rc,t=jc,n=!!(13878&t.flags);if(13878&t.subtreeFlags||n){n=_.T,_.T=null;var r=D.p;D.p=2;var s=sc;sc|=4;try{Ll(t,e);var a=sd,i=nr(e.containerInfo),o=a.focusedElem,l=a.selectionRange;if(i!==o&&o&&o.ownerDocument&&tr(o.ownerDocument.documentElement,o)){if(null!==l&&rr(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),m=o.textContent.length,p=Math.min(l.start,m),g=void 0===l.end?p:Math.min(l.end,m);!f.extend&&p>g&&(i=g,g=p,p=i);var y=er(o,p),v=er(o,g);if(y&&v&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var b=d.createRange();b.setStart(y.node,y.offset),f.removeAllRanges(),p>g?(f.addRange(b),f.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),f.addRange(b))}}}}for(d=[],f=o;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"==typeof o.focus&&o.focus(),o=0;o<d.length;o++){var x=d[o];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}sh=!!rd,sd=rd=null}finally{sc=s,D.p=r,_.T=n}}e.current=t,Cc=2}}function iu(){if(2===Cc){Cc=0;var e=Rc,t=jc,n=!!(8772&t.flags);if(8772&t.subtreeFlags||n){n=_.T,_.T=null;var r=D.p;D.p=2;var s=sc;sc|=4;try{Tl(e,t.alternate,t)}finally{sc=s,D.p=r,_.T=n}}Cc=3}}function ou(){if(4===Cc||3===Cc){Cc=0,Z();var e=Rc,t=jc,n=Ac,r=Ic;10256&t.subtreeFlags||10256&t.flags?Cc=5:(Cc=0,jc=Rc=null,lu(e,e.pendingLanes));var s=e.pendingLanes;if(0===s&&(Tc=null),_e(n),t=t.stateNode,ue&&"function"==typeof ue.onCommitFiberRoot)try{ue.onCommitFiberRoot(ce,t,void 0,!(128&~t.current.flags))}catch(l){}if(null!==r){t=_.T,s=D.p,D.p=2,_.T=null;try{for(var a=e.onRecoverableError,i=0;i<r.length;i++){var o=r[i];a(o.value,{componentStack:o.stack})}}finally{_.T=t,D.p=s}}3&Ac&&cu(),Su(e),s=e.pendingLanes,4194090&n&&42&s?e===Mc?Pc++:(Pc=0,Mc=e):Pc=0,Nu(0)}}function lu(e,t){0==(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ls(t)))}function cu(e){return au(),iu(),ou(),uu()}function uu(){if(5!==Cc)return!1;var e=Rc,t=_c;_c=0;var n=_e(Ac),s=_.T,a=D.p;try{D.p=32>n?32:n,_.T=null,n=Dc,Dc=null;var i=Rc,o=Ac;if(Cc=0,jc=Rc=null,Ac=0,6&sc)throw Error(r(331));var l=sc;if(sc|=4,Zl(i.current),Hl(i,i.current,o,n),sc=l,Nu(0,!1),ue&&"function"==typeof ue.onPostCommitFiberRoot)try{ue.onPostCommitFiberRoot(ce,i)}catch(c){}return!0}finally{D.p=a,_.T=s,lu(e,t)}}function du(e,t,n){t=Tr(n,t),null!==(e=oa(e,t=No(e.stateNode,t,2),2))&&(Ce(e,2),Su(e))}function hu(e,t,n){if(3===e.tag)du(e,e,n);else for(;null!==t;){if(3===t.tag){du(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Tc||!Tc.has(r))){e=Tr(n,e),null!==(r=oa(t,n=To(2),2))&&(Co(n,r,t,e),Ce(r,2),Su(r));break}}t=t.return}}function fu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new rc;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(hc=!0,s.add(n),e=mu.bind(null,e,t,n),t.then(e,e))}function mu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,ac===e&&(oc&n)===n&&(4===mc||3===mc&&(62914560&oc)===oc&&300>ee()-kc?!(2&sc)&&Hc(e,0):yc|=n,bc===oc&&(bc=0)),Su(e)}function pu(e,t){0===t&&(t=Ne()),null!==(e=Ir(e,t))&&(Ce(e,t),Su(e))}function gu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),pu(e,n)}function yu(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(r(314))}null!==s&&s.delete(t),pu(e,n)}var vu=null,bu=null,xu=!1,wu=!1,Eu=!1,ku=0;function Su(e){e!==bu&&null===e.next&&(null===bu?vu=bu=e:bu=bu.next=e),wu=!0,xu||(xu=!0,fd((function(){6&sc?X(ne,Tu):Cu()})))}function Nu(e,t){if(!Eu&&wu){Eu=!0;do{for(var n=!1,r=vu;null!==r;){if(0!==e){var s=r.pendingLanes;if(0===s)var a=0;else{var i=r.suspendedLanes,o=r.pingedLanes;a=(1<<31-he(42|e)+1)-1,a=201326741&(a&=s&~(i&~o))?201326741&a|1:a?2|a:0}0!==a&&(n=!0,Au(r,a))}else a=oc,!(3&(a=xe(r,r===ac?a:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||we(r,a)||(n=!0,Au(r,a));r=r.next}}while(n);Eu=!1}}function Tu(){Cu()}function Cu(){wu=xu=!1;var e=0;0!==ku&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==cd&&(cd=e,!0);return cd=null,!1}()&&(e=ku),ku=0);for(var t=ee(),n=null,r=vu;null!==r;){var s=r.next,a=Ru(r,t);0===a?(r.next=null,null===n?vu=s:n.next=s,null===s&&(bu=n)):(n=r,(0!==e||3&a)&&(wu=!0)),r=s}Nu(e)}function Ru(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,a=-62914561&e.pendingLanes;0<a;){var i=31-he(a),o=1<<i,l=s[i];-1===l?o&n&&!(o&r)||(s[i]=ke(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}if(n=oc,n=xe(e,e===(t=ac)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===lc||9===lc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&J(r),e.callbackNode=null,e.callbackPriority=0;if(!(3&n)||we(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&J(r),_e(n)){case 2:case 8:n=re;break;case 32:default:n=se;break;case 268435456:n=ie}return r=ju.bind(null,e),n=X(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&J(r),e.callbackPriority=2,e.callbackNode=null,2}function ju(e,t){if(0!==Cc&&5!==Cc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(cu()&&e.callbackNode!==n)return null;var r=oc;return 0===(r=xe(e,e===ac?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Fc(e,r,t),Ru(e,ee()),null!=e.callbackNode&&e.callbackNode===n?ju.bind(null,e):null)}function Au(e,t){if(cu())return null;Fc(e,t,!0)}function _u(){return 0===ku&&(ku=Se()),ku}function Du(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:_t(""+e)}function Iu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Pu=0;Pu<kr.length;Pu++){var Mu=kr[Pu];Sr(Mu.toLowerCase(),"on"+(Mu[0].toUpperCase()+Mu.slice(1)))}Sr(pr,"onAnimationEnd"),Sr(gr,"onAnimationIteration"),Sr(yr,"onAnimationStart"),Sr("dblclick","onDoubleClick"),Sr("focusin","onFocus"),Sr("focusout","onBlur"),Sr(vr,"onTransitionRun"),Sr(br,"onTransitionStart"),Sr(xr,"onTransitionCancel"),Sr(wr,"onTransitionEnd"),Je("onMouseEnter",["mouseout","mouseover"]),Je("onMouseLeave",["mouseout","mouseover"]),Je("onPointerEnter",["pointerout","pointerover"]),Je("onPointerLeave",["pointerout","pointerover"]),Xe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ou=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lu));function Uu(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var o=r[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&s.isPropagationStopped())break e;a=o,s.currentTarget=c;try{a(s)}catch(u){bo(u)}s.currentTarget=null,a=l}else for(i=0;i<r.length;i++){if(l=(o=r[i]).instance,c=o.currentTarget,o=o.listener,l!==a&&s.isPropagationStopped())break e;a=o,s.currentTarget=c;try{a(s)}catch(u){bo(u)}s.currentTarget=null,a=l}}}}function Fu(e,t){var n=t[Oe];void 0===n&&(n=t[Oe]=new Set);var r=e+"__bubble";n.has(r)||(qu(t,e,2,!1),n.add(r))}function zu(e,t,n){var r=0;t&&(r|=4),qu(n,e,r,t)}var Vu="_reactListening"+Math.random().toString(36).slice(2);function Bu(e){if(!e[Vu]){e[Vu]=!0,Ke.forEach((function(t){"selectionchange"!==t&&(Ou.has(t)||zu(t,!1,e),zu(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vu]||(t[Vu]=!0,zu("selectionchange",!1,t))}}function qu(e,t,n,r){switch(dh(t)){case 2:var s=ah;break;case 8:s=ih;break;default:s=oh}n=s.bind(null,t,n,e),s=void 0,!Vt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function $u(e,t,n,r,s){var i=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var l=r.stateNode.containerInfo;if(l===s)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===s)return;o=o.return}for(;null!==l;){if(null===(o=qe(l)))return;if(5===(c=o.tag)||6===c||26===c||27===c){r=i=o;continue e}l=l.parentNode}}r=r.return}Ut((function(){var r=i,s=It(n),o=[];e:{var l=Er.get(e);if(void 0!==l){var c=tn,u=e;switch(e){case"keypress":if(0===Gt(n))break e;case"keydown":case"keyup":c=yn;break;case"focusin":u="focus",c=ln;break;case"focusout":u="blur",c=ln;break;case"beforeblur":case"afterblur":c=ln;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=an;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=on;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=bn;break;case pr:case gr:case yr:c=cn;break;case wr:c=xn;break;case"scroll":case"scrollend":c=rn;break;case"wheel":c=wn;break;case"copy":case"cut":case"paste":c=un;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=vn;break;case"toggle":case"beforetoggle":c=En}var d=!!(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==l?l+"Capture":null:l;d=[];for(var m,p=r;null!==p;){var g=p;if(m=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===m||null===f||null!=(g=Ft(p,f))&&d.push(Hu(p,g,m)),h)break;p=p.return}0<d.length&&(l=new c(l,u,null,n,s),o.push({event:l,listeners:d}))}}if(!(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||n===Dt||!(u=n.relatedTarget||n.fromElement)||!qe(u)&&!u[Le])&&(c||l)&&(l=s.window===s?s:(l=s.ownerDocument)?l.defaultView||l.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?qe(u):null)&&(h=a(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=an,g="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=vn,g="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==c?l:He(c),m=null==u?l:He(u),(l=new d(g,p+"leave",c,n,s)).target=h,l.relatedTarget=m,g=null,qe(s)===r&&((d=new d(f,p+"enter",u,n,s)).target=m,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(f=u,p=0,m=d=c;m;m=Gu(m))p++;for(m=0,g=f;g;g=Gu(g))m++;for(;0<p-m;)d=Gu(d),p--;for(;0<m-p;)f=Gu(f),m--;for(;p--;){if(d===f||null!==f&&d===f.alternate)break e;d=Gu(d),f=Gu(f)}d=null}else d=null;null!==c&&Ku(o,l,c,d,!1),null!==u&&null!==h&&Ku(o,h,u,d,!0)}if("select"===(c=(l=r?He(r):window).nodeName&&l.nodeName.toLowerCase())||"input"===c&&"file"===l.type)var y=zn;else if(Pn(l))if(Vn)y=Xn;else{y=Kn;var v=Gn}else!(c=l.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==l.type&&"radio"!==l.type?r&&Rt(r.elementType)&&(y=zn):y=Qn;switch(y&&(y=y(e,r))?Mn(o,y,n,s):(v&&v(e,l,r),"focusout"===e&&r&&"number"===l.type&&null!=r.memoizedProps.value&&xt(l,"number",l.value)),v=r?He(r):window,e){case"focusin":(Pn(v)||"true"===v.contentEditable)&&(ar=v,ir=r,or=null);break;case"focusout":or=ir=ar=null;break;case"mousedown":lr=!0;break;case"contextmenu":case"mouseup":case"dragend":lr=!1,cr(o,n,s);break;case"selectionchange":if(sr)break;case"keydown":case"keyup":cr(o,n,s)}var b;if(Sn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Dn?An(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Cn&&"ko"!==n.locale&&(Dn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Dn&&(b=Wt()):($t="value"in(qt=s)?qt.value:qt.textContent,Dn=!0)),0<(v=Wu(r,x)).length&&(x=new dn(x,e,null,n,s),o.push({event:x,listeners:v}),b?x.data=b:null!==(b=_n(n))&&(x.data=b))),(b=Tn?function(e,t){switch(e){case"compositionend":return _n(t);case"keypress":return 32!==t.which?null:(jn=!0,Rn);case"textInput":return(e=t.data)===Rn&&jn?null:e;default:return null}}(e,n):function(e,t){if(Dn)return"compositionend"===e||!Sn&&An(e,t)?(e=Wt(),Ht=$t=qt=null,Dn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(x=Wu(r,"onBeforeInput")).length&&(v=new dn("onBeforeInput","beforeinput",null,n,s),o.push({event:v,listeners:x}),v.data=b)),function(e,t,n,r,s){if("submit"===t&&n&&n.stateNode===s){var a=Du((s[Me]||null).action),i=r.submitter;i&&null!==(t=(t=i[Me]||null)?Du(t.formAction):i.getAttribute("formAction"))&&(a=t,i=null);var o=new tn("action","action",null,r,s);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==ku){var e=i?Iu(s,i):new FormData(s);Di(n,{pending:!0,data:e,method:s.method,action:a},null,e)}}else"function"==typeof a&&(o.preventDefault(),e=i?Iu(s,i):new FormData(s),Di(n,{pending:!0,data:e,method:s.method,action:a},a,e))},currentTarget:s}]})}}(o,e,r,n,s)}Uu(o,t)}))}function Hu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wu(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,a=s.stateNode;if(5!==(s=s.tag)&&26!==s&&27!==s||null===a||(null!=(s=Ft(e,n))&&r.unshift(Hu(e,s,a)),null!=(s=Ft(e,t))&&r.push(Hu(e,s,a))),3===e.tag)return r;e=e.return}return[]}function Gu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Ku(e,t,n,r,s){for(var a=t._reactName,i=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===c||(l=c,s?null!=(c=Ft(n,a))&&i.unshift(Hu(n,c,l)):s||null!=(c=Ft(n,a))&&i.push(Hu(n,c,l))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Qu=/\r\n?/g,Xu=/\u0000|\uFFFD/g;function Ju(e){return("string"==typeof e?e:""+e).replace(Qu,"\n").replace(Xu,"")}function Yu(e,t){return t=Ju(t),Ju(e)===t}function Zu(){}function ed(e,t,n,s,a,i){switch(n){case"children":"string"==typeof s?"body"===t||"textarea"===t&&""===s||St(e,s):("number"==typeof s||"bigint"==typeof s)&&"body"!==t&&St(e,""+s);break;case"className":st(e,"class",s);break;case"tabIndex":st(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":st(e,n,s);break;case"style":Ct(e,s,i);break;case"data":if("object"!==t){st(e,"data",s);break}case"src":case"href":if(""===s&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==s||"function"==typeof s||"symbol"==typeof s||"boolean"==typeof s){e.removeAttribute(n);break}s=_t(""+s),e.setAttribute(n,s);break;case"action":case"formAction":if("function"==typeof s){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof i&&("formAction"===n?("input"!==t&&ed(e,t,"name",a.name,a,null),ed(e,t,"formEncType",a.formEncType,a,null),ed(e,t,"formMethod",a.formMethod,a,null),ed(e,t,"formTarget",a.formTarget,a,null)):(ed(e,t,"encType",a.encType,a,null),ed(e,t,"method",a.method,a,null),ed(e,t,"target",a.target,a,null))),null==s||"symbol"==typeof s||"boolean"==typeof s){e.removeAttribute(n);break}s=_t(""+s),e.setAttribute(n,s);break;case"onClick":null!=s&&(e.onclick=Zu);break;case"onScroll":null!=s&&Fu("scroll",e);break;case"onScrollEnd":null!=s&&Fu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=s){if("object"!=typeof s||!("__html"in s))throw Error(r(61));if(null!=(n=s.__html)){if(null!=a.children)throw Error(r(60));e.innerHTML=n}}break;case"multiple":e.multiple=s&&"function"!=typeof s&&"symbol"!=typeof s;break;case"muted":e.muted=s&&"function"!=typeof s&&"symbol"!=typeof s;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==s||"function"==typeof s||"boolean"==typeof s||"symbol"==typeof s){e.removeAttribute("xlink:href");break}n=_t(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=s&&"function"!=typeof s&&"symbol"!=typeof s?e.setAttribute(n,""+s):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&"function"!=typeof s&&"symbol"!=typeof s?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===s?e.setAttribute(n,""):!1!==s&&null!=s&&"function"!=typeof s&&"symbol"!=typeof s?e.setAttribute(n,s):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&!isNaN(s)&&1<=s?e.setAttribute(n,s):e.removeAttribute(n);break;case"rowSpan":case"start":null==s||"function"==typeof s||"symbol"==typeof s||isNaN(s)?e.removeAttribute(n):e.setAttribute(n,s);break;case"popover":Fu("beforetoggle",e),Fu("toggle",e),rt(e,"popover",s);break;case"xlinkActuate":at(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":at(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":at(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":at(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":at(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":at(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":at(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":at(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":at(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":rt(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&rt(e,n=jt.get(n)||n,s)}}function td(e,t,n,s,a,i){switch(n){case"style":Ct(e,s,i);break;case"dangerouslySetInnerHTML":if(null!=s){if("object"!=typeof s||!("__html"in s))throw Error(r(61));if(null!=(n=s.__html)){if(null!=a.children)throw Error(r(60));e.innerHTML=n}}break;case"children":"string"==typeof s?St(e,s):("number"==typeof s||"bigint"==typeof s)&&St(e,""+s);break;case"onScroll":null!=s&&Fu("scroll",e);break;case"onScrollEnd":null!=s&&Fu("scrollend",e);break;case"onClick":null!=s&&(e.onclick=Zu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Qe.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(a=n.endsWith("Capture"),t=n.slice(2,a?n.length-7:void 0),"function"==typeof(i=null!=(i=e[Me]||null)?i[n]:null)&&e.removeEventListener(t,i,a),"function"!=typeof s)?n in e?e[n]=s:!0===s?e.setAttribute(n,""):rt(e,n,s):("function"!=typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,s,a)))}}function nd(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fu("error",e),Fu("load",e);var s,a=!1,i=!1;for(s in n)if(n.hasOwnProperty(s)){var o=n[s];if(null!=o)switch(s){case"src":a=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:ed(e,t,s,o,n,null)}}return i&&ed(e,t,"srcSet",n.srcSet,n,null),void(a&&ed(e,t,"src",n.src,n,null));case"input":Fu("invalid",e);var l=s=o=i=null,c=null,u=null;for(a in n)if(n.hasOwnProperty(a)){var d=n[a];if(null!=d)switch(a){case"name":i=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":s=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(r(137,t));break;default:ed(e,t,a,d,n,null)}}return bt(e,s,l,c,u,o,i,!1),void ft(e);case"select":for(i in Fu("invalid",e),a=o=s=null,n)if(n.hasOwnProperty(i)&&null!=(l=n[i]))switch(i){case"value":s=l;break;case"defaultValue":o=l;break;case"multiple":a=l;default:ed(e,t,i,l,n,null)}return t=s,n=o,e.multiple=!!a,void(null!=t?wt(e,!!a,t,!1):null!=n&&wt(e,!!a,n,!0));case"textarea":for(o in Fu("invalid",e),s=i=a=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":a=l;break;case"defaultValue":i=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(r(91));break;default:ed(e,t,o,l,n,null)}return kt(e,a,i,s),void ft(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(a=n[c]))if("selected"===c)e.selected=a&&"function"!=typeof a&&"symbol"!=typeof a;else ed(e,t,c,a,n,null);return;case"dialog":Fu("beforetoggle",e),Fu("toggle",e),Fu("cancel",e),Fu("close",e);break;case"iframe":case"object":Fu("load",e);break;case"video":case"audio":for(a=0;a<Lu.length;a++)Fu(Lu[a],e);break;case"image":Fu("error",e),Fu("load",e);break;case"details":Fu("toggle",e);break;case"embed":case"source":case"link":Fu("error",e),Fu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(a=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:ed(e,t,u,a,n,null)}return;default:if(Rt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(a=n[d])&&td(e,t,d,a,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(a=n[l])&&ed(e,t,l,a,n,null))}var rd=null,sd=null;function ad(e){return 9===e.nodeType?e:e.ownerDocument}function id(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function od(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ld(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var cd=null;var ud="function"==typeof setTimeout?setTimeout:void 0,dd="function"==typeof clearTimeout?clearTimeout:void 0,hd="function"==typeof Promise?Promise:void 0,fd="function"==typeof queueMicrotask?queueMicrotask:void 0!==hd?function(e){return hd.resolve(null).then(e).catch(md)}:ud;function md(e){setTimeout((function(){throw e}))}function pd(e){return"head"===e}function gd(e,t){var n=t,r=0,s=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0<r&&8>r){n=r;var i=e.ownerDocument;if(1&n&&kd(i.documentElement),2&n&&kd(i.body),4&n)for(kd(n=i.head),i=n.firstChild;i;){var o=i.nextSibling,l=i.nodeName;i[Ve]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===i.rel.toLowerCase()||n.removeChild(i),i=o}}if(0===s)return e.removeChild(a),void jh(t);s--}else"$"===n||"$?"===n||"$!"===n?s++:r=n.charCodeAt(0)-48;else r=0;n=a}while(n);jh(t)}function yd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":yd(n),Be(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function vd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function bd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var xd=null;function wd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function Ed(e,t,n){switch(t=ad(n),e){case"html":if(!(e=t.documentElement))throw Error(r(452));return e;case"head":if(!(e=t.head))throw Error(r(453));return e;case"body":if(!(e=t.body))throw Error(r(454));return e;default:throw Error(r(451))}}function kd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Be(e)}var Sd=new Map,Nd=new Set;function Td(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Cd=D.d;D.d={f:function(){var e=Cd.f(),t=qc();return e||t},r:function(e){var t=$e(e);null!==t&&5===t.tag&&"form"===t.type?Pi(t):Cd.r(e)},D:function(e){Cd.D(e),jd("dns-prefetch",e,null)},C:function(e,t){Cd.C(e,t),jd("preconnect",e,t)},L:function(e,t,n){Cd.L(e,t,n);var r=Rd;if(r&&e&&t){var s='link[rel="preload"][as="'+yt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(s+='[imagesrcset="'+yt(n.imageSrcSet)+'"]',"string"==typeof n.imageSizes&&(s+='[imagesizes="'+yt(n.imageSizes)+'"]')):s+='[href="'+yt(e)+'"]';var a=s;switch(t){case"style":a=_d(e);break;case"script":a=Pd(e)}Sd.has(a)||(e=c({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Sd.set(a,e),null!==r.querySelector(s)||"style"===t&&r.querySelector(Dd(a))||"script"===t&&r.querySelector(Md(a))||(nd(t=r.createElement("link"),"link",e),Ge(t),r.head.appendChild(t)))}},m:function(e,t){Cd.m(e,t);var n=Rd;if(n&&e){var r=t&&"string"==typeof t.as?t.as:"script",s='link[rel="modulepreload"][as="'+yt(r)+'"][href="'+yt(e)+'"]',a=s;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=Pd(e)}if(!Sd.has(a)&&(e=c({rel:"modulepreload",href:e},t),Sd.set(a,e),null===n.querySelector(s))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Md(a)))return}nd(r=n.createElement("link"),"link",e),Ge(r),n.head.appendChild(r)}}},X:function(e,t){Cd.X(e,t);var n=Rd;if(n&&e){var r=We(n).hoistableScripts,s=Pd(e),a=r.get(s);a||((a=n.querySelector(Md(s)))||(e=c({src:e,async:!0},t),(t=Sd.get(s))&&Fd(e,t),Ge(a=n.createElement("script")),nd(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(s,a))}},S:function(e,t,n){Cd.S(e,t,n);var r=Rd;if(r&&e){var s=We(r).hoistableStyles,a=_d(e);t=t||"default";var i=s.get(a);if(!i){var o={loading:0,preload:null};if(i=r.querySelector(Dd(a)))o.loading=5;else{e=c({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Sd.get(a))&&Ud(e,n);var l=i=r.createElement("link");Ge(l),nd(l,"link",e),l._p=new Promise((function(e,t){l.onload=e,l.onerror=t})),l.addEventListener("load",(function(){o.loading|=1})),l.addEventListener("error",(function(){o.loading|=2})),o.loading|=4,Od(i,t,r)}i={type:"stylesheet",instance:i,count:1,state:o},s.set(a,i)}}},M:function(e,t){Cd.M(e,t);var n=Rd;if(n&&e){var r=We(n).hoistableScripts,s=Pd(e),a=r.get(s);a||((a=n.querySelector(Md(s)))||(e=c({src:e,async:!0,type:"module"},t),(t=Sd.get(s))&&Fd(e,t),Ge(a=n.createElement("script")),nd(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(s,a))}}};var Rd="undefined"==typeof document?null:document;function jd(e,t,n){var r=Rd;if(r&&"string"==typeof t&&t){var s=yt(t);s='link[rel="'+e+'"][href="'+s+'"]',"string"==typeof n&&(s+='[crossorigin="'+n+'"]'),Nd.has(s)||(Nd.add(s),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(s)&&(nd(t=r.createElement("link"),"link",e),Ge(t),r.head.appendChild(t)))}}function Ad(e,t,n,s){var a,i,o,l,c=(c=V.current)?Td(c):null;if(!c)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof n.precedence&&"string"==typeof n.href?(t=_d(n.href),(s=(n=We(c).hoistableStyles).get(t))||(s={type:"style",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"==typeof n.href&&"string"==typeof n.precedence){e=_d(n.href);var u=We(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Dd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Sd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Sd.set(e,n),u||(a=c,i=e,o=n,l=d.state,a.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=a.createElement("link"),l.preload=i,i.addEventListener("load",(function(){return l.loading|=1})),i.addEventListener("error",(function(){return l.loading|=2})),nd(i,"link",o),Ge(i),a.head.appendChild(i))))),t&&null===s)throw Error(r(528,""));return d}if(t&&null!==s)throw Error(r(529,""));return null;case"script":return t=n.async,"string"==typeof(n=n.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=Pd(n),(s=(n=We(c).hoistableScripts).get(t))||(s={type:"script",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function _d(e){return'href="'+yt(e)+'"'}function Dd(e){return'link[rel="stylesheet"]['+e+"]"}function Id(e){return c({},e,{"data-precedence":e.precedence,precedence:null})}function Pd(e){return'[src="'+yt(e)+'"]'}function Md(e){return"script[async]"+e}function Ld(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+yt(n.href)+'"]');if(s)return t.instance=s,Ge(s),s;var a=c({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Ge(s=(e.ownerDocument||e).createElement("style")),nd(s,"style",a),Od(s,n.precedence,e),t.instance=s;case"stylesheet":a=_d(n.href);var i=e.querySelector(Dd(a));if(i)return t.state.loading|=4,t.instance=i,Ge(i),i;s=Id(n),(a=Sd.get(a))&&Ud(s,a),Ge(i=(e.ownerDocument||e).createElement("link"));var o=i;return o._p=new Promise((function(e,t){o.onload=e,o.onerror=t})),nd(i,"link",s),t.state.loading|=4,Od(i,n.precedence,e),t.instance=i;case"script":return i=Pd(n.src),(a=e.querySelector(Md(i)))?(t.instance=a,Ge(a),a):(s=n,(a=Sd.get(i))&&Fd(s=c({},n),a),Ge(a=(e=e.ownerDocument||e).createElement("script")),nd(a,"link",s),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(r(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(s=t.instance,t.state.loading|=4,Od(s,n.precedence,e));return t.instance}function Od(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=r.length?r[r.length-1]:null,a=s,i=0;i<r.length;i++){var o=r[i];if(o.dataset.precedence===t)a=o;else if(a!==s)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Ud(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Fd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var zd=null;function Vd(e,t,n){if(null===zd){var r=new Map,s=zd=new Map;s.set(n,r)}else(r=(s=zd).get(n))||(r=new Map,s.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var a=n[s];if(!(a[Ve]||a[Pe]||"link"===e&&"stylesheet"===a.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==a.namespaceURI){var i=a.getAttribute(t)||"";i=e+i;var o=r.get(i);o?o.push(a):r.set(i,[a])}}return r}function Bd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function qd(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var $d=null;function Hd(){}function Wd(){if(this.count--,0===this.count)if(this.stylesheets)Kd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Gd=null;function Kd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Gd=new Map,t.forEach(Qd,e),Gd=null,Wd.call(e))}function Qd(e,t){if(!(4&t.state.loading)){var n=Gd.get(e);if(n)var r=n.get(null);else{n=new Map,Gd.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<s.length;a++){var i=s[a];"LINK"!==i.nodeName&&"not all"===i.getAttribute("media")||(n.set(i.dataset.precedence,i),r=i)}r&&n.set(null,r)}i=(s=t.instance).getAttribute("data-precedence"),(a=n.get(i)||r)===r&&n.set(null,s),n.set(i,s),this.count++,r=Wd.bind(this),s.addEventListener("load",r),s.addEventListener("error",r),a?a.parentNode.insertBefore(s,a.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(s,e.firstChild),t.state.loading|=4}}var Xd={$$typeof:v,Provider:null,Consumer:null,_currentValue:I,_currentValue2:I,_threadCount:0};function Jd(e,t,n,r,s,a,i,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Te(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Te(0),this.hiddenUpdates=Te(null),this.identifierPrefix=r,this.onUncaughtError=s,this.onCaughtError=a,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Yd(e,t,n,r,s,a,i,o,l,c,u,d){return e=new Jd(e,t,n,i,o,l,c,d),t=1,!0===a&&(t|=24),a=Ur(3,null,null,t),e.current=a,a.stateNode=e,(t=Ms()).refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},sa(a),e}function Zd(e){return e?e=Lr:Lr}function eh(e,t,n,r,s,a){s=Zd(s),null===r.context?r.context=s:r.pendingContext=s,(r=ia(t)).payload={element:n},null!==(a=void 0===a?null:a)&&(r.callback=a),null!==(n=oa(e,r,t))&&(Uc(n,0,t),la(n,e,t))}function th(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function nh(e,t){th(e,t),(e=e.alternate)&&th(e,t)}function rh(e){if(13===e.tag){var t=Ir(e,67108864);null!==t&&Uc(t,0,67108864),nh(e,67108864)}}var sh=!0;function ah(e,t,n,r){var s=_.T;_.T=null;var a=D.p;try{D.p=2,oh(e,t,n,r)}finally{D.p=a,_.T=s}}function ih(e,t,n,r){var s=_.T;_.T=null;var a=D.p;try{D.p=8,oh(e,t,n,r)}finally{D.p=a,_.T=s}}function oh(e,t,n,r){if(sh){var s=lh(r);if(null===s)$u(e,t,r,ch,n),xh(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return fh=wh(fh,e,t,n,r,s),!0;case"dragenter":return mh=wh(mh,e,t,n,r,s),!0;case"mouseover":return ph=wh(ph,e,t,n,r,s),!0;case"pointerover":var a=s.pointerId;return gh.set(a,wh(gh.get(a)||null,e,t,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,yh.set(a,wh(yh.get(a)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(xh(e,r),4&t&&-1<bh.indexOf(e)){for(;null!==s;){var a=$e(s);if(null!==a)switch(a.tag){case 3:if((a=a.stateNode).current.memoizedState.isDehydrated){var i=ve(a.pendingLanes);if(0!==i){var o=a;for(o.pendingLanes|=2,o.entangledLanes|=2;i;){var l=1<<31-he(i);o.entanglements[1]|=l,i&=~l}Su(a),!(6&sc)&&(Sc=ee()+500,Nu(0))}}break;case 13:null!==(o=Ir(a,2))&&Uc(o,0,2),qc(),nh(a,2)}if(null===(a=lh(r))&&$u(e,t,r,ch,n),a===s)break;s=a}null!==s&&r.stopPropagation()}else $u(e,t,r,null,n)}}function lh(e){return uh(e=It(e))}var ch=null;function uh(e){if(ch=null,null!==(e=qe(e))){var t=a(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=i(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ch=e,null}function dh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(te()){case ne:return 2;case re:return 8;case se:case ae:return 32;case ie:return 268435456;default:return 32}default:return 32}}var hh=!1,fh=null,mh=null,ph=null,gh=new Map,yh=new Map,vh=[],bh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xh(e,t){switch(e){case"focusin":case"focusout":fh=null;break;case"dragenter":case"dragleave":mh=null;break;case"mouseover":case"mouseout":ph=null;break;case"pointerover":case"pointerout":gh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":yh.delete(t.pointerId)}}function wh(e,t,n,r,s,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},null!==t&&(null!==(t=$e(t))&&rh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Eh(e){var t=qe(e.target);if(null!==t){var n=a(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=i(n)))return e.blockedOn=t,void function(e,t){var n=D.p;try{return D.p=e,t()}finally{D.p=n}}(e.priority,(function(){if(13===n.tag){var e=Lc();e=Ae(e);var t=Ir(n,e);null!==t&&Uc(t,0,e),nh(n,e)}}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function kh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=lh(e.nativeEvent);if(null!==n)return null!==(t=$e(n))&&rh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Dt=r,n.target.dispatchEvent(r),Dt=null,t.shift()}return!0}function Sh(e,t,n){kh(e)&&n.delete(t)}function Nh(){hh=!1,null!==fh&&kh(fh)&&(fh=null),null!==mh&&kh(mh)&&(mh=null),null!==ph&&kh(ph)&&(ph=null),gh.forEach(Sh),yh.forEach(Sh)}function Th(t,n){t.blockedOn===n&&(t.blockedOn=null,hh||(hh=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Nh)))}var Ch=null;function Rh(t){Ch!==t&&(Ch=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,(function(){Ch===t&&(Ch=null);for(var e=0;e<t.length;e+=3){var n=t[e],r=t[e+1],s=t[e+2];if("function"!=typeof r){if(null===uh(r||n))continue;break}var a=$e(n);null!==a&&(t.splice(e,3),e-=3,Di(a,{pending:!0,data:s,method:n.method,action:r},r,s))}})))}function jh(e){function t(t){return Th(t,e)}null!==fh&&Th(fh,e),null!==mh&&Th(mh,e),null!==ph&&Th(ph,e),gh.forEach(t),yh.forEach(t);for(var n=0;n<vh.length;n++){var r=vh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<vh.length&&null===(n=vh[0]).blockedOn;)Eh(n),null===n.blockedOn&&vh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var s=n[r],a=n[r+1],i=s[Me]||null;if("function"==typeof a)i||Rh(n);else if(i){var o=null;if(a&&a.hasAttribute("formAction")){if(s=a,i=a[Me]||null)o=i.formAction;else if(null!==uh(s))continue}else o=i.action;"function"==typeof o?n[r+1]=o:(n.splice(r,3),r-=3),Rh(n)}}}function Ah(e){this._internalRoot=e}function _h(e){this._internalRoot=e}_h.prototype.render=Ah.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));eh(t.current,Lc(),e,t,null,null)},_h.prototype.unmount=Ah.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;eh(e.current,2,null,e,null,null),qc(),t[Le]=null}},_h.prototype.unstable_scheduleHydration=function(e){if(e){var t=De();e={blockedOn:null,target:e,priority:t};for(var n=0;n<vh.length&&0!==t&&t<vh[n].priority;n++);vh.splice(n,0,e),0===n&&Eh(e)}};var Dh=t.version;if("19.1.0"!==Dh)throw Error(r(527,Dh,"19.1.0"));D.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=a(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,s=t;;){var i=n.return;if(null===i)break;var l=i.alternate;if(null===l){if(null!==(s=i.return)){n=s;continue}break}if(i.child===l.child){for(l=i.child;l;){if(l===n)return o(i),e;if(l===s)return o(i),t;l=l.sibling}throw Error(r(188))}if(n.return!==s.return)n=i,s=l;else{for(var c=!1,u=i.child;u;){if(u===n){c=!0,n=i,s=l;break}if(u===s){c=!0,s=i,n=l;break}u=u.sibling}if(!c){for(u=l.child;u;){if(u===n){c=!0,n=l,s=i;break}if(u===s){c=!0,s=l,n=i;break}u=u.sibling}if(!c)throw Error(r(189))}}if(n.alternate!==s)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?l(e):null)?null:e.stateNode};var Ih={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:_,reconcilerVersion:"19.1.0"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Ph=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ph.isDisabled&&Ph.supportsFiber)try{ce=Ph.inject(Ih),ue=Ph}catch(Lh){}}return be.createRoot=function(e,t){if(!s(e))throw Error(r(299));var n=!1,a="",i=xo,o=wo,l=Eo;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(a=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(o=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Yd(e,1,!1,null,0,n,a,i,o,l,0,null),e[Le]=t.current,Bu(e),new Ah(t)},be.hydrateRoot=function(e,t,n){if(!s(e))throw Error(r(299));var a=!1,i="",o=xo,l=wo,c=Eo,u=null;return null!=n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(o=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Yd(e,1,!0,t,0,a,i,o,l,c,0,u)).context=Zd(null),n=t.current,(i=ia(a=Ae(a=Lc()))).callback=null,oa(n,i,a),n=a,t.current.lanes=n,Ce(t,n),Su(t),e[Le]=t.current,Bu(e),new _h(t)},be.version="19.1.0",be}var Se=(ye||(ye=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),ve.exports=ke()),ve.exports);const Ne={},Te=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map((e=>Promise.resolve(e).then((e=>({status:"fulfilled",value:e})),(e=>({status:"rejected",reason:e}))))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),s=n?.nonce||n?.getAttribute("nonce");r=e(t.map((e=>{if((e=function(e){return"/"+e}(e))in Ne)return;Ne[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script"),r.crossOrigin="",r.href=e,s&&r.setAttribute("nonce",s),document.head.appendChild(r),t?new Promise(((t,n)=>{r.addEventListener("load",t),r.addEventListener("error",(()=>n(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}function s(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then((t=>{for(const e of t||[])"rejected"===e.status&&s(e.reason);return e().catch(s)}))},Ce=Q.createContext({});function Re(e){const t=Q.useRef(null);return null===t.current&&(t.current=e()),t.current}const je="undefined"!=typeof window,Ae=je?Q.useLayoutEffect:Q.useEffect,_e=Q.createContext(null),De=Q.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class Ie extends Q.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,n=e instanceof HTMLElement&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=n-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Pe({children:t,isPresent:n,anchorX:r}){const s=Q.useId(),a=Q.useRef(null),i=Q.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=Q.useContext(De);return Q.useInsertionEffect((()=>{const{width:e,height:t,top:l,left:c,right:u}=i.current;if(n||!a.current||!e||!t)return;const d="left"===r?`left: ${c}`:`right: ${u}`;a.current.dataset.motionPopId=s;const h=document.createElement("style");return o&&(h.nonce=o),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`\n          [data-motion-pop-id="${s}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${t}px !important;\n            ${d}px !important;\n            top: ${l}px !important;\n          }\n        `),()=>{document.head.removeChild(h)}}),[n]),e.jsx(Ie,{isPresent:n,childRef:a,sizeRef:i,children:Q.cloneElement(t,{ref:a})})}const Me=({children:t,initial:n,isPresent:r,onExitComplete:s,custom:a,presenceAffectsLayout:i,mode:o,anchorX:l})=>{const c=Re(Le),u=Q.useId();let d=!0,h=Q.useMemo((()=>(d=!1,{id:u,initial:n,isPresent:r,custom:a,onExitComplete:e=>{c.set(e,!0);for(const t of c.values())if(!t)return;s&&s()},register:e=>(c.set(e,!1),()=>c.delete(e))})),[r,c,s]);return i&&d&&(h={...h}),Q.useMemo((()=>{c.forEach(((e,t)=>c.set(t,!1)))}),[r]),Q.useEffect((()=>{!r&&!c.size&&s&&s()}),[r]),"popLayout"===o&&(t=e.jsx(Pe,{isPresent:r,anchorX:l,children:t})),e.jsx(_e.Provider,{value:h,children:t})};function Le(){return new Map}function Oe(e=!0){const t=Q.useContext(_e);if(null===t)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,a=Q.useId();Q.useEffect((()=>{if(e)return s(a)}),[e]);const i=Q.useCallback((()=>e&&r&&r(a)),[a,r,e]);return!n&&r?[!1,i]:[!0]}const Ue=e=>e.key||"";function Fe(e){const t=[];return Q.Children.forEach(e,(e=>{Q.isValidElement(e)&&t.push(e)})),t}const ze=({children:t,custom:n,initial:r=!0,onExitComplete:s,presenceAffectsLayout:a=!0,mode:i="sync",propagate:o=!1,anchorX:l="left"})=>{const[c,u]=Oe(o),d=Q.useMemo((()=>Fe(t)),[t]),h=o&&!c?[]:d.map(Ue),f=Q.useRef(!0),m=Q.useRef(d),p=Re((()=>new Map)),[g,y]=Q.useState(d),[v,b]=Q.useState(d);Ae((()=>{f.current=!1,m.current=d;for(let e=0;e<v.length;e++){const t=Ue(v[e]);h.includes(t)?p.delete(t):!0!==p.get(t)&&p.set(t,!1)}}),[v,h.length,h.join("-")]);const x=[];if(d!==g){let e=[...d];for(let t=0;t<v.length;t++){const n=v[t],r=Ue(n);h.includes(r)||(e.splice(t,0,n),x.push(n))}return"wait"===i&&x.length&&(e=x),b(Fe(e)),y(d),null}const{forceRender:w}=Q.useContext(Ce);return e.jsx(e.Fragment,{children:v.map((t=>{const g=Ue(t),y=!(o&&!c)&&(d===v||h.includes(g));return e.jsx(Me,{isPresent:y,initial:!(f.current&&!r)&&void 0,custom:n,presenceAffectsLayout:a,mode:i,onExitComplete:y?void 0:()=>{if(!p.has(g))return;p.set(g,!0);let e=!0;p.forEach((t=>{t||(e=!1)})),e&&(w?.(),b(m.current),o&&u?.(),s&&s())},anchorX:l,children:t},g)}))})};function Ve(e,t){-1===e.indexOf(t)&&e.push(t)}function Be(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const qe=(e,t,n)=>n>t?t:n<e?e:n;const $e={},He=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),We=e=>/^0[^.\s]+$/u.test(e);function Ge(e){let t;return()=>(void 0===t&&(t=e()),t)}const Ke=e=>e,Qe=(e,t)=>n=>t(e(n)),Xe=(...e)=>e.reduce(Qe),Je=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r};class Ye{constructor(){this.subscriptions=[]}add(e){return Ve(this.subscriptions,e),()=>Be(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let s=0;s<r;s++){const r=this.subscriptions[s];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ze=e=>1e3*e,et=e=>e/1e3;function tt(e,t){return t?e*(1e3/t):0}const nt=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function rt(e,t,n,r){if(e===t&&n===r)return Ke;const s=t=>function(e,t,n,r,s){let a,i,o=0;do{i=t+(n-t)/2,a=nt(i,r,s)-e,a>0?n=i:t=i}while(Math.abs(a)>1e-7&&++o<12);return i}(t,0,1,e,n);return e=>0===e||1===e?e:nt(s(e),t,r)}const st=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,at=e=>t=>1-e(1-t),it=rt(.33,1.53,.69,.99),ot=at(it),lt=st(ot),ct=e=>(e*=2)<1?.5*ot(e):.5*(2-Math.pow(2,-10*(e-1))),ut=e=>1-Math.sin(Math.acos(e)),dt=at(ut),ht=st(ut),ft=rt(.42,0,1,1),mt=rt(0,0,.58,1),pt=rt(.42,0,.58,1),gt=e=>Array.isArray(e)&&"number"==typeof e[0],yt={linear:Ke,easeIn:ft,easeInOut:pt,easeOut:mt,circIn:ut,circInOut:ht,circOut:dt,backIn:ot,backInOut:lt,backOut:it,anticipate:ct},vt=e=>{if(gt(e)){e.length;const[t,n,r,s]=e;return rt(t,n,r,s)}return"string"==typeof e?yt[e]:e},bt=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function xt(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,i=bt.reduce(((e,t)=>(e[t]=function(e){let t=new Set,n=new Set,r=!1,s=!1;const a=new WeakSet;let i={delta:0,timestamp:0,isProcessing:!1};function o(t){a.has(t)&&(l.schedule(t),e()),t(i)}const l={schedule:(e,s=!1,i=!1)=>{const o=i&&r?t:n;return s&&a.add(e),o.has(e)||o.add(e),e},cancel:e=>{n.delete(e),a.delete(e)},process:e=>{i=e,r?s=!0:(r=!0,[t,n]=[n,t],t.forEach(o),t.clear(),r=!1,s&&(s=!1,l.process(e)))}};return l}(a),e)),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:u,update:d,preRender:h,render:f,postRender:m}=i,p=()=>{const a=$e.useManualTiming?s.timestamp:performance.now();n=!1,$e.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(a-s.timestamp,40),1)),s.timestamp=a,s.isProcessing=!0,o.process(s),l.process(s),c.process(s),u.process(s),d.process(s),h.process(s),f.process(s),m.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(p))};return{schedule:bt.reduce(((t,a)=>{const o=i[a];return t[a]=(t,a=!1,i=!1)=>(n||(n=!0,r=!0,s.isProcessing||e(p)),o.schedule(t,a,i)),t}),{}),cancel:e=>{for(let t=0;t<bt.length;t++)i[bt[t]].cancel(e)},state:s,steps:i}}const{schedule:wt,cancel:Et,state:kt,steps:St}=xt("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:Ke,!0);let Nt;function Tt(){Nt=void 0}const Ct={now:()=>(void 0===Nt&&Ct.set(kt.isProcessing||$e.useManualTiming?kt.timestamp:performance.now()),Nt),set:e=>{Nt=e,queueMicrotask(Tt)}},Rt=e=>t=>"string"==typeof t&&t.startsWith(e),jt=Rt("--"),At=Rt("var(--"),_t=e=>!!At(e)&&Dt.test(e.split("/*")[0].trim()),Dt=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,It={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},Pt={...It,transform:e=>qe(0,1,e)},Mt={...It,default:1},Lt=e=>Math.round(1e5*e)/1e5,Ot=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;const Ut=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Ft=(e,t)=>n=>Boolean("string"==typeof n&&Ut.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),zt=(e,t,n)=>r=>{if("string"!=typeof r)return r;const[s,a,i,o]=r.match(Ot);return{[e]:parseFloat(s),[t]:parseFloat(a),[n]:parseFloat(i),alpha:void 0!==o?parseFloat(o):1}},Vt={...It,transform:e=>Math.round((e=>qe(0,255,e))(e))},Bt={test:Ft("rgb","red"),parse:zt("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Vt.transform(e)+", "+Vt.transform(t)+", "+Vt.transform(n)+", "+Lt(Pt.transform(r))+")"};const qt={test:Ft("#"),parse:function(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}},transform:Bt.transform},$t=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),Ht=$t("deg"),Wt=$t("%"),Gt=$t("px"),Kt=$t("vh"),Qt=$t("vw"),Xt=(()=>({...Wt,parse:e=>Wt.parse(e)/100,transform:e=>Wt.transform(100*e)}))(),Jt={test:Ft("hsl","hue"),parse:zt("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Wt.transform(Lt(t))+", "+Wt.transform(Lt(n))+", "+Lt(Pt.transform(r))+")"},Yt={test:e=>Bt.test(e)||qt.test(e)||Jt.test(e),parse:e=>Bt.test(e)?Bt.parse(e):Jt.test(e)?Jt.parse(e):qt.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?Bt.transform(e):Jt.transform(e)},Zt=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;const en="number",tn="color",nn=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function rn(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let a=0;const i=t.replace(nn,(e=>(Yt.test(e)?(r.color.push(a),s.push(tn),n.push(Yt.parse(e))):e.startsWith("var(")?(r.var.push(a),s.push("var"),n.push(e)):(r.number.push(a),s.push(en),n.push(parseFloat(e))),++a,"${}"))).split("${}");return{values:n,split:i,indexes:r,types:s}}function sn(e){return rn(e).values}function an(e){const{split:t,types:n}=rn(e),r=t.length;return e=>{let s="";for(let a=0;a<r;a++)if(s+=t[a],void 0!==e[a]){const t=n[a];s+=t===en?Lt(e[a]):t===tn?Yt.transform(e[a]):e[a]}return s}}const on=e=>"number"==typeof e?0:e;const ln={test:function(e){return isNaN(e)&&"string"==typeof e&&(e.match(Ot)?.length||0)+(e.match(Zt)?.length||0)>0},parse:sn,createTransformer:an,getAnimatableNone:function(e){const t=sn(e);return an(e)(t.map(on))}};function cn(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function un(e,t){return n=>n>0?t:e}const dn=(e,t,n)=>e+(t-e)*n,hn=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},fn=[qt,Bt,Jt];function mn(e){const t=(e=>fn.find((t=>t.test(e))))(e);if(!Boolean(t))return!1;let n=t.parse(e);return t===Jt&&(n=function({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,n/=100;let s=0,a=0,i=0;if(t/=100){const r=n<.5?n*(1+t):n+t-n*t,o=2*n-r;s=cn(o,r,e+1/3),a=cn(o,r,e),i=cn(o,r,e-1/3)}else s=a=i=n;return{red:Math.round(255*s),green:Math.round(255*a),blue:Math.round(255*i),alpha:r}}(n)),n}const pn=(e,t)=>{const n=mn(e),r=mn(t);if(!n||!r)return un(e,t);const s={...n};return e=>(s.red=hn(n.red,r.red,e),s.green=hn(n.green,r.green,e),s.blue=hn(n.blue,r.blue,e),s.alpha=dn(n.alpha,r.alpha,e),Bt.transform(s))},gn=new Set(["none","hidden"]);function yn(e,t){return n=>dn(e,t,n)}function vn(e){return"number"==typeof e?yn:"string"==typeof e?_t(e)?un:Yt.test(e)?pn:wn:Array.isArray(e)?bn:"object"==typeof e?Yt.test(e)?pn:xn:un}function bn(e,t){const n=[...e],r=n.length,s=e.map(((e,n)=>vn(e)(e,t[n])));return e=>{for(let t=0;t<r;t++)n[t]=s[t](e);return n}}function xn(e,t){const n={...e,...t},r={};for(const s in n)void 0!==e[s]&&void 0!==t[s]&&(r[s]=vn(e[s])(e[s],t[s]));return e=>{for(const t in r)n[t]=r[t](e);return n}}const wn=(e,t)=>{const n=ln.createTransformer(t),r=rn(e),s=rn(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?gn.has(e)&&!s.values.length||gn.has(t)&&!r.values.length?function(e,t){return gn.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):Xe(bn(function(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const a=t.types[s],i=e.indexes[a][r[a]],o=e.values[i]??0;n[s]=o,r[a]++}return n}(r,s),s.values),n):un(e,t)};function En(e,t,n){if("number"==typeof e&&"number"==typeof t&&"number"==typeof n)return dn(e,t,n);return vn(e)(e,t)}const kn=e=>{const t=({timestamp:t})=>e(t);return{start:()=>wt.update(t,!0),stop:()=>Et(t),now:()=>kt.isProcessing?kt.timestamp:Ct.now()}},Sn=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let a=0;a<s;a++)r+=e(a/(s-1))+", ";return`linear(${r.substring(0,r.length-2)})`},Nn=2e4;function Tn(e){let t=0;let n=e.next(t);for(;!n.done&&t<Nn;)t+=50,n=e.next(t);return t>=Nn?1/0:t}function Cn(e,t,n){const r=Math.max(t-5,0);return tt(n-e(r),t-r)}const Rn=100,jn=10,An=1,_n=0,Dn=800,In=.3,Pn=.3,Mn={granular:.01,default:2},Ln={granular:.005,default:.5},On=.01,Un=10,Fn=.05,zn=1;function Vn({duration:e=Dn,bounce:t=In,velocity:n=_n,mass:r=An}){let s,a,i=1-t;i=qe(Fn,zn,i),e=qe(On,Un,et(e)),i<1?(s=t=>{const r=t*i,s=r*e;return.001-(r-n)/qn(t,i)*Math.exp(-s)},a=t=>{const r=t*i*e,a=r*n+n,o=Math.pow(i,2)*Math.pow(t,2)*e,l=Math.exp(-r),c=qn(Math.pow(t,2),i);return(.001-s(t)>0?-1:1)*((a-o)*l)/c}):(s=t=>Math.exp(-t*e)*((t-n)*e+1)-.001,a=t=>Math.exp(-t*e)*(e*e*(n-t)));const o=function(e,t,n){let r=n;for(let s=1;s<Bn;s++)r-=e(r)/t(r);return r}(s,a,5/e);if(e=Ze(e),isNaN(o))return{stiffness:Rn,damping:jn,duration:e};{const t=Math.pow(o,2)*r;return{stiffness:t,damping:2*i*Math.sqrt(r*t),duration:e}}}const Bn=12;function qn(e,t){return e*Math.sqrt(1-t*t)}const $n=["duration","bounce"],Hn=["stiffness","damping","mass"];function Wn(e,t){return t.some((t=>void 0!==e[t]))}function Gn(e=Pn,t=In){const n="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const a=n.keyframes[0],i=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=function(e){let t={velocity:_n,stiffness:Rn,damping:jn,mass:An,isResolvedFromDuration:!1,...e};if(!Wn(e,Hn)&&Wn(e,$n))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(1.2*n),s=r*r,a=2*qe(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:An,stiffness:s,damping:a}}else{const n=Vn(e);t={...t,...n,mass:An},t.isResolvedFromDuration=!0}return t}({...n,velocity:-et(n.velocity||0)}),m=h||0,p=c/(2*Math.sqrt(l*u)),g=i-a,y=et(Math.sqrt(l/u)),v=Math.abs(g)<5;let b;if(r||(r=v?Mn.granular:Mn.default),s||(s=v?Ln.granular:Ln.default),p<1){const e=qn(y,p);b=t=>{const n=Math.exp(-p*y*t);return i-n*((m+p*y*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===p)b=e=>i-Math.exp(-y*e)*(g+(m+y*g)*e);else{const e=y*Math.sqrt(p*p-1);b=t=>{const n=Math.exp(-p*y*t),r=Math.min(e*t,300);return i-n*((m+p*y*g)*Math.sinh(r)+e*g*Math.cosh(r))/e}}const x={calculatedDuration:f&&d||null,next:e=>{const t=b(e);if(f)o.done=e>=d;else{let n=0===e?m:0;p<1&&(n=0===e?Ze(m):Cn(b,e,t));const a=Math.abs(n)<=r,l=Math.abs(i-t)<=s;o.done=a&&l}return o.value=o.done?i:t,o},toString:()=>{const e=Math.min(Tn(x),Nn),t=Sn((t=>x.next(e*t).value),e,30);return e+"ms "+t},toTransition:()=>{}};return x}function Kn({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:i,min:o,max:l,restDelta:c=.5,restSpeed:u}){const d=e[0],h={done:!1,value:d},f=e=>void 0===o?l:void 0===l||Math.abs(o-e)<Math.abs(l-e)?o:l;let m=n*t;const p=d+m,g=void 0===i?p:i(p);g!==p&&(m=g-d);const y=e=>-m*Math.exp(-e/r),v=e=>g+y(e),b=e=>{const t=y(e),n=v(e);h.done=Math.abs(t)<=c,h.value=h.done?g:n};let x,w;const E=e=>{(e=>void 0!==o&&e<o||void 0!==l&&e>l)(h.value)&&(x=e,w=Gn({keyframes:[h.value,f(h.value)],velocity:Cn(v,e,h.value),damping:s,stiffness:a,restDelta:c,restSpeed:u}))};return E(0),{calculatedDuration:null,next:e=>{let t=!1;return w||void 0!==x||(t=!0,b(e),E(e)),void 0!==x&&e>=x?w.next(e-x):(!t&&b(e),h)}}}function Qn(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const a=e.length;if(t.length,1===a)return()=>t[0];if(2===a&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=function(e,t,n){const r=[],s=n||$e.mix||En,a=e.length-1;for(let i=0;i<a;i++){let n=s(e[i],e[i+1]);if(t){const e=Array.isArray(t)?t[i]||Ke:t;n=Xe(e,n)}r.push(n)}return r}(t,r,s),l=o.length,c=n=>{if(i&&n<e[0])return t[0];let r=0;if(l>1)for(;r<e.length-2&&!(n<e[r+1]);r++);const s=Je(e[r],e[r+1],n);return o[r](s)};return n?t=>c(qe(e[0],e[a-1],t)):c}function Xn(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=Je(0,t,r);e.push(dn(n,1,s))}}(t,e.length-1),t}function Jn({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=(e=>Array.isArray(e)&&"number"!=typeof e[0])(r)?r.map(vt):vt(r),a={done:!1,value:t[0]},i=function(e,t){return e.map((e=>e*t))}(n&&n.length===t.length?n:Xn(t),e),o=Qn(i,t,{ease:Array.isArray(s)?s:(l=t,c=s,l.map((()=>c||pt)).splice(0,l.length-1))});var l,c;return{calculatedDuration:e,next:t=>(a.value=o(t),a.done=t>=e,a)}}Gn.applyToOptions=e=>{const t=function(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(Tn(r),Nn);return{type:"keyframes",ease:e=>r.next(s*e).value/t,duration:et(s)}}(e,100,Gn);return e.ease=t.ease,e.duration=Ze(t.duration),e.type="keyframes",e};const Yn=e=>null!==e;function Zn(e,{repeat:t,repeatType:n="loop"},r,s=1){const a=e.filter(Yn),i=s<0||t&&"loop"!==n&&t%2==1?0:a.length-1;return i&&void 0!==r?r:a[i]}const er={decay:Kn,inertia:Kn,tween:Jn,keyframes:Jn,spring:Gn};function tr(e){"string"==typeof e.type&&(e.type=er[e.type])}class nr{constructor(){this.count=0,this.updateFinished()}get finished(){return this._finished}updateFinished(){this.count++,this._finished=new Promise((e=>{this.resolve=e}))}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const rr=e=>e/100;class sr extends nr{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:e}=this.options;if(e&&e.updatedAt!==Ct.now()&&this.tick(Ct.now()),this.isStopped=!0,"idle"===this.state)return;this.teardown();const{onStop:t}=this.options;t&&t()},this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;tr(e);const{type:t=Jn,repeat:n=0,repeatDelay:r=0,repeatType:s,velocity:a=0}=e;let{keyframes:i}=e;const o=t||Jn;o!==Jn&&"number"!=typeof i[0]&&(this.mixKeyframes=Xe(rr,En(i[0],i[1])),i=[0,100]);const l=o({...e,keyframes:i});"mirror"===s&&(this.mirroredGenerator=o({...e,keyframes:[...i].reverse(),velocity:-a})),null===l.calculatedDuration&&(l.calculatedDuration=Tn(l));const{calculatedDuration:c}=l;this.calculatedDuration=c,this.resolvedDuration=c+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=l}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:n,totalDuration:r,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:i,calculatedDuration:o}=this;if(null===this.startTime)return n.next(0);const{delay:l=0,keyframes:c,repeat:u,repeatType:d,repeatDelay:h,type:f,onUpdate:m,finalKeyframe:p}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?g<0:g>r;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=r);let v=this.currentTime,b=n;if(u){const e=Math.min(this.currentTime,r)/i;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,u+1);Boolean(t%2)&&("reverse"===d?(n=1-n,h&&(n-=h/i)):"mirror"===d&&(b=a)),v=qe(0,1,n)*i}const x=y?{done:!1,value:c[0]}:b.next(v);s&&(x.value=s(x.value));let{done:w}=x;y||null===o||(w=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const E=null===this.holdTime&&("finished"===this.state||"running"===this.state&&w);return E&&f!==Kn&&(x.value=Zn(c,this.options,p,this.speed)),m&&m(x.value),E&&this.finish(),x}then(e,t){return this.finished.then(e,t)}get duration(){return et(this.calculatedDuration)}get time(){return et(this.currentTime)}set time(e){e=Ze(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Ct.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=et(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=kn,onPlay:t,startTime:n}=this.options;this.driver||(this.driver=e((e=>this.tick(e)))),t&&t();const r=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=r):null!==this.holdTime?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ct.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown()}teardown(){this.notifyFinished(),this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),e.observe(this)}}const ar=e=>180*e/Math.PI,ir=e=>{const t=ar(Math.atan2(e[1],e[0]));return lr(t)},or={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:ir,rotateZ:ir,skewX:e=>ar(Math.atan(e[1])),skewY:e=>ar(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},lr=e=>((e%=360)<0&&(e+=360),e),cr=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),ur=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),dr={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:cr,scaleY:ur,scale:e=>(cr(e)+ur(e))/2,rotateX:e=>lr(ar(Math.atan2(e[6],e[5]))),rotateY:e=>lr(ar(Math.atan2(-e[2],e[0]))),rotateZ:ir,rotate:ir,skewX:e=>ar(Math.atan(e[4])),skewY:e=>ar(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function hr(e){return e.includes("scale")?1:0}function fr(e,t){if(!e||"none"===e)return hr(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=dr,s=n;else{const t=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=or,s=t}if(!s)return hr(t);const a=r[t],i=s[1].split(",").map(mr);return"function"==typeof a?a(i):i[a]}function mr(e){return parseFloat(e.trim())}const pr=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],gr=(()=>new Set(pr))(),yr=e=>e===It||e===Gt,vr=new Set(["x","y","z"]),br=pr.filter((e=>!vr.has(e)));const xr={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>fr(t,"x"),y:(e,{transform:t})=>fr(t,"y")};xr.translateX=xr.x,xr.translateY=xr.y;const wr=new Set;let Er=!1,kr=!1,Sr=!1;function Nr(){if(kr){const e=Array.from(wr).filter((e=>e.needsMeasurement)),t=new Set(e.map((e=>e.element))),n=new Map;t.forEach((e=>{const t=function(e){const t=[];return br.forEach((n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),t}(e);t.length&&(n.set(e,t),e.render())})),e.forEach((e=>e.measureInitialState())),t.forEach((e=>{e.render();const t=n.get(e);t&&t.forEach((([t,n])=>{e.getValue(t)?.set(n)}))})),e.forEach((e=>e.measureEndState())),e.forEach((e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)}))}kr=!1,Er=!1,wr.forEach((e=>e.complete(Sr))),wr.clear()}function Tr(){wr.forEach((e=>{e.readKeyframes(),e.needsMeasurement&&(kr=!0)}))}class Cr{constructor(e,t,n,r,s,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=r,this.element=s,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(wr.add(this),Er||(Er=!0,wt.read(Tr),wt.resolveKeyframes(Nr))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:r}=this;if(null===e[0]){const s=r?.get(),a=e[e.length-1];if(void 0!==s)e[0]=s;else if(n&&t){const r=n.readValue(t,a);null!=r&&(e[0]=r)}void 0===e[0]&&(e[0]=a),r&&void 0===s&&r.set(e[0])}!function(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),wr.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,wr.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Rr=Ge((()=>void 0!==window.ScrollTimeline)),jr={};function Ar(e,t){const n=Ge(e);return()=>jr[t]??n()}const _r=Ar((()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0}),"linearEasing"),Dr=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Ir={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Dr([0,.65,.55,1]),circOut:Dr([.55,0,1,.45]),backIn:Dr([.31,.01,.66,-.59]),backOut:Dr([.33,1.53,.69,.99])};function Pr(e,t){return e?"function"==typeof e?_r()?Sn(e,t):"ease-out":gt(e)?Dr(e):Array.isArray(e)?e.map((e=>Pr(e,t)||Ir.easeOut)):Ir[e]:void 0}function Mr(e,t,n,{delay:r=0,duration:s=300,repeat:a=0,repeatType:i="loop",ease:o="easeOut",times:l}={},c=void 0){const u={[t]:n};l&&(u.offset=l);const d=Pr(o,s);Array.isArray(d)&&(u.easing=d);const h={delay:r,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:a+1,direction:"reverse"===i?"alternate":"normal"};c&&(h.pseudoElement=c);return e.animate(u,h)}function Lr(e){return"function"==typeof e&&"applyToOptions"in e}class Or extends nr{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:n,keyframes:r,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:i,onComplete:o}=e;this.isPseudoElement=Boolean(s),this.allowFlatten=a,this.options=e,e.type;const l=function({type:e,...t}){return Lr(e)&&_r()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}(e);this.animation=Mr(t,n,r,l,s),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const e=Zn(r,this.options,i,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,n){(e=>e.startsWith("--"))(t)?e.style.setProperty(t,n):e.style[t]=n}(t,n,e),this.animation.cancel()}o?.(),this.notifyFinished()},this.animation.oncancel=()=>this.notifyFinished()}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch(e){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return et(Number(e))}get time(){return et(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Ze(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&Rr()?(this.animation.timeline=e,Ke):t(this)}}const Ur={anticipate:ct,backInOut:lt,circInOut:ht};function Fr(e){"string"==typeof e.ease&&e.ease in Ur&&(e.ease=Ur[e.ease])}class zr extends Or{constructor(e){Fr(e),tr(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:n,onComplete:r,element:s,...a}=this.options;if(!t)return;if(void 0!==e)return void t.set(e);const i=new sr({...a,autoplay:!1}),o=Ze(this.finishedTime??this.time);t.setWithVelocity(i.sample(o-10).value,i.sample(o).value,10),i.stop()}}const Vr=(e,t)=>"zIndex"!==t&&(!("number"!=typeof e&&!Array.isArray(e))||!("string"!=typeof e||!ln.test(e)&&"0"!==e||e.startsWith("url(")));const Br=new Set(["opacity","clipPath","filter","transform"]),qr=Ge((()=>Object.hasOwnProperty.call(Element.prototype,"animate")));class $r extends nr{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:a="loop",keyframes:i,name:o,motionValue:l,element:c,...u}){super(),this.stop=()=>{this._animation?(this._animation.stop(),this.stopTimeline?.()):this.keyframeResolver?.cancel()},this.createdAt=Ct.now();const d={autoplay:e,delay:t,type:n,repeat:r,repeatDelay:s,repeatType:a,name:o,motionValue:l,element:c,...u},h=c?.KeyframeResolver||Cr;this.keyframeResolver=new h(i,((e,t,n)=>this.onKeyframesResolved(e,t,d,!n)),o,l,c),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,n,r){this.keyframeResolver=void 0;const{name:s,type:a,velocity:i,delay:o,isHandoff:l,onUpdate:c}=n;this.resolvedAt=Ct.now(),function(e,t,n,r){const s=e[0];if(null===s)return!1;if("display"===t||"visibility"===t)return!0;const a=e[e.length-1],i=Vr(s,t),o=Vr(a,t);return!(!i||!o)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||Lr(n))&&r)}(e,s,a,i)||(!$e.instantAnimations&&o||c?.(Zn(e,n,t)),e[0]=e[e.length-1],n.duration=0,n.repeat=0);const u={startTime:r?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t,...n,keyframes:e},d=!l&&function(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:a,type:i}=e;if(!(t&&t.owner&&t.owner.current instanceof HTMLElement))return!1;const{onUpdate:o,transformTemplate:l}=t.owner.getProps();return qr()&&n&&Br.has(n)&&("transform"!==n||!l)&&!o&&!r&&"mirror"!==s&&0!==a&&"inertia"!==i}(u)?new zr({...u,element:u.motionValue.owner.current}):new sr(u);d.finished.then((()=>this.notifyFinished())).catch(Ke),this.pendingTimeline&&(this.stopTimeline=d.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=d}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then((()=>{}))}get animation(){return this._animation||(Sr=!0,Tr(),Nr(),Sr=!1),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this.animation.cancel()}}const Hr=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Wr(e,t,n=1){const[r,s]=function(e){const t=Hr.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const e=a.trim();return He(e)?parseFloat(e):e}return _t(s)?Wr(s,t,n+1):s}function Gr(e,t){return e?.[t]??e?.default??e}const Kr=new Set(["width","height","top","left","right","bottom",...pr]),Qr=e=>t=>t.test(e),Xr=[It,Gt,Wt,Ht,Qt,Kt,{test:e=>"auto"===e,parse:e=>e}],Jr=e=>Xr.find(Qr(e));const Yr=new Set(["brightness","contrast","saturate","opacity"]);function Zr(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(Ot)||[];if(!r)return e;const s=n.replace(r,"");let a=Yr.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+s+")"}const es=/\b([a-z-]*)\(.*?\)/gu,ts={...ln,getAnimatableNone:e=>{const t=e.match(es);return t?t.map(Zr).join(" "):e}},ns={...It,transform:Math.round},rs={borderWidth:Gt,borderTopWidth:Gt,borderRightWidth:Gt,borderBottomWidth:Gt,borderLeftWidth:Gt,borderRadius:Gt,radius:Gt,borderTopLeftRadius:Gt,borderTopRightRadius:Gt,borderBottomRightRadius:Gt,borderBottomLeftRadius:Gt,width:Gt,maxWidth:Gt,height:Gt,maxHeight:Gt,top:Gt,right:Gt,bottom:Gt,left:Gt,padding:Gt,paddingTop:Gt,paddingRight:Gt,paddingBottom:Gt,paddingLeft:Gt,margin:Gt,marginTop:Gt,marginRight:Gt,marginBottom:Gt,marginLeft:Gt,backgroundPositionX:Gt,backgroundPositionY:Gt,...{rotate:Ht,rotateX:Ht,rotateY:Ht,rotateZ:Ht,scale:Mt,scaleX:Mt,scaleY:Mt,scaleZ:Mt,skew:Ht,skewX:Ht,skewY:Ht,distance:Gt,translateX:Gt,translateY:Gt,translateZ:Gt,x:Gt,y:Gt,z:Gt,perspective:Gt,transformPerspective:Gt,opacity:Pt,originX:Xt,originY:Xt,originZ:Gt},zIndex:ns,fillOpacity:Pt,strokeOpacity:Pt,numOctaves:ns},ss={...rs,color:Yt,backgroundColor:Yt,outlineColor:Yt,fill:Yt,stroke:Yt,borderColor:Yt,borderTopColor:Yt,borderRightColor:Yt,borderBottomColor:Yt,borderLeftColor:Yt,filter:ts,WebkitFilter:ts},as=e=>ss[e];function is(e,t){let n=as(e);return n!==ts&&(n=ln),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const os=new Set(["auto","none","0"]);class ls extends Cr{constructor(e,t,n,r,s){super(e,t,n,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let o=0;o<e.length;o++){let n=e[o];if("string"==typeof n&&(n=n.trim(),_t(n))){const r=Wr(n,t.current);void 0!==r&&(e[o]=r),o===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!Kr.has(n)||2!==e.length)return;const[r,s]=e,a=Jr(r),i=Jr(s);if(a!==i)if(yr(a)&&yr(i))for(let o=0;o<e.length;o++){const t=e[o];"string"==typeof t&&(e[o]=parseFloat(t))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let s=0;s<e.length;s++)(null===e[s]||("number"==typeof(r=e[s])?0===r:null===r||"none"===r||"0"===r||We(r)))&&n.push(s);var r;n.length&&function(e,t,n){let r,s=0;for(;s<e.length&&!r;){const t=e[s];"string"==typeof t&&!os.has(t)&&rn(t).values.length&&(r=e[s]),s++}if(r&&n)for(const a of t)e[a]=is(n,r)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=xr[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];void 0!==r&&e.getValue(n,r).jump(r,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const r=e.getValue(t);r&&r.jump(this.measuredOrigin,!1);const s=n.length-1,a=n[s];n[s]=xr[t](e.measureViewportBox(),window.getComputedStyle(e.current)),null!==a&&void 0===this.finalKeyframe&&(this.finalKeyframe=a),this.removedTransforms?.length&&this.removedTransforms.forEach((([t,n])=>{e.getValue(t).set(n)})),this.resolveNoneKeyframes()}}const{schedule:cs}=xt(queueMicrotask,!1),us={x:!1,y:!1};function ds(){return us.x||us.y}function hs(e,t){const n=function(e,t,n){if(e instanceof EventTarget)return[e];if("string"==typeof e){let t=document;const r=n?.[e]??t.querySelectorAll(e);return r?Array.from(r):[]}return Array.from(e)}(e),r=new AbortController;return[n,{passive:!0,...t,signal:r.signal},()=>r.abort()]}function fs(e){return!("touch"===e.pointerType||ds())}const ms=(e,t)=>!!t&&(e===t||ms(e,t.parentElement)),ps=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary,gs=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const ys=new WeakSet;function vs(e){return t=>{"Enter"===t.key&&e(t)}}function bs(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function xs(e){return ps(e)&&!ds()}function ws(e,t,n={}){const[r,s,a]=hs(e,n),i=e=>{const r=e.currentTarget;if(!xs(e)||ys.has(r))return;ys.add(r);const a=t(r,e),i=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),xs(e)&&ys.has(r)&&(ys.delete(r),"function"==typeof a&&a(e,{success:t}))},o=e=>{i(e,r===window||r===document||n.useGlobalTarget||ms(r,e.target))},l=e=>{i(e,!1)};window.addEventListener("pointerup",o,s),window.addEventListener("pointercancel",l,s)};return r.forEach((e=>{var t;(n.useGlobalTarget?window:e).addEventListener("pointerdown",i,s),e instanceof HTMLElement&&(e.addEventListener("focus",(e=>((e,t)=>{const n=e.currentTarget;if(!n)return;const r=vs((()=>{if(ys.has(n))return;bs(n,"down");const e=vs((()=>{bs(n,"up")}));n.addEventListener("keyup",e,t),n.addEventListener("blur",(()=>bs(n,"cancel")),t)}));n.addEventListener("keydown",r,t),n.addEventListener("blur",(()=>n.removeEventListener("keydown",r)),t)})(e,s))),t=e,gs.has(t.tagName)||-1!==t.tabIndex||e.hasAttribute("tabindex")||(e.tabIndex=0))})),a}const Es={current:void 0};class ks{constructor(e,t={}){this.version="__VERSION__",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(e,t=!0)=>{const n=Ct.now();this.updatedAt!==n&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&this.events.change?.notify(this.current),t&&this.events.renderRequest?.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){var t;this.current=e,this.updatedAt=Ct.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Ye);const n=this.events[e].add(t);return"change"===e?()=>{n(),wt.read((()=>{this.events.change.getSize()||this.stop()}))}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return Es.current&&Es.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Ct.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return tt(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise((t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()})).then((()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()}))}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ss(e,t){return new ks(e,t)}const Ns=[...Xr,Yt,ln],Ts=(e,t)=>t&&"number"==typeof e?t.transform(e):e,Cs=Q.createContext({strict:!1}),Rs={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},js={};for(const L_ in Rs)js[L_]={isEnabled:e=>Rs[L_].some((t=>!!e[t]))};const As=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function _s(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||As.has(e)}let Ds=e=>!_s(e);try{(Is=require("@emotion/is-prop-valid").default)&&(Ds=e=>e.startsWith("on")?!_s(e):Is(e))}catch{}var Is;function Ps(e){if("undefined"==typeof Proxy)return e;const t=new Map;return new Proxy(((...t)=>e(...t)),{get:(n,r)=>"create"===r?e:(t.has(r)||t.set(r,e(r)),t.get(r))})}const Ms=Q.createContext({});function Ls(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}function Os(e){return"string"==typeof e||Array.isArray(e)}const Us=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Fs=["initial",...Us];function zs(e){return Ls(e.animate)||Fs.some((t=>Os(e[t])))}function Vs(e){return Boolean(zs(e)||e.variants)}function Bs(e){const{initial:t,animate:n}=function(e,t){if(zs(e)){const{initial:t,animate:n}=e;return{initial:!1===t||Os(t)?t:void 0,animate:Os(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,Q.useContext(Ms));return Q.useMemo((()=>({initial:t,animate:n})),[qs(t),qs(n)])}function qs(e){return Array.isArray(e)?e.join(" "):e}const $s=Symbol.for("motionComponentSymbol");function Hs(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function Ws(e,t,n){return Q.useCallback((r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&("function"==typeof n?n(r):Hs(n)&&(n.current=r))}),[t])}const Gs=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Ks="data-"+Gs("framerAppearId"),Qs=Q.createContext({});function Xs(e,t,n,r,s){const{visualElement:a}=Q.useContext(Ms),i=Q.useContext(Cs),o=Q.useContext(_e),l=Q.useContext(De).reducedMotion,c=Q.useRef(null);r=r||i.renderer,!c.current&&r&&(c.current=r(e,{visualState:t,parent:a,props:n,presenceContext:o,blockInitialAnimation:!!o&&!1===o.initial,reducedMotionConfig:l}));const u=c.current,d=Q.useContext(Qs);!u||u.projection||!s||"html"!==u.type&&"svg"!==u.type||function(e,t,n,r){const{layoutId:s,layout:a,drag:i,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Js(e.parent)),e.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:Boolean(i)||o&&Hs(o),visualElement:e,animationType:"string"==typeof a?a:"both",initialPromotionConfig:r,crossfade:u,layoutScroll:l,layoutRoot:c})}(c.current,n,s,d);const h=Q.useRef(!1);Q.useInsertionEffect((()=>{u&&h.current&&u.update(n,o)}));const f=n[Ks],m=Q.useRef(Boolean(f)&&!window.MotionHandoffIsComplete?.(f)&&window.MotionHasOptimisedAnimation?.(f));return Ae((()=>{u&&(h.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),cs.render(u.render),m.current&&u.animationState&&u.animationState.animateChanges())})),Q.useEffect((()=>{u&&(!m.current&&u.animationState&&u.animationState.animateChanges(),m.current&&(queueMicrotask((()=>{window.MotionHandoffMarkAsComplete?.(f)})),m.current=!1))})),u}function Js(e){if(e)return!1!==e.options.allowProjection?e.projection:Js(e.parent)}function Ys({preloadedFeatures:t,createVisualElement:n,useRender:r,useVisualState:s,Component:a}){function i(t,i){let o;const l={...Q.useContext(De),...t,layoutId:Zs(t)},{isStatic:c}=l,u=Bs(t),d=s(t,c);if(!c&&je){Q.useContext(Cs).strict;const e=function(e){const{drag:t,layout:n}=js;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(l);o=e.MeasureLayout,u.visualElement=Xs(a,d,l,n,e.ProjectionNode)}return e.jsxs(Ms.Provider,{value:u,children:[o&&u.visualElement?e.jsx(o,{visualElement:u.visualElement,...l}):null,r(a,t,Ws(d,u.visualElement,i),d,c,u.visualElement)]})}t&&function(e){for(const t in e)js[t]={...js[t],...e[t]}}(t),i.displayName=`motion.${"string"==typeof a?a:`create(${a.displayName??a.name??""})`}`;const o=Q.forwardRef(i);return o[$s]=a,o}function Zs({layoutId:e}){const t=Q.useContext(Ce).id;return t&&void 0!==e?t+"-"+e:e}const ea={};function ta(e,{layout:t,layoutId:n}){return gr.has(e)||e.startsWith("origin")||(t||void 0!==n)&&(!!ea[e]||"opacity"===e)}const na=e=>Boolean(e&&e.getVelocity),ra={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},sa=pr.length;function aa(e,t,n){const{style:r,vars:s,transformOrigin:a}=e;let i=!1,o=!1;for(const l in t){const e=t[l];if(gr.has(l))i=!0;else if(jt(l))s[l]=e;else{const t=Ts(e,rs[l]);l.startsWith("origin")?(o=!0,a[l]=t):r[l]=t}}if(t.transform||(i||n?r.transform=function(e,t,n){let r="",s=!0;for(let a=0;a<sa;a++){const i=pr[a],o=e[i];if(void 0===o)continue;let l=!0;if(l="number"==typeof o?o===(i.startsWith("scale")?1:0):0===parseFloat(o),!l||n){const e=Ts(o,rs[i]);l||(s=!1,r+=`${ra[i]||i}(${e}) `),n&&(t[i]=e)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}(t,e.transform,n):r.transform&&(r.transform="none")),o){const{originX:e="50%",originY:t="50%",originZ:n=0}=a;r.transformOrigin=`${e} ${t} ${n}`}}const ia=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function oa(e,t,n){for(const r in t)na(t[r])||ta(r,n)||(e[r]=t[r])}function la(e,t){const n={};return oa(n,e.style||{},e),Object.assign(n,function({transformTemplate:e},t){return Q.useMemo((()=>{const n={style:{},transform:{},transformOrigin:{},vars:{}};return aa(n,t,e),Object.assign({},n.vars,n.style)}),[t])}(e,t)),n}function ca(e,t){const n={},r=la(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const ua=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function da(e){return"string"==typeof e&&!e.includes("-")&&!!(ua.indexOf(e)>-1||/[A-Z]/u.test(e))}const ha={offset:"stroke-dashoffset",array:"stroke-dasharray"},fa={offset:"strokeDashoffset",array:"strokeDasharray"};function ma(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:a=1,pathOffset:i=0,...o},l,c){if(aa(e,o,c),l)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:u,style:d}=e;u.transform&&(d.transform=u.transform,delete u.transform),(d.transform||u.transformOrigin)&&(d.transformOrigin=u.transformOrigin??"50% 50%",delete u.transformOrigin),d.transform&&(d.transformBox="fill-box",delete u.transformBox),void 0!==t&&(u.x=t),void 0!==n&&(u.y=n),void 0!==r&&(u.scale=r),void 0!==s&&function(e,t,n=1,r=0,s=!0){e.pathLength=1;const a=s?ha:fa;e[a.offset]=Gt.transform(-r);const i=Gt.transform(t),o=Gt.transform(n);e[a.array]=`${i} ${o}`}(u,s,a,i,!1)}const pa=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),ga=e=>"string"==typeof e&&"svg"===e.toLowerCase();function ya(e,t,n,r){const s=Q.useMemo((()=>{const n={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return ma(n,t,ga(r),e.transformTemplate),{...n.attrs,style:{...n.style}}}),[t]);if(e.style){const t={};oa(t,e.style,e),s.style={...t,...s.style}}return s}function va(e=!1){return(t,n,r,{latestValues:s},a)=>{const i=(da(t)?ya:ca)(n,s,a,t),o=function(e,t,n){const r={};for(const s in e)"values"===s&&"object"==typeof e.values||(Ds(s)||!0===n&&_s(s)||!t&&!_s(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}(n,"string"==typeof t,e),l=t!==Q.Fragment?{...o,...i,ref:r}:{},{children:c}=n,u=Q.useMemo((()=>na(c)?c.get():c),[c]);return Q.createElement(t,{...l,children:u})}}function ba(e){const t=[{},{}];return e?.values.forEach(((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()})),t}function xa(e,t,n,r){if("function"==typeof t){const[s,a]=ba(r);t=t(void 0!==n?n:e.custom,s,a)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){const[s,a]=ba(r);t=t(void 0!==n?n:e.custom,s,a)}return t}function wa(e){return na(e)?e.get():e}const Ea=e=>(t,n)=>{const r=Q.useContext(Ms),s=Q.useContext(_e),a=()=>function({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:ka(n,r,s,e),renderState:t()}}(e,t,r,s);return n?a():Re(a)};function ka(e,t,n,r){const s={},a=r(e,{});for(const h in a)s[h]=wa(a[h]);let{initial:i,animate:o}=e;const l=zs(e),c=Vs(e);t&&c&&!l&&!1!==e.inherit&&(void 0===i&&(i=t.initial),void 0===o&&(o=t.animate));let u=!!n&&!1===n.initial;u=u||!1===i;const d=u?o:i;if(d&&"boolean"!=typeof d&&!Ls(d)){const t=Array.isArray(d)?d:[d];for(let n=0;n<t.length;n++){const r=xa(e,t[n]);if(r){const{transitionEnd:e,transition:t,...n}=r;for(const r in n){let e=n[r];if(Array.isArray(e)){e=e[u?e.length-1:0]}null!==e&&(s[r]=e)}for(const r in e)s[r]=e[r]}}}return s}function Sa(e,t,n){const{style:r}=e,s={};for(const a in r)(na(r[a])||t.style&&na(t.style[a])||ta(a,e)||void 0!==n?.getValue(a)?.liveStyle)&&(s[a]=r[a]);return s}const Na={useVisualState:Ea({scrapeMotionValuesFromProps:Sa,createRenderState:ia})};function Ta(e,t,n){const r=Sa(e,t,n);for(const s in e)if(na(e[s])||na(t[s])){r[-1!==pr.indexOf(s)?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s]=e[s]}return r}const Ca={useVisualState:Ea({scrapeMotionValuesFromProps:Ta,createRenderState:pa})};function Ra(e,t){return function(n,{forwardMotionProps:r}={forwardMotionProps:!1}){return Ys({...da(n)?Ca:Na,preloadedFeatures:e,useRender:va(r),createVisualElement:t,Component:n})}}function ja(e,t,n){const r=e.getProps();return xa(r,t,void 0!==n?n:r.custom,e)}const Aa=e=>Array.isArray(e);function _a(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Ss(n))}function Da(e){return Aa(e)?e[e.length-1]||0:e}function Ia(e,t){const n=ja(e,t);let{transitionEnd:r={},transition:s={},...a}=n||{};a={...a,...r};for(const i in a){_a(e,i,Da(a[i]))}}function Pa(e,t){const n=e.getValue("willChange");if(r=n,Boolean(na(r)&&r.add))return n.add(t);if(!n&&$e.WillChange){const n=new $e.WillChange("auto");e.addValue("willChange",n),n.add(t)}var r}function Ma(e){return e.props[Ks]}const La=e=>null!==e;const Oa={type:"spring",stiffness:500,damping:25,restSpeed:10},Ua={type:"keyframes",duration:.8},Fa={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},za=(e,{keyframes:t})=>t.length>2?Ua:gr.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===t[1]?2*Math.sqrt(550):30,restSpeed:10}:Oa:Fa;const Va=(e,t,n,r={},s,a)=>i=>{const o=Gr(r,e)||{},l=o.delay||r.delay||0;let{elapsed:c=0}=r;c-=Ze(l);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-c,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{i(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:a?void 0:s};(function({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:i,repeatDelay:o,from:l,elapsed:c,...u}){return!!Object.keys(u).length})(o)||Object.assign(u,za(e,u)),u.duration&&(u.duration=Ze(u.duration)),u.repeatDelay&&(u.repeatDelay=Ze(u.repeatDelay)),void 0!==u.from&&(u.keyframes[0]=u.from);let d=!1;if((!1===u.type||0===u.duration&&!u.repeatDelay)&&(u.duration=0,0===u.delay&&(d=!0)),($e.instantAnimations||$e.skipAnimations)&&(d=!0,u.duration=0,u.delay=0),u.allowFlatten=!o.type&&!o.ease,d&&!a&&void 0!==t.get()){const e=function(e,{repeat:t,repeatType:n="loop"}){const r=e.filter(La);return r[t&&"loop"!==n&&t%2==1?0:r.length-1]}(u.keyframes,o);if(void 0!==e)return void wt.update((()=>{u.onUpdate(e),u.onComplete()}))}return new $r(u)};function Ba({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&!0!==t[n];return t[n]=!1,r}function qa(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:i,...o}=t;r&&(a=r);const l=[],c=s&&e.animationState&&e.animationState.getState()[s];for(const u in o){const t=e.getValue(u,e.latestValues[u]??null),r=o[u];if(void 0===r||c&&Ba(c,u))continue;const s={delay:n,...Gr(a||{},u)},i=t.get();if(void 0!==i&&!t.isAnimating&&!Array.isArray(r)&&r===i&&!s.velocity)continue;let d=!1;if(window.MotionHandoffAnimation){const t=Ma(e);if(t){const e=window.MotionHandoffAnimation(t,u,wt);null!==e&&(s.startTime=e,d=!0)}}Pa(e,u),t.start(Va(u,t,r,e.shouldReduceMotion&&Kr.has(u)?{type:!1}:s,e,d));const h=t.animation;h&&l.push(h)}return i&&Promise.all(l).then((()=>{wt.update((()=>{i&&Ia(e,i)}))})),l}function $a(e,t,n={}){const r=ja(e,t,"exit"===n.type?e.presenceContext?.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const a=r?()=>Promise.all(qa(e,r,n)):()=>Promise.resolve(),i=e.variantChildren&&e.variantChildren.size?(r=0)=>{const{delayChildren:a=0,staggerChildren:i,staggerDirection:o}=s;return function(e,t,n=0,r=0,s=1,a){const i=[],o=(e.variantChildren.size-1)*r,l=1===s?(e=0)=>e*r:(e=0)=>o-e*r;return Array.from(e.variantChildren).sort(Ha).forEach(((e,r)=>{e.notify("AnimationStart",t),i.push($a(e,t,{...a,delay:n+l(r)}).then((()=>e.notify("AnimationComplete",t))))})),Promise.all(i)}(e,t,a+r,i,o,n)}:()=>Promise.resolve(),{when:o}=s;if(o){const[e,t]="beforeChildren"===o?[a,i]:[i,a];return e().then((()=>t()))}return Promise.all([a(),i(n.delay)])}function Ha(e,t){return e.sortNodePosition(t)}function Wa(e,t,n={}){let r;if(e.notify("AnimationStart",t),Array.isArray(t)){const s=t.map((t=>$a(e,t,n)));r=Promise.all(s)}else if("string"==typeof t)r=$a(e,t,n);else{const s="function"==typeof t?ja(e,t,n.custom):t;r=Promise.all(qa(e,s,n))}return r.then((()=>{e.notify("AnimationComplete",t)}))}function Ga(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const Ka=Fs.length;function Qa(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&Qa(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<Ka;n++){const r=Fs[n],s=e.props[r];(Os(s)||!1===s)&&(t[r]=s)}return t}const Xa=[...Us].reverse(),Ja=Us.length;function Ya(e){let t=function(e){return t=>Promise.all(t.map((({animation:t,options:n})=>Wa(e,t,n))))}(e),n=ti(),r=!0;const s=t=>(n,r)=>{const s=ja(e,r,"exit"===t?e.presenceContext?.custom:void 0);if(s){const{transition:e,transitionEnd:t,...r}=s;n={...n,...r,...t}}return n};function a(a){const{props:i}=e,o=Qa(e.parent)||{},l=[],c=new Set;let u={},d=1/0;for(let t=0;t<Ja;t++){const h=Xa[t],f=n[h],m=void 0!==i[h]?i[h]:o[h],p=Os(m),g=h===a?f.isActive:null;!1===g&&(d=t);let y=m===o[h]&&m!==i[h]&&p;if(y&&r&&e.manuallyAnimateOnMount&&(y=!1),f.protectedKeys={...u},!f.isActive&&null===g||!m&&!f.prevProp||Ls(m)||"boolean"==typeof m)continue;const v=Za(f.prevProp,m);let b=v||h===a&&f.isActive&&!y&&p||t>d&&p,x=!1;const w=Array.isArray(m)?m:[m];let E=w.reduce(s(h),{});!1===g&&(E={});const{prevResolvedValues:k={}}=f,S={...k,...E},N=t=>{b=!0,c.has(t)&&(x=!0,c.delete(t)),f.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in S){const t=E[e],n=k[e];if(u.hasOwnProperty(e))continue;let r=!1;r=Aa(t)&&Aa(n)?!Ga(t,n):t!==n,r?null!=t?N(e):c.add(e):void 0!==t&&c.has(e)?N(e):f.protectedKeys[e]=!0}f.prevProp=m,f.prevResolvedValues=E,f.isActive&&(u={...u,...E}),r&&e.blockInitialAnimation&&(b=!1);b&&(!(y&&v)||x)&&l.push(...w.map((e=>({animation:e,options:{type:h}}))))}if(c.size){const t={};if("boolean"!=typeof i.initial){const n=ja(e,Array.isArray(i.initial)?i.initial[0]:i.initial);n&&n.transition&&(t.transition=n.transition)}c.forEach((n=>{const r=e.getBaseTarget(n),s=e.getValue(n);s&&(s.liveStyle=!0),t[n]=r??null})),l.push({animation:t})}let h=Boolean(l.length);return!r||!1!==i.initial&&i.initial!==i.animate||e.manuallyAnimateOnMount||(h=!1),r=!1,h?t(l):Promise.resolve()}return{animateChanges:a,setActive:function(t,r){if(n[t].isActive===r)return Promise.resolve();e.variantChildren?.forEach((e=>e.animationState?.setActive(t,r))),n[t].isActive=r;const s=a(t);for(const e in n)n[e].protectedKeys={};return s},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=ti(),r=!0}}}function Za(e,t){return"string"==typeof t?t!==e:!!Array.isArray(t)&&!Ga(t,e)}function ei(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ti(){return{animate:ei(!0),whileInView:ei(),whileHover:ei(),whileTap:ei(),whileDrag:ei(),whileFocus:ei(),exit:ei()}}class ni{constructor(e){this.isMounted=!1,this.node=e}update(){}}let ri=0;const si={animation:{Feature:class extends ni{constructor(e){super(e),e.animationState||(e.animationState=Ya(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ls(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}},exit:{Feature:class extends ni{constructor(){super(...arguments),this.id=ri++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then((()=>{t(this.id)}))}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}};function ai(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function ii(e){return{point:{x:e.pageX,y:e.pageY}}}function oi(e,t,n,r){return ai(e,t,(e=>t=>ps(t)&&e(t,ii(t)))(n),r)}function li({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function ci(e){return e.max-e.min}function ui(e,t,n,r=.5){e.origin=r,e.originPoint=dn(t.min,t.max,e.origin),e.scale=ci(n)/ci(t),e.translate=dn(n.min,n.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function di(e,t,n,r){ui(e.x,t.x,n.x,r?r.originX:void 0),ui(e.y,t.y,n.y,r?r.originY:void 0)}function hi(e,t,n){e.min=n.min+t.min,e.max=e.min+ci(t)}function fi(e,t,n){e.min=t.min-n.min,e.max=e.min+ci(t)}function mi(e,t,n){fi(e.x,t.x,n.x),fi(e.y,t.y,n.y)}const pi=()=>({x:{min:0,max:0},y:{min:0,max:0}});function gi(e){return[e("x"),e("y")]}function yi(e){return void 0===e||1===e}function vi({scale:e,scaleX:t,scaleY:n}){return!yi(e)||!yi(t)||!yi(n)}function bi(e){return vi(e)||xi(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function xi(e){return wi(e.x)||wi(e.y)}function wi(e){return e&&"0%"!==e}function Ei(e,t,n){return n+t*(e-n)}function ki(e,t,n,r,s){return void 0!==s&&(e=Ei(e,s,r)),Ei(e,n,r)+t}function Si(e,t=0,n=1,r,s){e.min=ki(e.min,t,n,r,s),e.max=ki(e.max,t,n,r,s)}function Ni(e,{x:t,y:n}){Si(e.x,t.translate,t.scale,t.originPoint),Si(e.y,n.translate,n.scale,n.originPoint)}const Ti=.999999999999,Ci=1.0000000000001;function Ri(e,t){e.min=e.min+t,e.max=e.max+t}function ji(e,t,n,r,s=.5){Si(e,t,n,dn(e.min,e.max,s),r)}function Ai(e,t){ji(e.x,t.x,t.scaleX,t.scale,t.originX),ji(e.y,t.y,t.scaleY,t.scale,t.originY)}function _i(e,t){return li(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const Di=({current:e})=>e?e.ownerDocument.defaultView:null,Ii=(e,t)=>Math.abs(e-t);class Pi{constructor(e,t,{transformPagePoint:n,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=Oi(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=Ii(e.x,t.x),r=Ii(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!n)return;const{point:r}=e,{timestamp:s}=kt;this.history.push({...r,timestamp:s});const{onStart:a,onMove:i}=this.handlers;t||(a&&a(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),i&&i(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=Mi(t,this.transformPagePoint),wt.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:s}=this.handlers;if(this.dragSnapToOrigin&&s&&s(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const a=Oi("pointercancel"===e.type?this.lastMoveEventInfo:Mi(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,a),r&&r(e,a)},!ps(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=n,this.contextWindow=r||window;const a=Mi(ii(e),this.transformPagePoint),{point:i}=a,{timestamp:o}=kt;this.history=[{...i,timestamp:o}];const{onSessionStart:l}=t;l&&l(e,Oi(a,this.history)),this.removeListeners=Xe(oi(this.contextWindow,"pointermove",this.handlePointerMove),oi(this.contextWindow,"pointerup",this.handlePointerUp),oi(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Et(this.updatePoint)}}function Mi(e,t){return t?{point:t(e.point)}:e}function Li(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Oi({point:e},t){return{point:e,delta:Li(e,Fi(t)),offset:Li(e,Ui(t)),velocity:zi(t,.1)}}function Ui(e){return e[0]}function Fi(e){return e[e.length-1]}function zi(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=Fi(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>Ze(t)));)n--;if(!r)return{x:0,y:0};const a=et(s.timestamp-r.timestamp);if(0===a)return{x:0,y:0};const i={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function Vi(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function Bi(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const qi=.35;function $i(e,t,n){return{min:Hi(e,t),max:Hi(e,n)}}function Hi(e,t){return"number"==typeof e?e:e[t]||0}const Wi=new WeakMap;class Gi{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:r}=this.getProps();this.panSession=new Pi(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(ii(e).point)},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:s}=this.getProps();if(n&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(a=n)||"y"===a?us[a]?null:(us[a]=!0,()=>{us[a]=!1}):us.x||us.y?null:(us.x=us.y=!0,()=>{us.x=us.y=!1}),!this.openDragLock))return;var a;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),gi((e=>{let t=this.getAxisMotionValue(e).get()||0;if(Wt.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=ci(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t})),s&&wt.postRender((()=>s(e,t))),Pa(this.visualElement,"transform");const{animationState:i}=this.visualElement;i&&i.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:s,onDrag:a}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:i}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e,t=10){let n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(i),void(null!==this.currentDirection&&s&&s(this.currentDirection));this.updateAxis("x",t.point,i),this.updateAxis("y",t.point,i),this.visualElement.render(),a&&a(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>gi((e=>"paused"===this.getAnimationState(e)&&this.getAxisMotionValue(e).animation?.play()))},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r,contextWindow:Di(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&wt.postRender((()=>s(e,t)))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!Ki(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=function(e,{min:t,max:n},r){return void 0!==t&&e<t?e=r?dn(t,e,r.min):Math.max(e,t):void 0!==n&&e>n&&(e=r?dn(n,e,r.max):Math.min(e,n)),e}(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&Hs(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!e||!n)&&function(e,{top:t,left:n,bottom:r,right:s}){return{x:Vi(e.x,n,s),y:Vi(e.y,t,r)}}(n.layoutBox,e),this.elastic=function(e=qi){return!1===e?e=0:!0===e&&(e=qi),{x:$i(e,"left","right"),y:$i(e,"top","bottom")}}(t),r!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&gi((e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(n.layoutBox[e],this.constraints[e]))}))}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Hs(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=function(e,t,n){const r=_i(e,n),{scroll:s}=t;return s&&(Ri(r.x,s.offset.x),Ri(r.y,s.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let a=function(e,t){return{x:Bi(e.x,t.x),y:Bi(e.y,t.y)}}(r.layout.layoutBox,s);if(t){const e=t(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(a));this.hasMutatedConstraints=!!e,e&&(a=li(e))}return a}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:i}=this.getProps(),o=this.constraints||{},l=gi((i=>{if(!Ki(i,t,this.currentDirection))return;let l=o&&o[i]||{};a&&(l={min:0,max:0});const c=r?200:1e6,u=r?40:1e7,d={type:"inertia",velocity:n?e[i]:0,bounceStiffness:c,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...s,...l};return this.startAxisValueAnimation(i,d)}));return Promise.all(l).then(i)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return Pa(this.visualElement,e),n.start(Va(e,n,0,t,this.visualElement,!1))}stopAnimation(){gi((e=>this.getAxisMotionValue(e).stop()))}pauseAnimation(){gi((e=>this.getAxisMotionValue(e).animation?.pause()))}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){gi((t=>{const{drag:n}=this.getProps();if(!Ki(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:a}=r.layout.layoutBox[t];s.set(e[t]-dn(n,a,.5))}}))}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!Hs(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};gi((e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();r[e]=function(e,t){let n=.5;const r=ci(e),s=ci(t);return s>r?n=Je(t.min,t.max-r,e.min):r>s&&(n=Je(e.min,e.max-s,t.min)),qe(0,1,n)}({min:n,max:n},this.constraints[e])}}));const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),gi((t=>{if(!Ki(t,e,null))return;const n=this.getAxisMotionValue(t),{min:s,max:a}=this.constraints[t];n.set(dn(s,a,r[t]))}))}addListeners(){if(!this.visualElement.current)return;Wi.set(this.visualElement,this);const e=oi(this.visualElement.current,"pointerdown",(e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)})),t=()=>{const{dragConstraints:e}=this.getProps();Hs(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),wt.read(t);const s=ai(window,"resize",(()=>this.scalePositionWithinConstraints())),a=n.addEventListener("didUpdate",(({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(gi((t=>{const n=this.getAxisMotionValue(t);n&&(this.originPoint[t]+=e[t].translate,n.set(n.get()+e[t].translate))})),this.visualElement.render())}));return()=>{s(),e(),r(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:a=qi,dragMomentum:i=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:s,dragElastic:a,dragMomentum:i}}}function Ki(e,t,n){return!(!0!==t&&t!==e||null!==n&&n!==e)}const Qi=e=>(t,n)=>{e&&wt.postRender((()=>e(t,n)))};const Xi={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Ji(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Yi={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e){if(!Gt.test(e))return e;e=parseFloat(e)}return`${Ji(e,t.target.x)}% ${Ji(e,t.target.y)}%`}},Zi={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=ln.parse(e);if(s.length>5)return r;const a=ln.createTransformer(e),i="number"!=typeof s[0]?1:0,o=n.x.scale*t.x,l=n.y.scale*t.y;s[0+i]/=o,s[1+i]/=l;const c=dn(o,l,.5);return"number"==typeof s[2+i]&&(s[2+i]/=c),"number"==typeof s[3+i]&&(s[3+i]/=c),a(s)}};class eo extends Q.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:s}=e;!function(e){for(const t in e)ea[t]=e[t],jt(t)&&(ea[t].isCSSVariable=!0)}(no),s&&(t.group&&t.group.add(s),n&&n.register&&r&&n.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",(()=>{this.safeToRemove()})),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Xi.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:s}=this.props,a=n.projection;return a?(a.isPresent=s,r||e.layoutDependency!==t||void 0===t||e.isPresent!==s?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||wt.postRender((()=>{const e=a.getStack();e&&e.members.length||this.safeToRemove()}))),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),cs.postRender((()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()})))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function to(t){const[n,r]=Oe(),s=Q.useContext(Ce);return e.jsx(eo,{...t,layoutGroup:s,switchLayoutGroup:Q.useContext(Qs),isPresent:n,safeToRemove:r})}const no={borderRadius:{...Yi,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Yi,borderTopRightRadius:Yi,borderBottomLeftRadius:Yi,borderBottomRightRadius:Yi,boxShadow:Zi};const ro=(e,t)=>e.depth-t.depth;class so{constructor(){this.children=[],this.isDirty=!1}add(e){Ve(this.children,e),this.isDirty=!0}remove(e){Be(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(ro),this.isDirty=!1,this.children.forEach(e)}}const ao=["TopLeft","TopRight","BottomLeft","BottomRight"],io=ao.length,oo=e=>"string"==typeof e?parseFloat(e):e,lo=e=>"number"==typeof e||Gt.test(e);function co(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const uo=fo(0,.5,dt),ho=fo(.5,.95,Ke);function fo(e,t,n){return r=>r<e?0:r>t?1:n(Je(e,t,r))}function mo(e,t){e.min=t.min,e.max=t.max}function po(e,t){mo(e.x,t.x),mo(e.y,t.y)}function go(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function yo(e,t,n,r,s){return e=Ei(e-=t,1/n,r),void 0!==s&&(e=Ei(e,1/s,r)),e}function vo(e,t,[n,r,s],a,i){!function(e,t=0,n=1,r=.5,s,a=e,i=e){Wt.test(t)&&(t=parseFloat(t),t=dn(i.min,i.max,t/100)-i.min);if("number"!=typeof t)return;let o=dn(a.min,a.max,r);e===a&&(o-=t),e.min=yo(e.min,t,n,o,s),e.max=yo(e.max,t,n,o,s)}(e,t[n],t[r],t[s],t.scale,a,i)}const bo=["x","scaleX","originX"],xo=["y","scaleY","originY"];function wo(e,t,n,r){vo(e.x,t,bo,n?n.x:void 0,r?r.x:void 0),vo(e.y,t,xo,n?n.y:void 0,r?r.y:void 0)}function Eo(e){return 0===e.translate&&1===e.scale}function ko(e){return Eo(e.x)&&Eo(e.y)}function So(e,t){return e.min===t.min&&e.max===t.max}function No(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function To(e,t){return No(e.x,t.x)&&No(e.y,t.y)}function Co(e){return ci(e.x)/ci(e.y)}function Ro(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class jo{constructor(){this.members=[]}add(e){Ve(this.members,e),e.scheduleRender()}remove(e){if(Be(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex((t=>e===t));if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach((e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()}))}scheduleRender(){this.members.forEach((e=>{e.instance&&e.scheduleRender(!1)}))}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Ao=["","X","Y","Z"],_o={visibility:"hidden"};let Do=0;function Io(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function Po(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Ma(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:r}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",wt,!(t||r))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&Po(r)}function Mo({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(e={},n=t?.()){this.id=Do++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Uo),this.nodes.forEach(Ho),this.nodes.forEach(Wo),this.nodes.forEach(Fo)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=n?n.root||n:this,this.path=n?[...n.path,n]:[],this.parent=n,this.depth=n?n.depth+1:0;for(let t=0;t<this.path.length;t++)this.path[t].shouldResetTransform=!0;this.root===this&&(this.nodes=new so)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new Ye),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){const n=this.eventHandlers.get(e);n&&n.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t,n=this.root.hasTreeAnimated){if(this.instance)return;var r;this.isSVG=(r=t)instanceof SVGElement&&"svg"!==r.tagName,this.instance=t;const{layoutId:s,layout:a,visualElement:i}=this.options;if(i&&!i.current&&i.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(a||s)&&(this.isLayoutDirty=!0),e){let n;const r=()=>this.root.updateBlockedByResize=!1;e(t,(()=>{this.root.updateBlockedByResize=!0,n&&n(),n=function(e,t){const n=Ct.now(),r=({timestamp:s})=>{const a=s-n;a>=t&&(Et(r),e(a-t))};return wt.setup(r,!0),()=>Et(r)}(r,250),Xi.hasAnimatedSinceResize&&(Xi.hasAnimatedSinceResize=!1,this.nodes.forEach($o))}))}s&&this.root.registerSharedNode(s,this),!1!==this.options.animate&&i&&(s||a)&&this.addEventListener("didUpdate",(({delta:e,hasLayoutChanged:t,hasRelativeLayoutChanged:n,layout:r})=>{if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const s=this.options.transition||i.getDefaultTransition()||Yo,{onLayoutAnimationStart:a,onLayoutAnimationComplete:o}=i.getProps(),l=!this.targetLayout||!To(this.targetLayout,r),c=!t&&n;if(this.options.layoutRoot||this.resumeFrom||c||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(e,c);const t={...Gr(s,"layout"),onPlay:a,onComplete:o};(i.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t)}else t||$o(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r}))}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Et(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Go),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Po(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let s=0;s<this.path.length;s++){const e=this.path[s];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(Vo);this.isUpdating||this.nodes.forEach(Bo),this.isUpdating=!1,this.nodes.forEach(qo),this.nodes.forEach(Lo),this.nodes.forEach(Oo),this.clearAllSnapshots();const e=Ct.now();kt.delta=qe(0,1e3/60,e-kt.timestamp),kt.timestamp=e,kt.isProcessing=!0,St.update.process(kt),St.preRender.process(kt),St.render.process(kt),kt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,cs.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(zo),this.sharedNodes.forEach(Ko)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,wt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){wt.postRender((()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()}))}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||ci(this.snapshot.measuredBox.x)||ci(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t){const t=r(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!s)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!ko(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,a=r!==this.prevTransformTemplateValue;e&&(t||bi(this.latestValues)||a)&&(s(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),tl((r=n).x),tl(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:e}=this.options;if(!e)return{x:{min:0,max:0},y:{min:0,max:0}};const t=e.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(rl))){const{scroll:e}=this.root;e&&(Ri(t.x,e.offset.x),Ri(t.y,e.offset.y))}return t}removeElementScroll(e){const t={x:{min:0,max:0},y:{min:0,max:0}};if(po(t,e),this.scroll?.wasRoot)return t;for(let n=0;n<this.path.length;n++){const r=this.path[n],{scroll:s,options:a}=r;r!==this.root&&s&&a.layoutScroll&&(s.wasRoot&&po(t,e),Ri(t.x,s.offset.x),Ri(t.y,s.offset.y))}return t}applyTransform(e,t=!1){const n={x:{min:0,max:0},y:{min:0,max:0}};po(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&Ai(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),bi(e.latestValues)&&Ai(n,e.latestValues)}return bi(this.latestValues)&&Ai(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};po(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!bi(e.latestValues))continue;vi(e.latestValues)&&e.updateSnapshot();const r={x:{min:0,max:0},y:{min:0,max:0}};po(r,e.measurePageBox()),wo(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return bi(this.latestValues)&&wo(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==kt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){const t=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=t.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=t.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=t.isSharedProjectionDirty);const n=Boolean(this.resumingFrom)||this!==t;if(!(e||n&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:r,layoutId:s}=this.options;if(this.layout&&(r||s)){if(this.resolvedRelativeTargetAt=kt.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},mi(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),po(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}var a,i,o;if(this.relativeTarget||this.targetDelta)if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),a=this.target,i=this.relativeTarget,o=this.relativeParent.target,hi(a.x,i.x,o.x),hi(a.y,i.y,o.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):po(this.target,this.layout.layoutBox),Ni(this.target,this.targetDelta)):po(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},mi(this.relativeTargetOrigin,this.target,e.target),po(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(this.parent&&!vi(this.parent.latestValues)&&!xi(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const e=this.getLead(),t=Boolean(this.resumingFrom)||this!==e;let n=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(n=!1),t&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(n=!1),this.resolvedRelativeTargetAt===kt.timestamp&&(n=!1),n)return;const{layout:r,layoutId:s}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!r&&!s)return;po(this.layoutCorrected,this.layout.layoutBox);const a=this.treeScale.x,i=this.treeScale.y;!function(e,t,n,r=!1){const s=n.length;if(!s)return;let a,i;t.x=t.y=1;for(let o=0;o<s;o++){a=n[o],i=a.projectionDelta;const{visualElement:s}=a.options;s&&s.props.style&&"contents"===s.props.style.display||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Ai(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,Ni(e,i)),r&&bi(a.latestValues)&&Ai(e,a.latestValues))}t.x<Ci&&t.x>Ti&&(t.x=1),t.y<Ci&&t.y>Ti&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,t),!e.layout||e.target||1===this.treeScale.x&&1===this.treeScale.y||(e.target=e.layout.layoutBox,e.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:o}=e;o?(this.projectionDelta&&this.prevProjectionDelta?(go(this.prevProjectionDelta.x,this.projectionDelta.x),go(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),di(this.projectionDelta,this.layoutCorrected,o,this.latestValues),this.treeScale.x===a&&this.treeScale.y===i&&Ro(this.projectionDelta.x,this.prevProjectionDelta.x)&&Ro(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",o))):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){if(this.options.visualElement?.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e,t=!1){const n=this.snapshot,r=n?n.latestValues:{},s={...this.latestValues},a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const i={x:{min:0,max:0},y:{min:0,max:0}},o=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,u=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some(Jo));let d;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;var l,h,f,m,p,g;Qo(a.x,e.x,n),Qo(a.y,e.y,n),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(mi(i,this.layout.layoutBox,this.relativeParent.layout.layoutBox),f=this.relativeTarget,m=this.relativeTargetOrigin,p=i,g=n,Xo(f.x,m.x,p.x,g),Xo(f.y,m.y,p.y,g),d&&(l=this.relativeTarget,h=d,So(l.x,h.x)&&So(l.y,h.y))&&(this.isProjectionDirty=!1),d||(d={x:{min:0,max:0},y:{min:0,max:0}}),po(d,this.relativeTarget)),o&&(this.animationValues=s,function(e,t,n,r,s,a){s?(e.opacity=dn(0,n.opacity??1,uo(r)),e.opacityExit=dn(t.opacity??1,0,ho(r))):a&&(e.opacity=dn(t.opacity??1,n.opacity??1,r));for(let i=0;i<io;i++){const s=`border${ao[i]}Radius`;let a=co(t,s),o=co(n,s);void 0===a&&void 0===o||(a||(a=0),o||(o=0),0===a||0===o||lo(a)===lo(o)?(e[s]=Math.max(dn(oo(a),oo(o),r),0),(Wt.test(o)||Wt.test(a))&&(e[s]+="%")):e[s]=o)}(t.rotate||n.rotate)&&(e.rotate=dn(t.rotate||0,n.rotate||0,r))}(s,r,this.latestValues,n,u,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Et(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=wt.update((()=>{Xi.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,n){const r=na(e)?e:Ss(e);return r.start(Va("",r,t,n)),r.animation}(0,1e3,{...e,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0}))}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:s}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&nl(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=ci(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=ci(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}po(t,n),Ai(t,s),di(this.projectionDeltaWithTransform,this.layoutCorrected,t,s)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new jo);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){const{layoutId:e}=this.options;return e&&this.getStack()?.lead||this}getPrevLead(){const{layoutId:e}=this.options;return e?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:n}={}){const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const r={};n.z&&Io("z",e,r,this.animationValues);for(let s=0;s<Ao.length;s++)Io(`rotate${Ao[s]}`,e,r,this.animationValues),Io(`skew${Ao[s]}`,e,r,this.animationValues);e.render();for(const s in r)e.setStaticValue(s,r[s]),this.animationValues&&(this.animationValues[s]=r[s]);e.scheduleRender()}getProjectionStyles(e){if(!this.instance||this.isSVG)return;if(!this.isVisible)return _o;const t={visibility:""},n=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,t.opacity="",t.pointerEvents=wa(e?.pointerEvents)||"",t.transform=n?n(this.latestValues,""):"none",t;const r=this.getLead();if(!this.projectionDelta||!this.layout||!r.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=wa(e?.pointerEvents)||""),this.hasProjected&&!bi(this.latestValues)&&(t.transform=n?n({},""):"none",this.hasProjected=!1),t}const s=r.animationValues||r.latestValues;this.applyTransformsToTarget(),t.transform=function(e,t,n){let r="";const s=e.x.translate/t.x,a=e.y.translate/t.y,i=n?.z||0;if((s||a||i)&&(r=`translate3d(${s}px, ${a}px, ${i}px) `),1===t.x&&1===t.y||(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:e,rotate:t,rotateX:s,rotateY:a,skewX:i,skewY:o}=n;e&&(r=`perspective(${e}px) ${r}`),t&&(r+=`rotate(${t}deg) `),s&&(r+=`rotateX(${s}deg) `),a&&(r+=`rotateY(${a}deg) `),i&&(r+=`skewX(${i}deg) `),o&&(r+=`skewY(${o}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return 1===o&&1===l||(r+=`scale(${o}, ${l})`),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,s),n&&(t.transform=n(s,t.transform));const{x:a,y:i}=this.projectionDelta;t.transformOrigin=`${100*a.origin}% ${100*i.origin}% 0`,r.animationValues?t.opacity=r===this?s.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:s.opacityExit:t.opacity=r===this?void 0!==s.opacity?s.opacity:"":void 0!==s.opacityExit?s.opacityExit:0;for(const o in ea){if(void 0===s[o])continue;const{correct:e,applyTo:n,isCSSVariable:a}=ea[o],i="none"===t.transform?s[o]:e(s[o],r);if(n){const e=n.length;for(let r=0;r<e;r++)t[n[r]]=i}else a?this.options.visualElement.renderState.vars[o]=i:t[o]=i}return this.options.layoutId&&(t.pointerEvents=r===this?wa(e?.pointerEvents)||"":"none"),t}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach((e=>e.currentAnimation?.stop())),this.root.nodes.forEach(Vo),this.root.sharedNodes.clear()}}}function Lo(e){e.updateLayout()}function Oo(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=e.layout,{animationType:s}=e.options,a=t.source!==e.layout.source;"size"===s?gi((e=>{const r=a?t.measuredBox[e]:t.layoutBox[e],s=ci(r);r.min=n[e].min,r.max=r.min+s})):nl(s,t.layoutBox,n)&&gi((r=>{const s=a?t.measuredBox[r]:t.layoutBox[r],i=ci(n[r]);s.max=s.min+i,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+i)}));const i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};di(i,n,t.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};a?di(o,e.applyTransform(r,!0),t.measuredBox):di(o,n,t.layoutBox);const l=!ko(i);let c=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:s,layout:a}=r;if(s&&a){const i={x:{min:0,max:0},y:{min:0,max:0}};mi(i,t.layoutBox,s.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};mi(o,n,a.layoutBox),To(i,o)||(c=!0),r.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=i,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:o,layoutDelta:i,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function Uo(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Fo(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function zo(e){e.clearSnapshot()}function Vo(e){e.clearMeasurements()}function Bo(e){e.isLayoutDirty=!1}function qo(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function $o(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Ho(e){e.resolveTargetDelta()}function Wo(e){e.calcProjection()}function Go(e){e.resetSkewAndRotation()}function Ko(e){e.removeLeadSnapshot()}function Qo(e,t,n){e.translate=dn(t.translate,0,n),e.scale=dn(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Xo(e,t,n,r){e.min=dn(t.min,n.min,r),e.max=dn(t.max,n.max,r)}function Jo(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const Yo={duration:.45,ease:[.4,0,.1,1]},Zo=e=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),el=Zo("applewebkit/")&&!Zo("chrome/")?Math.round:Ke;function tl(e){e.min=el(e.min),e.max=el(e.max)}function nl(e,t,n){return"position"===e||"preserve-aspect"===e&&(r=Co(t),s=Co(n),a=.2,!(Math.abs(r-s)<=a));var r,s,a}function rl(e){return e!==e.root&&e.scroll?.wasRoot}const sl=Mo({attachResizeListener:(e,t)=>ai(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),al={current:void 0},il=Mo({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!al.current){const e=new sl({});e.mount(window),e.setOptions({layoutScroll:!0}),al.current=e}return al.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),ol={pan:{Feature:class extends ni{constructor(){super(...arguments),this.removePointerDownListener=Ke}onPointerDown(e){this.session=new Pi(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Di(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:Qi(e),onStart:Qi(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&wt.postRender((()=>r(e,t)))}}}mount(){this.removePointerDownListener=oi(this.node.current,"pointerdown",(e=>this.onPointerDown(e)))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends ni{constructor(e){super(e),this.removeGroupControls=Ke,this.removeListeners=Ke,this.controls=new Gi(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ke}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:il,MeasureLayout:to}};function ll(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover","Start"===n);const s=r["onHover"+n];s&&wt.postRender((()=>s(t,ii(t))))}function cl(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap","Start"===n);const s=r["onTap"+("End"===n?"":n)];s&&wt.postRender((()=>s(t,ii(t))))}const ul=new WeakMap,dl=new WeakMap,hl=e=>{const t=ul.get(e.target);t&&t(e)},fl=e=>{e.forEach(hl)};function ml(e,t,n){const r=function({root:e,...t}){const n=e||document;dl.has(n)||dl.set(n,{});const r=dl.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(fl,{root:e,...t})),r[s]}(t);return ul.set(e,n),r.observe(e),()=>{ul.delete(e),r.unobserve(e)}}const pl={some:0,all:1};const gl={inView:{Feature:class extends ni{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:s}=e,a={root:t?t.current:void 0,rootMargin:n,threshold:"number"==typeof r?r:pl[r]};return ml(this.node.current,a,(e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,s&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),a=t?n:r;a&&a(e)}))}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends ni{mount(){const{current:e}=this.node;e&&(this.unmount=ws(e,((e,t)=>(cl(this.node,t,"Start"),(e,{success:t})=>cl(this.node,e,t?"End":"Cancel"))),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends ni{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Xe(ai(this.node.current,"focus",(()=>this.onFocus())),ai(this.node.current,"blur",(()=>this.onBlur())))}unmount(){}}},hover:{Feature:class extends ni{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t,n={}){const[r,s,a]=hs(e,n),i=e=>{if(!fs(e))return;const{target:n}=e,r=t(n,e);if("function"!=typeof r||!n)return;const a=e=>{fs(e)&&(r(e),n.removeEventListener("pointerleave",a))};n.addEventListener("pointerleave",a,s)};return r.forEach((e=>{e.addEventListener("pointerenter",i,s)})),a}(e,((e,t)=>(ll(this.node,t,"Start"),e=>ll(this.node,e,"End")))))}unmount(){}}}},yl={layout:{ProjectionNode:il,MeasureLayout:to}},vl={current:null},bl={current:!1};const xl=new WeakMap;const wl=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class El{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:s,visualState:a},i={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Cr,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=Ct.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,wt.render(this.render,!1,!0))};const{latestValues:o,renderState:l}=a;this.latestValues=o,this.baseTarget={...o},this.initialValues=t.initial?{...o}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=i,this.blockInitialAnimation=Boolean(s),this.isControllingVariants=zs(t),this.isVariantNode=Vs(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(e&&e.current);const{willChange:c,...u}=this.scrapeMotionValuesFromProps(t,{},this);for(const d in u){const e=u[d];void 0!==o[d]&&na(e)&&e.set(o[d],!1)}}mount(e){this.current=e,xl.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach(((e,t)=>this.bindToMotionValue(t,e))),bl.current||function(){if(bl.current=!0,je)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>vl.current=e.matches;e.addListener(t),t()}else vl.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||vl.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),this.projection=void 0,Et(this.notifyUpdate),Et(this.render),this.valueSubscriptions.forEach((e=>e())),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=gr.has(e);n&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",(t=>{this.latestValues[e]=t,this.props.onUpdate&&wt.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)})),s=t.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,(()=>{r(),s(),a&&a(),t.owner&&t.stop()}))}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in js){const t=js[e];if(!t)continue;const{isEnabled:n,Feature:r}=t;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<wl.length;n++){const t=wl[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){for(const r in t){const s=t[r],a=n[r];if(na(s))e.addValue(r,s);else if(na(a))e.addValue(r,Ss(s,{owner:e}));else if(a!==s)if(e.hasValue(r)){const t=e.getValue(r);!0===t.liveStyle?t.jump(s):t.hasAnimated||t.set(s)}else{const t=e.getStaticValue(r);e.addValue(r,Ss(void 0!==t?t:s,{owner:e}))}}for(const r in n)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=Ss(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){let n=void 0===this.latestValues[e]&&this.current?this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];return null!=n&&("string"==typeof n&&(He(n)||We(n))?n=parseFloat(n):!(e=>Ns.find(Qr(e)))(n)&&ln.test(t)&&(n=is(e,t)),this.setBaseTarget(e,na(n)?n.get():n)),na(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let n;if("string"==typeof t||"object"==typeof t){const r=xa(this.props,t,this.presenceContext?.custom);r&&(n=r[e])}if(t&&void 0!==n)return n;const r=this.getBaseTargetFromProps(this.props,e);return void 0===r||na(r)?void 0!==this.initialValues[e]&&void 0===n?void 0:this.baseTarget[e]:r}on(e,t){return this.events[e]||(this.events[e]=new Ye),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class kl extends El{constructor(){super(...arguments),this.KeyframeResolver=ls}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;na(e)&&(this.childSubscription=e.on("change",(e=>{this.current&&(this.current.textContent=`${e}`)})))}}function Sl(e,{style:t,vars:n},r,s){Object.assign(e.style,t,s&&s.getProjectionStyles(r));for(const a in n)e.style.setProperty(a,n[a])}class Nl extends kl{constructor(){super(...arguments),this.type="html",this.renderInstance=Sl}readValueFromInstance(e,t){if(gr.has(t))return((e,t)=>{const{transform:n="none"}=getComputedStyle(e);return fr(n,t)})(e,t);{const r=(n=e,window.getComputedStyle(n)),s=(jt(t)?r.getPropertyValue(t):r[t])||0;return"string"==typeof s?s.trim():s}var n}measureInstanceViewportBox(e,{transformPagePoint:t}){return _i(e,t)}build(e,t,n){aa(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return Sa(e,t,n)}}const Tl=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);class Cl extends kl{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=pi}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(gr.has(t)){const e=as(t);return e&&e.default||0}return t=Tl.has(t)?t:Gs(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return Ta(e,t,n)}build(e,t,n){ma(e,t,this.isSVGTag,n.transformTemplate)}renderInstance(e,t,n,r){!function(e,t,n,r){Sl(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(Tl.has(s)?s:Gs(s),t.attrs[s])}(e,t,0,r)}mount(e){this.isSVGTag=ga(e.tagName),super.mount(e)}}const Rl=(e,t)=>da(e)?new Cl(t):new Nl(t,{allowProjection:e!==Q.Fragment}),jl=Ps(Ra({...si,...gl,...ol,...yl},Rl));function Al(e,t){[...t].reverse().forEach((n=>{const r=e.getVariant(n);r&&Ia(e,r),e.variantChildren&&e.variantChildren.forEach((e=>{Al(e,t)}))}))}function _l(){const e=new Set,t={subscribe:t=>(e.add(t),()=>{e.delete(t)}),start(t,n){const r=[];return e.forEach((e=>{r.push(Wa(e,t,{transitionOverride:n}))})),Promise.all(r)},set:t=>e.forEach((e=>{!function(e,t){Array.isArray(t)?Al(e,t):"string"==typeof t?Al(e,[t]):Ia(e,t)}(e,t)})),stop(){e.forEach((e=>{!function(e){e.values.forEach((e=>e.stop()))}(e)}))},mount:()=>()=>{t.stop()}};return t}const Dl=function(){const e=Re(_l);return Ae(e.mount,[]),e},Il=(...e)=>e.filter(((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t)).join(" ").trim()
/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */;
/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Pl={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ml=Q.forwardRef((({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:i,...o},l)=>Q.createElement("svg",{ref:l,...Pl,width:t,height:t,stroke:e,strokeWidth:r?24*Number(n)/Number(t):n,className:Il("lucide",s),...o},[...i.map((([e,t])=>Q.createElement(e,t))),...Array.isArray(a)?a:[a]]))),Ll=(e,t)=>{const n=Q.forwardRef((({className:n,...r},s)=>{return Q.createElement(Ml,{ref:s,iconNode:t,className:Il(`lucide-${a=e,a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,n),...r});var a}));return n.displayName=`${e}`,n},Ol=Ll("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Ul=Ll("Bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),Fl=Ll("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),zl=Ll("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),Vl=Ll("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),Bl=Ll("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),ql=Ll("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),$l=Ll("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]),Hl=Ll("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]),Wl=Ll("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Gl=Ll("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Kl=Ll("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Ql=Ll("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Xl=Ll("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Jl=Ll("CircleUserRound",[["path",{d:"M18 20a6 6 0 0 0-12 0",key:"1qehca"}],["circle",{cx:"12",cy:"10",r:"4",key:"1h16sb"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Yl=Ll("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Zl=Ll("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),ec=Ll("ClipboardPenLine",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",key:"1oijnt"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-.5",key:"1but9f"}],["path",{d:"M16 4h2a2 2 0 0 1 1.73 1",key:"1p8n7l"}],["path",{d:"M8 18h1",key:"13wk12"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}]]),tc=Ll("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]),nc=Ll("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),rc=Ll("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),sc=Ll("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]),ac=Ll("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),ic=Ll("FileX",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m14.5 12.5-5 5",key:"b62r18"}],["path",{d:"m9.5 12.5 5 5",key:"1rk7el"}]]),oc=Ll("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),lc=Ll("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),cc=Ll("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]),uc=Ll("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),dc=Ll("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),hc=Ll("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),fc=Ll("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]),mc=Ll("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),pc=Ll("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),gc=Ll("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),yc=Ll("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),vc=Ll("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),bc=Ll("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),xc=Ll("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),wc=Ll("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),Ec=Ll("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]),kc=Ll("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2V5z",key:"1ivx2i"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h.01",key:"xkw8gn"}]]),Sc=Ll("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Nc=Ll("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]),Tc=Ll("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Cc=Ll("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Rc=Ll("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),jc=Ll("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),Ac=Ll("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),_c=Ll("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]),Dc=Ll("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),Ic=Ll("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Pc=Ll("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Mc=Ll("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Lc=Ll("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);
/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function Oc(e,t){return function(){return e.apply(t,arguments)}}const{toString:Uc}=Object.prototype,{getPrototypeOf:Fc}=Object,{iterator:zc,toStringTag:Vc}=Symbol,Bc=(qc=Object.create(null),e=>{const t=Uc.call(e);return qc[t]||(qc[t]=t.slice(8,-1).toLowerCase())});var qc;const $c=e=>(e=e.toLowerCase(),t=>Bc(t)===e),Hc=e=>t=>typeof t===e,{isArray:Wc}=Array,Gc=Hc("undefined");const Kc=$c("ArrayBuffer");const Qc=Hc("string"),Xc=Hc("function"),Jc=Hc("number"),Yc=e=>null!==e&&"object"==typeof e,Zc=e=>{if("object"!==Bc(e))return!1;const t=Fc(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Vc in e||zc in e)},eu=$c("Date"),tu=$c("File"),nu=$c("Blob"),ru=$c("FileList"),su=$c("URLSearchParams"),[au,iu,ou,lu]=["ReadableStream","Request","Response","Headers"].map($c);function cu(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let r,s;if("object"!=typeof e&&(e=[e]),Wc(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{const s=n?Object.getOwnPropertyNames(e):Object.keys(e),a=s.length;let i;for(r=0;r<a;r++)i=s[r],t.call(null,e[i],i,e)}}function uu(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,s=n.length;for(;s-- >0;)if(r=n[s],t===r.toLowerCase())return r;return null}const du="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,hu=e=>!Gc(e)&&e!==du;const fu=(mu="undefined"!=typeof Uint8Array&&Fc(Uint8Array),e=>mu&&e instanceof mu);var mu;const pu=$c("HTMLFormElement"),gu=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),yu=$c("RegExp"),vu=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};cu(n,((n,s)=>{let a;!1!==(a=t(n,s,e))&&(r[s]=a||n)})),Object.defineProperties(e,r)};const bu=$c("AsyncFunction"),xu=(wu="function"==typeof setImmediate,Eu=Xc(du.postMessage),wu?setImmediate:Eu?(ku=`axios@${Math.random()}`,Su=[],du.addEventListener("message",(({source:e,data:t})=>{e===du&&t===ku&&Su.length&&Su.shift()()}),!1),e=>{Su.push(e),du.postMessage(ku,"*")}):e=>setTimeout(e));var wu,Eu,ku,Su;const Nu="undefined"!=typeof queueMicrotask?queueMicrotask.bind(du):"undefined"!=typeof process&&process.nextTick||xu,Tu={isArray:Wc,isArrayBuffer:Kc,isBuffer:function(e){return null!==e&&!Gc(e)&&null!==e.constructor&&!Gc(e.constructor)&&Xc(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||Xc(e.append)&&("formdata"===(t=Bc(e))||"object"===t&&Xc(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Kc(e.buffer),t},isString:Qc,isNumber:Jc,isBoolean:e=>!0===e||!1===e,isObject:Yc,isPlainObject:Zc,isReadableStream:au,isRequest:iu,isResponse:ou,isHeaders:lu,isUndefined:Gc,isDate:eu,isFile:tu,isBlob:nu,isRegExp:yu,isFunction:Xc,isStream:e=>Yc(e)&&Xc(e.pipe),isURLSearchParams:su,isTypedArray:fu,isFileList:ru,forEach:cu,merge:function e(){const{caseless:t}=hu(this)&&this||{},n={},r=(r,s)=>{const a=t&&uu(n,s)||s;Zc(n[a])&&Zc(r)?n[a]=e(n[a],r):Zc(r)?n[a]=e({},r):Wc(r)?n[a]=r.slice():n[a]=r};for(let s=0,a=arguments.length;s<a;s++)arguments[s]&&cu(arguments[s],r);return n},extend:(e,t,n,{allOwnKeys:r}={})=>(cu(t,((t,r)=>{n&&Xc(t)?e[r]=Oc(t,n):e[r]=t}),{allOwnKeys:r}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let s,a,i;const o={};if(t=t||{},null==e)return t;do{for(s=Object.getOwnPropertyNames(e),a=s.length;a-- >0;)i=s[a],r&&!r(i,e,t)||o[i]||(t[i]=e[i],o[i]=!0);e=!1!==n&&Fc(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Bc,kindOfTest:$c,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(Wc(e))return e;let t=e.length;if(!Jc(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[zc]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:pu,hasOwnProperty:gu,hasOwnProp:gu,reduceDescriptors:vu,freezeMethods:e=>{vu(e,((t,n)=>{if(Xc(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];Xc(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return Wc(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:uu,global:du,isContextDefined:hu,isSpecCompliantForm:function(e){return!!(e&&Xc(e.append)&&"FormData"===e[Vc]&&e[zc])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(Yc(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const s=Wc(e)?[]:{};return cu(e,((e,t)=>{const a=n(e,r+1);!Gc(a)&&(s[t]=a)})),t[r]=void 0,s}}return e};return n(e,0)},isAsyncFn:bu,isThenable:e=>e&&(Yc(e)||Xc(e))&&Xc(e.then)&&Xc(e.catch),setImmediate:xu,asap:Nu,isIterable:e=>null!=e&&Xc(e[zc])};function Cu(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}Tu.inherits(Cu,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Tu.toJSONObject(this.config),code:this.code,status:this.status}}});const Ru=Cu.prototype,ju={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{ju[e]={value:e}})),Object.defineProperties(Cu,ju),Object.defineProperty(Ru,"isAxiosError",{value:!0}),Cu.from=(e,t,n,r,s,a)=>{const i=Object.create(Ru);return Tu.toFlatObject(e,i,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Cu.call(i,e.message,t,n,r,s),i.cause=e,i.name=e.name,a&&Object.assign(i,a),i};function Au(e){return Tu.isPlainObject(e)||Tu.isArray(e)}function _u(e){return Tu.endsWith(e,"[]")?e.slice(0,-2):e}function Du(e,t,n){return e?e.concat(t).map((function(e,t){return e=_u(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const Iu=Tu.toFlatObject(Tu,{},null,(function(e){return/^is[A-Z]/.test(e)}));function Pu(e,t,n){if(!Tu.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=Tu.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Tu.isUndefined(t[e])}))).metaTokens,s=n.visitor||c,a=n.dots,i=n.indexes,o=(n.Blob||"undefined"!=typeof Blob&&Blob)&&Tu.isSpecCompliantForm(t);if(!Tu.isFunction(s))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Tu.isDate(e))return e.toISOString();if(!o&&Tu.isBlob(e))throw new Cu("Blob is not supported. Use a Buffer instead.");return Tu.isArrayBuffer(e)||Tu.isTypedArray(e)?o&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,s){let o=e;if(e&&!s&&"object"==typeof e)if(Tu.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(Tu.isArray(e)&&function(e){return Tu.isArray(e)&&!e.some(Au)}(e)||(Tu.isFileList(e)||Tu.endsWith(n,"[]"))&&(o=Tu.toArray(e)))return n=_u(n),o.forEach((function(e,r){!Tu.isUndefined(e)&&null!==e&&t.append(!0===i?Du([n],r,a):null===i?n:n+"[]",l(e))})),!1;return!!Au(e)||(t.append(Du(s,n,a),l(e)),!1)}const u=[],d=Object.assign(Iu,{defaultVisitor:c,convertValue:l,isVisitable:Au});if(!Tu.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Tu.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),Tu.forEach(n,(function(n,a){!0===(!(Tu.isUndefined(n)||null===n)&&s.call(t,n,Tu.isString(a)?a.trim():a,r,d))&&e(n,r?r.concat(a):[a])})),u.pop()}}(e),t}function Mu(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Lu(e,t){this._pairs=[],e&&Pu(e,this,t)}const Ou=Lu.prototype;function Uu(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Fu(e,t,n){if(!t)return e;const r=n&&n.encode||Uu;Tu.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let a;if(a=s?s(t,n):Tu.isURLSearchParams(t)?t.toString():new Lu(t,n).toString(r),a){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}Ou.append=function(e,t){this._pairs.push([e,t])},Ou.toString=function(e){const t=e?function(t){return e.call(this,t,Mu)}:Mu;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};class zu{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Tu.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}const Vu={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Bu={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:Lu,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},qu="undefined"!=typeof window&&"undefined"!=typeof document,$u="object"==typeof navigator&&navigator||void 0,Hu=qu&&(!$u||["ReactNative","NativeScript","NS"].indexOf($u.product)<0),Wu="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,Gu=qu&&window.location.href||"http://localhost",Ku={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:qu,hasStandardBrowserEnv:Hu,hasStandardBrowserWebWorkerEnv:Wu,navigator:$u,origin:Gu},Symbol.toStringTag,{value:"Module"})),...Bu};function Qu(e){function t(e,n,r,s){let a=e[s++];if("__proto__"===a)return!0;const i=Number.isFinite(+a),o=s>=e.length;if(a=!a&&Tu.isArray(r)?r.length:a,o)return Tu.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!i;r[a]&&Tu.isObject(r[a])||(r[a]=[]);return t(e,n,r[a],s)&&Tu.isArray(r[a])&&(r[a]=function(e){const t={},n=Object.keys(e);let r;const s=n.length;let a;for(r=0;r<s;r++)a=n[r],t[a]=e[a];return t}(r[a])),!i}if(Tu.isFormData(e)&&Tu.isFunction(e.entries)){const n={};return Tu.forEachEntry(e,((e,r)=>{t(function(e){return Tu.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null}const Xu={transitional:Vu,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,s=Tu.isObject(e);s&&Tu.isHTMLForm(e)&&(e=new FormData(e));if(Tu.isFormData(e))return r?JSON.stringify(Qu(e)):e;if(Tu.isArrayBuffer(e)||Tu.isBuffer(e)||Tu.isStream(e)||Tu.isFile(e)||Tu.isBlob(e)||Tu.isReadableStream(e))return e;if(Tu.isArrayBufferView(e))return e.buffer;if(Tu.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Pu(e,new Ku.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return Ku.isNode&&Tu.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((a=Tu.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Pu(a?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||r?(t.setContentType("application/json",!1),function(e,t,n){if(Tu.isString(e))try{return(t||JSON.parse)(e),Tu.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Xu.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(Tu.isResponse(e)||Tu.isReadableStream(e))return e;if(e&&Tu.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(s){if(n){if("SyntaxError"===s.name)throw Cu.from(s,Cu.ERR_BAD_RESPONSE,this,null,this.response);throw s}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ku.classes.FormData,Blob:Ku.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Tu.forEach(["delete","get","head","post","put","patch"],(e=>{Xu.headers[e]={}}));const Ju=Tu.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Yu=Symbol("internals");function Zu(e){return e&&String(e).trim().toLowerCase()}function ed(e){return!1===e||null==e?e:Tu.isArray(e)?e.map(ed):String(e)}function td(e,t,n,r,s){return Tu.isFunction(r)?r.call(this,t,n):(s&&(t=n),Tu.isString(t)?Tu.isString(r)?-1!==t.indexOf(r):Tu.isRegExp(r)?r.test(t):void 0:void 0)}let nd=class{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function s(e,t,n){const s=Zu(t);if(!s)throw new Error("header name must be a non-empty string");const a=Tu.findKey(r,s);(!a||void 0===r[a]||!0===n||void 0===n&&!1!==r[a])&&(r[a||t]=ed(e))}const a=(e,t)=>Tu.forEach(e,((e,n)=>s(e,n,t)));if(Tu.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(Tu.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))a((e=>{const t={};let n,r,s;return e&&e.split("\n").forEach((function(e){s=e.indexOf(":"),n=e.substring(0,s).trim().toLowerCase(),r=e.substring(s+1).trim(),!n||t[n]&&Ju[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(Tu.isObject(e)&&Tu.isIterable(e)){let n,r,s={};for(const t of e){if(!Tu.isArray(t))throw TypeError("Object iterator must return a key-value pair");s[r=t[0]]=(n=s[r])?Tu.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}a(s,t)}else null!=e&&s(t,e,n);return this}get(e,t){if(e=Zu(e)){const n=Tu.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(Tu.isFunction(t))return t.call(this,e,n);if(Tu.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Zu(e)){const n=Tu.findKey(this,e);return!(!n||void 0===this[n]||t&&!td(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function s(e){if(e=Zu(e)){const s=Tu.findKey(n,e);!s||t&&!td(0,n[s],s,t)||(delete n[s],r=!0)}}return Tu.isArray(e)?e.forEach(s):s(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const s=t[n];e&&!td(0,this[s],s,e,!0)||(delete this[s],r=!0)}return r}normalize(e){const t=this,n={};return Tu.forEach(this,((r,s)=>{const a=Tu.findKey(n,s);if(a)return t[a]=ed(r),void delete t[s];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(s):String(s).trim();i!==s&&delete t[s],t[i]=ed(r),n[i]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Tu.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&Tu.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[Yu]=this[Yu]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=Zu(e);t[r]||(!function(e,t){const n=Tu.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,s){return this[r].call(this,t,e,n,s)},configurable:!0})}))}(n,e),t[r]=!0)}return Tu.isArray(e)?e.forEach(r):r(e),this}};function rd(e,t){const n=this||Xu,r=t||n,s=nd.from(r.headers);let a=r.data;return Tu.forEach(e,(function(e){a=e.call(n,a,s.normalize(),t?t.status:void 0)})),s.normalize(),a}function sd(e){return!(!e||!e.__CANCEL__)}function ad(e,t,n){Cu.call(this,null==e?"canceled":e,Cu.ERR_CANCELED,t,n),this.name="CanceledError"}function id(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Cu("Request failed with status code "+n.status,[Cu.ERR_BAD_REQUEST,Cu.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}nd.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Tu.reduceDescriptors(nd.prototype,(({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}})),Tu.freezeMethods(nd),Tu.inherits(ad,Cu,{__CANCEL__:!0});const od=(e,t,n=3)=>{let r=0;const s=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s,a=0,i=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=r[i];s||(s=l),n[a]=o,r[a]=l;let u=i,d=0;for(;u!==a;)d+=n[u++],u%=e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),l-s<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}}(50,250);return function(e,t){let n,r,s=0,a=1e3/t;const i=(t,a=Date.now())=>{s=a,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[(...e)=>{const t=Date.now(),o=t-s;o>=a?i(e,t):(n=e,r||(r=setTimeout((()=>{r=null,i(n)}),a-o)))},()=>n&&i(n)]}((n=>{const a=n.loaded,i=n.lengthComputable?n.total:void 0,o=a-r,l=s(o);r=a;e({loaded:a,total:i,progress:i?a/i:void 0,bytes:o,rate:l||void 0,estimated:l&&i&&a<=i?(i-a)/l:void 0,event:n,lengthComputable:null!=i,[t?"download":"upload"]:!0})}),n)},ld=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},cd=e=>(...t)=>Tu.asap((()=>e(...t))),ud=Ku.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Ku.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Ku.origin),Ku.navigator&&/(msie|trident)/i.test(Ku.navigator.userAgent)):()=>!0,dd=Ku.hasStandardBrowserEnv?{write(e,t,n,r,s,a){const i=[e+"="+encodeURIComponent(t)];Tu.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),Tu.isString(r)&&i.push("path="+r),Tu.isString(s)&&i.push("domain="+s),!0===a&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function hd(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const fd=e=>e instanceof nd?{...e}:e;function md(e,t){t=t||{};const n={};function r(e,t,n,r){return Tu.isPlainObject(e)&&Tu.isPlainObject(t)?Tu.merge.call({caseless:r},e,t):Tu.isPlainObject(t)?Tu.merge({},t):Tu.isArray(t)?t.slice():t}function s(e,t,n,s){return Tu.isUndefined(t)?Tu.isUndefined(e)?void 0:r(void 0,e,0,s):r(e,t,0,s)}function a(e,t){if(!Tu.isUndefined(t))return r(void 0,t)}function i(e,t){return Tu.isUndefined(t)?Tu.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function o(n,s,a){return a in t?r(n,s):a in e?r(void 0,n):void 0}const l={url:a,method:a,data:a,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(e,t,n)=>s(fd(e),fd(t),0,!0)};return Tu.forEach(Object.keys(Object.assign({},e,t)),(function(r){const a=l[r]||s,i=a(e[r],t[r],r);Tu.isUndefined(i)&&a!==o||(n[r]=i)})),n}const pd=e=>{const t=md({},e);let n,{data:r,withXSRFToken:s,xsrfHeaderName:a,xsrfCookieName:i,headers:o,auth:l}=t;if(t.headers=o=nd.from(o),t.url=Fu(hd(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Tu.isFormData(r))if(Ku.hasStandardBrowserEnv||Ku.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(n=o.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...t].join("; "))}if(Ku.hasStandardBrowserEnv&&(s&&Tu.isFunction(s)&&(s=s(t)),s||!1!==s&&ud(t.url))){const e=a&&i&&dd.read(i);e&&o.set(a,e)}return t},gd="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=pd(e);let s=r.data;const a=nd.from(r.headers).normalize();let i,o,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:f}=r;function m(){c&&c(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(i),r.signal&&r.signal.removeEventListener("abort",i)}let p=new XMLHttpRequest;function g(){if(!p)return;const r=nd.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders());id((function(e){t(e),m()}),(function(e){n(e),m()}),{data:d&&"text"!==d&&"json"!==d?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:r,config:e,request:p}),p=null}p.open(r.method.toUpperCase(),r.url,!0),p.timeout=r.timeout,"onloadend"in p?p.onloadend=g:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(g)},p.onabort=function(){p&&(n(new Cu("Request aborted",Cu.ECONNABORTED,e,p)),p=null)},p.onerror=function(){n(new Cu("Network Error",Cu.ERR_NETWORK,e,p)),p=null},p.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const s=r.transitional||Vu;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new Cu(t,s.clarifyTimeoutError?Cu.ETIMEDOUT:Cu.ECONNABORTED,e,p)),p=null},void 0===s&&a.setContentType(null),"setRequestHeader"in p&&Tu.forEach(a.toJSON(),(function(e,t){p.setRequestHeader(t,e)})),Tu.isUndefined(r.withCredentials)||(p.withCredentials=!!r.withCredentials),d&&"json"!==d&&(p.responseType=r.responseType),f&&([l,u]=od(f,!0),p.addEventListener("progress",l)),h&&p.upload&&([o,c]=od(h),p.upload.addEventListener("progress",o),p.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(i=t=>{p&&(n(!t||t.type?new ad(null,e,p):t),p.abort(),p=null)},r.cancelToken&&r.cancelToken.subscribe(i),r.signal&&(r.signal.aborted?i():r.signal.addEventListener("abort",i)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);y&&-1===Ku.protocols.indexOf(y)?n(new Cu("Unsupported protocol "+y+":",Cu.ERR_BAD_REQUEST,e)):p.send(s||null)}))},yd=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const s=function(e){if(!n){n=!0,i();const t=e instanceof Error?e:this.reason;r.abort(t instanceof Cu?t:new ad(t instanceof Error?t.message:t))}};let a=t&&setTimeout((()=>{a=null,s(new Cu(`timeout ${t} of ms exceeded`,Cu.ETIMEDOUT))}),t);const i=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(s):e.removeEventListener("abort",s)})),e=null)};e.forEach((e=>e.addEventListener("abort",s)));const{signal:o}=r;return o.unsubscribe=()=>Tu.asap(i),o}},vd=function*(e,t){let n=e.byteLength;if(n<t)return void(yield e);let r,s=0;for(;s<n;)r=s+t,yield e.slice(s,r),s=r},bd=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},xd=(e,t,n,r)=>{const s=async function*(e,t){for await(const n of bd(e))yield*vd(n,t)}(e,t);let a,i=0,o=e=>{a||(a=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await s.next();if(t)return o(),void e.close();let a=r.byteLength;if(n){let e=i+=a;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw o(t),t}},cancel:e=>(o(e),s.return())},{highWaterMark:2})},wd="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,Ed=wd&&"function"==typeof ReadableStream,kd=wd&&("function"==typeof TextEncoder?(Sd=new TextEncoder,e=>Sd.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var Sd;const Nd=(e,...t)=>{try{return!!e(...t)}catch(n){return!1}},Td=Ed&&Nd((()=>{let e=!1;const t=new Request(Ku.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),Cd=Ed&&Nd((()=>Tu.isReadableStream(new Response("").body))),Rd={stream:Cd&&(e=>e.body)};var jd;wd&&(jd=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!Rd[e]&&(Rd[e]=Tu.isFunction(jd[e])?t=>t[e]():(t,n)=>{throw new Cu(`Response type '${e}' is not supported`,Cu.ERR_NOT_SUPPORT,n)})})));const Ad=async(e,t)=>{const n=Tu.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(Tu.isBlob(e))return e.size;if(Tu.isSpecCompliantForm(e)){const t=new Request(Ku.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Tu.isArrayBufferView(e)||Tu.isArrayBuffer(e)?e.byteLength:(Tu.isURLSearchParams(e)&&(e+=""),Tu.isString(e)?(await kd(e)).byteLength:void 0)})(t):n},_d={http:null,xhr:gd,fetch:wd&&(async e=>{let{url:t,method:n,data:r,signal:s,cancelToken:a,timeout:i,onDownloadProgress:o,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:h}=pd(e);c=c?(c+"").toLowerCase():"text";let f,m=yd([s,a&&a.toAbortSignal()],i);const p=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let g;try{if(l&&Td&&"get"!==n&&"head"!==n&&0!==(g=await Ad(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(Tu.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=ld(g,od(cd(l)));r=xd(n.body,65536,e,t)}}Tu.isString(d)||(d=d?"include":"omit");const s="credentials"in Request.prototype;f=new Request(t,{...h,signal:m,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:s?d:void 0});let a=await fetch(f);const i=Cd&&("stream"===c||"response"===c);if(Cd&&(o||i&&p)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=a[t]}));const t=Tu.toFiniteNumber(a.headers.get("content-length")),[n,r]=o&&ld(t,od(cd(o),!0))||[];a=new Response(xd(a.body,65536,n,(()=>{r&&r(),p&&p()})),e)}c=c||"text";let y=await Rd[Tu.findKey(Rd,c)||"text"](a,e);return!i&&p&&p(),await new Promise(((t,n)=>{id(t,n,{data:y,headers:nd.from(a.headers),status:a.status,statusText:a.statusText,config:e,request:f})}))}catch(y){if(p&&p(),y&&"TypeError"===y.name&&/Load failed|fetch/i.test(y.message))throw Object.assign(new Cu("Network Error",Cu.ERR_NETWORK,e,f),{cause:y.cause||y});throw Cu.from(y,y&&y.code,e,f)}})};Tu.forEach(_d,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));const Dd=e=>`- ${e}`,Id=e=>Tu.isFunction(e)||null===e||!1===e,Pd=e=>{e=Tu.isArray(e)?e:[e];const{length:t}=e;let n,r;const s={};for(let a=0;a<t;a++){let t;if(n=e[a],r=n,!Id(n)&&(r=_d[(t=String(n)).toLowerCase()],void 0===r))throw new Cu(`Unknown adapter '${t}'`);if(r)break;s[t||"#"+a]=r}if(!r){const e=Object.entries(s).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));throw new Cu("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(Dd).join("\n"):" "+Dd(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r};function Md(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ad(null,e)}function Ld(e){Md(e),e.headers=nd.from(e.headers),e.data=rd.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Pd(e.adapter||Xu.adapter)(e).then((function(t){return Md(e),t.data=rd.call(e,e.transformResponse,t),t.headers=nd.from(t.headers),t}),(function(t){return sd(t)||(Md(e),t&&t.response&&(t.response.data=rd.call(e,e.transformResponse,t.response),t.response.headers=nd.from(t.response.headers))),Promise.reject(t)}))}const Od="1.9.0",Ud={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Ud[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Fd={};Ud.transitional=function(e,t,n){function r(e,t){return"[Axios v1.9.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,s,a)=>{if(!1===e)throw new Cu(r(s," has been removed"+(t?" in "+t:"")),Cu.ERR_DEPRECATED);return t&&!Fd[s]&&(Fd[s]=!0,console.warn(r(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,s,a)}},Ud.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};const zd={assertOptions:function(e,t,n){if("object"!=typeof e)throw new Cu("options must be an object",Cu.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const a=r[s],i=t[a];if(i){const t=e[a],n=void 0===t||i(t,a,e);if(!0!==n)throw new Cu("option "+a+" must be "+n,Cu.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Cu("Unknown option "+a,Cu.ERR_BAD_OPTION)}},validators:Ud},Vd=zd.validators;let Bd=class{constructor(e){this.defaults=e||{},this.interceptors={request:new zu,response:new zu}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(r){}}throw n}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=md(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:s}=t;void 0!==n&&zd.assertOptions(n,{silentJSONParsing:Vd.transitional(Vd.boolean),forcedJSONParsing:Vd.transitional(Vd.boolean),clarifyTimeoutError:Vd.transitional(Vd.boolean)},!1),null!=r&&(Tu.isFunction(r)?t.paramsSerializer={serialize:r}:zd.assertOptions(r,{encode:Vd.function,serialize:Vd.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),zd.assertOptions(t,{baseUrl:Vd.spelling("baseURL"),withXsrfToken:Vd.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=s&&Tu.merge(s.common,s[t.method]);s&&Tu.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete s[e]})),t.headers=nd.concat(a,s);const i=[];let o=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,i.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,d=0;if(!o){const e=[Ld.bind(this),void 0];for(e.unshift.apply(e,i),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=i.length;let h=t;for(d=0;d<u;){const e=i[d++],t=i[d++];try{h=e(h)}catch(f){t.call(this,f);break}}try{c=Ld.call(this,h)}catch(f){return Promise.reject(f)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return Fu(hd((e=md(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}};Tu.forEach(["delete","get","head","options"],(function(e){Bd.prototype[e]=function(t,n){return this.request(md(n||{},{method:e,url:t,data:(n||{}).data}))}})),Tu.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,s){return this.request(md(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Bd.prototype[e]=t(),Bd.prototype[e+"Form"]=t(!0)}));const qd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(qd).forEach((([e,t])=>{qd[t]=e}));const $d=function e(t){const n=new Bd(t),r=Oc(Bd.prototype.request,n);return Tu.extend(r,Bd.prototype,n,{allOwnKeys:!0}),Tu.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(md(t,n))},r}(Xu);$d.Axios=Bd,$d.CanceledError=ad,$d.CancelToken=class e{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,s){n.reason||(n.reason=new ad(e,r,s),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let t;return{token:new e((function(e){t=e})),cancel:t}}},$d.isCancel=sd,$d.VERSION=Od,$d.toFormData=Pu,$d.AxiosError=Cu,$d.Cancel=$d.CanceledError,$d.all=function(e){return Promise.all(e)},$d.spread=function(e){return function(t){return e.apply(null,t)}},$d.isAxiosError=function(e){return Tu.isObject(e)&&!0===e.isAxiosError},$d.mergeConfig=md,$d.AxiosHeaders=nd,$d.formToJSON=e=>Qu(Tu.isHTMLForm(e)?new FormData(e):e),$d.getAdapter=Pd,$d.HttpStatusCode=qd,$d.default=$d;const{Axios:Hd,AxiosError:Wd,CanceledError:Gd,isCancel:Kd,CancelToken:Qd,VERSION:Xd,all:Jd,Cancel:Yd,isAxiosError:Zd,spread:eh,toFormData:th,AxiosHeaders:nh,HttpStatusCode:rh,formToJSON:sh,getAdapter:ah,mergeConfig:ih}=$d,oh=$d.create({baseURL:"https://bigproject-production.konstantine.fr/api",timeout:15e3,headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},transformResponse:[e=>{try{return JSON.parse(e)}catch(t){return e}}],maxRedirects:0});oh.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),!e.data||e.data instanceof FormData||(e.headers["Content-Type"]="application/json"),e}),(e=>Promise.reject(e))),$d.create({timeout:1e4,headers:{Accept:"application/json"}});const lh=$d.create({baseURL:"https://api-adresse.data.gouv.fr",timeout:5e3,headers:{Accept:"application/json"}});let ch=!1;(()=>{if(document.getElementById("hide-scrollbars-style"))return;const e=document.createElement("style");e.id="hide-scrollbars-style",e.innerHTML="\n    /* Hide scrollbars in all browsers while keeping scrollability */\n    \n    /* Universal selector for all elements */\n    * {\n      -ms-overflow-style: none !important;\n      scrollbar-width: none !important;\n    }\n    \n    /* WebKit browsers (Chrome, Safari, newer versions of Opera) */\n    ::-webkit-scrollbar,\n    ::-webkit-scrollbar-track,\n    ::-webkit-scrollbar-thumb {\n      width: 0 !important;\n      height: 0 !important;\n      background: transparent !important;\n      display: none !important;\n    }\n    \n    /* Specific elements that might have scrollbars */\n    html, body, div, main, section, article, aside, nav, header, footer {\n      scrollbar-width: none !important;\n      -ms-overflow-style: none !important;\n    }\n    \n    html::-webkit-scrollbar,\n    body::-webkit-scrollbar,\n    div::-webkit-scrollbar,\n    main::-webkit-scrollbar,\n    section::-webkit-scrollbar,\n    article::-webkit-scrollbar,\n    aside::-webkit-scrollbar,\n    nav::-webkit-scrollbar,\n    header::-webkit-scrollbar,\n    footer::-webkit-scrollbar {\n      width: 0 !important;\n      height: 0 !important;\n      background: transparent !important;\n      display: none !important;\n    }\n  ",document.head.appendChild(e)})();ch=(()=>{try{if(localStorage&&"true"===localStorage.getItem("preferLowPerformanceMode"))return!0;const e=navigator.hardwareConcurrency||0;if(e>0&&e<=2)return!0;const t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),n=/Windows NT (5\.1|6\.0|6\.1)|Mac OS X 10[._]([0-9]|10|11)/i.test(navigator.userAgent);return t||n}catch(e){return console.error("Error detecting performance mode:",e),!1}})();(()=>{if("undefined"==typeof document)return;if(document.getElementById("global-page-transition-overlay"))return;const e=document.createElement("div");e.id="global-page-transition-overlay",e.style.cssText=`\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: white;\n    z-index: 9999;\n    display: none;\n    justify-content: center;\n    align-items: center;\n    opacity: 0;\n    transition: opacity ${ch?"0.1s":"0.2s"} ease-in-out;\n  `;const t=document.createElement("div");t.style.cssText=ch?"\n      width: 30px;\n      height: 30px;\n      border-radius: 50%;\n      border: 2px solid rgba(0, 40, 79, 0.3);\n      border-top-color: #02284f;\n      animation: loader-spin 1.2s infinite linear;\n    ":"\n      width: 40px;\n      height: 40px;\n      border-radius: 50%;\n      border: 3px solid rgba(0, 40, 79, 0.1);\n      border-top-color: #02284f;\n      animation: loader-spin 1s infinite linear;\n    ";const n=document.createElement("style");n.textContent="\n    @keyframes loader-spin {\n      0% { transform: rotate(0deg); }\n      100% { transform: rotate(360deg); }\n    }\n  ",e.appendChild(t),document.head.appendChild(n),document.body?document.body.appendChild(e):window.addEventListener("DOMContentLoaded",(()=>{document.body.appendChild(e)}))})();const uh=new Map;function dh(){if(void 0!==window._devicePerformanceScore)return window._devicePerformanceScore;try{const e=performance.now();let t=0;for(let s=0;s<1e5;s++)t+=Math.sqrt(s);const n=performance.now()-e,r=Math.min(100,Math.max(0,n/10));return window._devicePerformanceScore=r,r}catch(e){return 50}}function hh(e,t=!1){const n=dh(),r=t?Math.max(1,1+n/100):Math.max(1,1.5+n/50);return Math.round(e*r)}const fh=(e=!1)=>{const t=(void 0===window._devicePerformanceScore&&dh(),"true"===localStorage.getItem("preferLowPerformanceMode")||window._devicePerformanceScore>70);return e?t?3e3:2e3:t?15e3:3e4};$d.interceptors.request.use((e=>{if(e.data,e.url&&(e.url.includes("/login_check")||e.url.includes("/token/refresh")||e.url.includes("/token/revoke")),!e.timeout){const t=e.url&&(e.url.includes("/profile/")||e.url.includes("/me"));e.timeout=fh(t)}e.withCredentials=!0;const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),(e=>Promise.reject(e))),$d.interceptors.response.use((e=>(e.config?.url&&(e.config.url.includes("/login_check")||e.config.url.includes("/token/refresh")||e.config.url.includes("/token/revoke")),e)),(e=>Promise.reject(e))),$d.defaults.withCredentials=!0,$d.defaults.timeout=15e3;const mh=3e5,ph={MAX_CACHE_SIZE:30,MAX_ITEM_SIZE:102400,PROFILE_SIZE_LIMIT:51200,CLEANUP_INTERVAL:12e4},gh=new Map;let yh=!1,vh=Date.now();const bh="public-profile",xh=e=>{const t=JSON.stringify(e);return t?2*t.length:0},wh=()=>{const e=Date.now();if(!(e-vh<ph.CLEANUP_INTERVAL)){vh=e;for(const[t,n]of gh.entries())n.expiry<e&&gh.delete(t);if(gh.size>ph.MAX_CACHE_SIZE){const t=Array.from(gh.entries());t.forEach((([t,n])=>{const r=e-n.timestamp,s=xh(n.data);n._score=r*(s/1024)})),t.sort(((e,t)=>t[1]._score-e[1]._score));for(let e=0;e<t.length&&gh.size>ph.MAX_CACHE_SIZE;e++)gh.delete(t[e][0])}if(window.gc)try{window.gc()}catch(t){}}},Eh=e=>{if(!e)return"/api";const t=e.replace(/\/+$/,"");return t.match(/^https?:\/\//)||t.startsWith("/api/")?t:t.startsWith("/")?`/api${t}`:`/api/${t}`},kh=(e,t,n={})=>`${e}:${t}:${JSON.stringify(n)}`,Sh={async get(e,t={}){try{const r=Eh(e),s=`${e}${JSON.stringify(t.params||{})}`,a=e.includes("/profile/public/"),i="/profile"===e||"/me"===e||"/api/me"===e,o=a||i,l=e.includes("/static")||e.includes("/config");if(i&&!t.noCache&&!t.background)try{const e=localStorage.getItem("user");if(e){const t=JSON.parse(e),n=t._extractedAt||0;if(Date.now()-n<3e4)return Promise.resolve(t)}}catch(n){}if(uh.has(s))return uh.get(s);if(!t.noCache){const e=kh("GET",r,t.params),n=gh.get(e);if(n&&n.expiry>Date.now())return n.data}const c=e.includes("/messages"),u=e.includes("/auth")||!0===t.critical,d=o?2e3:c?5e3:u?8e3:1e4,h=t.timeout||hh(d,u),f={...t,timeout:h,headers:{...t.headers,"X-Request-Type":o?"profile":l?"static":"standard","X-Cache-Priority":o?"high":"normal","Cache-Control":o?"no-cache":"max-age=300"}},m=void 0!==t.retries?Math.min(t.retries,2):o?0:c?1:0,p=(async()=>{let e=0,s=null;Date.now();for(;e<=m;)try{const e=await $d.get(r,f);if(!t.noCache){const s=kh("GET",r,t.params);let a=t.cacheDuration||6e4;o?a=mh:l&&(a=6e5);const i=xh(e.data);if(i<=(o?ph.PROFILE_SIZE_LIMIT:ph.MAX_ITEM_SIZE)&&gh.set(s,{data:e.data,timestamp:Date.now(),expiry:Date.now()+a,size:i}),o&&e.data)try{const t=this._createMinimalUserData(e.data);t._extractedAt=Date.now(),localStorage.setItem("user",JSON.stringify(t))}catch(n){}wh()}return e.data}catch(a){if(s=a,o)try{const e=kh("GET",r,t.params),n=gh.get(e);if(n)return n.data;const s=localStorage.getItem("user");if(s)return JSON.parse(s)}catch(n){}if(a.response&&a.response.status>=400&&a.response.status<500)break;if(!(e<m))break;{const t=Math.min(1e3*Math.pow(2,e),8e3);await new Promise((e=>setTimeout(e,t))),e++}}throw s})();uh.set(s,p);try{return await p}finally{uh.delete(s)}}catch(r){throw r}},async post(e,t={},n={}){try{const r=Eh(e);return(await $d.post(r,t,n)).data}catch(r){if(e.includes("login_check"))throw r;return r.message&&r.message.includes("Network Error")?{success:!1,message:"Erreur de communication avec le serveur"}:r.response&&r.response.data?{success:!1,message:r.response.data.message||"Une erreur est survenue"}:{success:!1,message:"Une erreur est survenue"}}},async put(e,t={},n={}){try{const r=Eh(e);return(await $d.put(r,t,n)).data}catch(r){return r.message&&r.message.includes("Network Error")?{success:!1,message:"Erreur de communication avec le serveur"}:r.response&&r.response.data?{success:!1,message:r.response.data.message||"Une erreur est survenue"}:{success:!1,message:"Une erreur est survenue"}}},async delete(e,t={}){try{return(await $d.delete(Eh(e),t)).data}catch(n){throw n}},async getUsersByRole(e){const t=e.startsWith("ROLE_")?e:`ROLE_${e.replace("ROLE_","")}`;try{return await this.get(`/users-by-role/${t}`)}catch(n){console.warn(`L'API /users-by-role/${t} a échoué, tentative avec /users`);const e=await this.get("/users");if(e.success&&e.data){return{success:!0,data:e.data.filter((e=>e.roles&&e.roles.some((e=>e.name===t||e.name===t.replace("ROLE_","")||"ROLE_"+e.name===t))))}}return e}},async getAllRoles(){try{return await this.get("/user-roles/roles")}catch(e){return console.warn("Erreur lors de la récupération des rôles depuis l'API, utilisation des rôles prédéfinis",e),{success:!0,data:[{id:1,name:"ROLE_SUPERADMIN",description:"Super Administrateur"},{id:2,name:"ROLE_ADMIN",description:"Administrateur"},{id:3,name:"ROLE_TEACHER",description:"Formateur"},{id:4,name:"ROLE_STUDENT",description:"Étudiant"},{id:5,name:"ROLE_HR",description:"Ressources Humaines"},{id:6,name:"ROLE_RECRUITER",description:"Recruteur"},{id:7,name:"ROLE_GUEST",description:"Invité"}]}}},async changeUserRole(e,t,n){return this.post("/user-roles/change-role",{userId:e,oldRoleName:t,newRoleName:n})},async updateUser(e,t){return this.put(`/users/${e}`,t)},withAuth(e={}){const t=localStorage.getItem("token");return t?{...e,headers:{...e.headers,Authorization:`Bearer ${t}`}}:e},invalidateCache(e){},invalidateProfileCache(){this.invalidateCache("/profile"),this.invalidateCache("/api/me")},invalidateDocumentCache(){this.invalidateCache("/documents")},clearCache(){gh.clear();["token","refresh_token","user","userRoles"].forEach((e=>{try{localStorage.getItem(e)&&localStorage.removeItem(e)}catch(t){}})),window.dispatchEvent(new Event("api-cache-cleared"))},invalidateCacheEntry(e,t,n={}){const r=Eh(t),s=kh(e,r,n);gh.delete(s)},async getUserProfile(e={}){if(!e.noCache)try{const e=localStorage.getItem("user");if(e){const t=JSON.parse(e),n=t._extractedAt||0;if(Date.now()-n<3e4)return t}}catch(t){}return this.get("/me",{headers:{"X-Request-Type":"profile","X-Cache-Priority":"high"},cacheDuration:mh,timeout:hh(2e3,!0),retries:0,...e})},preloadProfileData(){yh||(yh=!0,setTimeout((()=>{this.getUserProfile({background:!0}).catch((()=>{}))}),100))},_createMinimalUserData(e){if(!e)return null;const t={id:e.id,email:e.email,firstName:e.firstName||e.firstname,lastName:e.lastName||e.lastname,roles:e.roles,status:e.status};return e.avatar&&(t.avatar=e.avatar),e.permissions&&(t.permissions=e.permissions),t},clearMemoryCache(){if(gh.clear(),window.gc)try{window.gc()}catch(e){}},async getPublicProfile(e,t={}){if(!e)throw new Error("User ID is required to fetch public profile");const n=`${bh}-${e}`;try{if(!t.signal){const e=gh.get(n);if(e&&e.expiry>Date.now())return e.data}const r=await this.get(`/profile/public/${e}`,{...t,noCache:!0,headers:{...t.headers,"X-Request-Type":"public-profile","Cache-Control":"no-cache",Pragma:"no-cache"},timeout:hh(5e3,!0)});if(r){const e={success:!0,data:{user:r.data?.user||r.data||r}};return t.signal||gh.set(n,{data:e,timestamp:Date.now(),expiry:Date.now()+12e4}),e}throw new Error("No response received from server")}catch(r){if("ECONNABORTED"===r.code)throw new Error("La requête a pris trop de temps, veuillez réessayer");if(r.response)throw new Error(r.response.data.message||"Erreur lors de la récupération du profil public");throw r}},clearPublicProfileCache(e){if(e){const t=`${bh}-${e}`;gh.delete(t)}else for(const[t]of gh.entries())t.startsWith(bh)&&gh.delete(t)}};const Nh=Array(12).fill(0),Th=({visible:e,className:t})=>X.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},X.createElement("div",{className:"sonner-spinner"},Nh.map(((e,t)=>X.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`}))))),Ch=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},X.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Rh=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},X.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),jh=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},X.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Ah=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},X.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),_h=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},X.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),X.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}));let Dh=1;const Ih=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach((t=>t(e)))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:n,...r}=e,s="number"==typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:Dh++,a=this.toasts.find((e=>e.id===s)),i=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),a?this.toasts=this.toasts.map((t=>t.id===s?(this.publish({...t,...e,id:s,title:n}),{...t,...e,id:s,dismissible:i,title:n}):t)):this.addToast({title:n,...r,dismissible:i,id:s}),s},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame((()=>this.subscribers.forEach((t=>t({id:e,dismiss:!0})))))):this.toasts.forEach((e=>{this.subscribers.forEach((t=>t({id:e.id,dismiss:!0})))})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;void 0!==t.loading&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:"function"!=typeof t.description?t.description:void 0}));const r=Promise.resolve(e instanceof Function?e():e);let s,a=void 0!==n;const i=r.then((async e=>{s=["resolve",e];if(X.isValidElement(e))a=!1,this.create({id:n,type:"default",message:e});else if(Ph(e)&&!e.ok){a=!1;const r="function"==typeof t.error?await t.error(`HTTP error! status: ${e.status}`):t.error,s="function"==typeof t.description?await t.description(`HTTP error! status: ${e.status}`):t.description,i="object"==typeof r&&!X.isValidElement(r)?r:{message:r};this.create({id:n,type:"error",description:s,...i})}else if(e instanceof Error){a=!1;const r="function"==typeof t.error?await t.error(e):t.error,s="function"==typeof t.description?await t.description(e):t.description,i="object"==typeof r&&!X.isValidElement(r)?r:{message:r};this.create({id:n,type:"error",description:s,...i})}else if(void 0!==t.success){a=!1;const r="function"==typeof t.success?await t.success(e):t.success,s="function"==typeof t.description?await t.description(e):t.description,i="object"==typeof r&&!X.isValidElement(r)?r:{message:r};this.create({id:n,type:"success",description:s,...i})}})).catch((async e=>{if(s=["reject",e],void 0!==t.error){a=!1;const r="function"==typeof t.error?await t.error(e):t.error,s="function"==typeof t.description?await t.description(e):t.description,i="object"==typeof r&&!X.isValidElement(r)?r:{message:r};this.create({id:n,type:"error",description:s,...i})}})).finally((()=>{a&&(this.dismiss(n),n=void 0),null==t.finally||t.finally.call(t)})),o=()=>new Promise(((e,t)=>i.then((()=>"reject"===s[0]?t(s[1]):e(s[1]))).catch(t)));return"string"!=typeof n&&"number"!=typeof n?{unwrap:o}:Object.assign(n,{unwrap:o})},this.custom=(e,t)=>{const n=(null==t?void 0:t.id)||Dh++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter((e=>!this.dismissedToasts.has(e.id))),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Ph=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,Mh=(e,t)=>{const n=(null==t?void 0:t.id)||Dh++;return Ih.addToast({title:e,...t,id:n}),n},Lh=Object.assign(Mh,{success:Ih.success,info:Ih.info,warning:Ih.warning,error:Ih.error,custom:Ih.custom,message:Ih.message,promise:Ih.promise,dismiss:Ih.dismiss,loading:Ih.loading},{getHistory:()=>Ih.toasts,getToasts:()=>Ih.getActiveToasts()});function Oh(e){return void 0!==e.label}!function(e){if("undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");const Uh=3,Fh=14;function zh(...e){return e.filter(Boolean).join(" ")}const Vh=e=>{var t,n,r,s,a,i,o,l,c;const{invert:u,toast:d,unstyled:h,interacting:f,setHeights:m,visibleToasts:p,heights:g,index:y,toasts:v,expanded:b,removeToast:x,defaultRichColors:w,closeButton:E,style:k,cancelButtonStyle:S,actionButtonStyle:N,className:T="",descriptionClassName:C="",duration:R,position:j,gap:A,expandByDefault:_,classNames:D,icons:I,closeButtonAriaLabel:P="Close toast"}=e,[M,L]=X.useState(null),[O,U]=X.useState(null),[F,z]=X.useState(!1),[V,B]=X.useState(!1),[q,$]=X.useState(!1),[H,W]=X.useState(!1),[G,K]=X.useState(!1),[Q,J]=X.useState(0),[Y,Z]=X.useState(0),ee=X.useRef(d.duration||R||4e3),te=X.useRef(null),ne=X.useRef(null),re=0===y,se=y+1<=p,ae=d.type,ie=!1!==d.dismissible,oe=d.className||"",le=d.descriptionClassName||"",ce=X.useMemo((()=>g.findIndex((e=>e.toastId===d.id))||0),[g,d.id]),ue=X.useMemo((()=>{var e;return null!=(e=d.closeButton)?e:E}),[d.closeButton,E]),de=X.useMemo((()=>d.duration||R||4e3),[d.duration,R]),he=X.useRef(0),fe=X.useRef(0),me=X.useRef(0),pe=X.useRef(null),[ge,ye]=j.split("-"),ve=X.useMemo((()=>g.reduce(((e,t,n)=>n>=ce?e:e+t.height),0)),[g,ce]),be=(()=>{const[e,t]=X.useState(document.hidden);return X.useEffect((()=>{const e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)}),[]),e})(),xe=d.invert||u,we="loading"===ae;fe.current=X.useMemo((()=>ce*A+ve),[ce,ve]),X.useEffect((()=>{ee.current=de}),[de]),X.useEffect((()=>{z(!0)}),[]),X.useEffect((()=>{const e=ne.current;if(e){const t=e.getBoundingClientRect().height;return Z(t),m((e=>[{toastId:d.id,height:t,position:d.position},...e])),()=>m((e=>e.filter((e=>e.toastId!==d.id))))}}),[m,d.id]),X.useLayoutEffect((()=>{if(!F)return;const e=ne.current,t=e.style.height;e.style.height="auto";const n=e.getBoundingClientRect().height;e.style.height=t,Z(n),m((e=>e.find((e=>e.toastId===d.id))?e.map((e=>e.toastId===d.id?{...e,height:n}:e)):[{toastId:d.id,height:n,position:d.position},...e]))}),[F,d.title,d.description,m,d.id]);const Ee=X.useCallback((()=>{B(!0),J(fe.current),m((e=>e.filter((e=>e.toastId!==d.id)))),setTimeout((()=>{x(d)}),200)}),[d,x,m,fe]);X.useEffect((()=>{if(d.promise&&"loading"===ae||d.duration===1/0||"loading"===d.type)return;let e;return b||f||be?(()=>{if(me.current<he.current){const e=(new Date).getTime()-he.current;ee.current=ee.current-e}me.current=(new Date).getTime()})():ee.current!==1/0&&(he.current=(new Date).getTime(),e=setTimeout((()=>{null==d.onAutoClose||d.onAutoClose.call(d,d),Ee()}),ee.current)),()=>clearTimeout(e)}),[b,f,d,ae,be,Ee]),X.useEffect((()=>{d.delete&&Ee()}),[Ee,d.delete]);const ke=d.icon||(null==I?void 0:I[ae])||(e=>{switch(e){case"success":return Ch;case"info":return jh;case"warning":return Rh;case"error":return Ah;default:return null}})(ae);var Se,Ne;return X.createElement("li",{tabIndex:0,ref:ne,className:zh(T,oe,null==D?void 0:D.toast,null==d||null==(t=d.classNames)?void 0:t.toast,null==D?void 0:D.default,null==D?void 0:D[ae],null==d||null==(n=d.classNames)?void 0:n[ae]),"data-sonner-toast":"","data-rich-colors":null!=(Se=d.richColors)?Se:w,"data-styled":!Boolean(d.jsx||d.unstyled||h),"data-mounted":F,"data-promise":Boolean(d.promise),"data-swiped":G,"data-removed":V,"data-visible":se,"data-y-position":ge,"data-x-position":ye,"data-index":y,"data-front":re,"data-swiping":q,"data-dismissible":ie,"data-type":ae,"data-invert":xe,"data-swipe-out":H,"data-swipe-direction":O,"data-expanded":Boolean(b||_&&F),style:{"--index":y,"--toasts-before":y,"--z-index":v.length-y,"--offset":`${V?Q:fe.current}px`,"--initial-height":_?"auto":`${Y}px`,...k,...d.style},onDragEnd:()=>{$(!1),L(null),pe.current=null},onPointerDown:e=>{!we&&ie&&(te.current=new Date,J(fe.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&($(!0),pe.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,t,n;if(H||!ie)return;pe.current=null;const r=Number((null==(e=ne.current)?void 0:e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),s=Number((null==(t=ne.current)?void 0:t.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),a=(new Date).getTime()-(null==(n=te.current)?void 0:n.getTime()),i="x"===M?r:s,o=Math.abs(i)/a;if(Math.abs(i)>=45||o>.11)return J(fe.current),null==d.onDismiss||d.onDismiss.call(d,d),U("x"===M?r>0?"right":"left":s>0?"down":"up"),Ee(),void W(!0);var l,c;null==(l=ne.current)||l.style.setProperty("--swipe-amount-x","0px"),null==(c=ne.current)||c.style.setProperty("--swipe-amount-y","0px"),K(!1),$(!1),L(null)},onPointerMove:t=>{var n,r,s;if(!pe.current||!ie)return;if((null==(n=window.getSelection())?void 0:n.toString().length)>0)return;const a=t.clientY-pe.current.y,i=t.clientX-pe.current.x;var o;const l=null!=(o=e.swipeDirections)?o:function(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}(j);!M&&(Math.abs(i)>1||Math.abs(a)>1)&&L(Math.abs(i)>Math.abs(a)?"x":"y");let c={x:0,y:0};const u=e=>1/(1.5+Math.abs(e)/20);if("y"===M){if(l.includes("top")||l.includes("bottom"))if(l.includes("top")&&a<0||l.includes("bottom")&&a>0)c.y=a;else{const e=a*u(a);c.y=Math.abs(e)<Math.abs(a)?e:a}}else if("x"===M&&(l.includes("left")||l.includes("right")))if(l.includes("left")&&i<0||l.includes("right")&&i>0)c.x=i;else{const e=i*u(i);c.x=Math.abs(e)<Math.abs(i)?e:i}(Math.abs(c.x)>0||Math.abs(c.y)>0)&&K(!0),null==(r=ne.current)||r.style.setProperty("--swipe-amount-x",`${c.x}px`),null==(s=ne.current)||s.style.setProperty("--swipe-amount-y",`${c.y}px`)}},ue&&!d.jsx&&"loading"!==ae?X.createElement("button",{"aria-label":P,"data-disabled":we,"data-close-button":!0,onClick:we||!ie?()=>{}:()=>{Ee(),null==d.onDismiss||d.onDismiss.call(d,d)},className:zh(null==D?void 0:D.closeButton,null==d||null==(r=d.classNames)?void 0:r.closeButton)},null!=(Ne=null==I?void 0:I.close)?Ne:_h):null,(ae||d.icon||d.promise)&&null!==d.icon&&(null!==(null==I?void 0:I[ae])||d.icon)?X.createElement("div",{"data-icon":"",className:zh(null==D?void 0:D.icon,null==d||null==(s=d.classNames)?void 0:s.icon)},d.promise||"loading"===d.type&&!d.icon?d.icon||function(){var e,t;return(null==I?void 0:I.loading)?X.createElement("div",{className:zh(null==D?void 0:D.loader,null==d||null==(t=d.classNames)?void 0:t.loader,"sonner-loader"),"data-visible":"loading"===ae},I.loading):X.createElement(Th,{className:zh(null==D?void 0:D.loader,null==d||null==(e=d.classNames)?void 0:e.loader),visible:"loading"===ae})}():null,"loading"!==d.type?ke:null):null,X.createElement("div",{"data-content":"",className:zh(null==D?void 0:D.content,null==d||null==(a=d.classNames)?void 0:a.content)},X.createElement("div",{"data-title":"",className:zh(null==D?void 0:D.title,null==d||null==(i=d.classNames)?void 0:i.title)},d.jsx?d.jsx:"function"==typeof d.title?d.title():d.title),d.description?X.createElement("div",{"data-description":"",className:zh(C,le,null==D?void 0:D.description,null==d||null==(o=d.classNames)?void 0:o.description)},"function"==typeof d.description?d.description():d.description):null),X.isValidElement(d.cancel)?d.cancel:d.cancel&&Oh(d.cancel)?X.createElement("button",{"data-button":!0,"data-cancel":!0,style:d.cancelButtonStyle||S,onClick:e=>{Oh(d.cancel)&&ie&&(null==d.cancel.onClick||d.cancel.onClick.call(d.cancel,e),Ee())},className:zh(null==D?void 0:D.cancelButton,null==d||null==(l=d.classNames)?void 0:l.cancelButton)},d.cancel.label):null,X.isValidElement(d.action)?d.action:d.action&&Oh(d.action)?X.createElement("button",{"data-button":!0,"data-action":!0,style:d.actionButtonStyle||N,onClick:e=>{Oh(d.action)&&(null==d.action.onClick||d.action.onClick.call(d.action,e),e.defaultPrevented||Ee())},className:zh(null==D?void 0:D.actionButton,null==d||null==(c=d.classNames)?void 0:c.actionButton)},d.action.label):null)};function Bh(){if("undefined"==typeof window)return"ltr";if("undefined"==typeof document)return"ltr";const e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}function qh(e,t){const n={};return[e,t].forEach(((e,t)=>{const r=1===t,s=r?"--mobile-offset":"--offset",a=r?"16px":"24px";function i(e){["top","right","bottom","left"].forEach((t=>{n[`${s}-${t}`]="number"==typeof e?`${e}px`:e}))}"number"==typeof e||"string"==typeof e?i(e):"object"==typeof e?["top","right","bottom","left"].forEach((t=>{void 0===e[t]?n[`${s}-${t}`]=a:n[`${s}-${t}`]="number"==typeof e[t]?`${e[t]}px`:e[t]})):i(a)})),n}const $h=X.forwardRef((function(e,t){const{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:a,closeButton:i,className:o,offset:l,mobileOffset:c,theme:u="light",richColors:d,duration:h,style:f,visibleToasts:m=Uh,toastOptions:p,dir:g=Bh(),gap:y=Fh,icons:v,containerAriaLabel:b="Notifications"}=e,[x,w]=X.useState([]),E=X.useMemo((()=>Array.from(new Set([r].concat(x.filter((e=>e.position)).map((e=>e.position)))))),[x,r]),[k,S]=X.useState([]),[N,T]=X.useState(!1),[C,R]=X.useState(!1),[j,A]=X.useState("system"!==u?u:"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),_=X.useRef(null),D=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),I=X.useRef(null),P=X.useRef(!1),M=X.useCallback((e=>{w((t=>{var n;return(null==(n=t.find((t=>t.id===e.id)))?void 0:n.delete)||Ih.dismiss(e.id),t.filter((({id:t})=>t!==e.id))}))}),[]);return X.useEffect((()=>Ih.subscribe((e=>{e.dismiss?requestAnimationFrame((()=>{w((t=>t.map((t=>t.id===e.id?{...t,delete:!0}:t))))})):setTimeout((()=>{J.flushSync((()=>{w((t=>{const n=t.findIndex((t=>t.id===e.id));return-1!==n?[...t.slice(0,n),{...t[n],...e},...t.slice(n+1)]:[e,...t]}))}))}))}))),[x]),X.useEffect((()=>{if("system"!==u)return void A(u);if("system"===u&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?A("dark"):A("light")),"undefined"==typeof window)return;const e=window.matchMedia("(prefers-color-scheme: dark)");try{e.addEventListener("change",(({matches:e})=>{A(e?"dark":"light")}))}catch(t){e.addListener((({matches:e})=>{try{A(e?"dark":"light")}catch(t){console.error(t)}}))}}),[u]),X.useEffect((()=>{x.length<=1&&T(!1)}),[x]),X.useEffect((()=>{const e=e=>{var t;var n;s.every((t=>e[t]||e.code===t))&&(T(!0),null==(n=_.current)||n.focus());"Escape"!==e.code||document.activeElement!==_.current&&!(null==(t=_.current)?void 0:t.contains(document.activeElement))||T(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[s]),X.useEffect((()=>{if(_.current)return()=>{I.current&&(I.current.focus({preventScroll:!0}),I.current=null,P.current=!1)}}),[_.current]),X.createElement("section",{ref:t,"aria-label":`${b} ${D}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},E.map(((t,r)=>{var s;const[u,b]=t.split("-");return x.length?X.createElement("ol",{key:t,dir:"auto"===g?Bh():g,tabIndex:-1,ref:_,className:o,"data-sonner-toaster":!0,"data-sonner-theme":j,"data-y-position":u,"data-lifted":N&&x.length>1&&!a,"data-x-position":b,style:{"--front-toast-height":`${(null==(s=k[0])?void 0:s.height)||0}px`,"--width":"356px","--gap":`${y}px`,...f,...qh(l,c)},onBlur:e=>{P.current&&!e.currentTarget.contains(e.relatedTarget)&&(P.current=!1,I.current&&(I.current.focus({preventScroll:!0}),I.current=null))},onFocus:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||P.current||(P.current=!0,I.current=e.relatedTarget)},onMouseEnter:()=>T(!0),onMouseMove:()=>T(!0),onMouseLeave:()=>{C||T(!1)},onDragEnd:()=>T(!1),onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||R(!0)},onPointerUp:()=>R(!1)},x.filter((e=>!e.position&&0===r||e.position===t)).map(((r,s)=>{var o,l;return X.createElement(Vh,{key:r.id,icons:v,index:s,toast:r,defaultRichColors:d,duration:null!=(o=null==p?void 0:p.duration)?o:h,className:null==p?void 0:p.className,descriptionClassName:null==p?void 0:p.descriptionClassName,invert:n,visibleToasts:m,closeButton:null!=(l=null==p?void 0:p.closeButton)?l:i,interacting:C,position:t,style:null==p?void 0:p.style,unstyled:null==p?void 0:p.unstyled,classNames:null==p?void 0:p.classNames,cancelButtonStyle:null==p?void 0:p.cancelButtonStyle,actionButtonStyle:null==p?void 0:p.actionButtonStyle,closeButtonAriaLabel:null==p?void 0:p.closeButtonAriaLabel,removeToast:M,toasts:x.filter((e=>e.position==r.position)),heights:k.filter((e=>e.position==r.position)),setHeights:S,expandByDefault:a,gap:y,expanded:N,swipeDirections:e.swipeDirections})}))):null})))})),Hh=new le({defaultOptions:{queries:{staleTime:6e4,cacheTime:3e5,refetchOnWindowFocus:!1,retry:1,gcTime:6e5,logging:!1,meta:{tracked:!0,devtools:{enabled:!1}}}},logger:{log:()=>{},warn:()=>{},error:(...e)=>console.error(...e)}}),Wh=()=>Hh,Gh={data:null,timestamp:0,isLoading:!1,loadingPromise:null,requestCount:0,pendingRequests:new Map,freshnessDuration:12e4,maxAgeDuration:12e5,consecutiveErrors:0,errorThreshold:3,lastCircuitBreak:0,circuitBreakDuration:15e3,events:new EventTarget,currentOperationId:null,operationDebounceTime:100,lastOperationTime:0,deduplicationMap:new Map,invalidate(){this.data=null,this.timestamp=0}},Kh={LOADED:"userData:loaded",LOADING:"userData:loading",ERROR:"userData:error",UPDATED:"userData:updated",INVALIDATED:"userData:invalidated",UPDATING:"userData:updating"},Qh={activeRequests:new Map,routeUsers:new Map,processingRoutes:new Map,requestDebounceTime:3e3,lastRequestTime:new Map,requestCountPerRoute:new Map,requestThreshold:5,requestCountResetTime:1e4,registerRouteUser(e,t){this.routeUsers.has(e)||this.routeUsers.set(e,new Set),this.routeUsers.get(e).add(t)},unregisterRouteUser(e,t){this.routeUsers.has(e)&&(this.routeUsers.get(e).delete(t),0===this.routeUsers.get(e).size&&this.routeUsers.delete(e))},isRouteShared(e){return this.routeUsers.has(e)&&this.routeUsers.get(e).size>1},markRouteAsProcessing(e){return!this.processingRoutes.has(e)&&(this.processingRoutes.set(e,Date.now()),!0)},markRouteAsNotProcessing(e){this.processingRoutes.delete(e)},isRouteProcessing(e){if(!this.processingRoutes.has(e))return!1;return!(Date.now()-this.processingRoutes.get(e)>1e4)||(this.markRouteAsNotProcessing(e),!1)},shouldThrottleRequest(e){if(e.includes("/api/me"))return!1;const t=Date.now();if(e.includes("/profile")||e.includes("/user-roles")||e.includes("/user")){if("/profile/consolidated"===e){if(this.requestCountPerRoute.has(e)){const n=this.requestCountPerRoute.get(e);if(t-n.timestamp>this.requestCountResetTime)this.requestCountPerRoute.set(e,{count:1,timestamp:t});else if(n.count++,n.count>3)return!0}else this.requestCountPerRoute.set(e,{count:1,timestamp:t});if(this.lastRequestTime.has(e)){if(t-this.lastRequestTime.get(e)<2e3)return!0}return this.lastRequestTime.set(e,t),!1}if(this.requestCountPerRoute.has(e)){const n=this.requestCountPerRoute.get(e);t-n.timestamp>this.requestCountResetTime?this.requestCountPerRoute.set(e,{count:1,timestamp:t}):n.count++}else this.requestCountPerRoute.set(e,{count:1,timestamp:t});return this.lastRequestTime.set(e,t),!1}if(this.requestCountPerRoute.has(e)){const n=this.requestCountPerRoute.get(e);if(t-n.timestamp>this.requestCountResetTime)this.requestCountPerRoute.set(e,{count:1,timestamp:t});else if(n.count++,n.count>this.requestThreshold)return!0}else this.requestCountPerRoute.set(e,{count:1,timestamp:t});if(!this.lastRequestTime.has(e))return this.lastRequestTime.set(e,t),!1;return t-this.lastRequestTime.get(e)<this.requestDebounceTime||(this.lastRequestTime.set(e,t),!1)},registerActiveRequest(e,t){return this.activeRequests.set(e,t),t.finally((()=>{this.activeRequests.get(e)===t&&this.activeRequests.delete(e)})),t},getActiveRequest(e){return this.activeRequests.get(e)},coordinateRequest(e,t){const n=this.getActiveRequest(e);if(n)return n;if(this.isRouteProcessing(e))return Promise.resolve(null);this.markRouteAsProcessing(e);const r=t().finally((()=>{this.markRouteAsNotProcessing(e)}));return this.registerActiveRequest(e,r),r}},Xh={cache:Gh,requestRegistry:Qh,subscribers:{},stats:{requestCount:0,invalidationCount:0,updateCount:0,errorCount:0,lastUpdate:null},_debugCounters:{cacheHits:0,apiCalls:0,lastLogTime:0,logInterval:5e3},_log(e,t="info",n=!1){},getCachedUserData(){if(Gh.data)return Gh.data;try{const e=localStorage.getItem("user");if(e){const t=JSON.parse(e);return Gh.data=t,Gh.timestamp=Date.now(),t}}catch(e){}return null},getUserData(e={}){const{forceRefresh:t=!1,useCache:n=!0,componentId:r="default",requestId:s=null,routeKey:a="/api/profile",preventRecursion:i=!1}="object"==typeof e?e:{forceRefresh:!!e};if(window._userDataRequestDepth||(window._userDataRequestDepth=0),window._userDataRequestDepth>2){const e=this.getCachedUserData();if(e)return Promise.resolve(e)}window._userDataRequestDepth++;const o=()=>{window._userDataRequestDepth--};try{if(t)return this._loadUserData(r,{preventRecursion:i,forceRefresh:t,routeKey:a}).finally(o);if(n){const e=Gh,t=Date.now();if(e&&e.data&&e.timestamp&&t-e.timestamp<3e4)return this._debugCounters.cacheHits++,o(),Promise.resolve(e.data)}return this._loadUserData(r,{preventRecursion:i,routeKey:a}).finally(o)}catch(l){return o(),Promise.reject(l)}},async _loadUserData(e,t={}){const{preventRecursion:n=!1,forceRefresh:r=!1,routeKey:s="/api/profile"}=t,a=s;Gh.isLoading=!0,n||this._notifySubscribers(Kh.LOADING);const i=new Promise((async(e,t)=>{try{const t={noCache:!0,retries:2,timeout:12e3},r=await Sh.get(a,t);let s=null;if(s=r?.data?r.data:r?.user?r.user:r,Array.isArray(s)&&(s=s[0]),!s||"object"!=typeof s)throw new Error("Invalid user data format");Gh.data=s,Gh.timestamp=Date.now(),Gh.isLoading=!1,Gh.consecutiveErrors=0,n||(this._notifySubscribers(Kh.LOADED,s),this._notifySubscribers(Kh.UPDATED,s)),e(s)}catch(r){if(Gh.isLoading=!1,Gh.consecutiveErrors++,Gh.consecutiveErrors>=Gh.errorThreshold&&(Gh.lastCircuitBreak=Date.now()),this._notifySubscribers(Kh.ERROR,r),Gh.data)e(Gh.data);else{try{const e=localStorage.getItem("user");if(e)return JSON.parse(e)}catch(s){}t(r)}}finally{setTimeout((()=>{Gh.pendingRequests.delete(a)}),0)}}));return Gh.pendingRequests.set(a,i),i},isLoading:()=>Gh.isLoading,invalidateCache(e=null,t={}){try{this.stats&&(this.stats.invalidationCount=(this.stats.invalidationCount||0)+1,this.stats.lastUpdate=Date.now()),"function"==typeof Gh.invalidate?Gh.invalidate():(Gh.data=null,Gh.timestamp=0);const s=Wh();if(s)try{if(s.invalidateQueries({queryKey:["user","current"]}),e)switch(e){case"profile_picture":s.invalidateQueries({queryKey:["profilePicture"]});break;case"address":s.invalidateQueries({queryKey:["userAddress"]})}}catch(n){}try{this._notifySubscribers(Kh.INVALIDATED,e),this._notifySubscribers(Kh.UPDATING,e)}catch(r){}if(t&&t.skipRefresh){try{this._notifySubscribers(Kh.UPDATED,e,null,{isPartialUpdate:!0})}catch(r){}return Promise.resolve(null)}return this._loadUserData("invalidateCache").then((t=>{try{this._notifySubscribers(Kh.UPDATED,e,t)}catch(r){}return t})).catch((e=>{try{this._notifySubscribers(Kh.ERROR,e)}catch(r){}throw e}))}catch(s){return Promise.resolve(null)}},_notifySubscribers(e,...t){if(!this.subscribers)return void(this.subscribers={});this._recentNotifications||(this._recentNotifications={});const n=Date.now(),r=t[0]?JSON.stringify(t[0]).substring(0,50):"no-data",s=`${e}_${r}`;this._recentNotifications[s]&&n-this._recentNotifications[s]<500||(this._recentNotifications[s]=n,Object.keys(this._recentNotifications).forEach((e=>{n-this._recentNotifications[e]>5e3&&delete this._recentNotifications[e]})),setTimeout((()=>{if(this.subscribers[e]){[...this.subscribers[e]].forEach((e=>{try{e(...t)}catch(n){}}))}}),0))},subscribe(e,t){return Object.values(Kh).includes(e)?(this.subscribers||(this.subscribers={}),this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push(t),()=>{const n=this.subscribers[e].indexOf(t);-1!==n&&this.subscribers[e].splice(n,1)}):()=>{}},getStats(){const e=Date.now();return{requestCount:Gh.requestCount,lastUpdated:Gh.timestamp?new Date(Gh.timestamp).toISOString():null,dataAge:Gh.timestamp?e-Gh.timestamp:null,consecutiveErrors:Gh.consecutiveErrors,pendingRequests:Array.from(Gh.pendingRequests.keys()),isCircuitBreakerActive:Gh.consecutiveErrors>=Gh.errorThreshold&&e-Gh.lastCircuitBreak<Gh.circuitBreakDuration,deduplicationMapSize:Gh.deduplicationMap.size,deduplicationEntries:Array.from(Gh.deduplicationMap.entries()).map((([t,n])=>({key:t,age:e-n.timestamp}))),cacheStatus:Gh.data?e-Gh.timestamp<Gh.freshnessDuration?"fresh":e-Gh.timestamp<Gh.maxAgeDuration?"stale":"expired":"empty",hasCachedData:!!Gh.data,isLoading:Gh.isLoading}},coordinateRequest(e,t,n){if(this.requestRegistry.registerRouteUser(e,t),e.includes("/api/me")){const t=Date.now(),r=this.getCachedUserData();if(r&&Gh.timestamp&&t-Gh.timestamp<3e4)return this._debugCounters.cacheHits++,Promise.resolve(r);const s=this.requestRegistry.getActiveRequest(e);if(s)return s;this._debugCounters.apiCalls++;const a=n().then((e=>{Gh.data=e,Gh.timestamp=Date.now();try{localStorage.setItem("user",JSON.stringify(e))}catch(t){}return e}));return this.requestRegistry.registerActiveRequest(e,a),a}if(e.includes("/profile")||e.includes("/user-roles")||e.includes("/user")){const t=this.requestRegistry.getActiveRequest(e);if(t)return t;const r=n();return this.requestRegistry.registerActiveRequest(e,r),r}if(this.requestRegistry.shouldThrottleRequest(e)){const t=this.requestRegistry.getActiveRequest(e);return t||Promise.resolve(null)}return this.requestRegistry.coordinateRequest(e,n)}};function Jh(){const e=window.navigator.userAgent,t={Android:{type:"mobile",name:"Android Device"},"iPhone|iPad|iPod":{type:"mobile",name:"iOS Device"},Windows:{type:"desktop",name:"Windows Device"},Macintosh:{type:"desktop",name:"Mac Device"},Linux:{type:"desktop",name:"Linux Device"}};for(const[n,r]of Object.entries(t))if(new RegExp(n,"i").test(e))return r;return{type:"web",name:"Browser"}}function Yh(e){try{return JSON.parse(atob(e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/")))}catch{return null}}let Zh=localStorage.getItem("session_id")||Date.now().toString(36)+Math.random().toString(36).substring(2);const ef=()=>Zh,tf={lastCallTime:0,minInterval:2e3,callStack:[],stackLimit:3},nf={async register(e){try{const t=await Sh.post("/register",e);return t?.token&&localStorage.setItem("token",t.token),{status:t.status||201,data:t}}catch(t){throw t}},async login(e,t){try{sessionStorage.setItem("login_in_progress","true");const n=localStorage.getItem("device_id")||(()=>{const e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));return localStorage.setItem("device_id",e),e})(),{deviceName:r,deviceType:s}=Jh();localStorage.clear(),Zh=Date.now().toString(36)+Math.random().toString(36).substring(2),localStorage.setItem("session_id",Zh);const a=await Sh.post("/login_check",{username:e,password:t,device_id:n,device_name:r,device_type:s});if(a.token){localStorage.setItem("token",a.token);const e=Yh(a.token);if(e?.roles){const t={username:e.username,roles:e.roles,id:e.id,email:e.username,firstName:e.firstName,lastName:e.lastName,_extractedAt:Date.now(),_minimal:!0};localStorage.setItem("user",JSON.stringify(t)),localStorage.setItem("userRoles",JSON.stringify(e.roles)),document.dispatchEvent(new CustomEvent("auth:minimal-data-ready",{detail:{user:t}}))}}return a.refresh_token&&localStorage.setItem("refresh_token",a.refresh_token),await this.getCurrentUser(!0,{requestSource:"login"}),window.dispatchEvent(new Event("login-success")),window.dispatchEvent(new Event("auth-state-change")),this.lazyLoadUserData(!0).catch((()=>{})),sessionStorage.removeItem("login_in_progress"),a.data}catch(n){throw sessionStorage.removeItem("login_in_progress"),n}},async lazyLoadUserData(e=!1){const t=this.getUser();if(!t)return null;try{const e=await this._loadProfileData();let n=t;if(e){n=e,localStorage.setItem("user",JSON.stringify(n))}return sessionStorage.removeItem("login_in_progress"),document.dispatchEvent(new CustomEvent("user:data-updated",{detail:{user:n}})),window.dispatchEvent(new Event("user-data-loaded")),n}catch(n){return sessionStorage.removeItem("login_in_progress"),window.dispatchEvent(new Event("user-data-loaded")),t}},async _loadProfileData(){if(!this.isLoggedIn())return null;try{const e=await Sh.get("/api/me",{noCache:!0,timeout:1e4,retries:1}),t=e.user||e.data?.user||e.success?e.user:e;return t?(localStorage.setItem("user",JSON.stringify(t)),t):null}catch(e){return null}},async refreshToken(){try{const e=localStorage.getItem("refresh_token");if(!e)throw new Error("No refresh token available");const{deviceName:t,deviceType:n}=Jh(),r=await Sh.post("/token/refresh",{refresh_token:e,device_id:localStorage.getItem("device_id"),device_name:t,device_type:n});return r.token&&localStorage.setItem("token",r.token),r.refresh_token&&localStorage.setItem("refresh_token",r.refresh_token),r}catch(e){throw 401!==e.response?.status&&403!==e.response?.status||this.logout(),e}},async logout(e="/login"){try{window.__isLoggingOut=!0,window.__isNavigating=!0,localStorage.clear(),sessionStorage.clear();try{const e=localStorage.getItem("refresh_token");e&&await Sh.post("/token/revoke",{refresh_token:e,device_id:localStorage.getItem("device_id")}).catch((()=>{}))}catch(t){}try{Sh.clearCache()}catch(t){}return Zh=Date.now().toString(36)+Math.random().toString(36).substring(2),window.dispatchEvent(new CustomEvent("logout-success",{detail:{redirectTo:e}})),window.dispatchEvent(new Event("auth-state-change")),setTimeout((()=>window.location.replace(e||"/login")),10),!0}catch(t){return localStorage.clear(),sessionStorage.clear(),window.location.replace("/login"),!1}},async logoutAllDevices(){try{await Sh.post("/token/revoke-all"),localStorage.removeItem("token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),userDataPromise=null,console.warn("Impossible de vider le cache: queryClient non défini")}catch(e){throw console.error("Erreur lors de la déconnexion de tous les appareils:",e),console.error("Détails:",e.response?.data||e.message),e}},async getDevices(){try{return await Sh.get("/token/devices")}catch(e){throw console.error("Erreur lors de la récupération des appareils:",e),console.error("Détails:",e.response?.data||e.message),e}},getToken:()=>localStorage.getItem("token"),getUser(){const e=localStorage.getItem("user");return e?JSON.parse(e):null},isLoggedIn(){const e=this.getToken();if(!e)return!1;try{const t=Yh(e);return t&&t.exp>Date.now()/1e3}catch(t){return!1}},isAuthenticated(){return this.isLoggedIn()},hasRole(e){const t=this.getUser();if(!t)return!1;const n=Array.isArray(t.roles)?t.roles:"object"==typeof t.roles?Object.values(t.roles):t.role?Array.isArray(t.role)?t.role:[t.role]:[],r=e.toUpperCase().startsWith("ROLE_")?e.toUpperCase():`ROLE_${e.toUpperCase()}`;return n.some((e=>{if("string"==typeof e){return(e.toUpperCase().startsWith("ROLE_")?e.toUpperCase():`ROLE_${e.toUpperCase()}`)===r}if("object"==typeof e&&null!==e){const t=e.name||e.role||e.roleName||"";return(t.toUpperCase().startsWith("ROLE_")?t.toUpperCase():`ROLE_${t.toUpperCase()}`)===r}return!1}))},async getCurrentUser(e=!1,t={}){const{requestSource:n="unknown"}=t;if(!this.getToken())throw new Error("Aucun token d'authentification trouvé");const r=`auth_service_${n}_${Date.now()}`;if(tf.callStack.push(r),tf.callStack.length>tf.stackLimit){console.warn("Detected recursive calls to getCurrentUser. Call stack:",tf.callStack),tf.callStack=[];const e=Xh.getCachedUserData();if(e)return e}const s=Date.now();if(!e&&s-tf.lastCallTime<tf.minInterval){const e=Xh.getCachedUserData();if(e)return tf.callStack=tf.callStack.filter((e=>e!==r)),e}tf.lastCallTime=s;try{const n=await Xh.getUserData({forceRefresh:e,routeKey:"/api/me",requestId:r,preventRecursion:t?.preventRecursion||!1});return n.roles?.length>0&&(localStorage.setItem("last_role",n.roles[0]),localStorage.setItem("userRoles",JSON.stringify(n.roles))),n}catch(a){const e=Xh.getCachedUserData();if(e)return e;throw a}finally{tf.callStack=tf.callStack.filter((e=>e!==r))}},async changePassword(e){try{return await Sh.post("/api/change-password",e,Sh.withAuth())}catch(t){throw t}},clearAuthData(e=!0,t="Vous avez été déconnecté."){localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("refresh_token"),e&&Lh.success(t,{duration:3e3,position:"top-center"}),window.location.href="/login"},triggerRoleUpdate:()=>{window.dispatchEvent(new Event("role-change")),triggerRoleUpdate()},async ensureUserDataInLocalStorage(){try{if(!localStorage.getItem("token"))return!1;const t=window.location.pathname.includes("/student/attendance");let n=null;try{n=await nf.getCurrentUser(!0)}catch(e){}if(n){localStorage.setItem("user",JSON.stringify(n));let e=n.roles;return t&&!e.includes("ROLE_STUDENT")&&e.push("ROLE_STUDENT"),localStorage.setItem("userRoles",JSON.stringify(e)),!0}if(!localStorage.getItem("user")){const e={id:"1",email:"student@example.com",firstName:"Test",lastName:"Student",roles:["ROLE_STUDENT"]};localStorage.setItem("user",JSON.stringify(e))}return localStorage.getItem("userRoles")&&!t||localStorage.setItem("userRoles",JSON.stringify(["ROLE_STUDENT"])),!0}catch(t){return!1}},async fixProfileDataIssues(){try{if(!localStorage.getItem("token"))return{success:!1,message:"Not authenticated"};try{const e="/api/profile",t=await Sh.get(e,{noCache:!0,retries:2,timeout:1e4});if(t)return localStorage.setItem("user",JSON.stringify(t)),{success:!0,message:"Profile data fixed successfully"}}catch(e){}try{const e=localStorage.getItem("token");if(e){const t=Yh(e);if(t){const e={id:t.id||"1",email:t.username||"user@example.com",roles:t.roles||["ROLE_USER"],_fixedAt:Date.now()};return localStorage.setItem("user",JSON.stringify(e)),{success:!0,message:"Created minimal profile data"}}}}catch(t){}return{success:!1,message:"Could not fix profile data"}}catch(n){return{success:!1,message:n.message}}},getMinimalUserData(){try{const e=localStorage.getItem("user");if(!e)return null;const t=JSON.parse(e);return t&&(t.firstName||t.lastName)?{...t,_source:"localStorage",_retrievedAt:Date.now()}:null}catch(e){return null}},async changePassword(e){try{return await Sh.post("/api/change-password",e,Sh.withAuth())}catch(t){throw t}},clearAuthData(e=!0,t="Vous avez été déconnecté."){localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("refresh_token"),e&&Lh.success(t,{duration:3e3,position:"top-center"}),window.location.href="/login"},triggerRoleUpdate:()=>{window.dispatchEvent(new Event("role-change")),triggerRoleUpdate()},ensureUserDataInLocalStorage:async()=>{try{if(!localStorage.getItem("token"))return console.warn("Cannot ensure user data - no token found"),!1;const n=window.location.pathname.includes("/student/attendance");let r=null;try{r=await nf.getCurrentUser(!0)}catch(e){console.warn("Failed to get user data from /me endpoint, trying backup methods")}if(r){if(localStorage.setItem("user",JSON.stringify(r)),r.roles&&Array.isArray(r.roles)){let e=r.roles;n&&!e.includes("ROLE_STUDENT")&&e.push("ROLE_STUDENT"),localStorage.setItem("userRoles",JSON.stringify(e))}else localStorage.setItem("userRoles",JSON.stringify(["ROLE_STUDENT"]));return!0}try{const e=localStorage.getItem("token");if(e){const t=Yh(e);if(t){const e={id:t.id||"1",email:t.username||"user@example.com",roles:t.roles||["ROLE_USER"],_fixedAt:Date.now()};return localStorage.setItem("user",JSON.stringify(e)),!0}}}catch(t){console.error("Error creating fallback user data:",t)}return localStorage.getItem("userRoles")&&!n||localStorage.setItem("userRoles",JSON.stringify(["ROLE_STUDENT"])),!0}catch(n){return console.error("Error ensuring user data:",n),!1}},getMinimalUserData(){try{const e=localStorage.getItem("user");if(!e)return null;const t=JSON.parse(e);return t&&(t.firstName||t.lastName)?{...t,_source:"localStorage",_retrievedAt:Date.now()}:null}catch(e){return console.error("Erreur lors de la récupération des données minimales:",e),null}},async fixProfileDataIssues(){try{if(!localStorage.getItem("token"))return{success:!1,message:"Not authenticated"};try{const e="/api/profile",t=await Sh.get(e,{noCache:!0,retries:2,timeout:1e4});if(t)return localStorage.setItem("user",JSON.stringify(t)),{success:!0,message:"Profile data fixed successfully"}}catch(e){}try{const e=localStorage.getItem("token");if(e){const t=Yh(e);if(t){const e={id:t.id||"1",email:t.username||"user@example.com",roles:t.roles||["ROLE_USER"],_fixedAt:Date.now()};return localStorage.setItem("user",JSON.stringify(e)),{success:!0,message:"Created minimal profile data"}}}}catch(t){}return{success:!1,message:"Could not fix profile data"}}catch(n){return{success:!1,message:n.message}}}},rf=new Map,sf={deduplicatedRequests:0,totalRequests:0,savedRequests:0},af=1e4,of=async(e,t,n,r={})=>{const s=((e,t,n={})=>{const r=Array.isArray(t)?t:[t],s=ef(),a=(e.includes("/profile")||e.includes("/me")||e.includes("/user"))&&n?JSON.stringify(n):"";return`${s}:${e}:${r.join(":")}${a?`:${a}`:""}`})(e,t,r.params);if(sf.totalRequests++,rf.has(s))return sf.deduplicatedRequests++,rf.get(s);const a=new Promise((async(e,r)=>{try{const r=await n(),s=Wh(),a=ef(),i=Array.isArray(t)?["session",a,...t]:["session",a,t];s.setQueryData(i,r),e(r)}catch(a){r(a)}finally{setTimeout((()=>{rf.delete(s)}),500)}}));return rf.set(s,a),setTimeout((()=>{rf.has(s)&&rf.delete(s)}),af),a},lf=async(e,t="get",n={},r={})=>{const s=`${t}:${e}:${JSON.stringify(n)}`;if(rf.has(s))return sf.savedRequests++,rf.get(s);const a=new Promise((async(a,i)=>{try{let s;switch(t.toLowerCase()){case"get":s=await Sh.get(e,{...r,params:n});break;case"post":s=await Sh.post(e,n,r);break;case"put":s=await Sh.put(e,n,r);break;case"delete":s=await Sh.delete(e,{...r,data:n});break;default:throw new Error(`Unsupported method: ${t}`)}a(s)}catch(o){i(o)}finally{setTimeout((()=>{rf.delete(s)}),300)}}));return rf.set(s,a),setTimeout((()=>{rf.delete(s)}),af),a},cf=e=>{for(const[t,n]of rf.entries())t.includes(e)&&rf.delete(t)},uf="/api/profile/picture",df="/api/documents",hf="/api/documents/type",ff="/api/documents/upload",mf=e=>["session",ef(),...Array.isArray(e)?e:[e]];function pf(e,t,n={}){const r=mf(t),s=e===uf,a=e.startsWith(df)||e.startsWith(hf);return(s||a)&&(n.staleTime=0,n.refetchOnMount=!0,n.refetchOnWindowFocus=!0,s&&(n.retry=1,n.retryDelay=500,n.refetchInterval=!1,n.refetchOnReconnect=!1)),de({queryKey:r,queryFn:async()=>{try{const r=s||a?{_t:Date.now()}:{},i=s?5e3:a?8e3:15e3;return await of(e,t,(async()=>await Sh.get(e,{params:{...r,...n.params},timeout:i,retries:s?1:2,noCache:n.noCache,staleTime:n.staleTime},!0,n.staleTime||3e5)),n)}catch(r){if(s&&"ECONNABORTED"===r.code)return console.warn("Profile picture request timed out, using default avatar"),{url:"/assets/default-avatar.svg"};throw r}},...n})}function gf(e,t="post",n,r={}){const s=ce();let a=null;n&&(a=mf(n));const i="string"==typeof e&&e===uf,o="string"==typeof e&&e.includes("/documents/upload")||"string"==typeof e&&e.startsWith(ff),l="function"==typeof e&&e().includes("/documents/")||"string"==typeof e&&e.includes("/documents/")&&"delete"===t.toLowerCase();return ue({mutationFn:async n=>{try{let s=e;if("function"==typeof e&&(s=e(n)),"delete"===t.toLowerCase()&&"object"!=typeof n&&s===e&&(s=`${s}/${n}`),i||o||l){const e=Date.now();"delete"!==t.toLowerCase()&&"get"!==t.toLowerCase()||(s=`${s}${s.includes("?")?"&":"?"}_t=${e}`)}return await lf(s,t.toLowerCase(),n,{timeout:r.timeout||(o?3e4:15e3),retries:r.retries||2,noCache:r.noCache||!0})}catch(s){throw console.error(`Erreur lors de la requête ${t.toUpperCase()} vers ${e}:`,s),s}},onSuccess:(t,n,c)=>{if("string"==typeof e&&cf(e),a)if(i){Sh.invalidateProfileCache(),s.invalidateQueries({queryKey:a,refetchType:"all"});const e=ef();s.invalidateQueries({predicate:t=>{const n=t.queryKey;return Array.isArray(n)&&"session"===n[0]&&n[1]===e&&(n.includes("profile")||n.includes("profilePicture")||n.includes("currentProfile"))},refetchType:"all"})}else if(o||l){Sh.invalidateDocumentCache(),s.invalidateQueries({queryKey:a,refetchType:"all"});const e=ef();s.invalidateQueries({predicate:t=>{const n=t.queryKey;return Array.isArray(n)&&"session"===n[0]&&n[1]===e&&(n.includes("document")||n.includes("userCVDocument")||n.includes("documents"))},refetchType:"all"})}else s.invalidateQueries({queryKey:a,refetchType:"all"});r.onSuccess&&r.onSuccess(t,n,c)},onError:(t,n,s)=>{"string"==typeof e&&cf(e),r.onError&&r.onError(t,n,s)},...r})}const yf="cached_profile_picture",vf="cached_profile_picture_timestamp",bf=864e5,xf={listeners:new Set,subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)},notify(){this.listeners.forEach((e=>e()))}},wf={profilePicture:["profilePicture"]},Ef={saveToCache:e=>{if(e)try{localStorage.setItem(yf,e),localStorage.setItem(vf,Date.now().toString())}catch(t){}},getFromCache:()=>{try{const e=localStorage.getItem(yf),t=localStorage.getItem(vf);if(!e||!t)return null;return Date.now()-Number(t)>bf?(Ef.clearCache(),null):e}catch(e){return null}},clearCache:()=>{try{localStorage.removeItem(yf),localStorage.removeItem(vf)}catch(e){}},isCacheValid:()=>{try{const e=localStorage.getItem(vf);return!!e&&Date.now()-Number(e)<=bf}catch(e){return!1}}};function kf(e){if(!e)return null;if(!1===e.success)return null;if(!e.data)return null;const{has_profile_picture:t,profile_picture_url:n}=e.data,r=t?n:null;return r&&Ef.saveToCache(r),r}function Sf(){const e=Q.useRef(!0),t=ce(),[n]=Q.useState((()=>`profile_picture_${Date.now()}_${Math.random().toString(36).substr(2,9)}`)),[r,s]=Q.useState((()=>Ef.getFromCache()));Q.useEffect((()=>{e.current=!0,Xh.requestRegistry.registerRouteUser("/api/profile/picture",n);const t=Ef.getFromCache();return t&&s(t),()=>{e.current=!1,Xh.requestRegistry.unregisterRouteUser("/api/profile/picture",n)}}),[n]);const a=Q.useCallback((async()=>{try{return await Xh.coordinateRequest("/api/profile/picture",n,(async()=>{const e=await Sh.get("/api/profile/picture",{params:{_t:Date.now()},timeout:5e3,retries:1});if(e){if("string"==typeof e)return{success:!0,data:{has_profile_picture:!0,profile_picture_url:e}};if(e.url||e.profile_picture_url){return{success:!0,data:{has_profile_picture:!0,profile_picture_url:e.url||e.profile_picture_url}}}if(e.data&&(e.data.profile_picture_url||e.data.url)){const t={...e.data};return(t.profile_picture_url||t.url)&&(t.has_profile_picture=!0,t.profile_picture_url=t.profile_picture_url||t.url),{success:!0,data:t}}if("object"==typeof e&&null!==e){if(!0===e.success&&e.data)return e;const t=e=>{for(const n in e){if("string"==typeof e[n]&&(n.includes("url")||n.includes("picture"))&&(e[n].startsWith("http")||e[n].startsWith("/")))return e[n];if("object"==typeof e[n]&&null!==e[n]){const r=t(e[n]);if(r)return r}}return null},n=t(e);if(n)return{success:!0,data:{has_profile_picture:!0,profile_picture_url:n}}}}return e&&"object"==typeof e?e:{success:!1,data:{has_profile_picture:!1}}}))}catch(e){return{success:!1,data:{has_profile_picture:!1},error:e.message}}}),[n]),i=de({queryKey:wf.profilePicture,queryFn:a,staleTime:3e5,cacheTime:6e5,retry:1,refetchOnWindowFocus:!1,refetchOnMount:!Ef.isCacheValid(),refetchInterval:null,onSuccess:e=>{const n=kf(e);if(n){t.setQueryData(wf.profilePicture,e),Ef.saveToCache(n);try{Xh.requestRegistry.isRouteShared("/api/profile/picture")||Xh.invalidateCache("profile_picture")}catch(r){}}},onError:e=>{},placeholderData:r?{success:!0,data:{has_profile_picture:!0,profile_picture_url:r}}:void 0}),o=Q.useRef(0),l=Q.useRef(!1),c=Q.useCallback(((e=!0)=>{const t=Date.now();return l.current||t-o.current<3e3||Xh.requestRegistry.isRouteProcessing("/api/profile/picture")?Promise.resolve():(o.current=t,l.current=!0,i.refetch().then((e=>{const t=e.data?.data;return t?.profile_picture_url&&(s(t.profile_picture_url),Ef.saveToCache(t.profile_picture_url)),e})).catch((e=>{throw e})).finally((()=>{setTimeout((()=>{l.current=!1}),1e3)})))}),[i,s]),u=gf("/api/profile/picture","post",wf.profilePicture,{onMutate:async e=>{await t.cancelQueries({queryKey:wf.profilePicture});return{previousData:t.getQueryData(wf.profilePicture)}},onSuccess:async(e,n,r)=>{const a=e?.data?.profile_picture_url;if(a){t.setQueryData(wf.profilePicture,{success:!0,data:{has_profile_picture:!0,profile_picture_url:a,is_temp_url:!1}}),s(a),Ef.saveToCache(a);try{const e=Xh.getCachedUserData();if(e){e.profilePictureUrl=a;try{localStorage.setItem("user",JSON.stringify(e))}catch(i){}}}catch(i){}}try{Xh.invalidateCache("profile_picture",{skipRefresh:!0})}catch(i){}xf.notify(),c()},onError:(e,n,r)=>{if(r?.previousData){t.setQueryData(wf.profilePicture,r.previousData);const e=kf(r.previousData);e&&(s(e),Ef.saveToCache(e))}}}),d=gf("/api/profile/picture","delete",wf.profilePicture,{onMutate:async()=>{await t.cancelQueries({queryKey:wf.profilePicture});const e=t.getQueryData(wf.profilePicture);return t.setQueryData(wf.profilePicture,{success:!0,data:{has_profile_picture:!1,profile_picture_url:null}}),s(null),Ef.clearCache(),{previousData:e}},onSuccess:async()=>{Xh.invalidateCache("profile_picture"),xf.notify(),Ef.clearCache(),Lh.success("Photo de profil supprimée avec succès"),c()},onError:(e,n,r)=>{if(r?.previousData){t.setQueryData(wf.profilePicture,r.previousData);const e=kf(r.previousData);e&&(s(e),Ef.saveToCache(e))}}});Q.useEffect((()=>()=>{}),[]);return{profilePictureUrl:kf(i.data)||r,isLoading:i.isLoading&&!r,isFetching:i.isFetching,isError:i.isError,error:i.error,refetch:c,uploadProfilePicture:u.mutate,deleteProfilePicture:d.mutate,uploadStatus:{isPending:u.isPending,isSuccess:u.isSuccess,isError:u.isError,error:u.error},deleteStatus:{isPending:d.isPending,isSuccess:d.isSuccess,isError:d.isError,error:d.error}}}const Nf={userData:null,userDataTimestamp:0,consolidatedData:null,consolidatedDataTimestamp:0,cacheDuration:12e4},Tf=`profile_service_${Date.now()}`;const Cf=new class{constructor(){Xh.requestRegistry.registerRouteUser("/profile/picture",Tf),Xh.requestRegistry.registerRouteUser("/api/profile",Tf)}async getUserProfile(){try{const e=Date.now();if(Nf.userData&&e-Nf.userDataTimestamp<Nf.cacheDuration)return Nf.userData;const t=await Xh.coordinateRequest("/profile/user-data",Tf,(()=>Sh.get("/profile/user-data")));return Nf.userData=t.data,Nf.userDataTimestamp=e,t.data}catch(e){throw e}}async updateProfile(e,t){try{if(void 0!==e.portfolioUrl){const n=await Sh.put("/student/profile/portfolio-url",{portfolioUrl:e.portfolioUrl});return this.invalidateCache("profile_data"),t&&t(),n.data}const n=await Sh.put("/profile",e);return this.invalidateCache("profile_data"),t&&t(),n.data}catch(n){throw n}}async getDiplomas(){try{return(await Sh.get("/profile/diplomas")).data}catch(e){throw e}}async getAddresses(){try{return(await Sh.get("/profile/addresses")).data}catch(e){throw e}}async getStats(e={}){const{preventRecursion:t=!0,forceRefresh:n=!1}=e;try{let e="/api/profile/stats";n&&(e=`${e}?_t=${Date.now()}`);return{stats:(await Sh.get(e,{...Sh.withAuth(),preventRecursion:t,forceRefresh:n,headers:n?{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}:void 0})).stats||{profile:{completionPercentage:0}}}}catch(r){return{stats:{profile:{completionPercentage:0}}}}}async acknowledgeProfileCompletion(){try{const e=await Sh.post("/api/profile/acknowledge-completion",{},{...Sh.withAuth(),headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});return await this.getStats({forceRefresh:!0}),this.invalidateCache("profile_data"),Sh.invalidateCache("/api/profile/stats"),e}catch(e){return console.error("Error fetching profile stats:",e),{stats:{profile:{completionPercentage:0}}}}}async acknowledgeProfileCompletion(){try{const e=await Sh.post("/api/profile/acknowledge-completion",{},{...Sh.withAuth(),headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}});return await this.getStats({forceRefresh:!0}),this.invalidateCache("profile_data"),Sh.invalidateCache("/api/profile/stats"),e}catch(e){throw console.error("Error acknowledging profile completion:",e),e}}async getAllProfileData(e={}){const t="/api/profile";try{if(Xh.requestRegistry.getActiveRequest(t)&&!e.forceRefresh){const e=Xh.requestRegistry.getActiveRequest(t);if(e)return e}const r=Date.now();if(!e.forceRefresh&&Nf.consolidatedData&&r-Nf.consolidatedDataTimestamp<Nf.cacheDuration)return Nf.consolidatedData;const s=e.forceRefresh?`${t}?_t=${Date.now()}`:t,a=await Xh.coordinateRequest(s,Tf,(()=>Xh.getUserData({routeKey:s,forceRefresh:e.forceRefresh,useCache:!e.forceRefresh,fetchOptions:e.forceRefresh?{headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}}:void 0})));let i;if(a)if(a.user&&"object"==typeof a.user)i=a;else if(a.id||a.email)i={...a,firstName:a.firstName||a.first_name||"",lastName:a.lastName||a.last_name||"",email:a.email||"",profilePictureUrl:a.profilePictureUrl||a.profile_picture_url||"",linkedinUrl:a.linkedinUrl||"",hasCvDocument:a.hasCvDocument||!1,diplomas:Array.isArray(a.diplomas)?a.diplomas:[],addresses:Array.isArray(a.addresses)?a.addresses:[],stats:a.stats||{profile:{completionPercentage:0}}};else if(a.data&&"object"==typeof a.data||a.success){const e=a.data||{};i={...e,firstName:e.firstName||e.first_name||"",lastName:e.lastName||e.last_name||"",email:e.email||"",profilePictureUrl:e.profilePictureUrl||e.profile_picture_url||"",linkedinUrl:e.linkedinUrl||"",diplomas:Array.isArray(e.diplomas)?e.diplomas:[],addresses:Array.isArray(e.addresses)?e.addresses:[],stats:e.stats||{profile:{completionPercentage:0}}}}else i=a;else i={firstName:"",lastName:"",email:"",profilePictureUrl:"",diplomas:[],addresses:[],stats:{profile:{completionPercentage:0}}};Nf.consolidatedData=i,Nf.consolidatedDataTimestamp=r;try{localStorage.setItem("user",JSON.stringify(i))}catch(n){}return i}catch(r){if(Nf.consolidatedData)return Nf.consolidatedData;try{const e=Xh.getCachedUserData();if(e)return e;const t=localStorage.getItem("user");if(t)try{return JSON.parse(t)}catch(n){}}catch(n){}throw r}}async getPublicProfile(e){if(!e)throw new Error("User ID is required to fetch public profile");try{return(await Sh.get(`/profile/public/${e}`)).data}catch(t){throw t}}async getProfilePicture(){try{return await Xh.coordinateRequest("/api/profile/picture",Tf,(async()=>{const e=await Sh.get("/profile/picture",{params:{_t:Date.now()},timeout:5e3});if(e){if("string"==typeof e)return{success:!0,data:{has_profile_picture:!0,profile_picture_url:e}};if(e.url||e.profile_picture_url){return{success:!0,data:{has_profile_picture:!0,profile_picture_url:e.url||e.profile_picture_url}}}if(e.data&&(e.data.profile_picture_url||e.data.url)){const t={...e.data};return(t.profile_picture_url||t.url)&&(t.has_profile_picture=!0,t.profile_picture_url=t.profile_picture_url||t.url),{success:!0,data:t}}if("object"==typeof e&&null!==e){if(!0===e.success&&e.data)return e;const t=e=>{for(const n in e){if("string"==typeof e[n]&&(n.includes("url")||n.includes("picture"))&&(e[n].startsWith("http")||e[n].startsWith("/")))return e[n];if("object"==typeof e[n]&&null!==e[n]){const r=t(e[n]);if(r)return r}}return null},n=t(e);if(n)return{success:!0,data:{has_profile_picture:!0,profile_picture_url:n}}}}return e&&"object"==typeof e?e:{success:!1,data:{has_profile_picture:!1}}}))}catch(e){return{success:!1,data:{has_profile_picture:!1},error:e.message}}}async uploadProfilePicture(e){try{const t=new FormData;t.append("profile_picture",e);const n=await Sh.post("/profile/picture",t,{headers:{"Content-Type":"multipart/form-data"}});return this.invalidateCache("profile_picture"),xf.notify(),n}catch(t){throw t}}async deleteProfilePicture(){try{const e=(new Date).getTime(),t=await Sh.delete(`/profile/picture?t=${e}`);return this.invalidateCache("profile_picture"),xf.notify(),t}catch(e){throw e}}async updateAddress(e){try{let t;return t=e.id?await Sh.put(`/profile/addresses/${e.id}`,e):await Sh.post("/profile/addresses",e),this.invalidateCache("address"),t.data}catch(t){throw t}}invalidateCache(e=null){if("profile_picture"===e&&Xh.requestRegistry.isRouteShared("/api/profile/picture"))return Nf.userData=null,Nf.userDataTimestamp=0,Nf.consolidatedData=null,Nf.consolidatedDataTimestamp=0,void xf.notify();Nf.userData=null,Nf.userDataTimestamp=0,Nf.consolidatedData=null,Nf.consolidatedDataTimestamp=0,Xh.invalidateCache(e)}},Rf=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,jf=fe,Af=(e,t)=>n=>{var r;if(null==(null==t?void 0:t.variants))return jf(e,null==n?void 0:n.class,null==n?void 0:n.className);const{variants:s,defaultVariants:a}=t,i=Object.keys(s).map((e=>{const t=null==n?void 0:n[e],r=null==a?void 0:a[e];if(null===t)return null;const i=Rf(t)||Rf(r);return s[e][i]})),o=n&&Object.entries(n).reduce(((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e}),{}),l=null==t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce(((e,t)=>{let{class:n,className:r,...s}=t;return Object.entries(s).every((e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...a,...o}[t]):{...a,...o}[t]===n}))?[...e,n,r]:e}),[]);return jf(e,i,l,null==n?void 0:n.class,null==n?void 0:n.className)},_f=e=>{const t=Mf(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{const n=e.split("-");return""===n[0]&&1!==n.length&&n.shift(),Df(n,t)||Pf(e)},getConflictingClassGroupIds:(e,t)=>{const s=n[e]||[];return t&&r[e]?[...s,...r[e]]:s}}},Df=(e,t)=>{if(0===e.length)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?Df(e.slice(1),r):void 0;if(s)return s;if(0===t.validators.length)return;const a=e.join("-");return t.validators.find((({validator:e})=>e(a)))?.classGroupId},If=/^\[(.+)\]$/,Pf=e=>{if(If.test(e)){const t=If.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},Mf=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const s in n)Lf(n[s],r,s,t);return r},Lf=(e,t,n,r)=>{e.forEach((e=>{if("string"!=typeof e){if("function"==typeof e)return Uf(e)?void Lf(e(r),t,n,r):void t.validators.push({validator:e,classGroupId:n});Object.entries(e).forEach((([e,s])=>{Lf(s,Of(t,e),n,r)}))}else{(""===e?t:Of(t,e)).classGroupId=n}}))},Of=(e,t)=>{let n=e;return t.split("-").forEach((e=>{n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)})),n},Uf=e=>e.isThemeGetter,Ff=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(s,a)=>{n.set(s,a),t++,t>e&&(t=0,r=n,n=new Map)};return{get(e){let t=n.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(s(e,t),t):void 0},set(e,t){n.has(e)?n.set(e,t):s(e,t)}}},zf=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=e=>{const t=[];let n,r=0,s=0,a=0;for(let l=0;l<e.length;l++){let i=e[l];if(0===r&&0===s){if(":"===i){t.push(e.slice(a,l)),a=l+1;continue}if("/"===i){n=l;continue}}"["===i?r++:"]"===i?r--:"("===i?s++:")"===i&&s--}const i=0===t.length?e:e.substring(a),o=Vf(i);return{modifiers:t,hasImportantModifier:o!==i,baseClassName:o,maybePostfixModifierPosition:n&&n>a?n-a:void 0}};if(t){const e=t+":",n=r;r=t=>t.startsWith(e)?n(t.substring(e.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:t,maybePostfixModifierPosition:void 0}}if(n){const e=r;r=t=>n({className:t,parseClassName:e})}return r},Vf=e=>e.endsWith("!")?e.substring(0,e.length-1):e.startsWith("!")?e.substring(1):e,Bf=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map((e=>[e,!0])));return e=>{if(e.length<=1)return e;const n=[];let r=[];return e.forEach((e=>{"["===e[0]||t[e]?(n.push(...r.sort(),e),r=[]):r.push(e)})),n.push(...r.sort()),n}},qf=/\s+/;function $f(){let e,t,n=0,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=Hf(e))&&(r&&(r+=" "),r+=t);return r}const Hf=e=>{if("string"==typeof e)return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=Hf(e[r]))&&(n&&(n+=" "),n+=t);return n};function Wf(e,...t){let n,r,s,a=function(o){const l=t.reduce(((e,t)=>t(e)),e());return n=(e=>({cache:Ff(e.cacheSize),parseClassName:zf(e),sortModifiers:Bf(e),..._f(e)}))(l),r=n.cache.get,s=n.cache.set,a=i,i(o)};function i(e){const t=r(e);if(t)return t;const a=((e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:a}=t,i=[],o=e.trim().split(qf);let l="";for(let c=o.length-1;c>=0;c-=1){const e=o[c],{isExternal:t,modifiers:u,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:f}=n(e);if(t){l=e+(l.length>0?" "+l:l);continue}let m=!!f,p=r(m?h.substring(0,f):h);if(!p){if(!m){l=e+(l.length>0?" "+l:l);continue}if(p=r(h),!p){l=e+(l.length>0?" "+l:l);continue}m=!1}const g=a(u).join(":"),y=d?g+"!":g,v=y+p;if(i.includes(v))continue;i.push(v);const b=s(p,m);for(let n=0;n<b.length;++n){const e=b[n];i.push(y+e)}l=e+(l.length>0?" "+l:l)}return l})(e,n);return s(e,a),a}return function(){return a($f.apply(null,arguments))}}const Gf=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},Kf=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Qf=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Xf=/^\d+\/\d+$/,Jf=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Yf=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Zf=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,em=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,tm=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,nm=e=>Xf.test(e),rm=e=>!!e&&!Number.isNaN(Number(e)),sm=e=>!!e&&Number.isInteger(Number(e)),am=e=>e.endsWith("%")&&rm(e.slice(0,-1)),im=e=>Jf.test(e),om=()=>!0,lm=e=>Yf.test(e)&&!Zf.test(e),cm=()=>!1,um=e=>em.test(e),dm=e=>tm.test(e),hm=e=>!mm(e)&&!xm(e),fm=e=>Cm(e,_m,cm),mm=e=>Kf.test(e),pm=e=>Cm(e,Dm,lm),gm=e=>Cm(e,Im,rm),ym=e=>Cm(e,jm,cm),vm=e=>Cm(e,Am,dm),bm=e=>Cm(e,Mm,um),xm=e=>Qf.test(e),wm=e=>Rm(e,Dm),Em=e=>Rm(e,Pm),km=e=>Rm(e,jm),Sm=e=>Rm(e,_m),Nm=e=>Rm(e,Am),Tm=e=>Rm(e,Mm,!0),Cm=(e,t,n)=>{const r=Kf.exec(e);return!!r&&(r[1]?t(r[1]):n(r[2]))},Rm=(e,t,n=!1)=>{const r=Qf.exec(e);return!!r&&(r[1]?t(r[1]):n)},jm=e=>"position"===e||"percentage"===e,Am=e=>"image"===e||"url"===e,_m=e=>"length"===e||"size"===e||"bg-size"===e,Dm=e=>"length"===e,Im=e=>"number"===e,Pm=e=>"family-name"===e,Mm=e=>"shadow"===e,Lm=Wf((()=>{const e=Gf("color"),t=Gf("font"),n=Gf("text"),r=Gf("font-weight"),s=Gf("tracking"),a=Gf("leading"),i=Gf("breakpoint"),o=Gf("container"),l=Gf("spacing"),c=Gf("radius"),u=Gf("shadow"),d=Gf("inset-shadow"),h=Gf("text-shadow"),f=Gf("drop-shadow"),m=Gf("blur"),p=Gf("perspective"),g=Gf("aspect"),y=Gf("ease"),v=Gf("animate"),b=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",xm,mm],x=()=>[xm,mm,l],w=()=>[nm,"full","auto",...x()],E=()=>[sm,"none","subgrid",xm,mm],k=()=>["auto",{span:["full",sm,xm,mm]},sm,xm,mm],S=()=>[sm,"auto",xm,mm],N=()=>["auto","min","max","fr",xm,mm],T=()=>["auto",...x()],C=()=>[nm,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...x()],R=()=>[e,xm,mm],j=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",km,ym,{position:[xm,mm]}],A=()=>["auto","cover","contain",Sm,fm,{size:[xm,mm]}],_=()=>[am,wm,pm],D=()=>["","none","full",c,xm,mm],I=()=>["",rm,wm,pm],P=()=>[rm,am,km,ym],M=()=>["","none",m,xm,mm],L=()=>["none",rm,xm,mm],O=()=>["none",rm,xm,mm],U=()=>[rm,xm,mm],F=()=>[nm,"full",...x()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[im],breakpoint:[im],color:[om],container:[im],"drop-shadow":[im],ease:["in","out","in-out"],font:[hm],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[im],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[im],shadow:[im],spacing:["px",rm],text:[im],"text-shadow":[im],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",nm,mm,xm,g]}],container:["container"],columns:[{columns:[rm,mm,xm,o]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:b()}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:w()}],"inset-x":[{"inset-x":w()}],"inset-y":[{"inset-y":w()}],start:[{start:w()}],end:[{end:w()}],top:[{top:w()}],right:[{right:w()}],bottom:[{bottom:w()}],left:[{left:w()}],visibility:["visible","invisible","collapse"],z:[{z:[sm,"auto",xm,mm]}],basis:[{basis:[nm,"full","auto",o,...x()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[rm,nm,"auto","initial","none",mm]}],grow:[{grow:["",rm,xm,mm]}],shrink:[{shrink:["",rm,xm,mm]}],order:[{order:[sm,"first","last","none",xm,mm]}],"grid-cols":[{"grid-cols":E()}],"col-start-end":[{col:k()}],"col-start":[{"col-start":S()}],"col-end":[{"col-end":S()}],"grid-rows":[{"grid-rows":E()}],"row-start-end":[{row:k()}],"row-start":[{"row-start":S()}],"row-end":[{"row-end":S()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":N()}],"auto-rows":[{"auto-rows":N()}],gap:[{gap:x()}],"gap-x":[{"gap-x":x()}],"gap-y":[{"gap-y":x()}],"justify-content":[{justify:["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe","normal"]}],"justify-items":[{"justify-items":["start","end","center","stretch","center-safe","end-safe","normal"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"align-items":[{items:["start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"align-self":[{self:["auto","start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"place-items":[{"place-items":["start","end","center","stretch","center-safe","end-safe","baseline"]}],"place-self":[{"place-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],p:[{p:x()}],px:[{px:x()}],py:[{py:x()}],ps:[{ps:x()}],pe:[{pe:x()}],pt:[{pt:x()}],pr:[{pr:x()}],pb:[{pb:x()}],pl:[{pl:x()}],m:[{m:T()}],mx:[{mx:T()}],my:[{my:T()}],ms:[{ms:T()}],me:[{me:T()}],mt:[{mt:T()}],mr:[{mr:T()}],mb:[{mb:T()}],ml:[{ml:T()}],"space-x":[{"space-x":x()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":x()}],"space-y-reverse":["space-y-reverse"],size:[{size:C()}],w:[{w:[o,"screen",...C()]}],"min-w":[{"min-w":[o,"screen","none",...C()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[i]},...C()]}],h:[{h:["screen",...C()]}],"min-h":[{"min-h":["screen","none",...C()]}],"max-h":[{"max-h":["screen",...C()]}],"font-size":[{text:["base",n,wm,pm]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,xm,gm]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",am,mm]}],"font-family":[{font:[Em,mm,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,xm,mm]}],"line-clamp":[{"line-clamp":[rm,"none",xm,gm]}],leading:[{leading:[a,...x()]}],"list-image":[{"list-image":["none",xm,mm]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",xm,mm]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:R()}],"text-color":[{text:R()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","wavy"]}],"text-decoration-thickness":[{decoration:[rm,"from-font","auto",xm,pm]}],"text-decoration-color":[{decoration:R()}],"underline-offset":[{"underline-offset":[rm,"auto",xm,mm]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:x()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",xm,mm]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",xm,mm]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:j()}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:A()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},sm,xm,mm],radial:["",xm,mm],conic:[sm,xm,mm]},Nm,vm]}],"bg-color":[{bg:R()}],"gradient-from-pos":[{from:_()}],"gradient-via-pos":[{via:_()}],"gradient-to-pos":[{to:_()}],"gradient-from":[{from:R()}],"gradient-via":[{via:R()}],"gradient-to":[{to:R()}],rounded:[{rounded:D()}],"rounded-s":[{"rounded-s":D()}],"rounded-e":[{"rounded-e":D()}],"rounded-t":[{"rounded-t":D()}],"rounded-r":[{"rounded-r":D()}],"rounded-b":[{"rounded-b":D()}],"rounded-l":[{"rounded-l":D()}],"rounded-ss":[{"rounded-ss":D()}],"rounded-se":[{"rounded-se":D()}],"rounded-ee":[{"rounded-ee":D()}],"rounded-es":[{"rounded-es":D()}],"rounded-tl":[{"rounded-tl":D()}],"rounded-tr":[{"rounded-tr":D()}],"rounded-br":[{"rounded-br":D()}],"rounded-bl":[{"rounded-bl":D()}],"border-w":[{border:I()}],"border-w-x":[{"border-x":I()}],"border-w-y":[{"border-y":I()}],"border-w-s":[{"border-s":I()}],"border-w-e":[{"border-e":I()}],"border-w-t":[{"border-t":I()}],"border-w-r":[{"border-r":I()}],"border-w-b":[{"border-b":I()}],"border-w-l":[{"border-l":I()}],"divide-x":[{"divide-x":I()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":I()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:["solid","dashed","dotted","double","hidden","none"]}],"divide-style":[{divide:["solid","dashed","dotted","double","hidden","none"]}],"border-color":[{border:R()}],"border-color-x":[{"border-x":R()}],"border-color-y":[{"border-y":R()}],"border-color-s":[{"border-s":R()}],"border-color-e":[{"border-e":R()}],"border-color-t":[{"border-t":R()}],"border-color-r":[{"border-r":R()}],"border-color-b":[{"border-b":R()}],"border-color-l":[{"border-l":R()}],"divide-color":[{divide:R()}],"outline-style":[{outline:["solid","dashed","dotted","double","none","hidden"]}],"outline-offset":[{"outline-offset":[rm,xm,mm]}],"outline-w":[{outline:["",rm,wm,pm]}],"outline-color":[{outline:R()}],shadow:[{shadow:["","none",u,Tm,bm]}],"shadow-color":[{shadow:R()}],"inset-shadow":[{"inset-shadow":["none",d,Tm,bm]}],"inset-shadow-color":[{"inset-shadow":R()}],"ring-w":[{ring:I()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:R()}],"ring-offset-w":[{"ring-offset":[rm,pm]}],"ring-offset-color":[{"ring-offset":R()}],"inset-ring-w":[{"inset-ring":I()}],"inset-ring-color":[{"inset-ring":R()}],"text-shadow":[{"text-shadow":["none",h,Tm,bm]}],"text-shadow-color":[{"text-shadow":R()}],opacity:[{opacity:[rm,xm,mm]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[rm]}],"mask-image-linear-from-pos":[{"mask-linear-from":P()}],"mask-image-linear-to-pos":[{"mask-linear-to":P()}],"mask-image-linear-from-color":[{"mask-linear-from":R()}],"mask-image-linear-to-color":[{"mask-linear-to":R()}],"mask-image-t-from-pos":[{"mask-t-from":P()}],"mask-image-t-to-pos":[{"mask-t-to":P()}],"mask-image-t-from-color":[{"mask-t-from":R()}],"mask-image-t-to-color":[{"mask-t-to":R()}],"mask-image-r-from-pos":[{"mask-r-from":P()}],"mask-image-r-to-pos":[{"mask-r-to":P()}],"mask-image-r-from-color":[{"mask-r-from":R()}],"mask-image-r-to-color":[{"mask-r-to":R()}],"mask-image-b-from-pos":[{"mask-b-from":P()}],"mask-image-b-to-pos":[{"mask-b-to":P()}],"mask-image-b-from-color":[{"mask-b-from":R()}],"mask-image-b-to-color":[{"mask-b-to":R()}],"mask-image-l-from-pos":[{"mask-l-from":P()}],"mask-image-l-to-pos":[{"mask-l-to":P()}],"mask-image-l-from-color":[{"mask-l-from":R()}],"mask-image-l-to-color":[{"mask-l-to":R()}],"mask-image-x-from-pos":[{"mask-x-from":P()}],"mask-image-x-to-pos":[{"mask-x-to":P()}],"mask-image-x-from-color":[{"mask-x-from":R()}],"mask-image-x-to-color":[{"mask-x-to":R()}],"mask-image-y-from-pos":[{"mask-y-from":P()}],"mask-image-y-to-pos":[{"mask-y-to":P()}],"mask-image-y-from-color":[{"mask-y-from":R()}],"mask-image-y-to-color":[{"mask-y-to":R()}],"mask-image-radial":[{"mask-radial":[xm,mm]}],"mask-image-radial-from-pos":[{"mask-radial-from":P()}],"mask-image-radial-to-pos":[{"mask-radial-to":P()}],"mask-image-radial-from-color":[{"mask-radial-from":R()}],"mask-image-radial-to-color":[{"mask-radial-to":R()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]}],"mask-image-conic-pos":[{"mask-conic":[rm]}],"mask-image-conic-from-pos":[{"mask-conic-from":P()}],"mask-image-conic-to-pos":[{"mask-conic-to":P()}],"mask-image-conic-from-color":[{"mask-conic-from":R()}],"mask-image-conic-to-color":[{"mask-conic-to":R()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:j()}],"mask-repeat":[{mask:["no-repeat",{repeat:["","x","y","space","round"]}]}],"mask-size":[{mask:A()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",xm,mm]}],filter:[{filter:["","none",xm,mm]}],blur:[{blur:M()}],brightness:[{brightness:[rm,xm,mm]}],contrast:[{contrast:[rm,xm,mm]}],"drop-shadow":[{"drop-shadow":["","none",f,Tm,bm]}],"drop-shadow-color":[{"drop-shadow":R()}],grayscale:[{grayscale:["",rm,xm,mm]}],"hue-rotate":[{"hue-rotate":[rm,xm,mm]}],invert:[{invert:["",rm,xm,mm]}],saturate:[{saturate:[rm,xm,mm]}],sepia:[{sepia:["",rm,xm,mm]}],"backdrop-filter":[{"backdrop-filter":["","none",xm,mm]}],"backdrop-blur":[{"backdrop-blur":M()}],"backdrop-brightness":[{"backdrop-brightness":[rm,xm,mm]}],"backdrop-contrast":[{"backdrop-contrast":[rm,xm,mm]}],"backdrop-grayscale":[{"backdrop-grayscale":["",rm,xm,mm]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[rm,xm,mm]}],"backdrop-invert":[{"backdrop-invert":["",rm,xm,mm]}],"backdrop-opacity":[{"backdrop-opacity":[rm,xm,mm]}],"backdrop-saturate":[{"backdrop-saturate":[rm,xm,mm]}],"backdrop-sepia":[{"backdrop-sepia":["",rm,xm,mm]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":x()}],"border-spacing-x":[{"border-spacing-x":x()}],"border-spacing-y":[{"border-spacing-y":x()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",xm,mm]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[rm,"initial",xm,mm]}],ease:[{ease:["linear","initial",y,xm,mm]}],delay:[{delay:[rm,xm,mm]}],animate:[{animate:["none",v,xm,mm]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[p,xm,mm]}],"perspective-origin":[{"perspective-origin":b()}],rotate:[{rotate:L()}],"rotate-x":[{"rotate-x":L()}],"rotate-y":[{"rotate-y":L()}],"rotate-z":[{"rotate-z":L()}],scale:[{scale:O()}],"scale-x":[{"scale-x":O()}],"scale-y":[{"scale-y":O()}],"scale-z":[{"scale-z":O()}],"scale-3d":["scale-3d"],skew:[{skew:U()}],"skew-x":[{"skew-x":U()}],"skew-y":[{"skew-y":U()}],transform:[{transform:[xm,mm,"","none","gpu","cpu"]}],"transform-origin":[{origin:b()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:F()}],"translate-x":[{"translate-x":F()}],"translate-y":[{"translate-y":F()}],"translate-z":[{"translate-z":F()}],"translate-none":["translate-none"],accent:[{accent:R()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:R()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",xm,mm]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":x()}],"scroll-mx":[{"scroll-mx":x()}],"scroll-my":[{"scroll-my":x()}],"scroll-ms":[{"scroll-ms":x()}],"scroll-me":[{"scroll-me":x()}],"scroll-mt":[{"scroll-mt":x()}],"scroll-mr":[{"scroll-mr":x()}],"scroll-mb":[{"scroll-mb":x()}],"scroll-ml":[{"scroll-ml":x()}],"scroll-p":[{"scroll-p":x()}],"scroll-px":[{"scroll-px":x()}],"scroll-py":[{"scroll-py":x()}],"scroll-ps":[{"scroll-ps":x()}],"scroll-pe":[{"scroll-pe":x()}],"scroll-pt":[{"scroll-pt":x()}],"scroll-pr":[{"scroll-pr":x()}],"scroll-pb":[{"scroll-pb":x()}],"scroll-pl":[{"scroll-pl":x()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",xm,mm]}],fill:[{fill:["none",...R()]}],"stroke-w":[{stroke:[rm,wm,pm,gm]}],stroke:[{stroke:["none",...R()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}}));function Om(...e){return Lm(fe(e))}const Um=Af("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 dark:hover:bg-primary/80",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 dark:bg-red-500 dark:text-white dark:font-medium dark:hover:bg-red-600 dark:hover:shadow-[0_0_8px_rgba(239,68,68,0.5)] dark:hover:text-white",outline:"border border-input hover:bg-accent hover:text-accent-foreground dark:border-gray-600 dark:hover:bg-gray-700 dark:text-gray-200",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 dark:bg-gray-700 dark:text-gray-100 dark:hover:bg-gray-600",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-gray-700 dark:text-gray-200",link:"underline-offset-4 hover:underline text-primary dark:text-[#78b9dd]"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Fm=Q.forwardRef((({className:n,variant:r,size:s,asChild:a=!1,...i},o)=>{const l=a?t:"button";return e.jsx(l,{className:Om(Um({variant:r,size:s,className:n})),ref:o,...i})}));Fm.displayName="Button";const zm=Q.forwardRef((({modal:t=!0,...r},s)=>e.jsx(n,{modal:t,...r,ref:s})));zm.displayName=n.displayName;const Vm=f;Q.forwardRef((({className:t,inset:n,children:s,...a},i)=>e.jsxs(r,{ref:i,className:Om("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-primary/10 focus:text-secondary data-[state=open]:bg-primary/10 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",t),...a,children:[s,e.jsx(Ql,{className:"ml-auto"})]}))).displayName=r.displayName;Q.forwardRef((({className:t,...n},r)=>e.jsx(s,{ref:r,className:Om("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}))).displayName=s.displayName;const Bm=Q.forwardRef((({className:t,sideOffset:n=4,...r},s)=>e.jsx(a,{children:e.jsx(i,{ref:s,sideOffset:n,className:Om("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","dark:bg-gray-800 dark:border-gray-700 dark:shadow-gray-900/40 dark:text-gray-100",t),position:"fixed",onOpenAutoFocus:e=>{e.preventDefault()},onCloseAutoFocus:e=>{e.preventDefault()},...r})})));Bm.displayName=i.displayName;const qm=Q.forwardRef((({className:t,inset:n,...r},s)=>e.jsx(o,{ref:s,className:Om("relative flex cursor-pointer select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-primary/10 focus:text-secondary hover:bg-primary/10 hover:text-secondary data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",n&&"pl-8",t),...r})));qm.displayName=o.displayName;Q.forwardRef((({className:t,children:n,checked:r,...s},a)=>e.jsxs(l,{ref:a,className:Om("relative flex cursor-pointer select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-primary/10 focus:text-secondary hover:bg-primary/10 hover:text-secondary data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...s,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(c,{children:e.jsx(Wl,{className:"h-4 w-4"})})}),n]}))).displayName=l.displayName;Q.forwardRef((({className:t,children:n,...r},s)=>e.jsxs(u,{ref:s,className:Om("relative flex cursor-pointer select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-primary/10 focus:text-secondary hover:bg-primary/10 hover:text-secondary data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(c,{children:e.jsx(Zl,{className:"h-2 w-2 fill-current"})})}),n]}))).displayName=u.displayName;Q.forwardRef((({className:t,inset:n,...r},s)=>e.jsx(d,{ref:s,className:Om("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",t),...r}))).displayName=d.displayName;const $m=Q.forwardRef((({className:t,...n},r)=>e.jsx(h,{ref:r,className:Om("-mx-1 my-1 h-px bg-muted",t),...n})));$m.displayName=h.displayName;const Hm=x,Wm=w,Gm=({className:t,...n})=>e.jsx(b,{className:Om(t),...n});Gm.displayName=b.displayName;const Km=Q.forwardRef((({className:t,...n},r)=>e.jsx(m,{ref:r,className:Om("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 dark:bg-gray-950/90",t),...n})));Km.displayName=m.displayName;const Qm=Q.forwardRef((({className:t,children:n,...r},s)=>e.jsxs(Gm,{children:[e.jsx(Km,{}),e.jsxs(p,{ref:s,className:Om("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg md:w-full dark:border-gray-700 dark:bg-gray-800 dark:text-white",t),...r,children:[n,e.jsxs(g,{className:"absolute top-4 right-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground dark:text-gray-300",children:[e.jsx(Lc,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})));Qm.displayName=p.displayName;const Xm=({className:t,...n})=>e.jsx("div",{className:Om("flex flex-col space-y-1.5 text-left dark:text-white",t),...n});Xm.displayName="DialogHeader";const Jm=({className:t,...n})=>e.jsx("div",{className:Om("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n});Jm.displayName="DialogFooter";const Ym=Q.forwardRef((({className:t,...n},r)=>e.jsx(y,{ref:r,className:Om("text-lg font-semibold leading-none tracking-tight dark:text-white",t),...n})));Ym.displayName=y.displayName;const Zm=Q.forwardRef((({className:t,...n},r)=>e.jsx(v,{ref:r,className:Om("text-sm text-muted-foreground dark:text-gray-300",t),...n})));Zm.displayName=v.displayName;const ep=Q.createContext(null),tp={SUPERADMIN:"ROLE_SUPERADMIN",ADMIN:"ROLE_ADMIN",HR:"ROLE_HR",TEACHER:"ROLE_TEACHER",STUDENT:"ROLE_STUDENT",RECRUITER:"ROLE_RECRUITER",GUEST:"ROLE_GUEST"},np=({children:t})=>{const[n,r]=Q.useState(null),[s,a]=Q.useState(null),i=ce(),o=Q.useRef(!1),l=Q.useRef(0),c=Q.useRef(3e3),u=Q.useRef(null),d=Q.useRef(0),h=Q.useRef(3e3),f=Q.useCallback((async(e=!1)=>{if(!nf.isLoggedIn())return r(null),a(null),i.setQueryData(["userRoles"],[]),null;try{const t=Date.now();if(o.current){const e=Xh.getCachedUserData();if(e)return e}if(!e&&t-l.current<c.current){const e=Xh.getCachedUserData();if(e)return e}o.current=!0,l.current=t;const n=await nf.getCurrentUser(e,{requestSource:"roleContext"});r(n);const u=n?.roles?.[0];return u&&s&&u!==s&&(i.removeQueries(["admin-users"]),i.removeQueries(["admin-dashboard"]),i.removeQueries(["student-dashboard"]),i.removeQueries(["teacher-dashboard"]),i.removeQueries(["hr-dashboard"])),u&&a(u),o.current=!1,n}catch(t){return o.current=!1,r(null),a(null),i.setQueryData(["userRoles"],[]),null}}),[i,s]);Q.useEffect((()=>{const e=Xh.getCachedUserData();if(e){r(e),e.roles&&e.roles.length>0&&a(e.roles[0]);const t=Xh.getStats().lastUpdated?new Date(Xh.getStats().lastUpdated).getTime():0;Date.now()-t>12e4&&f(!1).catch((()=>{}))}else f(!1).catch((()=>{}));const t=()=>{f(!0).then((()=>{i.invalidateQueries(["userRoles"])}))},n=()=>{r(null),a(null),i.setQueryData(["userRoles"],[]),i.removeQueries(["userRoles"])},s=()=>{o.current||f(!0).then((()=>{i.invalidateQueries(["userRoles"])}))};return window.addEventListener("login-success",t),window.addEventListener("logout-success",n),window.addEventListener("role-change",s),window.addEventListener("auth-logout-success",n),window.addEventListener("query-cache-cleared",n),()=>{window.removeEventListener("login-success",t),window.removeEventListener("logout-success",n),window.removeEventListener("role-change",s),window.removeEventListener("auth-logout-success",n),window.removeEventListener("query-cache-cleared",n)}}),[f,i]);const{data:m,isLoading:p}=de({queryKey:["userRoles",n?.id],queryFn:async()=>n&&n.roles&&Array.isArray(n.roles)&&n.roles.length>0?n.roles:[],enabled:!!n,staleTime:3e5,cacheTime:6e5,onError:()=>[]}),g=Q.useMemo((()=>({roles:m||[],isLoading:p||!n,hasRole:e=>{if(p)return null;const t=m?.some((t=>t===e));return t},hasAnyRole:e=>{if(p)return null;if(!e||!Array.isArray(e))return!1;return e.some((e=>m?.some((t=>t===e))))},hasAllRoles:e=>{if(p)return null;if(!e||!Array.isArray(e))return!1;return e.every((e=>m?.some((t=>t===e))))},refreshRoles:()=>{u.current&&clearTimeout(u.current);const e=Date.now();e-d.current<h.current?u.current=setTimeout((()=>{d.current=Date.now(),f(!0).then((()=>{i.invalidateQueries(["userRoles"])})),u.current=null}),h.current-(e-d.current)):(d.current=e,f(!0).then((()=>{i.invalidateQueries(["userRoles"])})))}})),[m,p,i,f,n]);return e.jsx(ep.Provider,{value:g,children:t})},rp=()=>{const e=Q.useContext(ep);if(!e)throw new Error("useRoles must be used within a RoleProvider");const t=Q.useCallback((t=>{if(e.roles&&e.roles.length>0&&e.roles.some((e=>e===t)))return!0;try{const e=JSON.parse(localStorage.getItem("userRoles")||"[]");if(e.length>0){if(e.some((e=>e===t)))return!0;const n=t.toUpperCase().replace("ROLE_","");if(e.some((e=>e.toUpperCase().replace("ROLE_","")===n)))return!0}if(0===e.length&&("ROLE_STUDENT"===t||"STUDENT"===t))return!0}catch(n){}return!1}),[e.roles]);return{...e,hasRoleRobust:t,hasRole:t}},sp=()=>{const{hasRole:e}=rp(),t=Q.useMemo((()=>({isAdmin:()=>e(tp.ADMIN)||e(tp.SUPERADMIN),isRecruiter:()=>e(tp.RECRUITER),isHR:()=>e(tp.HR),isTeacher:()=>e(tp.TEACHER),isStudent:()=>e(tp.STUDENT),isGuest:()=>e(tp.GUEST),canEditPersonalInfo:()=>t.isAdmin()||t.isRecruiter()||t.isHR()||t.isTeacher()||t.isStudent()||t.isGuest(),isFieldEditable:n=>"email"===n?e(tp.ADMIN)||e(tp.SUPERADMIN):"portfolioUrl"===n?t.isStudent()||t.isAdmin():!!t.isAdmin()||!!(t.isRecruiter()||t.isHR()||t.isTeacher()||t.isStudent()||t.isGuest())&&["phoneNumber","linkedinUrl"].includes(n),canEditAddress:()=>e(tp.ADMIN)||e(tp.SUPERADMIN)||e(tp.GUEST),showLinkedIn:()=>t.isAdmin()||t.isRecruiter()||t.isHR()||t.isTeacher()||t.isStudent()||t.isGuest(),canEditAcademic:()=>t.isAdmin()||t.isStudent()||t.isGuest(),canEditPortfolioUrl:()=>t.isStudent()||t.isAdmin(),showPortfolioUrl:()=>t.isStudent()||t.isAdmin()||t.isTeacher()||t.isHR(),getRoleDashboardPath:()=>e(tp.SUPERADMIN)?"/superadmin/dashboard":e(tp.ADMIN)?"/admin/dashboard":e(tp.HR)?"/hr/dashboard":e(tp.TEACHER)?"/teacher/dashboard":e(tp.STUDENT)?"/student/dashboard":e(tp.RECRUITER)?"/recruiter/dashboard":e(tp.GUEST)?"/guest/dashboard":"/dashboard"})),[e]);return t},ap=()=>{const{roles:e}=rp();return Q.useMemo((()=>({getMainRole:()=>e&&e.length>0?e[0]:"ROLE_GUEST",getRoleBadgeColor:e=>{switch(e){case tp.STUDENT:return"from-blue-500/90 to-blue-700/90";case tp.TEACHER:return"from-emerald-500/90 to-emerald-700/90";case tp.HR:return"from-purple-500/90 to-purple-700/90";case tp.ADMIN:return"from-amber-500/90 to-amber-700/90";case tp.SUPER_ADMIN:case"ROLE_SUPERADMIN":return"from-red-500/90 to-red-700/90";case tp.RECRUITER:return"from-pink-500/90 to-pink-700/90";case tp.GUEST:return"from-teal-500/90 to-teal-700/90";default:return"from-gray-500/90 to-gray-700/90"}},translateRoleName:e=>{switch(e){case tp.STUDENT:return"Étudiant";case tp.TEACHER:return"Formateur";case tp.HR:return"Ressources Humaines";case tp.ADMIN:return"Administrateur";case tp.SUPER_ADMIN:case"ROLE_SUPERADMIN":return"Super Administrateur";case tp.RECRUITER:return"Recruteur";case tp.GUEST:return"Invité";default:return e}}})),[e])},ip={ADMIN:["admin","adm","administrateur"],SUPER_ADMIN:["super admin","superadmin","super","super adm","super administrateur","superadministrateur","super-admin","super-administrateur"],SUPERADMIN:["superadmin","super admin","super","super adm","super administrateur","superadministrateur","super-admin","super-administrateur"],TEACHER:["formateur","forma","form","enseignant","prof","professeur"],STUDENT:["étudiant","etudiant","étud","etud","student","élève","eleve","apprenant"],HR:["rh","ressources humaines","ressources","hr","human resources"],RECRUITER:["recruteur","recru","rec","recruiter"],GUEST:["invité","invite","inv","guest"]};function op(e){if(!e)return"Utilisateur";const t=e.replace(/^ROLE_/i,"");switch(t.toUpperCase()){case"ADMIN":return"Admin";case"SUPER_ADMIN":case"SUPERADMIN":return"Super Admin";case"TEACHER":return"Formateur";case"STUDENT":return"Étudiant";case"RECRUITER":return"Recruteur";case"GUEST":return"Invité";case"HR":return"Ressources Humaines";default:return t||"Utilisateur"}}function lp(e={}){const{enabled:t=!0,onSuccess:n,onError:r,userId:s,...a}=e,i=ce(),[o,l]=Q.useState(!1),c=ef(),[u,d]=Q.useState((()=>nf.isLoggedIn())),[h]=Q.useState((()=>`user_data_${Date.now()}_${Math.random().toString(36).substr(2,9)}`)),[f,m]=Q.useState((()=>{try{const e=localStorage.getItem("user");if(e)return JSON.parse(e)}catch(e){}return null})),p=s?`/api/public-profile/${s}`:"/api/profile",[g,y]=Q.useState(0);Q.useEffect((()=>(Xh.requestRegistry.registerRouteUser(p,h),()=>{Xh.requestRegistry.unregisterRouteUser(p,h)})),[p,h]),Q.useEffect((()=>{if(!t||!c)return;if(!!!localStorage.getItem("token"))return;const e=Date.now();if(e-g<1e4)return;(async()=>{l(!0);try{const n=`useUserData_${h}_${e}`,r=await Xh.getUserData({routeKey:p,forceRefresh:!1,useCache:!0,requestId:n});if(r){i.setQueryData(["unified-user-data",p,c],r);try{localStorage.setItem("user",JSON.stringify(r)),m(r)}catch(t){}}y(e)}catch(k){console.warn("Error fetching user data:",k)}finally{l(!1)}})()}),[t,c,p,i,g]);const v=Q.useCallback((()=>{try{const e=i.getQueryData(["unified-user-data",p,c]);if(e)return e;const t=Xh.getCachedUserData();return t||f}catch(e){return f}}),[p,c,f,i]),b=Q.useCallback((async()=>{l(!0);try{const t=await Xh.coordinateRequest(p,h,(async()=>{i.getQueryData(["unified-user-data",p,c]);return await Sh.get(p,{noCache:!0,retries:2,timeout:12e3})}));let n;if(t)if(t.user&&"object"==typeof t.user)n=t;else if(t.id||t.email)n={...t,firstName:t.firstName||t.first_name||"",lastName:t.lastName||t.last_name||"",email:t.email||"",profilePictureUrl:t.profilePictureUrl||t.profile_picture_url||"",diplomas:Array.isArray(t.diplomas)?t.diplomas:[],addresses:Array.isArray(t.addresses)?t.addresses:[],stats:t.stats||{profile:{completionPercentage:0}}};else if(t.data&&"object"==typeof t.data||t.success){const e=t.data||{};n={...e,firstName:e.firstName||e.first_name||"",lastName:e.lastName||e.last_name||"",email:e.email||"",profilePictureUrl:e.profilePictureUrl||e.profile_picture_url||"",diplomas:Array.isArray(e.diplomas)?e.diplomas:[],addresses:Array.isArray(e.addresses)?e.addresses:[],stats:e.stats||{profile:{completionPercentage:0}}}}else n=t;else n={firstName:"",lastName:"",email:"",profilePictureUrl:"",diplomas:[],addresses:[],stats:{profile:{completionPercentage:0}}};if(n)try{localStorage.setItem("user",JSON.stringify(n)),m(n)}catch(e){}return l(!1),n}catch(k){throw l(!1),k}}),[p,h,i,c]),{data:x,isLoading:w,isError:E,error:k,refetch:S}=de({queryKey:["unified-user-data",p,c,u],queryFn:b,initialData:v,enabled:t&&!!c&&u,staleTime:6e4,cacheTime:12e5,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchInterval:!1,retry:2,retryDelay:1e3,...a,onSuccess:e=>{if(e)try{localStorage.setItem("user",JSON.stringify(e)),m(e)}catch(t){}n&&n(e)},onError:e=>{r&&r(e)}}),N=Q.useCallback((async()=>{if(Xh.requestRegistry.getActiveRequest(p))return null;if(Xh.requestRegistry.shouldThrottleRequest(p))return null;try{l(!0);const t=await Xh.coordinateRequest(p,h,(()=>Xh.getUserData({routeKey:p,forceRefresh:!0,useCache:!1})));if(i.setQueryData(["unified-user-data",p,c],t),t)try{localStorage.setItem("user",JSON.stringify(t)),m(t)}catch(e){}return l(!1),t}catch(k){throw l(!1),k}}),[p,c,i,h]),T=Q.useCallback((e=>{const t=x||f;if(!t||!t.roles)return!1;return(Array.isArray(t.roles)?t.roles:"object"==typeof t.roles?Object.values(t.roles):[]).some((t=>"string"==typeof t&&t===e||"object"==typeof t&&t.name===e))}),[x,f]);Q.useEffect((()=>{const e=()=>{const e=nf.isLoggedIn();e!==u&&d(e)};return e(),window.addEventListener("auth-state-change",e),window.addEventListener("login-success",e),()=>{window.removeEventListener("auth-state-change",e),window.removeEventListener("login-success",e)}}),[]),Q.useEffect((()=>{if(!t)return()=>{};let e=Date.now();let n=!1;const r=Xh.subscribe(Kh.UPDATED,(t=>{if("profile_picture"===t)return;if(Xh.requestRegistry.isRouteShared(p)&&Xh.requestRegistry.getActiveRequest(p))return;const r=Date.now();n||r-e<2e3?n||(n=!0,setTimeout((()=>{e=Date.now(),n=!1,t?i.invalidateQueries(["unified-user-data",p,c]):S()}),2e3-(r-e))):(e=r,t?i.invalidateQueries(["unified-user-data",p,c]):S())}));return r}),[t,p,c,i,S]);const C=Q.useMemo((()=>{const e=x||f;if(!e)return{};let t="";e.roles&&e.roles.length>0&&(t=(e=>{if(!e||!Array.isArray(e)||0===e.length)return null;const t=["ROLE_SUPERADMIN","ROLE_ADMIN","ROLE_HR","ROLE_TEACHER","ROLE_RECRUITER","ROLE_STUDENT","ROLE_GUEST"];for(const n of t)if(e.includes(n))return n;return e[0]})(e.roles));return{primaryRole:t,isStudent:T("ROLE_STUDENT"),isTeacher:T("ROLE_TEACHER"),isAdmin:T("ROLE_ADMIN"),isSuperAdmin:T("ROLE_SUPER_ADMIN"),isGuest:T("ROLE_GUEST")}}),[x,f,T]);return{user:Q.useMemo((()=>{const e=x||f||{},t=e.user&&"object"==typeof e.user,n=e.data&&"object"==typeof e.data;let r;r=t?e.user:n?e.data:e;const s=(e,t,n="")=>{for(const r of t)if(void 0!==e[r]&&null!==e[r])return e[r];return n};let a=null;if(r.studentProfile?a={...r.studentProfile}:e.studentProfile?a={...e.studentProfile}:n&&e.data.studentProfile&&(a={...e.data.studentProfile}),a&&void 0===a.portfolioUrl){const t=[r.studentProfile?.portfolioUrl,e.studentProfile?.portfolioUrl,e.data?.studentProfile?.portfolioUrl];for(const e of t)if(void 0!==e){a.portfolioUrl=e;break}}return{id:s(r,["id"]),firstName:s(r,["firstName","first_name"]),lastName:s(r,["lastName","last_name"]),fullName:s(r,["fullName","full_name"]),email:s(r,["email"]),phoneNumber:s(r,["phoneNumber","phone_number"]),linkedinUrl:s(r,["linkedinUrl","linkedin_url"]),profilePictureUrl:s(r,["profilePictureUrl","profile_picture_url"]),profilePicturePath:s(r,["profilePicturePath","profile_picture_path"]),birthDate:s(r,["birthDate","birth_date"]),age:s(r,["age"],null),nationality:r.nationality||null,theme:r.theme||null,roles:Array.isArray(r.roles)?r.roles:[],specialization:r.specialization||null,diplomas:Array.isArray(r.diplomas)?r.diplomas:Array.isArray(e.diplomas)?e.diplomas:[],addresses:Array.isArray(r.addresses)?r.addresses:Array.isArray(e.addresses)?e.addresses:[],documents:Array.isArray(r.documents)?r.documents:Array.isArray(e.documents)?e.documents:[],studentProfile:a,stats:r.stats||e.stats||{profile:{completionPercentage:0}},createdAt:s(r,["createdAt","created_at"]),updatedAt:s(r,["updatedAt","updated_at"])}}),[x,f]),isLoading:(w||o)&&!f,isInitialLoading:o&&!f,isError:E,error:k,refetch:S,forceRefresh:N,hasRole:T,...C}}var cp,up,dp={exports:{}},hp={};var fp=(up||(up=1,dp.exports=function(){if(cp)return hp;cp=1;var e=G(),t="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=e.useState,r=e.useEffect,s=e.useLayoutEffect,a=e.useDebugValue;function i(e){var n=e.getSnapshot;e=e.value;try{var r=n();return!t(e,r)}catch(s){return!0}}var o="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var o=t(),l=n({inst:{value:o,getSnapshot:t}}),c=l[0].inst,u=l[1];return s((function(){c.value=o,c.getSnapshot=t,i(c)&&u({inst:c})}),[e,o,t]),r((function(){return i(c)&&u({inst:c}),e((function(){i(c)&&u({inst:c})}))}),[e]),a(o),o};return hp.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:o,hp}()),dp.exports);function mp(){return()=>{}}var pp="Avatar",[gp,yp]=E(pp),[vp,bp]=gp(pp),xp=Q.forwardRef(((t,n)=>{const{__scopeAvatar:r,...s}=t,[a,i]=Q.useState("idle");return e.jsx(vp,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:e.jsx(k.span,{...s,ref:n})})}));xp.displayName=pp;var wp="AvatarImage",Ep=Q.forwardRef(((t,n)=>{const{__scopeAvatar:r,src:s,onLoadingStatusChange:a=()=>{},...i}=t,o=bp(wp,r),l=function(e,{referrerPolicy:t,crossOrigin:n}){const r=fp.useSyncExternalStore(mp,(()=>!0),(()=>!1)),s=Q.useRef(null),a=r?(s.current||(s.current=new window.Image),s.current):null,[i,o]=Q.useState((()=>Np(a,e)));return N((()=>{o(Np(a,e))}),[a,e]),N((()=>{const e=e=>()=>{o(e)};if(!a)return;const r=e("loaded"),s=e("error");return a.addEventListener("load",r),a.addEventListener("error",s),t&&(a.referrerPolicy=t),"string"==typeof n&&(a.crossOrigin=n),()=>{a.removeEventListener("load",r),a.removeEventListener("error",s)}}),[a,n,t]),i}(s,i),c=S((e=>{a(e),o.onImageLoadingStatusChange(e)}));return N((()=>{"idle"!==l&&c(l)}),[l,c]),"loaded"===l?e.jsx(k.img,{...i,ref:n,src:s}):null}));Ep.displayName=wp;var kp="AvatarFallback",Sp=Q.forwardRef(((t,n)=>{const{__scopeAvatar:r,delayMs:s,...a}=t,i=bp(kp,r),[o,l]=Q.useState(void 0===s);return Q.useEffect((()=>{if(void 0!==s){const e=window.setTimeout((()=>l(!0)),s);return()=>window.clearTimeout(e)}}),[s]),o&&"loaded"!==i.imageLoadingStatus?e.jsx(k.span,{...a,ref:n}):null}));function Np(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}Sp.displayName=kp;var Tp=xp,Cp=Ep,Rp=Sp;const jp=Q.forwardRef((({className:t,...n},r)=>e.jsx(Tp,{ref:r,className:Om("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...n})));jp.displayName=Tp.displayName;const Ap=Q.forwardRef((({className:t,...n},r)=>e.jsx(Cp,{ref:r,className:Om("aspect-square h-full w-full",t),...n})));Ap.displayName=Cp.displayName;const _p=Q.forwardRef((({className:t,...n},r)=>e.jsx(Rp,{ref:r,className:Om("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...n})));_p.displayName=Rp.displayName;const Dp=({className:t=""})=>{const{profilePictureUrl:n}=Sf();return e.jsx(jp,{className:`rounded-full ${t}`,children:n?e.jsx("img",{src:n,alt:"Photo de profil",className:"w-full h-full object-cover",onError:e=>{e.target.src=""}}):e.jsx(_p,{className:"bg-gradient-to-r from-[#02284f] to-[#03386b] text-white",children:e.jsx(Pc,{className:"w-4 h-4 sm:w-6 sm:h-6 md:w-8 md:h-8"})})})},Ip=x,Pp=w,Mp=b,Lp=Q.forwardRef((({className:t,...n},r)=>e.jsx(m,{className:Om("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...n,ref:r})));Lp.displayName=m.displayName;const Op=Af("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Up=Q.forwardRef((({side:t="right",className:n,children:r,showClose:s=!0,...a},i)=>e.jsxs(Mp,{children:[e.jsx(Lp,{}),e.jsxs(p,{ref:i,className:Om(Op({side:t}),n),...a,children:[e.jsx(y,{className:"sr-only",children:"Sheet Dialog"}),e.jsx(v,{className:"sr-only",children:"Contenu du panneau latéral"}),s&&e.jsxs(g,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(Lc,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Fermer"})]}),r]})]})));Up.displayName=p.displayName;const Fp=Q.forwardRef((({className:t,...n},r)=>e.jsx(y,{ref:r,className:Om("text-lg font-semibold text-foreground",t),...n})));Fp.displayName=y.displayName;Q.forwardRef((({className:t,...n},r)=>e.jsx(v,{ref:r,className:Om("text-sm text-muted-foreground",t),...n}))).displayName=v.displayName;const zp=Q.memo((()=>{const{user:t}=lp(),[n,r]=Q.useState(!1),[s,a]=Q.useState({}),i=Q.useRef(null),o=Q.useRef(null),l=Y(),{roles:c,hasAnyRole:u}=rp(),{translateRoleName:d}=ap();sp(),Q.useEffect((()=>{const e=e=>{n&&i.current&&!i.current.contains(e.target)&&o.current&&!o.current.contains(e.target)&&r(!1)};return n&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[n]),Q.useEffect((()=>{n&&r(!1)}),[c]);const h=[{key:"dashboard",label:"Tableau de bord",icon:e.jsx(hc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),to:"/dashboard"},{key:"notifications",label:"Notifications",icon:e.jsx(Ul,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[tp.SUPERADMIN,tp.ADMIN,tp.TEACHER,tp.STUDENT],to:"/notifications"},{key:"messagerie",label:"Messagerie",icon:e.jsx(xc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[tp.SUPERADMIN,tp.ADMIN,tp.TEACHER,tp.STUDENT,tp.RECRUITER],to:"#"},{key:"trombinoscope",label:"Trombinoscope",icon:e.jsx(ql,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[tp.SUPERADMIN,tp.ADMIN,tp.TEACHER,tp.STUDENT,tp.RECRUITER],to:"/trombinoscope"},{key:"formations_section",label:"Formations",icon:e.jsx(Fl,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[tp.ADMIN,tp.SUPERADMIN,tp.RECRUITER],links:[{name:"Toutes les formations",to:"/formations",roles:[tp.ADMIN,tp.SUPERADMIN,tp.RECRUITER]},{name:"Créer une formation",to:"/formations/new",roles:[tp.ADMIN,tp.SUPERADMIN,tp.RECRUITER]},{name:"Demandes en attente",to:"/formations/pending",roles:[tp.ADMIN,tp.SUPERADMIN,tp.RECRUITER]}]},{key:"etudiants",label:"Étudiants",icon:e.jsx(cc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[tp.SUPERADMIN,tp.ADMIN,tp.TEACHER,tp.HR,tp.RECRUITER],links:[{name:"Liste des étudiants",to:"/admin/users?filter=ROLE_STUDENT",roles:[tp.SUPERADMIN,tp.ADMIN]},{name:"Gestion des étudiants",to:"/eleves",roles:[tp.SUPERADMIN,tp.ADMIN,tp.TEACHER,tp.HR]},{name:"Résultats",to:"/eleves/resultats",roles:[tp.SUPERADMIN,tp.ADMIN,tp.TEACHER]},{name:"Dossiers",to:"/eleves/dossiers",roles:[tp.SUPERADMIN,tp.ADMIN,tp.HR,tp.TEACHER]},{name:"Certificats et Diplômes",to:"/eleves/certificats",roles:[tp.SUPERADMIN,tp.ADMIN,tp.TEACHER]},{name:"Historique des Absences",to:"/eleves/absences",roles:[tp.SUPERADMIN,tp.ADMIN,tp.TEACHER,tp.HR]},{name:"Profils & CV",to:"/recruiter/student-profiles",roles:[tp.RECRUITER]},{name:"Stages & Alternances",to:"/recruiter/internships",roles:[tp.RECRUITER]}]},{key:"cours",label:"Mes Cours",icon:e.jsx(tc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[tp.STUDENT,tp.TEACHER],to:"#"},{key:"projet",label:"Mes Projets",icon:e.jsx(zl,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[tp.STUDENT,tp.TEACHER],to:"#"},{key:"formations_management",label:"Gestion des formations",icon:e.jsx(Fl,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[tp.SUPERADMIN,tp.ADMIN,tp.TEACHER,tp.RECRUITER],to:"/formation-management"},{key:"justification_absence",label:"Justifier une absence",icon:e.jsx(tc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[tp.STUDENT],to:"#"},{key:"plannings",label:"Plannings",icon:e.jsx(Bl,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[tp.SUPERADMIN,tp.ADMIN,tp.TEACHER,tp.HR,tp.STUDENT],links:[{name:"Évènements",to:"/plannings/evenements",roles:[tp.SUPERADMIN,tp.ADMIN,tp.TEACHER,tp.HR,tp.STUDENT]},{name:"Agenda",to:"/plannings/agenda",roles:[tp.SUPERADMIN,tp.ADMIN,tp.TEACHER,tp.HR,tp.STUDENT]},{name:"Réservation de salle",to:"/plannings/reservation-salle",roles:[tp.SUPERADMIN,tp.ADMIN,tp.TEACHER]},{name:"Réservation de matériel",to:"/plannings/reservation-materiel",roles:[tp.SUPERADMIN,tp.ADMIN,tp.TEACHER]}]},{key:"candidatures",label:"Candidatures",icon:e.jsx(Rc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[tp.HR,tp.RECRUITER],to:"/candidatures"},{key:"recrutement",label:"Recrutement",icon:e.jsx(zl,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[tp.RECRUITER],links:[{name:"Tableau de bord",to:"/recruiter/dashboard",roles:[tp.RECRUITER]},{name:"Offres d'emploi",to:"/recruiter/jobs",roles:[tp.RECRUITER]},{name:"Candidatures",to:"/recruiter/applications",roles:[tp.RECRUITER]},{name:"Entretiens",to:"/recruiter/interviews",roles:[tp.RECRUITER]},{name:"Base de CV",to:"/recruiter/cv-database",roles:[tp.RECRUITER]},{name:"Statistiques",to:"/recruiter/statistics",roles:[tp.RECRUITER]}]},{key:"evenements",label:"Événements",icon:e.jsx(Bl,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[tp.RECRUITER],links:[{name:"Job Dating",to:"/recruiter/job-dating",roles:[tp.RECRUITER]},{name:"Forums Entreprises",to:"/recruiter/career-fairs",roles:[tp.RECRUITER]},{name:"Présentations Entreprise",to:"/recruiter/company-presentations",roles:[tp.RECRUITER]}]},{key:"cagnottes",label:"Cagnottes",icon:e.jsx(kc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[tp.SUPERADMIN,tp.ADMIN,tp.TEACHER,tp.STUDENT],to:"#"},{key:"sponsors",label:"Sponsors",icon:e.jsx(uc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[tp.SUPERADMIN,tp.ADMIN,tp.TEACHER,tp.STUDENT],to:"#"},{key:"admin_all_users",label:"Tous les utilisateurs",icon:e.jsx(Mc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[tp.ADMIN,tp.SUPERADMIN],to:"/admin/users"},{key:"admin_teachers",label:"Formateurs",icon:e.jsx(tc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[tp.ADMIN,tp.SUPERADMIN],links:[{name:"Liste des formateurs",to:"/admin/users?filter=ROLE_TEACHER",roles:[tp.ADMIN,tp.SUPERADMIN]},{name:"Planning des Formateurs",to:"/rh/planning",roles:[tp.ADMIN,tp.SUPERADMIN]},{name:"Évaluation des formateurs",to:"/admin/teacher-evaluation",roles:[tp.ADMIN,tp.SUPERADMIN]}]},{key:"admin_hr",label:"Personnel RH",icon:e.jsx(Mc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[tp.ADMIN,tp.SUPERADMIN],links:[{name:"Liste du personnel RH",to:"/admin/users?filter=ROLE_HR",roles:[tp.ADMIN,tp.SUPERADMIN]},{name:"Attributions",to:"/admin/hr-assignments",roles:[tp.ADMIN,tp.SUPERADMIN]}]},{key:"admin_admins",label:"Administrateurs",icon:e.jsx(jc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[tp.ADMIN,tp.SUPERADMIN],links:[{name:"Liste des administrateurs",to:"/admin/users?filter=ROLE_ADMIN",roles:[tp.ADMIN,tp.SUPERADMIN]},{name:"Droits d'accès",to:"/admin/access-rights",roles:[tp.SUPERADMIN]}]},{key:"admin_guests",label:"Invités",icon:e.jsx(Ic,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[tp.ADMIN,tp.SUPERADMIN],links:[{name:"Liste des invités",to:"/admin/users?filter=ROLE_GUEST",roles:[tp.ADMIN,tp.SUPERADMIN]},{name:"Gestion des invités",to:"/invites/",roles:[tp.ADMIN,tp.SUPERADMIN]},{name:"Test d'admission",to:"/invites/test_admission",roles:[tp.ADMIN,tp.SUPERADMIN]},{name:"Statistiques des Invités",to:"/admin/invite/statistiques",roles:[tp.ADMIN,tp.SUPERADMIN]}]},{key:"admin_recruiters",label:"Recruteurs",icon:e.jsx(zl,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[tp.ADMIN,tp.SUPERADMIN],links:[{name:"Liste des recruteurs",to:"/admin/users?filter=ROLE_RECRUITER",roles:[tp.ADMIN,tp.SUPERADMIN]},{name:"Entreprises partenaires",to:"/admin/partner-companies",roles:[tp.ADMIN,tp.SUPERADMIN]},{name:"Offres d'emploi",to:"/admin/job-offers",roles:[tp.ADMIN,tp.SUPERADMIN]}]},{key:"guest_student_roles",label:"Gestion Invité/Élève",icon:e.jsx(Mc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[tp.RECRUITER],to:"/recruiter/guest-student-roles"},{key:"rh",label:"Ressources Humaines",icon:e.jsx(Mc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[tp.SUPERADMIN,tp.ADMIN,tp.HR],links:[{name:"Gestion des Formateurs",to:"/rh/formateurs",roles:[tp.SUPERADMIN,tp.HR]},{name:"Gestion des Candidatures",to:"/rh/candidatures",roles:[tp.SUPERADMIN,tp.HR]},{name:"Suivi des Absences et Congés",to:"/rh/absences",roles:[tp.SUPERADMIN,tp.HR]},{name:"Planning des Formateurs",to:"/rh/planning",roles:[tp.SUPERADMIN,tp.HR]},{name:"Archivage des Dossiers",to:"/rh/archivage",roles:[tp.SUPERADMIN,tp.HR]},{name:"Suivi des Recrutements",to:"/rh/recrutement",roles:[tp.SUPERADMIN,tp.HR]},{name:"Gestion des formateurs",to:"/admin/users?filter=ROLE_TEACHER",roles:[tp.HR]}]},{key:"admins",label:"Administration",icon:e.jsx(jc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[tp.SUPERADMIN,tp.ADMIN],links:[{name:"Gestion des Formations",to:"/admin/formations",roles:[tp.SUPERADMIN]},{name:"Gestion des Services de Support",to:"/admin/ticket-services",roles:[tp.SUPERADMIN,tp.ADMIN]},{name:"Gestion des Tickets",to:"/admin/tickets",roles:[tp.SUPERADMIN,tp.ADMIN]},{name:"Suivi des Inscriptions",to:"/admin/inscriptions",roles:[tp.SUPERADMIN]},{name:"Gestion des Paiements",to:"/admin/paiements",roles:[tp.SUPERADMIN]},{name:"Suivi des Absences",to:"/admin/absences",roles:[tp.SUPERADMIN]},{name:"Statistiques Administratives",to:"/admin/statistiques",roles:[tp.SUPERADMIN]},{name:"Les logs",to:"/admin/logs",roles:[tp.SUPERADMIN]},{name:"Gestion des partenaires",to:"/admin/partenariats",roles:[tp.SUPERADMIN]}]},{key:"centres_formations",label:"Centres de formations",icon:e.jsx(Nc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[tp.SUPERADMIN],to:"/centres_formations"},{key:"candidature",label:"Ma Candidature",icon:e.jsx(tc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[tp.GUEST],links:[{name:"État de ma candidature",to:"/guest/application-status",roles:[tp.GUEST]},{name:"Documents à fournir",to:"/guest/required-documents",roles:[tp.GUEST]},{name:"Compléter mon dossier",to:"/guest/complete-profile",roles:[tp.GUEST]},{name:"Historique des échanges",to:"/guest/communications",roles:[tp.GUEST]}]},{key:"formations",label:"Formations",icon:e.jsx(Fl,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[tp.GUEST],links:[{name:"Catalogue des formations",to:"/guest/training-catalog",roles:[tp.GUEST]},{name:"Détails des programmes",to:"/guest/program-details",roles:[tp.GUEST]},{name:"Conditions d'admission",to:"/guest/admission-requirements",roles:[tp.GUEST]},{name:"FAQ Formations",to:"/guest/training-faq",roles:[tp.GUEST]}]},{key:"ecole",label:"Notre École",icon:e.jsx(Nc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[tp.GUEST],links:[{name:"Présentation",to:"/guest/school-presentation",roles:[tp.GUEST]},{name:"Vie étudiante",to:"/guest/student-life",roles:[tp.GUEST]},{name:"Témoignages",to:"/guest/testimonials",roles:[tp.GUEST]},{name:"Actualités",to:"/guest/news",roles:[tp.GUEST]}]},{key:"contact",label:"Contact & Support",icon:e.jsx(xc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[tp.GUEST],links:[{name:"Contacter un recruteur",to:"/guest/contact-recruiter",roles:[tp.GUEST]},{name:"Questions fréquentes",to:"/guest/faq",roles:[tp.GUEST]},{name:"Support technique",to:"/guest/technical-support",roles:[tp.GUEST]},{name:"Prendre rendez-vous",to:"/guest/schedule-meeting",roles:[tp.GUEST]}]},{key:"nous_rejoindre",label:"Nous rejoindre",icon:e.jsx(Mc,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[tp.GUEST],links:[{name:"Envoyer une candidature",to:"/nous-rejoindre/candidature"},{name:"Processus de recrutement",to:"/nous-rejoindre/recrutement"},{name:"Offres d'emploi",to:"/nous-rejoindre/offres"},{name:"Devenir partenaire",to:"/nous-rejoindre/partenaire"},{name:"Devenir sponsor",to:"/nous-rejoindre/sponsor"}]},{key:"aide",label:"Besoin d'aide",icon:e.jsx(_c,{className:"w-5 h-5 mr-2 text-[#528eb2]"}),roles:[tp.TEACHER,tp.STUDENT,tp.HR,tp.RECRUITER,tp.GUEST],links:[{name:"Créer un ticket",to:"/tickets/new",roles:[tp.TEACHER,tp.STUDENT,tp.HR,tp.RECRUITER,tp.GUEST]},{name:"Mes tickets",to:"/tickets",roles:[tp.TEACHER,tp.STUDENT,tp.HR,tp.RECRUITER,tp.GUEST]}]}];return e.jsxs("div",{className:"relative z-[101]",children:[e.jsx("style",{children:'\n  .menu-burger-button {\n    position: relative;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 40px;\n    height: 40px;\n    border-radius: 50%;\n    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n    margin-right: 0.75rem;\n    background-color: transparent;\n    border: none;\n    cursor: pointer;\n    z-index: 101;\n  }\n  \n  .menu-burger-button:hover {\n    background-color: rgba(255, 255, 255, 0.1);\n    transform: scale(1.05);\n  }\n  \n  .menu-burger-button:active {\n    transform: scale(0.95);\n  }\n  \n  /* Override Sheet styles to match our design */\n  .sidebar-sheet {\n    background-color: #00284f !important;\n    color: white !important;\n    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3) !important;\n    border-right: 1px solid rgba(82, 142, 178, 0.2) !important;\n    z-index: 102 !important;\n  }\n  \n  .scrollable-div {\n    scrollbar-width: thin;\n    scrollbar-color: rgba(82, 142, 178, 0.5) transparent;\n  }\n  \n  .scrollable-div::-webkit-scrollbar {\n    width: 6px;\n  }\n  \n  .scrollable-div::-webkit-scrollbar-track {\n    background: transparent;\n  }\n  \n  .scrollable-div::-webkit-scrollbar-thumb {\n    background-color: rgba(82, 142, 178, 0.5);\n    border-radius: 3px;\n  }\n  \n  .menu-item {\n    position: relative;\n    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n    border-radius: 0.375rem;\n    margin: 0.25rem 0.5rem;\n  }\n  \n  .menu-item:hover {\n    background-color: rgba(82, 142, 178, 0.2);\n    transform: translateX(4px);\n  }\n  \n  .menu-item.active {\n    background-color: rgba(82, 142, 178, 0.3);\n    border-left: 3px solid #528eb2;\n  }\n  \n  .submenu-item {\n    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n    border-radius: 0.375rem;\n    margin: 0.25rem 0.5rem;\n  }\n  \n  .submenu-item:hover {\n    background-color: rgba(82, 142, 178, 0.3);\n    transform: translateX(4px);\n  }\n  \n  .chevron-icon {\n    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  }\n  \n  .chevron-icon.open {\n    transform: rotate(90deg);\n  }\n  \n  /* Responsive styles */\n  @media (min-width: 1024px) {\n    .sidebar-sheet {\n      width: 320px !important;\n    }\n  }\n  \n  @media (max-width: 1023px) {\n    .sidebar-sheet {\n      width: 280px !important;\n    }\n  }\n  \n  @media (max-width: 768px) {\n    .sidebar-sheet {\n      width: 85vw !important;\n    }\n    \n    .menu-item {\n      margin: 0.125rem 0.25rem;\n    }\n    \n    .submenu-item {\n      margin: 0.125rem 0.25rem;\n    }\n  }\n  \n  @media (max-width: 480px) {\n    .sidebar-sheet {\n      width: 100vw !important;\n    }\n    \n    .menu-item, .submenu-item {\n      margin: 0.125rem 0;\n      border-radius: 0;\n    }\n    \n    .menu-item:hover, .submenu-item:hover {\n      transform: none;\n      background-color: rgba(82, 142, 178, 0.15);\n    }\n  }\n\n  /* Hide the default close button from Sheet */\n  .sidebar-sheet [data-state] > button[type="button"] {\n    display: none;\n  }\n  \n  .menu-item {\n    position: relative;\n    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n    border-radius: 0.375rem;\n    margin: 0.25rem 0.5rem;\n  }\n  \n  .menu-item:hover {\n    background-color: rgba(82, 142, 178, 0.2);\n    transform: translateX(4px);\n  }\n  \n  .menu-item.active {\n    background-color: rgba(82, 142, 178, 0.3);\n    border-left: 3px solid #528eb2;\n  }\n  \n  .submenu-item {\n    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n    border-radius: 0.375rem;\n    margin: 0.25rem 0.5rem;\n  }\n  \n  .submenu-item:hover {\n    background-color: rgba(82, 142, 178, 0.3);\n    transform: translateX(4px);\n  }\n  \n  .chevron-icon {\n    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  }\n  \n  .chevron-icon.open {\n    transform: rotate(90deg);\n  }\n'}),e.jsxs(Ip,{open:n,onOpenChange:r,children:[e.jsx(Pp,{asChild:!0,children:e.jsx("button",{ref:o,className:"menu-burger-button text-gray-200 hover:text-white focus:outline-none","aria-label":"Menu principal",children:e.jsx(bc,{className:"w-6 h-6"})})}),e.jsx(Up,{side:"left",className:"sidebar-sheet p-0 border-0",showClose:!1,children:e.jsxs("div",{className:"flex flex-col h-full",children:[c.length>0&&e.jsxs("div",{className:"flex items-center p-4 border-b border-blue-700 bg-gradient-to-r from-[#00284f] to-[#003a6b]",children:[e.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-full mr-3 flex items-center justify-center cursor-pointer hover:bg-white/30 transition-colors",onClick:()=>{r(!1),l("/profile")},children:e.jsx(Dp,{className:"w-full h-full"})}),e.jsxs("div",{className:"cursor-pointer",onClick:()=>{r(!1),l("/profile")},children:[e.jsx("p",{className:"font-semibold hover:underline transition-all text-white",children:t?`${t.firstName} ${t.lastName}`:"Chargement..."}),e.jsx("p",{className:"text-sm text-blue-200",children:d(c[0])})]}),e.jsx("button",{className:"ml-auto text-white p-2 rounded-full hover:bg-blue-800/50 transition-colors",onClick:()=>r(!1),"aria-label":"Fermer le menu",children:e.jsx(Lc,{className:"w-5 h-5"})})]}),!c.length&&e.jsxs("div",{className:"p-4 border-b border-blue-700 bg-gradient-to-r from-[#00284f] to-[#003a6b]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Bienvenue"}),e.jsx("button",{className:"text-white p-2 rounded-full hover:bg-blue-800/50 transition-colors",onClick:()=>r(!1),"aria-label":"Fermer le menu",children:e.jsx(Lc,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-sm text-blue-200 mb-3",children:"Connectez-vous pour accéder à toutes les fonctionnalités"}),e.jsxs(Z,{to:"/login",className:"flex items-center justify-center w-full py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors",onClick:()=>r(!1),children:[e.jsx(Pc,{className:"w-4 h-4 mr-2"}),"Se connecter"]})]}),e.jsx("div",{className:"scrollable-div overflow-y-auto flex-grow",children:e.jsx("ul",{className:"py-2",children:h.map((({key:t,icon:n,label:i,roles:o,links:c,to:d,onClick:h})=>!o||u(o)?e.jsx(X.Fragment,{children:d?e.jsx("li",{className:"menu-item",children:"support"===t?e.jsxs("div",{className:"flex items-center px-4 py-2.5 w-full cursor-pointer",onClick:()=>{r(!1),l("/tickets")},children:[n,e.jsx("span",{children:i})]}):e.jsxs(Z,{to:d,className:"flex items-center px-4 py-2.5 w-full",onClick:()=>r(!1),children:[n,e.jsx("span",{children:i})]})}):e.jsxs("li",{className:"menu-item "+(s[t]?"active":""),onClick:()=>{return e=t,void a((t=>({...Object.keys(t).reduce(((e,t)=>({...e,[t]:!1})),{}),[e]:!t[e]})));var e},children:[e.jsxs("div",{className:"flex items-center px-4 py-2.5 w-full cursor-pointer",children:[n,e.jsx("span",{children:i}),e.jsx("div",{className:"ml-auto",children:s[t]?e.jsx(Gl,{className:"w-4 h-4 text-[#528eb2]"}):e.jsx(Ql,{className:"w-4 h-4 text-[#528eb2] chevron-icon "+(s[t]?"open":"")})})]}),e.jsx(ze,{children:s[t]&&c&&e.jsx(jl.ul,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"bg-[#001f3d] pl-4",children:c.map((t=>!t.roles||u(t.roles)?e.jsx("li",{className:"submenu-item",children:e.jsx(Z,{to:t.to,className:"flex items-center px-4 py-2 text-sm",onClick:()=>r(!1),children:t.name})},t.to):null))})})]})},`menu-${t}`):null))})})]})})]})]})})),Vp=e=>{switch(e.replace(/^ROLE_/i,"").toUpperCase()){case"ADMIN":return"Admin";case"SUPER_ADMIN":case"SUPERADMIN":return"Super Admin";case"TEACHER":return"Formateur";case"STUDENT":return"Étudiant";case"RECRUITER":return"Recruteur";case"HR":return"Ressources Humaines";case"GUEST":return"Invité";default:return e}},Bp=t=>{const n=t?.toLowerCase().replace("role_","");switch(n){case"admin":case"super_admin":return e.jsx(zl,{className:"w-3 h-3 mr-1 text-blue-600 dark:text-blue-400"});case"teacher":return e.jsx(zl,{className:"w-3 h-3 mr-1 text-green-600 dark:text-green-400"});case"student":return e.jsx(Jl,{className:"w-3 h-3 mr-1 text-amber-600 dark:text-amber-400"});case"hr":return e.jsx(zl,{className:"w-3 h-3 mr-1 text-purple-600 dark:text-purple-400"});case"recruiter":return e.jsx(zl,{className:"w-3 h-3 mr-1 text-indigo-600 dark:text-indigo-400"});default:return e.jsx(Jl,{className:"w-3 h-3 mr-1 text-gray-600 dark:text-gray-400"})}},qp=e=>{const t=e?.toLowerCase().replace("role_","");switch(t){case"admin":return"bg-blue-50 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300";case"super_admin":case"superadmin":return"bg-red-50 text-red-700 dark:bg-red-900/40 dark:text-red-300";case"teacher":return"bg-green-50 text-green-700 dark:bg-green-900/40 dark:text-green-300";case"student":return"bg-amber-50 text-amber-700 dark:bg-amber-900/40 dark:text-amber-300";case"hr":return"bg-purple-50 text-purple-700 dark:bg-purple-900/40 dark:text-purple-300";case"recruiter":return"bg-indigo-50 text-indigo-700 dark:bg-indigo-900/40 dark:text-indigo-300";default:return"bg-gray-50 text-gray-700 dark:bg-gray-800 dark:text-gray-300"}},$p=e=>{const t=e?.replace(/^ROLE_/i,"").toLowerCase();switch(t){case"admin":return"Administrateur";case"super_admin":case"superadmin":return"Super Administrateur";case"teacher":return"Formateur";case"student":return"Étudiant";case"hr":return"Ressources Humaines";case"recruiter":return"Recruteur";case"guest":return"Invité";default:return e||"Utilisateur"}},Hp=()=>{const[e,t]=Q.useState([]),[n,r]=Q.useState(!1),[s,a]=Q.useState(!1),{roles:i,hasRole:o,hasAnyRole:l}=rp();Q.useEffect((()=>{const e=nf.isLoggedIn();r(e)}),[]),Q.useEffect((()=>{let e=[];e=n?o(tp.SUPERADMIN)?["ADMIN","SUPER_ADMIN","SUPERADMIN","TEACHER","STUDENT","RECRUITER","HR","GUEST"]:o(tp.ADMIN)?["ADMIN","TEACHER","STUDENT","RECRUITER","HR","GUEST"]:o(tp.TEACHER)&&!l([tp.ADMIN,tp.SUPERADMIN])?["STUDENT","HR"]:o(tp.HR)&&!l([tp.ADMIN,tp.SUPERADMIN])?["TEACHER","STUDENT","RECRUITER"]:o(tp.RECRUITER)&&!l([tp.ADMIN,tp.SUPERADMIN,tp.HR,tp.TEACHER])?["TEACHER","STUDENT"]:o(tp.STUDENT)?["TEACHER","STUDENT","RECRUITER","HR"]:(o(tp.GUEST),["RECRUITER"]):[],t(e)}),[i,o,l,n]);return{allowedSearchRoles:e,isLoggedIn:n,isRoleSearch:s,setIsRoleSearch:a,checkForRoleSearch:t=>{const n=((e,t)=>{if(!e||!t||0===t.length)return!1;const n=e.toLowerCase(),r={admin:["admin","administrateur"],super_admin:["super admin","superadmin","super administrateur"],teacher:["prof","professeur","formateur","formatrice","enseignant"],student:["étudiant","etudiante","élève","eleve","apprenant"],hr:["rh","ressources humaines","ressource humaine"],recruiter:["recruteur","recruteuse","recrutement"]};for(const s of t){const e=s.replace(/^ROLE_/i,"").toLowerCase();if(n===e||(r[e]||[]).some((e=>n.includes(e))))return s}return!1})(t,e);return!!n},hasRole:o,hasAnyRole:l}};Object.entries(ip).forEach((([e,t])=>{t.forEach((e=>{}))}));const Wp={async getSuggestions(e){try{if(!nf.isLoggedIn())throw new Error("Vous devez être connecté pour effectuer une recherche.");const t=await nf.getCurrentUser(),n=t?.roles||[],r=n.includes(tp.SUPERADMIN),s=n.includes(tp.ADMIN)&&!r,a=n.includes(tp.TEACHER)&&!r&&!s,i=n.includes(tp.HR)&&!r&&!s,o=n.includes(tp.RECRUITER)&&!r&&!s&&!a&&!i,l=function(e,t=null){if(!e)return null;const n=e.toLowerCase().trim(),r=t?Object.keys(ip).filter((e=>!("SUPERADMIN"!==e||!t.includes("SUPER_ADMIN"))||!("SUPER_ADMIN"!==e||!t.includes("SUPERADMIN"))||t.includes(e))):Object.keys(ip);for(const a of r)if(ip[a].includes(n))return{role:a,matchType:"exact",alias:n};for(const a of r){const e=ip[a];for(const t of e)try{if(new RegExp("\\b"+t+"\\b","i").test(n))return{role:a,matchType:"boundary",alias:t}}catch(s){continue}}for(const a of r){const e=ip[a];for(const t of e)if(t.startsWith(n)||n.startsWith(t))return{role:a,matchType:"startsWith",alias:t}}for(const a of r){const e=ip[a];for(const t of e)if(t.includes(n)||n.includes(t))return{role:a,matchType:"contains",alias:t}}return null}(e),c=!!l;if(c){const e=l.role.toUpperCase();if(s&&("SUPER_ADMIN"===e||"SUPERADMIN"===e))return[];if(a&&"STUDENT"!==e&&"HR"!==e)return[];if(i&&"TEACHER"!==e&&"STUDENT"!==e&&"RECRUITER"!==e)return[];if(o&&"TEACHER"!==e&&"STUDENT"!==e)return[]}let u=null;c&&(u="SUPERADMIN"===l.role||"SUPER_ADMIN"===l.role?tp.SUPERADMIN:tp[l.role]);const d=await Sh.get("/user-autocomplete",{params:{q:e}});if(c&&(!d||0===d.length)){let e=[];l.role.includes("_")&&e.push(l.role.replace("_","")),"SUPERADMIN"===l.role?(e.push("SUPER_ADMIN"),e.push("super admin")):"SUPER_ADMIN"===l.role&&(e.push("SUPERADMIN"),e.push("superadmin"));const t=ip[l.role];t&&t.length>0&&e.push(t[0]);for(const n of e){const e=await Sh.get("/user-autocomplete",{params:{q:n}});if(e&&e.length>0)return e}}return d}catch(t){throw t.response&&t.response.status,t}}},Gp=({isLoggedIn:e,hasRole:t,hasAnyRole:n,checkForRoleSearch:r})=>{const[s,a]=Q.useState(""),[i,o]=Q.useState([]),[l,c]=Q.useState(!1),[u,d]=Q.useState(-1),[h,f]=Q.useState(!1),[m,p]=Q.useState(!1),g=Q.useRef(null),y=()=>t(tp.SUPERADMIN)||t(tp.RECRUITER)||t(tp.TEACHER)||t(tp.STUDENT)||t(tp.HR)||t(tp.GUEST)||t(tp.ADMIN);Q.useEffect((()=>()=>{g.current&&clearTimeout(g.current)}),[]);const v=e=>{const t=r(e);return f(t),t};return{query:s,setQuery:a,suggestions:i,setSuggestions:o,showSuggestions:l,setShowSuggestions:c,activeSuggestion:u,setActiveSuggestion:d,isRoleSearch:h,setIsRoleSearch:f,isLoading:m,hasSpecialRole:y,handleInputChange:t=>{const n=t.target.value;a(n),v(n),d(-1),g.current&&clearTimeout(g.current),y()&&!l&&c(!0),g.current=setTimeout((()=>{(t=>{if(!e)return;const n=y();if(t.length<1)return o([]),n||c(!1),void p(!1);p(!0),Wp.getSuggestions(t).then((e=>{Array.isArray(e)?(o(e.slice(0,10)),c(!0)):(o([]),n||c(!1)),p(!1)})).catch((e=>{console.error("Error fetching suggestions:",e),o([]),n||c(!1),p(!1)}))})(n)}),300)},clearSearch:()=>{a(""),o([]),c(!1),f(!1)},fetchInitialSuggestions:async()=>{if(!e||!y())return;p(!0),o([]),c(!0);let r=[],s=[];t(tp.SUPERADMIN)?s=["a"]:t(tp.ADMIN)&&!t(tp.SUPERADMIN)?s=["étudiant","formateur","recruteur","admin"]:t(tp.RECRUITER)&&!t(tp.SUPERADMIN)?s=["formateur","étudiant"]:t(tp.TEACHER)&&!n([tp.ADMIN,tp.SUPERADMIN])?s=["étudiant","ressources humaines"]:t(tp.STUDENT)&&!n([tp.ADMIN,tp.SUPERADMIN,tp.TEACHER])?s=["formateur","étudiant","recruteur"]:t(tp.HR)&&!n([tp.ADMIN,tp.SUPERADMIN])?s=["étudiant","formateur","recruteur"]:t(tp.GUEST)&&(s=["recruteur"]);try{const e=10;for(const t of s){if(r.length>=e)break;const n=await Wp.getSuggestions(t);if(Array.isArray(n)&&n.length>0){const t=n.filter((e=>!r.some((t=>t.id===e.id))));t.length>0&&(r=[...r,...t],o(r.slice(0,e)))}}if(r.length<e){const t=["a","e","i","o","u"];for(const n of t){if(r.length>=e)break;const t=await Wp.getSuggestions(n);if(Array.isArray(t)&&t.length>0){const n=t.filter((e=>!r.some((t=>t.id===e.id))));n.length>0&&(r=[...r,...n],o(r.slice(0,e)))}}}if(r.length>0){let n=[];t(tp.RECRUITER)?n=["TEACHER","STUDENT"]:t(tp.TEACHER)?n=["STUDENT","HR"]:t(tp.STUDENT)||t(tp.HR)?n=["TEACHER","STUDENT","RECRUITER"]:t(tp.GUEST)&&(n=["RECRUITER"]),n.length>0?(r.sort(((e,t)=>{const r=e.roles&&e.roles.length>0?e.roles[0].replace(/^ROLE_/i,""):"",s=t.roles&&t.roles.length>0?t.roles[0].replace(/^ROLE_/i,""):"",a=n.indexOf(r),i=n.indexOf(s);return-1!==a&&-1!==i?a-i:-1!==a?-1:-1!==i?1:0})),o(r.slice(0,e))):o(r.slice(0,e))}}catch(a){console.error("Error during sequential searches:",a)}finally{p(!1),c(!0)}},updateIsRoleSearch:v}},Kp=({user:t,index:n,activeSuggestion:r,handleSuggestionClick:s,setActiveSuggestion:a})=>e.jsxs(jl.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0,backgroundColor:n===r?"rgba(82, 142, 178, 0.08)":"rgba(0,0,0,0)"},transition:{duration:.2,delay:.03*n},whileHover:{backgroundColor:"rgba(82, 142, 178, 0.08)"},onClick:e=>s(t,e),onMouseEnter:()=>a(n),className:Om("flex items-center px-4 py-3 cursor-pointer transition-all hover:bg-blue-50/50 dark:hover:bg-blue-800/20",n===r?"bg-[rgba(82,142,178,0.08)] dark:bg-[rgba(120,185,221,0.15)]":""),role:"button",tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),s(t,e))},children:[e.jsx(Z,{to:`/profile/${t.id}`,className:"flex-shrink-0 w-10 h-10 rounded-full bg-gradient-to-br from-[#02284f] to-[#528eb2] flex items-center justify-center mr-3 shadow-sm overflow-hidden",onClick:e=>e.stopPropagation(),tabIndex:-1,children:t.profilePictureUrl?e.jsx("img",{src:t.profilePictureUrl,alt:`${t.firstName} ${t.lastName}`,className:"w-full h-full object-cover rounded-full"}):e.jsx(Pc,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs(Z,{to:`/profile/${t.id}`,className:"font-medium text-gray-800 truncate dark:text-white block hover:underline",onClick:e=>e.stopPropagation(),tabIndex:-1,children:[t.firstName," ",t.lastName]}),e.jsx("div",{className:"flex items-center mt-1",children:t.roles&&t.roles.length>0?e.jsxs("span",{className:Om("inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",qp(t.roles[0])),children:[Bp(t.roles[0]),$p(t.roles[0])]}):e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-50 text-gray-700 dark:bg-gray-700 dark:text-gray-300",children:[e.jsx(Pc,{className:"w-3 h-3 mr-1 text-gray-600 dark:text-gray-400"}),"Utilisateur"]})})]}),e.jsx("button",{onClick:e=>s(t,e),className:"ml-2 text-[#528eb2] p-2 rounded-full hover:bg-blue-100 transition-colors dark:text-[#78b9dd] dark:hover:bg-blue-900/30","aria-label":`Voir le profil de ${t.firstName} ${t.lastName}`,children:e.jsx(Tc,{className:"w-4 h-4"})})]},n),Qp=({suggestions:t,isRoleSearch:n,activeSuggestion:r,setActiveSuggestion:s,handleSuggestionClick:a,allowedSearchRoles:i,hasRole:o,hasAnyRole:l,suggestionsRef:c,query:u,containerWidth:d,dropdownPosition:h,handleKeyDown:f})=>e.jsx(jl.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{duration:.2,type:"spring",stiffness:500,damping:30},className:Om("search-dropdown-portal overflow-hidden bg-white rounded-xl shadow-xl border border-gray-100","dark:bg-gray-800 dark:border-gray-700 dark:shadow-gray-900/70","max-h-[300px] md:max-h-[400px]"),style:{boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1)",zIndex:9999,position:"absolute",top:`${h.top}px`,left:`${h.left}px`,width:h.width?`${h.width}px`:d>0?`${d}px`:"100%"},tabIndex:-1,onKeyDown:f,children:0===t.length?e.jsx(Xp,{isRoleSearch:n,hasRole:o,hasAnyRole:l,allowedSearchRoles:i}):e.jsxs("div",{className:"overflow-hidden",children:[e.jsx("div",{className:"px-3 py-2 bg-gray-50 border-b border-gray-100 dark:bg-gray-700 dark:border-gray-600",children:e.jsxs("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-300",children:[t.length," résultat",t.length>1?"s":""," trouvé",t.length>1?"s":"",n&&e.jsxs("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-purple-50 text-purple-700 dark:bg-purple-800/30 dark:text-purple-300",children:[e.jsx(zl,{className:"w-3 h-3 mr-1"}),"Recherche par rôle"]})]})}),e.jsx("div",{ref:c,className:"max-h-[250px] overflow-y-auto py-1 divide-y divide-gray-50 dark:divide-gray-700",children:t.map(((t,n)=>e.jsx(Kp,{user:t,index:n,activeSuggestion:r,handleSuggestionClick:a,setActiveSuggestion:s},t.id||n)))}),(o(tp.SUPERADMIN)||o(tp.RECRUITER)||o(tp.TEACHER)||o(tp.STUDENT)||o(tp.HR)||o(tp.GUEST)||o(tp.ADMIN))&&0===u.length&&e.jsx(Jp,{hasRole:o,hasAnyRole:l,allowedSearchRoles:i})]})}),Xp=({isRoleSearch:t,hasRole:n,hasAnyRole:r,allowedSearchRoles:s})=>e.jsx(jl.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"p-6 text-center",children:e.jsx("div",{className:"flex flex-col items-center justify-center",children:t?e.jsxs(e.Fragment,{children:[e.jsx(zl,{className:"w-10 h-10 text-purple-300 dark:text-purple-400 mb-2"}),e.jsx("p",{className:"text-gray-500 font-medium dark:text-gray-300",children:"Aucun utilisateur trouvé avec ce rôle"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1 dark:text-gray-400",children:n(tp.ADMIN)&&!n(tp.SUPERADMIN)?e.jsxs(e.Fragment,{children:["En tant qu'Admin, vous ne pouvez pas rechercher les ",e.jsx("strong",{children:"super admins"}),". Essayez un autre rôle."]}):n(tp.TEACHER)&&!r([tp.ADMIN,tp.SUPERADMIN])?e.jsxs(e.Fragment,{children:["En tant que Formateur, vous pouvez uniquement rechercher des ",e.jsx("strong",{children:"étudiants"})," et des personnes des ",e.jsx("strong",{children:"ressources humaines"})]}):n(tp.RECRUITER)&&!r([tp.ADMIN,tp.SUPERADMIN,tp.HR,tp.TEACHER])?e.jsxs(e.Fragment,{children:["En tant que Recruteur, vous pouvez uniquement rechercher des ",e.jsx("strong",{children:"étudiants"})," et des ",e.jsx("strong",{children:"formateurs"})]}):n(tp.HR)&&!r([tp.ADMIN,tp.SUPERADMIN])?e.jsxs(e.Fragment,{children:["En tant que RH, vous pouvez uniquement rechercher des ",e.jsx("strong",{children:"étudiants"}),", des ",e.jsx("strong",{children:"formateurs"})," et des ",e.jsx("strong",{children:"recruteurs"})]}):s.length>0?1===s.length?e.jsxs(e.Fragment,{children:["Vous pouvez uniquement rechercher des ",e.jsx("strong",{children:Vp(s[0]).toLowerCase()})]}):e.jsxs(e.Fragment,{children:["Essayez avec un autre rôle : ",s.map((e=>Vp(e).toLowerCase())).join(", ")]}):e.jsx(e.Fragment,{children:"Essayez avec un autre terme de recherche"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(Tc,{className:"w-10 h-10 text-gray-300 dark:text-gray-400 mb-2"}),e.jsx("p",{className:"text-gray-500 font-medium dark:text-gray-300",children:"Aucun utilisateur trouvé"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1 dark:text-gray-400",children:n(tp.ADMIN)&&!n(tp.SUPERADMIN)?e.jsxs(e.Fragment,{children:["Essayez avec un autre terme ou recherchez par rôle (à l'exception des ",e.jsx("strong",{children:"super admins"}),") : ",s.map((e=>Vp(e).toLowerCase())).join(", ")]}):n(tp.TEACHER)&&!r([tp.ADMIN,tp.SUPERADMIN])?e.jsxs(e.Fragment,{children:["Essayez avec un autre terme ou recherchez par rôle : ",e.jsx("strong",{children:"étudiant"})," ou ",e.jsx("strong",{children:"ressources humaines"})]}):n(tp.RECRUITER)&&!r([tp.ADMIN,tp.SUPERADMIN,tp.HR,tp.TEACHER])?e.jsxs(e.Fragment,{children:["Essayez avec un autre terme ou recherchez par rôle : ",e.jsx("strong",{children:"étudiant"})," ou ",e.jsx("strong",{children:"formateur"})]}):n(tp.HR)&&!r([tp.ADMIN,tp.SUPERADMIN])?e.jsxs(e.Fragment,{children:["Essayez avec un autre terme ou recherchez par rôle : ",e.jsx("strong",{children:"étudiant"}),", ",e.jsx("strong",{children:"formateur"})," ou ",e.jsx("strong",{children:"recruteur"})]}):s.length>0?1===s.length?e.jsxs(e.Fragment,{children:["Essayez avec un autre terme ou recherchez par le rôle ",e.jsx("strong",{children:Vp(s[0]).toLowerCase()})]}):e.jsxs(e.Fragment,{children:["Essayez avec un autre terme ou recherchez par rôle : ",s.map((e=>Vp(e).toLowerCase())).join(", ")]}):e.jsx(e.Fragment,{children:"Essayez avec un autre terme de recherche"})})]})})}),Jp=({hasRole:t,hasAnyRole:n,allowedSearchRoles:r})=>e.jsx("div",{className:"px-3 py-2 bg-gray-50 border-t border-gray-100 text-xs text-gray-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300",children:e.jsx("p",{children:t(tp.SUPERADMIN)?e.jsxs(e.Fragment,{children:["En tant que Super Admin, vous pouvez rechercher tous les utilisateurs par nom ou par rôle : ",r.map((e=>"SUPERADMIN"!==e?Vp(e).toLowerCase():null)).filter(Boolean).join(", ")]}):t(tp.ADMIN)?e.jsxs(e.Fragment,{children:["En tant qu'Admin, vous pouvez rechercher tous les utilisateurs par nom ou par rôle, à l'exception des ",e.jsx("strong",{children:"super admins"})," : ",r.map((e=>Vp(e).toLowerCase())).filter(Boolean).join(", ")]}):t(tp.RECRUITER)&&!t(tp.SUPERADMIN)?e.jsxs(e.Fragment,{children:["En tant que Recruteur, vous pouvez uniquement rechercher des ",e.jsx("strong",{children:"étudiants"})," et des ",e.jsx("strong",{children:"formateurs"})," par nom ou par rôle"]}):t(tp.TEACHER)&&!n([tp.ADMIN,tp.SUPERADMIN])?e.jsxs(e.Fragment,{children:["En tant que Formateur, vous pouvez uniquement rechercher des ",e.jsx("strong",{children:"étudiants"})," et des personnes des ",e.jsx("strong",{children:"ressources humaines"})," par nom ou par rôle"]}):t(tp.STUDENT)&&!n([tp.ADMIN,tp.SUPERADMIN,tp.TEACHER])?e.jsxs(e.Fragment,{children:["En tant qu'Étudiant, vous pouvez rechercher des ",e.jsx("strong",{children:"formateurs"}),", ",e.jsx("strong",{children:"étudiants"}),", ",e.jsx("strong",{children:"recruteurs"}),", et ",e.jsx("strong",{children:"ressources humaines"})," par nom ou par rôle"]}):t(tp.HR)&&!n([tp.ADMIN,tp.SUPERADMIN])?e.jsxs(e.Fragment,{children:["En tant que RH, vous pouvez uniquement rechercher des ",e.jsx("strong",{children:"étudiants"}),", des ",e.jsx("strong",{children:"formateurs"})," et des ",e.jsx("strong",{children:"recruteurs"})," par nom ou par rôle"]}):t(tp.GUEST)?e.jsxs(e.Fragment,{children:["En tant qu'Invité, vous pouvez uniquement rechercher des ",e.jsx("strong",{children:"recruteurs"})," par nom ou par rôle"]}):e.jsx(e.Fragment,{children:"Vous pouvez rechercher par nom ou par rôle"})})}),Yp=()=>{const t=Q.useRef(null),n=Q.useRef(null),r=Q.useRef(null),s=Y(),[a,i]=Q.useState(!1),[o,l]=Q.useState(0),[c,u]=Q.useState({top:0,left:0}),{allowedSearchRoles:d,isLoggedIn:h,isRoleSearch:f,checkForRoleSearch:m,hasRole:p,hasAnyRole:g}=Hp(),{query:y,setQuery:v,suggestions:b,setSuggestions:x,showSuggestions:w,setShowSuggestions:E,activeSuggestion:k,setActiveSuggestion:S,isLoading:N,hasSpecialRole:T,handleInputChange:C,clearSearch:R,fetchInitialSuggestions:j}=Gp({isLoggedIn:h,hasRole:p,hasAnyRole:g,checkForRoleSearch:m});Q.useEffect((()=>{const e=()=>{t.current&&l(t.current.offsetWidth)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[w]),Q.useEffect((()=>{const e=e=>{!t.current||t.current.contains(e.target)||e.target.closest(".search-dropdown-portal")||(E(!1),i(!1))};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}),[E]),Q.useEffect((()=>{if(k>=0&&r.current){const e=r.current.children[k];e&&e.scrollIntoView({behavior:"smooth",block:"nearest"})}}),[k]),Q.useEffect((()=>{if(w&&t.current){const e=()=>{const e=t.current.getBoundingClientRect();u({top:e.bottom+window.scrollY+8,left:e.left+window.scrollX,width:e.width})};return e(),window.addEventListener("scroll",e),window.addEventListener("resize",e),()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}}}),[w]);const A=async(e,t)=>{t&&(t.preventDefault(),t.stopPropagation());const r=e.id;if(r)try{Sh.clearPublicProfileCache(r),v(`${e.firstName} ${e.lastName}`),x([]),E(!1),S(-1),n.current&&(n.current.disabled=!0),await s(`/profile/${r}`),n.current&&(n.current.disabled=!1)}catch(a){console.error("Navigation error:",a),window.location.href=`/profile/${r}`}else console.error("No user ID found in suggestion:",e)},_=e=>{"ArrowDown"===e.key?(e.preventDefault(),S((e=>e<b.length-1?e+1:e))):"ArrowUp"===e.key?(e.preventDefault(),S((e=>e>0?e-1:e))):"Enter"===e.key&&k>=0?(e.preventDefault(),b[k]&&A(b[k])):"Escape"===e.key&&(E(!1),n.current.blur())};return e.jsxs("div",{ref:t,className:"relative w-full max-w-md font-sans",style:{isolation:"isolate",position:"relative",zIndex:90},children:[e.jsxs("div",{className:Om("relative flex items-center transition-all duration-300 rounded-full overflow-hidden","w-full",a?"ring-2 ring-[#528eb2]/50 dark:ring-[#78b9dd]/50":"",f?"ring-2 ring-purple-500/50 dark:ring-purple-400/50":"",h?"":"opacity-50"),children:[e.jsx("div",{className:"absolute left-3 text-white/60 dark:text-white/80 z-10",children:f?e.jsx(zl,{className:"w-4 h-4 text-purple-400 dark:text-purple-300"}):e.jsx(Tc,{className:"w-4 h-4"})}),e.jsx("input",{ref:n,className:Om("w-full py-2 pl-10 pr-10 text-sm text-white bg-[#02284f]/80 border border-white/20","dark:bg-gray-800 dark:border-gray-600 dark:text-white","rounded-full transition-all duration-300","placeholder:text-white/50 dark:placeholder:text-white/70 focus:outline-none","md:placeholder:text-sm placeholder:text-xs",a?"bg-[#02284f]/90 dark:bg-gray-700 border-[#528eb2] dark:border-[#78b9dd]":"hover:bg-[#02284f]/90 dark:hover:bg-gray-700",f?"border-purple-500/30 dark:border-purple-400/30":""),type:"text",placeholder:h?"Rechercher par nom ou rôle...":"Connectez-vous pour effectuer une recherche",value:y,onChange:C,onKeyDown:_,onFocus:()=>{h?(i(!0),T()?j():y.length>=1&&fetchSuggestions(y)):n.current.blur()},disabled:!h}),e.jsx(ze,{mode:"wait",children:y.length>0&&e.jsx(jl.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},whileTap:{scale:.9},onClick:()=>{R(),n.current.focus()},className:"absolute right-3 p-1 rounded-full text-white/60 hover:text-white hover:bg-white/10 transition-colors z-10",children:e.jsx(Lc,{className:"w-3 h-3"})})}),N&&e.jsx("div",{className:"absolute right-10 z-10",children:e.jsx("div",{className:"w-3 h-3 border-2 border-t-transparent border-white/30 rounded-full animate-spin"})})]}),a&&0===y.length&&h&&!T()&&!w&&e.jsx("div",{className:"absolute top-full left-0 w-full mt-2 px-3 py-2 text-xs text-white/70 bg-[#02284f]/90 rounded-md dark:bg-gray-800 dark:text-gray-200",children:e.jsx("p",{children:d.length>0?1===d.length?e.jsxs(e.Fragment,{children:["Vous pouvez rechercher des ",e.jsx("strong",{className:"dark:text-white",children:Vp(d[0]).toLowerCase()})," par nom"]}):e.jsxs(e.Fragment,{children:["Vous pouvez rechercher par nom ou par rôle (",e.jsx("span",{className:"dark:text-white",children:d.map((e=>Vp(e).toLowerCase())).join(", ")}),")"]}):e.jsx(e.Fragment,{children:"Vous pouvez rechercher par nom"})})}),!h&&a&&e.jsx("div",{className:"absolute top-full left-0 w-full mt-2 px-3 py-2 text-xs text-white/70 bg-[#02284f]/90 rounded-md dark:bg-gray-800 dark:text-gray-200",children:e.jsx("p",{children:"Vous devez être connecté pour effectuer une recherche."})}),w&&ee.createPortal(e.jsx(ze,{mode:"wait",children:e.jsx(Qp,{suggestions:b,isRoleSearch:f,activeSuggestion:k,setActiveSuggestion:S,handleSuggestionClick:A,allowedSearchRoles:d,hasRole:p,hasAnyRole:g,suggestionsRef:r,query:y,containerWidth:o,dropdownPosition:c,handleKeyDown:_})}),document.body)]})};function Zp({className:t,...n}){return e.jsx("div",{className:Om("animate-pulse rounded-md bg-muted",t),...n})}const eg=new class{constructor(){this.baseApiUrl="https://translation.googleapis.com/language/translate/v2",this.apiKey="AIzaSyBW-7idcfzMg7XM1nudszE_Uo4CMPPyWfU",this.projectId="bigproject-456311",this.translationCache=new Map}getOrigin(){return window.location.origin}getHeaders(){return{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest",Referer:this.getOrigin()}}getCacheKey(e,t,n=null){return`${e}|${t}${n?`|${n}`:""}`}isReactElement(e){return e&&("object"==typeof e&&"$$typeof"in e||"_owner"in e||"_store"in e||"props"in e)}cleanCircularReferences(e){if("object"!=typeof e||null===e)return e;if(this.isReactElement(e))return String(e);if(Array.isArray(e))return e.map((e=>this.cleanCircularReferences(e)));const t={};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const r=e[n];"object"==typeof r&&null!==r?this.isReactElement(r)?t[n]=String(r):t[n]=this.cleanCircularReferences(r):t[n]=r}return t}async translateText(e,t,n=null){try{if(!e)return"";"object"==typeof e&&(e=String(e));const r=this.getCacheKey(e,t,n);if(this.translationCache.has(r))return this.translationCache.get(r);const s=`${this.baseApiUrl}?key=${this.apiKey}`,a={q:e,target:t,format:"text"};n&&(a.source=n);const i=await fetch(s,{method:"POST",headers:this.getHeaders(),body:JSON.stringify(this.cleanCircularReferences(a))});if(!i.ok){const e=await i.json();throw console.error("Erreur de traduction détaillée:",e),new Error(e.error?.message||"Erreur de traduction")}const o=(await i.json()).data.translations[0].translatedText;return this.translationCache.set(r,o),o}catch(r){return console.error("Translation error:",r),e}}async detectLanguage(e){try{if(!e)return"";"object"==typeof e&&(e=String(e));const t=`${this.baseApiUrl}/detect?key=${this.apiKey}`,n=await fetch(t,{method:"POST",headers:this.getHeaders(),body:JSON.stringify(this.cleanCircularReferences({q:e}))});if(!n.ok){const e=await n.json();throw console.error("Erreur de détection détaillée:",e),new Error(e.error?.message||"Erreur de détection de langue")}return(await n.json()).data.detections[0][0].language}catch(t){throw console.error("Language detection error:",t),t}}async getAvailableLanguages(e="fr"){try{const t=`${this.baseApiUrl}/languages?key=${this.apiKey}&target=${e}`,n=await fetch(t,{method:"GET",headers:this.getHeaders()});if(!n.ok){const e=await n.json();throw console.error("Erreur de récupération des langues détaillée:",e),new Error(e.error?.message||"Erreur lors de la récupération des langues")}return(await n.json()).data.languages}catch(t){throw console.error("Error fetching languages:",t),t}}clearCache(){this.translationCache.clear()}},tg=Q.createContext(),ng="preferred_language";function rg({children:t}){const[n,r]=Q.useState((()=>localStorage.getItem(ng)||"fr")),[s,a]=Q.useState(!1);Q.useEffect((()=>{const e=localStorage.getItem(ng);e&&e!==n&&r(e)}),[]);const i={currentLanguage:n,changeLanguage:async e=>{try{a(!0),localStorage.setItem(ng,e),Lh.loading("Changement de langue en cours..."),setTimeout((()=>{window.location.reload()}),500)}catch(t){console.error("Error changing language:",t),Lh.error("Erreur lors du changement de langue")}},translate:async(e,t=n)=>{if(!e)return"";try{return await eg.translateText(e,t)}catch(r){return console.error("Translation error:",r),e}},loading:s};return e.jsx(tg.Provider,{value:i,children:t})}function sg(){const e=Q.useContext(tg);if(!e)throw new Error("useTranslation must be used within a TranslationProvider");return e}const ag=[{code:"fr",name:"Français"},{code:"en",name:"English"},{code:"es",name:"Español"},{code:"de",name:"Deutsch"},{code:"it",name:"Italiano"}],ig=()=>{const{currentLanguage:t,changeLanguage:n}=sg();return e.jsx("div",{className:"language-selector-wrapper",children:e.jsxs(zm,{children:[e.jsx(Vm,{asChild:!0,children:e.jsx(Fm,{variant:"ghost",size:"icon",className:"rounded-full w-10 h-10 p-0 bg-transparent text-gray-200 hover:bg-[#02284f]/80 hover:text-white",children:e.jsx(lc,{className:"h-5 w-5"})})}),e.jsx(Bm,{align:"end",className:"w-[160px] z-[101]",children:ag.map((r=>e.jsxs(qm,{className:"navbar-dropdown-item "+(t===r.code?"bg-[#528eb2]/10":""),onClick:()=>n(r.code),children:[e.jsx("span",{className:"mr-2",children:r.code.toUpperCase()}),r.name]},r.code)))})]})})};var og={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296==(64512&s)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},cg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],a=s+1<e.length,i=a?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,u=(3&t)<<4|i>>4;let d=(15&i)<<2|l>>6,h=63&l;o||(h=64,a||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(lg(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&a)}else if(s>239&&s<365){const a=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{const a=e[n++],i=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&a)<<6|63&i)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],a=s<e.length?n[e.charAt(s)]:0;++s;const i=s<e.length?n[e.charAt(s)]:64;++s;const o=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==a||null==i||null==o)throw new ug;const l=t<<2|a>>4;if(r.push(l),64!==i){const e=a<<4&240|i>>2;if(r.push(e),64!==o){const e=i<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ug extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dg=function(e){return function(e){const t=lg(e);return cg.encodeByteArray(t,!0)}(e).replace(/\./g,"")};
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const hg=()=>
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,fg=()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&function(e){try{return cg.decodeString(e,!0)}catch(n){console.error("base64Decode failed: ",n)}return null}(e[1]);return t&&JSON.parse(t)},mg=()=>{try{return hg()||(()=>{if("undefined"==typeof process)return;const e=og.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||fg()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},pg=e=>{const t=(e=>{var t,n;return null===(n=null===(t=mg())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},gg=()=>{var e;return null===(e=mg())||void 0===e?void 0:e.config};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class yg{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(){return!function(){var e;const t=null===(e=mg())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(n){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}class bg extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,bg.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xg.prototype.create)}}class xg{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],a=s?function(e,t){return e.replace(wg,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(s,n):"Error",i=`${this.serviceName}: ${a} (${r}).`;return new bg(r,i,n)}}const wg=/\{\$([^}]+)}/g;function Eg(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],a=t[s];if(kg(n)&&kg(a)){if(!Eg(n,a))return!1}else if(n!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function kg(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(e){return e&&e._delegate?e._delegate:e}class Ng{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new yg;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService({instanceIdentifier:Tg})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(e=Tg){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=Tg){return this.instances.has(e)}getOptions(e=Tg){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,a]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&a.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===Tg?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(s){}var r;return n||null}normalizeInstanceIdentifier(e=Tg){return this.component?this.component.multipleInstances?e:Tg:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Rg{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Cg(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jg;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(jg||(jg={}));const Ag={debug:jg.DEBUG,verbose:jg.VERBOSE,info:jg.INFO,warn:jg.WARN,error:jg.ERROR,silent:jg.SILENT},_g=jg.INFO,Dg={[jg.DEBUG]:"log",[jg.VERBOSE]:"log",[jg.INFO]:"info",[jg.WARN]:"warn",[jg.ERROR]:"error"},Ig=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),s=Dg[t];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[s](`[${r}]  ${e.name}:`,...n)};class Pg{constructor(e){this.name=e,this._logLevel=_g,this._logHandler=Ig,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in jg))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?Ag[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,jg.DEBUG,...e),this._logHandler(this,jg.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,jg.VERBOSE,...e),this._logHandler(this,jg.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,jg.INFO,...e),this._logHandler(this,jg.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,jg.WARN,...e),this._logHandler(this,jg.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,jg.ERROR,...e),this._logHandler(this,jg.ERROR,...e)}}let Mg,Lg;const Og=new WeakMap,Ug=new WeakMap,Fg=new WeakMap,zg=new WeakMap,Vg=new WeakMap;let Bg={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ug.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Fg.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hg(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function qg(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Lg||(Lg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Wg(this),t),Hg(Og.get(this))}:function(...t){return Hg(e.apply(Wg(this),t))}:function(t,...n){const r=e.call(Wg(this),t,...n);return Fg.set(r,t.sort?t.sort():[t]),Hg(r)}}function $g(e){return"function"==typeof e?qg(e):(e instanceof IDBTransaction&&function(e){if(Ug.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{t(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)}));Ug.set(e,t)}(e),t=e,(Mg||(Mg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,Bg):e);var t}function Hg(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{t(Hg(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",a)}));return t.then((t=>{t instanceof IDBCursor&&Og.set(t,e)})).catch((()=>{})),Vg.set(t,e),t}(e);if(zg.has(e))return zg.get(e);const t=$g(e);return t!==e&&(zg.set(e,t),Vg.set(t,e)),t}const Wg=e=>Vg.get(e);const Gg=["get","getKey","getAll","getAllKeys","count"],Kg=["put","add","delete","clear"],Qg=new Map;function Xg(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Qg.get(t))return Qg.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=Kg.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!Gg.includes(n))return;const a=async function(e,...t){const a=this.transaction(e,s?"readwrite":"readonly");let i=a.store;return r&&(i=i.index(t.shift())),(await Promise.all([i[n](...t),s&&a.done]))[0]};return Qg.set(t,a),a}Bg=(e=>({...e,get:(t,n,r)=>Xg(t,n)||e.get(t,n,r),has:(t,n)=>!!Xg(t,n)||e.has(t,n)}))(Bg);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Jg{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const Yg="@firebase/app",Zg="0.11.5",ey=new Pg("@firebase/app"),ty="@firebase/app-compat",ny="@firebase/analytics-compat",ry="@firebase/analytics",sy="@firebase/app-check-compat",ay="@firebase/app-check",iy="@firebase/auth",oy="@firebase/auth-compat",ly="@firebase/database",cy="@firebase/data-connect",uy="@firebase/database-compat",dy="@firebase/functions",hy="@firebase/functions-compat",fy="@firebase/installations",my="@firebase/installations-compat",py="@firebase/messaging",gy="@firebase/messaging-compat",yy="@firebase/performance",vy="@firebase/performance-compat",by="@firebase/remote-config",xy="@firebase/remote-config-compat",wy="@firebase/storage",Ey="@firebase/storage-compat",ky="@firebase/firestore",Sy="@firebase/vertexai",Ny="@firebase/firestore-compat",Ty="firebase",Cy="[DEFAULT]",Ry={[Yg]:"fire-core",[ty]:"fire-core-compat",[ry]:"fire-analytics",[ny]:"fire-analytics-compat",[ay]:"fire-app-check",[sy]:"fire-app-check-compat",[iy]:"fire-auth",[oy]:"fire-auth-compat",[ly]:"fire-rtdb",[cy]:"fire-data-connect",[uy]:"fire-rtdb-compat",[dy]:"fire-fn",[hy]:"fire-fn-compat",[fy]:"fire-iid",[my]:"fire-iid-compat",[py]:"fire-fcm",[gy]:"fire-fcm-compat",[yy]:"fire-perf",[vy]:"fire-perf-compat",[by]:"fire-rc",[xy]:"fire-rc-compat",[wy]:"fire-gcs",[Ey]:"fire-gcs-compat",[ky]:"fire-fst",[Ny]:"fire-fst-compat",[Sy]:"fire-vertex","fire-js":"fire-js",[Ty]:"fire-js-all"},jy=new Map,Ay=new Map,_y=new Map;function Dy(e,t){try{e.container.addComponent(t)}catch(n){ey.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Iy(e){const t=e.name;if(_y.has(t))return ey.debug(`There were multiple attempts to register component ${t}.`),!1;_y.set(t,e);for(const n of jy.values())Dy(n,e);for(const n of Ay.values())Dy(n,e);return!0}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Py=new xg("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class My{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ng("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Py.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(e,t={}){let n=e;if("object"!=typeof t){t={name:t}}const r=Object.assign({name:Cy,automaticDataCollectionEnabled:!1},t),s=r.name;if("string"!=typeof s||!s)throw Py.create("bad-app-name",{appName:String(s)});if(n||(n=gg()),!n)throw Py.create("no-options");const a=jy.get(s);if(a){if(Eg(n,a.options)&&Eg(r,a.config))return a;throw Py.create("duplicate-app",{appName:s})}const i=new Rg(s);for(const l of _y.values())i.addComponent(l);const o=new My(n,r,i);return jy.set(s,o),o}function Oy(e,t,n){var r;let s=null!==(r=Ry[e])&&void 0!==r?r:e;n&&(s+=`-${n}`);const a=s.match(/\s|\//),i=t.match(/\s|\//);if(a||i){const e=[`Unable to register library "${s}" with version "${t}":`];return a&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&i&&e.push("and"),i&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void ey.warn(e.join(" "))}Iy(new Ng(`${s}-version`,(()=>({library:s,version:t})),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy="firebase-heartbeat-store";let Fy=null;function zy(){return Fy||(Fy=function(e,t,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const i=indexedDB.open(e,t),o=Hg(i);return r&&i.addEventListener("upgradeneeded",(e=>{r(Hg(i.result),e.oldVersion,e.newVersion,Hg(i.transaction),e)})),n&&i.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{a&&e.addEventListener("close",(()=>a())),s&&e.addEventListener("versionchange",(e=>s(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Uy)}catch(n){console.warn(n)}}}).catch((e=>{throw Py.create("idb-open",{originalErrorMessage:e.message})}))),Fy}async function Vy(e,t){try{const n=(await zy()).transaction(Uy,"readwrite"),r=n.objectStore(Uy);await r.put(t,By(e)),await n.done}catch(n){if(n instanceof bg)ey.warn(n.message);else{const e=Py.create("idb-set",{originalErrorMessage:null==n?void 0:n.message});ey.warn(e.message)}}}function By(e){return`${e.name}!${e.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Hy(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=$y();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){ey.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=$y(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const s of e){const e=n.find((e=>e.agent===s.agent));if(e){if(e.dates.push(s.date),Wy(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Wy(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=dg(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return ey.warn(t),""}}}function $y(){return(new Date).toISOString().substring(0,10)}class Hy{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(e){return!1}}()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await zy()).transaction(Uy),n=await t.objectStore(Uy).get(By(e));return await t.done,n}catch(t){if(t instanceof bg)ey.warn(t.message);else{const e=Py.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});ey.warn(e.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Vy(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Vy(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Wy(e){return dg(JSON.stringify({version:2,heartbeats:e})).length}var Gy;Gy="",Iy(new Ng("platform-logger",(e=>new Jg(e)),"PRIVATE")),Iy(new Ng("heartbeat",(e=>new qy(e)),"PRIVATE")),Oy(Yg,Zg,Gy),Oy(Yg,Zg,"esm2017"),Oy("fire-js","");var Ky,Qy,Xy="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var e;
/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var a=e.g[3],i=t+(a^n&(s^a))+r[0]+3614090360&4294967295;i=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=(n=(s=(a=(t=n+(i<<7&4294967295|i>>>25))+((i=a+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|i>>>20))+((i=s+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^s&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|i>>>10))+((i=t+(a^n&(s^a))+r[4]+4118548399&4294967295)<<7&4294967295|i>>>25))+((i=a+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|i>>>20))+((i=s+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^s&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|i>>>10))+((i=t+(a^n&(s^a))+r[8]+1770035416&4294967295)<<7&4294967295|i>>>25))+((i=a+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|i>>>20))+((i=s+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^s&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|i>>>10))+((i=t+(a^n&(s^a))+r[12]+1804603682&4294967295)<<7&4294967295|i>>>25))+((i=a+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|i>>>20))+((i=s+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|i>>>15))+((i=n+(t^s&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|i>>>10))+((i=t+(s^a&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|i>>>27))+((i=a+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|i>>>23))+((i=s+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|i>>>18))+((i=n+(a^t&(s^a))+r[0]+3921069994&4294967295)<<20&4294967295|i>>>12))+((i=t+(s^a&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|i>>>27))+((i=a+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|i>>>23))+((i=s+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|i>>>18))+((i=n+(a^t&(s^a))+r[4]+3889429448&4294967295)<<20&4294967295|i>>>12))+((i=t+(s^a&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|i>>>27))+((i=a+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|i>>>23))+((i=s+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|i>>>18))+((i=n+(a^t&(s^a))+r[8]+1163531501&4294967295)<<20&4294967295|i>>>12))+((i=t+(s^a&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|i>>>27))+((i=a+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|i>>>23))+((i=s+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|i>>>18))+((i=n+(a^t&(s^a))+r[12]+2368359562&4294967295)<<20&4294967295|i>>>12))+((i=t+(n^s^a)+r[5]+4294588738&4294967295)<<4&4294967295|i>>>28))+((i=a+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|i>>>21))+((i=s+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|i>>>16))+((i=n+(s^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|i>>>9))+((i=t+(n^s^a)+r[1]+2763975236&4294967295)<<4&4294967295|i>>>28))+((i=a+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|i>>>21))+((i=s+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|i>>>16))+((i=n+(s^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|i>>>9))+((i=t+(n^s^a)+r[13]+681279174&4294967295)<<4&4294967295|i>>>28))+((i=a+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|i>>>21))+((i=s+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|i>>>16))+((i=n+(s^a^t)+r[6]+76029189&4294967295)<<23&4294967295|i>>>9))+((i=t+(n^s^a)+r[9]+3654602809&4294967295)<<4&4294967295|i>>>28))+((i=a+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|i>>>21))+((i=s+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|i>>>16))+((i=n+(s^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|i>>>9))+((i=t+(s^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|i>>>26))+((i=a+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|i>>>22))+((i=s+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|i>>>17))+((i=n+(a^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|i>>>11))+((i=t+(s^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|i>>>26))+((i=a+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|i>>>22))+((i=s+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|i>>>17))+((i=n+(a^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|i>>>11))+((i=t+(s^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|i>>>26))+((i=a+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|i>>>22))+((i=s+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|i>>>17))+((i=n+(a^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|i>>>11))+((a=(t=n+((i=t+(s^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|i>>>26))+((i=a+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|i>>>22))^((s=a+((i=s+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|i>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(i<<21&4294967295|i>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+a&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var a=0|e[s];r&&a==t||(n[s]=a,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return t.prototype[n].apply(e,s)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,a=this.h,i=0;i<t;){if(0==a)for(;i<=r;)n(this,e,i),i+=this.blockSize;if("string"==typeof e){for(;i<t;)if(s[a++]=e.charCodeAt(i++),a==this.blockSize){n(this,s),a=0;break}}else for(;i<t;)if(s[a++]=e[i++],a==this.blockSize){n(this,s),a=0;break}}this.h=a,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var s={};function a(e){return-128<=e&&128>e?function(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function i(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(i(-e));for(var t=[],n=1,s=0;e>=n;s++)t[s]=e/n|0,n*=4294967296;return new r(t,0)}var o=a(0),l=a(1),c=a(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],s=0;s<t;s++)n[s]=~e.g[s];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function m(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function p(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new p(o,o);if(d(e))return t=g(h(e),t),new p(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new p(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var s=v(n,1),a=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=a.add(r);0>=c.l(e)&&(s=s.add(n),a=c),r=v(r,1),n=v(n,1)}return t=f(e,s.j(t)),new p(s,t)}for(s=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(a=i(n)).j(t);d(c)||0<c.l(e);)c=(a=i(n-=r)).j(t);u(a)&&(a=l),s=s.add(a),e=f(e,c)}return new p(s,e)}function y(e){for(var t=e.g.length+1,n=[],s=0;s<t;s++)n[s]=e.i(s)<<1|e.i(s-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var s=e.g.length-n,a=[],i=0;i<s;i++)a[i]=0<t?e.i(i+n)>>>t|e.i(i+n+1)<<32-t:e.i(i+n);return new r(a,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=i(Math.pow(e,6)),n=this,r="";;){var s=g(n,t).g,a=((0<(n=f(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=s))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0,a=0;a<=t;a++){var i=s+(65535&this.i(a))+(65535&e.i(a)),o=(i>>>16)+(this.i(a)>>>16)+(e.i(a)>>>16);s=o>>>16,i&=65535,o&=65535,n[a]=o<<16|i}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return i(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var a=0;a<e.g.length;a++){var l=this.i(s)>>>16,f=65535&this.i(s),p=e.i(a)>>>16,g=65535&e.i(a);n[2*s+2*a]+=f*g,m(n,2*s+2*a),n[2*s+2*a+1]+=l*g,m(n,2*s+2*a+1),n[2*s+2*a+1]+=f*p,m(n,2*s+2*a+1),n[2*s+2*a+2]+=l*p,m(n,2*s+2*a+2)}for(s=0;s<t;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=t;s<2*t;s++)n[s]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)&e.i(s);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)|e.i(s);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)^e.i(s);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Qy=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=i,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=i(Math.pow(n,8)),s=o,a=0;a<t.length;a+=8){var l=Math.min(8,t.length-a),c=parseInt(t.substring(a,a+l),n);8>l?(l=i(Math.pow(n,l)),s=s.j(l).add(i(c))):s=(s=s.j(r)).add(i(c))}return s},Ky=r}).apply(void 0!==Xy?Xy:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Jy,Yy,Zy,ev,tv,nv,rv,sv,av="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof av&&av];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var a=0;a<e.length-1;a++){var i=e[a];if(!(i in s))break e;s=s[i]}(r=r(a=s[e=e[e.length-1]]))!=a&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,(function(e,t){return t}))}}));
/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
var r=r||{},s=this||self;function a(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function i(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return t.prototype[n].apply(e,s)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(a(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function m(e){return/^[\s\xa0]*$/.test(e)}function p(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=!(-1==p().indexOf("Gecko")||-1!=p().toLowerCase().indexOf("webkit")&&-1==p().indexOf("Edge")||-1!=p().indexOf("Trident")||-1!=p().indexOf("MSIE")||-1!=p().indexOf("Edge"));function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<x.length;t++)n=x[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function E(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function k(e){s.setTimeout((()=>{throw e}),0)}function S(){var e=j;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var N=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new T),(e=>e.reset()));class T{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,R=!1,j=new class{constructor(){this.h=this.g=null}add(e,t){const n=N.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},A=()=>{const e=s.Promise.resolve(void 0);C=()=>{e.then(_)}};var _=()=>{for(var e;e=S();){try{e.h.call(e.g)}catch(n){k(n)}var t=N;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}R=!1};function D(){this.s=this.s,this.C=this.C}function I(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}D.prototype.s=!1,D.prototype.ma=function(){this.s||(this.s=!0,this.N())},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},I.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function M(e,t){if(I.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var s=!0;break e}catch(a){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&M.aa.h.call(this)}}d(M,I);var L={2:"touch",3:"pen",4:"mouse"};M.prototype.h=function(){M.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var O="closure_listenable_"+(1e6*Math.random()|0),U=0;function F(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++U,this.da=this.fa=!1}function z(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function V(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],a=Array.prototype.indexOf.call(s,t,void 0);(r=0<=a)&&Array.prototype.splice.call(s,a,1),r&&(z(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function q(e,t,n,r){for(var s=0;s<e.length;++s){var a=e[s];if(!a.da&&a.listener==t&&a.capture==!!n&&a.ha==r)return s}return-1}V.prototype.add=function(e,t,n,r,s){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var i=q(e,t,r,s);return-1<i?(t=e[i],n||(t.fa=!1)):((t=new F(t,this.src,a,!!r,s)).fa=n,e.push(t)),t};var $="closure_lm_"+(1e6*Math.random()|0),H={};function W(e,t,n,r,s){if(Array.isArray(t)){for(var a=0;a<t.length;a++)W(e,t[a],n,r,s);return null}return n=Z(n),e&&e[O]?e.K(t,n,!!i(r)&&!!r.capture,s):function(e,t,n,r,s,a){if(!t)throw Error("Invalid event type");var o=i(s)?!!s.capture:!!s,l=J(e);if(l||(e[$]=l=new V(e)),n=l.add(t,n,r,o,a),n.proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=X;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)P||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(Q(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}(e,t,n,!1,r,s)}function G(e,t,n,r,s){if(Array.isArray(t))for(var a=0;a<t.length;a++)G(e,t[a],n,r,s);else r=i(r)?!!r.capture:!!r,n=Z(n),e&&e[O]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=q(a=e.g[t],n,r,s))&&(z(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=J(e))&&(t=e.g[t.toString()],e=-1,t&&(e=q(t,n,r,s)),(n=-1<e?t[e]:null)&&K(n))}function K(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[O])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Q(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=J(t))?(B(n,e),0==n.h&&(n.src=null,t[$]=null)):z(e)}}}function Q(e){return e in H?H[e]:H[e]="on"+e}function X(e,t){if(e.da)e=!0;else{t=new M(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&K(e),e=n.call(r,t)}return e}function J(e){return(e=e[$])instanceof V?e:null}var Y="__closure_events_fn_"+(1e9*Math.random()>>>0);function Z(e){return"function"==typeof e?e:(e[Y]||(e[Y]=function(t){return e.handleEvent(t)}),e[Y])}function ee(){D.call(this),this.i=new V(this),this.M=this,this.F=null}function te(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"==typeof t)t=new I(t,e);else if(t instanceof I)t.target=t.target||e;else{var s=t;w(t=new I(r,e),s)}if(s=!0,n)for(var a=n.length-1;0<=a;a--){var i=t.g=n[a];s=ne(i,r,!0,t)&&s}if(s=ne(i=t.g=e,r,!0,t)&&s,s=ne(i,r,!1,t)&&s,n)for(a=0;a<n.length;a++)s=ne(i=t.g=n[a],r,!1,t)&&s}function ne(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,a=0;a<t.length;++a){var i=t[a];if(i&&!i.da&&i.capture==n){var o=i.listener,l=i.ha||i.src;i.fa&&B(e.i,i),s=!1!==o.call(l,r)&&s}}return s&&!r.defaultPrevented}function re(e,t,n){if("function"==typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function se(e){e.g=re((()=>{e.g=null,e.i&&(e.i=!1,se(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ee,D),ee.prototype[O]=!0,ee.prototype.removeEventListener=function(e,t,n,r){G(this,e,t,n,r)},ee.prototype.N=function(){if(ee.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)z(n[r]);delete t.g[e],t.h--}}this.F=null},ee.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ee.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends D{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:se(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ie(e){D.call(this),this.h=e,this.g={}}d(ie,D);var oe=[];function le(e){v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&K(e)}),e),e.g={}}ie.prototype.N=function(){ie.aa.N.call(this),le(this)},ie.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ce=s.JSON.stringify,ue=s.JSON.parse,de=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function he(){}function fe(e){return e.h||(e.h=e.i())}function me(){}he.prototype.h=null;var pe={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ge(){I.call(this,"d")}function ye(){I.call(this,"c")}d(ge,I),d(ye,I);var ve={},be=null;function xe(){return be=be||new ee}function we(e){I.call(this,ve.La,e)}function Ee(e){const t=xe();te(t,new we(t))}function ke(e,t){I.call(this,ve.STAT_EVENT,e),this.stat=t}function Se(e){const t=xe();te(t,new ke(t,e))}function Ne(e,t){I.call(this,ve.Ma,e),this.size=t}function Te(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout((function(){e()}),t)}function Ce(){this.g=!0}function Re(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var a=s[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var i=1;i<s.length;i++)s[i]=""}}}return ce(n)}catch(o){return t}}(e,n)+(r?" "+r:"")}))}ve.La="serverreachability",d(we,I),ve.STAT_EVENT="statevent",d(ke,I),ve.Ma="timingevent",d(Ne,I),Ce.prototype.xa=function(){this.g=!1},Ce.prototype.info=function(){};var je,Ae={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_e={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function De(){}function Ie(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new ie(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pe}function Pe(){this.i=null,this.g="",this.h=!1}d(De,he),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},je=new De;var Me={},Le={};function Oe(e,t,n){e.L=1,e.v=ct(st(t)),e.m=n,e.P=!0,Ue(e,null)}function Ue(e,t){e.F=Date.now(),Ve(e),e.A=st(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),kt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Pe,e.g=dn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(oe[0]=s.toString()),s=oe);for(var a=0;a<s.length;a++){var i=W(n,s[a],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ee(),function(e,t,n,r,s,a){e.info((function(){if(e.g)if(a)for(var i="",o=a.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");i=2<=d.length&&"type"==d[1]?i+(u+"=")+c+"&":i+(u+"=redacted&")}}else i=null;else i=a;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+i}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Fe(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function ze(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Le:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Le:(t=t.slice(r,r+n),e.C=r+n,t))}function Ve(e){e.S=Date.now()+e.I,Be(e,e.I)}function Be(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Te(c(e.ba,e),t)}function qe(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function $e(e){0==e.j.G||e.J||an(e.j,e)}function He(e){qe(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,le(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function We(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Je(n.h,e)))if(!e.K&&Je(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;sn(n),Kt(n)}tn(n),Se(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=Te(c(n.Za,n),6e3));if(1>=Xe(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else ln(n,11)}else if((e.K||n.g==e)&&sn(n),!m(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=c[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var a=r.h;a.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(Ye(a,a.h),a.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,lt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var i=e;if((r=n).qa=un(r,r.J?r.ia:null,r.W),i.K){Ze(r.h,i);var o=i,l=r.L;l&&(o.I=l),o.B&&(qe(o),Ve(o)),r.g=i}else en(r);0<n.i.length&&Xt(n)}else"stop"!=c[0]&&"close"!=c[0]||ln(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?ln(n,7):Gt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ee()}catch(u){}}Ie.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==qt(e)?t.j():this.Y(e)},Ie.prototype.Y=function(e){try{if(e==this.g)e:{const h=qt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||$t(this.g)))){this.J||4!=h||7==t||Ee(),qe(this);var n=this.g.Z();this.X=n;t:if(Fe(this)){var r=$t(this.g);e="";var a=r.length,i=4==qt(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){He(this),$e(this);var o="";break t}this.h.i=new s.TextDecoder}for(t=0;t<a;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(i&&t==a-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,a,i){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+a+" "+i}))}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!m(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Se(12),He(this),$e(this);break e}Re(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,We(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=ze(this,o),e==Le){4==h&&(this.s=4,Se(14),n=!1),Re(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,Se(15),Re(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Re(this.i,this.l,e,null),We(this,e)}if(Fe(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,Se(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),nn(d),d.M=!0,Se(11))}}else Re(this.i,this.l,o,"[Invalid Chunked Response]"),He(this),$e(this)}else Re(this.i,this.l,o,null),We(this,o);4==h&&He(this),this.o&&!this.J&&(4==h?an(this.j,this):(this.o=!1,Ve(this)))}else(function(e){const t={};e=(e.g&&2<=qt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(m(e[r]))continue;var n=E(e[r]);const s=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const a=t[s]||[];t[s]=a,a.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Se(12)):(this.s=0,Se(13)),He(this),$e(this)}}}catch(h){}},Ie.prototype.cancel=function(){this.J=!0,He(this)},Ie.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Ee(),Se(17)),He(this),this.s=2,$e(this)):Be(this,this.S-e)};var Ge=class{constructor(e,t){this.g=e,this.map=t}};function Ke(e){this.l=e||10,s.PerformanceNavigationTiming?e=0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Xe(e){return e.h?1:e.g?e.g.size:0}function Je(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ye(e,t){e.g?e.g.add(t):e.h=t}function Ze(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function et(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function tt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(a(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(a(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(a(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,i=0;i<s;i++)t.call(void 0,r[i],n&&n[i],e)}Ke.prototype.cancel=function(){if(this.i=et(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var nt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof rt){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,it(this,e.s),this.l=e.l;var t=e.i,n=new bt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ot(this,n),this.m=e.m}else e&&(t=String(e).match(nt))?(this.h=!1,at(this,t[1]||"",!0),this.o=ut(t[2]||""),this.g=ut(t[3]||"",!0),it(this,t[4]),this.l=ut(t[5]||"",!0),ot(this,t[6]||"",!0),this.m=ut(t[7]||"")):(this.h=!1,this.i=new bt(null,this.h))}function st(e){return new rt(e)}function at(e,t,n){e.j=n?ut(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function it(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ot(e,t,n){t instanceof bt?(e.i=t,function(e,t){t&&!e.j&&(xt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(wt(this,t),kt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=dt(t,yt)),e.i=new bt(t,e.h))}function lt(e,t,n){e.i.set(t,n)}function ct(e){return lt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ut(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function dt(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,ht),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ht(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}rt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(dt(t,mt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(dt(t,mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(dt(n,"/"==n.charAt(0)?gt:pt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",dt(n,vt)),e.join("")};var ft,mt=/[#\/\?@]/g,pt=/[#\?:]/g,gt=/[#\?]/g,yt=/[#\?@]/g,vt=/#/g;function bt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function xt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var a=e[n].substring(0,r);s=e[n].substring(r+1)}else a=e[n];t(a,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function wt(e,t){xt(e),t=St(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Et(e,t){return xt(e),t=St(e,t),e.g.has(t)}function kt(e,t,n){wt(e,t),0<n.length&&(e.i=null,e.g.set(St(e,t),h(n)),e.h+=n.length)}function St(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Nt(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(a){}}function Tt(){this.g=new de}function Ct(e,t,n){const r=n||"";try{tt(e,(function(e,n){let s=e;i(e)&&(s=ce(e)),t.push(r+n+"="+encodeURIComponent(s))}))}catch(s){throw t.push(r+"type="+encodeURIComponent("_badmap")),s}}function Rt(e){this.l=e.Ub||null,this.j=e.eb||!1}function jt(e,t){ee.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function At(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function _t(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Dt(e)}function Dt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function It(e){let t="";return v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Pt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=It(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):lt(e,t,n))}function Mt(e){ee.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=bt.prototype).add=function(e,t){xt(this),this.i=null,e=St(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){xt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){xt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){xt(this);let t=[];if("string"==typeof e)Et(this,e)&&(t=t.concat(this.g.get(St(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return xt(this),this.i=null,Et(this,e=St(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const a=encodeURIComponent(String(r)),i=this.V(r);for(r=0;r<i.length;r++){var s=a;""!==i[r]&&(s+="="+encodeURIComponent(String(i[r]))),e.push(s)}}return this.i=e.join("&")},d(Rt,he),Rt.prototype.g=function(){return new jt(this.l,this.j)},Rt.prototype.i=(ft={},function(){return ft}),d(jt,ee),(e=jt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Dt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,_t(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Dt(this)),this.g&&(this.readyState=3,Dt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;At(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?_t(this):Dt(this),3==this.readyState&&At(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,_t(this))},e.Qa=function(e){this.g&&(this.response=e,_t(this))},e.ga=function(){this.g&&_t(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(jt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Mt,ee);var Lt=/^https?$/i,Ot=["POST","PUT"];function Ut(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Ft(e),Vt(e)}function Ft(e){e.A||(e.A=!0,te(e,"complete"),te(e,"error"))}function zt(e){if(e.h&&void 0!==r&&(!e.v[1]||4!=qt(e)||2!=e.Z()))if(e.u&&4==qt(e))re(e.Ea,0,e);else if(te(e,"readystatechange"),4==qt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var a;if(a=0===r){var i=String(e.D).match(nt)[1]||null;!i&&s.self&&s.self.location&&(i=s.self.location.protocol.slice(0,-1)),a=!Lt.test(i?i.toLowerCase():"")}n=a}if(n)te(e,"complete"),te(e,"success");else{e.m=6;try{var o=2<qt(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Ft(e)}}finally{Vt(e)}}}function Vt(e,t){if(e.g){Bt(e);const r=e.g,s=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||te(e,"ready");try{r.onreadystatechange=s}catch(n){}}}function Bt(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function qt(e){return e.g?e.g.readyState:0}function $t(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Ht(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Wt(e){this.Aa=0,this.i=[],this.j=new Ce,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ht("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ht("baseRetryDelayMs",5e3,e),this.cb=Ht("retryDelaySeedMs",1e4,e),this.Wa=Ht("forwardChannelMaxRetries",2,e),this.wa=Ht("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ke(e&&e.concurrentRequestLimit),this.Da=new Tt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Gt(e){if(Qt(e),3==e.G){var t=e.U++,n=st(e.I);if(lt(n,"SID",e.K),lt(n,"RID",t),lt(n,"TYPE","terminate"),Yt(e,n),(t=new Ie(e,e.j,t)).L=2,t.v=ct(st(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=dn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Ve(t)}cn(e)}function Kt(e){e.g&&(nn(e),e.g.cancel(),e.g=null)}function Qt(e){Kt(e),e.u&&(s.clearTimeout(e.u),e.u=null),sn(e),e.h.cancel(),e.s&&("number"==typeof e.s&&s.clearTimeout(e.s),e.s=null)}function Xt(e){if(!Qe(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||A(),R||(C(),R=!0),j.add(t,e),e.B=0}}function Jt(e,t){var n;n=t?t.l:e.U++;const r=st(e.I);lt(r,"SID",e.K),lt(r,"RID",n),lt(r,"AID",e.T),Yt(e,r),e.m&&e.o&&Pt(r,e.m,e.o),n=new Ie(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=Zt(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),Ye(e.h,n),Oe(n,r,t)}function Yt(e,t){e.H&&v(e.H,(function(e,n){lt(t,n,e)})),e.l&&tt({},(function(e,n){lt(t,n,e)}))}function Zt(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let i=!0;for(let o=0;o<n;o++){let n=s[o].g;const l=s[o].map;if(n-=t,0>n)t=Math.max(0,s[o].g-100),i=!1;else try{Ct(l,e,"req"+n+"_")}catch(a){r&&r(l)}}if(i){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function en(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||A(),R||(C(),R=!0),j.add(t,e),e.v=0}}function tn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Te(c(e.Fa,e),on(e,e.v)),e.v++,!0)}function nn(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function rn(e){e.g=new Ie(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=st(e.qa);lt(t,"RID","rpc"),lt(t,"SID",e.K),lt(t,"AID",e.T),lt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&lt(t,"TO",e.ja),lt(t,"TYPE","xmlhttp"),Yt(e,t),e.m&&e.o&&Pt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ct(st(t)),n.m=null,n.P=!0,Ue(n,e)}function sn(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function an(e,t){var n=null;if(e.g==t){sn(e),nn(e),e.g=null;var r=2}else{if(!Je(e.h,t))return;n=t.D,Ze(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;te(r=xe(),new Ne(r,n)),Xt(e)}else en(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!(Xe(e.h)>=e.h.j-(e.s?1:0)||(e.s?(e.i=t.D.concat(e.i),0):1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa)||(e.s=Te(c(e.Ga,e,t),on(e,e.B)),e.B++,0)))}(e,t)||2==r&&tn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:ln(e,5);break;case 4:ln(e,10);break;case 3:ln(e,6);break;default:ln(e,2)}}function on(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function ln(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new rt(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||at(r,"https"),ct(r),t?function(e,t){const n=new Ce;if(s.Image){const r=new Image;r.onload=u(Nt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Nt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Nt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Nt,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ce;const n=new AbortController,r=setTimeout((()=>{n.abort(),Nt(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Nt(0,0,!0,t):Nt(0,0,!1,t)})).catch((()=>{clearTimeout(r),Nt(0,0,!1,t)}))}(r.toString(),n)}else Se(2);e.G=0,e.l&&e.l.sa(t),cn(e),Qt(e)}function cn(e){if(e.G=0,e.ka=[],e.l){const t=et(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function un(e,t,n){var r=n instanceof rt?st(n):new rt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),it(r,r.s);else{var a=s.location;r=a.protocol,t=t?t+"."+a.hostname:a.hostname,a=+a.port;var i=new rt(null);r&&at(i,r),t&&(i.g=t),a&&it(i,a),n&&(i.l=n),r=i}return n=e.D,t=e.ya,n&&t&&lt(r,n,t),lt(r,"VER",e.la),Yt(e,r),r}function dn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Mt(new Rt({eb:n})):new Mt(e.pa)).Ha(e.J),t}function hn(){}function fn(){}function mn(e,t){ee.call(this),this.g=new Wt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!m(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!m(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new yn(this)}function pn(e){ge.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function gn(){ye.call(this),this.status=1}function yn(e){this.g=e}(e=Mt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():je.g(),this.v=this.o?fe(this.o):fe(je),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(i){return void Ut(this,i)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var a in r)n.set(a,r[a]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),a=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Ot,t,void 0))||r||a||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bt(this),this.u=!0,this.g.send(e),this.u=!1}catch(i){Ut(this,i)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,te(this,"complete"),te(this,"abort"),Vt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vt(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?zt(this):this.bb())},e.bb=function(){zt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch(ft){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(ft){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ue(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(e=Wt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Se(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=un(this,null,this.W),Xt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new Ie(this,this.j,e);let a=this.o;if(this.S&&(a?(a=b(a),w(a,this.S)):a=this.S),null!==this.m||this.O||(s.H=a,a=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Zt(this,s,t),lt(n=st(this.I),"RID",e),lt(n,"CVER",22),this.D&&lt(n,"X-HTTP-Session-Id",this.D),Yt(this,n),a&&(this.O?t="headers="+encodeURIComponent(String(It(a)))+"&"+t:this.m&&Pt(n,this.m,a)),Ye(this.h,s),this.Ua&&lt(n,"TYPE","init"),this.P?(lt(n,"$req",t),lt(n,"SID","null"),s.T=!0,Oe(s,n,null)):Oe(s,n,t),this.G=2}}else 3==this.G&&(e?Jt(this,e):0==this.i.length||Qe(this.h)||Jt(this))},e.Fa=function(){if(this.u=null,rn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Te(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Se(10),Kt(this),rn(this))},e.Za=function(){null!=this.C&&(this.C=null,Kt(this),tn(this),Se(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Se(2)):(this.j.info("Failed to ping google.com"),Se(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=hn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},fn.prototype.g=function(e,t){return new mn(e,t)},d(mn,ee),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Gt(this.g)},mn.prototype.o=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=ce(e),e=n);t.i.push(new Ge(t.Ya++,e)),3==t.G&&Xt(t)},mn.prototype.N=function(){this.g.l=null,delete this.j,Gt(this.g),delete this.g,mn.aa.N.call(this)},d(pn,ge),d(gn,ye),d(yn,hn),yn.prototype.ua=function(){te(this.g,"a")},yn.prototype.ta=function(e){te(this.g,new pn(e))},yn.prototype.sa=function(e){te(this.g,new gn)},yn.prototype.ra=function(){te(this.g,"b")},fn.prototype.createWebChannel=fn.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,sv=function(){return new fn},rv=function(){return xe()},nv=ve,tv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ae.NO_ERROR=0,Ae.TIMEOUT=8,Ae.HTTP_ERROR=6,ev=Ae,_e.COMPLETE="complete",Zy=_e,me.EventType=pe,pe.OPEN="a",pe.CLOSE="b",pe.ERROR="c",pe.MESSAGE="d",ee.prototype.listen=ee.prototype.K,Yy=me,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,Jy=Mt}).apply(void 0!==av?av:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const iv="@firebase/firestore",ov="4.7.11";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}lv.UNAUTHENTICATED=new lv(null),lv.GOOGLE_CREDENTIALS=new lv("google-credentials-uid"),lv.FIRST_PARTY=new lv("first-party-uid"),lv.MOCK_USER=new lv("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let cv="11.6.1";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv=new Pg("@firebase/firestore");function dv(){return uv.logLevel}function hv(e,...t){if(uv.logLevel<=jg.DEBUG){const n=t.map(pv);uv.debug(`Firestore (${cv}): ${e}`,...n)}}function fv(e,...t){if(uv.logLevel<=jg.ERROR){const n=t.map(pv);uv.error(`Firestore (${cv}): ${e}`,...n)}}function mv(e,...t){if(uv.logLevel<=jg.WARN){const n=t.map(pv);uv.warn(`Firestore (${cv}): ${e}`,...n)}}function pv(e){if("string"==typeof e)return e;try{
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,yv(e,r,n)}function yv(e,t,n){let r=`FIRESTORE (${cv}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw fv(r),new Error(r)}function vv(e,t,n,r){let s="Unexpected state";"string"==typeof n?s=n:r=n,e||yv(t,s,r)}function bv(e,t){return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class wv extends bg{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Sv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(lv.UNAUTHENTICATED)))}shutdown(){}}class Nv{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Tv{constructor(e){this.t=e,this.currentUser=lv.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){vv(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new Ev;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ev,e.enqueueRetryable((()=>r(this.currentUser)))};const a=()=>{const t=s;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},i=e=>{hv("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((e=>i(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?i(e):(hv("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ev)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(hv("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(vv("string"==typeof t.accessToken,31837,{l:t}),new kv(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return vv(null===e||"string"==typeof e,2055,{h:e}),new lv(e)}}class Cv{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=lv.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Rv{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Cv(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(lv.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class jv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Av{constructor(e,t){var n;this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,null!=(n=e)&&void 0!==n.settings&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){vv(void 0===this.o,3512);const n=e=>{null!=e.error&&hv("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.m;return this.m=e.token,hv("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{hv("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):hv("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new jv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(vv("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new jv(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(){return new TextEncoder}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=_v(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Pv(e,t){return e<t?-1:e>t?1:0}function Mv(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),s=t.codePointAt(n);if(r!==s){if(r<128&&s<128)return Pv(r,s);{const a=Dv(),i=Ov(a.encode(Lv(e,n)),a.encode(Lv(t,n)));return 0!==i?i:Pv(r,s)}}n+=r>65535?2:1}return Pv(e.length,t.length)}function Lv(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function Ov(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Pv(e[n],t[n]);return Pv(e.length,t.length)}function Uv(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv=-62135596800,zv=1e6;class Vv{static now(){return Vv.fromMillis(Date.now())}static fromDate(e){return Vv.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*zv);return new Vv(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new wv(xv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new wv(xv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Fv)throw new wv(xv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new wv(xv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/zv}_compareTo(e){return this.seconds===e.seconds?Pv(this.nanoseconds,e.nanoseconds):Pv(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Fv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{static fromTimestamp(e){return new Bv(e)}static min(){return new Bv(new Vv(0,0))}static max(){return new Bv(new Vv(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="__name__";class $v{constructor(e,t,n){void 0===t?t=0:t>e.length&&gv(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&gv(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===$v.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof $v?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=$v.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Pv(e.length,t.length)}static compareSegments(e,t){const n=$v.isNumericId(e),r=$v.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?$v.extractNumericId(e).compare($v.extractNumericId(t)):Mv(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ky.fromString(e.substring(4,e.length-2))}}class Hv extends $v{construct(e,t,n){return new Hv(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new wv(xv.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new Hv(t)}static emptyPath(){return new Hv([])}}const Wv=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gv extends $v{construct(e,t,n){return new Gv(e,t,n)}static isValidIdentifier(e){return Wv.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gv.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===qv}static keyField(){return new Gv([qv])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new wv(xv.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let a=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new wv(xv.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new wv(xv.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(a=!a,r++):"."!==t||a?(n+=t,r++):(s(),r++)}if(s(),a)throw new wv(xv.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gv(t)}static emptyPath(){return new Gv([])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e){this.path=e}static fromPath(e){return new Kv(Hv.fromString(e))}static fromName(e){return new Kv(Hv.fromString(e).popFirst(5))}static empty(){return new Kv(Hv.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Hv.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Hv.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Kv(new Hv(e.slice()))}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(e){return new Xv(e.readTime,e.key,-1)}class Xv{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Xv(Bv.min(),Kv.empty(),-1)}static max(){return new Xv(Bv.max(),Kv.empty(),-1)}}function Jv(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Kv.comparator(e.documentKey,t.documentKey),0!==n?n:Pv(e.largestBatchId,t.largestBatchId)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)}class Yv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zv(e){if(e.code!==xv.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;hv("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&gv(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new eb(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof eb?t:eb.resolve(t)}catch(e){return eb.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):eb.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):eb.reject(t)}static resolve(e){return new eb(((t,n)=>{t(e)}))}static reject(e){return new eb(((t,n)=>{n(e)}))}static waitFor(e){return new eb(((t,n)=>{let r=0,s=0,a=!1;e.forEach((e=>{++r,e.next((()=>{++s,a&&s===r&&t()}),(e=>n(e)))})),a=!0,s===r&&t()}))}static or(e){let t=eb.resolve(!1);for(const n of e)t=t.next((e=>e?eb.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new eb(((n,r)=>{const s=e.length,a=new Array(s);let i=0;for(let o=0;o<s;o++){const l=o;t(e[l]).next((e=>{a[l]=e,++i,i===s&&n(a)}),(e=>r(e)))}}))}static doWhile(e,t){return new eb(((n,r)=>{const s=()=>{!0===e()?t().next((()=>{s()}),r):n()};s()}))}}function tb(e){return"IndexedDbTransactionError"===e.name}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ue(e),this.ce=e=>t.writeSequenceNumber(e))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}nb.le=-1;function rb(e){return null==e}function sb(e){return 0===e&&1/e==-1/0}function ab(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const t=e.charAt(s);switch(t){case"\0":n+="";break;case"":n+="";break;default:n+=t}}return n}function ib(e){return e+""}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function lb(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function cb(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e,t){this.comparator=e,this.root=t||hb.EMPTY}insert(e,t){return new ub(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,hb.BLACK,null,null))}remove(e){return new ub(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hb.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new db(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new db(this.root,e,this.comparator,!1)}getReverseIterator(){return new db(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new db(this.root,e,this.comparator,!0)}}class db{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hb{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:hb.RED,this.left=null!=r?r:hb.EMPTY,this.right=null!=s?s:hb.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new hb(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return hb.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return hb.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hb.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hb.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw gv(43730,{key:this.key,value:this.value});if(this.right.isRed())throw gv(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw gv(27949);return e+(this.isRed()?0:1)}}hb.EMPTY=null,hb.RED=!0,hb.BLACK=!1,hb.EMPTY=new class{constructor(){this.size=0}get key(){throw gv(57766)}get value(){throw gv(16141)}get color(){throw gv(16727)}get left(){throw gv(29726)}get right(){throw gv(36894)}copy(e,t,n,r,s){return this}insert(e,t,n){return new hb(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class fb{constructor(e){this.comparator=e,this.data=new ub(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new mb(this.data.getIterator())}getIteratorFrom(e){return new mb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof fb))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new fb(this.comparator);return t.data=e,t}}class mb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e){this.fields=e,e.sort(Gv.comparator)}static empty(){return new pb([])}unionWith(e){let t=new fb(Gv.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new pb(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Uv(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new gb("Invalid base64 string: "+e):e}}(e);return new yb(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new yb(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pv(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yb.EMPTY_BYTE_STRING=new yb("");const vb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bb(e){if(vv(!!e,39018),"string"==typeof e){let t=0;const n=vb.exec(e);if(vv(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:xb(e.seconds),nanos:xb(e.nanos)}}function xb(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function wb(e){return"string"==typeof e?yb.fromBase64String(e):yb.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb="server_timestamp",kb="__type__",Sb="__previous_value__",Nb="__local_write_time__";function Tb(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[kb])||void 0===n?void 0:n.stringValue)===Eb}function Cb(e){const t=e.mapValue.fields[Sb];return Tb(t)?Cb(t):t}function Rb(e){const t=bb(e.mapValue.fields[Nb].timestampValue);return new Vv(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e,t,n,r,s,a,i,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=i,this.longPollingOptions=o,this.useFetchStreams=l}}const Ab="(default)";class _b{constructor(e,t){this.projectId=e,this.database=t||Ab}static empty(){return new _b("","")}get isDefaultDatabase(){return this.database===Ab}isEqual(e){return e instanceof _b&&e.projectId===this.projectId&&e.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db="__type__",Ib="__max__",Pb={},Mb="__vector__",Lb="value";function Ob(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Tb(e)?4:function(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Ib}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)?9007199254740991:function(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Db])||void 0===n?void 0:n.stringValue)===Mb}(e)?10:11:gv(28295,{value:e})}function Ub(e,t){if(e===t)return!0;const n=Ob(e);if(n!==Ob(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Rb(e).isEqual(Rb(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=bb(e.timestampValue),r=bb(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return wb(e.bytesValue).isEqual(wb(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return xb(e.geoPointValue.latitude)===xb(t.geoPointValue.latitude)&&xb(e.geoPointValue.longitude)===xb(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return xb(e.integerValue)===xb(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=xb(e.doubleValue),r=xb(t.doubleValue);return n===r?sb(n)===sb(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Uv(e.arrayValue.values||[],t.arrayValue.values||[],Ub);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ob(n)!==ob(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!Ub(n[s],r[s])))return!1;return!0}(e,t);default:return gv(52216,{left:e})}}function Fb(e,t){return void 0!==(e.values||[]).find((e=>Ub(e,t)))}function zb(e,t){if(e===t)return 0;const n=Ob(e),r=Ob(t);if(n!==r)return Pv(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pv(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=xb(e.integerValue||e.doubleValue),r=xb(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Vb(e.timestampValue,t.timestampValue);case 4:return Vb(Rb(e),Rb(t));case 5:return Mv(e.stringValue,t.stringValue);case 6:return function(e,t){const n=wb(e),r=wb(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=Pv(n[s],r[s]);if(0!==e)return e}return Pv(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Pv(xb(e.latitude),xb(t.latitude));return 0!==n?n:Pv(xb(e.longitude),xb(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Bb(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,s,a;const i=e.fields||{},o=t.fields||{},l=null===(n=i[Lb])||void 0===n?void 0:n.arrayValue,c=null===(r=o[Lb])||void 0===r?void 0:r.arrayValue,u=Pv((null===(s=null==l?void 0:l.values)||void 0===s?void 0:s.length)||0,(null===(a=null==c?void 0:c.values)||void 0===a?void 0:a.length)||0);return 0!==u?u:Bb(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Pb&&t===Pb)return 0;if(e===Pb)return 1;if(t===Pb)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},a=Object.keys(s);r.sort(),a.sort();for(let i=0;i<r.length&&i<a.length;++i){const e=Mv(r[i],a[i]);if(0!==e)return e;const t=zb(n[r[i]],s[a[i]]);if(0!==t)return t}return Pv(r.length,a.length)}(e.mapValue,t.mapValue);default:throw gv(23264,{Pe:n})}}function Vb(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Pv(e,t);const n=bb(e),r=bb(t),s=Pv(n.seconds,r.seconds);return 0!==s?s:Pv(n.nanos,r.nanos)}function Bb(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=zb(n[s],r[s]);if(e)return e}return Pv(n.length,r.length)}function qb(e){return $b(e)}function $b(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=bb(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return wb(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Kv.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=$b(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+=`${s}:${$b(e.fields[s])}`;return n+"}"}(e.mapValue):gv(61005,{value:e})}function Hb(e){switch(Ob(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Cb(e);return t?16+Hb(t):16;case 5:return 2*e.stringValue.length;case 6:return wb(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+Hb(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return lb(e.fields,((e,n)=>{t+=e.length+Hb(n)})),t}(e.mapValue);default:throw gv(13486,{value:e})}}function Wb(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Gb(e){return!!e&&"integerValue"in e}function Kb(e){return!!e&&"arrayValue"in e}function Qb(e){return!!e&&"nullValue"in e}function Xb(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Jb(e){return!!e&&"mapValue"in e}function Yb(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return lb(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Yb(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Yb(e.arrayValue.values[n]);return t}return Object.assign({},e)}class Zb{constructor(e){this.value=e}static empty(){return new Zb({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Jb(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yb(t)}setAll(e){let t=Gv.emptyPath(),n={},r=[];e.forEach(((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=Yb(e):r.push(s.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());Jb(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ub(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Jb(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){lb(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Zb(Yb(this.value))}}function ex(e){const t=[];return lb(e.fields,((e,n)=>{const r=new Gv([e]);if(Jb(n)){const e=ex(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new pb(t)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class tx{constructor(e,t,n,r,s,a,i){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=a,this.documentState=i}static newInvalidDocument(e){return new tx(e,0,Bv.min(),Bv.min(),Bv.min(),Zb.empty(),0)}static newFoundDocument(e,t,n,r){return new tx(e,1,t,Bv.min(),n,r,0)}static newNoDocument(e,t){return new tx(e,2,t,Bv.min(),Bv.min(),Zb.empty(),0)}static newUnknownDocument(e,t){return new tx(e,3,t,Bv.min(),Bv.min(),Zb.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Bv.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zb.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zb.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Bv.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof tx&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tx(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,t){this.position=e,this.inclusive=t}}function rx(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const a=t[s],i=e.position[s];if(r=a.field.isKeyField()?Kv.comparator(Kv.fromName(i.referenceValue),n.key):zb(i,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function sx(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ub(e.position[n],t.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e,t="asc"){this.field=e,this.dir=t}}function ix(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{}class lx extends ox{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new px(e,t,n):"array-contains"===t?new bx(e,n):"in"===t?new xx(e,n):"not-in"===t?new wx(e,n):"array-contains-any"===t?new Ex(e,n):new lx(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new gx(e,n):new yx(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(zb(t,this.value)):null!==t&&Ob(this.value)===Ob(t)&&this.matchesComparison(zb(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return gv(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cx extends ox{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new cx(e,t)}matches(e){return ux(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.Te||(this.Te=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function ux(e){return"and"===e.op}function dx(e){return function(e){for(const t of e.filters)if(t instanceof cx)return!1;return!0}(e)&&ux(e)}function hx(e){if(e instanceof lx)return e.field.canonicalString()+e.op.toString()+qb(e.value);if(dx(e))return e.filters.map((e=>hx(e))).join(",");{const t=e.filters.map((e=>hx(e))).join(",");return`${e.op}(${t})`}}function fx(e,t){return e instanceof lx?function(e,t){return t instanceof lx&&e.op===t.op&&e.field.isEqual(t.field)&&Ub(e.value,t.value)}(e,t):e instanceof cx?function(e,t){return t instanceof cx&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&fx(n,t.filters[r])),!0)}(e,t):void gv(19439)}function mx(e){return e instanceof lx?function(e){return`${e.field.canonicalString()} ${e.op} ${qb(e.value)}`}(e):e instanceof cx?function(e){return e.op.toString()+" {"+e.getFilters().map(mx).join(" ,")+"}"}(e):"Filter"}class px extends lx{constructor(e,t,n){super(e,t,n),this.key=Kv.fromName(n.referenceValue)}matches(e){const t=Kv.comparator(e.key,this.key);return this.matchesComparison(t)}}class gx extends lx{constructor(e,t){super(e,"in",t),this.keys=vx("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class yx extends lx{constructor(e,t){super(e,"not-in",t),this.keys=vx("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function vx(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Kv.fromName(e.referenceValue)))}class bx extends lx{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Kb(t)&&Fb(t.arrayValue,this.value)}}class xx extends lx{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Fb(this.value.arrayValue,t)}}class wx extends lx{constructor(e,t){super(e,"not-in",t)}matches(e){if(Fb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Fb(this.value.arrayValue,t)}}class Ex extends lx{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Kb(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Fb(this.value.arrayValue,e)))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e,t=null,n=[],r=[],s=null,a=null,i=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=a,this.endAt=i,this.Ie=null}}function Sx(e,t=null,n=[],r=[],s=null,a=null,i=null){return new kx(e,t,n,r,s,a,i)}function Nx(e){const t=bv(e);if(null===t.Ie){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>hx(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),rb(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>qb(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>qb(e))).join(",")),t.Ie=e}return t.Ie}function Tx(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ix(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!fx(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!sx(e.startAt,t.startAt)&&sx(e.endAt,t.endAt)}function Cx(e){return Kv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e,t=null,n=[],r=[],s=null,a="F",i=null,o=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=a,this.startAt=i,this.endAt=o,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function jx(e){return new Rx(e)}function Ax(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function _x(e){return null!==e.collectionGroup}function Dx(e){const t=bv(e);if(null===t.Ee){t.Ee=[];const e=new Set;for(const s of t.explicitOrderBy)t.Ee.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new fb(Gv.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ee.push(new ax(r,n))})),e.has(Gv.keyField().canonicalString())||t.Ee.push(new ax(Gv.keyField(),n))}return t.Ee}function Ix(e){const t=bv(e);return t.de||(t.de=function(e,t){if("F"===e.limitType)return Sx(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new ax(e.field,t)}));const n=e.endAt?new nx(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new nx(e.startAt.position,e.startAt.inclusive):null;return Sx(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}(t,Dx(e))),t.de}function Px(e,t){const n=e.filters.concat([t]);return new Rx(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Mx(e,t,n){return new Rx(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Lx(e,t){return Tx(Ix(e),Ix(t))&&e.limitType===t.limitType}function Ox(e){return`${Nx(Ix(e))}|lt:${e.limitType}`}function Ux(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>mx(e))).join(", ")}]`),rb(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>qb(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>qb(e))).join(",")),`Target(${t})`}(Ix(e))}; limitType=${e.limitType})`}function Fx(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Kv.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Dx(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=rx(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Dx(e),t))&&!(e.endAt&&!function(e,t,n){const r=rx(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Dx(e),t))}(e,t)}function zx(e){return(t,n)=>{let r=!1;for(const s of Dx(e)){const e=Vx(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function Vx(e,t,n){const r=e.field.isKeyField()?Kv.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?zb(r,s):gv(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return gv(19790,{direction:e.dir})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){lb(this.inner,((t,n)=>{for(const[r,s]of n)e(r,s)}))}isEmpty(){return cb(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx=new ub(Kv.comparator);function $x(){return qx}const Hx=new ub(Kv.comparator);function Wx(...e){let t=Hx;for(const n of e)t=t.insert(n.key,n);return t}function Gx(e){let t=Hx;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Kx(){return Xx()}function Qx(){return Xx()}function Xx(){return new Bx((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Jx=new ub(Kv.comparator),Yx=new fb(Kv.comparator);function Zx(...e){let t=Yx;for(const n of e)t=t.add(n);return t}const ew=new fb(Pv);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function tw(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sb(t)?"-0":t}}function nw(e){return{integerValue:""+e}}function rw(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!sb(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)?nw(t):tw(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(){this._=void 0}}function aw(e,t,n){return e instanceof lw?function(e,t){const n={fields:{[kb]:{stringValue:Eb},[Nb]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Tb(t)&&(t=Cb(t)),t&&(n.fields[Sb]=t),{mapValue:n}}(n,t):e instanceof cw?uw(e,t):e instanceof dw?hw(e,t):function(e,t){const n=ow(e,t),r=mw(n)+mw(e.Re);return Gb(n)&&Gb(e.Re)?nw(r):tw(e.serializer,r)}(e,t)}function iw(e,t,n){return e instanceof cw?uw(e,t):e instanceof dw?hw(e,t):n}function ow(e,t){return e instanceof fw?function(e){return Gb(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class lw extends sw{}class cw extends sw{constructor(e){super(),this.elements=e}}function uw(e,t){const n=pw(t);for(const r of e.elements)n.some((e=>Ub(e,r)))||n.push(r);return{arrayValue:{values:n}}}class dw extends sw{constructor(e){super(),this.elements=e}}function hw(e,t){let n=pw(t);for(const r of e.elements)n=n.filter((e=>!Ub(e,r)));return{arrayValue:{values:n}}}class fw extends sw{constructor(e,t){super(),this.serializer=e,this.Re=t}}function mw(e){return xb(e.integerValue||e.doubleValue)}function pw(e){return Kb(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class gw{constructor(e,t){this.version=e,this.transformResults=t}}class yw{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new yw}static exists(e){return new yw(void 0,e)}static updateTime(e){return new yw(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vw(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class bw{}function xw(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Aw(e.key,yw.none()):new Nw(e.key,e.data,yw.none());{const n=e.data,r=Zb.empty();let s=new fb(Gv.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new Tw(e.key,r,new pb(s.toArray()),yw.none())}}function ww(e,t,n){e instanceof Nw?function(e,t,n){const r=e.value.clone(),s=Rw(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Tw?function(e,t,n){if(!vw(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Rw(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(Cw(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ew(e,t,n,r){return e instanceof Nw?function(e,t,n,r){if(!vw(e.precondition,t))return n;const s=e.value.clone(),a=jw(e.fieldTransforms,r,t);return s.setAll(a),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof Tw?function(e,t,n,r){if(!vw(e.precondition,t))return n;const s=jw(e.fieldTransforms,r,t),a=t.data;return a.setAll(Cw(e)),a.setAll(s),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return vw(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function kw(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=ow(r.transform,e||null);null!=s&&(null===n&&(n=Zb.empty()),n.set(r.field,s))}return n||null}function Sw(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Uv(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof cw&&t instanceof cw||e instanceof dw&&t instanceof dw?Uv(e.elements,t.elements,Ub):e instanceof fw&&t instanceof fw?Ub(e.Re,t.Re):e instanceof lw&&t instanceof lw}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Nw extends bw{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Tw extends bw{constructor(e,t,n,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Cw(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Rw(e,t,n){const r=new Map;vv(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let s=0;s<n.length;s++){const a=e[s],i=a.transform,o=t.data.field(a.field);r.set(a.field,iw(i,o,n[s]))}return r}function jw(e,t,n){const r=new Map;for(const s of e){const e=s.transform,a=n.data.field(s.field);r.set(s.field,aw(e,a,t))}return r}class Aw extends bw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _w extends bw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&ww(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ew(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ew(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Qx();return this.mutations.forEach((r=>{const s=e.get(r.key),a=s.overlayedDocument;let i=this.applyToLocalView(a,s.mutatedFields);i=t.has(r.key)?null:i;const o=xw(a,i);null!==o&&n.set(r.key,o),a.isValidDocument()||a.convertToNoDocument(Bv.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Zx())}isEqual(e){return this.batchId===e.batchId&&Uv(this.mutations,e.mutations,((e,t)=>Sw(e,t)))&&Uv(this.baseMutations,e.baseMutations,((e,t)=>Sw(e,t)))}}class Iw{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){vv(e.mutations.length===n.length,58842,{fe:e.mutations.length,ge:n.length});let r=Jx;const s=e.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,n[a].version);return new Iw(e,t,n,r)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,t){this.count=e,this.unchangedNames=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lw,Ow;function Uw(e){if(void 0===e)return fv("GRPC error has no .code"),xv.UNKNOWN;switch(e){case Lw.OK:return xv.OK;case Lw.CANCELLED:return xv.CANCELLED;case Lw.UNKNOWN:return xv.UNKNOWN;case Lw.DEADLINE_EXCEEDED:return xv.DEADLINE_EXCEEDED;case Lw.RESOURCE_EXHAUSTED:return xv.RESOURCE_EXHAUSTED;case Lw.INTERNAL:return xv.INTERNAL;case Lw.UNAVAILABLE:return xv.UNAVAILABLE;case Lw.UNAUTHENTICATED:return xv.UNAUTHENTICATED;case Lw.INVALID_ARGUMENT:return xv.INVALID_ARGUMENT;case Lw.NOT_FOUND:return xv.NOT_FOUND;case Lw.ALREADY_EXISTS:return xv.ALREADY_EXISTS;case Lw.PERMISSION_DENIED:return xv.PERMISSION_DENIED;case Lw.FAILED_PRECONDITION:return xv.FAILED_PRECONDITION;case Lw.ABORTED:return xv.ABORTED;case Lw.OUT_OF_RANGE:return xv.OUT_OF_RANGE;case Lw.UNIMPLEMENTED:return xv.UNIMPLEMENTED;case Lw.DATA_LOSS:return xv.DATA_LOSS;default:return gv(39323,{code:e})}}(Ow=Lw||(Lw={}))[Ow.OK=0]="OK",Ow[Ow.CANCELLED=1]="CANCELLED",Ow[Ow.UNKNOWN=2]="UNKNOWN",Ow[Ow.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ow[Ow.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ow[Ow.NOT_FOUND=5]="NOT_FOUND",Ow[Ow.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ow[Ow.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ow[Ow.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ow[Ow.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ow[Ow.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ow[Ow.ABORTED=10]="ABORTED",Ow[Ow.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ow[Ow.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ow[Ow.INTERNAL=13]="INTERNAL",Ow[Ow.UNAVAILABLE=14]="UNAVAILABLE",Ow[Ow.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Fw=new Ky([4294967295,4294967295],0);function zw(e){const t=Dv().encode(e),n=new Qy;return n.update(t),new Uint8Array(n.digest())}function Vw(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Ky([n,r],0),new Ky([s,a],0)]}class Bw{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new qw(`Invalid padding: ${t}`);if(n<0)throw new qw(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new qw(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new qw(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Ky.fromNumber(this.pe)}we(e,t,n){let r=e.add(t.multiply(Ky.fromNumber(n)));return 1===r.compare(Fw)&&(r=new Ky([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.pe)return!1;const t=zw(e),[n,r]=Vw(t);for(let s=0;s<this.hashCount;s++){const e=this.we(n,r,s);if(!this.be(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new Bw(s,r,t);return n.forEach((e=>a.insert(e))),a}insert(e){if(0===this.pe)return;const t=zw(e),[n,r]=Vw(t);for(let s=0;s<this.hashCount;s++){const e=this.we(n,r,s);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class qw extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Hw.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new $w(Bv.min(),r,new ub(Pv),$x(),Zx())}}class Hw{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Hw(n,t,Zx(),Zx(),Zx())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e,t,n,r){this.De=e,this.removedTargetIds=t,this.key=n,this.ve=r}}class Gw{constructor(e,t){this.targetId=e,this.Ce=t}}class Kw{constructor(e,t,n=yb.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Qw{constructor(){this.Fe=0,this.Me=Yw(),this.xe=yb.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return 0!==this.Fe}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Zx(),t=Zx(),n=Zx();return this.Me.forEach(((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:gv(38017,{changeType:s})}})),new Hw(this.xe,this.Oe,e,t,n)}Qe(){this.Ne=!1,this.Me=Yw()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,vv(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Xw{constructor(e){this.ze=e,this.je=new Map,this.He=$x(),this.Je=Jw(),this.Ye=Jw(),this.Ze=new ub(Pv)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,(t=>{const n=this.rt(t);switch(e.state){case 0:this.it(t)&&n.ke(e.resumeToken);break;case 1:n.We(),n.Be||n.Qe(),n.ke(e.resumeToken);break;case 2:n.We(),n.Be||this.removeTarget(t);break;case 3:this.it(t)&&(n.Ge(),n.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),n.ke(e.resumeToken));break;default:gv(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach(((e,n)=>{this.it(n)&&t(n)}))}ot(e){const t=e.targetId,n=e.Ce.count,r=this._t(t);if(r){const s=r.target;if(Cx(s))if(0===n){const e=new Kv(s.path);this.tt(t,e,tx.newNoDocument(e,Bv.min()))}else vv(1===n,20013,{expectedCount:n});else{const r=this.ut(t);if(r!==n){const n=this.ct(e),s=n?this.lt(n,e,r):1;if(0!==s){this.st(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,e)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let a,i;try{a=wb(n).toUint8Array()}catch(e){if(e instanceof gb)return mv("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{i=new Bw(a,r,s)}catch(e){return mv(e instanceof qw?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===i.pe?null:i}lt(e,t,n){return t.Ce.count===n-this.Tt(e,t.targetId)?0:2}Tt(e,t){const n=this.ze.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const s=this.ze.Pt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${n.path.canonicalString()}`;e.mightContain(a)||(this.tt(t,n,null),r++)})),r}It(e){const t=new Map;this.je.forEach(((n,r)=>{const s=this._t(r);if(s){if(n.current&&Cx(s.target)){const t=new Kv(s.target.path);this.Et(t).has(r)||this.dt(r,t)||this.tt(r,t,tx.newNoDocument(t,e))}n.Le&&(t.set(r,n.qe()),n.Qe())}}));let n=Zx();this.Ye.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this._t(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.He.forEach(((t,n)=>n.setReadTime(e)));const r=new $w(e,t,this.Ze,this.He,n);return this.He=$x(),this.Je=Jw(),this.Ye=Jw(),this.Ze=new ub(Pv),r}et(e,t){if(!this.it(e))return;const n=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,n),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,n){if(!this.it(e))return;const r=this.rt(e);this.dt(e,t)?r.$e(t,1):r.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),n&&(this.He=this.He.insert(t,n))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new Qw,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new fb(Pv),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new fb(Pv),this.Je=this.Je.insert(e,t)),t}it(e){const t=null!==this._t(e);return t||hv("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Qw),this.ze.getRemoteKeysForTarget(e).forEach((t=>{this.tt(e,t,null)}))}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Jw(){return new ub(Kv.comparator)}function Yw(){return new ub(Kv.comparator)}const Zw={asc:"ASCENDING",desc:"DESCENDING"},eE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tE={and:"AND",or:"OR"};class nE{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function rE(e,t){return e.useProto3Json||rb(t)?t:{value:t}}function sE(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function aE(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function iE(e,t){return sE(e,t.toTimestamp())}function oE(e){return vv(!!e,49232),Bv.fromTimestamp(function(e){const t=bb(e);return new Vv(t.seconds,t.nanos)}(e))}function lE(e,t){return cE(e,t).canonicalString()}function cE(e,t){const n=function(e){return new Hv(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function uE(e){const t=Hv.fromString(e);return vv(RE(t),10190,{key:t.toString()}),t}function dE(e,t){return lE(e.databaseId,t.path)}function hE(e,t){const n=uE(t);if(n.get(1)!==e.databaseId.projectId)throw new wv(xv.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new wv(xv.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Kv(pE(n))}function fE(e,t){return lE(e.databaseId,t)}function mE(e){return new Hv(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function pE(e){return vv(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function gE(e,t,n){return{name:dE(e,t),fields:n.value.mapValue.fields}}function yE(e,t){return{documents:[fE(e,t.path)]}}function vE(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=fE(e,s);const a=function(e){if(0!==e.length)return TE(cx.create(e,"and"))}(t.filters);a&&(n.structuredQuery.where=a);const i=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:SE(e.field),direction:wE(e.dir)}}(e)))}(t.orderBy);i&&(n.structuredQuery.orderBy=i);const o=rE(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{gt:n,parent:s}}function bE(e){let t=function(e){const t=uE(e);return 4===t.length?Hv.emptyPath():pE(t)}(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){vv(1===r,65062);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let a=[];n.where&&(a=function(e){const t=xE(e);return t instanceof cx&&dx(t)?t.getFilters():[t]}(n.where));let i=[];n.orderBy&&(i=function(e){return e.map((e=>function(e){return new ax(NE(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,rb(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new nx(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new nx(n,t)}(n.endAt)),function(e,t,n,r,s,a,i,o){return new Rx(e,t,n,r,s,a,i,o)}(t,s,i,a,o,"F",l,c)}function xE(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=NE(e.unaryFilter.field);return lx.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=NE(e.unaryFilter.field);return lx.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=NE(e.unaryFilter.field);return lx.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=NE(e.unaryFilter.field);return lx.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return gv(61313);default:return gv(60726)}}(e):void 0!==e.fieldFilter?function(e){return lx.create(NE(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return gv(58110);default:return gv(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return cx.create(e.compositeFilter.filters.map((e=>xE(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return gv(1026)}}(e.compositeFilter.op))}(e):gv(30097,{filter:e})}function wE(e){return Zw[e]}function EE(e){return eE[e]}function kE(e){return tE[e]}function SE(e){return{fieldPath:e.canonicalString()}}function NE(e){return Gv.fromServerFormat(e.fieldPath)}function TE(e){return e instanceof lx?function(e){if("=="===e.op){if(Xb(e.value))return{unaryFilter:{field:SE(e.field),op:"IS_NAN"}};if(Qb(e.value))return{unaryFilter:{field:SE(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Xb(e.value))return{unaryFilter:{field:SE(e.field),op:"IS_NOT_NAN"}};if(Qb(e.value))return{unaryFilter:{field:SE(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:SE(e.field),op:EE(e.op),value:e.value}}}(e):e instanceof cx?function(e){const t=e.getFilters().map((e=>TE(e)));return 1===t.length?t[0]:{compositeFilter:{op:kE(e.op),filters:t}}}(e):gv(54877,{filter:e})}function CE(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function RE(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,t,n,r,s=Bv.min(),a=Bv.min(),i=yb.EMPTY_BYTE_STRING,o=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=i,this.expectedCount=o}withSequenceNumber(e){return new jE(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new jE(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new jE(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new jE(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e){this.wt=e}}function _E(e){const t=bE({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Mx(t,t.limit,"L"):t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(){this.yn=new IE}addToCollectionParentIndex(e,t){return this.yn.add(t),eb.resolve()}getCollectionParents(e,t){return eb.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return eb.resolve()}deleteFieldIndex(e,t){return eb.resolve()}deleteAllFieldIndexes(e){return eb.resolve()}createTargetIndexes(e,t){return eb.resolve()}getDocumentsMatchingTarget(e,t){return eb.resolve(null)}getIndexType(e,t){return eb.resolve(0)}getFieldIndexes(e,t){return eb.resolve([])}getNextCollectionGroupToUpdate(e){return eb.resolve(null)}getMinOffset(e,t){return eb.resolve(Xv.min())}getMinOffsetFromCollectionGroup(e,t){return eb.resolve(Xv.min())}updateCollectionGroup(e,t,n){return eb.resolve()}updateIndexEntries(e,t){return eb.resolve()}}class IE{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new fb(Hv.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new fb(Hv.comparator)).toArray()}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ME=41943040;class LE{static withCacheSize(e){return new LE(e,LE.DEFAULT_COLLECTION_PERCENTILE,LE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */LE.DEFAULT_COLLECTION_PERCENTILE=10,LE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,LE.DEFAULT=new LE(ME,LE.DEFAULT_COLLECTION_PERCENTILE,LE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),LE.DISABLED=new LE(-1,0,0);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class OE{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new OE(0)}static ir(){return new OE(-1)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE="LruGarbageCollector";function FE([e,t],[n,r]){const s=Pv(e,n);return 0===s?Pv(t,r):s}class zE{constructor(e){this.cr=e,this.buffer=new fb(FE),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();FE(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class VE{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Tr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return null!==this.Tr}Ir(e){hv(UE,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){tb(e)?hv(UE,"Ignoring IndexedDB error during garbage collection: ",e):await Zv(e)}await this.Ir(3e5)}))}}class BE{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return eb.resolve(nb.le);const n=new zE(t);return this.Er.forEachTarget(e,(e=>n.Pr(e.sequenceNumber))).next((()=>this.Er.Ar(e,(e=>n.Pr(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Er.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(hv("LruGarbageCollector","Garbage collection skipped; disabled"),eb.resolve(PE)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(hv("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),PE):this.Rr(e,t)))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let n,r,s,a,i,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(hv("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,i=Date.now(),this.removeTargets(e,n,t)))).next((t=>(s=t,o=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),dv()<=jg.DEBUG&&hv("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${a-c}ms\n\tDetermined least recently used ${r} in `+(i-a)+"ms\n"+`\tRemoved ${s} targets in `+(o-i)+"ms\n"+`\tRemoved ${e} documents in `+(l-o)+"ms\n"+`Total Duration: ${l-c}ms`),eb.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e}))))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class qE{constructor(){this.changes=new Bx((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tx.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?eb.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Ew(n.mutation,e,pb.empty(),Vv.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Zx()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=Zx()){const r=Kx();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Wx();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Kx();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Zx())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let s=$x();const a=Xx(),i=Xx();return t.forEach(((e,t)=>{const i=n.get(t.key);r.has(t.key)&&(void 0===i||i.mutation instanceof Tw)?s=s.insert(t.key,t):void 0!==i?(a.set(t.key,i.mutation.getFieldMask()),Ew(i.mutation,t,i.mutation.getFieldMask(),Vv.now())):a.set(t.key,pb.empty())})),this.recalculateAndSaveOverlays(e,s).next((e=>(e.forEach(((e,t)=>a.set(e,t))),t.forEach(((e,t)=>{var n;return i.set(e,new $E(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),i)))}recalculateAndSaveOverlays(e,t){const n=Xx();let r=new ub(((e,t)=>e-t)),s=Zx();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const s of e)s.keys().forEach((e=>{const a=t.get(e);if(null===a)return;let i=n.get(e)||pb.empty();i=s.applyToLocalView(a,i),n.set(e,i);const o=(r.get(s.batchId)||Zx()).add(e);r=r.insert(s.batchId,o)}))})).next((()=>{const a=[],i=r.getReverseIterator();for(;i.hasNext();){const r=i.getNext(),o=r.key,l=r.value,c=Qx();l.forEach((e=>{if(!s.has(e)){const r=xw(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}})),a.push(this.documentOverlayCache.saveOverlays(e,o,c))}return eb.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Kv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):_x(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):eb.resolve(Kx());let i=-1,o=s;return a.next((t=>eb.forEach(t,((t,n)=>(i<n.largestBatchId&&(i=n.largestBatchId),s.get(t)?eb.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{o=o.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,s))).next((()=>this.computeViews(e,o,t,Zx()))).next((e=>({batchId:i,changes:Gx(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Kv(t)).next((e=>{let t=Wx();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let a=Wx();return this.indexManager.getCollectionParents(e,s).next((i=>eb.forEach(i,(i=>{const o=function(e,t){return new Rx(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,i.child(s));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next((e=>{e.forEach(((e,t)=>{a=a.insert(e,t)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r)))).next((e=>{s.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,tx.newInvalidDocument(r)))}));let n=Wx();return e.forEach(((e,r)=>{const a=s.get(e);void 0!==a&&Ew(a.mutation,r,pb.empty(),Vv.now()),Fx(t,r)&&(n=n.insert(e,r))})),n}))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return eb.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:oE(e.createTime)}}(t)),eb.resolve()}getNamedQuery(e,t){return eb.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(e){return{name:e.name,query:_E(e.bundledQuery),readTime:oE(e.readTime)}}(t)),eb.resolve()}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(){this.overlays=new ub(Kv.comparator),this.Or=new Map}getOverlay(e,t){return eb.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Kx();return eb.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.St(e,t,r)})),eb.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Or.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Or.delete(n)),eb.resolve()}getOverlaysForCollection(e,t,n){const r=Kx(),s=t.length+1,a=new Kv(t.child("")),i=this.overlays.getIteratorFrom(a);for(;i.hasNext();){const e=i.getNext().value,a=e.getKey();if(!t.isPrefixOf(a.path))break;a.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return eb.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new ub(((e,t)=>e-t));const a=this.overlays.getIterator();for(;a.hasNext();){const e=a.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=Kx(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const i=Kx(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach(((e,t)=>i.set(e,t))),!(i.size()>=r)););return eb.resolve(i)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Or.get(r.largestBatchId).delete(n.key);this.Or.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Pw(t,n));let s=this.Or.get(t);void 0===s&&(s=Zx(),this.Or.set(t,s)),this.Or.set(t,s.add(n.key))}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(){this.sessionToken=yb.EMPTY_BYTE_STRING}getSessionToken(e){return eb.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,eb.resolve()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(){this.Nr=new fb(XE.Br),this.Lr=new fb(XE.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const n=new XE(e,t);this.Nr=this.Nr.add(n),this.Lr=this.Lr.add(n)}qr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Qr(new XE(e,t))}$r(e,t){e.forEach((e=>this.removeReference(e,t)))}Ur(e){const t=new Kv(new Hv([])),n=new XE(t,e),r=new XE(t,e+1),s=[];return this.Lr.forEachInRange([n,r],(e=>{this.Qr(e),s.push(e.key)})),s}Kr(){this.Nr.forEach((e=>this.Qr(e)))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new Kv(new Hv([])),n=new XE(t,e),r=new XE(t,e+1);let s=Zx();return this.Lr.forEachInRange([n,r],(e=>{s=s.add(e.key)})),s}containsKey(e){const t=new XE(e,0),n=this.Nr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class XE{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return Kv.comparator(e.key,t.key)||Pv(e.Gr,t.Gr)}static kr(e,t){return Pv(e.Gr,t.Gr)||Kv.comparator(e.key,t.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new fb(XE.Br)}checkEmpty(e){return eb.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Dw(s,t,n,r);this.mutationQueue.push(a);for(const i of r)this.zr=this.zr.add(new XE(i.key,s)),this.indexManager.addToCollectionParentIndex(e,i.key.path.popLast());return eb.resolve(a)}lookupMutationBatch(e,t){return eb.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Hr(n),s=r<0?0:r;return eb.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return eb.resolve(0===this.mutationQueue.length?-1:this.Jn-1)}getAllMutationBatches(e){return eb.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new XE(t,0),r=new XE(t,Number.POSITIVE_INFINITY),s=[];return this.zr.forEachInRange([n,r],(e=>{const t=this.jr(e.Gr);s.push(t)})),eb.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new fb(Pv);return t.forEach((e=>{const t=new XE(e,0),r=new XE(e,Number.POSITIVE_INFINITY);this.zr.forEachInRange([t,r],(e=>{n=n.add(e.Gr)}))})),eb.resolve(this.Jr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;Kv.isDocumentKey(s)||(s=s.child(""));const a=new XE(new Kv(s),0);let i=new fb(Pv);return this.zr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(i=i.add(e.Gr)),!0)}),a),eb.resolve(this.Jr(i))}Jr(e){const t=[];return e.forEach((e=>{const n=this.jr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){vv(0===this.Yr(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.zr;return eb.forEach(t.mutations,(r=>{const s=new XE(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.zr=n}))}Xn(e){}containsKey(e,t){const n=new XE(t,0),r=this.zr.firstAfterOrEqual(n);return eb.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,eb.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e){this.Zr=e,this.docs=new ub(Kv.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,a=this.Zr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return eb.resolve(n?n.document.mutableCopy():tx.newInvalidDocument(t))}getEntries(e,t){let n=$x();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():tx.newInvalidDocument(e))})),eb.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=$x();const a=t.path,i=new Kv(a.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(i);for(;o.hasNext();){const{key:e,value:{document:i}}=o.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||Jv(Qv(i),n)<=0||(r.has(i.key)||Fx(t,i))&&(s=s.insert(i.key,i.mutableCopy()))}return eb.resolve(s)}getAllFromCollectionGroup(e,t,n,r){gv(9500)}Xr(e,t){return eb.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new ZE(this)}getSize(e){return eb.resolve(this.size)}}class ZE extends qE{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.vr.addEntry(e,r)):this.vr.removeEntry(n)})),eb.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e){this.persistence=e,this.ei=new Bx((e=>Nx(e)),Tx),this.lastRemoteSnapshotVersion=Bv.min(),this.highestTargetId=0,this.ti=0,this.ni=new QE,this.targetCount=0,this.ri=OE.rr()}forEachTarget(e,t){return this.ei.forEach(((e,n)=>t(n))),eb.resolve()}getLastRemoteSnapshotVersion(e){return eb.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return eb.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),eb.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ti&&(this.ti=t),eb.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new OE(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,eb.resolve()}updateTargetData(e,t){return this.ar(t),eb.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,eb.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.ei.forEach(((a,i)=>{i.sequenceNumber<=t&&null===n.get(i.targetId)&&(this.ei.delete(a),s.push(this.removeMatchingKeysForTargetId(e,i.targetId)),r++)})),eb.waitFor(s).next((()=>r))}getTargetCount(e){return eb.resolve(this.targetCount)}getTargetData(e,t){const n=this.ei.get(t)||null;return eb.resolve(n)}addMatchingKeys(e,t,n){return this.ni.qr(t,n),eb.resolve()}removeMatchingKeys(e,t,n){this.ni.$r(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach((t=>{s.push(r.markPotentiallyOrphaned(e,t))})),eb.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),eb.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ni.Wr(t);return eb.resolve(n)}containsKey(e,t){return eb.resolve(this.ni.containsKey(t))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e,t){this.ii={},this.overlays={},this.si=new nb(0),this.oi=!1,this.oi=!0,this._i=new KE,this.referenceDelegate=e(this),this.ai=new ek(this),this.indexManager=new DE,this.remoteDocumentCache=function(e){return new YE(e)}((e=>this.referenceDelegate.ui(e))),this.serializer=new AE(t),this.ci=new WE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new GE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ii[e.toKey()];return n||(n=new JE(t,this.referenceDelegate),this.ii[e.toKey()]=n),n}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,n){hv("MemoryPersistence","Starting transaction:",e);const r=new nk(this.si.next());return this.referenceDelegate.li(),n(r).next((e=>this.referenceDelegate.hi(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Pi(e,t){return eb.or(Object.values(this.ii).map((n=>()=>n.containsKey(e,t))))}}class nk extends Yv{constructor(e){super(),this.currentSequenceNumber=e}}class rk{constructor(e){this.persistence=e,this.Ti=new QE,this.Ii=null}static Ei(e){return new rk(e)}get di(){if(this.Ii)return this.Ii;throw gv(60996)}addReference(e,t,n){return this.Ti.addReference(n,t),this.di.delete(n.toString()),eb.resolve()}removeReference(e,t,n){return this.Ti.removeReference(n,t),this.di.add(n.toString()),eb.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),eb.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach((e=>this.di.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.di.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return eb.forEach(this.di,(n=>{const r=Kv.fromPath(n);return this.Ai(e,r).next((e=>{e||t.removeEntry(r,Bv.min())}))})).next((()=>(this.Ii=null,t.apply(e))))}updateLimboDocument(e,t){return this.Ai(e,t).next((e=>{e?this.di.delete(t.toString()):this.di.add(t.toString())}))}ui(e){return 0}Ai(e,t){return eb.or([()=>eb.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class sk{constructor(e,t){this.persistence=e,this.Ri=new Bx((e=>function(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=ib(t)),t=ab(e.get(n),t);return ib(t)}(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=function(e,t){return new BE(e,t)}(this,t)}static Ei(e,t){return new sk(e,t)}li(){}hi(e){return eb.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Vr(e){let t=0;return this.Ar(e,(e=>{t++})).next((()=>t))}Ar(e,t){return eb.forEach(this.Ri,((n,r)=>this.gr(e,n,r).next((e=>e?eb.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.Xr(e,(r=>this.gr(e,r,t).next((e=>{e||(n++,s.removeEntry(r,Bv.min()))})))).next((()=>s.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),eb.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.Ri.set(n,e.currentSequenceNumber),eb.resolve()}removeReference(e,t,n){return this.Ri.set(n,e.currentSequenceNumber),eb.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),eb.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Hb(e.data.value)),t}gr(e,t,n){return eb.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.Ri.get(t);return eb.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ls=n,this.hs=r}static Ps(e,t){let n=Zx(),r=Zx();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new ak(e,t.fromCache,n,r)}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=vg()?8:function(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")>0?6:4}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.Rs(e,t).next((e=>{s.result=e})).next((()=>{if(!s.result)return this.Vs(e,t,r,n).next((e=>{s.result=e}))})).next((()=>{if(s.result)return;const n=new ik;return this.fs(e,t,n).next((r=>{if(s.result=r,this.Is)return this.gs(e,t,n,r.size)}))})).next((()=>s.result))}gs(e,t,n,r){return n.documentReadCount<this.Es?(dv()<=jg.DEBUG&&hv("QueryEngine","SDK will not create cache indexes for query:",Ux(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),eb.resolve()):(dv()<=jg.DEBUG&&hv("QueryEngine","Query:",Ux(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ds*r?(dv()<=jg.DEBUG&&hv("QueryEngine","The SDK decides to create cache indexes for query:",Ux(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ix(t))):eb.resolve())}Rs(e,t){if(Ax(t))return eb.resolve(null);let n=Ix(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Mx(t,null,"F"),n=Ix(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const s=Zx(...r);return this.As.getDocuments(e,s).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const a=this.ps(t,r);return this.ys(t,a,s,n.readTime)?this.Rs(e,Mx(t,null,"F")):this.ws(e,a,t,n)}))))})))))}Vs(e,t,n,r){return Ax(t)||r.isEqual(Bv.min())?eb.resolve(null):this.As.getDocuments(e,n).next((s=>{const a=this.ps(t,s);return this.ys(t,a,n,r)?eb.resolve(null):(dv()<=jg.DEBUG&&hv("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ux(t)),this.ws(e,a,t,function(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=Bv.fromTimestamp(1e9===r?new Vv(n+1,0):new Vv(n,r));return new Xv(s,Kv.empty(),t)}(r,-1)).next((e=>e)))}))}ps(e,t){let n=new fb(zx(e));return t.forEach(((t,r)=>{Fx(e,r)&&(n=n.add(r))})),n}ys(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}fs(e,t,n){return dv()<=jg.DEBUG&&hv("QueryEngine","Using full collection scan to execute query:",Ux(t)),this.As.getDocumentsMatchingQuery(e,t,Xv.min(),n)}ws(e,t,n,r){return this.As.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk="LocalStore";class ck{constructor(e,t,n,r){this.persistence=e,this.bs=t,this.serializer=r,this.Ss=new ub(Pv),this.Ds=new Bx((e=>Nx(e)),Tx),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(n)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HE(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ss)))}}async function uk(e,t){const n=bv(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((s=>(r=s,n.Fs(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const s=[],a=[];let i=Zx();for(const e of r){s.push(e.batchId);for(const t of e.mutations)i=i.add(t.key)}for(const e of t){a.push(e.batchId);for(const t of e.mutations)i=i.add(t.key)}return n.localDocuments.getDocuments(e,i).next((e=>({Ms:e,removedBatchIds:s,addedBatchIds:a})))}))}))}function dk(e){const t=bv(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.ai.getLastRemoteSnapshotVersion(e)))}function hk(e,t){const n=bv(e),r=t.snapshotVersion;let s=n.Ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const a=n.Cs.newChangeBuffer({trackRemovals:!0});s=n.Ss;const i=[];t.targetChanges.forEach(((a,o)=>{const l=s.get(o);if(!l)return;i.push(n.ai.removeMatchingKeys(e,a.removedDocuments,o).next((()=>n.ai.addMatchingKeys(e,a.addedDocuments,o))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(yb.EMPTY_BYTE_STRING,Bv.min()).withLastLimboFreeSnapshotVersion(Bv.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),s=s.insert(o,c),function(e,t,n){if(0===e.resumeToken.approximateByteSize())return!0;if(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8)return!0;return n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,a)&&i.push(n.ai.updateTargetData(e,c))}));let o=$x(),l=Zx();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&i.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),i.push(function(e,t,n){let r=Zx(),s=Zx();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=$x();return n.forEach(((n,a)=>{const i=e.get(n);a.isFoundDocument()!==i.isFoundDocument()&&(s=s.add(n)),a.isNoDocument()&&a.version.isEqual(Bv.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!i.isValidDocument()||a.version.compareTo(i.version)>0||0===a.version.compareTo(i.version)&&i.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):hv(lk,"Ignoring outdated watch update for ",n,". Current version:",i.version," Watch version:",a.version)})),{xs:r,Os:s}}))}(e,a,t.documentUpdates).next((e=>{o=e.xs,l=e.Os}))),!r.isEqual(Bv.min())){const t=n.ai.getLastRemoteSnapshotVersion(e).next((t=>n.ai.setTargetsMetadata(e,e.currentSequenceNumber,r)));i.push(t)}return eb.waitFor(i).next((()=>a.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,o,l))).next((()=>o))})).then((e=>(n.Ss=s,e)))}function fk(e,t){const n=bv(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}async function mk(e,t,n){const r=bv(e),s=r.Ss.get(t),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(e=>r.persistence.referenceDelegate.removeTarget(e,s)))}catch(e){if(!tb(e))throw e;hv(lk,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ss=r.Ss.remove(t),r.Ds.delete(s.target)}function pk(e,t,n){const r=bv(e);let s=Bv.min(),a=Zx();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=bv(e),s=r.Ds.get(n);return void 0!==s?eb.resolve(r.Ss.get(s)):r.ai.getTargetData(t,n)}(r,e,Ix(t)).next((t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(e,t.targetId).next((e=>{a=e}))})).next((()=>r.bs.getDocumentsMatchingQuery(e,t,n?s:Bv.min(),n?a:Zx()))).next((e=>(function(e,t,n){let r=e.vs.get(t)||Bv.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.vs.set(t,r)}(r,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,Ns:a})))))}class gk{constructor(){this.activeTargetIds=ew}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yk{constructor(){this.So=new gk,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,n){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new gk,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{vo(e){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk="ConnectivityMonitor";class xk{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){hv(bk,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){hv(bk,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wk=null;function Ek(){return null===wk?wk=268435456+Math.round(2147483648*Math.random()):wk++,"0x"+wk.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const kk="RestConnection",Sk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Nk{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${n}/databases/${r}`,this.qo=this.databaseId.database===Ab?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Qo(e,t,n,r,s){const a=Ek(),i=this.$o(e,t.toUriEncodedString());hv(kk,`Sending RPC '${e}' ${a}:`,i,n);const o={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};return this.Uo(o,r,s),this.Ko(e,i,o,n).then((t=>(hv(kk,`Received RPC '${e}' ${a}: `,t),t)),(t=>{throw mv(kk,`RPC '${e}' ${a} failed with error: `,t,"url: ",i,"request:",n),t}))}Wo(e,t,n,r,s,a){return this.Qo(e,t,n,r,s)}Uo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+cv,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}$o(e,t){const n=Sk[e];return`${this.Lo}/v1/${t}:${n}`}terminate(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck="WebChannelConnection";class Rk extends Nk{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,n,r){const s=Ek();return new Promise(((a,i)=>{const o=new Jy;o.setWithCredentials(!0),o.listenOnce(Zy.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case ev.NO_ERROR:const t=o.getResponseJson();hv(Ck,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(t)),a(t);break;case ev.TIMEOUT:hv(Ck,`RPC '${e}' ${s} timed out`),i(new wv(xv.DEADLINE_EXCEEDED,"Request time out"));break;case ev.HTTP_ERROR:const n=o.getStatus();if(hv(Ck,`RPC '${e}' ${s} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(xv).indexOf(t)>=0?t:xv.UNKNOWN}(t.status);i(new wv(e,t.message))}else i(new wv(xv.UNKNOWN,"Server responded with status "+o.getStatus()))}else i(new wv(xv.UNAVAILABLE,"Connection failed."));break;default:gv(9055,{s_:e,streamId:s,o_:o.getLastErrorCode(),__:o.getLastError()})}}finally{hv(Ck,`RPC '${e}' ${s} completed.`)}}));const l=JSON.stringify(r);hv(Ck,`RPC '${e}' ${s} sending request:`,r),o.send(t,"POST",l,n,15)}))}a_(e,t,n){const r=Ek(),s=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=sv(),i=rv(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Uo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=s.join("");hv(Ck,`Creating RPC '${e}' stream ${r}: ${c}`,o);const u=a.createWebChannel(c,o);let d=!1,h=!1;const f=new Tk({Go:t=>{h?hv(Ck,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(hv(Ck,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),hv(Ck,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},zo:()=>u.close()}),m=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return m(u,Yy.EventType.OPEN,(()=>{h||(hv(Ck,`RPC '${e}' stream ${r} transport opened.`),f.t_())})),m(u,Yy.EventType.CLOSE,(()=>{h||(h=!0,hv(Ck,`RPC '${e}' stream ${r} transport closed`),f.r_())})),m(u,Yy.EventType.ERROR,(t=>{h||(h=!0,mv(Ck,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,"Message:",t.message),f.r_(new wv(xv.UNAVAILABLE,"The operation could not be completed")))})),m(u,Yy.EventType.MESSAGE,(t=>{var n;if(!h){const s=t.data[0];vv(!!s,16349);const a=s,i=(null==a?void 0:a.error)||(null===(n=a[0])||void 0===n?void 0:n.error);if(i){hv(Ck,`RPC '${e}' stream ${r} received error:`,i);const t=i.status;let n=function(e){const t=Lw[e];if(void 0!==t)return Uw(t)}(t),s=i.message;void 0===n&&(n=xv.INTERNAL,s="Unknown error status: "+t+" with message "+i.message),h=!0,f.r_(new wv(n,s)),u.close()}else hv(Ck,`RPC '${e}' stream ${r} received:`,s),f.i_(s)}})),m(i,nv.STAT_EVENT,(t=>{t.stat===tv.PROXY?hv(Ck,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===tv.NOPROXY&&hv(Ck,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.n_()}),0),f}}function jk(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(e){return new nE(e,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e,t,n=1e3,r=1.5,s=6e4){this.bi=e,this.timerId=t,this.u_=n,this.c_=r,this.l_=s,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),n=Math.max(0,Date.now()-this.T_),r=Math.max(0,t-n);r>0&&hv("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,r,(()=>(this.T_=Date.now(),e()))),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){null!==this.P_&&(this.P_.skipDelay(),this.P_=null)}cancel(){null!==this.P_&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk="PersistentStream";class Ik{constructor(e,t,n,r,s,a,i,o){this.bi=e,this.R_=n,this.V_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=i,this.listener=o,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new _k(e,t)}w_(){return 1===this.state||5===this.state||this.b_()}b_(){return 2===this.state||3===this.state}start(){this.p_=0,4!==this.state?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&null===this.f_&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,(()=>this.C_())))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,4!==e?this.y_.reset():t&&t.code===xv.RESOURCE_EXHAUSTED?(fv(t.toString()),fv("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===xv.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.m_===t&&this.B_(e,n)}),(t=>{e((()=>{const e=new wv(xv.UNKNOWN,"Fetching auth token failed: "+t.message);return this.L_(e)}))}))}B_(e,t){const n=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo((()=>{n((()=>this.listener.jo()))})),this.stream.Jo((()=>{n((()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,(()=>(this.b_()&&(this.state=3),Promise.resolve()))),this.listener.Jo())))})),this.stream.Zo((e=>{n((()=>this.L_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.p_?this.q_(e):this.onNext(e)))}))}S_(){this.state=5,this.y_.E_((async()=>{this.state=0,this.start()}))}L_(e){return hv(Dk,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget((()=>this.m_===e?t():(hv(Dk,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Pk extends Ik{constructor(e,t,n,r,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,a),this.serializer=s}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:gv(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(vv(void 0===t||"string"==typeof t,58123),yb.fromBase64String(t||"")):(vv(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),yb.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),i=t.targetChange.cause,o=i&&function(e){const t=void 0===e.code?xv.UNKNOWN:Uw(e.code);return new wv(t,e.message||"")}(i);n=new Kw(r,s,a,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=hE(e,r.document.name),a=oE(r.document.updateTime),i=r.document.createTime?oE(r.document.createTime):Bv.min(),o=new Zb({mapValue:{fields:r.document.fields}}),l=tx.newFoundDocument(s,a,i,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Ww(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=hE(e,r.document),a=r.readTime?oE(r.readTime):Bv.min(),i=tx.newNoDocument(s,a),o=r.removedTargetIds||[];n=new Ww([],o,i.key,i)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=hE(e,r.document),a=r.removedTargetIds||[];n=new Ww([],a,s,null)}else{if(!("filter"in t))return gv(11601,{Vt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,a=new Mw(r,s),i=e.targetId;n=new Gw(i,a)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Bv.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Bv.min():t.readTime?oE(t.readTime):Bv.min()}(e);return this.listener.Q_(t,n)}U_(e){const t={};t.database=mE(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Cx(r)?{documents:yE(e,r)}:{query:vE(e,r).gt},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=aE(e,t.resumeToken);const r=rE(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Bv.min())>0){n.readTime=sE(e,t.snapshotVersion.toTimestamp());const r=rE(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gv(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.F_(t)}K_(e){const t={};t.database=mE(this.serializer),t.removeTarget=e,this.F_(t)}}class Mk extends Ik{constructor(e,t,n,r,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,a),this.serializer=s}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return vv(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,vv(!e.writeResults||0===e.writeResults.length,55816),this.listener.z_()}onNext(e){vv(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=function(e,t){return e&&e.length>0?(vv(void 0!==t,14353),e.map((e=>function(e,t){let n=e.updateTime?oE(e.updateTime):oE(t);return n.isEqual(Bv.min())&&(n=oE(t)),new gw(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=oE(e.commitTime);return this.listener.j_(n,t)}H_(){const e={};e.database=mE(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>function(e,t){let n;if(t instanceof Nw)n={update:gE(e,t.key,t.value)};else if(t instanceof Aw)n={delete:dE(e,t.key)};else if(t instanceof Tw)n={update:gE(e,t.key,t.data),updateMask:CE(t.fieldMask)};else{if(!(t instanceof _w))return gv(16599,{ft:t.type});n={verify:dE(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof lw)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof cw)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof dw)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof fw)return{fieldPath:t.field.canonicalString(),increment:n.Re};throw gv(20930,{transform:t.transform})}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:iE(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:gv(27497)}(e,t.precondition)),n}(this.serializer,e)))};this.F_(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{}class Ok extends Lk{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.J_=!1}Y_(){if(this.J_)throw new wv(xv.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,n,r){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Qo(e,cE(t,n),r,s,a))).catch((e=>{throw"FirebaseError"===e.name?(e.code===xv.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new wv(xv.UNKNOWN,e.toString())}))}Wo(e,t,n,r,s){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,i])=>this.connection.Wo(e,cE(t,n),r,a,i,s))).catch((e=>{throw"FirebaseError"===e.name?(e.code===xv.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new wv(xv.UNKNOWN,e.toString())}))}terminate(){this.J_=!0,this.connection.terminate()}}class Uk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){0===this.Z_&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve()))))}ia(e){"Online"===this.state?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,"Online"===e&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(fv(t),this.ea=!1):hv("OnlineStateTracker",t)}sa(){null!==this.X_&&(this.X_.cancel(),this.X_=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk="RemoteStore";class zk{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=s,this.ca.vo((e=>{n.enqueueAndForget((async()=>{Qk(this)&&(hv(Fk,"Restarting streams for network reachability change."),await async function(e){const t=bv(e);t.aa.add(4),await Bk(t),t.la.set("Unknown"),t.aa.delete(4),await Vk(t)}(this))}))})),this.la=new Uk(n,r)}}async function Vk(e){if(Qk(e))for(const t of e.ua)await t(!0)}async function Bk(e){for(const t of e.ua)await t(!1)}function qk(e,t){const n=bv(e);n._a.has(t.targetId)||(n._a.set(t.targetId,t),Kk(n)?Gk(n):fS(n).b_()&&Hk(n,t))}function $k(e,t){const n=bv(e),r=fS(n);n._a.delete(t),r.b_()&&Wk(n,t),0===n._a.size&&(r.b_()?r.v_():Qk(n)&&n.la.set("Unknown"))}function Hk(e,t){if(e.ha.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Bv.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}fS(e).U_(t)}function Wk(e,t){e.ha.Ke(t),fS(e).K_(t)}function Gk(e){e.ha=new Xw({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e._a.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),fS(e).start(),e.la.ta()}function Kk(e){return Qk(e)&&!fS(e).w_()&&e._a.size>0}function Qk(e){return 0===bv(e).aa.size}function Xk(e){e.ha=void 0}async function Jk(e){e.la.set("Online")}async function Yk(e){e._a.forEach(((t,n)=>{Hk(e,t)}))}async function Zk(e,t){Xk(e),Kk(e)?(e.la.ia(t),Gk(e)):e.la.set("Unknown")}async function eS(e,t,n){if(e.la.set("Online"),t instanceof Kw&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e._a.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e._a.delete(r),e.ha.removeTarget(r))}(e,t)}catch(n){hv(Fk,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await tS(e,n)}else if(t instanceof Ww?e.ha.Xe(t):t instanceof Gw?e.ha.ot(t):e.ha.nt(t),!n.isEqual(Bv.min()))try{const t=await dk(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.ha.It(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e._a.get(r);s&&e._a.set(r,s.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e._a.get(t);if(!r)return;e._a.set(t,r.withResumeToken(yb.EMPTY_BYTE_STRING,r.snapshotVersion)),Wk(e,t);const s=new jE(r.target,t,n,r.sequenceNumber);Hk(e,s)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){hv(Fk,"Failed to raise snapshot:",t),await tS(e,t)}}async function tS(e,t,n){if(!tb(t))throw t;e.aa.add(1),await Bk(e),e.la.set("Offline"),n||(n=()=>dk(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{hv(Fk,"Retrying IndexedDB access"),await n(),e.aa.delete(1),await Vk(e)}))}function nS(e,t){return t().catch((n=>tS(e,n,t)))}async function rS(e){const t=bv(e),n=mS(t);let r=t.oa.length>0?t.oa[t.oa.length-1].batchId:-1;for(;sS(t);)try{const e=await fk(t.localStore,r);if(null===e){0===t.oa.length&&n.v_();break}r=e.batchId,aS(t,e)}catch(e){await tS(t,e)}iS(t)&&oS(t)}function sS(e){return Qk(e)&&e.oa.length<10}function aS(e,t){e.oa.push(t);const n=mS(e);n.b_()&&n.W_&&n.G_(t.mutations)}function iS(e){return Qk(e)&&!mS(e).w_()&&e.oa.length>0}function oS(e){mS(e).start()}async function lS(e){mS(e).H_()}async function cS(e){const t=mS(e);for(const n of e.oa)t.G_(n.mutations)}async function uS(e,t,n){const r=e.oa.shift(),s=Iw.from(r,t,n);await nS(e,(()=>e.remoteSyncer.applySuccessfulWrite(s))),await rS(e)}async function dS(e,t){t&&mS(e).W_&&await async function(e,t){if(function(e){return function(e){switch(e){case xv.OK:return gv(64938);case xv.CANCELLED:case xv.UNKNOWN:case xv.DEADLINE_EXCEEDED:case xv.RESOURCE_EXHAUSTED:case xv.INTERNAL:case xv.UNAVAILABLE:case xv.UNAUTHENTICATED:return!1;case xv.INVALID_ARGUMENT:case xv.NOT_FOUND:case xv.ALREADY_EXISTS:case xv.PERMISSION_DENIED:case xv.FAILED_PRECONDITION:case xv.ABORTED:case xv.OUT_OF_RANGE:case xv.UNIMPLEMENTED:case xv.DATA_LOSS:return!0;default:return gv(15467,{code:e})}}(e)&&e!==xv.ABORTED}(t.code)){const n=e.oa.shift();mS(e).D_(),await nS(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await rS(e)}}(e,t),iS(e)&&oS(e)}async function hS(e,t){const n=bv(e);n.asyncQueue.verifyOperationInProgress(),hv(Fk,"RemoteStore received new credentials");const r=Qk(n);n.aa.add(3),await Bk(n),r&&n.la.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.aa.delete(3),await Vk(n)}function fS(e){return e.Pa||(e.Pa=function(e,t,n){const r=bv(e);return r.Y_(),new Pk(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}(e.datastore,e.asyncQueue,{jo:Jk.bind(null,e),Jo:Yk.bind(null,e),Zo:Zk.bind(null,e),Q_:eS.bind(null,e)}),e.ua.push((async t=>{t?(e.Pa.D_(),Kk(e)?Gk(e):e.la.set("Unknown")):(await e.Pa.stop(),Xk(e))}))),e.Pa}function mS(e){return e.Ta||(e.Ta=function(e,t,n){const r=bv(e);return r.Y_(),new Mk(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{jo:()=>Promise.resolve(),Jo:lS.bind(null,e),Zo:dS.bind(null,e),z_:cS.bind(null,e),j_:uS.bind(null,e)}),e.ua.push((async t=>{t?(e.Ta.D_(),await rS(e)):(await e.Ta.stop(),e.oa.length>0&&(hv(Fk,`Stopping write stream with ${e.oa.length} pending writes`),e.oa=[]))}))),e.Ta
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class pS{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new Ev,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const a=Date.now()+n,i=new pS(e,t,a,r,s);return i.start(n),i}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new wv(xv.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gS(e,t){if(fv("AsyncQueue",`${t}: ${e}`),tb(e))return new wv(xv.UNAVAILABLE,`${t}: ${e}`);throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{static emptySet(e){return new yS(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Kv.comparator(t.key,n.key):(e,t)=>Kv.comparator(e.key,t.key),this.keyedMap=Wx(),this.sortedSet=new ub(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof yS))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new yS;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(){this.Ia=new ub(Kv.comparator)}track(e){const t=e.doc.key,n=this.Ia.get(t);n?0!==e.type&&3===n.type?this.Ia=this.Ia.insert(t,e):3===e.type&&1!==n.type?this.Ia=this.Ia.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Ia=this.Ia.remove(t):1===e.type&&2===n.type?this.Ia=this.Ia.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):gv(63341,{Vt:e,Ea:n}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal(((t,n)=>{e.push(n)})),e}}class bS{constructor(e,t,n,r,s,a,i,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=i,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const a=[];return t.forEach((e=>{a.push({type:0,doc:e})})),new bS(e,t,yS.emptySet(t),a,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lx(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some((e=>e.ma()))}}class wS{constructor(){this.queries=ES(),this.onlineState="Unknown",this.fa=new Set}terminate(){!function(e,t){const n=bv(e),r=n.queries;n.queries=ES(),r.forEach(((e,n)=>{for(const r of n.Ra)r.onError(t)}))}(this,new wv(xv.ABORTED,"Firestore shutting down"))}}function ES(){return new Bx((e=>Ox(e)),Lx)}async function kS(e,t){const n=bv(e);let r=3;const s=t.query;let a=n.queries.get(s);a?!a.Va()&&t.ma()&&(r=2):(a=new xS,r=t.ma()?0:1);try{switch(r){case 0:a.Aa=await n.onListen(s,!0);break;case 1:a.Aa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=gS(e,`Initialization of query '${Ux(t.query)}' failed`);return void t.onError(n)}n.queries.set(s,a),a.Ra.push(t),t.ga(n.onlineState),a.Aa&&t.pa(a.Aa)&&CS(n)}async function SS(e,t){const n=bv(e),r=t.query;let s=3;const a=n.queries.get(r);if(a){const e=a.Ra.indexOf(t);e>=0&&(a.Ra.splice(e,1),0===a.Ra.length?s=t.ma()?0:1:!a.Va()&&t.ma()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function NS(e,t){const n=bv(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.Ra)e.pa(s)&&(r=!0);t.Aa=s}}r&&CS(n)}function TS(e,t,n){const r=bv(e),s=r.queries.get(t);if(s)for(const a of s.Ra)a.onError(n);r.queries.delete(t)}function CS(e){e.fa.forEach((e=>{e.next()}))}var RS,jS;(jS=RS||(RS={})).ya="default",jS.Cache="cache";class AS{constructor(e,t,n){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=n||{}}pa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new bS(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache)return!0;if(!this.ma())return!0;const n="Offline"!==t;return(!this.options.Fa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Ca(e){e=bS.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==RS.Cache}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e){this.key=e}}class DS{constructor(e){this.key=e}}class IS{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=Zx(),this.mutatedKeys=Zx(),this.Ua=zx(e),this.Ka=new yS(this.Ua)}get Wa(){return this.qa}Ga(e,t){const n=t?t.za:new vS,r=t?t.Ka:this.Ka;let s=t?t.mutatedKeys:this.mutatedKeys,a=r,i=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=Fx(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.ja(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Ua(u,o)>0||l&&this.Ua(u,l)<0)&&(i=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(i=!0)),f&&(u?(a=a.add(u),s=h?s.add(e):s.delete(e)):(a=a.delete(e),s=s.delete(e)))})),null!==this.query.limit)for(;a.size>this.query.limit;){const e="F"===this.query.limitType?a.last():a.first();a=a.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{Ka:a,za:n,ys:i,mutatedKeys:s}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const a=e.za.da();a.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gv(20277,{Vt:e})}};return n(e)-n(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e.type,t.type)||this.Ua(e.doc,t.doc))),this.Ha(n),r=null!=r&&r;const i=t&&!r?this.Ja():[],o=0===this.$a.size&&this.current&&!r?1:0,l=o!==this.Qa;return this.Qa=o,0!==a.length||l?{snapshot:new bS(this.query,e.Ka,s,a,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ya:i}:{Ya:i}}ga(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new vS,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach((e=>this.qa=this.qa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.qa=this.qa.delete(e))),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=Zx(),this.Ka.forEach((e=>{this.Za(e.key)&&(this.$a=this.$a.add(e.key))}));const t=[];return e.forEach((e=>{this.$a.has(e)||t.push(new DS(e))})),this.$a.forEach((n=>{e.has(n)||t.push(new _S(n))})),t}Xa(e){this.qa=e.Ns,this.$a=Zx();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return bS.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,0===this.Qa,this.hasCachedResults)}}const PS="SyncEngine";class MS{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class LS{constructor(e){this.key=e,this.tu=!1}}class OS{constructor(e,t,n,r,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.nu={},this.ru=new Bx((e=>Ox(e)),Lx),this.iu=new Map,this.su=new Set,this.ou=new ub(Kv.comparator),this._u=new Map,this.au=new QE,this.uu={},this.cu=new Map,this.lu=OE.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return!0===this.hu}}async function US(e,t,n=!0){const r=aN(e);let s;const a=r.ru.get(t);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.eu()):s=await zS(r,t,n,!0),s}async function FS(e,t){const n=aN(e);await zS(n,t,!0,!1)}async function zS(e,t,n,r){const s=await function(e,t){const n=bv(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.ai.getTargetData(e,t).next((s=>s?(r=s,eb.resolve(r)):n.ai.allocateTargetId(e).next((s=>(r=new jE(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.ai.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ss.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ss=n.Ss.insert(e.targetId,e),n.Ds.set(t,e.targetId)),e}))}(e.localStore,Ix(t)),a=s.targetId,i=e.sharedClientState.addLocalQueryTarget(a,n);let o;return r&&(o=await async function(e,t,n,r,s){e.Pu=(t,n,r)=>async function(e,t,n,r){let s=t.view.Ga(n);s.ys&&(s=await pk(e.localStore,t.query,!1).then((({documents:e})=>t.view.Ga(e,s))));const a=r&&r.targetChanges.get(t.targetId),i=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,a,i);return ZS(e,t.targetId,o.Ya),o.snapshot}(e,t,n,r);const a=await pk(e.localStore,t,!0),i=new IS(t,a.Ns),o=i.Ga(a.documents),l=Hw.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=i.applyChanges(o,e.isPrimaryClient,l);ZS(e,n,c.Ya);const u=new MS(t,n,i);return e.ru.set(t,u),e.iu.has(n)?e.iu.get(n).push(t):e.iu.set(n,[t]),c.snapshot}(e,t,a,"current"===i,s.resumeToken)),e.isPrimaryClient&&n&&qk(e.remoteStore,s),o}async function VS(e,t,n){const r=bv(e),s=r.ru.get(t),a=r.iu.get(s.targetId);if(a.length>1)return r.iu.set(s.targetId,a.filter((e=>!Lx(e,t)))),void r.ru.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await mk(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&$k(r.remoteStore,s.targetId),JS(r,s.targetId)})).catch(Zv)):(JS(r,s.targetId),await mk(r.localStore,s.targetId,!0))}async function BS(e,t){const n=bv(e),r=n.ru.get(t),s=n.iu.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),$k(n.remoteStore,r.targetId))}async function qS(e,t,n){const r=function(e){const t=bv(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=GS.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=KS.bind(null,t),t}(e);try{const e=await function(e,t){const n=bv(e),r=Vv.now(),s=t.reduce(((e,t)=>e.add(t.key)),Zx());let a,i;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let o=$x(),l=Zx();return n.Cs.getEntries(e,s).next((e=>{o=e,o.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,o))).next((s=>{a=s;const i=[];for(const e of t){const t=kw(e,a.get(e.key).overlayedDocument);null!=t&&i.push(new Tw(e.key,t,ex(t.value.mapValue),yw.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,i,t)})).next((t=>{i=t;const r=t.applyToLocalDocumentSet(a,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:i.batchId,changes:Gx(a)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.uu[e.currentUser.toKey()];r||(r=new ub(Pv)),r=r.insert(t,n),e.uu[e.currentUser.toKey()]=r}(r,e.batchId,n),await nN(r,e.changes),await rS(r.remoteStore)}catch(e){const t=gS(e,"Failed to persist write");n.reject(t)}}async function $S(e,t){const n=bv(e);try{const e=await hk(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n._u.get(t);r&&(vv(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.tu=!0:e.modifiedDocuments.size>0?vv(r.tu,14607):e.removedDocuments.size>0&&(vv(r.tu,42227),r.tu=!1))})),await nN(n,e,t)}catch(e){await Zv(e)}}function HS(e,t,n){const r=bv(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ru.forEach(((n,r)=>{const s=r.view.ga(t);s.snapshot&&e.push(s.snapshot)})),function(e,t){const n=bv(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const s of n.Ra)s.ga(t)&&(r=!0)})),r&&CS(n)}(r.eventManager,t),e.length&&r.nu.Q_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function WS(e,t,n){const r=bv(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r._u.get(t),a=s&&s.key;if(a){let e=new ub(Kv.comparator);e=e.insert(a,tx.newNoDocument(a,Bv.min()));const n=Zx().add(a),s=new $w(Bv.min(),new Map,new ub(Pv),e,n);await $S(r,s),r.ou=r.ou.remove(a),r._u.delete(t),tN(r)}else await mk(r.localStore,t,!1).then((()=>JS(r,t,n))).catch(Zv)}async function GS(e,t){const n=bv(e),r=t.batch.batchId;try{const e=await function(e,t){const n=bv(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),s=n.Cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,a=s.keys();let i=eb.resolve();return a.forEach((e=>{i=i.next((()=>r.getEntry(t,e))).next((t=>{const a=n.docVersions.get(e);vv(null!==a,48541),t.version.compareTo(a)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),i.next((()=>e.mutationQueue.removeMutationBatch(t,s)))}(n,e,t,s).next((()=>s.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Zx();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);XS(n,r,null),QS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await nN(n,e)}catch(e){await Zv(e)}}async function KS(e,t,n){const r=bv(e);try{const e=await function(e,t){const n=bv(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(vv(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);XS(r,t,n),QS(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await nN(r,e)}catch(n){await Zv(n)}}function QS(e,t){(e.cu.get(t)||[]).forEach((e=>{e.resolve()})),e.cu.delete(t)}function XS(e,t,n){const r=bv(e);let s=r.uu[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.uu[r.currentUser.toKey()]=s}}function JS(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.iu.get(t))e.ru.delete(r),n&&e.nu.Tu(r,n);e.iu.delete(t),e.isPrimaryClient&&e.au.Ur(t).forEach((t=>{e.au.containsKey(t)||YS(e,t)}))}function YS(e,t){e.su.delete(t.path.canonicalString());const n=e.ou.get(t);null!==n&&($k(e.remoteStore,n),e.ou=e.ou.remove(t),e._u.delete(n),tN(e))}function ZS(e,t,n){for(const r of n)r instanceof _S?(e.au.addReference(r.key,t),eN(e,r)):r instanceof DS?(hv(PS,"Document no longer in limbo: "+r.key),e.au.removeReference(r.key,t),e.au.containsKey(r.key)||YS(e,r.key)):gv(19791,{Iu:r})}function eN(e,t){const n=t.key,r=n.path.canonicalString();e.ou.get(n)||e.su.has(r)||(hv(PS,"New document in limbo: "+n),e.su.add(r),tN(e))}function tN(e){for(;e.su.size>0&&e.ou.size<e.maxConcurrentLimboResolutions;){const t=e.su.values().next().value;e.su.delete(t);const n=new Kv(Hv.fromString(t)),r=e.lu.next();e._u.set(r,new LS(n)),e.ou=e.ou.insert(n,r),qk(e.remoteStore,new jE(Ix(jx(n.path)),r,"TargetPurposeLimboResolution",nb.le))}}async function nN(e,t,n){const r=bv(e),s=[],a=[],i=[];r.ru.isEmpty()||(r.ru.forEach(((e,o)=>{i.push(r.Pu(o,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const s=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,s?"current":"not-current")}if(e){s.push(e);const t=ak.Ps(o.targetId,e);a.push(t)}})))})),await Promise.all(i),r.nu.Q_(s),await async function(e,t){const n=bv(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>eb.forEach(t,(t=>eb.forEach(t.ls,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>eb.forEach(t.hs,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!tb(e))throw e;hv(lk,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ss.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.Ss=n.Ss.insert(e,s)}}}(r.localStore,a))}async function rN(e,t){const n=bv(e);if(!n.currentUser.isEqual(t)){hv(PS,"User change. New user:",t.toKey());const e=await uk(n.localStore,t);n.currentUser=t,function(e,t){e.cu.forEach((e=>{e.forEach((e=>{e.reject(new wv(xv.CANCELLED,t))}))})),e.cu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await nN(n,e.Ms)}}function sN(e,t){const n=bv(e),r=n._u.get(t);if(r&&r.tu)return Zx().add(r.key);{let e=Zx();const r=n.iu.get(t);if(!r)return e;for(const t of r){const r=n.ru.get(t);e=e.unionWith(r.view.Wa)}return e}}function aN(e){const t=bv(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=$S.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=sN.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=WS.bind(null,t),t.nu.Q_=NS.bind(null,t.eventManager),t.nu.Tu=TS.bind(null,t.eventManager),t}class iN{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ak(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return function(e,t,n,r){return new ck(e,t,n,r)}(this.persistence,new ok,e.initialUser,this.serializer)}Ru(e){return new tk(rk.Ei,this.serializer)}Au(e){return new yk}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}iN.provider={build:()=>new iN};class oN extends iN{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){vv(this.persistence.referenceDelegate instanceof sk,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new VE(n,e.asyncQueue,t)}Ru(e){const t=void 0!==this.cacheSizeBytes?LE.withCacheSize(this.cacheSizeBytes):LE.DEFAULT;return new tk((e=>sk.Ei(e,t)),this.serializer)}}class lN{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>HS(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=rN.bind(null,this.syncEngine),await async function(e,t){const n=bv(e);t?(n.aa.delete(2),await Vk(n)):t||(n.aa.add(2),await Bk(n),n.la.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new wS}createDatastore(e){const t=Ak(e.databaseInfo.databaseId),n=function(e){return new Rk(e)}(e.databaseInfo);return function(e,t,n,r){return new Ok(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new zk(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,(e=>HS(this.syncEngine,e,0)),xk.C()?new xk:new vk)}createSyncEngine(e,t){return function(e,t,n,r,s,a,i){const o=new OS(e,t,n,r,s,a);return i&&(o.hu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=bv(e);hv(Fk,"RemoteStore shutting down."),t.aa.add(5),await Bk(t),t.ca.shutdown(),t.la.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}lN.provider={build:()=>new lN};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class cN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):fv("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN="FirestoreClient";class dN{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=lv.UNAUTHENTICATED,this.clientId=Iv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,(async e=>{hv(uN,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(hv(uN,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ev;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=gS(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function hN(e,t){e.asyncQueue.verifyOperationInProgress(),hv(uN,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await uk(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function fN(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){hv(uN,"Using user provided OfflineComponentProvider");try{await hN(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(e){return"FirebaseError"===e.name?e.code===xv.FAILED_PRECONDITION||e.code===xv.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(r))throw r;mv("Error using user provided cache. Falling back to memory cache: "+r),await hN(e,new iN)}}else hv(uN,"Using default OfflineComponentProvider"),await hN(e,new oN(void 0));return e._offlineComponents}(e);hv(uN,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>hS(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>hS(t.remoteStore,n))),e._onlineComponents=t}async function mN(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(hv(uN,"Using user provided OnlineComponentProvider"),await fN(e,e._uninitializedComponentsProvider._online)):(hv(uN,"Using default OnlineComponentProvider"),await fN(e,new lN))),e._onlineComponents}async function pN(e){const t=await mN(e),n=t.eventManager;return n.onListen=US.bind(null,t.syncEngine),n.onUnlisten=VS.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=FS.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=BS.bind(null,t.syncEngine),n}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function gN(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const yN=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(e,t,n){if(!n)throw new wv(xv.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function bN(e){if(!Kv.isDocumentKey(e))throw new wv(xv.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function xN(e){if(Kv.isDocumentKey(e))throw new wv(xv.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function wN(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":gv(12329,{type:typeof e})}function EN(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new wv(xv.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wN(e);throw new wv(xv.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN="firestore.googleapis.com",SN=!0;class NN{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new wv(xv.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kN,this.ssl=SN}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:SN;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=ME;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new wv(xv.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new wv(xv.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gN(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new wv(xv.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new wv(xv.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new wv(xv.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class TN{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new NN({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new wv(xv.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new wv(xv.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new NN(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Sv;switch(e.type){case"firstParty":return new Rv(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new wv(xv.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=yN.get(e);t&&(hv("ComponentProvider","Removing Datastore"),yN.delete(e),t.terminate())}(this),Promise.resolve()}}function CN(e,t,n,r={}){var s;const a=(e=EN(e,TN))._getSettings(),i=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),o=`${t}:${n}`;a.host!==kN&&a.host!==o&&mv("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},a),{host:o,ssl:!1,emulatorOptions:r});if(!Eg(l,i)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=lv.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[dg(JSON.stringify({alg:"none",type:"JWT"})),dg(JSON.stringify(a)),""].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const a=r.mockUserToken.sub||r.mockUserToken.user_id;if(!a)throw new wv(xv.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new lv(a)}e._authCredentials=new Nv(new kv(t,n))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new RN(this.firestore,e,this._query)}}class jN{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new AN(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jN(this.firestore,e,this._key)}}class AN extends RN{constructor(e,t,n){super(e,t,jx(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jN(this.firestore,null,new Kv(e))}withConverter(e){return new AN(this.firestore,e,this._path)}}function _N(e,t,...n){if(e=Sg(e),vN("collection","path",t),e instanceof TN){const r=Hv.fromString(t,...n);return xN(r),new AN(e,null,r)}{if(!(e instanceof jN||e instanceof AN))throw new wv(xv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Hv.fromString(t,...n));return xN(r),new AN(e.firestore,null,r)}}function DN(e,t,...n){if(e=Sg(e),1===arguments.length&&(t=Iv.newId()),vN("doc","path",t),e instanceof TN){const r=Hv.fromString(t,...n);return bN(r),new jN(e,null,new Kv(r))}{if(!(e instanceof jN||e instanceof AN))throw new wv(xv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Hv.fromString(t,...n));return bN(r),new jN(e.firestore,e instanceof AN?e.converter:null,new Kv(r))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN="AsyncQueue";class PN{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new _k(this,"async_queue_retry"),this.ju=()=>{const e=jk();e&&hv(IN,"Visibility state changed to "+e.visibilityState),this.y_.A_()},this.Hu=e;const t=jk();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=jk();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise((()=>{}));const t=new Ev;return this.Yu((()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Qu.push(e),this.Zu())))}async Zu(){if(0!==this.Qu.length){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!tb(e))throw e;hv(IN,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_((()=>this.Zu()))}}Yu(e){const t=this.Hu.then((()=>(this.Wu=!0,e().catch((e=>{throw this.Ku=e,this.Wu=!1,fv("INTERNAL UNHANDLED ERROR: ",MN(e)),e})).then((e=>(this.Wu=!1,e))))));return this.Hu=t,t}enqueueAfterDelay(e,t,n){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const r=pS.createAndSchedule(this,e,t,n,(e=>this.Xu(e)));return this.Uu.push(r),r}Ju(){this.Ku&&gv(47125,{ec:MN(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do{e=this.Hu,await e}while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then((()=>{this.Uu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Uu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.tc()}))}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function MN(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function LN(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,["next","error","complete"])}class ON extends TN{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new PN,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new PN(e),this._firestoreClient=void 0,await e}}}function UN(e,t){const n="object"==typeof e?e:function(e=Cy){const t=jy.get(e);if(!t&&e===Cy&&gg())return Ly();if(!t)throw Py.create("no-app",{appName:e});return t}(),r="string"==typeof e?e:Ab,s=function(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const e=pg("firestore");e&&CN(s,...e)}return s}function FN(e){if(e._terminated)throw new wv(xv.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||function(e){var t,n,r;const s=e._freezeSettings(),a=function(e,t,n,r){return new jb(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,gN(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new dN(e._authCredentials,e._appCheckCredentials,e._queue,a,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e),e._firestoreClient}class zN{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zN(yb.fromBase64String(e))}catch(e){throw new wv(xv.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new zN(yb.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new wv(xv.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gv(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e){this._methodName=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new wv(xv.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new wv(xv.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pv(this._lat,e._lat)||Pv(this._long,e._long)}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN=/^__.*__$/;class WN{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Tw(e,this.data,this.fieldMask,t,this.fieldTransforms):new Nw(e,this.data,t,this.fieldTransforms)}}class GN{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Tw(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function KN(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gv(40011,{oc:e})}}class QN{constructor(e,t,n,r,s,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this._c(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new QN(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ac({path:n,cc:!1});return r.lc(e),r}hc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ac({path:n,cc:!1});return r._c(),r}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return oT(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(0===e.length)throw this.Tc("Document fields must not be empty");if(KN(this.oc)&&HN.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class XN{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Ak(e)}dc(e,t,n,r=!1){return new QN({oc:e,methodName:t,Ec:n,path:Gv.emptyPath(),cc:!1,Ic:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function JN(e){const t=e._freezeSettings(),n=Ak(e._databaseId);return new XN(e._databaseId,!!t.ignoreUndefinedProperties,n)}function YN(e,t,n,r,s,a={}){const i=e.dc(a.merge||a.mergeFields?2:0,t,n,s);rT("Data must be an object, but it was:",i,r);const o=tT(r,i);let l,c;if(a.merge)l=new pb(i.fieldMask),c=i.fieldTransforms;else if(a.mergeFields){const e=[];for(const r of a.mergeFields){const s=sT(t,r,n);if(!i.contains(s))throw new wv(xv.INVALID_ARGUMENT,`Field '${s}' is specified in your field mask but missing from your input data.`);lT(e,s)||e.push(s)}l=new pb(e),c=i.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=i.fieldTransforms;return new WN(new Zb(o),l,c)}class ZN extends BN{_toFieldTransform(e){if(2!==e.oc)throw 1===e.oc?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ZN}}function eT(e,t){if(nT(e=Sg(e)))return rT("Unsupported field value:",t,e),tT(e,t);if(e instanceof BN)return function(e,t){if(!KN(t.oc))throw t.Tc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Tc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.cc&&4!==t.oc)throw t.Tc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=eT(s,t.Pc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Sg(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return rw(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Vv.fromDate(e);return{timestampValue:sE(t.serializer,n)}}if(e instanceof Vv){const n=new Vv(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:sE(t.serializer,n)}}if(e instanceof qN)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof zN)return{bytesValue:aE(t.serializer,e._byteString)};if(e instanceof jN){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Tc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:lE(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof $N)return function(e,t){return{mapValue:{fields:{[Db]:{stringValue:Mb},[Lb]:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.Tc("VectorValues must only contain numeric values.");return tw(t.serializer,e)}))}}}}}}(e,t);throw t.Tc(`Unsupported field value: ${wN(e)}`)}(e,t)}function tT(e,t){const n={};return cb(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):lb(e,((e,r)=>{const s=eT(r,t.uc(e));null!=s&&(n[e]=s)})),{mapValue:{fields:n}}}function nT(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Vv||e instanceof qN||e instanceof zN||e instanceof jN||e instanceof BN||e instanceof $N)}function rT(e,t,n){if(!nT(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=wN(n);throw"an object"===r?t.Tc(e+" a custom object"):t.Tc(e+" "+r)}}function sT(e,t,n){if((t=Sg(t))instanceof VN)return t._internalPath;if("string"==typeof t)return iT(e,t);throw oT("Field path arguments must be of type string or ",e,!1,void 0,n)}const aT=new RegExp("[~\\*/\\[\\]]");function iT(e,t,n){if(t.search(aT)>=0)throw oT(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new VN(...t.split("."))._internalPath}catch(r){throw oT(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function oT(e,t,n,r,s){const a=r&&!r.isEmpty(),i=void 0!==s;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(a||i)&&(l+=" (found",a&&(l+=` in field ${r}`),i&&(l+=` in document ${s}`),l+=")"),new wv(xv.INVALID_ARGUMENT,o+e+l)}function lT(e,t){return e.some((e=>e.isEqual(t)))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new jN(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new uT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(dT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class uT extends cT{data(){return super.data()}}function dT(e,t){return"string"==typeof t?iT(e,t):t instanceof VN?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new wv(xv.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fT{}class mT extends fT{}function pT(e,t,...n){let r=[];t instanceof fT&&r.push(t),r=r.concat(n),function(e){const t=e.filter((e=>e instanceof vT)).length,n=e.filter((e=>e instanceof gT)).length;if(t>1||t>0&&n>0)throw new wv(xv.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r);for(const s of r)e=s._apply(e);return e}class gT extends mT{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new gT(e,t,n)}_apply(e){const t=this._parse(e);return kT(e._query,t),new RN(e.firestore,e.converter,Px(e._query,t))}_parse(e){const t=JN(e.firestore),n=function(e,t,n,r,s,a,i){let o;if(s.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new wv(xv.INVALID_ARGUMENT,`Invalid Query. You can't perform '${a}' queries on documentId().`);if("in"===a||"not-in"===a){ET(i,a);const t=[];for(const n of i)t.push(wT(r,e,n));o={arrayValue:{values:t}}}else o=wT(r,e,i)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||ET(i,a),o=function(e,t,n,r=!1){return eT(n,e.dc(r?4:3,t))}(n,t,i,"in"===a||"not-in"===a);return lx.create(s,a,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function yT(e,t,n){const r=t,s=dT("where",e);return gT._create(s,r,n)}class vT extends fT{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new vT(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:cx.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)kT(n,s),n=Px(n,s)}(e._query,t),new RN(e.firestore,e.converter,Px(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class bT extends mT{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new bT(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new wv(xv.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new wv(xv.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ax(t,n)}(e._query,this._field,this._direction);return new RN(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Rx(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function xT(e,t="asc"){const n=t,r=dT("orderBy",e);return bT._create(r,n)}function wT(e,t,n){if("string"==typeof(n=Sg(n))){if(""===n)throw new wv(xv.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_x(t)&&-1!==n.indexOf("/"))throw new wv(xv.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Hv.fromString(n));if(!Kv.isDocumentKey(r))throw new wv(xv.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wb(e,new Kv(r))}if(n instanceof jN)return Wb(e,n._key);throw new wv(xv.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wN(n)}.`)}function ET(e,t){if(!Array.isArray(e)||0===e.length)throw new wv(xv.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function kT(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new wv(xv.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new wv(xv.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class ST{convertValue(e,t="none"){switch(Ob(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xb(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wb(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw gv(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return lb(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const s=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[Lb].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>xb(e.doubleValue)));return new $N(s)}convertGeoPoint(e){return new qN(xb(e.latitude),xb(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Cb(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Rb(e));default:return null}}convertTimestamp(e){const t=bb(e);return new Vv(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Hv.fromString(e);vv(RE(n),9688,{name:e});const r=new _b(n.get(1),n.get(3)),s=new Kv(n.popFirst(5));return r.isEqual(t)||fv(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class TT{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class CT extends cT{constructor(e,t,n,r,s,a){super(e,t,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new RT(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(dT("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class RT extends CT{data(e={}){return super.data(e)}}class jT{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new TT(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new RT(this._firestore,this._userDataWriter,n.key,n,new TT(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new wv(xv.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new RT(e._firestore,e._userDataWriter,n.doc.key,n.doc,new TT(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new RT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new TT(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,a=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),a=n.indexOf(t.doc.key)),{type:AT(t.type),doc:r,oldIndex:s,newIndex:a}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function AT(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gv(61501,{type:e})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(e){e=EN(e,jN);const t=EN(e.firestore,ON);return function(e,t,n={}){const r=new Ev;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,s){const a=new cN({next:o=>{a.yu(),t.enqueueAndForget((()=>SS(e,i)));const l=o.docs.has(n);!l&&o.fromCache?s.reject(new wv(xv.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?s.reject(new wv(xv.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(o)},error:e=>s.reject(e)}),i=new AS(jx(n.path),a,{includeMetadataChanges:!0,Fa:!0});return kS(e,i)}(await pN(e),e.asyncQueue,t,n,r))),r.promise}(FN(t),e._key).then((n=>UT(t,e,n)))}class DT extends ST{constructor(e){super(),this.firestore=e}convertBytes(e){return new zN(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jN(this.firestore,null,t)}}function IT(e){e=EN(e,RN);const t=EN(e.firestore,ON),n=FN(t),r=new DT(t);return hT(e._query),function(e,t,n={}){const r=new Ev;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,s){const a=new cN({next:n=>{a.yu(),t.enqueueAndForget((()=>SS(e,i))),n.fromCache&&"server"===r.source?s.reject(new wv(xv.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),i=new AS(n,a,{includeMetadataChanges:!0,Fa:!0});return kS(e,i)}(await pN(e),e.asyncQueue,t,n,r))),r.promise}(n,e._query).then((n=>new jT(t,r,e,n)))}function PT(e,t,n){e=EN(e,jN);const r=EN(e.firestore,ON),s=NT(e.converter,t,n);return OT(r,[YN(JN(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,yw.none())])}function MT(e,t,n,...r){e=EN(e,jN);const s=EN(e.firestore,ON),a=JN(s);let i;return i="string"==typeof(t=Sg(t))||t instanceof VN?function(e,t,n,r,s,a){const i=e.dc(1,t,n),o=[sT(t,r,n)],l=[s];if(a.length%2!=0)throw new wv(xv.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<a.length;h+=2)o.push(sT(t,a[h])),l.push(a[h+1]);const c=[],u=Zb.empty();for(let h=o.length-1;h>=0;--h)if(!lT(c,o[h])){const e=o[h];let t=l[h];t=Sg(t);const n=i.hc(e);if(t instanceof ZN)c.push(e);else{const r=eT(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new pb(c);return new GN(u,d,i.fieldTransforms)}(a,"updateDoc",e._key,t,n,r):function(e,t,n,r){const s=e.dc(1,t,n);rT("Data must be an object, but it was:",s,r);const a=[],i=Zb.empty();lb(r,((e,r)=>{const o=iT(t,e,n);r=Sg(r);const l=s.hc(o);if(r instanceof ZN)a.push(o);else{const e=eT(r,l);null!=e&&(a.push(o),i.set(o,e))}}));const o=new pb(a);return new GN(i,o,s.fieldTransforms)}(a,"updateDoc",e._key,t),OT(s,[i.toMutation(e._key,yw.exists(!0))])}function LT(e,t){const n=EN(e.firestore,ON),r=DN(e),s=NT(e.converter,t);return OT(n,[YN(JN(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,yw.exists(!1))]).then((()=>r))}function OT(e,t){return function(e,t){const n=new Ev;return e.asyncQueue.enqueueAndForget((async()=>qS(await function(e){return mN(e).then((e=>e.syncEngine))}(e),t,n))),n.promise}(FN(e),t)}function UT(e,t,n){const r=n.docs.get(t._key),s=new DT(e);return new CT(e,s,t._key,r,new TT(n.hasPendingWrites,n.fromCache),t.converter)}!function(e,t=!0){!function(e){cv=e}("11.6.1"),Iy(new Ng("firestore",((e,{instanceIdentifier:n,options:r})=>{const s=e.getProvider("app").getImmediate(),a=new ON(new Tv(e.getProvider("auth-internal")),new Av(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new wv(xv.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _b(e.options.projectId,t)}(s,n),s);return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC").setMultipleInstances(!0)),Oy(iv,ov,e),Oy(iv,ov,"esm2017")}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Oy("firebase","11.6.1","app");const FT=UN(Ly({apiKey:"AIzaSyAXPOWUzhGZNFjuVXX-bRZYyOqVRUL-vwQ",authDomain:"bigproject-d6daf.firebaseapp.com",projectId:"bigproject-d6daf",storageBucket:"bigproject-d6daf.firebasestorage.app",messagingSenderId:"540438748170",appId:"1:540438748170:web:416d4e38ac4a3be11513f3",measurementId:"G-MVPMBS32W2"})),zT=Q.createContext(),VT=()=>{const e=Q.useContext(zT);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},BT=({children:t})=>{const[n,r]=Q.useState(null),[s,a]=Q.useState(!0),[i,o]=Q.useState(!1),[l,c]=Q.useState(null),u=()=>{const e=localStorage.getItem("token");if(!e)return!0;try{const t=JSON.parse(atob(e.split(".")[1])).exp;return t-Date.now()/1e3<300}catch(t){return!0}},d=async()=>{try{return o(!0),await nf.refreshToken(),!0}catch(e){return!1}finally{o(!1)}},h=async()=>{try{a(!0);const t=await nf.getCurrentUser();if(r(t),t&&t.id){localStorage.setItem("userId",String(t.id));try{localStorage.setItem("user",JSON.stringify(t))}catch(e){console.error("Error storing user object in localStorage:",e)}}return t}catch(t){return r(null),null}finally{a(!1)}};Q.useEffect((()=>{(async()=>{try{if(a(!0),!localStorage.getItem("token"))return r(null),void a(!1);if(u()){if(!(await d()))return void f()}await h()}catch(e){f()}finally{a(!1)}})();const e=setInterval((()=>{localStorage.getItem("token")&&u()&&d().catch((()=>{f()}))}),24e4);return()=>{clearInterval(e)}}),[]);const f=async(e="/login")=>{try{a(!0),await nf.logout(e)}catch(t){console.error("Logout error:",t)}finally{r(null),a(!1)}},m={user:n,loading:s,refreshingToken:i,error:l,login:async(e,t)=>{try{c(null),a(!0);const n=await nf.login(e,t);if(n&&n.token){const e=await h();return e&&e.id&&localStorage.setItem("userId",String(e.id)),Lh.success("Connexion réussie"),n}throw new Error("Login failed - No token received")}catch(n){const e=n.response?.data?.message||"Échec de la connexion";throw c(e),Lh.error(e),n}finally{a(!1)}},logout:f,register:async e=>{try{c(null),a(!0);const t=await nf.register(e);return Lh.success("Inscription réussie"),t}catch(t){const e=t.response?.data?.message||"Échec de l'inscription";throw c(e),Lh.error(e),t}finally{a(!1)}},refreshToken:d,loadUserData:h,isAuthenticated:!!n&&nf.isAuthenticated()};return e.jsx(zT.Provider,{value:m,children:t})};var qT={};const $T=()=>{const[e,t]=Q.useState([]),[n,r]=Q.useState(!0),{user:s}=VT(),a=()=>{try{let t;if(s?.id)t=s.id;else if(localStorage.getItem("user"))try{const e=JSON.parse(localStorage.getItem("user"));t=e?.id}catch(e){console.warn("Error parsing user from localStorage:",e)}else t=localStorage.getItem("userId")||localStorage.getItem("user_id");return t?(t=String(t),localStorage.setItem("userId",t),t):(console.warn("No user ID found in any source"),null)}catch(t){return console.error("useNotifications - Erreur lors de la récupération de l'ID utilisateur:",t),null}},i=()=>{if(s?.email)return s.email;try{const e=JSON.parse(localStorage.getItem("user")||"{}");return e?.email||null}catch(e){return console.warn("Error parsing user email from localStorage:",e),null}},[o,l]=Q.useState(!0);Q.useEffect((()=>{let e=!0;return(async()=>{const n=a();if(!n)return t([]),void r(!1);o&&(await c(n),await(async e=>{try{if(!e)return;const t=DN(FT,"notificationPreferences",e);(await _T(t)).exists()&&await MT(t,{lastLogin:new Date,lastLoginTimestamp:Date.now()})}catch(t){console.warn("Erreur lors de la mise à jour du timestamp de dernière connexion:",t)}})(n),e&&l(!1));const s=function(e,...t){var n,r,s;e=Sg(e);let a={includeMetadataChanges:!1,source:"default"},i=0;"object"!=typeof t[i]||LN(t[i])||(a=t[i],i++);const o={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(LN(t[i])){const e=t[i];t[i]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[i+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[i+2]=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}let l,c,u;if(e instanceof jN)c=EN(e.firestore,ON),u=jx(e._key.path),l={next:n=>{t[i]&&t[i](UT(c,e,n))},error:t[i+1],complete:t[i+2]};else{const n=EN(e,RN);c=EN(n.firestore,ON),u=n._query;const r=new DT(c);l={next:e=>{t[i]&&t[i](new jT(c,r,n,e))},error:t[i+1],complete:t[i+2]},hT(e._query)}return function(e,t,n,r){const s=new cN(r),a=new AS(t,s,n);return e.asyncQueue.enqueueAndForget((async()=>kS(await pN(e),a))),()=>{s.yu(),e.asyncQueue.enqueueAndForget((async()=>SS(await pN(e),a)))}}(FN(c),u,o,l)}(pT(_N(FT,"notifications"),yT("recipientId","==",n),xT("timestamp","desc")),(n=>{if(e)try{const e=new Map;localStorage.getItem("seenNotifications")?.split(",").forEach((t=>{t&&e.set(t,!0)}));const s=n.docs.map((t=>({id:t.id,...t.data(),read:!!e.has(t.id)||(t.data().read||!1)})));localStorage.setItem("seenNotifications",[...e.keys(),...s.filter((e=>e.read)).map((e=>e.id))].join(",")),t(s),r(!1),localStorage.setItem("unreadNotificationCount",s.filter((e=>!e.read)).length)}catch(s){console.error("Error processing notifications:",s),r(!1)}}),(e=>{console.error("Error fetching notifications:",e),r(!1)}))})(),()=>{e=!1}}),[s]);const c=async e=>{try{if(!e)return void console.error("Impossible d'initialiser les préférences - userId manquant");e=String(e);const n=i(),r=[e,Number(e),parseInt(e,10),`${e}`],s=DN(FT,"notificationPreferences",e),a=await _T(s);if(a.exists()){const e=a.data();!n||e.userEmail&&e.userEmail===n||await MT(s,{userEmail:n,lastUpdated:new Date}),await MT(s,{lastLogin:new Date});try{localStorage.setItem("notificationPreferences",JSON.stringify({...e,lastSynced:(new Date).toISOString()}))}catch(t){console.warn("Impossible de sauvegarder dans localStorage:",t)}return}const o=_N(FT,"notificationPreferences"),l=await IT(o);let c=null;if(l.forEach((e=>{const t=e.data(),s=r.includes(t.userId)||r.includes(e.id),a=n&&t.userEmail===n;(s||a)&&(c={docId:e.id,...t})})),c){c.docId!==e&&await PT(s,{...c,userId:e,userEmail:n||c.userEmail,migratedFrom:c.docId,migratedAt:new Date,lastLogin:new Date});try{localStorage.setItem("notificationPreferences",JSON.stringify({...c,userId:e,lastSynced:(new Date).toISOString()}))}catch(t){console.warn("Impossible de sauvegarder dans localStorage:",t)}return}let u=null;try{const e=localStorage.getItem("notificationPreferences");if(e){const t=JSON.parse(e),s=r.includes(t.userId),a=n&&t.userEmail===n;(s||a)&&(u=t)}}catch(t){console.warn("Erreur lors de la récupération des préférences locales:",t)}if(u){const t={...u};delete t.lastUpdated;const r={...t,userId:e,userEmail:n||u.userEmail,lastRestored:new Date,restoredFrom:"localStorage",createdAt:new Date,lastLogin:new Date};await PT(s,r)}else{const r={userId:e,userEmail:n,ROLE_UPDATE:!0,DOCUMENT_UPLOADED:!0,DOCUMENT_DELETED:!0,DOCUMENT_APPROVED:!0,DOCUMENT_REJECTED:!0,createdAt:new Date,lastLogin:new Date};await PT(s,r);try{localStorage.setItem("notificationPreferences",JSON.stringify({...r,createdAt:r.createdAt.toISOString(),lastLogin:r.lastLogin.toISOString()}))}catch(t){console.warn("Impossible de sauvegarder les préférences dans localStorage:",t)}}}catch(n){console.error("Erreur lors de l'initialisation des préférences:",n)}},u=async e=>{try{const t=DN(FT,"notifications",e);await MT(t,{read:!0})}catch(t){throw console.error("Error marking notification as read:",t),new Error("Failed to mark notification as read")}},d=async()=>{const e=a();if(!e)return[];try{const t=pT(_N(FT,"notifications"),yT("recipientId","==",e));return(await IT(t)).docs.map((e=>({id:e.id,...e.data()})))}catch(t){return console.error("Error fetching notifications:",t),[]}},h=async()=>{try{const t=a();if(!t)return;const n=pT(_N(FT,"notifications"),yT("recipientId","==",t),xT("timestamp","desc")),r=await IT(n),s=new Date;s.setDate(s.getDate()-30);const i=r.docs.filter((e=>{const t=e.data(),n=t.timestamp?.toDate?t.timestamp.toDate():new Date(t.timestamp);return t.read&&n<s})).map((e=>e.id)),o=20,l=i.slice(0,o);for(const a of l)await(e=DN(FT,"notifications",a),OT(EN(e.firestore,ON),[new Aw(e._key,yw.none())]));return l.length}catch(t){return console.error("Erreur lors du nettoyage des anciennes notifications:",t),0}var e};return Q.useEffect((()=>{const e=localStorage.getItem("lastNotificationsCleanup"),t=Date.now();if(!e||t-parseInt(e,10)>864e5){const e=setTimeout((()=>{h().then((e=>{localStorage.setItem("lastNotificationsCleanup",t.toString())}))}),3e4);return()=>clearTimeout(e)}}),[]),{notifications:e,loading:n,unreadCount:e.filter((e=>!e.read)).length,markAsRead:u,markAllAsRead:async()=>{try{const t=e.filter((e=>!e.read)).map((e=>u(e.id)));await Promise.all(t)}catch(t){console.error("Erreur lors du marquage des notifications:",t)}},updateNotificationPreference:async(e,t)=>{try{const r=a();if(!r)return console.error("No user ID available"),void Lh.error("Erreur: Utilisateur non identifié");const s=String(r),o=i(),l=DN(FT,"notificationPreferences",s),u=await _T(l);let d={};if(u.exists()){if(d=u.data(),d.userId&&d.userId!==s){console.error("Les préférences ne correspondent pas à l'utilisateur actuel",{expectedId:s,actualId:d.userId}),await c(s);const e=await _T(l);d=e.exists()?e.data():{userId:s,userEmail:o}}}else{await c(s);const e=await _T(l);d=e.exists()?e.data():{userId:s,userEmail:o}}const h={...d,userId:s,userEmail:o||d.userEmail,[e]:t,lastUpdated:new Date};await PT(l,h,{merge:!0});const f=await _T(l);if(!f.exists())return console.error("Erreur: préférences non trouvées après mise à jour"),void Lh.error("Erreur: Les préférences n'ont pas été correctement enregistrées");{const r=f.data();if(r[e]!==t)return console.error("Mise à jour des préférences échouée - valeur différente de celle attendue"),void Lh.error("Erreur: La mise à jour n'a pas été appliquée correctement");try{localStorage.setItem("notificationPreferences",JSON.stringify({...r,lastUpdated:(new Date).toISOString()}))}catch(n){console.warn("Impossible de sauvegarder les préférences dans localStorage:",n)}}Lh.success("Préférences de notification mises à jour")}catch(r){console.error("Erreur détaillée lors de la mise à jour des préférences:",r),Lh.error("Erreur lors de la mise à jour des préférences")}},createNotification:async(e,t,n,r="INFO")=>{try{const i=String(e);if("SYSTEM_CRITICAL"!==r){const e=DN(FT,"notificationPreferences",i);let t=null,n="firestore";try{const n=await _T(e);n.exists()&&(t=n.data())}catch(s){console.warn("Erreur lors de la récupération des préférences depuis Firestore:",s)}if(!t)try{const e=localStorage.getItem("notificationPreferences");if(e){const r=JSON.parse(e);r.userId===i&&(t=r,n="localStorage")}}catch(a){console.warn("Erreur lors de la récupération des préférences depuis localStorage:",a)}if(t){if(t.userId&&t.userId!==i&&console.error("Erreur: Les préférences ne correspondent pas à l'utilisateur",{expectedId:i,actualId:t.userId}),!1===t[r])return}else await c(i)}const o=_N(FT,"notifications"),l=new Date(Date.now()-3e5),u=pT(o,yT("recipientId","==",i),yT("title","==",t),yT("type","==",r)),d=await IT(u);if(d.docs.some((e=>{const t=e.data();return(t.timestamp?.toDate?t.timestamp.toDate():new Date(t.timestamp))>l&&t.message===n})))return;await LT(_N(FT,"notifications"),{recipientId:i,title:t,message:n,type:r,timestamp:new Date,read:!1,userId:i,source:"frontend",appVersion:qT.REACT_APP_VERSION||"unknown",createdAt:new Date})}catch(s){throw console.error("Erreur lors de la création de la notification:",s),s}},forceReinitializePreferences:async()=>{try{const e=a();if(!e)return;const t=i(),n=DN(FT,"notificationPreferences",e),r={userId:e,userEmail:t,ROLE_UPDATE:!0,DOCUMENT_UPLOADED:!0,DOCUMENT_DELETED:!0,DOCUMENT_APPROVED:!0,DOCUMENT_REJECTED:!0,DOCUMENT_UPDATED:!0,createdAt:new Date,lastLogin:new Date,lastReset:new Date};return await PT(n,r),localStorage.setItem("notificationPreferences",JSON.stringify({...r,createdAt:r.createdAt.toISOString(),lastLogin:r.lastLogin.toISOString(),lastReset:r.lastReset.toISOString()})),d(),!0}catch(e){return console.error("Error resetting notification preferences:",e),!1}},cleanupOldNotifications:h}};function HT(e){return HT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HT(e)}function WT(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function GT(e){WT(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===HT(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}var KT={};function QT(){return KT}function XT(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function JT(e,t){WT(2,arguments);var n=GT(e),r=GT(t),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}var YT={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}};function ZT(e){WT(1,arguments);var t=GT(e);return function(e){WT(1,arguments);var t=GT(e);return t.setHours(23,59,59,999),t}(t).getTime()===function(e){WT(1,arguments);var t=GT(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}(t).getTime()}function eC(e,t){WT(2,arguments);var n,r=GT(e),s=GT(t),a=JT(r,s),i=Math.abs(function(e,t){WT(2,arguments);var n=GT(e),r=GT(t);return 12*(n.getFullYear()-r.getFullYear())+(n.getMonth()-r.getMonth())}(r,s));if(i<1)n=0;else{1===r.getMonth()&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*i);var o=JT(r,s)===-a;ZT(GT(e))&&1===i&&1===JT(e,s)&&(o=!1),n=a*(i-Number(o))}return 0===n?0:n}function tC(e,t,n){WT(2,arguments);var r=function(e,t){return WT(2,arguments),GT(e).getTime()-GT(t).getTime()}(e,t)/1e3;return YT.trunc(r)}var nC={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function rC(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}var sC={date:rC({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:rC({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:rC({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},aC={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function iC(e){return function(t,n){var r;if("formatting"===(null!=n&&n.context?String(n.context):"standalone")&&e.formattingValues){var s=e.defaultFormattingWidth||e.defaultWidth,a=null!=n&&n.width?String(n.width):s;r=e.formattingValues[a]||e.formattingValues[s]}else{var i=e.defaultWidth,o=null!=n&&n.width?String(n.width):e.defaultWidth;r=e.values[o]||e.values[i]}return r[e.argumentCallback?e.argumentCallback(t):t]}}var oC={ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:iC({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:iC({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:iC({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:iC({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:iC({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function lC(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;var i,o=a[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return}(l,(function(e){return e.test(o)})):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n;return}(l,(function(e){return e.test(o)}));return i=e.valueCallback?e.valueCallback(c):c,{value:i=n.valueCallback?n.valueCallback(i):i,rest:t.slice(o.length)}}}function cC(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;var s=r[0],a=t.match(e.parsePattern);if(!a)return null;var i=e.valueCallback?e.valueCallback(a[0]):a[0];return{value:i=n.valueCallback?n.valueCallback(i):i,rest:t.slice(s.length)}}}var uC={code:"en-US",formatDistance:function(e,t,n){var r,s=nC[e];return r="string"==typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:sC,formatRelative:function(e,t,n,r){return aC[e]},localize:oC,match:{ordinalNumber:cC({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:lC({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:lC({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:lC({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:lC({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:lC({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function dC(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}var hC=43200;function fC(e,t,n){var r,s;WT(2,arguments);var a=QT(),i=null!==(r=null!==(s=null==n?void 0:n.locale)&&void 0!==s?s:a.locale)&&void 0!==r?r:uC;if(!i.formatDistance)throw new RangeError("locale must contain formatDistance property");var o=JT(e,t);if(isNaN(o))throw new RangeError("Invalid time value");var l,c,u=dC(dC({},n),{addSuffix:Boolean(null==n?void 0:n.addSuffix),comparison:o});o>0?(l=GT(t),c=GT(e)):(l=GT(e),c=GT(t));var d,h=tC(c,l),f=(XT(c)-XT(l))/1e3,m=Math.round((h-f)/60);if(m<2)return null!=n&&n.includeSeconds?h<5?i.formatDistance("lessThanXSeconds",5,u):h<10?i.formatDistance("lessThanXSeconds",10,u):h<20?i.formatDistance("lessThanXSeconds",20,u):h<40?i.formatDistance("halfAMinute",0,u):h<60?i.formatDistance("lessThanXMinutes",1,u):i.formatDistance("xMinutes",1,u):0===m?i.formatDistance("lessThanXMinutes",1,u):i.formatDistance("xMinutes",m,u);if(m<45)return i.formatDistance("xMinutes",m,u);if(m<90)return i.formatDistance("aboutXHours",1,u);if(m<1440){var p=Math.round(m/60);return i.formatDistance("aboutXHours",p,u)}if(m<2520)return i.formatDistance("xDays",1,u);if(m<hC){var g=Math.round(m/1440);return i.formatDistance("xDays",g,u)}if(m<86400)return d=Math.round(m/hC),i.formatDistance("aboutXMonths",d,u);if((d=eC(c,l))<12){var y=Math.round(m/hC);return i.formatDistance("xMonths",y,u)}var v=d%12,b=Math.floor(d/12);return v<3?i.formatDistance("aboutXYears",b,u):v<9?i.formatDistance("overXYears",b,u):i.formatDistance("almostXYears",b+1,u)}function mC(e,t){return WT(1,arguments),fC(e,Date.now(),t)}var pC={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},gC={date:rC({formats:{full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},defaultWidth:"full"}),time:rC({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:rC({formats:{full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},yC={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},vC={ordinalNumber:function(e,t){var n=Number(e),r=null==t?void 0:t.unit;if(0===n)return"0";return n+(1===n?r&&["year","week","hour","minute","second"].includes(r)?"ère":"er":"ème")},era:iC({values:{narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},defaultWidth:"wide"}),quarter:iC({values:{narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:iC({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},defaultWidth:"wide"}),day:iC({values:{narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},defaultWidth:"wide"}),dayPeriod:iC({values:{narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},defaultWidth:"wide"})},bC={code:"fr",formatDistance:function(e,t,n){var r,s=pC[e];return r="string"==typeof s?s:1===t?s.one:s.other.replace("{{count}}",String(t)),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+r:"il y a "+r:r},formatLong:gC,formatRelative:function(e,t,n,r){return yC[e]},localize:vC,match:{ordinalNumber:cC({matchPattern:/^(\d+)(ième|ère|ème|er|e)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e)}}),era:lC({matchPatterns:{narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^av/i,/^ap/i]},defaultParseWidth:"any"}),quarter:lC({matchPatterns:{narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:lC({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:lC({matchPatterns:{narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:lC({matchPatterns:{narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:4}};const xC=Af("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",student:"border-transparent bg-blue-100 text-blue-700 hover:bg-blue-200",teacher:"border-transparent bg-emerald-100 text-emerald-700 hover:bg-emerald-200",admin:"border-transparent bg-amber-100 text-amber-700 hover:bg-amber-200",super_admin:"border-transparent bg-red-100 text-red-700 hover:bg-red-200",superadmin:"border-transparent bg-red-100 text-red-700 hover:bg-red-200",hr:"border-transparent bg-purple-100 text-purple-700 hover:bg-purple-200",recruiter:"border-transparent bg-pink-100 text-pink-700 hover:bg-pink-200",guest:"border-transparent bg-teal-100 text-teal-700 hover:bg-teal-200",user:"border-transparent bg-gray-100 text-gray-700 hover:bg-gray-200"}},defaultVariants:{variant:"default"}});function wC({className:t,variant:n,...r}){const{isDark:s,...a}=r;return e.jsx("span",{className:Om(xC({variant:n}),t),...a})}const EC={ROLE_UPDATE:{color:"bg-blue-100 text-blue-800",icon:e.jsx(Cc,{className:"h-4 w-4 text-blue-600"})},INFO_UPDATE:{color:"bg-teal-100 text-teal-800",icon:e.jsx(Pc,{className:"h-4 w-4 text-teal-600"})},SYSTEM:{color:"bg-purple-100 text-purple-800",icon:e.jsx(Ul,{className:"h-4 w-4 text-purple-600"})},INFO:{color:"bg-green-100 text-green-800",icon:e.jsx(Ul,{className:"h-4 w-4 text-green-600"})},WARNING:{color:"bg-yellow-100 text-yellow-800",icon:e.jsx(Ul,{className:"h-4 w-4 text-yellow-600"})},ALERT:{color:"bg-red-100 text-red-800",icon:e.jsx(Ul,{className:"h-4 w-4 text-red-600"})},DOCUMENT_APPROVED:{color:"bg-green-100 text-green-800",icon:e.jsx(sc,{className:"h-4 w-4 text-green-600"})},DOCUMENT_REJECTED:{color:"bg-red-100 text-red-800",icon:e.jsx(ic,{className:"h-4 w-4 text-red-600"})},DOCUMENT_UPLOADED:{color:"bg-blue-100 text-blue-800",icon:e.jsx(oc,{className:"h-4 w-4 text-blue-600"})},DOCUMENT_DELETED:{color:"bg-red-100 text-red-800",icon:e.jsx(Dc,{className:"h-4 w-4 text-red-600"})},DOCUMENT_UPDATED:{color:"bg-yellow-100 text-yellow-800",icon:e.jsx(oc,{className:"h-4 w-4 text-yellow-600"})}},kC=()=>{const{user:t}=VT(),{notifications:n,loading:r,unreadCount:s,markAsRead:a,markAllAsRead:i}=$T(),[o,l]=Q.useState(!1);Q.useRef(null),Q.useRef(!1);const c=Dl(),u=Y();Q.useEffect((()=>{o?(async()=>{await c.start({rotate:-10,transition:{duration:.08}}),await c.start({rotate:10,transition:{duration:.12}}),await c.start({rotate:-10,transition:{duration:.12}}),await c.start({rotate:10,transition:{duration:.12}}),await c.start({rotate:0,transition:{duration:.16}})})():c.start({rotate:0,transition:{duration:.2}})}),[o]);return t?.roles?.includes("ROLE_STUDENT"),t?.roles?.includes("ROLE_GUEST"),r?null:e.jsxs(zm,{children:[e.jsx(Vm,{asChild:!0,children:e.jsxs(Fm,{variant:"ghost",size:"icon",className:"relative p-2 rounded-full hover:bg-white/10 transition-colors mr-2 group","aria-label":"Notifications",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[e.jsx(jl.div,{animate:c,initial:{rotate:0},style:{display:"inline-block"},children:e.jsx(Ul,{className:"h-5 w-5 text-gray-200 group-hover:text-white transition-colors"})}),e.jsx(ze,{children:s>0&&e.jsx(jl.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full h-5 w-5 flex items-center justify-center text-xs",children:s})})]})}),e.jsxs(Bm,{align:"end",className:"w-96 mt-2 p-0 overflow-hidden border border-gray-200 shadow-lg rounded-lg bg-white dark:bg-gray-800 dark:border-gray-700",sideOffset:5,children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(Ul,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),"Notifications",s>0&&e.jsx(wC,{className:"ml-2 bg-red-500 text-white dark:bg-red-600",children:s})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s>0&&e.jsxs(Fm,{onClick:async()=>{await i()},variant:"ghost",size:"sm",className:"text-xs flex items-center gap-1 text-[#528eb2] hover:text-[#02284f] transition-colors",children:[e.jsx(Hl,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Tout marquer comme lu"})]}),e.jsx(Z,{to:"/settings/notifications",children:e.jsx(Fm,{variant:"ghost",size:"sm",className:"text-xs p-1.5",children:e.jsx(Cc,{className:"h-4 w-4 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"})})})]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:0===n.filter((e=>!e.read)).length?e.jsxs("div",{className:"py-8 px-4 text-center",children:[e.jsx(Ul,{className:"h-12 w-12 mx-auto text-gray-300 dark:text-gray-600 mb-3"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:"Aucune notification"}),e.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-sm mt-1",children:"Les notifications apparaîtront ici"})]}):n.filter((e=>!e.read)).slice(0,5).map((t=>{const n=EC[t.type]||{color:"bg-gray-100 text-gray-600",icon:e.jsx(Ul,{className:"h-4 w-4 text-gray-500"})},r=(e=>{try{if(!e)return"";let t;if(e&&"function"==typeof e.toDate)t=e.toDate();else if(e instanceof Date)t=e;else if("number"==typeof e)t=new Date(e);else{if("string"!=typeof e)return"";t=new Date(e)}return mC(t,{addSuffix:!0,locale:bC})}catch(t){return""}})(t.timestamp);return e.jsx("div",{onClick:()=>(async e=>{await a(e.id),"INFO"===e.type&&e.title&&(e.title.toLowerCase().includes("votre demande d'inscription a été acceptée")||e.title.toLowerCase().includes("votre demande d'inscription a été refusée"))?u("/notifications"):"INFO"===e.type&&e.title&&e.title.toLowerCase().includes("demande d'inscription envoyée")?u("/guest/enrollment-requests"):"GUEST_APPLICATION"!==e.type||u("/recruiter/enrollment-requests")})(t),className:"p-4 border-b border-gray-100 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors bg-blue-50/60 dark:bg-blue-900/20",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"mt-0.5",children:e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${n.color||"bg-gray-100 text-gray-600"}`,children:n.icon||e.jsx(Ul,{className:"h-4 w-4"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:t.title}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"h-2 w-2 bg-blue-500 rounded-full mr-2"}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 whitespace-nowrap",children:r})]})]}),(()=>{if(t.message&&t.message.includes("Commentaire du recruteur :")){const[n,r]=t.message.split(/\nCommentaire du recruteur ?: ?/);return e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 line-clamp-2",children:n}),e.jsxs("div",{className:"mt-2 p-2 rounded bg-yellow-50 dark:bg-yellow-900/30 border-l-4 border-yellow-400 text-yellow-900 dark:text-yellow-100 text-sm font-medium whitespace-pre-line",children:[e.jsx("span",{className:"font-semibold",children:"Commentaire du recruteur :"})," ",r]})]})}return e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 line-clamp-2",children:t.message})})(),e.jsxs(Fm,{variant:"ghost",size:"sm",className:"mt-2 text-xs h-6 px-2 text-blue-600 dark:text-blue-400",onClick:async e=>{e.stopPropagation(),await a(t.id)},children:[e.jsx(Hl,{className:"h-3 w-3 mr-1"}),"Marquer comme lue"]})]})]})},t.id)}))}),n.filter((e=>!e.read)).length>5&&e.jsx("div",{className:"p-2 text-center border-t border-gray-100 dark:border-gray-700",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:[n.filter((e=>!e.read)).length-5," notifications supplémentaires"]})}),e.jsx($m,{}),e.jsx(Z,{to:"/notifications",className:"block",children:e.jsxs(qm,{className:"cursor-pointer flex justify-center items-center p-3 text-[#528eb2] hover:text-[#02284f] dark:text-blue-400 dark:hover:text-blue-300 transition-colors",children:[e.jsx("span",{children:"Voir toutes les notifications"}),e.jsx(Ol,{className:"ml-2 h-4 w-4"})]})})]})]})},SC=Q.createContext(),NC=({children:t})=>{const[n,r]=Q.useState("light");Q.useEffect((()=>{const e=localStorage.getItem("protectedTheme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches;r(e||(t?"dark":"light")),document.documentElement.classList.toggle("dark","dark"===e||!e&&t)}),[]);const s={theme:n,toggleTheme:()=>{const e="light"===n?"dark":"light";r(e),localStorage.setItem("protectedTheme",e),document.documentElement.classList.toggle("dark","dark"===e)},setTheme:e=>{"light"===e||"dark"===e?(r(e),localStorage.setItem("protectedTheme",e),document.documentElement.classList.toggle("dark","dark"===e)):console.error('Invalid theme mode. Use "light" or "dark".')},isDark:"dark"===n};return e.jsx(SC.Provider,{value:s,children:t})},TC=()=>{const e=Q.useContext(SC);if(!e)throw new Error("useProtectedTheme must be used within a ProtectedThemeProvider");return e};function CC({className:t=""}){const{theme:n,toggleTheme:r}=TC(),s="dark"===n;return e.jsxs(jl.button,{onClick:r,className:`group relative w-10 h-10 rounded-full flex items-center justify-center bg-transparent transition-colors duration-300 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-400 ${t}`,"aria-label":s?"Switch to light mode":"Switch to dark mode",type:"button",whileTap:{scale:.95},style:{border:"none",padding:0,boxShadow:"none"},children:[e.jsx("span",{className:`absolute inset-0 rounded-full pointer-events-none transition-colors duration-200\n          group-hover:${s?"bg-[#232f47]/70":"bg-[#e5eaf3]/60"}\n          group-focus-visible:${s?"bg-[#232f47]/70":"bg-[#e5eaf3]/60"}\n        `}),e.jsxs("div",{className:"relative w-6 h-6 flex items-center justify-center z-10",children:[e.jsx(jl.div,{initial:!1,animate:{opacity:s?0:1,scale:s?0:1,y:s?-10:0,rotate:s?90:0},transition:{duration:.4,ease:"easeInOut"},className:"absolute inset-0 flex items-center justify-center",children:e.jsx(Ac,{className:"w-6 h-6",strokeWidth:2,style:{color:"#FFD600"}})}),e.jsx(jl.div,{initial:!1,animate:{opacity:s?1:0,scale:s?1:0,y:s?0:10,rotate:0},transition:{duration:.4,ease:"easeInOut"},className:"absolute inset-0 flex items-center justify-center",children:e.jsx(wc,{className:"w-6 h-6 text-white",strokeWidth:1.5})})]})]})}const RC=()=>e.jsxs(e.Fragment,{children:[e.jsx(Z,{to:"/login",className:"px-4 py-2 text-gray-200 transition-all duration-200 rounded-md hover:text-white hover:bg-[#02284f]/50\r\n      dark:text-white dark:bg-[#004080]/80 dark:border dark:border-[#78b9dd]/50 dark:font-medium \r\n      dark:hover:bg-[#005db3] dark:hover:border-[#78b9dd] dark:hover:shadow-[0_0_8px_rgba(120,185,221,0.25)]",children:"Connexion"}),e.jsx(Z,{to:"/register",className:"ml-2 px-4 py-2 bg-[#528eb2] rounded-md text-white font-medium hover:bg-[#528eb2]/90 transition-all transform hover:scale-105 dark:bg-[#004080] dark:hover:bg-[#004d99] dark:hover:shadow-[0_0_10px_rgba(120,185,221,0.3)]",children:"Inscription"})]}),jC=({onLogout:t,userData:n,setLogoutDialogOpen:r})=>{const[s,a]=Q.useState(!1),i=Y(),o=Q.useRef(null),{theme:l,toggleTheme:c}=TC();return e.jsxs("div",{className:"flex items-center",children:[e.jsx(ig,{}),e.jsx(kC,{}),e.jsx(CC,{className:"mr-3"}),e.jsxs(zm,{modal:!0,children:[e.jsx(Vm,{asChild:!0,children:e.jsx(Fm,{variant:"outline",className:`rounded-full w-10 h-10 p-0 ${s?"bg-[#528eb2]/20 border-[#528eb2]":"bg-transparent border-gray-500"} hover:bg-[#02284f]/80 hover:text-white hover:border-gray-400 transition-all duration-300 dark:border-[#78b9dd]/50 dark:hover:bg-[#78b9dd]/20 dark:hover:border-[#78b9dd]`,children:e.jsx(jp,{className:"h-11 w-11",children:e.jsx(_p,{className:"bg-gradient-to-r from-[#02284f] to-[#03386b] text-white",children:e.jsx(Pc,{className:"h-5 w-5"})})})})}),e.jsxs(Bm,{align:"end",className:"w-64 mt-2 p-0 overflow-hidden border border-gray-100 shadow-xl rounded-xl dark:bg-gray-800 dark:border-gray-700 dark:shadow-[0_4px_16px_rgba(0,0,0,0.5),0_0_0_1px_rgba(120,185,221,0.1)]",onOpenAutoFocus:e=>e.preventDefault(),sideOffset:5,ref:o,children:[e.jsx("div",{className:"bg-gradient-to-r from-[#02284f] to-[#03386b] p-4 text-white dark:from-[#01111e] dark:to-[#001f3d] dark:border-b dark:border-[#78b9dd]/20",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-white/20 rounded-full p-4.5",children:e.jsx(Dp,{className:"h-11 w-11"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"font-medium text-sm",children:n?.firstName&&n?.lastName?`${n.firstName} ${n.lastName}`:n?.user?.firstName&&n?.user?.lastName?`${n.user.firstName} ${n.user.lastName}`:"Utilisateur"}),e.jsx("p",{className:"text-xs text-gray-300",children:n?.email||n?.user?.email||"utilisateur@example.com"})]})]})}),e.jsxs("div",{className:"py-1 bg-white dark:bg-gray-800",children:[e.jsxs(qm,{className:"navbar-dropdown-item",onClick:()=>i("/profile"),children:[e.jsx(Pc,{className:"mr-2 h-4 w-4 text-[#528eb2] dark:text-[#78b9dd]"}),e.jsx("span",{children:"Mon profil"})]}),e.jsxs(qm,{className:"navbar-dropdown-item",onClick:()=>i("/settings/profile"),children:[e.jsx(Cc,{className:"mr-2 h-4 w-4 text-[#528eb2] dark:text-[#78b9dd]"}),e.jsx("span",{children:"Paramètres"})]}),e.jsx($m,{className:"my-1 bg-gray-100 dark:bg-gray-700"}),e.jsxs(qm,{className:"navbar-dropdown-item danger",onClick:()=>r(!0),children:[e.jsx(gc,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Déconnexion"})]})]})]})]})]})},AC=Q.memo((()=>{const[t,n]=Q.useState(!1),[r,s]=Q.useState(null),[a,i]=Q.useState(!1),[o,l]=Q.useState(!1),c=sp(),u=Y(),d=te(),[h,f]=Q.useState(!0),m=function(){const[e,t]=Q.useState(!1);return Q.useEffect((()=>{let e,n=!0;const r=async()=>{try{const r=localStorage.getItem("token");if(!r)return;if(!JSON.parse(localStorage.getItem("userRoles")||"[]").some((e=>"ROLE_STUDENT"===e||"ROLE_TEACHER"===e)))return;const s=(new Date).getHours(),a=s>=9&&s<12;if(!(a||s>=13&&s<17))return void(n&&t(!1));const i=a?"morning":"afternoon";try{const e=`signature_${(new Date).toISOString().split("T")[0]}_${i}`;if("true"===localStorage.getItem(e))return void(n&&t(!1));const s=await fetch("/api/signatures/today",{method:"GET",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(!s.ok)return void(n&&t(!0));const a=await s.json(),o=a.signedPeriods&&a.signedPeriods.includes(i);o&&localStorage.setItem(e,"true"),n&&t(!o)}catch(e){n&&t(!0)}}catch(e){}};r(),e=setInterval(r,3e5);const s=e=>{if(e.detail.success){const n=`signature_${(new Date).toISOString().split("T")[0]}_${e.detail.period}`;localStorage.setItem(n,"true"),t(!1)}};return window.addEventListener("signatureSubmitted",s),()=>{n=!1,clearInterval(e),window.removeEventListener("signatureSubmitted",s)}}),[]),e}(),[p,g]=Q.useState(!1),y=async()=>{try{const i=nf.isLoggedIn(),o=t;if(n(i),i)try{const t=Xh.getCachedUserData();if(t){s(t),f(!1),o||window.dispatchEvent(new Event("role-change"));try{const e=(Xh.getStats?Xh.getStats():{dataAge:1/0}).dataAge||1/0,n=Date.now();window._lastNavbarRefreshTime||(window._lastNavbarRefreshTime=0);const r=n-window._lastNavbarRefreshTime;e>12e4&&r>3e4&&(window._lastNavbarRefreshTime=n,Xh.getUserData({routeKey:"/api/me",forceRefresh:!1,background:!0,requestId:"navbar_background_refresh"}).then((e=>{e&&JSON.stringify(e)!==JSON.stringify(t)&&s(e)})).catch((e=>{console.warn("Erreur lors du rafraîchissement des données utilisateur:",e)})))}catch(e){console.warn("Error checking user data stats:",e)}}else{if(!o){const e=window.queryClient||nf.getQueryClient();e&&(e.invalidateQueries({queryKey:["user"]}),e.invalidateQueries({queryKey:["profile"]}))}const e=await nf.getCurrentUser(!1,{requestSource:"navbar"});s(e),f(!1),o||window.dispatchEvent(new Event("role-change"))}}catch(r){console.warn("Erreur lors de la récupération des données utilisateur:",r);try{const e=await Cf.getAllProfileData();s(e?.user?e.user:e?.data?.user?e.data.user:e),f(!1),o||window.dispatchEvent(new Event("role-change"))}catch(a){f(!1)}}else s(null),f(!1),o&&window.dispatchEvent(new Event("role-change"))}catch(i){console.error("Erreur lors de la vérification de l'authentification:",i)}finally{f(!1)}};Q.useEffect((()=>{y()}),[d.pathname]),Q.useEffect((()=>{const e=()=>{y()};return window.addEventListener("login-success",e),()=>{window.removeEventListener("login-success",e)}}),[]);return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:"\n  .navbar-dropdown-item {\n    display: flex !important;\n    align-items: center !important;\n    padding: 0.75rem !important;\n    cursor: pointer !important;\n    transition: all 0.2s ease !important;\n  }\n  \n  .navbar-dropdown-item:hover {\n    background-color: rgba(82, 142, 178, 0.1) !important;\n    color: #02284f !important;\n  }\n  \n  .navbar-dropdown-item.danger {\n    color: #e11d48 !important;\n  }\n  \n  .navbar-dropdown-item.danger:hover {\n    background-color: rgba(225, 29, 72, 0.1) !important;\n    color: #be123c !important;\n  }\n  \n  /* Styles pour le mode sombre */\n  .dark .navbar-dropdown-item:hover {\n    background-color: rgba(120, 185, 221, 0.2) !important;\n    color: #78b9dd !important;\n  }\n  \n  .dark .navbar-dropdown-item.danger {\n    color: #fb7185 !important;\n    background-color: rgba(244, 63, 94, 0.05) !important;\n    font-weight: 500 !important;\n  }\n  \n  .dark .navbar-dropdown-item.danger:hover {\n    background-color: rgba(244, 63, 94, 0.2) !important;\n    color: #fff !important;\n    font-weight: 600 !important;\n    box-shadow: 0 0 0 1px rgba(244, 63, 94, 0.3) !important;\n  }\n  \n  .menu-burger-btn {\n    position: relative;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 40px;\n    height: 40px;\n    border-radius: 50%;\n    transition: all 0.2s ease;\n    margin-right: 0.75rem;\n  }\n  \n  .menu-burger-btn:hover {\n    background-color: rgba(255, 255, 255, 0.1);\n    transform: scale(1.05);\n  }\n  \n  .menu-burger-btn:active {\n    transform: scale(0.95);\n  }\n  \n  .search-container {\n    position: relative;\n    max-width: 400px;\n    width: 100%;\n    margin: 0 1rem;\n    isolation: isolate;\n    z-index: 90;\n  }\n  \n  .search-container input {\n    background-color: rgba(255, 255, 255, 0.1) !important;\n    border-color: rgba(255, 255, 255, 0.2) !important;\n    color: white !important;\n  }\n  \n  .search-container input::placeholder {\n    color: rgba(255, 255, 255, 0.6) !important;\n  }\n  \n  .search-container input:focus {\n    background-color: rgba(255, 255, 255, 0.15) !important;\n    border-color: #528eb2 !important;\n    box-shadow: 0 0 0 2px rgba(82, 142, 178, 0.25) !important;\n  }\n  \n  /* Styles pour la barre de recherche en mode sombre */\n  .dark .search-container input {\n    background-color: rgba(120, 185, 221, 0.1) !important;\n    border-color: rgba(120, 185, 221, 0.3) !important;\n    color: #e0f2fe !important;\n  }\n  \n  .dark .search-container input::placeholder {\n    color: rgba(224, 242, 254, 0.6) !important;\n  }\n  \n  .dark .search-container input:focus {\n    background-color: rgba(120, 185, 221, 0.15) !important;\n    border-color: #78b9dd !important;\n    box-shadow: 0 0 0 2px rgba(120, 185, 221, 0.25) !important;\n  }\n  \n  /* Fixed navbar styles */\n  .navbar-fixed {\n    position: sticky;\n    top: 0;\n    width: 100%;\n    overflow-x: hidden;\n    isolation: isolate;\n  }\n\n  /* Z-index hierarchy */\n  .navbar-fixed {\n    z-index: 100;\n  }\n\n  .menu-burger-wrapper {\n    z-index: 101;\n    position: relative;\n  }\n\n  .language-selector-wrapper {\n    z-index: 101;\n    position: relative;\n  }\n\n  .search-container {\n    z-index: 90;\n  }\n\n  /* Override Sheet styles to match our design */\n  .sidebar-sheet {\n    z-index: 102 !important;\n  }\n\n  /* Responsive styles */\n  @media (max-width: 1280px) {\n    .search-container {\n      max-width: 350px;\n    }\n    \n    .navbar-actions {\n      gap: 0.5rem;\n    }\n  \n  .dark .navbar-fixed {\n    background-color: #01111e !important;\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2), 0 0 1px rgba(120, 185, 221, 0.1) !important;\n    border-bottom: 1px solid rgba(120, 185, 221, 0.1) !important;\n  }\n  \n  @media (max-width: 1024px) {\n    .search-container {\n      max-width: 300px;\n    }\n    \n    .navbar-brand {\n      font-size: 1.5rem;\n    }\n    \n    .navbar-actions {\n      gap: 0.25rem;\n    }\n  }\n  \n  @media (max-width: 768px) {\n    .menu-burger-btn {\n      margin-right: 0.5rem;\n    }\n    \n    .mobile-auth-buttons {\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n      gap: 0.5rem;\n    }\n    \n    .mobile-auth-buttons a {\n      font-size: 0.875rem;\n      padding: 0.5rem 0.75rem;\n    }\n    \n    .search-container {\n      display: none;\n    }\n    \n    .navbar-brand {\n      font-size: 1.25rem;\n    }\n    \n    .desktop-only {\n      display: none;\n    }\n    \n    .mobile-only {\n      display: flex;\n    }\n  }\n  \n  @media (max-width: 640px) {\n    .container {\n      padding-left: 0.5rem;\n      padding-right: 0.5rem;\n    }\n    \n    .navbar-brand {\n      font-size: 1.125rem;\n    }\n    \n    .mobile-auth-buttons {\n      flex-direction: column;\n      position: absolute;\n      top: 100%;\n      right: 0;\n      background: #02284f;\n      padding: 0.5rem;\n      border-radius: 0 0 0.5rem 0.5rem;\n      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n    }\n    \n    .mobile-auth-buttons a {\n      width: 100%;\n      text-align: center;\n    }\n  }\n  \n  @media (max-width: 480px) {\n    .navbar-actions {\n      gap: 0.25rem;\n    }\n    \n    .notification-button {\n      display: none;\n    }\n  }\n  \n  /* Default states */\n  .mobile-only {\n    display: none;\n  }\n  \n  .desktop-only {\n    display: flex;\n  }\n"}),e.jsx("header",{className:"navbar-fixed bg-[#02284f] dark:bg-[#01111e] shadow-lg z-[100]",children:e.jsx("nav",{className:"bg-[#02284f] dark:bg-[#01111e] w-full relative",children:e.jsxs("div",{className:"container px-4 mx-auto relative",children:[e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"menu-burger-wrapper",children:e.jsx(zp,{})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(jl.div,{onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),style:{display:"inline-block"},children:e.jsxs(Z,{to:t?c.getRoleDashboardPath():"/login",className:"navbar-brand text-2xl font-black tracking-tight text-white dark:text-white whitespace-nowrap",tabIndex:0,children:[e.jsx(jl.span,{animate:{color:p?"#528eb2":"white"},transition:{duration:.4,ease:"easeInOut"},className:"transition-colors",style:{marginRight:2},children:"Big"}),e.jsx(jl.span,{animate:{color:p?"white":"#528eb2"},transition:{duration:.4,ease:"easeInOut"},className:"transition-colors",children:"Project"})]})})})]}),t&&e.jsx("div",{className:"hidden md:flex flex-1 justify-center mx-4",children:e.jsx("div",{className:"search-container w-full max-w-md flex justify-end",children:e.jsx(Yp,{})})}),e.jsxs("div",{className:"flex items-center navbar-actions",children:[t&&(c.isStudent()||c.isTeacher())&&e.jsx("div",{className:"desktop-only relative mr-2",children:e.jsxs("button",{onClick:()=>u(c.isTeacher()?"/teacher/attendance":"/student/attendance"),className:"group flex items-center justify-start w-11 h-11 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-full cursor-pointer relative overflow-hidden transition-all duration-200 shadow-md md:hover:w-32 hover:rounded-[50px] hover:shadow-lg active:translate-x-1 active:translate-y-1",children:[e.jsxs("div",{className:"flex items-center justify-center w-full transition-all duration-300 group-hover:justify-start group-hover:px-3",children:[e.jsx(ec,{className:"w-4 h-4 text-white group-hover:animate-pulse"}),m&&e.jsxs("span",{className:"absolute top-1 right-2 md:right-5 flex h-3 w-3",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-500 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-red-600"})]})]}),e.jsx("div",{className:"absolute right-5 transform translate-x-full opacity-0 text-white text-sm font-medium transition-all duration-300 group-hover:translate-x-0 group-hover:opacity-100 hidden md:block",children:"Présence"})]})}),t&&e.jsx("div",{className:"md:hidden",children:e.jsx(Fm,{variant:"ghost",size:"icon",className:"rounded-full w-10 h-10 p-0 bg-transparent text-gray-200 hover:bg-[#02284f]/80 hover:text-white dark:text-[#78b9dd] dark:hover:bg-[#78b9dd]/20",onClick:()=>l(!o),children:e.jsx(Tc,{className:"h-5 w-5"})})}),h?e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Zp,{className:"h-8 w-24 rounded-md dark:bg-gray-700"}),e.jsx(Zp,{className:"h-10 w-10 rounded-full dark:bg-gray-700"})]}):t?e.jsx(jC,{onLogout:()=>i(!0),userData:r,setLogoutDialogOpen:i}):e.jsx("div",{className:"mobile-auth-buttons",children:e.jsx(RC,{})})]})]}),t&&o&&e.jsx("div",{className:"md:hidden px-4 pb-4",children:e.jsx(Yp,{})})]})})}),e.jsx(Hm,{open:a,onOpenChange:e=>i(e),children:e.jsxs(Qm,{className:"max-h-[calc(100vh-2rem)] w-full max-w-md overflow-hidden rounded-2xl border-0 shadow-xl",children:[e.jsx("div",{className:"overflow-y-auto max-h-[70vh] fade-in-up",children:e.jsxs(Xm,{children:[e.jsx(Ym,{className:"text-xl font-semibold",children:"Confirmation de déconnexion"}),e.jsx(Zm,{className:"text-base mt-2",children:"Êtes-vous sûr de vouloir vous déconnecter de votre compte ? Toutes vos sessions actives seront fermées."})]})}),e.jsxs(Jm,{className:"mt-6 flex justify-end space-x-2",children:[e.jsx(Fm,{variant:"outline",onClick:()=>i(!1),className:"rounded-full border-2 hover:bg-gray-100 transition-all duration-200",children:"Annuler"}),e.jsx(Fm,{variant:"destructive",onClick:async()=>{try{if(i(!1),window.__isLoggingOut)return;window.dispatchEvent(new Event("logout-start")),nf.logout("/login")}catch(e){console.error("Erreur lors de la déconnexion:",e),nf.clearAuthData(!0,"Une erreur est survenue lors de la déconnexion.")}},className:"rounded-full bg-gradient-to-r from-red-500 to-red-700 hover:from-red-600 hover:to-red-800 transition-all duration-200",children:"Se déconnecter"})]})]})})]})}));AC.displayName="Navbar";var _C="Popover",[DC,IC]=E(_C,[R]),PC=R(),[MC,LC]=DC(_C),OC=t=>{const{__scopePopover:n,children:r,open:s,defaultOpen:a,onOpenChange:i,modal:o=!1}=t,l=PC(n),c=Q.useRef(null),[u,d]=Q.useState(!1),[h,f]=U({prop:s,defaultProp:a??!1,onChange:i,caller:_C});return e.jsx(F,{...l,children:e.jsx(MC,{scope:n,contentId:z(),triggerRef:c,open:h,onOpenChange:f,onOpenToggle:Q.useCallback((()=>f((e=>!e))),[f]),hasCustomAnchor:u,onCustomAnchorAdd:Q.useCallback((()=>d(!0)),[]),onCustomAnchorRemove:Q.useCallback((()=>d(!1)),[]),modal:o,children:r})})};OC.displayName=_C;var UC="PopoverAnchor";Q.forwardRef(((t,n)=>{const{__scopePopover:r,...s}=t,a=LC(UC,r),i=PC(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return Q.useEffect((()=>(o(),()=>l())),[o,l]),e.jsx(V,{...i,...s,ref:n})})).displayName=UC;var FC="PopoverTrigger",zC=Q.forwardRef(((t,n)=>{const{__scopePopover:r,...s}=t,a=LC(FC,r),i=PC(r),o=j(n,a.triggerRef),l=e.jsx(k.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":YC(a.open),...s,ref:o,onClick:I(t.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:e.jsx(V,{asChild:!0,...i,children:l})}));zC.displayName=FC;var VC="PopoverPortal",[BC,qC]=DC(VC,{forceMount:void 0}),$C=t=>{const{__scopePopover:n,forceMount:r,children:s,container:a}=t,i=LC(VC,n);return e.jsx(BC,{scope:n,forceMount:r,children:e.jsx(T,{present:r||i.open,children:e.jsx(C,{asChild:!0,container:a,children:s})})})};$C.displayName=VC;var HC="PopoverContent",WC=Q.forwardRef(((t,n)=>{const r=qC(HC,t.__scopePopover),{forceMount:s=r.forceMount,...a}=t,i=LC(HC,t.__scopePopover);return e.jsx(T,{present:s||i.open,children:i.modal?e.jsx(KC,{...a,ref:n}):e.jsx(QC,{...a,ref:n})})}));WC.displayName=HC;var GC=D("PopoverContent.RemoveScroll"),KC=Q.forwardRef(((t,n)=>{const r=LC(HC,t.__scopePopover),s=Q.useRef(null),a=j(n,s),i=Q.useRef(!1);return Q.useEffect((()=>{const e=s.current;if(e)return A(e)}),[]),e.jsx(_,{as:GC,allowPinchZoom:!0,children:e.jsx(XC,{...t,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:I(t.onCloseAutoFocus,(e=>{e.preventDefault(),i.current||r.triggerRef.current?.focus()})),onPointerDownOutside:I(t.onPointerDownOutside,(e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;i.current=r}),{checkForDefaultPrevented:!1}),onFocusOutside:I(t.onFocusOutside,(e=>e.preventDefault()),{checkForDefaultPrevented:!1})})})})),QC=Q.forwardRef(((t,n)=>{const r=LC(HC,t.__scopePopover),s=Q.useRef(!1),a=Q.useRef(!1);return e.jsx(XC,{...t,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:e=>{t.onCloseAutoFocus?.(e),e.defaultPrevented||(s.current||r.triggerRef.current?.focus(),e.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:e=>{t.onInteractOutside?.(e),e.defaultPrevented||(s.current=!0,"pointerdown"===e.detail.originalEvent.type&&(a.current=!0));const n=e.target,i=r.triggerRef.current?.contains(n);i&&e.preventDefault(),"focusin"===e.detail.originalEvent.type&&a.current&&e.preventDefault()}})})),XC=Q.forwardRef(((t,n)=>{const{__scopePopover:r,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...h}=t,f=LC(HC,r),m=PC(r);return P(),e.jsx(M,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:i,children:e.jsx(L,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>f.onOpenChange(!1),children:e.jsx(O,{"data-state":YC(f.open),role:"dialog",id:f.contentId,...m,...h,ref:n,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})})),JC="PopoverClose";Q.forwardRef(((t,n)=>{const{__scopePopover:r,...s}=t,a=LC(JC,r);return e.jsx(k.button,{type:"button",...s,ref:n,onClick:I(t.onClick,(()=>a.onOpenChange(!1)))})})).displayName=JC;function YC(e){return e?"open":"closed"}Q.forwardRef(((t,n)=>{const{__scopePopover:r,...s}=t,a=PC(r);return e.jsx(B,{...a,...s,ref:n})})).displayName="PopoverArrow";var ZC=$C,eR=WC;const tR=OC,nR=zC,rR=Q.forwardRef((({className:t,align:n="center",sideOffset:r=4,...s},a)=>e.jsx(ZC,{children:e.jsx(eR,{ref:a,align:n,sideOffset:r,className:Om("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),onEscapeKeyDown:e=>e.preventDefault(),onFocusOutside:e=>e.preventDefault(),onOpenAutoFocus:e=>e.preventDefault(),onCloseAutoFocus:e=>e.preventDefault(),...s})})));rR.displayName=eR.displayName;const sR=()=>{const[t,n]=Q.useState(!1),{refreshProfileData:r,isProfileLoading:s,profileData:a}=Q.useContext(xR),[i,o]=Q.useState(!1),l=Q.useRef(0),[c,u]=Q.useState(!1),[d,h]=Q.useState(!1),[f,m]=Q.useState(!1);Q.useEffect((()=>{const e=()=>{r()};return document.addEventListener("user:data-updated",e),()=>{document.removeEventListener("user:data-updated",e)}}),[r]),Q.useEffect((()=>{a?.stats?.profile?.isAcknowledged&&(h(!0),u(!0))}),[a]);const p=async()=>{try{localStorage.getItem("profile_completion_acknowledged"),(()=>{try{const e=parseInt(localStorage.getItem("profile_completion_acknowledged_at")||"0",10);return Date.now()-e<1e4}catch(e){return!1}})(),localStorage.getItem("profile_completion_showing");const t=a?.stats?.profile||{completedItems:0},n=await r({forceRefresh:!0}),s=await Cf.getStats({forceRefresh:!0});3===(s?.stats?.profile||{completedItems:0}).completedItems&&(t.completedItems<3||t.completedItems);if(s?.stats?.profile?.isAcknowledged){h(!0),u(!0);try{localStorage.setItem("profile_completion_acknowledged","true")}catch(e){}}return n}catch(t){}};Q.useEffect((()=>{const e=setTimeout((()=>{p()}),500);return()=>clearTimeout(e)}),[]);const{completedItems:g,completionItems:y,isAcknowledged:v}=Q.useMemo((()=>{const e=a||{},t=Boolean(e?.linkedinUrl),n=Boolean(e?.hasCvDocument),r=(()=>{const t=Array.isArray(e?.diplomas),n=t?e.diplomas.length:0;return t&&n>0})(),s=[{name:"LinkedIn",completed:t,description:"Votre profil LinkedIn permet aux recruteurs de mieux vous connaître.",action:"/settings/profile"},{name:"CV",completed:n,description:"Votre CV est essentiel pour présenter votre parcours.",action:"/settings/career"},{name:"Diplôme",completed:r,description:"Vos diplômes certifient vos qualifications.",action:"/settings/career"}].sort(((e,t)=>e.completed&&!t.completed?-1:!e.completed&&t.completed?1:0)),i=[t,n,r].filter(Boolean).length,o="true"===localStorage.getItem("profile_completion_acknowledged");return{completedItems:i,completionItems:s,isAcknowledged:d||o||(e?.stats?.profile?.isAcknowledged||!1)}}),[a,d]);Q.useEffect((()=>{if(a?.stats?.profile?.isAcknowledged)return h(!0),void u(!0);const e=3===g&&l.current<3;if(3===g){if(!v&&!d&&!f&&(e||forceDispatch)){m(!0),(async()=>{await p();const t=a?.stats?.profile?.isAcknowledged;if(!t){const t=new CustomEvent("profile:completion",{detail:{timestamp:Date.now(),completedItems:g,justCompleted:e,forceDispatch:forceDispatch}});document.dispatchEvent(t)}})();const t=setTimeout((()=>{u(!0)}),4e3);return()=>{clearTimeout(t)}}u(!0)}else m(!1);l.current=g}),[g,v,d,f,a]);if(Q.useEffect((()=>{!s&&i&&o(!1)}),[s,i]),c&&3===g||v)return null;if(s&&!a||i)return e.jsxs("button",{className:"fixed right-4 sm:right-8 bottom-4 sm:bottom-8 z-20 flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-3 rounded-full shadow-lg bg-primary text-primary-foreground text-sm hover:bg-primary/90",disabled:!0,children:[e.jsx(Sc,{className:"w-4 h-4 sm:w-5 sm:h-5 animate-spin"}),e.jsx("span",{className:"font-medium",children:"Chargement..."})]});const b=Math.round(g/3*100),x=3-g;return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>n(!t),className:"fixed right-4 sm:right-8 bottom-4 sm:bottom-8 z-20 flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-3 rounded-full shadow-lg text-sm "+(t?"bg-background text-foreground hover:bg-muted":"bg-primary text-primary-foreground hover:bg-primary/90"),children:[e.jsx($l,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("span",{className:"font-medium",children:0===x?"Profil complet ✨":`${x} élément${x>1?"s":""} à compléter`})]}),t&&e.jsx("div",{className:"fixed right-4 sm:right-8 bottom-16 sm:bottom-24 w-72 sm:w-80 z-10",children:e.jsx("div",{className:"bg-background/80 backdrop-blur-lg rounded-xl shadow-lg border border-border/5 overflow-hidden",children:e.jsxs("div",{className:"p-3 sm:p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-sm font-medium text-foreground",children:"Complétude du profil"}),e.jsxs(tR,{children:[e.jsx(nR,{asChild:!0,children:e.jsx("button",{className:"inline-flex items-center justify-center rounded-full w-4 h-4 text-muted-foreground hover:text-primary transition-colors",children:e.jsx(dc,{className:"w-3 h-3"})})}),e.jsx(rR,{className:"w-60 sm:w-64 p-3",align:"end",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"Complétez ces informations pour augmenter la visibilité de votre profil auprès des recruteurs."})})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:async()=>{if(!i&&!s){o(!0);try{await p()}catch(e){}}},disabled:i||s,className:"inline-flex items-center justify-center rounded-full w-6 h-6 text-muted-foreground hover:text-primary transition-colors disabled:opacity-50",title:"Actualiser",children:e.jsx(Sc,{className:"w-4 h-4 "+(i||s?"animate-spin":"")})}),e.jsxs("span",{className:"text-sm font-medium",children:[g,"/3"]})]})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-1.5 mb-3 sm:mb-4",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-primary to-primary/80 rounded-full transition-all duration-300",style:{width:`${b}%`}})}),e.jsx("div",{className:"space-y-2 transition-opacity duration-300 "+(i||s?"opacity-50 pointer-events-none":"opacity-100"),children:y.map((t=>e.jsxs("div",{className:"flex items-start gap-2 sm:gap-3 p-2 rounded-lg transition-colors duration-300 "+(t.completed?"bg-green-50/50 dark:bg-green-900/10":"bg-red-50/50 dark:bg-red-900/10"),children:[e.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full flex items-center justify-center mt-0.5 transition-colors duration-300 "+(t.completed?"text-green-600 dark:text-green-400":"text-red-500 dark:text-red-400"),children:t.completed?e.jsx(Xl,{className:"w-4 h-4"}):e.jsx(Yl,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:t.name}),!t.completed&&e.jsx(Fm,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs",asChild:!0,children:e.jsxs("a",{href:t.action,className:"flex items-center gap-1",children:["Compléter",e.jsx(rc,{className:"w-3 h-3"})]})})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5 line-clamp-1",children:t.description}),"CV"===t.name&&t.completed&&e.jsx(Fm,{variant:"outline",size:"xs",className:"mt-2 h-6 px-2 text-xs w-full justify-center",onClick:()=>{},children:"Extraire LinkedIn du CV"})]})]},t.name)))})]})})})]})},aR=({children:e,element:t,roles:n,allowedRoles:r,requireAll:s=!1,fallback:a=null})=>{const{hasRole:i,isLoading:o,refreshRoles:l}=rp();Q.useRef(!1);const c=Q.useRef(null),u=Q.useRef(!1),[d,h]=Q.useState(!1),[f,m]=Q.useState(!0),p=r||n;Q.useEffect((()=>()=>{c.current&&clearTimeout(c.current)}),[]),Q.useEffect((()=>{u.current||(u.current=!0,l());const e=setTimeout((()=>{m(!1)}),500);return()=>clearTimeout(e)}),[l]),Q.useEffect((()=>{if(!o){const e=setTimeout((()=>{h(!0)}),300);return()=>clearTimeout(e)}}),[o]);const g=Q.useMemo((()=>e=>{if(i(e))return!0;const t=e.replace(/^ROLE_/,""),n=`ROLE_${t}`;return i(t)||i(n)}),[i]),y=Q.useMemo((()=>e=>!(!e||!Array.isArray(e))&&e.some((e=>g(e)))),[g]),v=Q.useMemo((()=>!(!o&&d&&!f)||("string"==typeof p?g(p):s?p.every((e=>g(e))):y(p))),[p,g,y,o,d,s,f]);return o||f?null:t&&v?t:v?e:a},iR=()=>{const{isLoading:t,refreshRoles:n}=rp(),r=sp();Y();const[s,a]=Q.useState(!1);if(Q.useEffect((()=>{let e=!0;return(async()=>{if(nf.isLoggedIn()&&!s){a(!0);try{await nf.getCurrentUser(!0),e&&n()}catch(t){console.error("Error refreshing user roles:",t)}finally{e&&a(!1)}}})(),()=>{e=!1}}),[n,s]),t||s)return null;const i=r.getRoleDashboardPath();return i&&localStorage.setItem("dashboard_path",i),e.jsx(ne,{to:i,replace:!0})},oR=()=>{const{translate:t,currentLanguage:n}=sg(),[r,s]=Q.useState(0),[a,i]=Q.useState({});Q.useEffect((()=>{const e=()=>{const e=window.innerHeight,t=document.body.offsetHeight,n=document.querySelector("main");s(n&&t<e?e-t+100:0)};e(),window.addEventListener("resize",e);const t=setTimeout(e,1e3);return()=>{window.removeEventListener("resize",e),clearTimeout(t)}}),[]);const o=Q.useCallback((async()=>{try{const[e,n,r,s,a,o,l,c,u,d,h,f,m,p,g,y,v]=await Promise.all([t("Plateforme éducative innovante dédiée à l'apprentissage et au développement professionnel."),t("Nos coordonnées :"),t("Liens rapides"),t("Nos Services"),t("Partenariats"),t("Tous droits réservés."),t("Adresse"),t("Accueil"),t("Contact"),t("Forum"),t("FAQ"),t("À propos de nous"),t("Nos formations"),t("Mentions légales"),t("CGU"),t("Nos partenaires"),t("Devenir partenaire")]);i({description:e,coordinates:n,quickLinks:r,ourServices:s,partnerships:a,copyright:o,address:l,home:c,contact:u,forum:d,faq:h,about:f,formations:m,legal:p,terms:g,partners:y,becomePartner:v})}catch(e){console.error("Translation error:",e)}}),[t]);Q.useEffect((()=>{o()}),[n,o]);const l={title:a.quickLinks,links:[{name:a.home,href:"/home"},{name:a.contact,href:"/contact"},{name:a.forum,href:"/forum"},{name:a.faq,href:"/faq"}]},c={title:a.ourServices,links:[{name:a.about,href:"/about"},{name:a.formations,href:"/formations"},{name:a.legal,href:"/mentions-legales"},{name:a.terms,href:"/cgu"}]},u={title:a.partnerships,links:[{name:a.partners,href:"/partenaires"},{name:a.becomePartner,href:"/devenir-partenaire"}]};return e.jsx("footer",{className:"bg-[#02284f] dark:bg-[#011627] pt-12 pb-6 mt-auto",style:{marginTop:r?`${r}px`:"auto"},children:e.jsxs("div",{className:"container px-4 mx-auto",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-8 mb-8",children:[e.jsxs("div",{className:"md:col-span-4",children:[e.jsxs(Z,{to:"/",className:"text-2xl font-black tracking-tight text-white inline-block mb-4",children:["Big",e.jsx("span",{className:"text-[#528eb2] dark:text-[#78b9dd]",children:"Project"})]}),e.jsxs("div",{className:"mt-4 text-gray-300",children:[e.jsx("p",{className:"mb-4 text-sm",children:a.description}),e.jsx("h3",{className:"text-sm font-semibold text-white mb-2",children:a.coordinates}),e.jsx("p",{className:"text-sm mb-1",children:"Email : Bigproject@laplateforme.io"}),e.jsxs("p",{className:"text-sm",children:[a.address," : 30 Place Jules Guesdes, 13003 MARSEILLE"]})]})]}),e.jsx("div",{className:"md:col-span-8",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-8",children:[l,c,u].map(((t,n)=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold mb-4 pb-1 border-b border-[#528eb2]/30 dark:border-[#78b9dd]/50",children:t.title}),e.jsx("ul",{className:"space-y-2",children:t.links.map(((t,n)=>e.jsx("li",{children:e.jsx("a",{href:t.href,className:"text-gray-300 hover:text-[#528eb2] dark:hover:text-[#78b9dd] transition-colors duration-300 text-sm",children:t.name})},n)))})]},n)))})})]}),e.jsxs("div",{className:"pt-6 border-t border-gray-700 flex flex-col sm:flex-row justify-between items-center",children:[e.jsxs("p",{className:"text-sm text-gray-400 mb-4 sm:mb-0",children:["© Copyright 2025 - Big",e.jsx("span",{className:"text-[#528eb2] dark:text-[#78b9dd]",children:"Project"})," - Tous droits réservés."]}),e.jsxs("div",{className:"flex items-center space-x-4 text-gray-400",children:[e.jsx("a",{href:"#",className:"hover:text-[#528eb2] transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z",clipRule:"evenodd"})})}),e.jsx("a",{href:"#",className:"hover:text-[#528eb2] transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{d:"M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"})})}),e.jsx("a",{href:"#",className:"hover:text-[#528eb2] transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z",clipRule:"evenodd"})})})]})]})]})})},lR=({messages:t,user:n,loading:r,error:s,messagesEndRef:a,messageContainerLoading:i,onManualRefresh:o})=>{const l=e=>{try{return mC(new Date(e),{addSuffix:!0,locale:bC})}catch(t){return console.error("Error formatting date:",t),"récemment"}};return r&&0===t.length?e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):s?e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("div",{className:"text-red-500",children:s})}):0===t.length?e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("div",{className:"text-gray-500",children:"Aucun message"})}):e.jsxs("div",{className:"relative h-full",children:[e.jsxs("button",{onClick:o,className:"absolute top-0 right-0 bg-blue-100 hover:bg-blue-200 text-blue-800 text-xs px-2 py-1 rounded-bl-md z-10 flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})}),"Actualiser"]}),i&&e.jsxs("div",{className:"absolute inset-0 bg-white bg-opacity-80 flex flex-col items-center justify-center z-20",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600 mb-2"}),e.jsx("p",{className:"text-blue-600 font-medium text-sm animate-pulse",children:"Envoi en cours..."}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Vos messages sont préservés"})]}),e.jsxs("div",{className:"space-y-3",children:[t.map(((t,r)=>{const s=t.sender?.id===n?.id,a=!0===t.sendFailed,i=!0===t.isSending;return e.jsx("div",{className:"flex "+(s?"justify-end":"justify-start"),children:e.jsxs("div",{className:`max-w-[85%] px-3 py-2 rounded-lg ${s?a?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800":"bg-gray-200 text-gray-800"} relative`,children:[!s&&e.jsxs("div",{className:"text-xs font-semibold text-gray-600 mb-1",children:[t.sender?.firstName," ",t.sender?.lastName]}),e.jsx("div",{className:"text-sm whitespace-pre-wrap break-words",children:t.content}),e.jsx("div",{className:"text-xs text-gray-500 mt-1 flex items-center justify-end gap-1",children:i?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"animate-pulse",children:"Envoi en cours"}),e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-500"})]}):a?e.jsx("span",{className:"text-red-500",children:"Échec d'envoi"}):l(t.createdAt)}),t.confirmed&&e.jsx("div",{className:"absolute -bottom-1 -right-1 bg-green-500 rounded-full h-2 w-2"})]})},t.id||r)})),e.jsx("div",{ref:a})]})]})},cR=({users:t,loading:n,onStartPrivateChat:r})=>{const[s,a]=Q.useState(""),[i,o]=Q.useState([]),l=Q.useRef(null);Q.useEffect((()=>{const e=t.filter((e=>!(!e.userRoles||0===e.userRoles.length)&&e.userRoles.some((e=>"teacher"===e.role.name.toLowerCase()||"student"===e.role.name.toLowerCase()||"enseignant"===e.role.name.toLowerCase()||"étudiant"===e.role.name.toLowerCase()||"professeur"===e.role.name.toLowerCase()||"élève"===e.role.name.toLowerCase()))));if(!s.trim())return void o(e);const n=s.toLowerCase(),r=e.filter((e=>e.firstName?.toLowerCase().includes(n)||e.lastName?.toLowerCase().includes(n)||`${e.firstName} ${e.lastName}`.toLowerCase().includes(n)||e.email&&e.email.toLowerCase().includes(n)||e.userRoles&&e.userRoles.some((e=>e.role.name.toLowerCase().includes(n)))));o(r)}),[s,t]);return n?e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"relative",ref:l,children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-gray-500","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})})}),e.jsx("input",{type:"text",className:"block w-full p-2 pl-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500",placeholder:"Rechercher un utilisateur...",value:s,onChange:e=>{a(e.target.value)}}),s&&e.jsx("button",{onClick:()=>a(""),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsx("div",{className:"mt-3",children:i.length>0?i.map((t=>e.jsxs("div",{className:"flex items-center p-2 hover:bg-gray-100 rounded-lg",children:[e.jsxs("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-semibold mr-3",children:[t.firstName?.charAt(0),t.lastName?.charAt(0)]}),e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"font-medium",children:[t.firstName," ",t.lastName]}),t.userRoles&&t.userRoles.length>0&&e.jsx("div",{className:"text-xs text-gray-500",children:t.userRoles.map((e=>e.role.name)).join(", ")})]}),e.jsx("button",{onClick:()=>r(t),className:"text-blue-600 hover:text-blue-800 p-2",title:"Démarrer une conversation privée",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"})})})]},t.id))):e.jsx("div",{className:"text-center p-4 text-gray-500",children:s?"Aucun enseignant ou étudiant ne correspond à votre recherche":"Aucun enseignant ou étudiant disponible pour le chat"})})]})},uR={all:["chat"],global:()=>[...uR.all,"global"],private:e=>[...uR.all,"private",e]},dR=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(n){console.error(`Error saving to storage with key ${e}:`,n)}},hR=e=>{try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(t){return console.error(`Error loading from storage with key ${e}:`,t),null}},fR=()=>{const e=new Date;return[{id:"mock-1",content:"Welcome to the messaging system!",createdAt:new Date(e.getTime()-864e5).toISOString(),sender:{id:"system",firstName:"System",lastName:"Notification"},isSystem:!0},{id:"mock-2",content:"This is a placeholder message while the messaging API is being connected.",createdAt:new Date(e.getTime()-36e5).toISOString(),sender:{id:"system",firstName:"System",lastName:"Notification"},isSystem:!0}]},mR=e=>{const t=new Date;return[{id:`private-mock-${e}-1`,content:"Welcome to your private conversation!",createdAt:new Date(t.getTime()-864e5).toISOString(),sender:{id:"system",firstName:"System",lastName:"Notification"},recipientId:e,isSystem:!0}]};function pR(e,t){const n=[...e];return t.forEach((e=>{n.some((t=>e.id&&t.id&&e.id===t.id||e.content===t.content&&e.sender?.id===t.sender?.id))||n.push(e)})),n.sort(((e,t)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()))}const gR=()=>{const e=ce(),t=de({queryKey:uR.global(),queryFn:async()=>{const e=hR("global_chat_messages");if("true"===sessionStorage.getItem("login_in_progress"))return console.info("Login in progress, skipping messages API call"),e||fR();try{const t=await Sh.get("/api/messages/recent",{...Sh.withAuth(),timeout:8e3,retries:2,noCache:!1});if(!t||!1===t.success)return console.warn("API returned invalid messages response, using local cache"),e||fR();const n=t.messages||[];if(e?.length>0){const t=pR(e,n);return dR("global_chat_messages",t),t}return dR("global_chat_messages",n),n}catch(t){return console.error("Failed to fetch global messages:",t),"ECONNABORTED"===t.code&&console.warn("API timeout, using cached messages"),e||fR()}},initialData:()=>hR("global_chat_messages")||fR(),staleTime:6e4,retry:1,retryDelay:1e3}),n=ue({mutationFn:async({content:e,tempId:t})=>({serverMessage:(await Sh.post("/api/messages",{content:e},Sh.withAuth())).data,tempId:t}),onMutate:async({content:t,user:n,tempId:r})=>{await e.cancelQueries({queryKey:uR.global()});const s=e.getQueryData(uR.global()),a={id:r,content:t,sender:n,createdAt:(new Date).toISOString(),isSending:!0,permanent:!0},i=[...s,a];return e.setQueryData(uR.global(),i),dR("global_chat_messages",i),{previousMessages:s,tempMessage:a}},onSuccess:(t,n,r)=>{const{serverMessage:s,tempId:a}=t,i=e.getQueryData(uR.global()).map((e=>e.id===a?{...s,confirmed:!0,permanent:!0,sender:s.sender||r.tempMessage.sender}:e));e.setQueryData(uR.global(),i),dR("global_chat_messages",i)},onError:(t,n,r)=>{if(console.error("Error sending message:",t),r?.previousMessages){const t=e.getQueryData(uR.global()).map((e=>e.id===r.tempMessage.id?{...e,isSending:!1,sendFailed:!0,permanent:!0}:e));e.setQueryData(uR.global(),t),dR("global_chat_messages",t)}}});return{messages:t.data||[],isLoading:t.isLoading,error:t.error,refetch:t.refetch,sendMessage:n.mutate,isSending:n.isPending}},yR=e=>{const t=ce(),n=`private_chat_messages_${e}`,r=de({queryKey:uR.private(e),queryFn:async()=>{const t=hR(n);if("true"===sessionStorage.getItem("login_in_progress"))return console.info("Login in progress, skipping private messages API call"),t||mR(e);try{const r=await Sh.get(`/api/messages/private/${e}`,{...Sh.withAuth(),timeout:8e3,retries:2,noCache:!1});if(!r||!1===r.success)return console.warn("API returned invalid private messages response, using local cache"),t||mR(e);const s=r.messages||[];if(t?.length>0){const e=pR(t,s);return dR(n,e),e}return dR(n,s),s}catch(r){return console.error(`Failed to fetch private messages for user ${e}:`,r),"ECONNABORTED"===r.code&&console.warn("API timeout, using cached private messages"),t||mR(e)}},initialData:()=>hR(n)||mR(e),enabled:!!e,staleTime:6e4,retry:1,retryDelay:1e3}),s=ue({mutationFn:async({content:e,recipientId:t,tempId:n})=>({serverMessage:(await Sh.post("/api/messages/private",{content:e,recipientId:t},Sh.withAuth())).data,tempId:n}),onMutate:async({content:e,user:r,recipientId:s,tempId:a})=>{await t.cancelQueries({queryKey:uR.private(s)});const i=t.getQueryData(uR.private(s)),o={id:a,content:e,sender:r,recipientId:s,createdAt:(new Date).toISOString(),isSending:!0,permanent:!0},l=[...i,o];return t.setQueryData(uR.private(s),l),dR(n,l),{previousMessages:i,tempMessage:o}},onSuccess:(e,r,s)=>{const{serverMessage:a,tempId:i}=e,o=t.getQueryData(uR.private(r.recipientId)).map((e=>e.id===i?{...a,confirmed:!0,permanent:!0,sender:a.sender||s.tempMessage.sender}:e));t.setQueryData(uR.private(r.recipientId),o),dR(n,o)},onError:(e,r,s)=>{if(console.error("Error sending private message:",e),s?.previousMessages){const e=t.getQueryData(uR.private(r.recipientId)).map((e=>e.id===s.tempMessage.id?{...e,isSending:!1,sendFailed:!0,permanent:!0}:e));t.setQueryData(uR.private(r.recipientId),e),dR(n,e)}}});return{messages:r.data||[],isLoading:r.isLoading,error:r.error,refetch:r.refetch,sendMessage:s.mutate,isSending:s.isPending}},vR=({isOpen:t,onClose:n,onNewMessage:r=()=>{}})=>{const[s,a]=Q.useState("global"),[i,o]=Q.useState(""),[l,c]=Q.useState(!0),[u,d]=Q.useState(null),[h,f]=Q.useState([]),[m,p]=Q.useState(!0),[g,y]=Q.useState("global"),[v,b]=Q.useState(null),x=Q.useRef(null),w=Q.useRef([]),{messages:E,isLoading:k,error:S,refetch:N,sendMessage:T,isSending:C}=gR(),{messages:R,isLoading:j,error:A,refetch:_,sendMessage:D,isSending:I}=yR(v?.id),P="global"===g?E:R,M="global"===g?k:j,L="global"===g?S:A,O="global"===g?C:I;Q.useEffect((()=>{const e=nf.getUser();d(e)}),[]),Q.useEffect((()=>{U()}),[P]),Q.useEffect((()=>{if(P?.length>0&&w.current?.length>0&&P.length>w.current.length){P.filter((e=>!w.current.some((t=>t.id===e.id)))).some((e=>e.sender?.id!==u?.id))&&(r(),window.dispatchEvent(new CustomEvent("newChatMessage")))}w.current=P||[]}),[P,u,r]),Q.useEffect((()=>{t&&"users"===s&&F()}),[t,s]);const U=()=>{x.current?.scrollIntoView({behavior:"smooth"})},F=async()=>{try{p(!0);const e=await Sh.get("/users/list",Sh.withAuth());f(e),p(!1)}catch(e){console.error("Error fetching users:",e),p(!1)}},z=e=>{a(e),"global"===e&&(y("global"),b(null),c(!0),N()),"users"===e&&0===h.length&&F()};return e.jsxs("div",{className:"fixed top-0 right-0 w-80 md:w-96 bg-white shadow-xl z-50 transform transition-transform duration-300 ease-in-out "+(t?"translate-x-0":"translate-x-full"),style:{height:"calc(100vh - 60px)",top:"60px",borderLeft:"1px solid #e5e7eb",boxShadow:"-4px 0 15px rgba(0, 0, 0, 0.05)"},children:[e.jsxs("div",{className:"bg-blue-600 text-white px-4 py-3 flex justify-between items-center",children:[e.jsx("h3",{className:"font-medium",children:"global"===g?"Chat":`Chat avec ${v?.firstName} ${v?.lastName}`}),e.jsxs("div",{className:"flex items-center",children:["global"!==g&&e.jsx("button",{onClick:()=>{y("global"),b(null),c(!0),N()},className:"text-white hover:text-gray-200 mr-3",title:"Retour au chat global",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})})}),e.jsx("button",{onClick:n,className:"text-white hover:text-gray-200",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]}),"global"===g&&e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsx("button",{className:"flex-1 py-3 font-medium text-sm "+("global"===s?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>z("global"),children:"Chat Global"}),e.jsx("button",{className:"flex-1 py-3 font-medium text-sm "+("users"===s?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>z("users"),children:"Utilisateurs"})]}),e.jsx("div",{className:("global"===g?"h-[calc(100%-106px)]":"h-[calc(100%-60px)]")+" flex flex-col",children:"global"===s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-1 overflow-y-auto p-3 bg-gray-50",children:e.jsx(lR,{messages:P,user:u,loading:M,error:L,messagesEndRef:x,messageContainerLoading:O,onManualRefresh:()=>{"global"===g?N():v&&_()}})}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!i.trim()||O)return;const t=`perm-${Date.now()}-${Math.floor(1e4*Math.random())}`;"global"===g?T({content:i,user:u,tempId:t}):v&&D({content:i,user:u,recipientId:v.id,tempId:t}),o("")},className:"border-t border-gray-200 p-3 flex",children:[e.jsx("input",{type:"text",value:i,onChange:e=>o(e.target.value),placeholder:`Écrivez votre message${"global"!==g?` à ${v?.firstName}`:""}...`,className:"flex-1 border border-gray-300 rounded-l-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",disabled:O}),e.jsx("button",{type:"submit",disabled:O,className:"text-white px-3 py-2 rounded-r-lg focus:outline-none "+(O?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"),children:O?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 1.414L10.586 9H7a1 1 0 100 2h3.586l-1.293 1.293a1 1 0 101.414 1.414l3-3a1 1 0 000-1.414z",clipRule:"evenodd"})})})]})]}):e.jsx("div",{className:"flex-1 overflow-y-auto p-3 bg-gray-50",children:e.jsx(cR,{users:h,loading:m,onStartPrivateChat:e=>{a("global"),y(e.id),b(e),c(!0),setTimeout((()=>_()),0)}})})})]})},bR=()=>{const[t,n]=Q.useState(!1),[r,s]=Q.useState(!1);return Q.useEffect((()=>{const e=()=>{t||s(!0)};return window.addEventListener("newChatMessage",e),()=>{window.removeEventListener("newChatMessage",e)}}),[t]),e.jsxs(e.Fragment,{children:[e.jsx(vR,{isOpen:t,onClose:()=>n(!1),onNewMessage:()=>{t||s(!0)}}),!t&&e.jsx("div",{className:"fixed right-0 top-1/2 transform -translate-y-1/2 z-40",children:e.jsxs("button",{onClick:()=>{n(!t),t||s(!1)},className:"bg-blue-500 hover:bg-blue-600 text-white rounded-l-lg py-4 px-2 shadow-lg transition-all duration-300 focus:outline-none flex flex-col items-center relative","aria-label":"Open chat",children:[r&&e.jsx("div",{className:"absolute -top-1 -left-1 bg-red-500 rounded-full h-3 w-3"}),e.jsx("span",{className:"text-sm font-medium transform rotate-180",style:{writingMode:"vertical-rl"},children:"Chat"})]})})]})},xR=Q.createContext({profileData:null,refreshProfileData:()=>{},isProfileLoading:!1}),wR=({isActive:t})=>{const n=Q.useRef(null),r=Q.useRef(null),s=Q.useRef([]),a=Q.useCallback((()=>{const e=n.current;if(!e)return;e.getContext("2d").clearRect(0,0,e.width,e.height)}),[]),i=Q.useCallback((()=>{const e=n.current;if(!e)return;e.getContext("2d");const t=["#FFD700","#FF69B4","#1E90FF","#20B2AA","#9370DB","#FF7F50"];s.current=[];for(let n=0;n<80;n++)s.current.push({x:Math.random()*e.width,y:Math.random()*e.height-e.height,color:t[Math.floor(Math.random()*t.length)],size:8*Math.random()+3,velocity:{x:3*Math.random()-1.5,y:2*Math.random()+1.5},rotation:360*Math.random(),rotationSpeed:4*Math.random()-2,shape:Math.random()>.7?"circle":"square",opacity:.4*Math.random()+.6})}),[]),o=Q.useCallback((()=>{const e=n.current;if(!e)return;const a=e.getContext("2d");a.clearRect(0,0,e.width,e.height),s.current.forEach((t=>{a.save(),a.globalAlpha=t.opacity,a.translate(t.x,t.y),a.rotate(t.rotation*Math.PI/180),a.fillStyle=t.color,"circle"===t.shape?(a.beginPath(),a.arc(0,0,t.size/2,0,2*Math.PI),a.fill()):a.fillRect(-t.size/2,-t.size/2,t.size,t.size),a.restore(),t.x+=t.velocity.x,t.y+=t.velocity.y,t.rotation+=t.rotationSpeed,t.y>e.height&&(t.y=-t.size,t.x=Math.random()*e.width),(t.x<-t.size||t.x>e.width+t.size)&&(t.x=Math.random()*e.width)})),t&&(r.current=requestAnimationFrame(o))}),[t]);return Q.useEffect((()=>{const e=()=>{const e=n.current;e&&(e.width=window.innerWidth,e.height=window.innerHeight,t&&i())};return window.addEventListener("resize",e),setTimeout(e,0),()=>{window.removeEventListener("resize",e)}}),[i,t]),Q.useEffect((()=>(t?(i(),r.current=requestAnimationFrame(o)):(r.current&&(cancelAnimationFrame(r.current),r.current=null),a(),s.current=[]),()=>{r.current&&(cancelAnimationFrame(r.current),r.current=null),a()})),[t,i,o,a]),t?e.jsx("canvas",{ref:n,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:100}}):null},ER=({isOpen:t,onClose:n})=>{if(X.useEffect((()=>{}),[t]),!t)return null;const r=()=>{n()};return e.jsx(ze,{children:t&&e.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[e.jsx(jl.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},className:"fixed inset-0 bg-black/30 backdrop-blur-sm",onClick:r}),e.jsx(jl.div,{initial:{scale:.8,opacity:0,y:30},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:30},transition:{type:"spring",damping:25,stiffness:200,duration:.8},className:"relative w-full max-w-[85vw] sm:max-w-md bg-white dark:bg-gray-900 rounded-xl shadow-xl overflow-hidden z-[61]",children:e.jsx("div",{className:"relative p-4 sm:p-6 md:p-8 flex flex-col items-center justify-center text-center",children:e.jsxs("div",{className:"relative z-10 w-full",children:[e.jsx("div",{className:"mb-4 sm:mb-6 bg-blue-100 dark:bg-blue-900/30 w-16 h-16 sm:w-20 sm:h-20 md:w-24 md:h-24 rounded-full flex items-center justify-center mx-auto",children:e.jsx(Ec,{className:"h-8 w-8 sm:h-10 sm:w-10 md:h-12 md:w-12 text-blue-600 dark:text-blue-400"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-2 sm:mb-3 md:mb-4 text-gray-800 dark:text-gray-100",children:"Félicitations !"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-300 mb-4 sm:mb-6 md:mb-8 mx-auto max-w-xs sm:max-w-sm",children:"Votre profil est maintenant complet ! Vous êtes prêt à vous connecter avec des recruteurs potentiels et à profiter pleinement de toutes les fonctionnalités."}),e.jsx(Fm,{className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 text-sm sm:text-base",onClick:r,children:"Continuer"})]})})})]})})},kR="initial",SR="minimal",NR="loading",TR="complete",CR="error",RR=()=>{const[t,n]=Q.useState(null),[r,s]=Q.useState(null),[a,i]=Q.useState(kR),[o,l]=Q.useState(!1),{hasRole:c}=rp(),u=te(),[d,h]=Q.useState(nf.isLoggedIn()),[f,m]=Q.useState("100vh"),[p,g]=Q.useState(!0),[y,v]=Q.useState(!1),[b,x]=Q.useState(!1),{theme:w,isDark:E}=TC();Q.useEffect((()=>{d||(i(kR),n(null),s(null))}),[d]);const k=[].includes(u.pathname),S=Q.useCallback((()=>{const e=window.innerHeight;m(e-64+200+"px")}),[]),N=Q.useCallback((async(e={})=>{if(nf.isLoggedIn())try{i(NR);const t=await Cf.getAllProfileData({forceRefresh:e.forceRefresh||!0,preventImmediateRefresh:e.preventImmediateRefresh||!1});return s(t),i(TR),t}catch(t){return i(CR),null}return null}),[]);Q.useEffect((()=>{let e=!0;async function t(t){const n=await N({forceRefresh:!0}),r=!!(n&&n.stats&&n.stats.profile&&n.stats.profile.isAcknowledged);y||b||r||e&&(v(!0),setTimeout((()=>x(!0)),800))}return document.addEventListener("profile:completion",t),()=>{e=!1,document.removeEventListener("profile:completion",t)}}),[y,b,N]);const T=Q.useCallback((()=>{v(!1),x(!1),Cf.acknowledgeProfileCompletion().then((()=>N({forceRefresh:!0}))).catch((e=>{console.error("Failed to acknowledge profile completion from modal:",e)}))}),[N]);Q.useEffect((()=>(S(),window.addEventListener("resize",S),()=>{window.removeEventListener("resize",S)})),[S]),Q.useEffect((()=>{S(),window.scrollTo(0,0)}),[u.pathname,S]),Q.useEffect((()=>{const e=e=>{e.detail&&e.detail.user&&(n(e.detail.user),i(SR))},t=e=>{e.detail&&e.detail.user&&n(e.detail.user)},r=()=>{h(!0)},a=()=>{h(!1),n(null),s(null),i(kR)};return h(nf.isLoggedIn()),(async()=>{if(nf.isLoggedIn())try{const t=nf.getUser();if(t){if(n(t),i(SR),!t._minimal){i(TR);try{const[e,t]=await Promise.all([Cf.getAllProfileData({forceRefresh:!1}),Cf.getStats({forceRefresh:!1})]);t&&t.stats&&(e.stats=t.stats),s(e),setTimeout((async()=>{const[e,t]=await Promise.all([Cf.getAllProfileData({forceRefresh:!0}),Cf.getStats({forceRefresh:!0})]);t&&t.stats&&(e.stats=t.stats),s(e)}),9e3)}catch(e){}}}else{i(NR);const e=await nf.getCurrentUser();n(e),i(TR)}setTimeout((()=>{l(!0)}),300)}catch(t){i(CR)}})(),document.addEventListener("auth:minimal-data-ready",e),document.addEventListener("user:data-updated",t),window.addEventListener("login-success",r),window.addEventListener("logout-success",a),()=>{document.removeEventListener("auth:minimal-data-ready",e),document.removeEventListener("user:data-updated",t),window.removeEventListener("login-success",r),window.removeEventListener("logout-success",a)}}),[S]);const C=Q.useMemo((()=>({profileData:r,refreshProfileData:N,isProfileLoading:a===NR})),[r,N,a]),R=a===kR||a===NR,j=a===SR||a===TR;return e.jsx(xR.Provider,{value:C,children:e.jsxs("div",{className:"flex flex-col min-h-screen transition-colors duration-300 "+("dark"===w?"dark bg-gray-900 text-gray-100":"bg-gray-50 text-gray-900"),children:[d&&e.jsx(AC,{}),e.jsx(ER,{isOpen:b&&r&&r.stats&&r.stats.profile&&!r.stats.profile.isAcknowledged,onClose:T}),e.jsx("main",{className:`flex-grow transition-colors duration-300 ${k?"px-0 py-0":"container mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full"} ${"dark"===w?"bg-gray-900":"bg-gray-50"}`,style:{minHeight:f,maxWidth:k?"100%":void 0},children:e.jsx("div",{className:"w-full max-w-[2000px] mx-auto",children:e.jsx(re,{context:{userData:t,profileData:r,loadingState:a,isLoading:R,hasMinimalData:j,theme:w,isDark:"dark"===w}})})}),d&&e.jsxs(e.Fragment,{children:[o&&c(tp.GUEST)&&e.jsx(sR,{}),e.jsx(oR,{}),e.jsx(aR,{roles:[tp.STUDENT,tp.TEACHER],children:e.jsx(bR,{})})]}),e.jsx(wR,{isActive:y})]})})},jR=()=>{const t=te(),[n,r]=Q.useState(!0),[s,a]=Q.useState(!1),[i,o]=Q.useState(!1),l=Q.useRef(!1),c=Q.useRef(!1),{hasRole:u,isLoading:d}=rp(),h=sp();if(Q.useEffect((()=>{!d&&s&&o(!0)}),[d,s]),Q.useEffect((()=>{(async()=>{const e=nf.isLoggedIn();e||"/"!==t.pathname&&"/login"!==t.pathname&&"/register"!==t.pathname&&Lh.error("Veuillez vous connecter pour accéder à cette page",{duration:3e3,position:"top-center"}),a(e),r(!1)})()}),[t.pathname]),n||s&&d)return c.current&&localStorage.getItem("token")?e.jsx(re,{}):null;if(!s){if(l.current)return null;l.current=!0;const n="/"!==t.pathname?t.pathname:void 0;return n&&sessionStorage.setItem("returnTo",n),e.jsx(ne,{to:"/",replace:!0})}return!(()=>{if(!i||d)return!0;const e=t.pathname;if(u("ROLE_SUPERADMIN"))return!0;const n=[{path:"/superadmin",check:()=>u("ROLE_SUPERADMIN"),message:"Accès refusé: Cette page est réservée aux super administrateurs"},{path:"/admin",check:()=>h.isAdmin(),message:"Accès refusé: Vous n'avez pas les droits d'administrateur nécessaires"},{path:"/teacher",check:()=>h.isTeacher(),message:"Accès refusé: Cette page est réservée aux formateurs"},{path:"/student",check:()=>h.isStudent(),message:"Accès refusé: Cette page est réservée aux étudiants"},{path:"/hr",check:()=>h.isHR(),message:"Accès refusé: Cette page est réservée aux ressources humaines"},{path:"/recruiter",check:()=>h.isRecruiter()||h.isAdmin()||h.isSuperAdmin(),message:"Accès refusé: Cette page est réservée aux recruteurs"},{path:"/guest",check:()=>h.isGuest(),message:"Accès refusé: Cette page est réservée aux invités"}].find((t=>e.startsWith(t.path)));return!(n&&!n.check())||("/guest"===n.path||"/student"===n.path||Lh.error(n.message,{duration:3e3,position:"top-center"}),!1)})()&&i?e.jsx(ne,{to:"/dashboard",replace:!0}):(c.current=!0,e.jsx("div",{className:"protected-route-wrapper",children:e.jsx(re,{})}))},AR=Q.createContext();function _R({children:t}){const[n,r]=Q.useState("navy"),[s,a]=Q.useState("public"),i=Q.useMemo((()=>{const e={bg:"light"===n?"bg-white":"bg-gray-900",textPrimary:"light"===n?"text-gray-900":"text-white",textSecondary:"light"===n?"text-gray-600":"text-gray-300",textHighlight:"light"===n?"text-blue-600":"text-blue-400",border:"light"===n?"border-gray-200":"border-gray-700",cardBg:"light"===n?"bg-white":"bg-gray-800",shadow:"shadow-lg",buttonBg:"light"===n?"bg-blue-600 text-white hover:bg-blue-700":"bg-blue-500 text-white hover:bg-blue-600",buttonAlt:"light"===n?"bg-gray-200 text-gray-800 hover:bg-gray-300":"bg-gray-700 text-white hover:bg-gray-600",cosmicBg:"navy"===n?"bg-[#002147]":"bg-[#2D0922]",cosmicGlow:"navy"===n?"from-blue-900/20 to-blue-900/10":"from-purple-900/20 to-purple-900/10",buttonGradient:"navy"===n?"from-blue-600 to-blue-700":"from-purple-600 to-purple-700"},t={...e,navBg:"bg-transparent",navText:"text-white",navTextHover:"navy"===n?"hover:text-blue-400":"hover:text-purple-400",navBrand:{primary:"text-white",secondary:"navy"===n?"text-[#528eb2]":"text-purple-400"}},r={...e,navBg:"light"===n?"bg-white":"bg-gray-900",navText:"light"===n?"text-gray-900":"text-white",navTextHover:"light"===n?"hover:text-blue-600":"hover:text-blue-400",navBrand:{primary:"light"===n?"text-gray-900":"text-white",secondary:"light"===n?"text-blue-600":"text-blue-400"}};return"public"===s?t:r}),[n,s]),o={colorMode:n,themeMode:s,currentTheme:i,toggleColorMode:()=>r((e=>"navy"===e?"purple":"navy")),setThemeMode:a};return e.jsx(AR.Provider,{value:o,children:t})}function DR(){const e=Q.useContext(AR);if(void 0===e)throw new Error("useTheme must be used within a ThemeProvider");return e}const IR=()=>{const{colorMode:t,toggleColorMode:n,currentTheme:r}=DR(),s=te(),a="/login"===s.pathname,i="/register"===s.pathname;return e.jsx("nav",{className:"fixed top-0 left-0 w-full z-40 transition-all duration-300",children:e.jsxs("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[e.jsx("div",{className:"flex items-center",children:e.jsx(Z,{to:"/",className:"flex items-center",children:e.jsxs(jl.div,{className:"text-2xl font-bold text-white",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},children:["Big",e.jsx("span",{className:"text-[#528eb2]",children:"Project"})]})})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(jl.button,{className:"relative w-10 h-10 rounded-full overflow-hidden",whileHover:{scale:1.1},whileTap:{scale:.9},onClick:n,children:e.jsx("div",{className:`absolute inset-0 ${"navy"===t?"bg-gradient-to-br from-[#0a3c6e] to-[#001a38]":"bg-gradient-to-br from-gray-800 to-black"} rounded-full flex items-center justify-center shadow-lg ${r.shadow}`,children:e.jsx(ze,{mode:"wait",children:"navy"===t?e.jsx(jl.div,{initial:{rotate:-45,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:45,opacity:0},transition:{duration:.3},className:"w-full h-full flex items-center justify-center",children:e.jsx(wc,{className:"w-7 h-7 text-blue-200"})},"moon"):e.jsx(jl.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:1.5,opacity:0},transition:{duration:.3},className:"w-full h-full flex items-center justify-center",children:e.jsx(Ac,{className:"w-7 h-7 text-yellow-300"})},"sun")})})}),!a&&e.jsx(Z,{to:"/login",children:e.jsx(jl.button,{className:`py-2 px-6 ${r.navButtonBg} text-white rounded-full font-medium hover:bg-opacity-90 transition-colors shadow-lg ${r.shadow}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Connexion"})}),!i&&e.jsx(Z,{to:"/register",children:e.jsx(jl.button,{className:`py-2 px-6 bg-transparent border ${r.navButtonBorder} ${r.textPrimary} rounded-full font-medium hover:bg-opacity-10 hover:bg-white hover:text-white transition-colors shadow-lg ${r.shadow}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Inscription"})})]})]})})},PR=({colorMode:t="navy",animationMode:n="cosmic",shootingStarDirection:r="diagonal"})=>{const s=Q.useRef(null);return Q.useEffect((()=>{if("cosmic"!==n)return;const e=s.current;if(!e)return;const a=e.getContext("2d");e.width=window.innerWidth,e.height=window.innerHeight;const i="navy"===t?{nebula1:"#0a3c6e",nebula2:"#001a38",nebula3:"#002147",nebula4:"#003366",star:"#e6f0ff",dust:"#0a3c6e"}:{nebula1:"#4B0082",nebula2:"#2D0922",nebula3:"#190033",nebula4:"#330033",star:"#ffffff",dust:"#4B0082"},o=[];for(let t=0;t<200;t++)o.push({x:Math.random()*e.width,y:Math.random()*e.height,radius:1.5*Math.random(),opacity:Math.random(),speed:.05*Math.random()});const l=[],c=[],u=[],d=(e,t,n)=>{c.push({x:e,y:t,vx:-Math.cos(n)*(.5+Math.random()),vy:-Math.sin(n)*(.5+Math.random()),alpha:.8+.2*Math.random(),radius:.6+.7*Math.random(),life:12+Math.floor(8*Math.random())})},h=(e,t,n,r)=>{const s=e,a=t,i=e-12*Math.cos(n),o=t-12*Math.sin(n);u.push({startX:s,startY:a,endX:i,endY:o,alpha:.5,width:2.2,life:25+Math.floor(15*Math.random()),startColor:"rgba(200,220,255,",endColor:"rgba(100,150,255,"})},f=[];for(let t=0;t<5;t++)f.push({x:Math.random()*e.width,y:Math.random()*e.height,radius:100+200*Math.random(),color:[i.nebula1,i.nebula2,i.nebula3,i.nebula4][Math.floor(4*Math.random())],opacity:.05+.1*Math.random()});const m=[];for(let t=0;t<100;t++)m.push({x:Math.random()*e.width,y:Math.random()*e.height,radius:1*Math.random(),color:i.dust,opacity:.1+.2*Math.random(),speed:.2*Math.random()});let p,g=null,y=0,v=!1,b=0,x=.1,w=null,E=0,k=!1,S=0,N=.1;if("horizontal"===r){(()=>{g={x:-8,y:e.height*(.4+.2*Math.random()),radius:1.1+.8*Math.random(),color:"rgba(180,220,255,1)"},v=!0,x=.08+.07*Math.random(),b=2e3+4e3*Math.random()})();setTimeout((()=>{w={x:e.width+8,y:e.height*(.4+.2*Math.random()),radius:1.1+.8*Math.random(),color:"rgba(180,220,255,1)"},k=!0,N=.08+.07*Math.random(),S=3e3+5e3*Math.random()}),1200+2e3*Math.random())}const T=()=>{if(a.clearRect(0,0,e.width,e.height),"horizontal"===r){const t=.21*e.height,n=.6*t,r=Date.now()/2200,s=Math.sin(r)*e.width*.08,i=a.createLinearGradient(s,n,e.width+s,n+t);i.addColorStop(0,"rgba(60,180,255,0.17)"),i.addColorStop(.3,"rgba(80,255,180,0.23)"),i.addColorStop(.6,"rgba(180,120,255,0.19)"),i.addColorStop(1,"rgba(60,180,255,0.13)"),a.save(),a.globalAlpha=1,a.filter="blur(28px)",a.fillStyle=i,a.fillRect(0,0,e.width,1.5*t),a.filter="none",a.globalAlpha=1,a.restore()}if(f.forEach((e=>{a.beginPath();const t=a.createRadialGradient(e.x,e.y,0,e.x,e.y,e.radius);t.addColorStop(0,`${e.color}${Math.round(255*e.opacity).toString(16).padStart(2,"0")}`),t.addColorStop(1,"transparent"),a.fillStyle=t,a.arc(e.x,e.y,e.radius,0,2*Math.PI),a.fill()})),o.forEach((t=>{t.y-=t.speed,t.y<0&&(t.y=e.height,t.x=Math.random()*e.width),a.beginPath(),a.arc(t.x,t.y,t.radius,0,2*Math.PI),a.fillStyle=`${i.star}${Math.round(255*t.opacity).toString(16).padStart(2,"0")}`,a.fill()})),"horizontal"===r&&g)if(v){g.x+=x;const t=Date.now(),n=.65+.35*Math.abs(Math.sin(t/400));a.save(),a.beginPath(),a.arc(g.x,g.y,g.radius,0,2*Math.PI),a.shadowColor="#bcdfff",a.shadowBlur=12,a.globalAlpha=n,a.fillStyle=g.color,a.fill(),a.globalAlpha=1,a.shadowBlur=0,a.restore(),g.x-g.radius>e.width+8&&(v=!1,y=0)}else y+=16,y>b&&(g.x=-8,g.y=e.height*(.4+.2*Math.random()),g.radius=1.1+.8*Math.random(),v=!0,x=.08+.07*Math.random(),b=2e3+4e3*Math.random());if("horizontal"===r&&w)if(k){w.x-=N;const e=Date.now()+1e3,t=.65+.35*Math.abs(Math.sin(e/400));a.save(),a.beginPath(),a.arc(w.x,w.y,w.radius,0,2*Math.PI),a.shadowColor="#bcdfff",a.shadowBlur=12,a.globalAlpha=t,a.fillStyle=w.color,a.fill(),a.globalAlpha=1,a.shadowBlur=0,a.restore(),w.x+w.radius<-8&&(k=!1,E=0)}else E+=16,E>S&&(w.x=e.width+8,w.y=e.height*(.6+.2*Math.random()),w.radius=1.1+.8*Math.random(),k=!0,N=.08+.07*Math.random(),S=3e3+5e3*Math.random());(()=>{if(l.length<3&&Math.random()<.01){const t=1+.5*Math.random(),n=0+14*Math.random();let s,a,i;"horizontal"===r?(s=0,a=0,i=Math.random()*(.7*e.height)):(s=Math.PI/4+Math.random()*Math.PI/4,a=Math.random()*e.width,i=0);const o="horizontal"===r?e.width:Math.sqrt(e.width*e.width+e.height*e.height),c=Math.random()<.2?(.3+.5*Math.random())*o:1.2*o,u=c*(.9+.15*Math.random());l.push({x:a,y:i,length:80+70*Math.random(),speed:5+7*Math.random(),angle:s,headRadius:t,headBlur:n,vibratePhase:Math.random()*Math.PI*2,distanceTraveled:0,lifespan:c,fadeOutPoint:u,trailSegments:[],headLifespan:.85*c,headVisible:!0})}})();for(let t=l.length-1;t>=0;t--){const n=l[t],r=n.angle+.03*Math.sin(n.vibratePhase+Date.now()/200);n.headVisible&&n.distanceTraveled>=n.headLifespan&&(n.headVisible=!1);let s=1;if(n.distanceTraveled>n.fadeOutPoint&&(s=Math.max(0,1-(n.distanceTraveled-n.fadeOutPoint)/(n.lifespan-n.fadeOutPoint))),n.trailSegments.length<50||n.trailSegments.shift(),n.trailSegments.push({x:n.x,y:n.y,opacity:s}),Math.random()<.3&&h(n.x,n.y,n.angle,n.speed),n.headVisible){const e=n.x+Math.cos(r)*n.speed*3,t=n.y+Math.sin(r)*n.speed*3;let s=1;if(n.distanceTraveled>n.fadeOutPoint){const e=(n.distanceTraveled-n.fadeOutPoint)/(n.headLifespan-n.fadeOutPoint);s=Math.max(0,1-e)}a.save(),a.save(),a.translate(e,t),a.rotate(r),a.scale(2.2,1),a.beginPath(),a.arc(0,0,n.headRadius,0,2*Math.PI),a.fillStyle=`rgba(230,240,255,${s})`,a.shadowColor=`rgba(230,240,255,${s})`,a.shadowBlur=n.headBlur*s,a.globalAlpha=.93*s,a.fill(),a.globalAlpha=1,a.shadowBlur=0,a.restore(),Math.random()<.9*s&&d(e-2*Math.cos(r),t-2*Math.sin(r),r)}n.x+=Math.cos(n.angle)*n.speed,n.y+=Math.sin(n.angle)*n.speed,n.distanceTraveled+=n.speed,(n.x>e.width||n.y>e.height||n.distanceTraveled>=n.lifespan||s<=.05)&&l.splice(t,1)}for(let e=c.length-1;e>=0;e--){const t=c[e];a.save(),a.beginPath(),a.arc(t.x,t.y,t.radius,0,2*Math.PI),a.fillStyle=`rgba(200,220,255,${t.alpha})`,a.shadowColor="#e6f0ff",a.shadowBlur=6,a.fill(),a.restore(),t.x+=t.vx,t.y+=t.vy,t.alpha*=.88,t.radius*=.97,t.life--,(t.life<=0||t.alpha<.05)&&c.splice(e,1)}for(let e=u.length-1;e>=0;e--){const t=u[e];a.save(),a.beginPath(),a.moveTo(t.startX,t.startY),a.lineTo(t.endX,t.endY);const n=a.createLinearGradient(t.startX,t.startY,t.endX,t.endY);n.addColorStop(0,`${t.startColor}${t.alpha})`),n.addColorStop(1,`${t.endColor}${.6*t.alpha})`),a.strokeStyle=n,a.lineWidth=t.width,a.shadowColor="#bcdfff",a.shadowBlur=5,a.stroke(),a.restore(),t.alpha*=.96,t.life--,(t.life<=0||t.alpha<.05)&&u.splice(e,1)}m.forEach((t=>{t.y+=t.speed,t.y>e.height&&(t.y=0,t.x=Math.random()*e.width),a.beginPath(),a.arc(t.x,t.y,t.radius,0,2*Math.PI),a.fillStyle=`${t.color}${Math.round(255*t.opacity).toString(16).padStart(2,"0")}`,a.fill()})),p=window.requestAnimationFrame(T)};T();const C=()=>{e.width=window.innerWidth,e.height=window.innerHeight};return window.addEventListener("resize",C),()=>{window.removeEventListener("resize",C),window.cancelAnimationFrame(p)}}),[t,n]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-0 "+("navy"===t?"bg-[#002147]":"bg-black")}),e.jsx("div",{className:"absolute inset-0 bg-[url('/images/stars-bg.png')] opacity-40"}),e.jsx("canvas",{ref:s,className:`absolute inset-0 ${"cosmic"===n?"opacity-100":"opacity-0"} transition-opacity duration-1000`}),e.jsx("div",{className:"absolute top-0 left-1/4 w-1/2 h-1/3 rounded-full blur-3xl "+("navy"===t?"bg-blue-900/20":"bg-purple-900/20")}),e.jsx("div",{className:"absolute bottom-0 right-1/4 w-1/2 h-1/3 rounded-full blur-3xl "+("navy"===t?"bg-blue-900/10":"bg-purple-900/10")})]})},MR=()=>{const{colorMode:t,currentTheme:n}=DR();return e.jsxs("div",{className:`min-h-screen relative ${n.bg}`,children:[e.jsx("div",{className:"fixed inset-0 z-0",children:e.jsx(PR,{colorMode:t})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx(IR,{}),e.jsx("main",{children:e.jsx(re,{})})]})]})},LR=()=>{te();const[t,n]=Q.useState(!0),[r,s]=Q.useState(!1),a=Q.useRef(!1),i=Q.useRef(!1),o=sp();if(Q.useEffect((()=>{const e=async()=>{if(i.current)return;i.current=!0;const e=nf.isLoggedIn();e!==a.current&&(a.current=e,s(e)),n(!1),i.current=!1};e();const t=()=>{setTimeout(e,50)};return window.addEventListener("login-success",t),window.addEventListener("logout-success",t),()=>{window.removeEventListener("login-success",t),window.removeEventListener("logout-success",t)}}),[]),t)return null;if(r){const t=o.getRoleDashboardPath();return e.jsx(ne,{to:t,replace:!0})}return e.jsx(re,{})},OR=Q.createContext({isLayoutLoading:!1,setLayoutLoading:()=>{},currentSection:null,isSidebarLoaded:!1,setSidebarLoaded:()=>{},visitedSections:new Set}),UR=({children:t})=>{const[n,r]=Q.useState(!1),[s,a]=Q.useState(!1),i=te(),[o,l]=Q.useState(null),[c,u]=Q.useState(new Set),d=Q.useRef(null),h=Q.useRef(""),{data:f,isLoading:m,isSuccess:p}=de({queryKey:["currentUser"],queryFn:()=>{const e=Xh.getCachedUserData(),t=Date.now(),n=e?Date.now()-6e4:0;return e&&t-n<3e4?Promise.resolve(e):nf.getCurrentUser(!1,{requestSource:"profileLayout",preventRecursion:!0})},staleTime:3e5,cacheTime:18e5,enabled:nf.isLoggedIn(),refetchOnWindowFocus:!1,retry:1});return Q.useEffect((()=>{if(p&&f){const e=setTimeout((()=>{a(!0)}),300);return()=>clearTimeout(e)}}),[p,f]),Q.useEffect((()=>{const e=i.pathname;let t=null;e.includes("/settings/profile")?t="profile":e.includes("/settings/security")?t="security":e.includes("/settings/notifications")?t="notifications":e.includes("/settings/documents")?t="documents":e.includes("/settings/career")&&(t="career"),l(t),d.current&&(clearTimeout(d.current),d.current=null);const n=e.startsWith("/settings/"),s=h.current.startsWith("/settings/");return t&&!c.has(t)||!s&&n?(r(!0),t&&u((e=>{const n=new Set(e);return n.add(t),n})),d.current=setTimeout((()=>{r(!1)}),600)):r(!1),h.current=e,()=>{d.current&&clearTimeout(d.current)}}),[i.pathname,c]),e.jsx(OR.Provider,{value:{isLayoutLoading:n,setLayoutLoading:r,currentSection:o,isSidebarLoaded:s,setSidebarLoaded:a,isUserDataLoading:m,visitedSections:c},children:t})},FR=()=>{const e=Q.useContext(OR);if(!e)throw new Error("useProfileLayout must be used within a ProfileLayoutProvider");return e},zR=Q.memo((({item:t,isActive:n,onClick:r})=>e.jsxs("button",{onClick:r,className:`w-full flex items-center justify-between px-3 py-2 rounded-md transition-colors\n      ${n?"bg-primary text-primary-foreground no":"hover:bg-muted text-muted-foregrfound hover:text-foreground"}\n      focus:outline-none focus-visible:outline-none`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(t.icon,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:t.title})]}),t.badge&&e.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 text-xs font-bold text-white bg-red-600 rounded-full",children:t.badge})]})));zR.displayName="NavButton";const VR=(e,t)=>{if(!e||!Array.isArray(e))return!1;const n=t.replace(/^ROLE_/,""),r=`ROLE_${n}`;return e.some((e=>{const s="object"==typeof e&&e?.name?e.name:e;return s===t||s===n||s===r}))},BR=Q.memo((({onNavigate:t})=>{const n=Y(),r=te(),{setSidebarLoaded:s}=FR(),{user:a,isLoading:i}=lp(),[o,l]=Q.useState(null),c=Q.useMemo((()=>!(!a||!a.roles)&&VR(a.roles,"ROLE_STUDENT")),[a]),u=Q.useMemo((()=>!(!a||!a.roles)&&VR(a.roles,"ROLE_GUEST")),[a]);Q.useEffect((()=>{if(a&&a.roles){const e={roles:a.roles,isStudent:c,isGuest:u,shouldShowCareer:c||u};l(e)}}),[a,c,u]),Q.useEffect((()=>{!i&&a&&s&&s(!0)}),[i,a,s]);const d=Q.useCallback((e=>{n(e),t?.()}),[n,t]),h=Q.useMemo((()=>{const e=[{title:"Mon compte",type:"header"},{title:"Modifier profil",icon:Pc,href:"/settings/profile"}];return(c||u)&&e.push({title:"Carrière",icon:zl,href:"/settings/career"}),e.push({title:"Sécurité",icon:pc,href:"/settings/security"},{title:"Notifications",icon:Ul,href:"/settings/notifications"}),e}),[c,u]);return Q.useCallback((async()=>{try{await nf.logout(),window.queryClient?.invalidateQueries("currentUser"),n("/login")}catch(e){console.error("Error during logout:",e),n("/login")}}),[n]),e.jsx("div",{className:"space-y-4 bg-transparent dark:bg-transparent sidebar-profile",children:e.jsx("nav",{className:"space-y-1 bg-transparent dark:bg-transparent",children:h.map((t=>{if("header"===t.type)return e.jsx("h2",{className:"px-3 text-lg font-semibold text-foreground",children:t.title},t.title);const n=r.pathname===t.href;return e.jsx(zR,{item:t,isActive:n,onClick:()=>d(t.href)},t.href)}))})})}));BR.displayName="SidebarProfile";const qR=Q.memo((()=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"px-3 mb-4 text-lg font-semibold text-foreground",children:e.jsx(Zp,{className:"h-6 w-36"})}),e.jsx("nav",{className:"space-y-1",children:[{active:!0,badge:!1},{active:!1,badge:!1},{active:!1,badge:!1},{active:!1,badge:!1}].map(((t,n)=>e.jsxs("div",{className:`w-full flex items-center justify-between px-3 py-2 rounded-md ${t.active?"bg-primary/10":"hover:bg-muted"} transition-colors`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Zp,{className:"w-5 h-5 rounded-full"}),e.jsx(Zp,{className:"h-5 w-24"})]}),t.badge&&e.jsx(Zp,{className:"w-5 h-5 rounded-full bg-red-200"})]},n)))})]})));qR.displayName="SidebarSkeleton";const $R=()=>{const[t,n]=Q.useState(!1),r=te(),s=Y(),{isLayoutLoading:a,currentSection:i,isSidebarLoaded:o,isUserDataLoading:l,visitedSections:c}=FR();i&&c.has(i);const u=l||!o;return Q.useEffect((()=>{n(!1)}),[r.pathname]),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"lg:hidden mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Fm,{variant:"ghost",size:"icon",onClick:()=>s(-1),className:"mr-2",children:e.jsx(Kl,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-xl font-semibold",children:"Paramètres du profil"})]}),e.jsxs(Ip,{open:t,onOpenChange:n,children:[e.jsx(Pp,{asChild:!0,children:e.jsxs(Fm,{variant:"outline",size:"sm",className:"flex items-center gap-2 rounded-full px-3 py-1 border-[#528eb2]/50 text-[#02284f]",children:[e.jsx("span",{className:"text-sm",children:"Navigation"}),e.jsx(Ql,{className:"h-4 w-4"})]})}),e.jsxs(Up,{side:"right",className:"w-[280px] sm:w-[340px]",children:[e.jsxs(Fp,{className:"text-lg font-bold mb-4 flex items-center",children:[e.jsx(Cc,{className:"mr-2 h-5 w-5 text-[#528eb2]"}),"Paramètres"]}),e.jsx("div",{className:"py-4 bg-transparent dark:bg-transparent",children:e.jsx(ze,{mode:"wait",children:u?e.jsx(jl.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:e.jsx(qR,{})},"skeleton"):e.jsx(jl.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"bg-transparent dark:bg-transparent",children:e.jsx(BR,{onNavigate:()=>n(!1)})},"sidebar")})})]})]})]}),e.jsx("div",{className:"mt-2 pb-2 border-b border-gray-200",children:e.jsx("p",{className:"text-sm text-gray-500",children:i?`Section: ${i}`:"Chargement..."})})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("div",{className:"hidden lg:block w-[280px] flex-shrink-0 bg-transparent dark:bg-transparent",children:e.jsx(ze,{mode:"wait",children:u?e.jsx(jl.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:e.jsx(qR,{})},"skeleton"):e.jsx(jl.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"bg-transparent dark:bg-transparent",children:e.jsx(BR,{})},"sidebar")})}),e.jsx("div",{className:"flex-1 bg-white shadow-sm rounded-lg p-4 sm:p-6 min-h-[calc(100vh-8rem)]",children:a&&i?e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 w-48 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-4 w-full bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-4 w-3/4 bg-gray-200 rounded mb-4"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"h-12 bg-gray-200 rounded"}),e.jsx("div",{className:"h-12 bg-gray-200 rounded"})]})]}):e.jsx(re,{})})]})]})},HR=()=>e.jsx(UR,{children:e.jsx($R,{})}),WR=()=>e.jsx(re,{});var GR=(e,t,n,r,s,a,i,o)=>{let l=document.documentElement,c=["light","dark"];function u(t){(Array.isArray(e)?e:[e]).forEach((e=>{let n="class"===e,r=n&&a?s.map((e=>a[e]||e)):s;n?(l.classList.remove(...r),l.classList.add(a&&a[t]?a[t]:t)):l.setAttribute(e,t)})),function(e){o&&c.includes(e)&&(l.style.colorScheme=e)}(t)}if(r)u(r);else try{let e=localStorage.getItem(t)||n;u(i&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e)}catch(d){}},KR=Q.createContext(void 0),QR={setTheme:e=>{},themes:[]};Q.memo((({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:a,value:i,themes:o,nonce:l,scriptProps:c})=>{let u=JSON.stringify([n,t,a,e,o,i,r,s]).slice(1,-1);return Q.createElement("script",{...c,suppressHydrationWarning:!0,nonce:"undefined"==typeof window?l:"",dangerouslySetInnerHTML:{__html:`(${GR.toString()})(${u})`}})}));const XR=({...t})=>{const{theme:n="system"}=null!=(r=Q.useContext(KR))?r:QR;var r;return e.jsx($h,{theme:n,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})},JR={Ouvert:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300","En cours":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300","Résolu":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300","Fermé":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300","En attente":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"},YR={Low:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",Normal:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",High:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"};function ZR({tickets:t,statuses:n,services:r,toggleTicketSelection:s,selectedTickets:a}){if(!t||0===t.length)return e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8 text-center",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Aucun ticket trouvé"})});const i=e=>{const t=r.find((t=>t.id===e));return t?t.name:"N/A"};return e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:e.jsx("input",{type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"ID"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Titre"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Créé par"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Service"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Statut"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Priorité"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Date de création"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700",children:t.map((t=>{const r=(e=>{const t=n.find((t=>t.id===e));return t?t.name:"Inconnu"})(t.status_id),o=t.priority||"Normal";return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("input",{type:"checkbox",checked:a?.includes(t.id),onChange:()=>s&&s(t.id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",onClick:e=>e.stopPropagation()})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["#",t.id]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:e.jsx(Z,{to:`/tickets/${t.id}`,children:t.title})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:t.first_name&&t.last_name?`${t.first_name} ${t.last_name}`:"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:t.service_id?i(t.service_id):"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${JR[r]}`,children:r})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${YR[o]}`,children:o})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(t.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx(Z,{to:`/tickets/${t.id}`,className:"text-blue-600 hover:text-blue-900 mr-4",children:"Voir"})})]},t.id)}))})]})})})}function ej(){const t=te(),[n,r]=Q.useState([]),[s,a]=Q.useState([]),[i,o]=Q.useState([]),[l,c]=Q.useState([]),[u,d]=Q.useState(!0),[h,f]=Q.useState(null),[m,p]=Q.useState(""),[g,y]=Q.useState(""),[v,b]=Q.useState(""),[x,w]=Q.useState([]),[E,k]=Q.useState([]),[S,N]=Q.useState(""),[T,C]=Q.useState(!1);Q.useEffect((()=>{(async()=>{try{const i=localStorage.getItem("token");if(!i)return f("Authentication required"),void d(!1);try{const e=i.split(".");if(3===e.length){JSON.parse(atob(e[1]))}}catch(e){}try{const e=await oh.get("/tickets/raw-data");e.data.success&&e.data.rawTickets&&a(e.data.rawTickets)}catch(t){try{const e=await oh.get("/tickets");if(e.data.success&&e.data.tickets){const t=e.data.tickets.map((e=>({id:e.id,title:e.title,description:e.description,status_id:e.status?.id,status_name:e.status?.name,priority:e.priority,creator_id:e.creator?.id,first_name:e.creator?.firstName,last_name:e.creator?.lastName,service_id:e.service?.id,created_at:e.createdAt,updated_at:e.updatedAt})));a(t)}else Lh.error("Impossible de récupérer les tickets")}catch(n){Lh.error("Erreur lors de la récupération des tickets")}}try{const e=await oh.get("/tickets/status");e.data&&e.data.statuses&&w(e.data.statuses)}catch(r){Lh.error(`Error fetching statuses: ${r.response?.data?.message||r.message}`)}try{const e=await oh.get("/ticket-services");k(e.data)}catch(s){Lh.error(`Error fetching services: ${s.response?.data?.message||s.message}`)}d(!1)}catch(i){f("Failed to load data. Please try again later."),Lh.error("Failed to load data"),d(!1)}})()}),[t.pathname]);const R=s.filter((e=>(!m||e.status_id===parseInt(m))&&((!g||e.priority===g)&&!(v&&(!e.service_id||e.service_id!==parseInt(v)))))),j=()=>{p(""),y(""),b("")};return u?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):h?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:e.jsx("p",{children:h})})}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4 md:mb-0",children:"Gestion des tickets"}),e.jsx(Z,{to:"/tickets/new",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Créer un nouveau ticket"})]}),l.length>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:["Actions groupées (",l.length," tickets sélectionnés)"]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Mise à jour du statut"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("select",{value:S,onChange:e=>N(e.target.value),className:"flex-grow p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"",children:"Sélectionner un statut"}),x.map((t=>e.jsx("option",{value:t.name,children:t.name},t.id)))]}),e.jsx("button",{onClick:async()=>{if(S&&0!==l.length){C(!0);try{const e=x.find((e=>e.name===S));if(!e)return void Lh.error("Invalid status selected");const t=l.length>0?l:[199,200,201,202,203],n=await oh.post("/tickets/custom-bulk-update",{ticketIds:t,statusId:e.id});if(n.data.success){Lh.success(`Successfully updated ${n.data.updatedCount} tickets`),n.data.errors&&n.data.errors.length>0&&Lh.warning(`Some tickets could not be updated: ${n.data.errors.join(", ")}`),c([]),N("");const e=await oh.get("/tickets/raw-data");e.data.success&&e.data.rawTickets&&a(e.data.rawTickets)}else Lh.error(n.data.message||"Failed to update tickets")}catch(e){Lh.error(e.response?.data?.message||"Failed to update tickets")}finally{C(!1)}}else Lh.error("Please select tickets and a status")},disabled:!S||T,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:T?"Traitement...":"Appliquer"})]})]})}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:()=>c([]),className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600",children:"Désélectionner tout"})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Filtrer les tickets"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Statut"}),e.jsxs("select",{value:m,onChange:e=>p(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"",children:"Tous les statuts"}),x.map((t=>e.jsx("option",{value:t.id,children:t.name},t.id)))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Priorité"}),e.jsxs("select",{value:g,onChange:e=>y(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"",children:"Toutes les priorités"}),e.jsx("option",{value:"Low",children:"Basse"}),e.jsx("option",{value:"Normal",children:"Normale"}),e.jsx("option",{value:"High",children:"Haute"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Service"}),e.jsxs("select",{value:v,onChange:e=>b(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"",children:"Tous les services"}),E.map((t=>e.jsx("option",{value:t.id,children:t.name},t.id)))]})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:j,className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600",children:"Effacer les filtres"})})]}),0===R.length?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8 text-center",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Aucun ticket ne correspond à vos critères"}),(m||g||v)&&e.jsx("button",{onClick:j,className:"mt-4 px-4 py-2 text-sm text-blue-700 bg-blue-100 rounded-md hover:bg-blue-200 dark:bg-blue-900 dark:text-blue-300 dark:hover:bg-blue-800",children:"Effacer les filtres"})]}):e.jsx(ZR,{tickets:R,statuses:x,services:E,toggleTicketSelection:e=>{c((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))},selectedTickets:l}),e.jsxs("div",{className:"mt-8 p-4 bg-gray-100 dark:bg-gray-800 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Information de débogage"}),e.jsxs("p",{children:["Total tickets from database: ",s.length]}),e.jsxs("p",{children:["Filtered tickets: ",R.length]})]})]})}const tj="/api/student/profile",nj="/api/student/profile/job-seeking-status",rj="/api/student/profile/toggle-internship-seeking",sj="/api/student/profile/toggle-apprenticeship-seeking",aj="/api/student/profile/portfolio-url",ij=e=>e?void 0!==e.success&&void 0!==e.data?e:"object"==typeof e&&null!==e?void 0!==e.data?{success:!0,data:e.data}:{success:!0,data:e}:{success:!1,data:e}:null;let oj=null,lj=0;const cj={clearCache:()=>{oj=null,lj=0},getMyProfile:async(e=!1)=>{try{const t=e||(window.performance&&window.performance.navigation?1===window.performance.navigation.type:window.performance&&window.performance.getEntriesByType&&"reload"===window.performance.getEntriesByType("navigation")[0]?.type),n=Date.now();if(!t&&oj&&n-lj<5e3)return oj;const r=await Sh.get(tj),s=ij(r);return oj=s,lj=n,s}catch(t){throw t}},updateJobSeekingStatus:async e=>{try{const t={};if(e&&"object"==typeof e&&("boolean"==typeof e.isSeekingInternship&&(t.isSeekingInternship=e.isSeekingInternship),"boolean"==typeof e.isSeekingApprenticeship&&(t.isSeekingApprenticeship=e.isSeekingApprenticeship)),0===Object.keys(t).length)throw new Error("Invalid status data: at least one valid status property is required");const n=await Sh.put(nj,t),r=ij(n);return r.success&&r.data?(oj&&(oj={...oj,data:{...oj.data,...r.data}},lj=Date.now()),window.dispatchEvent(new CustomEvent("job-status-updated",{detail:{type:"both",data:r.data,isSeekingInternship:t.isSeekingInternship,isSeekingApprenticeship:t.isSeekingApprenticeship}}))):cj.clearCache(),r}catch(t){throw cj.clearCache(),t}},toggleInternshipSeeking:async e=>{try{if("boolean"==typeof e){const t=await cj.updateJobSeekingStatus({isSeekingInternship:e});return window.dispatchEvent(new CustomEvent("job-status-updated",{detail:{type:"internship",status:e}})),t}const t=await Sh.put(rj),n=ij(t);let r=!1;return n.success&&n.data&&(void 0!==n.data.isSeekingInternship?r=n.data.isSeekingInternship:n.data.profile&&void 0!==n.data.profile.isSeekingInternship&&(r=n.data.profile.isSeekingInternship)),oj&&oj.data&&(void 0!==oj.data.isSeekingInternship&&(oj.data.isSeekingInternship=r),lj=Date.now()),window.dispatchEvent(new CustomEvent("job-status-updated",{detail:{type:"internship",status:r}})),n}catch(t){throw cj.clearCache(),t}},toggleApprenticeshipSeeking:async e=>{try{if("boolean"==typeof e){const t=await cj.updateJobSeekingStatus({isSeekingApprenticeship:e});return window.dispatchEvent(new CustomEvent("job-status-updated",{detail:{type:"apprenticeship",status:e}})),t}const t=await Sh.put(sj),n=ij(t);let r=!1;return n.success&&n.data&&(void 0!==n.data.isSeekingApprenticeship?r=n.data.isSeekingApprenticeship:n.data.profile&&void 0!==n.data.profile.isSeekingApprenticeship&&(r=n.data.profile.isSeekingApprenticeship)),oj&&oj.data&&(void 0!==oj.data.isSeekingApprenticeship&&(oj.data.isSeekingApprenticeship=r),lj=Date.now()),window.dispatchEvent(new CustomEvent("job-status-updated",{detail:{type:"apprenticeship",status:r}})),n}catch(t){throw cj.clearCache(),t}},updatePortfolioUrl:async e=>{try{if(e&&!e.startsWith("https://"))throw new Error("L'URL du portfolio doit commencer par https://");const n=await Sh.put(aj,{portfolioUrl:e}),r=ij(n);cj.clearCache();try{const t=localStorage.getItem("user");if(t){const n=JSON.parse(t);n.studentProfile&&(n.studentProfile.portfolioUrl=e,localStorage.setItem("user",JSON.stringify(n)))}}catch(t){}return hj(e),r}catch(n){throw cj.clearCache(),n}}},uj=(e,t=null)=>{if(t)return t;if(!e||""===e.trim())return null;if(e.startsWith("http"))return e;const n="https://bigproject-production.konstantine.fr/api".replace(/\/api$/,"");if(!e.includes("/")&&!e.includes("\\")){return[`${n}/uploads/documents/${e}`,`${n}/uploads/profile-pictures/${e}`,`${n}/uploads/${e}`][0]}if(e.includes("/var/www/")||e.includes("C:\\")||e.includes("/public/uploads/")){let t;if(e.includes("/public/uploads/"))t=e.split("/public/")[1];else if(e.includes("/var/www/")){t=e.split("/var/www/")[1].split("/").slice(1).join("/")}else{const n=e.split("\\"),r=n.findIndex((e=>"uploads"===e));t=-1!==r?"uploads/"+n.slice(r+1).join("/"):"uploads/"+n[n.length-1]}return`${n}/${t}`}const r=e.startsWith("/")?e:`/${e}`;return r.includes("uploads")?`${n}${r}`:`${n}/uploads${r}`},dj=e=>{if(!e)return"";const t=e.firstName||"",n=e.lastName||"";return`${t.charAt(0)}${n.charAt(0)}`},hj=e=>{const t=new CustomEvent("portfolio-updated",{detail:{portfolioUrl:e}});window.dispatchEvent(t);const n=new CustomEvent("profile-updated",{detail:{type:"portfolio",portfolioUrl:e}});window.dispatchEvent(n);try{const t=localStorage.getItem("user");if(t){const n=JSON.parse(t);if(n&&"object"==typeof n){if(n.studentProfile)n.studentProfile.portfolioUrl=e;else if(!n.studentProfile&&n.roles){Array.isArray(n.roles)&&n.roles.some((e=>"string"==typeof e&&e.includes("STUDENT")||"object"==typeof e&&e.name&&e.name.includes("STUDENT")))&&(n.studentProfile={portfolioUrl:e})}localStorage.setItem("user",JSON.stringify(n))}}const n=sessionStorage.getItem("user");if(n){const t=JSON.parse(n);if(t&&"object"==typeof t){if(t.studentProfile)t.studentProfile.portfolioUrl=e;else if(!t.studentProfile&&t.roles){Array.isArray(t.roles)&&t.roles.some((e=>"string"==typeof e&&e.includes("STUDENT")||"object"==typeof e&&e.name&&e.name.includes("STUDENT")))&&(t.studentProfile={portfolioUrl:e})}sessionStorage.setItem("user",JSON.stringify(t))}}}catch(r){}cj.clearCache()},fj={ROLE_SUPERADMIN:"Super Administrateur",ROLE_SUPER_ADMIN:"Super Administrateur",ROLE_ADMIN:"Administrateur",ROLE_HR:"Ressources Humaines",ROLE_TEACHER:"Formateur",ROLE_STUDENT:"Étudiant",ROLE_RECRUITER:"Recruteur",ROLE_GUEST:"Invité",ROLE_USER:"Utilisateur",SUPERADMIN:"Super Administrateur",SUPER_ADMIN:"Super Administrateur",ADMIN:"Administrateur",HR:"Ressources Humaines",TEACHER:"Formateur",STUDENT:"Étudiant",RECRUITER:"Recruteur",GUEST:"Invité",USER:"Utilisateur"},mj={ROLE_SUPERADMIN:"bg-gradient-to-r from-red-500/90 to-red-700/90 text-white",ROLE_SUPER_ADMIN:"bg-gradient-to-r from-red-500/90 to-red-700/90 text-white",ROLE_ADMIN:"bg-gradient-to-r from-amber-500/90 to-amber-700/90 text-white",ROLE_HR:"bg-gradient-to-r from-purple-500/90 to-purple-700/90 text-white",ROLE_TEACHER:"bg-gradient-to-r from-emerald-500/90 to-emerald-700/90 text-white",ROLE_STUDENT:"bg-gradient-to-r from-blue-500/90 to-blue-700/90 text-white",ROLE_RECRUITER:"bg-gradient-to-r from-pink-500/90 to-pink-700/90 text-white",ROLE_GUEST:"bg-gradient-to-r from-teal-500/90 to-teal-700/90 text-white",ROLE_USER:"bg-gradient-to-r from-gray-500/90 to-gray-700/90 text-white",SUPERADMIN:"bg-gradient-to-r from-red-500/90 to-red-700/90 text-white",SUPER_ADMIN:"bg-gradient-to-r from-red-500/90 to-red-700/90 text-white",ADMIN:"bg-gradient-to-r from-amber-500/90 to-amber-700/90 text-white",HR:"bg-gradient-to-r from-purple-500/90 to-purple-700/90 text-white",TEACHER:"bg-gradient-to-r from-emerald-500/90 to-emerald-700/90 text-white",STUDENT:"bg-gradient-to-r from-blue-500/90 to-blue-700/90 text-white",RECRUITER:"bg-gradient-to-r from-pink-500/90 to-pink-700/90 text-white",GUEST:"bg-gradient-to-r from-teal-500/90 to-teal-700/90 text-white",USER:"bg-gradient-to-r from-gray-500/90 to-gray-700/90 text-white"},pj={ROLE_SUPERADMIN:"bg-red-100 text-red-700",ROLE_SUPER_ADMIN:"bg-red-100 text-red-700",ROLE_ADMIN:"bg-amber-100 text-amber-700",ROLE_HR:"bg-purple-100 text-purple-700",ROLE_TEACHER:"bg-emerald-100 text-emerald-700",ROLE_STUDENT:"bg-blue-100 text-blue-700",ROLE_RECRUITER:"bg-pink-100 text-pink-700",ROLE_GUEST:"bg-teal-100 text-teal-700",ROLE_USER:"bg-gray-100 text-gray-700",SUPERADMIN:"bg-red-100 text-red-700",SUPER_ADMIN:"bg-red-100 text-red-700",ADMIN:"bg-amber-100 text-amber-700",HR:"bg-purple-100 text-purple-700",TEACHER:"bg-emerald-100 text-emerald-700",STUDENT:"bg-blue-100 text-blue-700",RECRUITER:"bg-pink-100 text-pink-700",GUEST:"bg-teal-100 text-teal-700",USER:"bg-gray-100 text-gray-700"},gj=e=>{if(!e)return fj.ROLE_USER;if(fj[e])return fj[e];if(!e.startsWith("ROLE_")){const t=`ROLE_${e}`;if(fj[t])return fj[t]}if(e.startsWith("ROLE_")){const t=e.replace(/^ROLE_/i,"");if(fj[t])return fj[t]}return e||fj.ROLE_USER},yj=({role:t,animated:n=!1,index:r=0,className:s="",solid:a=!1,useVariant:i=!1,interactive:o=!0,onHoverStart:l=null,onHoverEnd:c=null,hovered:u=!1,...d})=>{const h=Q.useMemo((()=>"object"==typeof t&&null!==t?t.name||"USER":t||"USER"),[t]),f=Q.useMemo((()=>gj(h)),[h]),m=Q.useMemo((()=>{if(!i)return;const e=(e=>e?e.replace(/^ROLE_/i,"").toUpperCase():"")(h).toLowerCase();switch(e){case"student":return"student";case"teacher":return"teacher";case"admin":return"admin";case"super_admin":case"superadmin":return"superadmin";case"hr":return"hr";case"recruiter":return"recruiter";case"guest":return"guest";case"user":return"user";default:return}}),[h,i]),p=Q.useMemo((()=>i?"":((e,t=!1)=>{if(!e)return t?pj.ROLE_USER:mj.ROLE_USER;const n=t?pj:mj;if(n[e])return n[e];if(!e.startsWith("ROLE_")){const t=`ROLE_${e}`;if(n[t])return n[t]}if(e.startsWith("ROLE_")){const t=e.replace(/^ROLE_/i,"");if(n[t])return n[t]}return t?pj.ROLE_USER:mj.ROLE_USER})(h,a)),[h,a,i]),g=Q.useMemo((()=>Om(!i&&p,!i&&"px-2.5 py-0.5 text-xs rounded-full",o&&"transition-all duration-300",u&&o&&"shadow-lg scale-105",s)),[p,s,u,o,i]);return n?e.jsx(jl.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2,delay:.1*r},onHoverStart:o?l:void 0,onHoverEnd:o?c:void 0,children:e.jsx(wC,{className:g,variant:m,...(()=>{const{isDark:e,...t}=d;return t})(),children:f})}):e.jsx(wC,{className:g,variant:m,...(()=>{const{isDark:e,...t}=d;return t})(),children:f})},vj=({userData:t,isPublicProfile:n=!1,profilePictureUrl:r})=>{const[s,a]=Q.useState(!1),[i,o]=Q.useState(!1),[l,c]=Q.useState(null),[u,d]=Q.useState(null),h={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}};Q.useEffect((()=>{(async()=>{if(t?.user?.specialization&&!t.user.specialization.domain&&t.user.specialization.id)try{const e=t.user.specialization.id,n=await Sh.get(`/api/specialization/${e}`);n.data&&n.data.success&&n.data.data&&c(n.data.data.domain)}catch(e){console.error("Error fetching domain data:",e)}})()}),[t]);const f=(e,n="")=>t&&void 0!==t[e]?t[e]:t&&t.user&&void 0!==t.user[e]?t.user[e]:n,m=()=>`${f("firstName")} ${f("lastName")}`.trim()||"Utilisateur";(()=>{const e=f("roles");if(e&&Array.isArray(e)&&e.length>0){const t=e[0];if("object"==typeof t&&null!==t&&t.name&&t.displayName&&t.color)return t;if("object"==typeof t&&null!==t&&t.name)return t;if("string"==typeof t)return{name:t}}if(t?.user?.roles){const e=t.user.roles;if(Array.isArray(e)&&e.length>0){const t=e[0];if("object"==typeof t&&null!==t&&t.name&&t.displayName&&t.color)return t;if("object"==typeof t&&null!==t&&t.name)return t;if("string"==typeof t)return{name:t}}}})();const p=r||t.user?.profilePictureUrl||uj(t.user?.profilePicturePath);dj(t.user),Q.useEffect((()=>{a(!1),o(!1)}),[p]);return t?.documents&&Array.isArray(t.documents)&&t.documents.some((e=>"CV"===e?.documentType?.code||"CV"===e?.type)),t?.diplomas&&Array.isArray(t.diplomas)&&t.diplomas.length,e.jsx(jl.div,{className:"w-full bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-xl shadow-md overflow-hidden border border-gray-100 dark:border-gray-700",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},initial:"hidden",animate:"visible",children:e.jsxs("div",{className:"relative p-4 sm:p-6",children:[e.jsx("div",{className:"absolute left-0 top-0 w-1/3 h-full bg-blue-500/10 blur-[40px] pointer-events-none"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:gap-6 items-center sm:items-start relative",children:[e.jsx(jl.div,{variants:h,className:"relative z-10",children:e.jsx("div",{className:"rounded-full p-0.5 bg-gradient-to-br from-blue-400/30 to-indigo-600/30",children:e.jsxs(jp,{className:"h-20 w-20 sm:h-24 sm:w-24 ring-2 ring-white/10",children:[!s&&p&&e.jsx(Ap,{src:p,alt:m(),onError:()=>{a(!0)},onLoad:()=>{o(!0)},className:"transition-opacity duration-300 "+(i?"opacity-100":"opacity-0")}),e.jsx(_p,{className:"bg-gradient-to-r from-[#02284f] to-[#03386b] text-white",children:e.jsx(Pc,{className:"w-10 h-10 sm:w-12 sm:h-12"})})]})})}),e.jsxs("div",{className:"flex-1 min-w-0 text-center sm:text-left",children:[e.jsxs(jl.div,{variants:h,children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary to-indigo-600",children:m()}),(f("specialization")||t&&t.user&&t.user.specialization)&&e.jsx("div",{className:"flex items-center justify-center sm:justify-start gap-2 mt-1",children:e.jsx("span",{className:"text-sm text-muted-foreground",children:(()=>{const n=f("specialization")||t&&t.user&&t.user.specialization||{},r=n.domain?.name||l?.name||"",s=n.name||"";return e.jsxs(e.Fragment,{children:[r,r&&s&&e.jsx("span",{className:"mx-1.5 opacity-40",children:"•"}),s]})})()})})]}),e.jsx(jl.div,{variants:h,className:"flex flex-wrap justify-center sm:justify-start gap-1.5 mt-2",children:e.jsxs(ze,{children:[(()=>{let n=[];return t?.roles&&Array.isArray(t.roles)?n=t.roles:t?.user?.roles&&Array.isArray(t.user.roles)?n=t.user.roles:t?.data?.roles&&Array.isArray(t.data.roles)?n=t.data.roles:Array.isArray(t)&&(n=t),0===n.length&&t?.user?.role&&(n=[t.user.role]),Array.isArray(n)||(n=[]),n.length>0?n.map(((t,n)=>{const r="object"==typeof t&&null!==t?t.name||t||"USER":String(t);return e.jsx(yj,{role:r,animated:!0,index:n,hovered:u===r,onHoverStart:()=>d(r),onHoverEnd:()=>d(null)},`${r}-${n}`)})):e.jsx(yj,{role:"USER",animated:!0},"default-user")})(),t.studentProfile?.isSeekingInternship&&e.jsx(jl.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},children:e.jsx(wC,{className:"bg-gradient-to-r from-amber-500/90 to-amber-700/90 text-white px-2.5 py-0.5 text-xs rounded-full",children:"Recherche Stage"})},"seeking-internship"),t.studentProfile?.isSeekingApprenticeship&&e.jsx(jl.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},children:e.jsx(wC,{className:"bg-gradient-to-r from-green-500/90 to-green-700/90 text-white px-2.5 py-0.5 text-xs rounded-full",children:"Recherche Alternance"})},"seeking-apprenticeship")]})})]}),e.jsxs("div",{className:"flex gap-2 mt-2 sm:mt-0",children:[t.studentProfile?.portfolioUrl&&e.jsx(jl.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.3,delay:.2},children:e.jsxs("div",{onClick:()=>window.open(t.studentProfile.portfolioUrl,"_blank"),className:"group flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-gradient-to-r from-indigo-500/90 via-violet-500/90 to-purple-500/90 hover:from-indigo-600/90 hover:via-violet-600/90 hover:to-purple-600/90 text-white cursor-pointer transition-all duration-300 hover:shadow-lg hover:shadow-violet-500/20",children:[e.jsx("span",{className:"text-xs font-medium",children:"Voir mon portfolio"}),e.jsx(Ql,{className:"h-3.5 w-3.5 transform transition-transform duration-300 group-hover:translate-x-0.5"})]})}),!n&&e.jsx(jl.div,{variants:h,children:e.jsx(Fm,{asChild:!0,variant:"outline",size:"sm",className:"border-primary/20 hover:border-primary/50 hover:bg-primary/5 transition-all duration-300 text-xs h-auto py-1.5",children:e.jsxs(Z,{to:"/settings/profile",className:"flex items-center gap-1.5",children:["Modifier",e.jsx(Ql,{className:"h-3.5 w-3.5"})]})})})]})]})]})})};var bj="Tabs",[xj,wj]=E(bj,[q]),Ej=q(),[kj,Sj]=xj(bj),Nj=Q.forwardRef(((t,n)=>{const{__scopeTabs:r,value:s,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,d=W(l),[h,f]=U({prop:s,onChange:a,defaultProp:i??"",caller:bj});return e.jsx(kj,{scope:r,baseId:z(),value:h,onValueChange:f,orientation:o,dir:d,activationMode:c,children:e.jsx(k.div,{dir:d,"data-orientation":o,...u,ref:n})})}));Nj.displayName=bj;var Tj="TabsList",Cj=Q.forwardRef(((t,n)=>{const{__scopeTabs:r,loop:s=!0,...a}=t,i=Sj(Tj,r),o=Ej(r);return e.jsx($,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:s,children:e.jsx(k.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:n})})}));Cj.displayName=Tj;var Rj="TabsTrigger",jj=Q.forwardRef(((t,n)=>{const{__scopeTabs:r,value:s,disabled:a=!1,...i}=t,o=Sj(Rj,r),l=Ej(r),c=Dj(o.baseId,s),u=Ij(o.baseId,s),d=s===o.value;return e.jsx(H,{asChild:!0,...l,focusable:!a,active:d,children:e.jsx(k.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:n,onMouseDown:I(t.onMouseDown,(e=>{a||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(s)})),onKeyDown:I(t.onKeyDown,(e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(s)})),onFocus:I(t.onFocus,(()=>{const e="manual"!==o.activationMode;d||a||!e||o.onValueChange(s)}))})})}));jj.displayName=Rj;var Aj="TabsContent",_j=Q.forwardRef(((t,n)=>{const{__scopeTabs:r,value:s,forceMount:a,children:i,...o}=t,l=Sj(Aj,r),c=Dj(l.baseId,s),u=Ij(l.baseId,s),d=s===l.value,h=Q.useRef(d);return Q.useEffect((()=>{const e=requestAnimationFrame((()=>h.current=!1));return()=>cancelAnimationFrame(e)}),[]),e.jsx(T,{present:a||d,children:({present:r})=>e.jsx(k.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!r,id:u,tabIndex:0,...o,ref:n,style:{...t.style,animationDuration:h.current?"0s":void 0},children:r&&i})})}));function Dj(e,t){return`${e}-trigger-${t}`}function Ij(e,t){return`${e}-content-${t}`}_j.displayName=Aj;var Pj=Cj,Mj=jj,Lj=_j;const Oj=Nj,Uj=X.forwardRef((({className:t,...n},r)=>e.jsx(Pj,{ref:r,className:Om("inline-flex h-10 items-center justify-center rounded-md bg-transparent p-1 text-muted-foreground",t),...n})));Uj.displayName=Pj.displayName;const Fj=X.forwardRef((({className:t,...n},r)=>e.jsx(Mj,{ref:r,className:Om("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-primary data-[state=active]:text-white data-[state=active]:shadow-sm",t),...n})));Fj.displayName=Mj.displayName;const zj=X.forwardRef((({className:t,...n},r)=>e.jsx(Lj,{ref:r,className:Om("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...n})));zj.displayName=Lj.displayName;const Vj=Q.forwardRef((({className:t,...n},r)=>e.jsx("div",{ref:r,className:Om("rounded-lg border bg-card text-card-foreground shadow-sm dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100",t),...n})));Vj.displayName="Card";const Bj=Q.forwardRef((({className:t,...n},r)=>e.jsx("div",{ref:r,className:Om("flex flex-col space-y-1.5 p-6",t),...n})));Bj.displayName="CardHeader";const qj=Q.forwardRef((({className:t,...n},r)=>e.jsx("h3",{ref:r,className:Om("text-2xl font-semibold leading-none tracking-tight dark:text-white dark:font-medium",t),...n})));qj.displayName="CardTitle";const $j=Q.forwardRef((({className:t,...n},r)=>e.jsx("p",{ref:r,className:Om("text-sm text-muted-foreground dark:text-gray-300",t),...n})));$j.displayName="CardDescription";const Hj=Q.forwardRef((({className:t,...n},r)=>e.jsx("div",{ref:r,className:Om("p-6 pt-0",t),...n})));Hj.displayName="CardContent";const Wj=Q.forwardRef((({className:t,...n},r)=>e.jsx("div",{ref:r,className:Om("flex items-center p-6 pt-0",t),...n})));Wj.displayName="CardFooter";const Gj={listeners:new Set,subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)},notify(){this.listeners.forEach((e=>e()))}},Kj={documents:null,documentsByType:{},lastFetch:null,cacheDuration:3e5,isValid(){return this.lastFetch&&Date.now()-this.lastFetch<this.cacheDuration},clear(){this.documents=null,this.documentsByType={},this.lastFetch=null,Sh.invalidateDocumentCache()},updateOptimistically(e,t){this.documents||(this.documents=[]),this.documents.push(t);const n=e.toUpperCase();this.documentsByType[n]||(this.documentsByType[n]=[]),this.documentsByType[n].push(t)},removeDocument(e){this.documents&&(this.documents=this.documents.filter((t=>t.id!==e))),Object.keys(this.documentsByType).forEach((t=>{this.documentsByType[t]&&(this.documentsByType[t]=this.documentsByType[t].filter((t=>t.id!==e)))}))}};const Qj=new class{async getDocuments(e=!1){if(!e&&Kj.isValid()&&Kj.documents)return Kj.documents;try{const e=(await Sh.get("/documents")).data||[];return Kj.documents=e,Kj.lastFetch=Date.now(),e}catch(t){throw t}}async uploadCV(e){try{const t=e.get("file")||e.get("cv"),n={id:`temp-${Date.now()}`,type:"CV",name:t?t.name:"CV en cours d'upload",mime_type:t?t.type:"application/pdf",created_at:(new Date).toISOString(),is_temp:!0};Kj.updateOptimistically("CV",n),Gj.notify(),e.append("type","CV");const r={headers:{Authorization:`Bearer ${nf.getToken()}`}},s=await Sh.post("/documents/upload/cv",e,r);return Kj.clear(),Gj.notify(),s}catch(t){throw Kj.clear(),Gj.notify(),t}}async uploadCVForStudent(e,t){try{const n=e.get("file")||e.get("cv"),r={id:`temp-${Date.now()}`,type:"CV",name:n?n.name:"CV en cours d'upload",mime_type:n?n.type:"application/pdf",created_at:(new Date).toISOString(),student_id:t,is_temp:!0};Kj.updateOptimistically("CV",r),Gj.notify();const s={headers:{Authorization:`Bearer ${nf.getToken()}`}},a=await Sh.post(`/documents/upload/cv/${t}`,e,s);return Kj.clear(),Gj.notify(),a}catch(n){throw Kj.clear(),Gj.notify(),n}}async downloadDocument(e){try{const t={headers:{Authorization:`Bearer ${nf.getToken()}`},responseType:"blob"},n=`https://bigproject-production.konstantine.fr/api/documents/${e}/download`,r=await $d.get(n,t);if(!(r.data instanceof Blob))throw new Error("Invalid response format");return r.data}catch(t){if(t.response){const e=t.response.data instanceof Blob?"Erreur lors du téléchargement":t.response.data?.message||"Erreur lors du téléchargement";throw new Error(e)}throw t}}async deleteDocument(e){try{Kj.removeDocument(e),Gj.notify();const t=await Sh.delete(`/documents/${e}`);return Kj.clear(),Gj.notify(),t}catch(t){throw Kj.clear(),Gj.notify(),t}}async getDocumentByType(e,t=!1){const n=e.toUpperCase();if(!t&&Kj.isValid()&&Kj.documentsByType[n])return Kj.documentsByType[n];try{const e=(await Sh.get(`/documents/type/${n}`)).data||[];return Kj.documentsByType[n]=e,Kj.lastFetch=Date.now(),e}catch(r){throw r}}clearCache(){Kj.clear(),Gj.notify()}},Xj=({userData:t,isPublicProfile:n=!1,documents:r=[]})=>{const[s,a]=Q.useState(!1),i=t?.user||t||{},o=i?.roles?.some((e=>"object"==typeof e?"STUDENT"===e.name||"ROLE_STUDENT"===e.name:"STUDENT"===e||"ROLE_STUDENT"===e)),l=i?.roles?.some((e=>"object"==typeof e?"GUEST"===e.name||"ROLE_GUEST"===e.name:"GUEST"===e||"ROLE_GUEST"===e)),c=o||l,u=n?i?.id:null,{data:d,isLoading:h}=((e=null)=>de({queryKey:["userCV",e],queryFn:async()=>{try{return e?(await Sh.get("/documents/type/CV")).data||{success:!0,data:[]}:{success:!0,data:await Qj.getDocumentByType("CV")}}catch(t){return console.warn("Error fetching CV document:",t.message),{success:!1,error:t.message,data:[]}}},enabled:!0,staleTime:3e5,retry:!1}))(u),f=r?.find((e=>"CV"===e?.documentType?.code||"CV"===e?.type)),m=Array.isArray(d?.data)?d?.data[0]:d?.data,p=i?.cvFilePath,g=f||d?.success&&d?.data&&(Array.isArray(d.data)?d.data.length>0:!!d.data)||!!p,y=f||m,v=i?.addresses&&i.addresses.length>0?i.addresses[0]:null,b=v?.city?.name||("string"==typeof v?.city?v.city:null)||i?.city?.name||("string"==typeof i?.city?i.city:"Non renseignée"),x=i?.linkedinUrl,w=i?.studentProfile?.portfolioUrl,E=n?i?.cvDocument:null,k=async()=>{if(n&&E&&E.downloadUrl){a(!0);try{let t="https://bigproject-production.konstantine.fr/api";t=t.replace(/\/+$/,"");let n=E.downloadUrl;try{const e=new URL(n,t);let r=e.pathname;t.endsWith("/api")&&r.startsWith("/api/")&&(r=r.replace(/^\/api\//,"/")),n=t+r+e.search}catch(e){}const r=await fetch(n,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!r.ok)throw new Error("Erreur lors du téléchargement du CV");const s=await r.blob(),a=(E.name||"cv.pdf").replace(/[^a-zA-Z0-9.-]/g,"_"),i=window.URL.createObjectURL(s),o=document.createElement("a");o.href=i,o.download=a,document.body.appendChild(o),o.click(),setTimeout((()=>{window.URL.revokeObjectURL(i),document.body.removeChild(o)}),100),Lh.success("CV téléchargé avec succès")}catch(t){Lh.error(t.message||"Erreur lors du téléchargement du CV")}finally{a(!1)}}else if(y&&y.id){a(!0);try{const e=await Qj.downloadDocument(y.id);if(!(e instanceof Blob))throw new Error("Invalid document format received");const t=(y.name||"cv.pdf").replace(/[^a-zA-Z0-9.-]/g,"_"),n=window.URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),setTimeout((()=>{window.URL.revokeObjectURL(n),document.body.removeChild(r)}),100),Lh.success("CV téléchargé avec succès")}catch(t){console.error("Erreur lors du téléchargement du CV:",t),Lh.error(t.message||"Erreur lors du téléchargement du CV")}finally{a(!1)}}else p?window.open(p,"_blank"):Lh.error("CV non disponible")},S=({icon:t,title:n,value:r,link:s,isDownload:a=!1})=>e.jsx("div",{className:"group "+(s||a?"cursor-pointer":""),onClick:a?k:void 0,children:e.jsxs("div",{className:"relative flex items-center gap-4 p-4 rounded-xl bg-background/50 backdrop-blur-sm border border-border/5 shadow-sm overflow-hidden "+(s||a?"hover:shadow-lg hover:border-primary transition-all duration-300 pr-12":""),children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center "+(s||a?"group-hover:bg-primary/20 transition-colors duration-300":""),children:e.jsx(t,{className:"h-5 w-5 text-primary"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:n}),s&&!a?e.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"font-medium text-foreground group-hover:text-primary flex items-center gap-1 transition-colors duration-300",children:r}):e.jsx("p",{className:"font-medium truncate",children:r||"Non renseigné"})]}),(s||a)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute right-0 inset-y-0 w-12 bg-gradient-to-l from-primary/5 to-transparent group-hover:from-primary/10 transition-colors duration-300"}),e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 transform transition-transform duration-300 group-hover:translate-x-1",children:e.jsx(Ql,{className:"h-5 w-5 text-primary opacity-50 group-hover:opacity-100"})})]})]})});return e.jsx("div",{className:"space-y-8",children:e.jsxs(Vj,{className:"overflow-hidden border-none shadow-md bg-background/50 backdrop-blur-sm",children:[e.jsx(Bj,{className:"border-b border-border/5 bg-background/50",children:e.jsxs(qj,{className:"text-xl font-semibold text-foreground/90 flex items-center gap-2",children:[e.jsx(Pc,{className:"h-5 w-5 text-primary"}),"Informations personnelles"]})}),e.jsx(Hj,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(S,{icon:Pc,title:"Nom complet",value:`${i.firstName||""} ${i.lastName||""}`}),e.jsx(S,{icon:yc,title:"Email",value:i.email}),e.jsx(S,{icon:vc,title:"Ville",value:b}),x&&e.jsx(S,{icon:fc,title:"LinkedIn",value:"Voir le profil LinkedIn",link:x}),c&&w&&e.jsx(S,{icon:rc,title:"Portfolio",value:"Voir le portfolio",link:w}),n&&E&&e.jsx(S,{icon:ac,title:"CV",value:E.name||"Télécharger le CV",isDownload:!0}),!n&&c&&g&&e.jsx(S,{icon:ac,title:"CV",value:"Télécharger mon CV",link:p,isDownload:!0})]})})]})})},Jj=({userData:t,isPublicProfile:n=!1,documents:r=[]})=>{const s={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100,duration:.5}}},a=(()=>{const e=t?.user||t||{},n=e?.roles||[];if(0===n.length)return"USER";const r=n[0];return"object"==typeof r&&null!==r&&r.name?r.name:"string"==typeof r?r:"USER"})(),i=(Array.isArray(t?.diplomas)&&t.diplomas.length>0?t.diplomas:t?.user?.diplomas&&Array.isArray(t.user.diplomas)&&t.user.diplomas.length>0?t.user.diplomas:t?.data?.diplomas&&Array.isArray(t.data.diplomas)&&t.data.diplomas.length>0?t.data.diplomas:[]).map((e=>e.diploma&&"object"==typeof e.diploma?{id:e.id,name:e.diploma.name,institution:e.diploma.institution,obtainedAt:e.obtainedDate}:e)),o=i.length>0;return e.jsxs(e.Fragment,{children:[o&&e.jsx(jl.div,{variants:s,initial:"hidden",animate:"visible",children:e.jsxs(Vj,{className:"overflow-hidden border-none shadow-md bg-white dark:bg-slate-800",children:[e.jsx(Bj,{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 pb-4",children:e.jsxs(qj,{className:"text-xl flex items-center gap-2",children:[e.jsx(cc,{className:"h-5 w-5 text-primary"}),"Diplômes"]})}),e.jsx(Hj,{className:"p-6",children:e.jsx("div",{className:"space-y-8",children:i.map(((t,n)=>{return e.jsxs("div",{className:"relative pl-6 pb-8 border-l-2 border-primary/20 last:border-0 last:pb-0",children:[e.jsx("div",{className:"absolute left-[-8px] top-0 h-4 w-4 rounded-full bg-primary shadow-md"}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-4 rounded-lg transition-all duration-300 hover:bg-slate-100 dark:hover:bg-slate-700/50 hover:shadow-md",children:[e.jsx("h3",{className:"font-bold text-primary",children:t.name||t.title||"Diplôme"}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground mb-3 bg-primary/5 px-2 py-1 rounded-full w-fit mt-2",children:[e.jsx(nc,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:t.obtainedAt||t.obtainedDate||t.obtained_at?(r=t.obtainedAt||t.obtainedDate||t.obtained_at,r?new Date(r).toLocaleDateString("fr-FR",{month:"short",year:"numeric"}):"Aujourd'hui"):"En cours"})]}),(t.institution||t.school)&&e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground mt-2",children:[e.jsx(Vl,{className:"h-4 w-4 mr-1 text-muted-foreground/70"}),e.jsx("span",{children:t.institution||t.school})]}),(t.location||t.city)&&e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground mt-1",children:[e.jsx(vc,{className:"h-4 w-4 mr-1 text-muted-foreground/70"}),e.jsx("span",{children:t.location||t.city})]})]})]},n);var r}))})})]})}),!o&&e.jsx(jl.div,{variants:s,initial:"hidden",animate:"visible",children:e.jsxs(Vj,{className:"overflow-hidden border-none shadow-md bg-white dark:bg-slate-800",children:[e.jsx(Bj,{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 pb-4",children:e.jsxs(qj,{className:"text-xl flex items-center gap-2",children:[e.jsx(cc,{className:"h-5 w-5 text-primary"}),"Diplômes"]})}),e.jsx(Hj,{className:"p-6",children:e.jsx("div",{className:"text-center p-6 text-muted-foreground",children:e.jsx("p",{children:"Aucun diplôme n'a été ajouté pour le moment."})})})]})}),"TEACHER"===a&&e.jsx(jl.div,{variants:s,initial:"hidden",animate:"visible",className:"mt-8",children:e.jsxs(Vj,{className:"overflow-hidden border-none shadow-md bg-white dark:bg-slate-800",children:[e.jsx(Bj,{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 pb-4",children:e.jsxs(qj,{className:"text-xl flex items-center gap-2",children:[e.jsx(zl,{className:"h-5 w-5 text-primary"}),"Mes cours et ateliers"]})}),e.jsx(Hj,{className:"p-6",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"relative pl-6 pb-8 border-l-2 border-primary/20 last:border-0 last:pb-0",children:[e.jsx("div",{className:"absolute left-[-8px] top-0 h-4 w-4 rounded-full bg-primary shadow-md"}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-4 rounded-lg transition-all duration-300 hover:bg-slate-100 dark:hover:bg-slate-700/50 hover:shadow-md",children:[e.jsx("h3",{className:"font-bold text-primary",children:"Développement Web Full-Stack"}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground mb-3 bg-primary/5 px-2 py-1 rounded-full w-fit mt-2",children:[e.jsx(nc,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:"Sept. 2022 - Présent"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Formation complète aux technologies web modernes incluant HTML/CSS, JavaScript, React, Node.js et MongoDB."})]})]}),e.jsxs("div",{className:"relative pl-6 pb-8 border-l-2 border-primary/20 last:border-0 last:pb-0",children:[e.jsx("div",{className:"absolute left-[-8px] top-0 h-4 w-4 rounded-full bg-primary shadow-md"}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 p-4 rounded-lg transition-all duration-300 hover:bg-slate-100 dark:hover:bg-slate-700/50 hover:shadow-md",children:[e.jsx("h3",{className:"font-bold text-primary",children:"DevOps & CI/CD"}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground mb-3 bg-primary/5 px-2 py-1 rounded-full w-fit mt-2",children:[e.jsx(nc,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:"Jan. 2023 - Présent"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Atelier pratique sur l'intégration et le déploiement continus, avec Docker, Jenkins et GitHub Actions."})]})]})]})})]})})]})},Yj=({userData:t,isPublicProfile:n=!1,documents:r=[]})=>{const s={inactive:{opacity:.7,scale:.95},active:{opacity:1,scale:1,transition:{type:"spring",stiffness:300,damping:20}}},a=(()=>{if(t?.user?.roles){if(Array.isArray(t.user.roles)&&t.user.roles.length>0){const e=t.user.roles[0];if("object"==typeof e&&null!==e&&e.name)return e.name;if("string"==typeof e)return e}if("string"==typeof t.user.roles)return t.user.roles}return"USER"})(),i=t?.user?.diplomas&&Array.isArray(t.user.diplomas)&&t.user.diplomas.length>0,o="TEACHER"===a||i;return e.jsx(jl.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100,delay:.3}}},initial:"hidden",animate:"visible",className:"w-full",children:e.jsxs(Oj,{defaultValue:"about",className:"w-full",children:[e.jsx("div",{className:"bg-white/5 backdrop-blur-sm border-b border-white/10 rounded-t-xl p-1.5 mb-0",children:e.jsxs(Uj,{className:`grid w-full ${o?"grid-cols-2":"grid-cols-1"} bg-transparent h-auto p-1 gap-4`,children:[e.jsx(Fj,{value:"about",className:"relative overflow-hidden \r\n                data-[state=active]:bg-transparent !bg-transparent\r\n                data-[state=active]:text-primary\r\n                py-2.5 transition-all duration-200 \r\n                text-slate-400\r\n                font-medium\r\n                rounded-md\r\n                before:absolute before:inset-x-0 before:h-[2px] before:bg-primary\r\n                before:bottom-0 before:scale-x-0 hover:before:scale-x-100\r\n                before:transition-transform before:duration-300\r\n                before:origin-left",children:e.jsx(jl.div,{variants:s,initial:"inactive",animate:"active",className:"flex items-center justify-center gap-2",children:e.jsx("span",{className:"relative z-10 font-medium",children:"À propos"})})}),o&&e.jsx(Fj,{value:"experience",className:"relative overflow-hidden \r\n                  data-[state=active]:bg-transparent !bg-transparent\r\n                  data-[state=active]:text-primary\r\n                  py-2.5 transition-all duration-200 \r\n                  text-slate-400\r\n                  font-medium\r\n                  rounded-md\r\n                  before:absolute before:inset-x-0 before:h-[2px] before:bg-primary\r\n                  before:bottom-0 before:scale-x-0 hover:before:scale-x-100\r\n                  before:transition-transform before:duration-300\r\n                  before:origin-left",children:e.jsx(jl.div,{variants:s,initial:"inactive",animate:"active",className:"flex items-center justify-center gap-2",children:e.jsx("span",{className:"relative z-10 font-medium",children:"TEACHER"===a?"Expérience et Cours":"Diplômes"})})})]})}),e.jsxs(jl.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},className:"relative bg-white/5 rounded-b-xl p-6",children:[e.jsx(zj,{value:"about",className:"mt-0 space-y-6 focus-visible:outline-none focus-visible:ring-0",children:e.jsx(Xj,{userData:t,isPublicProfile:n,documents:r})}),o&&e.jsx(zj,{value:"experience",className:"mt-0 space-y-6 focus-visible:outline-none focus-visible:ring-0",children:e.jsx(Jj,{userData:t,isPublicProfile:n,documents:r})})]})]})})},Zj=()=>{const{userId:t}=se(),[n,r]=Q.useState(null),[s,a]=Q.useState(null),[i,o]=Q.useState(!0),[l,c]=Q.useState(null),[u,d]=Q.useState(!1),h=ap();Q.useEffect((()=>{const e=async()=>{try{if(await(async()=>{try{const e=await Sh.getUserProfile();return e?.id?.toString()===t?.toString()&&(d(!0),window.location.href="/profile",!0)}catch(e){return!1}})())return;Sh.clearPublicProfileCache(t);const e=await Sh.getPublicProfile(t);if(e?.data?.user)if(r(e.data.user),e.data.user.profilePictureUrl)a(e.data.user.profilePictureUrl);else if(e.data.user.profilePicturePath){const{getProfilePictureUrl:t}=require("@/lib/utils/profileUtils"),n=t(e.data.user.profilePicturePath);a(n)}else a(null);else c("Données du profil non disponibles")}catch(e){c(e.message||"Erreur lors de la récupération du profil")}finally{o(!1)}};return t&&e(),()=>{Sh.clearPublicProfileCache(t)}}),[t]);if(i)return e.jsx("div",{className:"w-full max-w-7xl mx-auto px-4 py-6 space-y-8","data-testid":"public-profile-loading",children:e.jsxs("div",{className:"w-full bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 rounded-lg shadow-md overflow-hidden",children:[e.jsx(Zp,{className:"h-64 w-full"}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx(Zp,{className:"h-8 w-1/3"}),e.jsx(Zp,{className:"h-4 w-2/3"}),e.jsx(Zp,{className:"h-4 w-1/2"})]})]})});if(l)return e.jsx("div",{className:"w-full max-w-7xl mx-auto px-4 py-6","data-testid":"public-profile-error",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[e.jsx("strong",{className:"font-bold",children:"Erreur :"}),e.jsxs("span",{className:"block sm:inline",children:[" ",l]})]})});if(!n)return e.jsx("div",{className:"w-full max-w-7xl mx-auto px-4 py-6","data-testid":"public-profile-no-data",children:e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-700 px-4 py-3 rounded relative",role:"alert",children:[e.jsx("strong",{className:"font-bold",children:"Attention :"}),e.jsx("span",{className:"block sm:inline",children:" Profil non trouvé."})]})});const f={user:{...n,profilePictureUrl:s,roles:Array.isArray(n.roles)?n.roles.map((e=>({name:e,displayName:h.translateRoleName(e),color:h.getRoleBadgeColor(e)}))):[{name:tp.GUEST,displayName:h.translateRoleName(tp.GUEST),color:h.getRoleBadgeColor(tp.GUEST)}],specialization:n.specialization||{},linkedinUrl:n.linkedinUrl||"",birthDate:n.birthDate,createdAt:n.createdAt,updatedAt:n.updatedAt,addresses:n.addresses||[]},studentProfile:n.studentProfile||{isSeekingInternship:!1,isSeekingApprenticeship:!1,portfolioUrl:null,currentInternshipCompany:null,internshipStartDate:null,internshipEndDate:null,situationType:null},addresses:n.addresses||[],stats:{profile:{completionPercentage:0}}};return e.jsxs(jl.div,{className:"w-full max-w-7xl mx-auto px-4 py-6 space-y-8",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{when:"beforeChildren",staggerChildren:.2,duration:.3}}},initial:"hidden",animate:"visible","data-testid":"public-profile-view",children:[e.jsx(vj,{userData:f,isPublicProfile:!0,profilePictureUrl:s,onProfileUpdate:()=>{}}),e.jsx(Yj,{userData:f,isPublicProfile:!0,documents:[],onProfileUpdate:()=>{}})]})},eA=[{language:"fr",name:"Français"},{language:"en",name:"English"},{language:"es",name:"Español"},{language:"de",name:"Deutsch"},{language:"it",name:"Italiano"}],tA=()=>{const[t,n]=Q.useState(""),[r,s]=Q.useState("en"),[a,i]=Q.useState(""),[o,l]=Q.useState(""),[c,u]=Q.useState(!1),[d,h]=Q.useState(eA),[f,m]=Q.useState(!1),[p,g]=Q.useState(null);Q.useEffect((()=>{(async()=>{try{m(!0),g(null);const e=await eg.getAvailableLanguages("fr");e&&e.length>0&&(h(e),Lh.success("Langues chargées avec succès"))}catch(e){console.error("Error loading languages:",e),g(`Erreur de configuration: ${e.message}`),Lh.error("Erreur de chargement des langues: "+(e.message||"Une erreur est survenue"))}finally{m(!1)}})()}),[true]);return e.jsxs("div",{className:"max-w-2xl mx-auto p-6 space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Test de Traduction Google Cloud"}),p&&e.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-red-700 mb-2",children:"⚠️ Erreur"}),e.jsx("p",{className:"text-red-700",children:p})]}),!1,e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Texte à traduire:"}),e.jsx("textarea",{value:t,onChange:e=>n(e.target.value),className:"w-full p-2 border rounded-md",rows:"4",placeholder:"Entrez votre texte ici..."})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:async()=>{if(t)try{u(!0),g(null);const e=await eg.detectLanguage(t);i(e);const n=d.find((t=>t.language===e))?.name||e;Lh.success(`Langue détectée: ${n}`)}catch(e){console.error("Detection error:",e),g(`Erreur de détection: ${e.message}`),Lh.error("Erreur de détection: "+(e.message||"Une erreur est survenue"))}finally{u(!1)}else Lh.error("Veuillez entrer un texte pour détecter la langue")},disabled:c||!t||!1,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 disabled:bg-gray-400",children:"Détecter la langue"}),a&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium",children:"Langue détectée: "}),e.jsx("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 rounded",children:a})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Langue cible:"}),e.jsx("select",{value:r,onChange:e=>s(e.target.value),className:"w-full p-2 border rounded-md",disabled:f,children:f?e.jsx("option",{children:"Chargement des langues..."}):d.map((t=>e.jsx("option",{value:t.language,children:t.name},t.language)))})]}),e.jsx("button",{onClick:async()=>{if(t)try{u(!0),g(null);const e=await eg.translateText(t,r,a||null);l(e),Lh.success("Traduction réussie")}catch(e){console.error("Translation error:",e),g(`Erreur de traduction: ${e.message}`),Lh.error("Erreur de traduction: "+(e.message||"Une erreur est survenue"))}finally{u(!1)}else Lh.error("Veuillez entrer un texte à traduire")},disabled:c||!t||!1,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:c?"Traduction en cours...":"Traduire"}),o&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h2",{className:"text-lg font-medium mb-2",children:"Résultat :"}),e.jsx("div",{className:"p-4 bg-gray-100 rounded-md",children:o})]})]})]})};const nA=new class{constructor(){this.cache={notifications:{notifications:[],pagination:{total:0,page:1,limit:10,pages:1},unread_count:0},unreadCount:0,lastFetch:null,fetchPromise:null},this.subscribers=[],this.pollingInterval=null,this.pollingDelay=6e4,this.useMockBackend=!0}async getNotifications(e=1,t=10,n=!0,r=!1){try{if(await new Promise((e=>setTimeout(e,300))),this.cache.notifications&&this.cache.notifications.notifications){let r=[...this.cache.notifications.notifications];n||(r=r.filter((e=>!e.isRead))),r.sort(((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)));const s=r.length,a=Math.max(1,Math.ceil(s/t)),i=(e-1)*t,o={notifications:r.slice(i,i+t),pagination:{total:s,page:e,limit:t,pages:a},unread_count:r.filter((e=>!e.isRead)).length};return this.cache.notifications=o,this.cache.unreadCount=o.unread_count,this.cache.lastFetch=new Date,this.notifySubscribers(),o}if(this.cache.fetchPromise)try{await this.cache.fetchPromise}catch(s){console.log("Waiting for fetch promise failed, checking cache next")}if(!r&&this.cache.notifications&&this.cache.notifications.notifications)return this.cache.notifications;console.log("No valid cached data, returning empty notifications");const a={notifications:[],pagination:{total:0,page:1,limit:10,pages:1},unread_count:0};return this.cache.notifications=a,this.cache.unreadCount=0,this.cache.lastFetch=new Date,this.notifySubscribers(),a}catch(s){return this.cache.fetchPromise=null,console.error("Error fetching notifications:",s),this.cache.notifications&&this.cache.notifications.notifications?this.cache.notifications:{notifications:[],pagination:{total:0,page:1,limit:10,pages:1},unread_count:0}}}async getUnreadCount(e=!1){try{if(e){let e=0;this.cache.notifications&&this.cache.notifications.notifications&&(e=this.cache.notifications.notifications.filter((e=>!e.readAt&&!e.isRead)).length,this.cache.unreadCount=e,this.notifySubscribers())}if(!e&&this.cache.lastFetch){const e=new Date;if(e-this.cache.lastFetch<3e4)return this.cache.unreadCount}let t=0;return this.cache.notifications&&this.cache.notifications.notifications&&(t=this.cache.notifications.notifications.filter((e=>!e.readAt&&!e.isRead)).length),this.cache.unreadCount=t,this.cache.lastFetch=new Date,this.notifySubscribers(),t}catch(t){return console.error("Error calculating unread notification count:",t),0}}markNotificationAsReadLocally(e){if(!this.cache.notifications||!this.cache.notifications.notifications)return!1;const t=this.cache.notifications.notifications.find((t=>t.id===e));return!(!t||t.readAt)&&(t.readAt=(new Date).toISOString(),t.isRead=!0,this.cache.unreadCount=Math.max(0,this.cache.unreadCount-1),this.notifySubscribers(),!0)}markAllNotificationsAsReadLocally(){if(!this.cache.notifications||!this.cache.notifications.notifications)return!1;let e=!1;return this.cache.notifications.notifications.forEach((t=>{t.readAt||(t.readAt=(new Date).toISOString(),t.isRead=!0,e=!0)})),e&&(this.cache.unreadCount=0,this.notifySubscribers()),e}startPolling(){this.pollingInterval&&clearInterval(this.pollingInterval),this.pollingInterval=setInterval((()=>{this.getUnreadCount(!0).catch((e=>{console.error("Error in notification polling:",e)}))}),this.pollingDelay)}stopPolling(){this.pollingInterval&&(clearInterval(this.pollingInterval),this.pollingInterval=null)}subscribe(e){if("function"==typeof e)return this.subscribers.push(e),()=>{this.subscribers=this.subscribers.filter((t=>t!==e))};console.warn("Notification subscriber must be a function")}notifySubscribers(){this.subscribers.forEach((e=>{try{e({unreadCount:this.cache.unreadCount,notifications:this.cache.notifications?.notifications||[]})}catch(t){console.error("Error in notification subscriber:",t)}}))}resetCache(){this.cache={notifications:{notifications:[],pagination:{total:0,page:1,limit:10,pages:1},unread_count:0},unreadCount:0,lastFetch:null,fetchPromise:null},this.notifySubscribers()}async markAsRead(e){try{this.markNotificationAsReadLocally(e);return{success:!0,notification:this.cache.notifications?.notifications?.find((t=>t.id===e))||null,unread_count:this.cache.unreadCount}}catch(t){return console.error("Error marking notification as read:",t),{success:!1,error:t.message,unread_count:this.cache.unreadCount}}}async markAllAsRead(){try{this.markAllNotificationsAsReadLocally();return{success:!0,updated:this.cache.notifications?.notifications?.length||0,unread_count:0}}catch(e){return console.error("Error marking all notifications as read:",e),{success:!1,error:e.message,unread_count:this.cache.unreadCount}}}async createTestNotification(e="document",t="/dashboard"){try{console.log("Creating local test notification");const n=new Date,r={id:`local-${n.getTime()}`,title:`Test Notification (${e})`,message:`Ceci est une notification de test de type "${e}" créée localement`,type:e,targetUrl:t,createdAt:n.toISOString(),readAt:null,isRead:!1};return this.cache.notifications.notifications||(this.cache.notifications.notifications=[]),this.cache.notifications.notifications.unshift(r),this.cache.unreadCount+=1,this.cache.notifications.pagination&&(this.cache.notifications.pagination.total+=1),this.notifySubscribers(),{success:!0,notification:r}}catch(n){return console.error("Error creating test notification:",n),{success:!1,error:n.message}}}},rA=async(e,{date:t,period:n,limit:r,offset:s}={})=>{try{let a=`/api/signatures/absences/formation/${e}`;const i=[];t&&i.push(`date=${encodeURIComponent(t)}`),n&&i.push(`period=${encodeURIComponent(n)}`),void 0!==r&&i.push(`limit=${encodeURIComponent(r)}`),void 0!==s&&i.push(`offset=${encodeURIComponent(s)}`),i.length&&(a+=`?${i.join("&")}`);return await Sh.get(a)}catch(a){throw console.error("Erreur lors de la récupération des absences de la formation:",a),a}},sA=async(e,{formationId:t,date:n,period:r,limit:s,offset:a}={})=>{try{let i=`/api/signatures/absences/user/${e}`;const o=[];t&&o.push(`formationId=${encodeURIComponent(t)}`),n&&o.push(`date=${encodeURIComponent(n)}`),r&&o.push(`period=${encodeURIComponent(r)}`),void 0!==s&&o.push(`limit=${encodeURIComponent(s)}`),void 0!==a&&o.push(`offset=${encodeURIComponent(a)}`),o.length&&(i+=`?${o.join("&")}`);return await Sh.get(i)}catch(i){throw console.error("Erreur lors de la récupération des absences de l'utilisateur:",i),i}},aA=[{value:"morning",label:"Matin (9h-12h)"},{value:"afternoon",label:"Après-midi (13h-17h)"}],iA=()=>{const{formationId:t}=se(),[n,r]=Q.useState((()=>(new Date).toISOString().slice(0,10))),[s,a]=Q.useState("morning"),[i,o]=Q.useState(!1),[l,c]=Q.useState(null),[u,d]=Q.useState([]),[h,f]=Q.useState(0),[m,p]=Q.useState(0),[g]=Q.useState(10),[y,v]=Q.useState(0),b=async(e=y)=>{o(!0),c(null);try{const r=await rA(t,{date:n,period:s,limit:g,offset:e});d(r.absents||[]),f(r.studentCount||0),p(r.totalAbsents||0),v(r.offset||0)}catch(r){c(r.message||"Erreur lors du chargement des absences")}finally{o(!1)}};Q.useEffect((()=>{v(0),b(0)}),[t,n,s]);const x=Math.floor(y/g)+1,w=Math.ceil(m/g);return e.jsxs("div",{className:"max-w-5xl w-full mx-auto p-6 bg-white dark:bg-gray-900 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 mt-8 animate-fadeInUp",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-6 text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx("span",{className:"inline-block w-2 h-6 bg-blue-500 rounded-full mr-2"}),"Absences de la formation ",e.jsxs("span",{className:"text-blue-600 dark:text-blue-300",children:["#",t]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 mb-6 items-end",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-xs font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"Date"}),e.jsx("input",{type:"date",value:n,onChange:e=>r(e.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-400 focus:outline-none transition"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-xs font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"Période"}),e.jsx("select",{value:s,onChange:e=>a(e.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-400 focus:outline-none transition",children:aA.map((t=>e.jsx("option",{value:t.value,children:t.label},t.value)))})]}),e.jsx("button",{onClick:()=>b(0),className:"bg-gradient-to-r from-blue-600 to-blue-500 text-white px-5 py-2 rounded-lg shadow hover:from-blue-700 hover:to-blue-600 transition font-semibold focus:outline-none focus:ring-2 focus:ring-blue-400",children:"Rafraîchir"})]}),i&&e.jsx("div",{className:"my-6 text-center text-blue-500 animate-pulse",children:"Chargement..."}),l&&e.jsx("div",{className:"my-6 text-center text-red-500 bg-red-100 dark:bg-red-900/40 rounded-lg px-4 py-2 font-medium animate-fadeInUp",children:l}),e.jsxs("div",{className:"mb-3 text-sm text-gray-600 dark:text-gray-400",children:["Total étudiants : ",e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:h})," | Absents : ",e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:m})]}),e.jsx("div",{className:"overflow-x-auto rounded-lg shadow-sm",children:e.jsxs("table",{className:"w-full border-collapse bg-white dark:bg-gray-900 rounded-lg overflow-hidden",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 dark:bg-gray-800",children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-700 dark:text-gray-200 uppercase tracking-wider",children:"Prénom"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-700 dark:text-gray-200 uppercase tracking-wider",children:"Nom"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-700 dark:text-gray-200 uppercase tracking-wider",children:"Email"})]})}),e.jsx("tbody",{children:0!==u.length||i?u.map((t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/60 transition",children:[e.jsx("td",{className:"px-4 py-2 border-b border-gray-100 dark:border-gray-700",children:t.firstName}),e.jsx("td",{className:"px-4 py-2 border-b border-gray-100 dark:border-gray-700",children:t.lastName}),e.jsx("td",{className:"px-4 py-2 border-b border-gray-100 dark:border-gray-700",children:t.email})]},t.id))):e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"text-center py-4 text-gray-400 dark:text-gray-500",children:"Aucun absent"})})})]})}),e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsx("button",{onClick:()=>{y-g>=0&&b(y-g)},disabled:0===y,className:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition",children:"Précédent"}),e.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Page ",e.jsx("span",{className:"font-bold",children:x})," / ",w]}),e.jsx("button",{onClick:()=>{y+g<m&&b(y+g)},disabled:y+g>=m,className:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition",children:"Suivant"})]})]})},oA=[{value:"morning",label:"Matin (9h-12h)"},{value:"afternoon",label:"Après-midi (13h-17h)"}],lA=()=>{const{userId:t}=se(),[n,r]=Q.useState(""),[s,a]=Q.useState(""),[i,o]=Q.useState(""),[l,c]=Q.useState(!1),[u,d]=Q.useState(null),[h,f]=Q.useState([]),[m,p]=Q.useState(0),[g]=Q.useState(10),[y,v]=Q.useState(0),b=async(e=y)=>{c(!0),d(null);try{const r=await sA(t,{formationId:n||void 0,date:s||void 0,period:i||void 0,limit:g,offset:e});f(r.absences||[]),p(r.totalAbsences||0),v(r.offset||0)}catch(r){d(r.message||"Erreur lors du chargement des absences")}finally{c(!1)}};Q.useEffect((()=>{v(0),b(0)}),[t,n,s,i]);const x=Math.floor(y/g)+1,w=Math.ceil(m/g);return e.jsxs("div",{className:"max-w-5xl w-full mx-auto p-6 bg-white dark:bg-gray-900 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 mt-8 animate-fadeInUp",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-6 text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx("span",{className:"inline-block w-2 h-6 bg-blue-500 rounded-full mr-2"}),"Absences de l'utilisateur"]}),e.jsxs("div",{className:"flex flex-wrap gap-4 mb-6 items-end",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-xs font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"Date"}),e.jsx("input",{type:"date",value:s,onChange:e=>a(e.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-400 focus:outline-none transition"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-xs font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"Période"}),e.jsxs("select",{value:i,onChange:e=>o(e.target.value),className:"border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-400 focus:outline-none transition",children:[e.jsx("option",{value:"",children:"Toutes"}),oA.map((t=>e.jsx("option",{value:t.value,children:t.label},t.value)))]})]}),e.jsx("button",{onClick:()=>b(0),className:"bg-gradient-to-r from-blue-600 to-blue-500 text-white px-5 py-2 rounded-lg shadow hover:from-blue-700 hover:to-blue-600 transition font-semibold focus:outline-none focus:ring-2 focus:ring-blue-400",children:"Rafraîchir"})]}),l&&e.jsx("div",{className:"my-6 text-center text-blue-500 animate-pulse",children:"Chargement..."}),u&&e.jsx("div",{className:"my-6 text-center text-red-500 bg-red-100 dark:bg-red-900/40 rounded-lg px-4 py-2 font-medium animate-fadeInUp",children:u}),e.jsxs("div",{className:"mb-3 text-sm text-gray-600 dark:text-gray-400",children:["Total absences : ",e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:m})]}),e.jsx("div",{className:"overflow-x-auto rounded-lg shadow-sm",children:e.jsxs("table",{className:"w-full border-collapse bg-white dark:bg-gray-900 rounded-lg overflow-hidden",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 dark:bg-gray-800",children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-700 dark:text-gray-200 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-700 dark:text-gray-200 uppercase tracking-wider",children:"Période"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-700 dark:text-gray-200 uppercase tracking-wider",children:"Formation"})]})}),e.jsx("tbody",{children:0!==h.length||l?h.map(((t,n)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/60 transition",children:[e.jsx("td",{className:"px-4 py-2 border-b border-gray-100 dark:border-gray-700",children:t.date}),e.jsx("td",{className:"px-4 py-2 border-b border-gray-100 dark:border-gray-700",children:oA.find((e=>e.value===t.period))?.label||t.period}),e.jsxs("td",{className:"px-4 py-2 border-b border-gray-100 dark:border-gray-700",children:[t.formationName," "]})]},n))):e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"text-center py-4 text-gray-400 dark:text-gray-500",children:"Aucune absence"})})})]})}),e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsx("button",{onClick:()=>{y-g>=0&&b(y-g)},disabled:0===y,className:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition",children:"Précédent"}),e.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Page ",e.jsx("span",{className:"font-bold",children:x})," / ",w]}),e.jsx("button",{onClick:()=>{y+g<m&&b(y+g)},disabled:y+g>=m,className:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition",children:"Suivant"})]})]})},cA="/api/formations",uA=(e={})=>Sh.get(cA,e),dA=e=>Sh.get(`${cA}/${e}`),hA=e=>Sh.post(cA,e,{headers:{"Content-Type":"multipart/form-data"}}),fA=(e,t)=>Sh.put(`${cA}/${e}`,t),mA=e=>Sh.delete(`${cA}/${e}`),pA=(e,t)=>Sh.post(`${cA}/${e}/image`,t,{headers:{"Content-Type":"multipart/form-data"}}),gA=e=>Sh.delete(`${cA}/${e}/image`),yA=e=>Sh.get(`${cA}/${e}/available-students`),vA=(e,t)=>Sh.post(`${cA}/${e}/students/${t}`),bA=()=>Sh.get("/api/specializations"),xA=e=>Sh.post(`${cA}/${e}/enrollment-request`),wA=(e,t,n="")=>Sh.patch(`/api/formation-requests/${e}`,{status:t,comment:n}),EA=e=>e?e.success&&e.data||e.data?e.data:(Array.isArray(e),e):null,kA=e=>{if(!e)return null;const t=decodeURIComponent(e);return t.startsWith("http")?t:null},SA=e=>(console.error("API Error:",e),e.response?.data?.message?e.response.data.message:e.message?e.message:"Une erreur est survenue"),NA={getAllFormations:async(e=1,t=10,n="")=>{try{const r=await uA({params:{page:e,limit:t,search:n.trim()}}),s=EA(r.data),a=s?.formations?.map((e=>({...e,image_url:kA(e.image_url),dateStart:e.dateStart?new Date(e.dateStart):null,students:e.students||[],capacity:parseInt(e.capacity)||0,duration:parseInt(e.duration)||0})))||[];return{formations:a,pagination:s?.pagination||{currentPage:1,totalPages:1,limit:10,total:a.length}}}catch(r){throw new Error(SA(r))}},getFormation:async e=>{try{const t=await dA(e),n=EA(t.data),r=n?.formation;if(!r)throw new Error("Formation non trouvée");return{...r,image_url:kA(r.image_url),dateStart:r.dateStart?new Date(r.dateStart):null,students:r.students||[],capacity:parseInt(r.capacity)||0,duration:parseInt(r.duration)||0}}catch(t){throw new Error(SA(t))}},createFormation:async e=>{try{const t=["name","promotion","capacity","duration","dateStart","specializationId"].filter((t=>!e[t]));if(t.length>0)throw new Error(`Champs requis manquants : ${t.join(", ")}`);const n=new FormData;Object.entries(e).forEach((([e,t])=>{"imageFile"===e&&t?n.append("image",t):null!=t&&n.append(e,t.toString())}));const r=await hA(n),s=EA(r.data);return s?.formation}catch(t){throw new Error(SA(t))}},updateFormation:async(e,t)=>{try{if(!e)throw new Error("ID de formation manquant");const n=await fA(e,t),r=EA(n.data);return r?.formation}catch(n){throw new Error(SA(n))}},deleteFormation:async e=>{try{if(!e)throw new Error("ID de formation manquant");const t=await mA(e);return EA(t.data)}catch(t){throw new Error(SA(t))}},uploadFormationImage:async(e,t)=>{try{if(!e||!t)throw new Error("ID de formation ou fichier image manquant");const n=t.get("image");if(!(n&&n instanceof File))throw new Error("Fichier image invalide");const r=await pA(e,t);if(!r?.data)throw new Error("Réponse invalide du serveur");const s=r.data.data?.image_url||r.data.image_url;if(!s)throw new Error("URL de l'image manquante dans la réponse");return{success:!0,image_url:kA(s)}}catch(n){throw n instanceof Error?n:new Error("Erreur lors du téléchargement de l'image")}},deleteFormationImage:async e=>{try{if(!e)throw new Error("ID de formation manquant");const t=await gA(e);return EA(t.data)}catch(t){throw new Error(SA(t))}},getAvailableStudents:async e=>{try{const t=await yA(e);return EA(t.data)}catch(t){throw new Error(SA(t))}},addStudentToFormation:async(e,t)=>{try{const n=await vA(e,t);return EA(n.data)}catch(n){throw new Error(SA(n))}},getSpecializations:async()=>{try{const e=await bA();return e?.success&&e?.data?.specializations?e.data.specializations:[]}catch(e){throw new Error(SA(e))}},requestEnrollment:async e=>{const t=await xA(e);if(!t.success)throw new Error(t.message||"Erreur lors de la demande d'inscription à la formation.");return t.data},processEnrollmentRequest:async(e,t,n="")=>{try{const r=await wA(e,t,n);return EA(r.data)}catch(r){throw new Error(SA(r))}}},TA=X.forwardRef((({className:t,value:n=0,...r},s)=>e.jsx("div",{ref:s,className:`relative h-4 w-full overflow-hidden rounded-full bg-secondary ${t||""}`,...r,children:e.jsx("div",{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(n||0)}%)`,transition:"transform 0.2s ease-in-out"}})})));TA.displayName="Progress";const CA=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",version:"1.1",style:{shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",imageRendering:"optimizeQuality",fillRule:"evenodd",clipRule:"evenodd"},viewBox:"0 0 784.11 815.53",children:e.jsxs("g",{id:"Layer_x0020_1",children:[e.jsx("metadata",{id:"CorelCorpID_0Corel-Layer"}),e.jsx("path",{className:"fil0",d:"M392.05 0c-20.9,210.08 -184.06,378.41 -392.05,407.78 207.96,29.37 371.12,197.68 392.05,407.74 20.93,-210.06 184.09,-378.37 392.05,-407.74 -207.98,-29.38 -371.16,-197.69 -392.06,-407.78z"})]})});function RA({children:t,className:n,...r}){return e.jsxs("button",{className:`magic-button ${n||""}`,...r,children:[t,e.jsx("div",{className:"star-1",children:e.jsx(CA,{})}),e.jsx("div",{className:"star-2",children:e.jsx(CA,{})}),e.jsx("div",{className:"star-3",children:e.jsx(CA,{})}),e.jsx("div",{className:"star-4",children:e.jsx(CA,{})}),e.jsx("div",{className:"star-5",children:e.jsx(CA,{})}),e.jsx("div",{className:"star-6",children:e.jsx(CA,{})})]})}const jA=async(e={})=>{try{const t=await $d.get("/api/users/list",{params:{...e,includeRoles:!0}});return Array.isArray(t.data.data)?t.data.data:[]}catch(t){throw t}},AA={requested:async({formationName:e,formationId:t,userId:n},r=!0)=>{try{let t=n||localStorage.getItem("userId")||localStorage.getItem("user_id");if(!t)try{const e=localStorage.getItem("user");if(e){const n=JSON.parse(e);n&&n.id&&(t=n.id)}}catch(s){}if(!t)return;t=String(t);let r={};try{const e=DN(FT,"notificationPreferences",t);if(r=(await _T(e)).data()||{},!1===r.INFO)return}catch(s){}const a=new Date,i={recipientId:t,title:"Demande d'inscription envoyée",message:`Votre demande pour rejoindre la formation ${e} a bien été prise en compte.`,type:"INFO",targetUrl:"/formations",timestamp:a,read:!1};await LT(_N(FT,"notifications"),i);const o={id:`local-${a.getTime()}`,...i,createdAt:a.toISOString()};nA.cache.notifications&&nA.cache.notifications.notifications&&(nA.cache.notifications.notifications.unshift(o),nA.cache.unreadCount=(nA.cache.unreadCount||0)+1,nA.cache.notifications.pagination&&(nA.cache.notifications.pagination.total+=1),nA.notifySubscribers(),setTimeout((()=>{nA.getNotifications(1,10,!0,!0).then((()=>nA.getUnreadCount(!0))).catch((()=>{}))}),300))}catch(a){}},guestApplication:async({formationName:e,guestId:t})=>{try{const r=(await jA()).filter((e=>!!e.roles&&e.roles.some((e=>{if("object"==typeof e&&e.name&&(e=e.name),"string"!=typeof e)return!1;return e.toUpperCase().replace("ROLE_","")===tp.RECRUITER.toUpperCase().replace("ROLE_","")}))));if(!Array.isArray(r)||0===r.length)return;for(const s of r){const r=s.id;let a={};try{const e=DN(FT,"notificationPreferences",r);if(a=(await _T(e)).data()||{},!1===a.GUEST_APPLICATION)continue}catch(n){}const i={recipientId:r,title:"Nouvelle demande d'inscription invité",message:`Un invité a demandé à rejoindre la formation ${e}.`,type:"GUEST_APPLICATION",targetUrl:"/recruiter/enrollment-requests",timestamp:new Date,read:!1,guestId:t||null};await LT(_N(FT,"notifications"),i)}}catch(r){}}};async function _A(){const e=await fetch("/api/formation-requests/my",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!e.ok)throw new Error("Erreur lors du chargement des demandes");return await e.json()}function DA(){const{id:t}=se(),n=Y(),[r,s]=Q.useState(null),[a,i]=Q.useState(!0),[o,l]=Q.useState(null),[c,u]=Q.useState(!1),[d,h]=Q.useState(!1),{profileData:f}=Q.useContext(xR)||{},m=f?.stats?.profile?.isAcknowledged,[p,g]=Q.useState(!1),[y,v]=Q.useState(!1);Q.useEffect((()=>{i(!0),l(null),Promise.all([NA.getFormation(t),NA.getMyEnrollmentRequests?NA.getMyEnrollmentRequests():_A()]).then((([e,n])=>{s(e);let r=[];n&&n.requests?r=n.requests.filter((e=>null===e.status)).map((e=>e.formation.id)):Array.isArray(n)&&(r=n.filter((e=>null===e.status)).map((e=>e.formation?.id||e.formation_id)));const a=JSON.parse(localStorage.getItem("requestedFormations")||"[]").filter((e=>r.includes(e)));localStorage.setItem("requestedFormations",JSON.stringify(a)),u(r.includes(Number(t)))})).catch((e=>l(e.message||"Erreur lors du chargement de la formation."))).finally((()=>i(!1)))}),[t]);if(a)return e.jsx("div",{className:"flex justify-center items-center min-h-[300px]",children:e.jsx(mc,{className:"h-8 w-8 animate-spin text-primary"})});if(o||!r)return e.jsxs("div",{className:"p-4 bg-destructive/10 text-destructive rounded-md",children:[e.jsx("p",{children:"Une erreur est survenue lors du chargement de la formation."}),e.jsx("p",{className:"text-sm",children:o}),e.jsxs(Fm,{variant:"outline",className:"mt-4",onClick:()=>n(-1),children:[e.jsx(Kl,{className:"mr-2 h-4 w-4"})," Retour"]})]});const{name:b,promotion:x,image_url:w,description:E,capacity:k,duration:S,dateStart:N,location:T,specialization:C,students:R=[]}=r,j=R.length,A=Math.min(j/(k||1)*100,100);return e.jsxs("div",{className:"max-w-3xl mx-auto py-8 px-4",children:[e.jsxs(Fm,{variant:"ghost",className:"mb-6",onClick:()=>n(-1),children:[e.jsx(Kl,{className:"mr-2 h-4 w-4"})," Retour"]}),e.jsx(Vj,{className:"relative rounded-3xl shadow-xl bg-white border border-gray-200 overflow-visible",children:e.jsx(Hj,{className:"p-0",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 pt-12 pb-8 px-8",children:[e.jsx("div",{className:"-mt-20 mb-2 z-10",children:e.jsx("div",{className:"w-32 h-32 rounded-full shadow-lg border-4 border-white bg-gray-100 flex items-center justify-center overflow-hidden",children:e.jsx("img",{src:w||"/placeholder.svg",alt:b,className:"object-cover w-full h-full"})})}),e.jsx("div",{className:"font-extrabold text-3xl mb-1 text-gray-900 dark:text-white text-center drop-shadow tracking-tight animate-fade-in",children:b}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-2 animate-fade-in",children:[e.jsx(wC,{className:"bg-[#2563eb] text-white font-semibold shadow-sm animate-bounceIn",children:C?.name||"Formation"}),e.jsx(wC,{variant:"outline",className:"border-[#2563eb] text-[#2563eb] bg-white font-semibold animate-bounceIn delay-100",children:x||"N/A"})]}),e.jsx("div",{className:"text-gray-700 dark:text-gray-100 mb-2 text-center max-w-xl animate-fade-in-slow",children:E}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 w-full justify-center mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-amber-600 dark:text-amber-300",children:[e.jsx(Bl,{className:"h-5 w-5"}),e.jsxs("span",{children:["Début : ",N?new Date(N).toLocaleDateString():"Non défini"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[#528eb2] dark:text-[#78b9dd]",children:[e.jsx(nc,{className:"h-5 w-5"}),e.jsxs("span",{children:[S," mois"]})]}),T&&e.jsxs("div",{className:"flex items-center gap-2 text-[#528eb2] dark:text-[#78b9dd]",children:[e.jsx(vc,{className:"h-5 w-5"}),e.jsx("span",{children:T})]})]}),e.jsxs("div",{className:"w-full mt-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Mc,{className:"h-5 w-5 text-blue-500"}),e.jsxs("span",{className:"text-base font-medium",children:[j," / ",k," étudiants inscrits"]})]})}),e.jsx(TA,{value:A,className:"h-2"})]}),R&&R.length>0&&e.jsxs("div",{className:"w-full mt-8",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Étudiants inscrits :"}),e.jsx("ul",{className:"list-disc pl-6 space-y-1 text-left text-sm",children:R.map(((t,n)=>e.jsxs("li",{children:[t.firstname," ",t.lastname," (",t.email,")"]},t.id||n)))})]}),e.jsx("div",{className:"w-full flex justify-center mt-8",children:c?e.jsxs(Fm,{className:"w-full max-w-xs text-base font-medium bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-300 cursor-not-allowed flex items-center justify-center gap-2",disabled:!0,onClick:e=>e.stopPropagation(),children:[e.jsx(pc,{className:"h-4 w-4 mr-2"}),"Demande envoyée"]}):e.jsx(RA,{className:"w-full max-w-xs text-base font-medium bg-gradient-to-r from-amber-400 via-[#528eb2] to-[#78b9dd] hover:from-transparent hover:to-transparent hover:text-amber-600 dark:hover:text-white",onClick:()=>{m?v(!0):g(!0)},disabled:d,children:e.jsxs("span",{className:"flex items-center justify-center gap-2",children:["Demander à rejoindre ",e.jsx(Ql,{className:"ml-2 h-4 w-4"})]})})})]})})}),e.jsx(Hm,{open:p,onOpenChange:g,children:e.jsx(Qm,{className:"bg-gradient-to-br from-amber-50 via-blue-50 to-white dark:from-amber-900/30 dark:via-blue-900/20 dark:to-slate-900 p-0 overflow-hidden",children:e.jsxs("div",{className:"flex flex-col items-center px-6 pt-8 pb-6",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-pink-300 via-purple-300 to-indigo-300 dark:from-pink-900/30 dark:via-purple-900/30 dark:to-indigo-900/30 flex items-center justify-center mb-4 shadow-lg",children:e.jsx(dc,{className:"w-12 h-12 text-white dark:text-white"})}),e.jsxs(Xm,{className:"w-full text-center",children:[e.jsx(Ym,{className:"text-2xl font-bold mb-2",children:"Profil à compléter !"}),e.jsx(Zm,{asChild:!0,children:e.jsxs("div",{className:"mb-4 text-base text-gray-700 dark:text-gray-200",children:[e.jsx("span",{className:"block mb-2",children:"Oups, il te manque encore quelques infos pour pouvoir faire une demande :"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-1 text-left",children:[e.jsx("li",{children:e.jsx("button",{type:"button",className:"underline text-blue-600 dark:text-blue-300 hover:text-blue-800 dark:hover:text-blue-100 transition-colors cursor-pointer p-0 bg-transparent border-0",onClick:()=>{g(!1),n("/settings/profile")},children:"Ajoute ton profil LinkedIn"})}),e.jsx("li",{children:e.jsx("button",{type:"button",className:"underline text-amber-700 dark:text-amber-300 hover:text-amber-900 dark:hover:text-amber-100 transition-colors cursor-pointer p-0 bg-transparent border-0",onClick:()=>{g(!1),n("/settings/career")},children:"Dépose ton CV"})}),e.jsx("li",{children:e.jsx("button",{type:"button",className:"underline text-emerald-700 dark:text-emerald-300 hover:text-emerald-900 dark:hover:text-emerald-100 transition-colors cursor-pointer p-0 bg-transparent border-0",onClick:()=>{g(!1),n("/settings/career")},children:"Ajoute au moins un diplôme"})})]}),e.jsx("span",{className:"block mt-4",children:"C'est rapide, et ça t'ouvrira toutes les portes 🚀"})]})})]}),e.jsxs(Jm,{className:"w-full flex flex-col gap-2 mt-2",children:[e.jsx(Fm,{variant:"outline",onClick:()=>g(!1),className:"w-full",children:"Fermer"}),e.jsx(Fm,{asChild:!0,variant:"default",className:"w-full text-base font-semibold",children:e.jsx("a",{href:"/settings/profile",className:"text-primary",onClick:()=>g(!1),children:"Compléter mon profil"})})]})]})})}),e.jsx(Hm,{open:y,onOpenChange:v,children:e.jsxs(Qm,{children:[e.jsxs(Xm,{children:[e.jsx(Ym,{children:"Confirmer la demande"}),e.jsx(Zm,{children:"Voulez-vous vraiment rejoindre cette formation ? Cette action enverra une demande d'inscription."})]}),e.jsxs(Jm,{children:[e.jsx(Fm,{variant:"outline",onClick:()=>v(!1),children:"Annuler"}),e.jsx(Fm,{onClick:async()=>{h(!0),u(!0);const n=JSON.parse(localStorage.getItem("requestedFormations")||"[]");localStorage.setItem("requestedFormations",JSON.stringify([...new Set([...n,Number(t)])]));try{await NA.requestEnrollment(t),r&&await AA.requested({formationName:r.name,formationId:r.id,userId:f?.id}),Lh.success(e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-6 h-6 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{className:"font-bold",children:"Demande envoyée !"})]}),{duration:5e3})}catch(s){if(console.error("[FormationDetail] Erreur dans handleRequestJoin",s),s?.message&&s.message.toLowerCase().includes("demande d'inscription créée avec succès"))return r&&await AA.requested({formationName:r.name,formationId:r.id,userId:f?.id}),Lh.success(e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-6 h-6 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{className:"font-bold",children:"Demande envoyée !"})]}),{duration:5e3}),h(!1),void v(!1);Lh.error(s.message||"Erreur lors de la demande d'inscription à la formation."),u(!1)}finally{h(!1),v(!1)}},disabled:d,children:"Confirmer"})]})]})})]})}const IA=Q.lazy((()=>Te((()=>import("./Login-DtaJkTmS.js")),__vite__mapDeps([0,1,2,3,4,5,6])))),PA=Q.lazy((()=>Te((()=>import("./Register-CkdHohZy.js")),__vite__mapDeps([7,1,2,3,4,8,9,10,11,12,13,14,15,16,5,6,17])))),MA=Q.lazy((()=>Te((()=>import("./RegistrationSuccess-DDQs0Xdb.js")),__vite__mapDeps([18,1,2,3,19,5,6])))),LA=Q.lazy((()=>Te((()=>import("./VerificationSuccess-BCoqUTP3.js")),__vite__mapDeps([20,1,2,3,19,5,6])))),OA=Q.lazy((()=>Te((()=>import("./VerificationError-C7g4J_c2.js")),__vite__mapDeps([21,1,2,3,5,6])))),UA=Q.lazy((()=>Te((()=>import("./ResetPasswordRequest-CLx6L2sU.js")),__vite__mapDeps([22,1,2,3,23,5,6])))),FA=Q.lazy((()=>Te((()=>import("./ResetPasswordConfirmation-BH9lGX6-.js")),__vite__mapDeps([24,1,2,3,5,6])))),zA=Q.lazy((()=>Te((()=>import("./ResetPassword-DdaDjh8V.js")),__vite__mapDeps([25,1,2,3,23,15,16,5,6])))),VA=Q.lazy((()=>Te((()=>import("./SettingsProfile-Cx81SmiD.js")),__vite__mapDeps([26,1,2,3,5,27,28,8,9,23,29,30,31,10,32,33,34,13,35,11,6])))),BA=Q.lazy((()=>Te((()=>import("./SecuritySettings-qE7oGdXs.js")),__vite__mapDeps([36,1,2,3,23,9,37,38,16,33,5,6])))),qA=Q.lazy((()=>Te((()=>import("./NotificationSettings-CnmDiP5z.js")),__vite__mapDeps([39,1,2,3,34,9,37,38,5,6])))),$A=Q.lazy((()=>Te((()=>import("./CareerSettings-DPLTMk73.js")),__vite__mapDeps([40,1,2,3,38,5,29,23,30,8,9,31,10,32,28,27,33,34,11,12,6])))),HA=Q.lazy((()=>Te((()=>import("./ProfileView-BndpOMui.js")),__vite__mapDeps([41,1,2,3,5,6]))));Q.lazy((()=>Te((()=>import("./Dashboard-CLPO_par.js")),__vite__mapDeps([42,1,2,3,43,6,33,5]))));const WA=Q.lazy((()=>Te((()=>import("./Trombinoscope-BnAa1WXM.js")),__vite__mapDeps([44,1,2,3,5,33,45,6])))),GA=Q.lazy((()=>Te((()=>import("./Dashboard-ChiTCPJ9.js")),__vite__mapDeps([46,1,2,3,47,5,23,9,43,6,33,14])))),KA=Q.lazy((()=>Te((()=>import("./Dashboard-BCkF6Dk8.js")),__vite__mapDeps([48,1,2,3,47,5,43,6,33,49,50,51])))),QA=Q.lazy((()=>Te((()=>import("./Schedule-NZUazehK.js")),__vite__mapDeps([52,1,2,3,53,54,55,10,56,5,6])))),XA=Q.lazy((()=>Te((()=>import("./Grades-aXSesOd_.js")),__vite__mapDeps([57,1,2,3,58,53,54,59,51,32,5,6])))),JA=Q.lazy((()=>Te((()=>import("./Absences-DPoiGkgu.js")),__vite__mapDeps([60,1,2,3,58,6,61,54,49,10,5])))),YA=Q.lazy((()=>Te((()=>import("./Projects-DHWP2YU_.js")),__vite__mapDeps([62,1,2,3])))),ZA=Q.lazy((()=>Te((()=>import("./Attendance-B6wP3CP9.js")),__vite__mapDeps([63,1,2,3,64,37,19,33,65,58,55,43,6,66,5])))),e_=Q.lazy((()=>Te((()=>import("./Dashboard-C2mB3mYu.js")),__vite__mapDeps([67,1,2,3,47,5,53,54,43,6,33,58,66,59,50])))),t_=Q.lazy((()=>Te((()=>import("./SignatureMonitoring-BeJ7akv9.js")),__vite__mapDeps([68,1,2,3,58,66,10,19,5,6])))),n_=Q.lazy((()=>Te((()=>import("./Attendance-Cm8ud17p.js")),__vite__mapDeps([69,1,2,3,64,37,19,33,65,58,55,43,6,66,5])))),r_=Q.lazy((()=>Te((()=>import("./SignatureHistory-BoAKsRSB.js")),__vite__mapDeps([70,1,2,3,65,58,55,37,33,19,5,6])))),s_=Q.lazy((()=>Te((()=>import("./TeacherFormationList-DLFpqwTt.js")),__vite__mapDeps([71,1,2,3,5,72,23,58,6])))),a_=Q.lazy((()=>Te((()=>import("./TeacherFormationDetails-B1mq_pyF.js")),__vite__mapDeps([73,1,2,3,5,72,58,10,6])))),i_=Q.lazy((()=>Te((()=>import("./Dashboard-D8p0JFnw.js")),__vite__mapDeps([74,1,2,3,47,5,43,6,33,50])))),o_=Q.lazy((()=>Te((()=>import("./Dashboard-CXvcMKNt.js")),__vite__mapDeps([75,1,2,3,43,6,33,47,5])))),l_=Q.lazy((()=>Te((()=>import("./Dashboard-DcdSk3VF.js")),__vite__mapDeps([76,1,2,3,43,6,33,47,5,56])))),c_=Q.lazy((()=>Te((()=>import("./Dashboard-CRn8WVrg.js")),__vite__mapDeps([77,1,2,3,43,6,33,47,5,23,9,61,54])))),u_=Q.lazy((()=>Te((()=>import("./FormationTable-DhybBscm.js")),__vite__mapDeps([78,1,2,3,58,37,31,28,79,5,6])))),d_=Q.lazy((()=>Te((()=>import("./GuestStudentRoleManager-hpNe7TkK.js")),__vite__mapDeps([80,1,2,3,5,58,14,43,6,33,9])))),h_=Q.lazy((()=>Te((()=>import("./UserRoleManager-CfZOb_Gg.js")),__vite__mapDeps([81,1,2,3,43,6,33,23,61,54,55,82,58,28,9,37,79,8,10,35,5])))),f_=Q.lazy((()=>Te((()=>import("./FormationFinder-CuKAne1m.js")),__vite__mapDeps([83,1,2,3,5,6])))),m_=Q.lazy((()=>Te((()=>import("./AdminFormationsView-BwELiAa6.js")),__vite__mapDeps([84,1,2,3,37,28,79,78,58,31,5,6])))),p_=Q.lazy((()=>Te((()=>import("./WebDevelopment-DUgE7P8i.js")),__vite__mapDeps([85,1,2,3,86,5,6])))),g_=Q.lazy((()=>Te((()=>import("./Cybersecurity-jYnOLzf_.js")),__vite__mapDeps([87,1,2,3,86,5,6])))),y_=Q.lazy((()=>Te((()=>import("./ArtificialIntelligence-DBQL2TYB.js")),__vite__mapDeps([88,1,2,3,86,5,6])))),v_=Q.lazy((()=>Te((()=>import("./DataScience-DZ29QkTT.js")),__vite__mapDeps([89,1,2,3,86,5,6])))),b_=Q.lazy((()=>Te((()=>import("./MobileDevelopment-C0EkOkvD.js")),__vite__mapDeps([90,1,2,3,86,5,6])))),x_=Q.lazy((()=>Te((()=>import("./GameDevelopment-DMs4_4Mt.js")),__vite__mapDeps([91,1,2,3,86,5,6])))),w_=Q.lazy((()=>Te((()=>import("./Games-DjC5tLk-.js")),__vite__mapDeps([92,1,2,3,5,6])))),E_=Q.lazy((()=>Te((()=>import("./NotificationsPage-Cix3xJBc.js")),__vite__mapDeps([93,1,2,3,55,10,5,6]))));Q.lazy((()=>Te((()=>import("./HomePage-B3pQtmK3.js")),__vite__mapDeps([94,1,2,3,5,6]))));const k_=Q.lazy((()=>Te((()=>import("./Home-BbpaCdrO.js")),__vite__mapDeps([95,1,2,3,5,6])))),S_=Q.lazy((()=>Te((()=>import("./TicketList-BVK1y_2D.js")),__vite__mapDeps([96,1,2,3,5,6])))),N_=Q.lazy((()=>Te((()=>import("./TicketForm-C9dojjbu.js")),__vite__mapDeps([97,1,2,3,5,6])))),T_=Q.lazy((()=>Te((()=>import("./TicketDetail-CowRmek7.js")),__vite__mapDeps([98,1,2,3,5,6])))),C_=Q.lazy((()=>Te((()=>import("./TicketServiceList-Dj_zP6vE.js")),__vite__mapDeps([99,1,2,3,5,6])))),R_=Q.lazy((()=>Te((()=>import("./FormationForm-DVI_bgAG.js")),__vite__mapDeps([100,1,2,3,23,9,101,61,54,27,28,5,6])))),j_=Q.lazy((()=>Te((()=>import("./EditFormationForm-DVG8DUZ2.js")),__vite__mapDeps([102,1,2,3,23,9,101,61,54,34,28,29,5,56,27,6])))),A_=Q.lazy((()=>Te((()=>import("./index-BsNBXA2I.js")),__vite__mapDeps([103,1,2,3,37,23,61,54,82,45,33,5,6])))),__=Q.lazy((()=>Te((()=>import("./EnrollmentRequests-krRhBClj.js")),__vite__mapDeps([104,1,2,3,23,9,61,54,5,6])))),D_=Q.lazy((()=>Te((()=>import("./FormationDetails-0gyhHeb-.js")),__vite__mapDeps([105,1,2,3,5,6])))),I_=Q.lazy((()=>Te((()=>import("./MyFormation-BCh7X4v0.js")),__vite__mapDeps([106,1,2,3,56,5,6])))),P_=Q.lazy((()=>Te((()=>import("./EnrollmentRequests-6fZTnolc.js")),__vite__mapDeps([107,1,2,3,53,54,56,28,5,6])))),M_=()=>(nA.getNotifications(1,10,!0,!0).then((e=>{})).catch((e=>{})),e.jsx(he,{client:Hh,children:e.jsx(_R,{children:e.jsx(BT,{children:e.jsx(np,{children:e.jsxs(rg,{children:[e.jsxs(ae,{children:[e.jsx(ie,{element:e.jsx(LR,{}),children:e.jsxs(ie,{element:e.jsx(MR,{}),children:[e.jsx(ie,{index:!0,element:e.jsx(k_,{})}),e.jsx(ie,{path:"/login",element:e.jsx(IA,{})}),e.jsx(ie,{path:"/register",element:e.jsx(PA,{})}),e.jsx(ie,{path:"/registration-success",element:e.jsx(MA,{})}),e.jsx(ie,{path:"/verification-success",element:e.jsx(LA,{})}),e.jsx(ie,{path:"/verification-error",element:e.jsx(OA,{})}),e.jsx(ie,{path:"/reset-password",element:e.jsx(UA,{})}),e.jsx(ie,{path:"/reset-password/confirmation",element:e.jsx(FA,{})}),e.jsx(ie,{path:"/reset-password/reset",element:e.jsx(zA,{})}),e.jsx(ie,{path:"/formations",element:e.jsx(u_,{})}),e.jsx(ie,{path:"/formation-finder",element:e.jsx(f_,{})}),e.jsx(ie,{path:"/all-formations",element:e.jsx(m_,{})}),e.jsx(ie,{path:"/formations/web",element:e.jsx(p_,{})}),e.jsx(ie,{path:"/formations/ai",element:e.jsx(y_,{})}),e.jsx(ie,{path:"/formations/cybersecurity",element:e.jsx(g_,{})}),e.jsx(ie,{path:"/formations/mobile",element:e.jsx(b_,{})}),e.jsx(ie,{path:"/formations/data-science",element:e.jsx(v_,{})}),e.jsx(ie,{path:"/formations/game",element:e.jsx(x_,{})}),e.jsx(ie,{path:"/skill-assessment",element:e.jsx(w_,{})})]})}),e.jsx(ie,{element:e.jsx(jR,{}),children:e.jsxs(ie,{element:e.jsx(NC,{children:e.jsx(RR,{})}),children:[e.jsx(ie,{path:"/dashboard",element:e.jsx(iR,{})}),e.jsx(ie,{path:"/notifications",element:e.jsx(E_,{})}),e.jsx(ie,{path:"/profile",element:e.jsx(HA,{})}),e.jsx(ie,{path:"/profile/:userId",element:e.jsx(Zj,{})}),e.jsx(ie,{path:"/public-profile/:userId",element:e.jsx(Zj,{})}),e.jsxs(ie,{element:e.jsx(HR,{}),children:[e.jsx(ie,{path:"/settings",element:e.jsx(ne,{to:"/profile",replace:!0})}),e.jsx(ie,{path:"/settings/profile",element:e.jsx(VA,{})}),e.jsx(ie,{path:"/settings/career",element:e.jsx($A,{})}),e.jsx(ie,{path:"/settings/security",element:e.jsx(BA,{})}),e.jsx(ie,{path:"/settings/notifications",element:e.jsx(qA,{})})]}),e.jsx(ie,{path:"/admin/dashboard",element:e.jsx(aR,{roles:tp.ADMIN,fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(GA,{})})}),e.jsx(ie,{path:"/admin/users",element:e.jsx(aR,{roles:[tp.ADMIN,tp.HR,tp.TEACHER,tp.SUPERADMIN],children:e.jsx(h_,{})})}),e.jsx(ie,{path:"/admin/ticket-services",element:e.jsx(aR,{roles:[tp.ADMIN,tp.SUPERADMIN],fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(C_,{})})}),e.jsx(ie,{path:"/admin/tickets",element:e.jsx(aR,{roles:[tp.ADMIN,tp.SUPERADMIN],fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(ej,{})})}),e.jsx(ie,{path:"/admin/formations",element:e.jsx(aR,{roles:[tp.ADMIN,tp.SUPERADMIN],fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(m_,{})})}),e.jsx(ie,{path:"/admin/formations/:id",element:e.jsx(aR,{roles:[tp.ADMIN,tp.SUPERADMIN],fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(D_,{})})}),e.jsx(ie,{path:"/admin/formations/new",element:e.jsx(aR,{roles:[tp.ADMIN,tp.SUPERADMIN],fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(R_,{})})}),e.jsx(ie,{path:"/admin/formations/edit/:id",element:e.jsx(aR,{roles:[tp.ADMIN,tp.SUPERADMIN],fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(j_,{})})}),e.jsx(ie,{path:"/formation-management",element:e.jsx(aR,{roles:[tp.RECRUITER,tp.ADMIN,tp.SUPERADMIN],fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(m_,{})})}),e.jsx(ie,{path:"/formation-management/:id",element:e.jsx(aR,{roles:[tp.RECRUITER,tp.ADMIN,tp.SUPERADMIN],fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(D_,{})})}),e.jsx(ie,{path:"/formation-management/new",element:e.jsx(aR,{roles:[tp.RECRUITER,tp.ADMIN,tp.SUPERADMIN],fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(R_,{})})}),e.jsx(ie,{path:"/formation-management/edit/:id",element:e.jsx(aR,{roles:[tp.RECRUITER,tp.ADMIN,tp.SUPERADMIN],fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(j_,{})})}),e.jsxs(ie,{path:"/student",children:[e.jsx(ie,{path:"dashboard",element:e.jsx(aR,{roles:tp.STUDENT,fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(KA,{})})}),e.jsx(ie,{path:"schedule",element:e.jsx(aR,{roles:tp.STUDENT,fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(QA,{})})}),e.jsx(ie,{path:"grades",element:e.jsx(aR,{roles:tp.STUDENT,fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(XA,{})})}),e.jsx(ie,{path:"absences",element:e.jsx(aR,{roles:tp.STUDENT,fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(JA,{})})}),e.jsx(ie,{path:"projects",element:e.jsx(aR,{roles:tp.STUDENT,fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(YA,{})})}),e.jsx(ie,{path:"formation",element:e.jsx(aR,{roles:tp.STUDENT,fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(I_,{})})}),e.jsx(ie,{element:e.jsx(WR,{}),children:e.jsx(ie,{path:"attendance",element:e.jsx(ZA,{})})})]}),e.jsxs(ie,{path:"/teacher",children:[e.jsx(ie,{path:"dashboard",element:e.jsx(aR,{roles:tp.TEACHER,fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(e_,{})})}),e.jsx(ie,{path:"attendance",element:e.jsx(aR,{roles:tp.TEACHER,fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(n_,{})})}),e.jsx(ie,{path:"signature-monitoring",element:e.jsx(aR,{roles:tp.TEACHER,fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(t_,{})})}),e.jsx(ie,{path:"signature-history",element:e.jsx(aR,{roles:tp.TEACHER,fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(r_,{})})}),e.jsx(ie,{path:"formations",element:e.jsx(aR,{roles:tp.TEACHER,fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(s_,{})})}),e.jsx(ie,{path:"formations/:id",element:e.jsx(aR,{roles:tp.TEACHER,fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(a_,{})})})]}),e.jsx(ie,{path:"/hr/dashboard",element:e.jsx(aR,{roles:tp.HR,fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(i_,{})})}),e.jsx(ie,{path:"/admin",children:e.jsx(ie,{path:"users",element:e.jsx(aR,{roles:[tp.ADMIN,tp.SUPERADMIN],fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(h_,{})})})}),e.jsx(ie,{path:"/superadmin/dashboard",element:e.jsx(aR,{roles:tp.SUPERADMIN,fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(o_,{})})}),e.jsx(ie,{path:"/guest/dashboard",element:e.jsx(aR,{roles:tp.GUEST,fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(l_,{})})}),e.jsx(ie,{path:"/guest/enrollment-requests",element:e.jsx(aR,{roles:tp.GUEST,fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(P_,{})})}),e.jsx(ie,{path:"/recruiter/dashboard",element:e.jsx(aR,{roles:tp.RECRUITER,fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(c_,{})})}),e.jsx(ie,{path:"/recruiter/guest-student-roles",element:e.jsx(aR,{roles:[tp.RECRUITER,tp.ADMIN,tp.SUPERADMIN],fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(d_,{})})}),e.jsx(ie,{path:"/recruiter/enrollment-requests",element:e.jsx(aR,{roles:tp.RECRUITER,fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(__,{})})}),e.jsx(ie,{path:"trombinoscope",element:e.jsx(aR,{roles:[tp.SUPERADMIN,tp.ADMIN,tp.TEACHER,tp.STUDENT,tp.RECRUITER],fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(WA,{})})}),e.jsx(ie,{path:"/tickets",element:e.jsx(S_,{})}),e.jsx(ie,{path:"/tickets/new",element:e.jsx(N_,{})}),e.jsx(ie,{path:"/tickets/:id",element:e.jsx(T_,{})}),e.jsx(ie,{path:"/translation",element:e.jsx(tA,{})}),e.jsxs(ie,{path:"/formations",children:[e.jsx(ie,{path:"new",element:e.jsx(aR,{roles:[tp.ADMIN,tp.SUPERADMIN,tp.RECRUITER],fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(R_,{})})}),e.jsx(ie,{path:"edit/:id",element:e.jsx(aR,{roles:[tp.ADMIN,tp.SUPERADMIN,tp.RECRUITER],fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(j_,{})})}),e.jsx(ie,{path:"list",element:e.jsx(aR,{roles:[tp.GUEST],fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(A_,{})})})]}),e.jsx(ie,{path:"/recruiter/formation-management",element:e.jsx(aR,{roles:[tp.RECRUITER,tp.ADMIN,tp.SUPERADMIN],fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(m_,{})})}),e.jsx(ie,{path:"/recruiter/formation-management/:id",element:e.jsx(aR,{roles:[tp.RECRUITER,tp.ADMIN,tp.SUPERADMIN],fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(D_,{})})}),e.jsx(ie,{path:"/absences/formation/:formationId",element:e.jsx(aR,{roles:[tp.TEACHER,tp.ADMIN,tp.SUPERADMIN],fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(iA,{})})}),e.jsx(ie,{path:"/absences/user/:userId",element:e.jsx(aR,{roles:[tp.TEACHER,tp.ADMIN,tp.SUPERADMIN,tp.STUDENT],fallback:e.jsx(ne,{to:"/dashboard",replace:!0}),children:e.jsx(lA,{})})}),e.jsx(ie,{path:"/formations/:id",element:e.jsx(DA,{})})]})}),e.jsx(ie,{path:"*",element:e.jsx(ne,{to:"/",replace:!0})})]}),e.jsx(XR,{})]})})})})}));window.queryClient=Hh,Se.createRoot(document.getElementById("root")).render(e.jsx(Q.StrictMode,{children:e.jsxs(he,{client:Hh,children:[e.jsx(oe,{children:e.jsx(M_,{})}),!1]})}));export{Hh as $,ze as A,Fm as B,Ql as C,Hm as D,Sf as E,jp as F,_p as G,ql as H,Xm as I,Jm as J,lc as K,mc as L,vc as M,Tc as N,yc as O,tR as P,VT as Q,zl as R,Zp as S,cc as T,Pc as U,fc as V,cj as W,hj as X,lp as Y,gf as Z,Te as _,rp as a,$p as a$,lh as a0,jc as a1,Wm as a2,$T as a3,Sc as a4,Ul as a5,DN as a6,FT as a7,_T as a8,MT as a9,WT as aA,GT as aB,QT as aC,Oj as aD,Uj as aE,Fj as aF,ec as aG,zj as aH,$h as aI,Nc as aJ,xR as aK,RA as aL,pc as aM,dc as aN,NA as aO,AA as aP,HT as aQ,uC as aR,XT as aS,Af as aT,Dp as aU,Wh as aV,$d as aW,yj as aX,dC as aY,UN as aZ,op as a_,PT as aa,pf as ab,Lc as ac,bC as ad,Qj as ae,LT as af,_N as ag,nA as ah,ac as ai,oc as aj,Xl as ak,Fl as al,vj as am,Yj as an,ef as ao,Hp as ap,tp as aq,Mc as ar,Gl as as,uj as at,dj as au,jA as av,sg as aw,nc as ax,wC as ay,Ol as az,nf as b,Ap as b0,zm as b1,Vm as b2,Bm as b3,qm as b4,$m as b5,pj as b6,gj as b7,TC as b8,TA as b9,Qn as ba,Re as bb,Ss as bc,De as bd,Ae as be,wt as bf,Et as bg,Es as bh,Cc as bi,Dc as bj,ic as bk,sc as bl,oh as bm,Kl as c,DR as d,PR as e,Om as f,nR as g,rR as h,Wl as i,Bl as j,Qm as k,Ym as l,jl as m,Zm as n,Yl as o,Cf as p,Vj as q,Bj as r,qj as s,Lh as t,sp as u,$j as v,Hj as w,Wj as x,Sh as y,Ll as z};
