import{j as e,n as t,s as n,H as o,E as r,G as i,t as s,J as a,o as l,y as c,q as u,r as d,A as p,B as f,Y as h,Z as x,K as g}from"./ui-CEgDFHEN.js";import{r as y}from"./router-Cgxi-4fo.js";import{f as m}from"./index-CbCqSr3O.js";var[v,b]=t("Tooltip",[n]),w=n(),T="TooltipProvider",C=700,E="tooltip.open",[j,R]=v(T),_=t=>{const{__scopeTooltip:n,delayDuration:o=C,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=t,a=y.useRef(!0),l=y.useRef(!1),c=y.useRef(0);return y.useEffect((()=>{const e=c.current;return()=>window.clearTimeout(e)}),[]),e.jsx(j,{scope:n,isOpenDelayedRef:a,delayDuration:o,onOpen:y.useCallback((()=>{window.clearTimeout(c.current),a.current=!1}),[]),onClose:y.useCallback((()=>{window.clearTimeout(c.current),c.current=window.setTimeout((()=>a.current=!0),r)}),[r]),isPointerInTransitRef:l,onPointerInTransitChange:y.useCallback((e=>{l.current=e}),[]),disableHoverableContent:i,children:s})};_.displayName=T;var k="Tooltip",[D,L]=v(k),P=t=>{const{__scopeTooltip:n,children:s,open:a,defaultOpen:l,onOpenChange:c,disableHoverableContent:u,delayDuration:d}=t,p=R(k,t.__scopeTooltip),f=w(n),[h,x]=y.useState(null),g=o(),m=y.useRef(0),v=u??p.disableHoverableContent,b=d??p.delayDuration,T=y.useRef(!1),[C,j]=r({prop:a,defaultProp:l??!1,onChange:e=>{e?(p.onOpen(),document.dispatchEvent(new CustomEvent(E))):p.onClose(),c?.(e)},caller:k}),_=y.useMemo((()=>C?T.current?"delayed-open":"instant-open":"closed"),[C]),L=y.useCallback((()=>{window.clearTimeout(m.current),m.current=0,T.current=!1,j(!0)}),[j]),P=y.useCallback((()=>{window.clearTimeout(m.current),m.current=0,j(!1)}),[j]),O=y.useCallback((()=>{window.clearTimeout(m.current),m.current=window.setTimeout((()=>{T.current=!0,j(!0),m.current=0}),b)}),[b,j]);return y.useEffect((()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)}),[]),e.jsx(i,{...f,children:e.jsx(D,{scope:n,contentId:g,open:C,stateAttribute:_,trigger:h,onTriggerChange:x,onTriggerEnter:y.useCallback((()=>{p.isOpenDelayedRef.current?O():L()}),[p.isOpenDelayedRef,O,L]),onTriggerLeave:y.useCallback((()=>{v?P():(window.clearTimeout(m.current),m.current=0)}),[P,v]),onOpen:L,onClose:P,disableHoverableContent:v,children:s})})};P.displayName=k;var O="TooltipTrigger",M=y.forwardRef(((t,n)=>{const{__scopeTooltip:o,...r}=t,i=L(O,o),u=R(O,o),d=w(o),p=y.useRef(null),f=s(n,p,i.onTriggerChange),h=y.useRef(!1),x=y.useRef(!1),g=y.useCallback((()=>h.current=!1),[]);return y.useEffect((()=>()=>document.removeEventListener("pointerup",g)),[g]),e.jsx(a,{asChild:!0,...d,children:e.jsx(l.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:f,onPointerMove:c(t.onPointerMove,(e=>{"touch"!==e.pointerType&&(x.current||u.isPointerInTransitRef.current||(i.onTriggerEnter(),x.current=!0))})),onPointerLeave:c(t.onPointerLeave,(()=>{i.onTriggerLeave(),x.current=!1})),onPointerDown:c(t.onPointerDown,(()=>{i.open&&i.onClose(),h.current=!0,document.addEventListener("pointerup",g,{once:!0})})),onFocus:c(t.onFocus,(()=>{h.current||i.onOpen()})),onBlur:c(t.onBlur,i.onClose),onClick:c(t.onClick,i.onClose)})})}));M.displayName=O;var I="TooltipPortal",[N,H]=v(I,{forceMount:void 0}),A=t=>{const{__scopeTooltip:n,forceMount:o,children:r,container:i}=t,s=L(I,n);return e.jsx(N,{scope:n,forceMount:o,children:e.jsx(u,{present:o||s.open,children:e.jsx(d,{asChild:!0,container:i,children:r})})})};A.displayName=I;var B="TooltipContent",z=y.forwardRef(((t,n)=>{const o=H(B,t.__scopeTooltip),{forceMount:r=o.forceMount,side:i="top",...s}=t,a=L(B,t.__scopeTooltip);return e.jsx(u,{present:r||a.open,children:a.disableHoverableContent?e.jsx(X,{side:i,...s,ref:n}):e.jsx(F,{side:i,...s,ref:n})})})),F=y.forwardRef(((t,n)=>{const o=L(B,t.__scopeTooltip),r=R(B,t.__scopeTooltip),i=y.useRef(null),a=s(n,i),[l,c]=y.useState(null),{trigger:u,onClose:d}=o,p=i.current,{onPointerInTransitChange:f}=r,h=y.useCallback((()=>{c(null),f(!1)}),[f]),x=y.useCallback(((e,t)=>{const n=e.currentTarget,o={x:e.clientX,y:e.clientY},r=function(e,t,n=5){const o=[];switch(t){case"top":o.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":o.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":o.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":o.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n})}return o}(o,function(e,t){const n=Math.abs(t.top-e.y),o=Math.abs(t.bottom-e.y),r=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,o,r,i)){case i:return"left";case r:return"right";case n:return"top";case o:return"bottom";default:throw new Error("unreachable")}}(o,n.getBoundingClientRect())),i=function(e){const t=e.slice();return t.sort(((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0)),function(e){if(e.length<=1)return e.slice();const t=[];for(let o=0;o<e.length;o++){const n=e[o];for(;t.length>=2;){const e=t[t.length-1],o=t[t.length-2];if(!((e.x-o.x)*(n.y-o.y)>=(e.y-o.y)*(n.x-o.x)))break;t.pop()}t.push(n)}t.pop();const n=[];for(let o=e.length-1;o>=0;o--){const t=e[o];for(;n.length>=2;){const e=n[n.length-1],o=n[n.length-2];if(!((e.x-o.x)*(t.y-o.y)>=(e.y-o.y)*(t.x-o.x)))break;n.pop()}n.push(t)}return n.pop(),1===t.length&&1===n.length&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}(t)}([...r,...function(e){const{top:t,right:n,bottom:o,left:r}=e;return[{x:r,y:t},{x:n,y:t},{x:n,y:o},{x:r,y:o}]}(t.getBoundingClientRect())]);c(i),f(!0)}),[f]);return y.useEffect((()=>()=>h()),[h]),y.useEffect((()=>{if(u&&p){const e=e=>x(e,p),t=e=>x(e,u);return u.addEventListener("pointerleave",e),p.addEventListener("pointerleave",t),()=>{u.removeEventListener("pointerleave",e),p.removeEventListener("pointerleave",t)}}}),[u,p,x,h]),y.useEffect((()=>{if(l){const e=e=>{const t=e.target,n={x:e.clientX,y:e.clientY},o=u?.contains(t)||p?.contains(t),r=!function(e,t){const{x:n,y:o}=e;let r=!1;for(let i=0,s=t.length-1;i<t.length;s=i++){const e=t[i],a=t[s],l=e.x,c=e.y,u=a.x,d=a.y;c>o!=d>o&&n<(u-l)*(o-c)/(d-c)+l&&(r=!r)}return r}(n,l);o?h():r&&(h(),d())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}}),[u,p,l,d,h]),e.jsx(X,{...t,ref:a})})),[K,Y]=v(k,{isInside:!1}),S=h("TooltipContent"),X=y.forwardRef(((t,n)=>{const{__scopeTooltip:o,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:a,...l}=t,c=L(B,o),u=w(o),{onClose:d}=c;return y.useEffect((()=>(document.addEventListener(E,d),()=>document.removeEventListener(E,d))),[d]),y.useEffect((()=>{if(c.trigger){const e=e=>{const t=e.target;t?.contains(c.trigger)&&d()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}}),[c.trigger,d]),e.jsx(p,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:e=>e.preventDefault(),onDismiss:d,children:e.jsxs(f,{"data-state":c.stateAttribute,...u,...l,ref:n,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(S,{children:r}),e.jsx(K,{scope:o,isInside:!0,children:e.jsx(x,{id:c.contentId,role:"tooltip",children:i||r})})]})})}));z.displayName=B;var q="TooltipArrow";y.forwardRef(((t,n)=>{const{__scopeTooltip:o,...r}=t,i=w(o);return Y(q,o).isInside?null:e.jsx(g,{...i,...r,ref:n})})).displayName=q;var G=A,J=z;const Z=_,Q=P,U=M,V=y.forwardRef((({className:t,sideOffset:n=4,...o},r)=>e.jsx(G,{children:e.jsx(J,{ref:r,sideOffset:n,className:m("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...o})})));V.displayName=J.displayName;export{Z as T,Q as a,U as b,V as c};
